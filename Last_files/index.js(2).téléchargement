!function(e){function t(t){for(var n,i,o=t[0],s=t[1],a=0,c=[];a<o.length;a++)i=o[a],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&c.push(r[i][0]),r[i]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n]);for(u&&u(t);c.length;)c.shift()()}var n={},r={0:0};function i(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.e=function(e){var t=[],n=r[e];if(0!==n)if(n)t.push(n[2]);else{var o=new Promise((function(t,i){n=r[e]=[t,i]}));t.push(n[2]=o);var s,a=document.createElement("script");a.charset="utf-8",a.timeout=120,i.nc&&a.setAttribute("nonce",i.nc),a.src=function(e){return i.p+"packages/"+({}[e]||e)+"/index.js"}(e);var u=new Error;s=function(t){a.onerror=a.onload=null,clearTimeout(c);var n=r[e];if(0!==n){if(n){var i=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;u.message="Loading chunk "+e+" failed.\n("+i+": "+o+")",u.name="ChunkLoadError",u.type=i,u.request=o,n[1](u)}r[e]=void 0}};var c=setTimeout((function(){s({type:"timeout",target:a})}),12e4);a.onerror=a.onload=s,document.head.appendChild(a)}return Promise.all(t)},i.m=e,i.c=n,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/",i.oe=function(e){throw console.error(e),e};var o=window.webpackJsonp=window.webpackJsonp||[],s=o.push.bind(o);o.push=t,o=o.slice();for(var a=0;a<o.length;a++)t(o[a]);var u=s;i(i.s=329)}([function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return oe})),n.d(t,"b",(function(){return Hi})),n.d(t,"c",(function(){return ii})),n.d(t,"d",(function(){return ci})),n.d(t,"e",(function(){return ee})),n.d(t,"f",(function(){return Ui})),n.d(t,"g",(function(){return Li})),n.d(t,"h",(function(){return _i})),n.d(t,"i",(function(){return xe})),n.d(t,"j",(function(){return Fe})),n.d(t,"k",(function(){return T})),n.d(t,"l",(function(){return B})),n.d(t,"m",(function(){return L})),n.d(t,"n",(function(){return m})),n.d(t,"o",(function(){return qi})),n.d(t,"p",(function(){return b})),n.d(t,"q",(function(){return A})),n.d(t,"r",(function(){return g})),n.d(t,"s",(function(){return N})),n.d(t,"t",(function(){return v})),n.d(t,"u",(function(){return Di})),n.d(t,"v",(function(){return So})),n.d(t,"w",(function(){return Ve})),n.d(t,"x",(function(){return Oo})),n.d(t,"y",(function(){return H})),n.d(t,"z",(function(){return F})),n.d(t,"A",(function(){return i})),n.d(t,"B",(function(){return O})),n.d(t,"C",(function(){return V})),n.d(t,"D",(function(){return q})),n.d(t,"E",(function(){return ji})),n.d(t,"F",(function(){return ue})),n.d(t,"G",(function(){return Mi})),n.d(t,"H",(function(){return M})),n.d(t,"I",(function(){return Io})),n.d(t,"J",(function(){return _})),n.d(t,"K",(function(){return j})),n.d(t,"L",(function(){return Uo})),n.d(t,"M",(function(){return ns})),n.d(t,"N",(function(){return Lo})),n.d(t,"O",(function(){return P})),n.d(t,"P",(function(){return s})),n.d(t,"Q",(function(){return Do})),n.d(t,"R",(function(){return Po})),n.d(t,"S",(function(){return No})),n.d(t,"T",(function(){return Ro})),n.d(t,"U",(function(){return fe})),n.d(t,"V",(function(){return Mo})),n.d(t,"W",(function(){return Qo})),n.d(t,"X",(function(){return Jo})),n.d(t,"Y",(function(){return Xo})),n.d(t,"Z",(function(){return es})),n.d(t,"ab",(function(){return Zo})),n.d(t,"bb",(function(){return $o})),n.d(t,"cb",(function(){return ne})),n.d(t,"db",(function(){return mo})),n.d(t,"eb",(function(){return Ae})),n.d(t,"fb",(function(){return ve})),n.d(t,"gb",(function(){return G})),n.d(t,"hb",(function(){return Ii})),n.d(t,"ib",(function(){return K})),n.d(t,"jb",(function(){return J})),n.d(t,"kb",(function(){return x})),n.d(t,"lb",(function(){return z})),n.d(t,"mb",(function(){return xo})),n.d(t,"nb",(function(){return Q})),n.d(t,"ob",(function(){return ui})),n.d(t,"pb",(function(){return we})),n.d(t,"qb",(function(){return Se})),n.d(t,"rb",(function(){return d})),n.d(t,"sb",(function(){return Wi})),n.d(t,"tb",(function(){return He})),n.d(t,"ub",(function(){return Y})),n.d(t,"vb",(function(){return ce})),n.d(t,"wb",(function(){return Ge})),n.d(t,"xb",(function(){return Fo})),n.d(t,"yb",(function(){return Ee})),n.d(t,"zb",(function(){return pe})),n.d(t,"Ab",(function(){return Me})),n.d(t,"Bb",(function(){return W})),n.d(t,"Cb",(function(){return To})),n.d(t,"Db",(function(){return be})),n.d(t,"Eb",(function(){return Bo})),n.d(t,"Fb",(function(){return Ei})),n.d(t,"Gb",(function(){return a})),n.d(t,"Hb",(function(){return R})),n.d(t,"Ib",(function(){return le})),n.d(t,"Jb",(function(){return k})),n.d(t,"Kb",(function(){return Ao})),n.d(t,"Lb",(function(){return De})),n.d(t,"Mb",(function(){return jo})),n.d(t,"Nb",(function(){return Yi})),n.d(t,"Ob",(function(){return Co})),n.d(t,"Pb",(function(){return de})),n.d(t,"Qb",(function(){return he})),n.d(t,"Rb",(function(){return u})),n.d(t,"Sb",(function(){return ae})),n.d(t,"Tb",(function(){return re})),n.d(t,"Ub",(function(){return Ce})),n.d(t,"Vb",(function(){return o})),n.d(t,"Wb",(function(){return Te})),n.d(t,"Xb",(function(){return I})),n.d(t,"Yb",(function(){return ge})),n.d(t,"Zb",(function(){return me})),n.d(t,"ac",(function(){return ye})),n.d(t,"bc",(function(){return $})),n.d(t,"cc",(function(){return Ue})),n.d(t,"dc",(function(){return h})),n.d(t,"ec",(function(){return l})),n.d(t,"fc",(function(){return w})),n.d(t,"gc",(function(){return c})),n.d(t,"hc",(function(){return Ni})),n.d(t,"ic",(function(){return os})),n.d(t,"jc",(function(){return ie})),n.d(t,"kc",(function(){return f})),n.d(t,"lc",(function(){return us})),n.d(t,"mc",(function(){return Ri})),n.d(t,"nc",(function(){return hi})),n.d(t,"oc",(function(){return si}));var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function s(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function a(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))}function u(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}}function c(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function l(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function h(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}"function"==typeof SuppressedError&&SuppressedError;var d,f="4.9.9",p=function(){function e(){}return Object.defineProperty(e,"OS_VERSION",{get:function(){return"undefined"!=typeof navigator&&navigator.userAgent?navigator.userAgent.replace(/,/g,"."):"noAgent"},enumerable:!1,configurable:!0}),Object.defineProperty(e,"SDK_VERSION",{get:function(){return f},enumerable:!1,configurable:!0}),Object.defineProperty(e,"SDK_MAJOR_VERSION",{get:function(){return e.SDK_VERSION.split(".")[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e,"DEFAULT_MAX_UNREAD_COUNT_OF_SUPER_GROUP_CHANNEL",{get:function(){return 100},enumerable:!1,configurable:!0}),Object.defineProperty(e,"INTERNAL_CALL",{get:function(){return"ic"},enumerable:!1,configurable:!0}),e}();!function(e){e[e.STAT_LOG_NOT_ALLOWED=400108]="STAT_LOG_NOT_ALLOWED",e[e.NON_AUTHORIZED=400108]="NON_AUTHORIZED",e[e.INVALID_TOKEN=400111]="INVALID_TOKEN",e[e.NOT_FOUND_IN_DATABASE=400201]="NOT_FOUND_IN_DATABASE",e[e.USER_AUTH_DEACTIVATED=400300]="USER_AUTH_DEACTIVATED",e[e.USER_AUTH_DELETED_OR_NOT_FOUND=400301]="USER_AUTH_DELETED_OR_NOT_FOUND",e[e.SESSION_TOKEN_EXPIRED=400302]="SESSION_TOKEN_EXPIRED",e[e.SESSION_KEY_EXPIRED=400309]="SESSION_KEY_EXPIRED",e[e.SESSION_REVOKED=400310]="SESSION_REVOKED",e[e.INVALID_SESSION_TYPE=400312]="INVALID_SESSION_TYPE",e[e.STAT_UPLOAD_NOT_ALLOWED=403200]="STAT_UPLOAD_NOT_ALLOWED",e[e.INTERNAL_SERVER_ERROR=500901]="INTERNAL_SERVER_ERROR",e[e.RATE_LIMIT_EXCEEDED=500910]="RATE_LIMIT_EXCEEDED",e[e.UNKNOWN_SERVER_ERROR=900200]="UNKNOWN_SERVER_ERROR",e[e.DEBUG_MODE_REQUIRED=7e5]="DEBUG_MODE_REQUIRED",e[e.LOST_INSTANCE=700100]="LOST_INSTANCE",e[e.CONNECTION_RENEW=700102]="CONNECTION_RENEW",e[e.INVALID_CONNECTION_STATE_TRANSITION=700200]="INVALID_CONNECTION_STATE_TRANSITION",e[e.INVALID_COMMAND=700700]="INVALID_COMMAND",e[e.UNKNOWN_ERROR=77e4]="UNKNOWN_ERROR",e[e.INVALID_INITIALIZATION=800100]="INVALID_INITIALIZATION",e[e.CONNECTION_REQUIRED=800101]="CONNECTION_REQUIRED",e[e.CONNECTION_CANCELED=800102]="CONNECTION_CANCELED",e[e.INVALID_PARAMETER=800110]="INVALID_PARAMETER",e[e.NOT_SUPPORTED_ERROR=800111]="NOT_SUPPORTED_ERROR",e[e.NETWORK_ERROR=800120]="NETWORK_ERROR",e[e.NETWORK_ROUTING_ERROR=800121]="NETWORK_ROUTING_ERROR",e[e.MALFORMED_DATA=800130]="MALFORMED_DATA",e[e.MALFORMED_ERROR_DATA=800140]="MALFORMED_ERROR_DATA",e[e.WRONG_CHANNEL_TYPE=800150]="WRONG_CHANNEL_TYPE",e[e.MARK_AS_READ_RATE_LIMIT_EXCEEDED=800160]="MARK_AS_READ_RATE_LIMIT_EXCEEDED",e[e.QUERY_IN_PROGRESS=800170]="QUERY_IN_PROGRESS",e[e.ACK_TIMEOUT=800180]="ACK_TIMEOUT",e[e.LOGIN_TIMEOUT=800190]="LOGIN_TIMEOUT",e[e.WEBSOCKET_CONNECTION_CLOSED=800200]="WEBSOCKET_CONNECTION_CLOSED",e[e.WEBSOCKET_CONNECTION_FAILED=800210]="WEBSOCKET_CONNECTION_FAILED",e[e.REQUEST_FAILED=800220]="REQUEST_FAILED",e[e.FILE_UPLOAD_CANCEL_FAILED=800230]="FILE_UPLOAD_CANCEL_FAILED",e[e.REQUEST_CANCELED=800240]="REQUEST_CANCELED",e[e.REQUEST_DUPLICATED=800250]="REQUEST_DUPLICATED",e[e.FILE_SIZE_LIMIT_EXCEEDED=800260]="FILE_SIZE_LIMIT_EXCEEDED",e[e.SESSION_TOKEN_REQUEST_FAILED=800500]="SESSION_TOKEN_REQUEST_FAILED",e[e.SESSION_TOKEN_REFRESHED=800501]="SESSION_TOKEN_REFRESHED",e[e.SESSION_TOKEN_REFRESH_FAILED=800502]="SESSION_TOKEN_REFRESH_FAILED",e[e.COLLECTION_DISPOSED=800600]="COLLECTION_DISPOSED",e[e.DATABASE_ERROR=800700]="DATABASE_ERROR"}(d||(d={}));var m,g,b,v,y,_=function(e){return!(e instanceof w&&!e.shouldThrowOutside)},w=function(e){function t(n){var r=n.code,i=void 0===r?0:r,o=n.message,s=void 0===o?"":o,a=e.call(this,s)||this;return a.shouldThrowOutside=!1,a.name="SendbirdError",a.code=i,Object.setPrototypeOf(a,t.prototype),a}return i(t,e),Object.defineProperty(t.prototype,"isInvalidTokenError",{get:function(){return this.code===d.INVALID_TOKEN},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isSessionExpiredError",{get:function(){return this.isSessionTokenExpiredError||this.isSessionKeyExpiredError},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isSessionTokenExpiredError",{get:function(){return this.code===d.SESSION_TOKEN_EXPIRED},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isSessionKeyExpiredError",{get:function(){return this.code===d.SESSION_KEY_EXPIRED},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isSessionInvalidatedError",{get:function(){return this.isSessionRevokedError||this.isUserAuthDeactivedError||this.isUserAuthDeletedOrNotFoundError},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isSessionRevokedError",{get:function(){return this.code===d.SESSION_REVOKED},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isUserAuthDeactivedError",{get:function(){return this.code===d.USER_AUTH_DEACTIVATED},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isUserAuthDeletedOrNotFoundError",{get:function(){return this.code===d.USER_AUTH_DELETED_OR_NOT_FOUND},enumerable:!1,configurable:!0}),Object.defineProperty(t,"debugModeRequired",{get:function(){return new t({code:d.DEBUG_MODE_REQUIRED,message:"Cannot run this operation in production mode."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"lostInstance",{get:function(){return new t({code:d.LOST_INSTANCE,message:"Instance ID is missing. It should belong to an instance."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"invalidCommand",{get:function(){return new t({code:d.INVALID_COMMAND,message:"Cannot send invalid command."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"unknown",{get:function(){return new t({code:d.UNKNOWN_ERROR,message:"Unknown error occurred."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"connectionRenew",{get:function(){return new t({code:d.CONNECTION_RENEW,message:"Connection restarts."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"invalidConnectionStateTransition",{get:function(){return new t({code:d.INVALID_CONNECTION_STATE_TRANSITION,message:"Invalid connection state transition."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"connectionRequired",{get:function(){return new t({code:d.CONNECTION_REQUIRED,message:"Connection is required."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"connectionCanceled",{get:function(){return new t({code:d.CONNECTION_CANCELED,message:"Connection is canceled."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"invalidParameters",{get:function(){return new t({code:d.INVALID_PARAMETER,message:"Invalid parameters."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"notSupportedError",{get:function(){return new t({code:d.NOT_SUPPORTED_ERROR,message:"Given parameters are not supported."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"channelTypeNotSupportedError",{get:function(){return new t({code:d.NOT_SUPPORTED_ERROR,message:"Called method is not supported in the current channel's channel type."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"networkError",{get:function(){return new t({code:d.NETWORK_ERROR,message:"There was a network error."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"markAsReadAllRateLimitExceeded",{get:function(){return new t({code:d.MARK_AS_READ_RATE_LIMIT_EXCEEDED,message:"markAsRead rate limit exceeded."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"queryInProgress",{get:function(){return new t({code:d.QUERY_IN_PROGRESS,message:"Query in progress."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"noAckTimeout",{get:function(){return new t({code:d.ACK_TIMEOUT,message:"Command received no ack."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"loginTimeout",{get:function(){return new t({code:d.LOGIN_TIMEOUT,message:"Connection timeout."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"connectionClosed",{get:function(){return new t({code:d.WEBSOCKET_CONNECTION_CLOSED,message:"Connection is closed. Please reconnect."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"requestFailed",{get:function(){return new t({code:d.REQUEST_FAILED,message:"Request failed."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"alreadyConnectedAsAnotherUser",{get:function(){return new t({code:d.REQUEST_FAILED,message:"Already logged in as a different user. Call disconnect() first."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"fileUploadCanceled",{get:function(){return new t({code:d.FILE_UPLOAD_CANCEL_FAILED,message:"File upload has been canceled."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"requestCanceled",{get:function(){return new t({code:d.REQUEST_CANCELED,message:"Request has been canceled."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"sessionTokenRefreshFailed",{get:function(){return new t({code:d.SESSION_TOKEN_REFRESH_FAILED,message:"Failed to refresh the session key."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"sessionTokenRequestFailed",{get:function(){return new t({code:d.SESSION_TOKEN_REQUEST_FAILED,message:"Failed to get the session token."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"databaseError",{get:function(){return new t({code:d.DATABASE_ERROR,message:"Database error."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"fileSizeLimitExceededError",{get:function(){return new t({code:d.FILE_SIZE_LIMIT_EXCEEDED,message:"File size exceeds the file size limit."})},enumerable:!1,configurable:!0}),t.prototype.throwOutside=function(){throw this.shouldThrowOutside=!0,this},t}(Error),E=[d.CONNECTION_REQUIRED,d.NETWORK_ERROR,d.ACK_TIMEOUT,d.WEBSOCKET_CONNECTION_CLOSED,d.WEBSOCKET_CONNECTION_FAILED,d.FILE_UPLOAD_CANCEL_FAILED,d.REQUEST_CANCELED,d.INTERNAL_SERVER_ERROR,d.RATE_LIMIT_EXCEEDED,d.UNKNOWN_SERVER_ERROR],S=[d.WEBSOCKET_CONNECTION_CLOSED,d.WEBSOCKET_CONNECTION_FAILED,d.CONNECTION_REQUIRED],M=function(e,t){if(e!==t){var n=o({},e),r=o({},t);return!(n.hasOwnProperty("messageId")&&r.hasOwnProperty("messageId")&&n.messageId!==r.messageId||n.hasOwnProperty("reqId")&&r.hasOwnProperty("reqId")&&n.reqId!==r.reqId||(n.hasOwnProperty("messageId")&&delete n.messageId,n.hasOwnProperty("reqId")&&delete n.reqId,r.hasOwnProperty("messageId")&&delete r.messageId,r.hasOwnProperty("reqId")&&delete r.reqId,JSON.stringify(n)!==JSON.stringify(r)))}return!0},O=function(e,t,n){return void 0===n&&(n=!1),!(!n||null!=t)||("string"!=typeof e?"object"==typeof e?A(e,t):C(e,t):typeof t===e)},A=function(e,t,n){return void 0===n&&(n=!1),!(!n||null!=t)||Object.values(e).includes(t)},C=function(e,t){return t instanceof e},T=function(e,t,n){return void 0===n&&(n=!1),!(!n||null!=t)||Array.isArray(t)&&t.every((function(t){return O(e,t)}))},k=function(e,t){return void 0===t&&(t=!1),!(!t||void 0!==e)||"number"==typeof e&&13===e.toString().length},x=function(e){return e>0&&E.indexOf(e)>=0},j=function(e){return e>0&&S.indexOf(e)>=0},I=function(e,t){if(void 0===t&&(t=!1),t&&null==e)return!0;var n="object"==typeof e&&null!==e&&e.hasOwnProperty("name")&&"string"==typeof e.name&&e.hasOwnProperty("uri")&&"string"==typeof e.uri&&e.hasOwnProperty("type")&&"string"==typeof e.type;if(!n){if("undefined"!=typeof Blob)return e instanceof Blob;if("undefined"!=typeof File)return e instanceof File}return n},R=function(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(var n=h([],l(e),!1).sort(),r=h([],l(t),!1).sort(),i=0;i<n.length;++i)if(n[i]!==r[i])return!1;return!0},N=function(){function e(e){var t=void 0===e?{}:e,n=t.useMemberInfoInMessage,r=void 0===n||n,i=t.typingIndicatorInvalidateTime,o=void 0===i?1e4:i,s=t.typingIndicatorThrottle,a=void 0===s?1e3:s,u=t.websocketResponseTimeout,c=void 0===u?1e4:u,l=t.websocketPayloadDecompression,h=void 0===l||l,d=t.sessionTokenRefreshTimeout,f=void 0===d?60:d;this._useMemberInfoInMessage=!0,this._typingIndicatorInvalidateTime=1e4,this._typingIndicatorThrottle=1e3,this._websocketResponseTimeout=1e4,this._sessionTokenRefreshTimeout=60,this._useMemberInfoInMessage=r,this._typingIndicatorInvalidateTime=o,this._typingIndicatorThrottle=a,this._websocketResponseTimeout=c,this._sessionTokenRefreshTimeout=f,this.websocketPayloadDecompression=h}return Object.defineProperty(e.prototype,"useMemberInfoInMessage",{get:function(){return this._useMemberInfoInMessage},set:function(e){O("boolean",e)&&(this._useMemberInfoInMessage=e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"typingIndicatorInvalidateTime",{get:function(){return this._typingIndicatorInvalidateTime},set:function(e){O("number",e)&&(this._typingIndicatorInvalidateTime=e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"typingIndicatorThrottle",{get:function(){return this._typingIndicatorThrottle},set:function(e){O("number",e)&&e>=1e3&&e<=9e3&&(this._typingIndicatorThrottle=e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"websocketResponseTimeout",{get:function(){return this._websocketResponseTimeout},set:function(e){O("number",e)&&e>=5e3&&e<=3e4&&(this._websocketResponseTimeout=e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sessionTokenRefreshTimeout",{get:function(){return this._sessionTokenRefreshTimeout},set:function(e){O("number",e)&&(e<60?e=60:e>1800&&(e=1800),this._sessionTokenRefreshTimeout=e)},enumerable:!1,configurable:!0}),e}(),P={encrypt:function(e){return e},decrypt:function(e){return e}},D=function(){function e(e){var t=e.store;this._preference=new Map,this._store=t}return e.prototype._savePreferenceKeys=function(){return a(this,void 0,void 0,(function(){return u(this,(function(e){switch(e.label){case 0:return[4,this._store.set({key:this._keysAddress,value:h([],l(this._preference.keys()),!1)})];case 1:return e.sent(),[2]}}))}))},e.prototype.init=function(e,t){var n;return void 0===t&&(t=1),a(this,void 0,void 0,(function(){var r,i,o,s,a,l,h,d,f,p;return u(this,(function(u){switch(u.label){case 0:return this._version=t,this._keysAddress=e,r="".concat(e,".metadata.version"),[4,this._store.get(r)];case 1:return i=u.sent(),[4,this._store.get(e)];case 2:return o=null!==(n=u.sent())&&void 0!==n?n:[],!i||i.version<this._version?[4,this._resetPreferenceData(o,r)]:[3,4];case 3:return u.sent(),[3,11];case 4:u.trys.push([4,9,10,11]),s=c(o),a=s.next(),u.label=5;case 5:return a.done?[3,8]:(l=a.value,[4,this._store.get(l)]);case 6:(h=u.sent())&&this._preference.set(l,h),u.label=7;case 7:return a=s.next(),[3,5];case 8:return[3,11];case 9:return d=u.sent(),f={error:d},[3,11];case 10:try{a&&!a.done&&(p=s.return)&&p.call(s)}finally{if(f)throw f.error}return[7];case 11:return[2]}}))}))},e.prototype._resetPreferenceData=function(e,t){return a(this,void 0,void 0,(function(){return u(this,(function(n){switch(n.label){case 0:return this._preference=new Map,[4,this._store.removeMany(e)];case 1:return n.sent(),[4,this._store.set({key:t,value:{version:this._version}})];case 2:return n.sent(),[2]}}))}))},e.prototype.get=function(e){return a(this,void 0,void 0,(function(){return u(this,(function(t){return[2,this._preference.get(e)]}))}))},e.prototype.set=function(e,t){return a(this,void 0,void 0,(function(){var n;return u(this,(function(r){switch(r.label){case 0:return n=!this._preference.has(e),[4,this._store.set({key:e,value:t})];case 1:return r.sent(),this._preference.set(e,t),n?[4,this._savePreferenceKeys()]:[3,3];case 2:r.sent(),r.label=3;case 3:return[2]}}))}))},e.prototype.remove=function(e){return a(this,void 0,void 0,(function(){return u(this,(function(t){switch(t.label){case 0:return[4,this._store.remove(e)];case 1:return t.sent(),this._preference.delete(e),[4,this._savePreferenceKeys()];case 2:return t.sent(),[2]}}))}))},e.prototype.clear=function(){return a(this,void 0,void 0,(function(){return u(this,(function(e){switch(e.label){case 0:return[4,this._store.removeMany(h([],l(this._preference.keys()),!1))];case 1:return e.sent(),this._preference.clear(),[4,this._savePreferenceKeys()];case 2:return e.sent(),[2]}}))}))},e}(),U=function(){function e(e){var t=e.encryption,n=e.store,r=e.localCacheEnabled,i=e.localCacheConfig;this.store=n,this.preference=new D({store:n}),this.encryption=null!=t?t:P,this.localCacheEnabled=r,this.localCacheConfig=i}return e.prototype.replaceStore=function(e){this.store=e,this.preference=new D({store:e})},e}();!function(e){e.SUCCESS="success",e.PENDING="pending",e.ERROR="error"}(m||(m={})),function(e){e.DEFAULT="default",e.ALL="all",e.MENTION_ONLY="mention_only",e.OFF="off"}(g||(g={})),function(e){e.FCM="gcm",e.APNS="apns",e.UNKNOWN="unknown"}(b||(b={})),function(e){e.ALTERNATIVE="alternative",e.DEFAULT="default"}(v||(v={})),function(e){e.CUSTOM="custom",e.MESSAGE_COLLECTION_ACCESSED_AT="messagecollection_accessed_at"}(y||(y={}));var L,F=function(){function e(e){var t=e.channel,n=e.cachedMessageCount;this._cachedMessageCount=0,this._channel=t,this._cachedMessageCount=n}return Object.defineProperty(e.prototype,"channel",{get:function(){return this._channel},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cachedMessageCount",{get:function(){return this._cachedMessageCount},enumerable:!1,configurable:!0}),e}(),B=function(){function e(e){var t=void 0===e?{}:e,n=t.maxSize,r=void 0===n?256:n,i=t.clearOrder,o=void 0===i?y.MESSAGE_COLLECTION_ACCESSED_AT:i,s=t.customClearOrderComparator;this._clearOrderComparatorUseMessageCollectionAccessedAt=function(e,t){return e.channel.messageCollectionLastAccessedAt===t.channel.messageCollectionLastAccessedAt?e.channel.lastMessage&&!t.channel.lastMessage?1:!e.channel.lastMessage&&t.channel.lastMessage?-1:e.channel.lastMessage||t.channel.lastMessage?e.channel.lastMessage.createdAt-t.channel.lastMessage.createdAt:0:e.channel.messageCollectionLastAccessedAt>t.channel.messageCollectionLastAccessedAt?1:-1},this._maxSize=Math.max(r,64),s?(this._clearOrder=o,this._customClearOrderComparator=s):this._clearOrder=y.MESSAGE_COLLECTION_ACCESSED_AT}return Object.defineProperty(e.prototype,"maxSize",{get:function(){return this._maxSize},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"clearOrder",{get:function(){return this._clearOrder},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"clearOrderComparator",{get:function(){var e;return this._clearOrder===y.MESSAGE_COLLECTION_ACCESSED_AT?this._clearOrderComparatorUseMessageCollectionAccessedAt:null!==(e=this._customClearOrderComparator)&&void 0!==e?e:this._clearOrderComparatorUseMessageCollectionAccessedAt},enumerable:!1,configurable:!0}),e}();!function(e){e.FEED="feed",e.CHAT="chat"}(L||(L={}));var H,q,V,G,z,W,K,Y,Q,J,Z=function(){function e(){this.isRefreshing=!1}return Object.defineProperty(e.prototype,"hasSession",{get:function(){return!!this.sessionKey},enumerable:!1,configurable:!0}),e.prototype.clear=function(){this.authToken=void 0,this.sessionKey=void 0,this.services=[]},e.prototype.hasLessServiceScopeThan=function(e){var t;return!this.sessionKey||!(null===(t=this.services)||void 0===t?void 0:t.includes(L.CHAT))||e.includes(L.CHAT)},e}(),$=function(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:3&n|8).toString(16)}))},X=function(){function e(e){var t=e.container;this._container={},this._container=t,this.key=$()}return e.prototype._register=function(e,t,n){var r;return e in this._container||(this._container[e]=new Map),null===(r=this._container[e])||void 0===r||r.set(this.key,{occurence:t,handler:n}),this},e.prototype.on=function(e,t){return this._register(e,-1,t)},e.prototype.once=function(e,t){return this._register(e,1,t)},e.prototype.close=function(){var e;for(var t in this._container)null===(e=this._container[t])||void 0===e||e.delete(this.key)},e}(),ee=function(){function e(){this._container={}}return e.prototype.on=function(e,t){return new X({container:this._container}).on(e,t)},e.prototype.once=function(e,t){return new X({container:this._container}).once(e,t)},e.prototype.dispatch=function(e,t){var n,r,i=this._container[e];if(i){var o=[];try{for(var s=c(i.keys()),a=s.next();!a.done;a=s.next()){var u=a.value,l=i.get(u);l.handler(t),l.occurence>0&&(l.occurence--,0===l.occurence&&o.push(u))}}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}o.forEach((function(e){return i.delete(e)}))}},e}(),te=function(){function e(){this._dispatcher=new ee}return e.prototype.on=function(e){return this._dispatcher.on("event",e)},e.prototype.once=function(e){return this._dispatcher.once("event",e)},e.prototype.dispatch=function(e){this._dispatcher.dispatch("event",e)},e}(),ne=function(){},re=function(e){var t={};return e&&Object.keys(e).forEach((function(n){void 0===e[n]||Number.isNaN(e[n])||null===e[n]||(t[n]=e[n])})),t},ie=function(e){if(null!=e){if("object"==typeof e){if(Array.isArray(e)){var t=h([],l(e),!1);for(var n in t)t[n]=ie(t[n]);return t}for(var r in e)null===e[r]&&delete e[r];return e}return e}};!function(e){e.BASE="base",e.GROUP="group",e.OPEN="open",e.FEED="feed"}(H||(H={})),function(e){e.OPERATOR="operator",e.NONE="none"}(q||(q={})),function(e){e.MUTED="muted",e.UNMUTED="unmuted"}(V||(V={})),function(e){e.BASE="base",e.USER="user",e.FILE="file",e.ADMIN="admin"}(G||(G={})),function(e){e.ALL="",e.USER="MESG",e.FILE="FILE",e.ADMIN="ADMM"}(z||(z={})),function(e){e.USER="MESG",e.FILE="FILE",e.ADMIN="ADMM"}(W||(W={})),function(e){e.USERS="users",e.CHANNEL="channel"}(K||(K={})),function(e){e.ALL="all",e.NONE="none",e.ONLY_REPLY_TO_CHANNEL="only_reply_to_channel"}(Y||(Y={})),function(e){e.DEFAULT="default",e.SUPPRESS="suppress"}(Q||(Q={})),function(e){e.PENDING="pending",e.SCHEDULED="scheduled",e.SUCCEEDED="succeeded",e.FAILED="failed",e.CANCELED="canceled"}(J||(J={}));var oe,se="v3",ae="/".concat(se,"/users"),ue="/".concat(se,"/storage/file"),ce="/".concat(se,"/group_channels"),le="/".concat(se,"/sdk/group_channels"),he="/".concat(se,"/open_channels"),de="/".concat(se,"/sdk/open_channels"),fe="/".concat(se,"/search"),pe="/".concat(se,"/report"),me="/".concat(se,"/emojis"),ge="/".concat(se,"/emoji_categories"),be="/".concat(se,"/polls"),ve="/".concat(se,"/scheduled_messages"),ye="/".concat(se,"/sdk/ui_kit/configuration"),_e="/".concat(se,"/sdk/statistics"),we=("/".concat(se,"/notifications"),function(e){switch(e){case H.FEED:case H.GROUP:return ce;case H.OPEN:return he;default:return null}}),Ee=function(e){switch(e){case H.GROUP:return"".concat(pe,"/group_channels");case H.OPEN:return"".concat(pe,"/open_channels");default:return null}},Se=function(e,t,n){var r,i;switch(e){case K.CHANNEL:return!0;case K.USERS:if(t)try{for(var o=c(t),s=o.next();!s.done;s=o.next())if(s.value===n)return!0}catch(e){r={error:e}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}}return!1},Me=function(e,t,n){var r,i,o,s,a=Se(null!==(r=e.mentionType)&&void 0!==r?r:null,null!==(i=e.mentionedUserIds)&&void 0!==i?i:[],n),u=Se(null!==(o=t.mentionType)&&void 0!==o?o:null,null!==(s=t.mentionedUserIds)&&void 0!==s?s:[],n);return!a&&u?1:a&&!u?-1:0},Oe=function(e,t,n){var r,i=t||new FormData;for(var o in e)if(e.hasOwnProperty(o)){var s=e[o],a=n?"".concat(n,"[").concat(o,"]"):o;I(s)?i.append(a,s,null!==(r=s.name)&&void 0!==r?r:"filename"):"object"!=typeof s||null===s||Array.isArray(s)||s instanceof Blob?i.append(a,String(s)):i=Oe(s,i,a)}return i};!function(e){e.GET="GET",e.POST="POST",e.PUT="PUT",e.DELETE="DELETE"}(oe||(oe={}));var Ae,Ce=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.params={},t.requireAuth=!0,t.headers={},t.requestId=$(),t}return i(t,e),t.prototype.encodeParams=function(e){var t=this;return null==e||""===e?encodeURIComponent(""):Array.isArray(e)?e.map((function(e){return t.encodeParams(e)})).join(","):"object"==typeof e?encodeURIComponent(JSON.stringify(e)):encodeURIComponent(String(e))},Object.defineProperty(t.prototype,"query",{get:function(){var e=this,t=re(this.params);return"?".concat(Object.keys(t).map((function(n){return"".concat(encodeURIComponent(n),"=").concat(e.encodeParams(t[n]))})).join("&"))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"payload",{get:function(){var e=re(this.params);return Object.keys(e).some((function(t){return I(e[t])}))?Oe(e):JSON.stringify(e)},enumerable:!1,configurable:!0}),t}(ne),Te=function(e){function t(t,n){var r=e.call(this)||this;return r._iid=t,r._payload=n,r}return i(t,e),Object.defineProperty(t.prototype,"payload",{get:function(){return o({},this._payload)},enumerable:!1,configurable:!0}),t.prototype.as=function(e){return new e(this._iid,this.payload)},t}(ne),ke=function(e){function t(t){var n=e.call(this)||this;return n.requestId=t,n}return i(t,e),t}(ne),xe=function(e){function t(t){var n=t.expires_in,r=t.reason,i=void 0===r?d.SESSION_KEY_EXPIRED:r,o=e.call(this)||this;switch(o.expiresIn=null!=n?n:0,i){case d.SESSION_KEY_EXPIRED:case d.SESSION_TOKEN_EXPIRED:case d.SESSION_REVOKED:case d.USER_AUTH_DEACTIVATED:case d.USER_AUTH_DELETED_OR_NOT_FOUND:o.error=new w({code:i})}return o}return i(t,e),Object.defineProperty(t.prototype,"invalidateSessionToken",{get:function(){var e;return!!(null===(e=this.error)||void 0===e?void 0:e.isSessionTokenExpiredError)},enumerable:!1,configurable:!0}),t}(ne),je=function(e){function t(t){var n=e.call(this)||this;return n.statLog=t,n}return i(t,e),t}(ne),Ie=function(e){function t(t){var n=t.request,r=t.deferred,i=t.error,o=void 0===i?w.requestFailed:i,s=e.call(this)||this;return s.request=n,s.deferred=r,s.error=o,s}return i(t,e),t}(ne);!function(e){e.FEATURE_LOCALCACHE="feature:local_cache",e.FEATURE_LOCALCACHE_EVENT="feature:local_cache_event",e.WEBSOCKET_CONNECT="ws:connect",e.API_RESULT="api:result"}(Ae||(Ae={}));var Re,Ne,Pe,De=function(){function e(e){var t=e.type,n=e.data,r=e.ts,i=void 0===r?Date.now():r;this.type=t,this.createdAt=i,this.data=n}return e.payloadify=function(e){return re({stat_type:e.type,ts:e.createdAt,data:re(e.data)})},e}(),Ue=function(){return"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"==navigator.product},Le=function(){return!("undefined"==typeof navigator||!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini|Windows Phone/i.test(navigator.userAgent))};!function(e){e.CHAT="chat",e.CALLS="calls",e.DESK="desk",e.LIVE="live",e.UIKIT_CHAT="uikit-chat",e.UIKIT_LIVE="uikit-live"}(Re||(Re={})),function(e){e.ANDROID="android",e.IOS="ios",e.JS="js",e.UNREAL="unreal",e.UNITY="unity",e.REACT_NATIVE="react-native",e.FLUTTER="flutter"}(Ne||(Ne={})),function(e){e.ANDROID="android",e.IOS="ios",e.WEB="web",e.MOBILE_WEB="mobile_web",e.WINDOWS="windows"}(Pe||(Pe={}));var Fe="^(0|[1-9]\\d*)\\.(0|[1-9]\\d*)\\.(0|[1-9]\\d*)(?:-((?:0|[1-9]\\d*|\\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\\.(?:0|[1-9]\\d*|\\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\\+([0-9a-zA-Z-]+(?:\\.[0-9a-zA-Z-]+)*))?$",Be=function(){function e(){}return e.sendbirdSdkUserAgentWithExtension=function(e){var t=Ue()?Ne.REACT_NATIVE:Ne.JS,n={main_sdk_info:"chat/".concat(t,"/").concat(p.SDK_VERSION),device_os_platform:Le()?"mobile-web":"web",os_version:p.OS_VERSION};if(e){var r=e.sendbirdExtensions,i=e.deviceOS,s=e.customData,a=void 0===s?{}:s;i.version&&(n.os_version=i.version),i.platform&&(n.device_os_platform=i.platform),r.length>0&&(n.extension_sdk_info=r.map((function(e){var t=e.product,n=e.platform,r=e.version;return"".concat(t,"/").concat(n,"/").concat(r)})).join(",")),Object.keys(n).forEach((function(e){return delete a[e]})),Object.keys(a).length>0&&(n=o(o({},n),a))}return Object.entries(n).map((function(e){var t=l(e,2),n=t[0],r=t[1];return"".concat(n,"=").concat(r)})).join("&")},e.userAgentWithExtension=function(e){var t=Ue()?"reactnative":"JS",n=e.sb_syncmanager?"s".concat(e.sb_syncmanager):"",r=e.sb_uikit?"u".concat(e.sb_uikit):"",i=e["device-os-platform"]?"o".concat(e["device-os-platform"]):Le()?"omobile-web":"oweb";return"".concat(t,"/c").concat(p.SDK_VERSION,"/").concat(n,"/").concat(r,"/").concat(i)},e}(),He=function(){var e=this;this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))},qe=function(){function t(e,t){var n=t.session,r=t.sdkState,i=t.dispatcher,o=t.logger,s=t.useFetchCompat,a=void 0!==s&&s,u=this;this._abortControl=new Map,this._shouldImportFetchCompat=!1,this._iid=e,this._session=n,this._sdkState=r,this._dispatcher=i,this._dispatcher.on((function(e){e instanceof ke&&u.cancel(e.requestId)})),this._logger=o,this._shouldImportFetchCompat=a}return t.prototype._createHeader=function(e,t){var n=this._sdkState,r=n.appId,i=n.appVersion,s=n.sendbirdRuntimeEnvironment,a=o(o({},e.headers),{SendBird:"JS,".concat(p.OS_VERSION,",").concat(p.SDK_VERSION,",").concat(r).concat(i?",".concat(i):""),"SB-User-Agent":Be.userAgentWithExtension(this._sdkState.extensions),"Request-Sent-Timestamp":Date.now().toString(),"SB-SDK-User-Agent":Be.sendbirdSdkUserAgentWithExtension(s)});return t||(a["Content-Type"]="application/json; charset=utf-8"),e.requireAuth&&this._session.hasSession&&(a["Session-Key"]=this._session.sessionKey),this._session&&this._session.authToken&&(a["App-Id"]=r,a["Access-Token"]=this._session.authToken),a},t.prototype._statLogApiResult=function(e,t,n){this._dispatcher.dispatch(new je(new De({type:Ae.API_RESULT,data:{endpoint:e.path,method:e.method,success:!n,latency:Date.now()-t,error_code:null==n?void 0:n.code,error_description:null==n?void 0:n.message}})))},t.prototype.send=function(t){return a(this,void 0,void 0,(function(){var r,i,o,s,a,c,l,h,d,f,p,m,g,b,v,y;return u(this,(function(u){switch(u.label){case 0:r=t.path,i=t.method,o=![oe.GET,oe.DELETE].includes(i),s=this._sdkState.api,a="".concat(s.host).concat(r).concat(o?"":t.query),c=o?t.payload:null,l=this._createHeader(t,c instanceof FormData?c:void 0),h=new AbortController,d=h.signal,this._abortControl.set(t.requestId,h),f=Date.now(),u.label=1;case 1:return u.trys.push([1,8,,9]),this._shouldImportFetchCompat&&(this._shouldImportFetchCompat=!1,("undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==e&&e||{fetch:null}).fetch=null),"undefined"!=typeof AbortController?[3,3]:[4,n.e(1).then(n.t.bind(null,172,7))];case 2:u.sent(),u.label=3;case 3:return"function"==typeof fetch?[3,5]:[4,n.e(2).then(n.t.bind(null,173,7))];case 4:u.sent(),u.label=5;case 5:return[4,fetch(a,{method:i,body:c,headers:l,signal:d})];case 6:return[4,(p=u.sent()).json()];case 7:if(m=u.sent(),p.ok||p.redirected)return this._logger.debug("receive api response",t.requestId),this._statLogApiResult(t,f),[2,new Te(this._iid,m)];if(m){if((b=new w(m)).isSessionExpiredError)return g=new He,this._dispatcher.dispatch(new Ie({request:t,deferred:g,error:b})),this._dispatcher.dispatch(new xe({reason:b.code})),[2,g.promise];throw b.isSessionInvalidatedError?(this._dispatcher.dispatch(new xe({reason:b.code})),b):(this._statLogApiResult(t,f,b),b)}throw b=w.requestFailed,this._statLogApiResult(t,f,b),b;case 8:throw v=u.sent(),this._statLogApiResult(t,f,v),v instanceof w?(this._logger.debug("fail api request",v),v):"AbortError"===v.name?w.requestCanceled:(y=w.networkError,this._logger.debug("fail api request",y),y);case 9:return[2]}}))}))},t.prototype.cancel=function(e){this._abortControl.has(e)&&(this._abortControl.get(e).abort(),this._abortControl.delete(e))},t.prototype.cancelAll=function(){var e,t;try{for(var n=c(this._abortControl.values()),r=n.next();!r.done;r=n.next())r.value.abort()}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}this._abortControl.clear()},t}(),Ve=function(e){function t(t,n,r,i){void 0===i&&(i="");var o,s=this;return(s=e.call(this)||this)._iid=t,s.code=n,s.payload=r,s.requestId=null!==(o=r.req_id)&&void 0!==o?o:i,s}return i(t,e),t.createFromRawMessage=function(e,n){var r=n.substring(0,4),i={};try{i=JSON.parse(n.substring(4))}catch(e){r="NOOP"}finally{return new t(e,r,i)}},t.prototype.convertToMessage=function(){return"".concat(this.code).concat(JSON.stringify(this.payload),"\n")},t.prototype.as=function(e){return new e(this._iid,this.code,this.payload)},t}(ne),Ge=function(){};function ze(e){let t=e.length;for(;--t>=0;)e[t]=0}const We=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),Ke=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),Ye=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),Qe=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Je=new Array(576);ze(Je);const Ze=new Array(60);ze(Ze);const $e=new Array(512);ze($e);const Xe=new Array(256);ze(Xe);const et=new Array(29);ze(et);const tt=new Array(30);function nt(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}let rt,it,ot;function st(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}ze(tt);const at=e=>e<256?$e[e]:$e[256+(e>>>7)],ut=(e,t)=>{e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},ct=(e,t,n)=>{e.bi_valid>16-n?(e.bi_buf|=t<<e.bi_valid&65535,ut(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=n-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)},lt=(e,t,n)=>{ct(e,n[2*t],n[2*t+1])},ht=(e,t)=>{let n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1},dt=(e,t,n)=>{const r=new Array(16);let i,o,s=0;for(i=1;i<=15;i++)s=s+n[i-1]<<1,r[i]=s;for(o=0;o<=t;o++){let t=e[2*o+1];0!==t&&(e[2*o]=ht(r[t]++,t))}},ft=e=>{let t;for(t=0;t<286;t++)e.dyn_ltree[2*t]=0;for(t=0;t<30;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},pt=e=>{e.bi_valid>8?ut(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},mt=(e,t,n,r)=>{const i=2*t,o=2*n;return e[i]<e[o]||e[i]===e[o]&&r[t]<=r[n]},gt=(e,t,n)=>{const r=e.heap[n];let i=n<<1;for(;i<=e.heap_len&&(i<e.heap_len&&mt(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!mt(t,r,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=r},bt=(e,t,n)=>{let r,i,o,s,a=0;if(0!==e.sym_next)do{r=255&e.pending_buf[e.sym_buf+a++],r+=(255&e.pending_buf[e.sym_buf+a++])<<8,i=e.pending_buf[e.sym_buf+a++],0===r?lt(e,i,t):(o=Xe[i],lt(e,o+256+1,t),s=We[o],0!==s&&(i-=et[o],ct(e,i,s)),r--,o=at(r),lt(e,o,n),s=Ke[o],0!==s&&(r-=tt[o],ct(e,r,s)))}while(a<e.sym_next);lt(e,256,t)},vt=(e,t)=>{const n=t.dyn_tree,r=t.stat_desc.static_tree,i=t.stat_desc.has_stree,o=t.stat_desc.elems;let s,a,u,c=-1;for(e.heap_len=0,e.heap_max=573,s=0;s<o;s++)0!==n[2*s]?(e.heap[++e.heap_len]=c=s,e.depth[s]=0):n[2*s+1]=0;for(;e.heap_len<2;)u=e.heap[++e.heap_len]=c<2?++c:0,n[2*u]=1,e.depth[u]=0,e.opt_len--,i&&(e.static_len-=r[2*u+1]);for(t.max_code=c,s=e.heap_len>>1;s>=1;s--)gt(e,n,s);u=o;do{s=e.heap[1],e.heap[1]=e.heap[e.heap_len--],gt(e,n,1),a=e.heap[1],e.heap[--e.heap_max]=s,e.heap[--e.heap_max]=a,n[2*u]=n[2*s]+n[2*a],e.depth[u]=(e.depth[s]>=e.depth[a]?e.depth[s]:e.depth[a])+1,n[2*s+1]=n[2*a+1]=u,e.heap[1]=u++,gt(e,n,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],((e,t)=>{const n=t.dyn_tree,r=t.max_code,i=t.stat_desc.static_tree,o=t.stat_desc.has_stree,s=t.stat_desc.extra_bits,a=t.stat_desc.extra_base,u=t.stat_desc.max_length;let c,l,h,d,f,p,m=0;for(d=0;d<=15;d++)e.bl_count[d]=0;for(n[2*e.heap[e.heap_max]+1]=0,c=e.heap_max+1;c<573;c++)l=e.heap[c],d=n[2*n[2*l+1]+1]+1,d>u&&(d=u,m++),n[2*l+1]=d,l>r||(e.bl_count[d]++,f=0,l>=a&&(f=s[l-a]),p=n[2*l],e.opt_len+=p*(d+f),o&&(e.static_len+=p*(i[2*l+1]+f)));if(0!==m){do{for(d=u-1;0===e.bl_count[d];)d--;e.bl_count[d]--,e.bl_count[d+1]+=2,e.bl_count[u]--,m-=2}while(m>0);for(d=u;0!==d;d--)for(l=e.bl_count[d];0!==l;)h=e.heap[--c],h>r||(n[2*h+1]!==d&&(e.opt_len+=(d-n[2*h+1])*n[2*h],n[2*h+1]=d),l--)}})(e,t),dt(n,c,e.bl_count)},yt=(e,t,n)=>{let r,i,o=-1,s=t[1],a=0,u=7,c=4;for(0===s&&(u=138,c=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)i=s,s=t[2*(r+1)+1],++a<u&&i===s||(a<c?e.bl_tree[2*i]+=a:0!==i?(i!==o&&e.bl_tree[2*i]++,e.bl_tree[32]++):a<=10?e.bl_tree[34]++:e.bl_tree[36]++,a=0,o=i,0===s?(u=138,c=3):i===s?(u=6,c=3):(u=7,c=4))},_t=(e,t,n)=>{let r,i,o=-1,s=t[1],a=0,u=7,c=4;for(0===s&&(u=138,c=3),r=0;r<=n;r++)if(i=s,s=t[2*(r+1)+1],!(++a<u&&i===s)){if(a<c)do{lt(e,i,e.bl_tree)}while(0!=--a);else 0!==i?(i!==o&&(lt(e,i,e.bl_tree),a--),lt(e,16,e.bl_tree),ct(e,a-3,2)):a<=10?(lt(e,17,e.bl_tree),ct(e,a-3,3)):(lt(e,18,e.bl_tree),ct(e,a-11,7));a=0,o=i,0===s?(u=138,c=3):i===s?(u=6,c=3):(u=7,c=4)}};let wt=!1;const Et=(e,t,n,r)=>{ct(e,0+(r?1:0),3),pt(e),ut(e,n),ut(e,~n),n&&e.pending_buf.set(e.window.subarray(t,t+n),e.pending),e.pending+=n};var St={_tr_init:e=>{wt||((()=>{let e,t,n,r,i;const o=new Array(16);for(n=0,r=0;r<28;r++)for(et[r]=n,e=0;e<1<<We[r];e++)Xe[n++]=r;for(Xe[n-1]=r,i=0,r=0;r<16;r++)for(tt[r]=i,e=0;e<1<<Ke[r];e++)$e[i++]=r;for(i>>=7;r<30;r++)for(tt[r]=i<<7,e=0;e<1<<Ke[r]-7;e++)$e[256+i++]=r;for(t=0;t<=15;t++)o[t]=0;for(e=0;e<=143;)Je[2*e+1]=8,e++,o[8]++;for(;e<=255;)Je[2*e+1]=9,e++,o[9]++;for(;e<=279;)Je[2*e+1]=7,e++,o[7]++;for(;e<=287;)Je[2*e+1]=8,e++,o[8]++;for(dt(Je,287,o),e=0;e<30;e++)Ze[2*e+1]=5,Ze[2*e]=ht(e,5);rt=new nt(Je,We,257,286,15),it=new nt(Ze,Ke,0,30,15),ot=new nt(new Array(0),Ye,0,19,7)})(),wt=!0),e.l_desc=new st(e.dyn_ltree,rt),e.d_desc=new st(e.dyn_dtree,it),e.bl_desc=new st(e.bl_tree,ot),e.bi_buf=0,e.bi_valid=0,ft(e)},_tr_stored_block:Et,_tr_flush_block:(e,t,n,r)=>{let i,o,s=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=(e=>{let t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<256;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0})(e)),vt(e,e.l_desc),vt(e,e.d_desc),s=(e=>{let t;for(yt(e,e.dyn_ltree,e.l_desc.max_code),yt(e,e.dyn_dtree,e.d_desc.max_code),vt(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*Qe[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t})(e),i=e.opt_len+3+7>>>3,o=e.static_len+3+7>>>3,o<=i&&(i=o)):i=o=n+5,n+4<=i&&-1!==t?Et(e,t,n,r):4===e.strategy||o===i?(ct(e,2+(r?1:0),3),bt(e,Je,Ze)):(ct(e,4+(r?1:0),3),((e,t,n,r)=>{let i;for(ct(e,t-257,5),ct(e,n-1,5),ct(e,r-4,4),i=0;i<r;i++)ct(e,e.bl_tree[2*Qe[i]+1],3);_t(e,e.dyn_ltree,t-1),_t(e,e.dyn_dtree,n-1)})(e,e.l_desc.max_code+1,e.d_desc.max_code+1,s+1),bt(e,e.dyn_ltree,e.dyn_dtree)),ft(e),r&&pt(e)},_tr_tally:(e,t,n)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=n,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(Xe[n]+256+1)]++,e.dyn_dtree[2*at(t)]++),e.sym_next===e.sym_end),_tr_align:e=>{ct(e,2,3),lt(e,256,Je),(e=>{16===e.bi_valid?(ut(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)})(e)}},Mt=(e,t,n,r)=>{let i=65535&e|0,o=e>>>16&65535|0,s=0;for(;0!==n;){s=n>2e3?2e3:n,n-=s;do{i=i+t[r++]|0,o=o+i|0}while(--s);i%=65521,o%=65521}return i|o<<16|0};const Ot=new Uint32Array((()=>{let e,t=[];for(var n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t})());var At=(e,t,n,r)=>{const i=Ot,o=r+n;e^=-1;for(let n=r;n<o;n++)e=e>>>8^i[255&(e^t[n])];return-1^e},Ct={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Tt={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:kt,_tr_stored_block:xt,_tr_flush_block:jt,_tr_tally:It,_tr_align:Rt}=St,{Z_NO_FLUSH:Nt,Z_PARTIAL_FLUSH:Pt,Z_FULL_FLUSH:Dt,Z_FINISH:Ut,Z_BLOCK:Lt,Z_OK:Ft,Z_STREAM_END:Bt,Z_STREAM_ERROR:Ht,Z_DATA_ERROR:qt,Z_BUF_ERROR:Vt,Z_DEFAULT_COMPRESSION:Gt,Z_FILTERED:zt,Z_HUFFMAN_ONLY:Wt,Z_RLE:Kt,Z_FIXED:Yt,Z_DEFAULT_STRATEGY:Qt,Z_UNKNOWN:Jt,Z_DEFLATED:Zt}=Tt,$t=262,Xt=(e,t)=>(e.msg=Ct[t],t),en=e=>2*e-(e>4?9:0),tn=e=>{let t=e.length;for(;--t>=0;)e[t]=0},nn=e=>{let t,n,r,i=e.w_size;t=e.hash_size,r=t;do{n=e.head[--r],e.head[r]=n>=i?n-i:0}while(--t);t=i,r=t;do{n=e.prev[--r],e.prev[r]=n>=i?n-i:0}while(--t)};let rn=(e,t,n)=>(t<<e.hash_shift^n)&e.hash_mask;const on=e=>{const t=e.state;let n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))},sn=(e,t)=>{jt(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,on(e.strm)},an=(e,t)=>{e.pending_buf[e.pending++]=t},un=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},cn=(e,t,n,r)=>{let i=e.avail_in;return i>r&&(i=r),0===i?0:(e.avail_in-=i,t.set(e.input.subarray(e.next_in,e.next_in+i),n),1===e.state.wrap?e.adler=Mt(e.adler,t,i,n):2===e.state.wrap&&(e.adler=At(e.adler,t,i,n)),e.next_in+=i,e.total_in+=i,i)},ln=(e,t)=>{let n,r,i=e.max_chain_length,o=e.strstart,s=e.prev_length,a=e.nice_match;const u=e.strstart>e.w_size-$t?e.strstart-(e.w_size-$t):0,c=e.window,l=e.w_mask,h=e.prev,d=e.strstart+258;let f=c[o+s-1],p=c[o+s];e.prev_length>=e.good_match&&(i>>=2),a>e.lookahead&&(a=e.lookahead);do{if(n=t,c[n+s]===p&&c[n+s-1]===f&&c[n]===c[o]&&c[++n]===c[o+1]){o+=2,n++;do{}while(c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&o<d);if(r=258-(d-o),o=d-258,r>s){if(e.match_start=t,s=r,r>=a)break;f=c[o+s-1],p=c[o+s]}}}while((t=h[t&l])>u&&0!=--i);return s<=e.lookahead?s:e.lookahead},hn=e=>{const t=e.w_size;let n,r,i;do{if(r=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-$t)&&(e.window.set(e.window.subarray(t,t+t-r),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,e.insert>e.strstart&&(e.insert=e.strstart),nn(e),r+=t),0===e.strm.avail_in)break;if(n=cn(e.strm,e.window,e.strstart+e.lookahead,r),e.lookahead+=n,e.lookahead+e.insert>=3)for(i=e.strstart-e.insert,e.ins_h=e.window[i],e.ins_h=rn(e,e.ins_h,e.window[i+1]);e.insert&&(e.ins_h=rn(e,e.ins_h,e.window[i+3-1]),e.prev[i&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=i,i++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<$t&&0!==e.strm.avail_in)},dn=(e,t)=>{let n,r,i,o=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,s=0,a=e.strm.avail_in;do{if(n=65535,i=e.bi_valid+42>>3,e.strm.avail_out<i)break;if(i=e.strm.avail_out-i,r=e.strstart-e.block_start,n>r+e.strm.avail_in&&(n=r+e.strm.avail_in),n>i&&(n=i),n<o&&(0===n&&t!==Ut||t===Nt||n!==r+e.strm.avail_in))break;s=t===Ut&&n===r+e.strm.avail_in?1:0,xt(e,0,0,s),e.pending_buf[e.pending-4]=n,e.pending_buf[e.pending-3]=n>>8,e.pending_buf[e.pending-2]=~n,e.pending_buf[e.pending-1]=~n>>8,on(e.strm),r&&(r>n&&(r=n),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+r),e.strm.next_out),e.strm.next_out+=r,e.strm.avail_out-=r,e.strm.total_out+=r,e.block_start+=r,n-=r),n&&(cn(e.strm,e.strm.output,e.strm.next_out,n),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n)}while(0===s);return a-=e.strm.avail_in,a&&(a>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=a&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-a,e.strm.next_in),e.strstart),e.strstart+=a,e.insert+=a>e.w_size-e.insert?e.w_size-e.insert:a),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),s?4:t!==Nt&&t!==Ut&&0===e.strm.avail_in&&e.strstart===e.block_start?2:(i=e.window_size-e.strstart,e.strm.avail_in>i&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,i+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),i>e.strm.avail_in&&(i=e.strm.avail_in),i&&(cn(e.strm,e.window,e.strstart,i),e.strstart+=i,e.insert+=i>e.w_size-e.insert?e.w_size-e.insert:i),e.high_water<e.strstart&&(e.high_water=e.strstart),i=e.bi_valid+42>>3,i=e.pending_buf_size-i>65535?65535:e.pending_buf_size-i,o=i>e.w_size?e.w_size:i,r=e.strstart-e.block_start,(r>=o||(r||t===Ut)&&t!==Nt&&0===e.strm.avail_in&&r<=i)&&(n=r>i?i:r,s=t===Ut&&0===e.strm.avail_in&&n===r?1:0,xt(e,e.block_start,n,s),e.block_start+=n,on(e.strm)),s?3:1)},fn=(e,t)=>{let n,r;for(;;){if(e.lookahead<$t){if(hn(e),e.lookahead<$t&&t===Nt)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=rn(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-$t&&(e.match_length=ln(e,n)),e.match_length>=3)if(r=It(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=rn(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=rn(e,e.ins_h,e.window[e.strstart+1]);else r=It(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(sn(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,t===Ut?(sn(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(sn(e,!1),0===e.strm.avail_out)?1:2},pn=(e,t)=>{let n,r,i;for(;;){if(e.lookahead<$t){if(hn(e),e.lookahead<$t&&t===Nt)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=rn(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-$t&&(e.match_length=ln(e,n),e.match_length<=5&&(e.strategy===zt||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-3,r=It(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=i&&(e.ins_h=rn(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,r&&(sn(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if(r=It(e,0,e.window[e.strstart-1]),r&&sn(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=It(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===Ut?(sn(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(sn(e,!1),0===e.strm.avail_out)?1:2};function mn(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}const gn=[new mn(0,0,0,0,dn),new mn(4,4,8,4,fn),new mn(4,5,16,8,fn),new mn(4,6,32,32,fn),new mn(4,4,16,16,pn),new mn(8,16,32,32,pn),new mn(8,16,128,128,pn),new mn(8,32,128,256,pn),new mn(32,128,258,1024,pn),new mn(32,258,258,4096,pn)];function bn(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Zt,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),tn(this.dyn_ltree),tn(this.dyn_dtree),tn(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),tn(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),tn(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const vn=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||42!==t.status&&57!==t.status&&69!==t.status&&73!==t.status&&91!==t.status&&103!==t.status&&113!==t.status&&666!==t.status?1:0},yn=e=>{if(vn(e))return Xt(e,Ht);e.total_in=e.total_out=0,e.data_type=Jt;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=2===t.wrap?57:t.wrap?42:113,e.adler=2===t.wrap?0:1,t.last_flush=-2,kt(t),Ft},_n=e=>{const t=yn(e);var n;return t===Ft&&((n=e.state).window_size=2*n.w_size,tn(n.head),n.max_lazy_match=gn[n.level].max_lazy,n.good_match=gn[n.level].good_length,n.nice_match=gn[n.level].nice_length,n.max_chain_length=gn[n.level].max_chain,n.strstart=0,n.block_start=0,n.lookahead=0,n.insert=0,n.match_length=n.prev_length=2,n.match_available=0,n.ins_h=0),t},wn=(e,t,n,r,i,o)=>{if(!e)return Ht;let s=1;if(t===Gt&&(t=6),r<0?(s=0,r=-r):r>15&&(s=2,r-=16),i<1||i>9||n!==Zt||r<8||r>15||t<0||t>9||o<0||o>Yt||8===r&&1!==s)return Xt(e,Ht);8===r&&(r=9);const a=new bn;return e.state=a,a.strm=e,a.status=42,a.wrap=s,a.gzhead=null,a.w_bits=r,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=i+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+3-1)/3),a.window=new Uint8Array(2*a.w_size),a.head=new Uint16Array(a.hash_size),a.prev=new Uint16Array(a.w_size),a.lit_bufsize=1<<i+6,a.pending_buf_size=4*a.lit_bufsize,a.pending_buf=new Uint8Array(a.pending_buf_size),a.sym_buf=a.lit_bufsize,a.sym_end=3*(a.lit_bufsize-1),a.level=t,a.strategy=o,a.method=n,_n(e)};var En=wn,Sn=(e,t)=>vn(e)||2!==e.state.wrap?Ht:(e.state.gzhead=t,Ft),Mn=(e,t)=>{if(vn(e)||t>Lt||t<0)return e?Xt(e,Ht):Ht;const n=e.state;if(!e.output||0!==e.avail_in&&!e.input||666===n.status&&t!==Ut)return Xt(e,0===e.avail_out?Vt:Ht);const r=n.last_flush;if(n.last_flush=t,0!==n.pending){if(on(e),0===e.avail_out)return n.last_flush=-1,Ft}else if(0===e.avail_in&&en(t)<=en(r)&&t!==Ut)return Xt(e,Vt);if(666===n.status&&0!==e.avail_in)return Xt(e,Vt);if(42===n.status&&0===n.wrap&&(n.status=113),42===n.status){let t=Zt+(n.w_bits-8<<4)<<8,r=-1;if(r=n.strategy>=Wt||n.level<2?0:n.level<6?1:6===n.level?2:3,t|=r<<6,0!==n.strstart&&(t|=32),t+=31-t%31,un(n,t),0!==n.strstart&&(un(n,e.adler>>>16),un(n,65535&e.adler)),e.adler=1,n.status=113,on(e),0!==n.pending)return n.last_flush=-1,Ft}if(57===n.status)if(e.adler=0,an(n,31),an(n,139),an(n,8),n.gzhead)an(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),an(n,255&n.gzhead.time),an(n,n.gzhead.time>>8&255),an(n,n.gzhead.time>>16&255),an(n,n.gzhead.time>>24&255),an(n,9===n.level?2:n.strategy>=Wt||n.level<2?4:0),an(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(an(n,255&n.gzhead.extra.length),an(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=At(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=69;else if(an(n,0),an(n,0),an(n,0),an(n,0),an(n,0),an(n,9===n.level?2:n.strategy>=Wt||n.level<2?4:0),an(n,3),n.status=113,on(e),0!==n.pending)return n.last_flush=-1,Ft;if(69===n.status){if(n.gzhead.extra){let t=n.pending,r=(65535&n.gzhead.extra.length)-n.gzindex;for(;n.pending+r>n.pending_buf_size;){let i=n.pending_buf_size-n.pending;if(n.pending_buf.set(n.gzhead.extra.subarray(n.gzindex,n.gzindex+i),n.pending),n.pending=n.pending_buf_size,n.gzhead.hcrc&&n.pending>t&&(e.adler=At(e.adler,n.pending_buf,n.pending-t,t)),n.gzindex+=i,on(e),0!==n.pending)return n.last_flush=-1,Ft;t=0,r-=i}let i=new Uint8Array(n.gzhead.extra);n.pending_buf.set(i.subarray(n.gzindex,n.gzindex+r),n.pending),n.pending+=r,n.gzhead.hcrc&&n.pending>t&&(e.adler=At(e.adler,n.pending_buf,n.pending-t,t)),n.gzindex=0}n.status=73}if(73===n.status){if(n.gzhead.name){let t,r=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>r&&(e.adler=At(e.adler,n.pending_buf,n.pending-r,r)),on(e),0!==n.pending)return n.last_flush=-1,Ft;r=0}t=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,an(n,t)}while(0!==t);n.gzhead.hcrc&&n.pending>r&&(e.adler=At(e.adler,n.pending_buf,n.pending-r,r)),n.gzindex=0}n.status=91}if(91===n.status){if(n.gzhead.comment){let t,r=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>r&&(e.adler=At(e.adler,n.pending_buf,n.pending-r,r)),on(e),0!==n.pending)return n.last_flush=-1,Ft;r=0}t=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,an(n,t)}while(0!==t);n.gzhead.hcrc&&n.pending>r&&(e.adler=At(e.adler,n.pending_buf,n.pending-r,r))}n.status=103}if(103===n.status){if(n.gzhead.hcrc){if(n.pending+2>n.pending_buf_size&&(on(e),0!==n.pending))return n.last_flush=-1,Ft;an(n,255&e.adler),an(n,e.adler>>8&255),e.adler=0}if(n.status=113,on(e),0!==n.pending)return n.last_flush=-1,Ft}if(0!==e.avail_in||0!==n.lookahead||t!==Nt&&666!==n.status){let r=0===n.level?dn(n,t):n.strategy===Wt?((e,t)=>{let n;for(;;){if(0===e.lookahead&&(hn(e),0===e.lookahead)){if(t===Nt)return 1;break}if(e.match_length=0,n=It(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(sn(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===Ut?(sn(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(sn(e,!1),0===e.strm.avail_out)?1:2})(n,t):n.strategy===Kt?((e,t)=>{let n,r,i,o;const s=e.window;for(;;){if(e.lookahead<=258){if(hn(e),e.lookahead<=258&&t===Nt)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(i=e.strstart-1,r=s[i],r===s[++i]&&r===s[++i]&&r===s[++i])){o=e.strstart+258;do{}while(r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&i<o);e.match_length=258-(o-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(n=It(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=It(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(sn(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===Ut?(sn(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(sn(e,!1),0===e.strm.avail_out)?1:2})(n,t):gn[n.level].func(n,t);if(3!==r&&4!==r||(n.status=666),1===r||3===r)return 0===e.avail_out&&(n.last_flush=-1),Ft;if(2===r&&(t===Pt?Rt(n):t!==Lt&&(xt(n,0,0,!1),t===Dt&&(tn(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),on(e),0===e.avail_out))return n.last_flush=-1,Ft}return t!==Ut?Ft:n.wrap<=0?Bt:(2===n.wrap?(an(n,255&e.adler),an(n,e.adler>>8&255),an(n,e.adler>>16&255),an(n,e.adler>>24&255),an(n,255&e.total_in),an(n,e.total_in>>8&255),an(n,e.total_in>>16&255),an(n,e.total_in>>24&255)):(un(n,e.adler>>>16),un(n,65535&e.adler)),on(e),n.wrap>0&&(n.wrap=-n.wrap),0!==n.pending?Ft:Bt)},On=e=>{if(vn(e))return Ht;const t=e.state.status;return e.state=null,113===t?Xt(e,qt):Ft},An=(e,t)=>{let n=t.length;if(vn(e))return Ht;const r=e.state,i=r.wrap;if(2===i||1===i&&42!==r.status||r.lookahead)return Ht;if(1===i&&(e.adler=Mt(e.adler,t,n,0)),r.wrap=0,n>=r.w_size){0===i&&(tn(r.head),r.strstart=0,r.block_start=0,r.insert=0);let e=new Uint8Array(r.w_size);e.set(t.subarray(n-r.w_size,n),0),t=e,n=r.w_size}const o=e.avail_in,s=e.next_in,a=e.input;for(e.avail_in=n,e.next_in=0,e.input=t,hn(r);r.lookahead>=3;){let e=r.strstart,t=r.lookahead-2;do{r.ins_h=rn(r,r.ins_h,r.window[e+3-1]),r.prev[e&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=e,e++}while(--t);r.strstart=e,r.lookahead=2,hn(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,e.next_in=s,e.input=a,e.avail_in=o,r.wrap=i,Ft};const Cn=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var Tn=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(const t in n)Cn(n,t)&&(e[t]=n[t])}}return e},kn=e=>{let t=0;for(let n=0,r=e.length;n<r;n++)t+=e[n].length;const n=new Uint8Array(t);for(let t=0,r=0,i=e.length;t<i;t++){let i=e[t];n.set(i,r),r+=i.length}return n};let xn=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(r){xn=!1}const jn=new Uint8Array(256);for(let e=0;e<256;e++)jn[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;jn[254]=jn[254]=1;var In=e=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);let t,n,r,i,o,s=e.length,a=0;for(i=0;i<s;i++)n=e.charCodeAt(i),55296==(64512&n)&&i+1<s&&(r=e.charCodeAt(i+1),56320==(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),i++)),a+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(a),o=0,i=0;o<a;i++)n=e.charCodeAt(i),55296==(64512&n)&&i+1<s&&(r=e.charCodeAt(i+1),56320==(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),i++)),n<128?t[o++]=n:n<2048?(t[o++]=192|n>>>6,t[o++]=128|63&n):n<65536?(t[o++]=224|n>>>12,t[o++]=128|n>>>6&63,t[o++]=128|63&n):(t[o++]=240|n>>>18,t[o++]=128|n>>>12&63,t[o++]=128|n>>>6&63,t[o++]=128|63&n);return t},Rn=(e,t)=>{const n=t||e.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,t));let r,i;const o=new Array(2*n);for(i=0,r=0;r<n;){let t=e[r++];if(t<128){o[i++]=t;continue}let s=jn[t];if(s>4)o[i++]=65533,r+=s-1;else{for(t&=2===s?31:3===s?15:7;s>1&&r<n;)t=t<<6|63&e[r++],s--;s>1?o[i++]=65533:t<65536?o[i++]=t:(t-=65536,o[i++]=55296|t>>10&1023,o[i++]=56320|1023&t)}}return((e,t)=>{if(t<65534&&e.subarray&&xn)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let n="";for(let r=0;r<t;r++)n+=String.fromCharCode(e[r]);return n})(o,i)},Nn=(e,t)=>{(t=t||e.length)>e.length&&(t=e.length);let n=t-1;for(;n>=0&&128==(192&e[n]);)n--;return n<0||0===n?t:n+jn[e[n]]>t?n:t},Pn=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const Dn=Object.prototype.toString,{Z_NO_FLUSH:Un,Z_SYNC_FLUSH:Ln,Z_FULL_FLUSH:Fn,Z_FINISH:Bn,Z_OK:Hn,Z_STREAM_END:qn,Z_DEFAULT_COMPRESSION:Vn,Z_DEFAULT_STRATEGY:Gn,Z_DEFLATED:zn}=Tt;function Wn(e){this.options=Tn({level:Vn,method:zn,chunkSize:16384,windowBits:15,memLevel:8,strategy:Gn},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Pn,this.strm.avail_out=0;let n=En(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==Hn)throw new Error(Ct[n]);if(t.header&&Sn(this.strm,t.header),t.dictionary){let e;if(e="string"==typeof t.dictionary?In(t.dictionary):"[object ArrayBuffer]"===Dn.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,n=An(this.strm,e),n!==Hn)throw new Error(Ct[n]);this._dict_set=!0}}function Kn(e,t){const n=new Wn(t);if(n.push(e,!0),n.err)throw n.msg||Ct[n.err];return n.result}Wn.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize;let i,o;if(this.ended)return!1;for(o=t===~~t?t:!0===t?Bn:Un,"string"==typeof e?n.input=In(e):"[object ArrayBuffer]"===Dn.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;)if(0===n.avail_out&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),(o===Ln||o===Fn)&&n.avail_out<=6)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else{if(i=Mn(n,o),i===qn)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),i=On(this.strm),this.onEnd(i),this.ended=!0,i===Hn;if(0!==n.avail_out){if(o>0&&n.next_out>0)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else if(0===n.avail_in)break}else this.onData(n.output)}return!0},Wn.prototype.onData=function(e){this.chunks.push(e)},Wn.prototype.onEnd=function(e){e===Hn&&(this.result=kn(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var Yn={Deflate:Wn,deflate:Kn,deflateRaw:function(e,t){return(t=t||{}).raw=!0,Kn(e,t)},gzip:function(e,t){return(t=t||{}).gzip=!0,Kn(e,t)},constants:Tt};const Qn=16209;var Jn=function(e,t){let n,r,i,o,s,a,u,c,l,h,d,f,p,m,g,b,v,y,_,w,E,S,M,O;const A=e.state;n=e.next_in,M=e.input,r=n+(e.avail_in-5),i=e.next_out,O=e.output,o=i-(t-e.avail_out),s=i+(e.avail_out-257),a=A.dmax,u=A.wsize,c=A.whave,l=A.wnext,h=A.window,d=A.hold,f=A.bits,p=A.lencode,m=A.distcode,g=(1<<A.lenbits)-1,b=(1<<A.distbits)-1;e:do{f<15&&(d+=M[n++]<<f,f+=8,d+=M[n++]<<f,f+=8),v=p[d&g];t:for(;;){if(y=v>>>24,d>>>=y,f-=y,y=v>>>16&255,0===y)O[i++]=65535&v;else{if(!(16&y)){if(0==(64&y)){v=p[(65535&v)+(d&(1<<y)-1)];continue t}if(32&y){A.mode=16191;break e}e.msg="invalid literal/length code",A.mode=Qn;break e}_=65535&v,y&=15,y&&(f<y&&(d+=M[n++]<<f,f+=8),_+=d&(1<<y)-1,d>>>=y,f-=y),f<15&&(d+=M[n++]<<f,f+=8,d+=M[n++]<<f,f+=8),v=m[d&b];n:for(;;){if(y=v>>>24,d>>>=y,f-=y,y=v>>>16&255,!(16&y)){if(0==(64&y)){v=m[(65535&v)+(d&(1<<y)-1)];continue n}e.msg="invalid distance code",A.mode=Qn;break e}if(w=65535&v,y&=15,f<y&&(d+=M[n++]<<f,f+=8,f<y&&(d+=M[n++]<<f,f+=8)),w+=d&(1<<y)-1,w>a){e.msg="invalid distance too far back",A.mode=Qn;break e}if(d>>>=y,f-=y,y=i-o,w>y){if(y=w-y,y>c&&A.sane){e.msg="invalid distance too far back",A.mode=Qn;break e}if(E=0,S=h,0===l){if(E+=u-y,y<_){_-=y;do{O[i++]=h[E++]}while(--y);E=i-w,S=O}}else if(l<y){if(E+=u+l-y,y-=l,y<_){_-=y;do{O[i++]=h[E++]}while(--y);if(E=0,l<_){y=l,_-=y;do{O[i++]=h[E++]}while(--y);E=i-w,S=O}}}else if(E+=l-y,y<_){_-=y;do{O[i++]=h[E++]}while(--y);E=i-w,S=O}for(;_>2;)O[i++]=S[E++],O[i++]=S[E++],O[i++]=S[E++],_-=3;_&&(O[i++]=S[E++],_>1&&(O[i++]=S[E++]))}else{E=i-w;do{O[i++]=O[E++],O[i++]=O[E++],O[i++]=O[E++],_-=3}while(_>2);_&&(O[i++]=O[E++],_>1&&(O[i++]=O[E++]))}break}}break}}while(n<r&&i<s);_=f>>3,n-=_,f-=_<<3,d&=(1<<f)-1,e.next_in=n,e.next_out=i,e.avail_in=n<r?r-n+5:5-(n-r),e.avail_out=i<s?s-i+257:257-(i-s),A.hold=d,A.bits=f};const Zn=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),$n=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),Xn=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),er=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var tr=(e,t,n,r,i,o,s,a)=>{const u=a.bits;let c,l,h,d,f,p,m=0,g=0,b=0,v=0,y=0,_=0,w=0,E=0,S=0,M=0,O=null;const A=new Uint16Array(16),C=new Uint16Array(16);let T,k,x,j=null;for(m=0;m<=15;m++)A[m]=0;for(g=0;g<r;g++)A[t[n+g]]++;for(y=u,v=15;v>=1&&0===A[v];v--);if(y>v&&(y=v),0===v)return i[o++]=20971520,i[o++]=20971520,a.bits=1,0;for(b=1;b<v&&0===A[b];b++);for(y<b&&(y=b),E=1,m=1;m<=15;m++)if(E<<=1,E-=A[m],E<0)return-1;if(E>0&&(0===e||1!==v))return-1;for(C[1]=0,m=1;m<15;m++)C[m+1]=C[m]+A[m];for(g=0;g<r;g++)0!==t[n+g]&&(s[C[t[n+g]]++]=g);if(0===e?(O=j=s,p=20):1===e?(O=Zn,j=$n,p=257):(O=Xn,j=er,p=0),M=0,g=0,m=b,f=o,_=y,w=0,h=-1,S=1<<y,d=S-1,1===e&&S>852||2===e&&S>592)return 1;for(;;){T=m-w,s[g]+1<p?(k=0,x=s[g]):s[g]>=p?(k=j[s[g]-p],x=O[s[g]-p]):(k=96,x=0),c=1<<m-w,l=1<<_,b=l;do{l-=c,i[f+(M>>w)+l]=T<<24|k<<16|x|0}while(0!==l);for(c=1<<m-1;M&c;)c>>=1;if(0!==c?(M&=c-1,M+=c):M=0,g++,0==--A[m]){if(m===v)break;m=t[n+s[g]]}if(m>y&&(M&d)!==h){for(0===w&&(w=y),f+=b,_=m-w,E=1<<_;_+w<v&&(E-=A[_+w],!(E<=0));)_++,E<<=1;if(S+=1<<_,1===e&&S>852||2===e&&S>592)return 1;h=M&d,i[h]=y<<24|_<<16|f-o|0}}return 0!==M&&(i[f+M]=m-w<<24|64<<16|0),a.bits=y,0};const{Z_FINISH:nr,Z_BLOCK:rr,Z_TREES:ir,Z_OK:or,Z_STREAM_END:sr,Z_NEED_DICT:ar,Z_STREAM_ERROR:ur,Z_DATA_ERROR:cr,Z_MEM_ERROR:lr,Z_BUF_ERROR:hr,Z_DEFLATED:dr}=Tt,fr=16180,pr=16190,mr=16191,gr=16199,br=16200,vr=16209,yr=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function _r(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const wr=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<fr||t.mode>16211?1:0},Er=e=>{if(wr(e))return ur;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=fr,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,or},Sr=e=>{if(wr(e))return ur;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,Er(e)},Mr=(e,t)=>{let n;if(wr(e))return ur;const r=e.state;return t<0?(n=0,t=-t):(n=5+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?ur:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,Sr(e))},Or=(e,t)=>{if(!e)return ur;const n=new _r;e.state=n,n.strm=e,n.window=null,n.mode=fr;const r=Mr(e,t);return r!==or&&(e.state=null),r};let Ar,Cr,Tr=!0;const kr=e=>{if(Tr){Ar=new Int32Array(512),Cr=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(tr(1,e.lens,0,288,Ar,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;tr(2,e.lens,0,32,Cr,0,e.work,{bits:5}),Tr=!1}e.lencode=Ar,e.lenbits=9,e.distcode=Cr,e.distbits=5},xr=(e,t,n,r)=>{let i;const o=e.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),r>=o.wsize?(o.window.set(t.subarray(n-o.wsize,n),0),o.wnext=0,o.whave=o.wsize):(i=o.wsize-o.wnext,i>r&&(i=r),o.window.set(t.subarray(n-r,n-r+i),o.wnext),(r-=i)?(o.window.set(t.subarray(n-r,n),0),o.wnext=r,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0};var jr=Sr,Ir=Or,Rr=(e,t)=>{let n,r,i,o,s,a,u,c,l,h,d,f,p,m,g,b,v,y,_,w,E,S,M=0;const O=new Uint8Array(4);let A,C;const T=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(wr(e)||!e.output||!e.input&&0!==e.avail_in)return ur;n=e.state,n.mode===mr&&(n.mode=16192),s=e.next_out,i=e.output,u=e.avail_out,o=e.next_in,r=e.input,a=e.avail_in,c=n.hold,l=n.bits,h=a,d=u,S=or;e:for(;;)switch(n.mode){case fr:if(0===n.wrap){n.mode=16192;break}for(;l<16;){if(0===a)break e;a--,c+=r[o++]<<l,l+=8}if(2&n.wrap&&35615===c){0===n.wbits&&(n.wbits=15),n.check=0,O[0]=255&c,O[1]=c>>>8&255,n.check=At(n.check,O,2,0),c=0,l=0,n.mode=16181;break}if(n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&c)<<8)+(c>>8))%31){e.msg="incorrect header check",n.mode=vr;break}if((15&c)!==dr){e.msg="unknown compression method",n.mode=vr;break}if(c>>>=4,l-=4,E=8+(15&c),0===n.wbits&&(n.wbits=E),E>15||E>n.wbits){e.msg="invalid window size",n.mode=vr;break}n.dmax=1<<n.wbits,n.flags=0,e.adler=n.check=1,n.mode=512&c?16189:mr,c=0,l=0;break;case 16181:for(;l<16;){if(0===a)break e;a--,c+=r[o++]<<l,l+=8}if(n.flags=c,(255&n.flags)!==dr){e.msg="unknown compression method",n.mode=vr;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=vr;break}n.head&&(n.head.text=c>>8&1),512&n.flags&&4&n.wrap&&(O[0]=255&c,O[1]=c>>>8&255,n.check=At(n.check,O,2,0)),c=0,l=0,n.mode=16182;case 16182:for(;l<32;){if(0===a)break e;a--,c+=r[o++]<<l,l+=8}n.head&&(n.head.time=c),512&n.flags&&4&n.wrap&&(O[0]=255&c,O[1]=c>>>8&255,O[2]=c>>>16&255,O[3]=c>>>24&255,n.check=At(n.check,O,4,0)),c=0,l=0,n.mode=16183;case 16183:for(;l<16;){if(0===a)break e;a--,c+=r[o++]<<l,l+=8}n.head&&(n.head.xflags=255&c,n.head.os=c>>8),512&n.flags&&4&n.wrap&&(O[0]=255&c,O[1]=c>>>8&255,n.check=At(n.check,O,2,0)),c=0,l=0,n.mode=16184;case 16184:if(1024&n.flags){for(;l<16;){if(0===a)break e;a--,c+=r[o++]<<l,l+=8}n.length=c,n.head&&(n.head.extra_len=c),512&n.flags&&4&n.wrap&&(O[0]=255&c,O[1]=c>>>8&255,n.check=At(n.check,O,2,0)),c=0,l=0}else n.head&&(n.head.extra=null);n.mode=16185;case 16185:if(1024&n.flags&&(f=n.length,f>a&&(f=a),f&&(n.head&&(E=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(o,o+f),E)),512&n.flags&&4&n.wrap&&(n.check=At(n.check,r,f,o)),a-=f,o+=f,n.length-=f),n.length))break e;n.length=0,n.mode=16186;case 16186:if(2048&n.flags){if(0===a)break e;f=0;do{E=r[o+f++],n.head&&E&&n.length<65536&&(n.head.name+=String.fromCharCode(E))}while(E&&f<a);if(512&n.flags&&4&n.wrap&&(n.check=At(n.check,r,f,o)),a-=f,o+=f,E)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=16187;case 16187:if(4096&n.flags){if(0===a)break e;f=0;do{E=r[o+f++],n.head&&E&&n.length<65536&&(n.head.comment+=String.fromCharCode(E))}while(E&&f<a);if(512&n.flags&&4&n.wrap&&(n.check=At(n.check,r,f,o)),a-=f,o+=f,E)break e}else n.head&&(n.head.comment=null);n.mode=16188;case 16188:if(512&n.flags){for(;l<16;){if(0===a)break e;a--,c+=r[o++]<<l,l+=8}if(4&n.wrap&&c!==(65535&n.check)){e.msg="header crc mismatch",n.mode=vr;break}c=0,l=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=mr;break;case 16189:for(;l<32;){if(0===a)break e;a--,c+=r[o++]<<l,l+=8}e.adler=n.check=yr(c),c=0,l=0,n.mode=pr;case pr:if(0===n.havedict)return e.next_out=s,e.avail_out=u,e.next_in=o,e.avail_in=a,n.hold=c,n.bits=l,ar;e.adler=n.check=1,n.mode=mr;case mr:if(t===rr||t===ir)break e;case 16192:if(n.last){c>>>=7&l,l-=7&l,n.mode=16206;break}for(;l<3;){if(0===a)break e;a--,c+=r[o++]<<l,l+=8}switch(n.last=1&c,c>>>=1,l-=1,3&c){case 0:n.mode=16193;break;case 1:if(kr(n),n.mode=gr,t===ir){c>>>=2,l-=2;break e}break;case 2:n.mode=16196;break;case 3:e.msg="invalid block type",n.mode=vr}c>>>=2,l-=2;break;case 16193:for(c>>>=7&l,l-=7&l;l<32;){if(0===a)break e;a--,c+=r[o++]<<l,l+=8}if((65535&c)!=(c>>>16^65535)){e.msg="invalid stored block lengths",n.mode=vr;break}if(n.length=65535&c,c=0,l=0,n.mode=16194,t===ir)break e;case 16194:n.mode=16195;case 16195:if(f=n.length,f){if(f>a&&(f=a),f>u&&(f=u),0===f)break e;i.set(r.subarray(o,o+f),s),a-=f,o+=f,u-=f,s+=f,n.length-=f;break}n.mode=mr;break;case 16196:for(;l<14;){if(0===a)break e;a--,c+=r[o++]<<l,l+=8}if(n.nlen=257+(31&c),c>>>=5,l-=5,n.ndist=1+(31&c),c>>>=5,l-=5,n.ncode=4+(15&c),c>>>=4,l-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=vr;break}n.have=0,n.mode=16197;case 16197:for(;n.have<n.ncode;){for(;l<3;){if(0===a)break e;a--,c+=r[o++]<<l,l+=8}n.lens[T[n.have++]]=7&c,c>>>=3,l-=3}for(;n.have<19;)n.lens[T[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,A={bits:n.lenbits},S=tr(0,n.lens,0,19,n.lencode,0,n.work,A),n.lenbits=A.bits,S){e.msg="invalid code lengths set",n.mode=vr;break}n.have=0,n.mode=16198;case 16198:for(;n.have<n.nlen+n.ndist;){for(;M=n.lencode[c&(1<<n.lenbits)-1],g=M>>>24,b=M>>>16&255,v=65535&M,!(g<=l);){if(0===a)break e;a--,c+=r[o++]<<l,l+=8}if(v<16)c>>>=g,l-=g,n.lens[n.have++]=v;else{if(16===v){for(C=g+2;l<C;){if(0===a)break e;a--,c+=r[o++]<<l,l+=8}if(c>>>=g,l-=g,0===n.have){e.msg="invalid bit length repeat",n.mode=vr;break}E=n.lens[n.have-1],f=3+(3&c),c>>>=2,l-=2}else if(17===v){for(C=g+3;l<C;){if(0===a)break e;a--,c+=r[o++]<<l,l+=8}c>>>=g,l-=g,E=0,f=3+(7&c),c>>>=3,l-=3}else{for(C=g+7;l<C;){if(0===a)break e;a--,c+=r[o++]<<l,l+=8}c>>>=g,l-=g,E=0,f=11+(127&c),c>>>=7,l-=7}if(n.have+f>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=vr;break}for(;f--;)n.lens[n.have++]=E}}if(n.mode===vr)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=vr;break}if(n.lenbits=9,A={bits:n.lenbits},S=tr(1,n.lens,0,n.nlen,n.lencode,0,n.work,A),n.lenbits=A.bits,S){e.msg="invalid literal/lengths set",n.mode=vr;break}if(n.distbits=6,n.distcode=n.distdyn,A={bits:n.distbits},S=tr(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,A),n.distbits=A.bits,S){e.msg="invalid distances set",n.mode=vr;break}if(n.mode=gr,t===ir)break e;case gr:n.mode=br;case br:if(a>=6&&u>=258){e.next_out=s,e.avail_out=u,e.next_in=o,e.avail_in=a,n.hold=c,n.bits=l,Jn(e,d),s=e.next_out,i=e.output,u=e.avail_out,o=e.next_in,r=e.input,a=e.avail_in,c=n.hold,l=n.bits,n.mode===mr&&(n.back=-1);break}for(n.back=0;M=n.lencode[c&(1<<n.lenbits)-1],g=M>>>24,b=M>>>16&255,v=65535&M,!(g<=l);){if(0===a)break e;a--,c+=r[o++]<<l,l+=8}if(b&&0==(240&b)){for(y=g,_=b,w=v;M=n.lencode[w+((c&(1<<y+_)-1)>>y)],g=M>>>24,b=M>>>16&255,v=65535&M,!(y+g<=l);){if(0===a)break e;a--,c+=r[o++]<<l,l+=8}c>>>=y,l-=y,n.back+=y}if(c>>>=g,l-=g,n.back+=g,n.length=v,0===b){n.mode=16205;break}if(32&b){n.back=-1,n.mode=mr;break}if(64&b){e.msg="invalid literal/length code",n.mode=vr;break}n.extra=15&b,n.mode=16201;case 16201:if(n.extra){for(C=n.extra;l<C;){if(0===a)break e;a--,c+=r[o++]<<l,l+=8}n.length+=c&(1<<n.extra)-1,c>>>=n.extra,l-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=16202;case 16202:for(;M=n.distcode[c&(1<<n.distbits)-1],g=M>>>24,b=M>>>16&255,v=65535&M,!(g<=l);){if(0===a)break e;a--,c+=r[o++]<<l,l+=8}if(0==(240&b)){for(y=g,_=b,w=v;M=n.distcode[w+((c&(1<<y+_)-1)>>y)],g=M>>>24,b=M>>>16&255,v=65535&M,!(y+g<=l);){if(0===a)break e;a--,c+=r[o++]<<l,l+=8}c>>>=y,l-=y,n.back+=y}if(c>>>=g,l-=g,n.back+=g,64&b){e.msg="invalid distance code",n.mode=vr;break}n.offset=v,n.extra=15&b,n.mode=16203;case 16203:if(n.extra){for(C=n.extra;l<C;){if(0===a)break e;a--,c+=r[o++]<<l,l+=8}n.offset+=c&(1<<n.extra)-1,c>>>=n.extra,l-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=vr;break}n.mode=16204;case 16204:if(0===u)break e;if(f=d-u,n.offset>f){if(f=n.offset-f,f>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=vr;break}f>n.wnext?(f-=n.wnext,p=n.wsize-f):p=n.wnext-f,f>n.length&&(f=n.length),m=n.window}else m=i,p=s-n.offset,f=n.length;f>u&&(f=u),u-=f,n.length-=f;do{i[s++]=m[p++]}while(--f);0===n.length&&(n.mode=br);break;case 16205:if(0===u)break e;i[s++]=n.length,u--,n.mode=br;break;case 16206:if(n.wrap){for(;l<32;){if(0===a)break e;a--,c|=r[o++]<<l,l+=8}if(d-=u,e.total_out+=d,n.total+=d,4&n.wrap&&d&&(e.adler=n.check=n.flags?At(n.check,i,d,s-d):Mt(n.check,i,d,s-d)),d=u,4&n.wrap&&(n.flags?c:yr(c))!==n.check){e.msg="incorrect data check",n.mode=vr;break}c=0,l=0}n.mode=16207;case 16207:if(n.wrap&&n.flags){for(;l<32;){if(0===a)break e;a--,c+=r[o++]<<l,l+=8}if(4&n.wrap&&c!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=vr;break}c=0,l=0}n.mode=16208;case 16208:S=sr;break e;case vr:S=cr;break e;case 16210:return lr;default:return ur}return e.next_out=s,e.avail_out=u,e.next_in=o,e.avail_in=a,n.hold=c,n.bits=l,(n.wsize||d!==e.avail_out&&n.mode<vr&&(n.mode<16206||t!==nr))&&xr(e,e.output,e.next_out,d-e.avail_out),h-=e.avail_in,d-=e.avail_out,e.total_in+=h,e.total_out+=d,n.total+=d,4&n.wrap&&d&&(e.adler=n.check=n.flags?At(n.check,i,d,e.next_out-d):Mt(n.check,i,d,e.next_out-d)),e.data_type=n.bits+(n.last?64:0)+(n.mode===mr?128:0)+(n.mode===gr||16194===n.mode?256:0),(0===h&&0===d||t===nr)&&S===or&&(S=hr),S},Nr=e=>{if(wr(e))return ur;let t=e.state;return t.window&&(t.window=null),e.state=null,or},Pr=(e,t)=>{if(wr(e))return ur;const n=e.state;return 0==(2&n.wrap)?ur:(n.head=t,t.done=!1,or)},Dr=(e,t)=>{const n=t.length;let r,i,o;return wr(e)?ur:(r=e.state,0!==r.wrap&&r.mode!==pr?ur:r.mode===pr&&(i=1,i=Mt(i,t,n,0),i!==r.check)?cr:(o=xr(e,t,n,n),o?(r.mode=16210,lr):(r.havedict=1,or)))},Ur=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const Lr=Object.prototype.toString,{Z_NO_FLUSH:Fr,Z_FINISH:Br,Z_OK:Hr,Z_STREAM_END:qr,Z_NEED_DICT:Vr,Z_STREAM_ERROR:Gr,Z_DATA_ERROR:zr,Z_MEM_ERROR:Wr}=Tt;function Kr(e){this.options=Tn({chunkSize:65536,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Pn,this.strm.avail_out=0;let n=Ir(this.strm,t.windowBits);if(n!==Hr)throw new Error(Ct[n]);if(this.header=new Ur,Pr(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=In(t.dictionary):"[object ArrayBuffer]"===Lr.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=Dr(this.strm,t.dictionary),n!==Hr)))throw new Error(Ct[n])}function Yr(e,t){const n=new Kr(t);if(n.push(e),n.err)throw n.msg||Ct[n.err];return n.result}Kr.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize,i=this.options.dictionary;let o,s,a;if(this.ended)return!1;for(s=t===~~t?t:!0===t?Br:Fr,"[object ArrayBuffer]"===Lr.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){for(0===n.avail_out&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),o=Rr(n,s),o===Vr&&i&&(o=Dr(n,i),o===Hr?o=Rr(n,s):o===zr&&(o=Vr));n.avail_in>0&&o===qr&&n.state.wrap>0&&0!==e[n.next_in];)jr(n),o=Rr(n,s);switch(o){case Gr:case zr:case Vr:case Wr:return this.onEnd(o),this.ended=!0,!1}if(a=n.avail_out,n.next_out&&(0===n.avail_out||o===qr))if("string"===this.options.to){let e=Nn(n.output,n.next_out),t=n.next_out-e,i=Rn(n.output,e);n.next_out=t,n.avail_out=r-t,t&&n.output.set(n.output.subarray(e,e+t),0),this.onData(i)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(o!==Hr||0!==a){if(o===qr)return o=Nr(this.strm),this.onEnd(o),this.ended=!0,!0;if(0===n.avail_in)break}}return!0},Kr.prototype.onData=function(e){this.chunks.push(e)},Kr.prototype.onEnd=function(e){e===Hr&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=kn(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var Qr={Inflate:Kr,inflate:Yr,inflateRaw:function(e,t){return(t=t||{}).raw=!0,Yr(e,t)},ungzip:Yr,constants:Tt};const{Deflate:Jr,deflate:Zr,deflateRaw:$r,gzip:Xr}=Yn,{Inflate:ei,inflate:ti,inflateRaw:ni,ungzip:ri}=Qr;var ii,oi={Deflate:Jr,deflate:Zr,deflateRaw:$r,gzip:Xr,Inflate:ei,inflate:ti,inflateRaw:ni,ungzip:ri,constants:Tt};!function(e){e.CONNECTING="CONNECTING",e.OPEN="OPEN",e.CLOSED="CLOSED"}(ii||(ii={}));var si,ai=function(e){function t(t,n){var r=n.sdkState,i=n.dispatcher,o=n.logger,s=e.call(this)||this;return s.lastActive=0,s._iid=t,s._sdkState=r,s._dispatcher=i,s._logger=o,s}return i(t,e),Object.defineProperty(t.prototype,"isOpen",{get:function(){return this.connectionState===ii.OPEN},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"connectionState",{get:function(){if(this._ws)switch(this._ws.readyState){case 0:return ii.CONNECTING;case 1:return ii.OPEN}return ii.CLOSED},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ws",{get:function(){var e;return null!==(e=this._ws)&&void 0!==e?e:null},enumerable:!1,configurable:!0}),t.prototype._handleMessage=function(e){var t=this;e.split("\n").forEach((function(e){if(e){var n=Ve.createFromRawMessage(t._iid,e);if(t._logger.debug("receive websocket event",n),"LOGI"===n.code)t.dispatch("message",n);else if("PONG"===n.code)t.dispatch("pong");else if("EXPR"===n.code){if(n.payload){var r=new xe(n.payload);r.expiresIn>=0&&t._dispatcher.dispatch(r)}}else"NOOP"===n.code||t.dispatch("message",n)}}))},t.prototype.connect=function(e,t){var n=this;this._ws=new WebSocket(e,encodeURIComponent(t)),this._ws.onopen=function(){n._logger.debug("websocket open"),n.dispatch("open")},this._ws.onmessage=function(e){return a(n,void 0,void 0,(function(){var t,n,r=this;return u(this,(function(i){return(null===(n=this._sdkState.websocket)||void 0===n?void 0:n.compression)?e.data instanceof Blob?((t=new FileReader).readAsArrayBuffer(e.data),t.onloadend=function(){return a(r,void 0,void 0,(function(){var e;return u(this,(function(n){switch(n.label){case 0:return[4,(r=t.result,a(void 0,void 0,void 0,(function(){var e;return u(this,(function(t){return e=oi.ungzip(r),[2,String.fromCharCode.apply(null,e)]}))})))];case 1:return e=n.sent(),this._handleMessage(e),[2]}var r}))}))}):"string"==typeof e.data&&this._handleMessage(e.data):this._handleMessage(e.data),[2]}))}))},this._ws.onerror=function(){n._logger.debug("websocket error"),n.dispatch("error",w.networkError)},this._ws.onclose=function(){n._logger.debug("websocket close"),n.dispatch("close")},this.lastActive=Date.now()},t.prototype.disconnect=function(){var e=this;return new Promise((function(t){e._logger.debug("websocket disconnect"),e._ws&&e.connectionState!==ii.CLOSED?(e._ws.onopen=Ge,e._ws.onmessage=Ge,e._ws.onerror=Ge,e._ws.onclose=function(){e.dispatch("close"),t()},e._ws.close(),e._ws=void 0):t()}))},t.prototype.send=function(e){if(!this._ws)throw w.connectionClosed;"PING"!==e.code?this.dispatch("ping-refresh"):this._logger.debug("send ping",e),this._ws.send(e.convertToMessage())},t.prototype.error=function(e){this._logger.debug("websocket error",e),this.dispatch("error",e)},t}(ee),ui=function(e){function t(t){var n,r=t.code,i=t.ackRequired,o=t.payload,s=void 0===o?{}:o,a=this;return(a=e.call(this)||this).code=r,a.payload=s,a.requestId=null!==(n=a.payload.req_id)&&void 0!==n?n:$(),a.ackRequired=i,a.payload.req_id=a.requestId,a}return i(t,e),t.prototype.convertToMessage=function(){return"".concat(this.code).concat(JSON.stringify(this.payload),"\n")},t}(ne),ci=function(e){function t(t){var n=t.all,r=t.feed,i=t.custom_types,o=t.ts,s=e.call(this)||this;return s.all=n,s.feed=r,s.customTypes=i,s.ts=o,s}return i(t,e),t}(ne),li=function(){function e(e,t){var n=t.session,r=t.sdkState,i=t.dispatcher,o=t.logger,s=t.useFetchCompat,a=void 0!==s&&s,u=this;this._ackStateMap=new Map,this._sdkState=r,this._dispatcher=i,this._logger=o,this.apiClient=new qe(e,{session:n,sdkState:r,dispatcher:i,logger:o,useFetchCompat:a}),this.websocketClient=new ai(e,{sdkState:r,dispatcher:i,logger:o}),this.websocketClient.on("message",(function(e){if(e.payload.unread_cnt&&u._dispatcher.dispatch(new ci(e.payload.unread_cnt)),e.requestId){if(u._ackStateMap.has(e.requestId)){var t=u._ackStateMap.get(e.requestId);"EROR"!==e.code?t.resolve(e):t.reject(new w({code:e.payload.code,message:e.payload.message}))}}else u._dispatcher.dispatch(e)})).on("close",(function(){u._ackStateMap.forEach((function(e){e.reject(w.connectionClosed)})),u._ackStateMap.clear()}))}return e.prototype._sendApiRequest=function(e){return a(this,void 0,void 0,(function(){return u(this,(function(t){switch(t.label){case 0:return[4,this.apiClient.send(e)];case 1:return[2,t.sent()]}}))}))},e.prototype._sendWebsocketRequest=function(e){return a(this,void 0,void 0,(function(){var t,n,r,i=this;return u(this,(function(o){if(!this._sdkState.websocket)throw w.connectionRequired;if(t=new He,e.ackRequired){r=function(r,o){i._ackStateMap.has(e.requestId)&&(i._ackStateMap.delete(e.requestId),n&&(clearTimeout(n),n=null),r?(i._logger.debug("fail websocket request",r),t.reject(r)):(i._logger.debug("receive websocket ack",e.requestId),t.resolve(o)))};try{n=setTimeout((function(){return r(w.noAckTimeout)}),this._sdkState.websocket.responseTimeout),this._ackStateMap.set(e.requestId,{resolve:function(e){return r(void 0,e)},reject:function(e){return r(e)}}),this.websocketClient.send(e)}catch(e){r(e)}}else try{this.websocketClient.send(e),t.resolve()}catch(e){t.reject(e)}return[2,t.promise]}))}))},e.prototype.send=function(e){return a(this,void 0,void 0,(function(){return u(this,(function(t){switch(t.label){case 0:return e instanceof Ce?[4,this._sendApiRequest(e)]:[3,2];case 1:case 3:return[2,t.sent()];case 2:return e instanceof ui?[4,this._sendWebsocketRequest(e)]:[3,4];case 4:throw w.invalidParameters}}))}))},e.prototype.cancel=function(e){this.apiClient.cancel(e)},e.prototype.cancelAll=function(){this.apiClient.cancelAll()},e}();!function(e){e[e.NONE=0]="NONE",e[e.INITIALIZED=1]="INITIALIZED",e[e.CONNECTING=2]="CONNECTING",e[e.CONNECTED=3]="CONNECTED",e[e.RECONNECTING=4]="RECONNECTING",e[e.INTERNAL_DISCONNECTED=5]="INTERNAL_DISCONNECTED",e[e.EXTERNAL_DISCONNECTED=6]="EXTERNAL_DISCONNECTED",e[e.LOGOUT=7]="LOGOUT"}(si||(si={}));var hi=function(e){function t(t){var n=t.stateType,r=e.call(this)||this;return r.stateType=n,r}return i(t,e),t}(ne),di=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t}(ne),fi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t}(ne),pi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t}(ne),mi=function(e){function t(t){var n=t.userId,r=t.authToken,i=t.services,o=void 0===i?[L.CHAT]:i,s=t.expiringSession,a=void 0===s||s,u=e.call(this)||this;return u.path="".concat(ae,"/").concat(n,"/session_key"),u.method=oe.POST,u.params=re({token:r,services:o,expiring_session:!!a}),u.requireAuth=!1,u}return i(t,e),t}(Ce),gi=function(e){function t(t){var n=t.authToken,r=t.expiringSession,i=void 0===r||r,o=t.requestId,s=void 0===o?"":o;return e.call(this,{code:"LOGI",payload:{token:n,expiring_session:i?1:0,req_id:s},ackRequired:!0})||this}return i(t,e),t}(ui),bi=function(e){function t(t,n){var r=e.call(this,t,n)||this,i=n.key,o=n.expires_at,s=n.services;return r.key=i,r.expiresAt=o,r.services=s,r}return i(t,e),t}(Te),vi=function(e){function t(t,n,r){var i,o=this;return(o=e.call(this,t,"LOGI",r)||this).error=null,o.newKey=null,o.newKey=null!==(i=r.new_key)&&void 0!==i?i:null,o.error=r.error?new w(r.error):null,o}return i(t,e),t}(Ve),yi=function(){function e(e){var t,n,r,i;this.isEnabled=null!==(t=e.enabled)&&void 0!==t&&t,this.feedChannels=null!==(n=e.feed_channels)&&void 0!==n?n:{},this.templateListToken=null!==(r=e.template_list_token)&&void 0!==r?r:null,this.settingsUpdatedAt=null!==(i=e.settings_updated_at)&&void 0!==i?i:0}return e.payloadify=function(e){return re(ie({enabled:e.isEnabled,feed_channels:e.feedChannels,template_list_token:e.templateListToken,settings_updated_at:e.settingsUpdatedAt}))},e}(),_i=function(e){return"sendbird@".concat(e,"/changelog_include_chat_notifications")},wi=function(){function e(e){var t;this.lastUpdatedAt=null!==(t=e.last_updated_at)&&void 0!==t?t:0}return e.payloadify=function(e){return re(ie({last_updated_at:e.lastUpdatedAt}))},e}(),Ei=5,Si=function(){function e(e){var t,n,r,i,o;void 0===e&&(e={}),this.emojiHash=e.emoji_hash||"",this.uploadSizeLimit=e.file_upload_size_limit?1048576*e.file_upload_size_limit:Number.MAX_SAFE_INTEGER,this.useReaction=!!e.use_reaction,this.applicationAttributes=null!==(t=e.application_attributes)&&void 0!==t?t:[],this.premiumFeatureList=null!==(n=e.premium_feature_list)&&void 0!==n?n:[],this.deviceTokenCache=this.applicationAttributes.includes("sdk_device_token_cache"),this.enabledChannelMemberShipHistory=this.applicationAttributes.includes("channel_membership_history"),this.multipleFilesMessageFileCountLimit=null!==(r=e.multiple_file_send_max_size)&&void 0!==r?r:5,this.allowSdkStatsUpload=null===(i=e.allow_sdk_log_ingestion)||void 0===i||i,this.uikitConfigInfo=new wi(null!==(o=e.uikit_config)&&void 0!==o?o:{}),this.notificationInfo=e.notifications?new yi(e.notifications):null}return e.payloadify=function(e){return re(ie({emoji_hash:e.emojiHash,file_upload_size_limit:e.uploadSizeLimit/1048576,application_attributes:e.applicationAttributes,premium_feature_list:e.premiumFeatureList,use_reaction:e.useReaction,allow_sdk_log_ingestion:e.allowSdkStatsUpload,uikit_config:e.uikitConfigInfo?wi.payloadify(e.uikitConfigInfo):null,notifications:e.notificationInfo?yi.payloadify(e.notificationInfo):null}))},e}(),Mi=function(){function e(e){this._iid="",this._iid=e}return e.payloadify=function(e){return{}},e}(),Oi=function(e){function t(t){var n=t.userId,r=t.metadata,i=e.call(this)||this;return i.method=oe.POST,i.path="".concat(ae,"/").concat(n,"/metadata"),i.params={metadata:r},i}return i(t,e),t}(Ce),Ai=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.metaData=n,r}return i(t,e),t}(Te),Ci=function(e){function t(t){var n=t.userId,r=t.metadata,i=t.upsert,o=e.call(this)||this;return o.method=oe.PUT,o.path="".concat(ae,"/").concat(n,"/metadata"),o.params={metadata:r,upsert:i},o}return i(t,e),t}(Ce),Ti=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.metadata=n,r}return i(t,e),t}(Te),ki=function(e){function t(t){var n=t.userId,r=t.metadataKey,i=e.call(this)||this;return i.method=oe.DELETE,i.path="".concat(ae,"/").concat(n,"/metadata/").concat(r),i}return i(t,e),t}(Ce);!function(e){i((function(){return null!==e&&e.apply(this,arguments)||this}),e)}(Te);var xi=function(e){function t(t){var n=t.userId,r=e.call(this)||this;return r.method=oe.DELETE,r.path="".concat(ae,"/").concat(n,"/metadata"),r}return i(t,e),t}(Ce);!function(e){i((function(){return null!==e&&e.apply(this,arguments)||this}),e)}(Te);var ji,Ii=function(e,t){var n=JSON.parse(JSON.stringify(e));return n._iid&&delete n._iid,t&&t(n),n},Ri=function(e,t){var n=JSON.parse(JSON.stringify(e));return t&&t(n),n},Ni=function(e){return{do:function(t){e||t()},throw:function(t){if(!e)throw t}}};!function(e){e.ONLINE="online",e.OFFLINE="offline",e.NON_AVAILABLE="nonavailable"}(ji||(ji={}));var Pi,Di=function(e){function t(t,n){var r,i,o,s,a,u,c,d,f,p,m,g,b=this;return(b=e.call(this,t)||this).userId=null!==(i=null!==(r=n.guest_id)&&void 0!==r?r:n.user_id)&&void 0!==i?i:"",b.nickname=null!==(s=null!==(o=n.nickname)&&void 0!==o?o:n.name)&&void 0!==s?s:"",b.plainProfileUrl=null!==(u=null!==(a=n.profile_url)&&void 0!==a?a:n.image)&&void 0!==u?u:"",b.requireAuth=null!==(c=n.require_auth_for_profile_image)&&void 0!==c&&c,b.metaData=null!==(d=n.metadata)&&void 0!==d?d:{},b.connectionStatus=ji.NON_AVAILABLE,A(ji,n.is_online)?b.connectionStatus=n.is_online:O("boolean",n.is_online)&&(b.connectionStatus=n.is_online?ji.ONLINE:ji.OFFLINE),b.isActive=null===(f=n.is_active)||void 0===f||f,b.lastSeenAt=null!==(p=n.last_seen_at)&&void 0!==p?p:null,b.preferredLanguages=n.preferred_languages?h([],l(n.preferred_languages),!1):null,b.friendDiscoveryKey=null!==(m=n.friend_discovery_key)&&void 0!==m?m:null,b.friendName=null!==(g=n.friend_name)&&void 0!==g?g:null,b}return i(t,e),t.payloadify=function(t){return re(ie(o(o({},e.payloadify.call(this,t)),{user_id:t.userId,nickname:t.nickname,profile_url:t.plainProfileUrl,require_auth_for_profile_image:t.requireAuth,metadata:t.metaData,is_online:t.connectionStatus,is_active:t.isActive,last_seen_at:t.lastSeenAt,preferred_languages:t.preferredLanguages,friend_discovery_key:t.friendDiscoveryKey,friend_name:t.friendName})))},Object.defineProperty(t.prototype,"profileUrl",{get:function(){var e=So.of(this._iid).sessionManager;return this.requireAuth?"".concat(this.plainProfileUrl,"?auth=").concat(e.ekey):this.plainProfileUrl},enumerable:!1,configurable:!0}),t.prototype.serialize=function(){return Ii(this)},t.prototype._isValidMetaData=function(e){return!Array.isArray(e)&&Object.keys(e).length>0&&Object.keys(e).map((function(t){return e[t]})).every((function(e){return O("string",e)}))},t.prototype._applyMetaData=function(e,t){var n=this;void 0===t&&(t=!1),Object.keys(e).forEach((function(r){t?delete n.metaData[r]:n.metaData[r]=e[r]}))},t.prototype.createMetaData=function(e){return a(this,void 0,void 0,(function(){var t,n,r,i,o,s;return u(this,(function(a){switch(a.label){case 0:return Ni(this._isValidMetaData(e)).throw(w.invalidParameters),t=So.of(this._iid),n=t.sdkState,r=t.requestQueue,i=new Oi({userId:n.userId,metadata:e}),[4,r.send(i)];case 1:return o=a.sent(),s=o.as(Ai).metaData,this._applyMetaData(s),[2,this.metaData]}}))}))},t.prototype.updateMetaData=function(e,t){return void 0===t&&(t=!1),a(this,void 0,void 0,(function(){var n,r,i,o,s,a;return u(this,(function(u){switch(u.label){case 0:return Ni(this._isValidMetaData(e)).throw(w.invalidParameters),n=So.of(this._iid),r=n.sdkState,i=n.requestQueue,o=new Ci({userId:r.userId,metadata:e,upsert:t}),[4,i.send(o)];case 1:return s=u.sent(),a=s.as(Ti).metadata,this._applyMetaData(a),[2,this.metaData]}}))}))},t.prototype.deleteMetaData=function(e){return a(this,void 0,void 0,(function(){var t,n,r,i,o;return u(this,(function(s){switch(s.label){case 0:return Ni(O("string",e)).throw(w.invalidParameters),t=So.of(this._iid),n=t.sdkState,r=t.requestQueue,i=new ki({userId:n.userId,metadataKey:e}),[4,r.send(i)];case 1:return s.sent(),this._applyMetaData(((o={})[e]=!0,o),!0),[2,this.metaData]}}))}))},t.prototype.deleteAllMetaData=function(){return a(this,void 0,void 0,(function(){var e,t,n,r;return u(this,(function(i){switch(i.label){case 0:return e=So.of(this._iid),t=e.sdkState,n=e.requestQueue,r=new xi({userId:t.userId}),[4,n.send(r)];case 1:return i.sent(),this.metaData={},[2]}}))}))},t}(Mi),Ui=function(e){function t(t){var n=t.userProfile,r=e.call(this)||this;return r.userProfile=n,r}return i(t,e),t}(ne),Li=function(){function e(e,t){var n,r,i,o,s,a,u,c,l,h,d,f,p,m;this._iid=e,this.appInfo=new Si(t),this.user=new Di(e,t),this.connectedAt=null!==(n=t.login_ts)&&void 0!==n?n:0,this.firstConnectedAt=0,this.pingInterval=null!==(r=t.ping_interval)&&void 0!==r?r:15e3,this.pongTimeout=null!==(i=t.pong_timeout)&&void 0!==i?i:5e3,this.reconnectInterval=null!==(s=null===(o=t.reconnect)||void 0===o?void 0:o.interval)&&void 0!==s?s:3e3,this.reconnectMaxInterval=null!==(u=null===(a=t.reconnect)||void 0===a?void 0:a.max_interval)&&void 0!==u?u:6e4,this.reconnectRetryCount=null!==(l=null===(c=t.reconnect)||void 0===c?void 0:c.retry_cnt)&&void 0!==l?l:5,this.reconnectIntervalMultiple=null!==(d=null===(h=t.reconnect)||void 0===h?void 0:h.mul)&&void 0!==d?d:2,this.maxUnreadCountOnSuperGroup=null!==(f=t.max_unread_cnt_on_super_group)&&void 0!==f?f:100,this.profileImageEncryption=!!t.profile_image_encryption,this.concurrentCallLimit=null!==(p=t.concurrent_call_limit)&&void 0!==p?p:5,this.backOffDelay=null!==(m=t.back_off_delay)&&void 0!==m?m:100}return e.payloadify=function(e){return re(ie(o(o(o({},Di.payloadify(e.user)),Si.payloadify(e.appInfo)),{login_ts:e.connectedAt,ping_interval:e.pingInterval,pong_timeout:e.pongTimeout,reconnect:{interval:e.reconnectInterval,max_interval:e.reconnectMaxInterval,retry_cnt:e.reconnectRetryCount,mul:e.reconnectIntervalMultiple},max_unread_cnt_on_super_group:e.maxUnreadCountOnSuperGroup,profile_image_encryption:e.profileImageEncryption,concurrent_call_limit:e.concurrentCallLimit,back_off_delay:e.backOffDelay})))},e.prototype.apply=function(){var e=this.reconnectInterval,t=this.reconnectMaxInterval,n=this.reconnectIntervalMultiple,r=So.of(this._iid);r.sdkState.websocket&&(r.sdkState.websocket.pingInterval=1e3*this.pingInterval,r.sdkState.websocket.pongTimeout=1e3*this.pongTimeout,r.sdkState.websocket.reconnectMaxRetry=this.reconnectRetryCount,r.sdkState.websocket.reconnectRetryStrategy={calcTimeout:function(r){return r>0?1e3*Math.min(e*Math.pow(n,r-1),t):10}}),r.appInfo=this.appInfo,r.sessionManager.currentUser=this.user,r.connectedAt=this.connectedAt,this.firstConnectedAt||(r.firstConnectedAt=this.connectedAt),r.maxSuperGroupChannelUnreadCount=this.maxUnreadCountOnSuperGroup,r.concurrentCallLimit=this.concurrentCallLimit,r.backOffDelay=this.backOffDelay,r.dispatcher.dispatch(new Ui({userProfile:this}))},e}(),Fi=function(e){function t(t,n,r){var i,o,s,a,u=this;return(u=e.call(this,t,n,r)||this).error=null,u.services=[],u.userProfile=new Li(t,r),u.deviceTokenLastDeletedAt=null!==(i=r.device_token_last_deleted_at)&&void 0!==i?i:0,u.key=null!==(o=r.key)&&void 0!==o?o:"",u.ekey=null!==(s=r.ekey)&&void 0!==s?s:"",u.error=r.error?new w(r):null,u.services=null!==(a=r.services)&&void 0!==a?a:[],u}return i(t,e),t.asError=function(e){return new t("","LOGI",o({user_id:"",error:!0},e))},t.prototype.applyTo=function(e){return a(this,void 0,void 0,(function(){var t;return u(this,(function(n){switch(n.label){case 0:return this.error?[3,4]:(t=So.of(e))?[4,t.sessionManager.login(this)]:[3,2];case 1:return n.sent(),this.userProfile.apply(),[3,3];case 2:throw w.lostInstance;case 3:return[3,5];case 4:throw this.error;case 5:return[2]}}))}))},t}(Ve),Bi=function(){function e(){this.type=si.NONE,this.name="none"}return e.prototype.run=function(e){return a(this,void 0,void 0,(function(){return u(this,(function(e){return[2]}))}))},e.prototype.onConnect=function(e,t){return a(this,void 0,void 0,(function(){return u(this,(function(e){return[2]}))}))},e.prototype.onReconnect=function(e,t){return t.resetReconnectCount,a(this,void 0,void 0,(function(){return u(this,(function(e){return[2]}))}))},e.prototype.onDisconnect=function(e,t){return t.error,t.autoReconnect,a(this,void 0,void 0,(function(){return u(this,(function(e){return[2]}))}))},e.prototype.onDisconnectWebSocket=function(e){return a(this,void 0,void 0,(function(){return u(this,(function(e){return[2]}))}))},e.prototype.onLogout=function(e){return a(this,void 0,void 0,(function(){return u(this,(function(e){return[2]}))}))},e}(),Hi=function(e){return a(void 0,void 0,void 0,(function(){var t;return u(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,e()];case 1:return n.sent(),[3,3];case 2:if(!((t=n.sent())instanceof w))throw t;return t.throwOutside(),[3,3];case 3:return[2]}}))}))},qi=function(e){return a(void 0,void 0,void 0,(function(){return u(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,e()];case 1:case 2:return t.sent(),[3,3];case 3:return[2]}}))}))},Vi=function(e){function t(t){void 0===t&&(t={});var n,r=this;return(r=e.call(this)||this).type=si.LOGOUT,r.name="logout",r._wasPreviouslyConnected=null===(n=t.wasPreviouslyConnected)||void 0===n||n,r}return i(t,e),t.prototype.run=function(e){return a(this,void 0,void 0,(function(){var t,n,r=this;return u(this,(function(i){switch(i.label){case 0:return t=Date.now(),n=e.sdkState.userId,[4,e.logout()];case 1:return i.sent(),[4,e.changeState(new $i,t)];case 2:return i.sent(),this._wasPreviouslyConnected&&Hi((function(){return a(r,void 0,void 0,(function(){return u(this,(function(t){return e.connectionHandlers.forEach((function(e){e.onDisconnected&&e.onDisconnected(n)})),[2]}))}))})),[2]}}))}))},t}(Bi),Gi=function(e){function t(){var t=e.call(this)||this;return t.type=si.EXTERNAL_DISCONNECTED,t.name="externaldisconnected",t}return i(t,e),t.prototype.run=function(e){return a(this,void 0,void 0,(function(){return u(this,(function(t){switch(t.label){case 0:return[4,e.disconnect()];case 1:return t.sent(),[2]}}))}))},t.prototype.onConnect=function(e,t){return a(this,void 0,void 0,(function(){var n;return u(this,(function(r){switch(r.label){case 0:return n=Date.now(),[4,e.disconnect()];case 1:return r.sent(),[4,e.changeState(new Zi({authToken:t}),n)];case 2:return r.sent(),[2]}}))}))},t.prototype.onReconnect=function(e){return a(this,void 0,void 0,(function(){var t;return u(this,(function(n){switch(n.label){case 0:return t=Date.now(),[4,e.changeState(new Qi,t)];case 1:return n.sent(),[2]}}))}))},t.prototype.onLogout=function(e){return a(this,void 0,void 0,(function(){var t;return u(this,(function(n){switch(n.label){case 0:return t=Date.now(),[4,e.changeState(new Vi,t)];case 1:return n.sent(),[2]}}))}))},t}(Bi),zi=function(e){function t(t){var n=t.autoReconnect,r=e.call(this)||this;return r.type=si.INTERNAL_DISCONNECTED,r.name="internaldisconnected",r._autoReconnect=!1,r._autoReconnect=n,r}return i(t,e),t.prototype.run=function(e){return a(this,void 0,void 0,(function(){var t;return u(this,(function(n){switch(n.label){case 0:return t=Date.now(),[4,e.disconnect()];case 1:return n.sent(),this._autoReconnect?[4,e.changeState(new Qi,t)]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))},t.prototype.onConnect=function(e,t){return a(this,void 0,void 0,(function(){var n;return u(this,(function(r){switch(r.label){case 0:return n=Date.now(),[4,e.disconnect()];case 1:return r.sent(),[4,e.changeState(new Zi({authToken:t}),n)];case 2:return r.sent(),[2]}}))}))},t.prototype.onReconnect=function(e){return a(this,void 0,void 0,(function(){var t;return u(this,(function(n){switch(n.label){case 0:return t=Date.now(),[4,e.changeState(new Qi,t)];case 1:return n.sent(),[2]}}))}))},t.prototype.onDisconnectWebSocket=function(e){return a(this,void 0,void 0,(function(){var t;return u(this,(function(n){switch(n.label){case 0:return t=Date.now(),[4,e.changeState(new Gi,t)];case 1:return n.sent(),[2]}}))}))},t.prototype.onLogout=function(e){return a(this,void 0,void 0,(function(){var t;return u(this,(function(n){switch(n.label){case 0:return t=Date.now(),[4,e.changeState(new Vi,t)];case 1:return n.sent(),[2]}}))}))},t}(Bi),Wi=function(e){return a(void 0,void 0,void 0,(function(){return u(this,(function(t){return[2,new Promise((function(t){return setTimeout(t,e)}))]}))}))},Ki=function(){function e(){}return e.prototype.calcTimeout=function(){return 0},e}(),Yi=function(e,t,n){return void 0===n&&(n=new Ki),a(void 0,void 0,void 0,(function(){var r,i,o,s,a,c;return u(this,(function(u){switch(u.label){case 0:r=0,i=null,o=function(e){return i=null!=e?e:new Error("Halted")},s=function(){r=0},u.label=1;case 1:if(!(-1===t||r<t))return[3,9];u.label=2;case 2:return u.trys.push([2,4,,8]),[4,e(o,s)];case 3:if(a=u.sent(),i)throw i;return[2,a];case 4:if(c=u.sent(),i)return[3,6];if(++r===t)throw c;return[4,Wi(n.calcTimeout(r))];case 5:return u.sent(),[3,7];case 6:throw i;case 7:return[3,8];case 8:return[3,1];case 9:throw"It should not happen."}}))}))},Qi=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=si.RECONNECTING,t.name="reconnecting",t._callbacks=[],t}return i(t,e),t.prototype._halt=function(e){this._haltConnect&&(this._haltConnect(e),this._haltConnect=void 0)},t.prototype._flushCallbacks=function(e){this._haltConnect=void 0,this._resetConnect=void 0,this._callbacks.forEach((function(t){return t(e)}))},t.prototype.run=function(e){return a(this,void 0,void 0,(function(){var t,n,r,i,o,s,c=this;return u(this,(function(l){switch(l.label){case 0:t=Date.now(),n=new He,this._callbacks.push((function(e){return e?n.reject(e):n.resolve()})),Hi((function(){return a(c,void 0,void 0,(function(){return u(this,(function(t){return e.connectionHandlers.forEach((function(e){e.onReconnectStarted&&e.onReconnectStarted()})),[2]}))}))})),l.label=1;case 1:return l.trys.push([1,4,,9]),r=e.sdkState.websocket,i=r.reconnectMaxRetry,o=r.reconnectRetryStrategy,[4,Yi((function(t,n){return a(c,void 0,void 0,(function(){var r;return u(this,(function(i){switch(i.label){case 0:this._haltConnect=t,this._resetConnect=n,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,e.connect()];case 2:return i.sent(),[3,4];case 3:if(r=i.sent(),e.clearLoginTimer(),r instanceof w){if(r.code===d.CONNECTION_CANCELED)return t(r),[2];if(r.isSessionExpiredError||r.isSessionInvalidatedError)return t(r),[2]}throw r;case 4:return[2]}}))}))}),i,o)];case 2:return l.sent(),[4,e.changeState(new Ji,t)];case 3:return l.sent(),Hi((function(){return a(c,void 0,void 0,(function(){return u(this,(function(t){return this._flushCallbacks(),e.connectionHandlers.forEach((function(e){e.onReconnectSucceeded&&e.onReconnectSucceeded()})),[2]}))}))})),[3,9];case 4:return s=l.sent(),_(s)?[3,7]:s instanceof w?s.code===d.CONNECTION_CANCELED?[3,6]:[4,e.changeState(new zi({autoReconnect:!1}),t)]:[3,6];case 5:l.sent(),l.label=6;case 6:return Hi((function(){return a(c,void 0,void 0,(function(){return u(this,(function(t){return this._flushCallbacks(s),e.connectionHandlers.forEach((function(e){e.onReconnectFailed&&e.onReconnectFailed()})),[2]}))}))})),[3,8];case 7:throw s;case 8:return[3,9];case 9:return[2,n.promise]}}))}))},t.prototype.onConnect=function(e,t){return a(this,void 0,void 0,(function(){var n;return u(this,(function(r){return n=new He,this._halt(w.connectionCanceled),e.cancelConnectForRetry(),this._callbacks.push((function(){var r=Date.now();e.changeState(new Zi({authToken:t}),r).then((function(){n.resolve()})).catch((function(e){n.reject(e)}))})),[2,n.promise]}))}))},t.prototype.onReconnect=function(e,t){var n=t.resetReconnectCount,r=void 0!==n&&n;return a(this,void 0,void 0,(function(){var e;return u(this,(function(t){return e=new He,this._resetConnect&&r&&this._resetConnect(),this._callbacks.push((function(t){return t?e.reject(t):e.resolve()})),[2,e.promise]}))}))},t.prototype.onDisconnect=function(e,t){t.error;var n=t.autoReconnect,r=void 0===n||n;return a(this,void 0,void 0,(function(){var t;return u(this,(function(n){switch(n.label){case 0:return t=Date.now(),this._halt(w.connectionCanceled),[4,e.changeState(new zi({autoReconnect:r}),t)];case 1:return n.sent(),[2]}}))}))},t.prototype.onDisconnectWebSocket=function(e){return a(this,void 0,void 0,(function(){var t;return u(this,(function(n){switch(n.label){case 0:return t=Date.now(),this._halt(w.connectionCanceled),[4,e.changeState(new Gi,t)];case 1:return n.sent(),[2]}}))}))},t.prototype.onLogout=function(e){return a(this,void 0,void 0,(function(){var t;return u(this,(function(n){switch(n.label){case 0:return t=Date.now(),this._halt(w.connectionCanceled),[4,e.changeState(new Vi,t)];case 1:return n.sent(),[2]}}))}))},t}(Bi),Ji=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=si.CONNECTED,t.name="connected",t}return i(t,e),t.prototype.onReconnect=function(e){return a(this,void 0,void 0,(function(){var t;return u(this,(function(n){switch(n.label){case 0:return t=Date.now(),[4,e.disconnect()];case 1:return n.sent(),[4,e.changeState(new Qi,t)];case 2:return n.sent(),[2]}}))}))},t.prototype.onDisconnect=function(e,t){var n=t.autoReconnect;return a(this,void 0,void 0,(function(){var t;return u(this,(function(r){switch(r.label){case 0:return t=Date.now(),[4,e.changeState(new zi({autoReconnect:n}),t)];case 1:return r.sent(),[2]}}))}))},t.prototype.onDisconnectWebSocket=function(e){return a(this,void 0,void 0,(function(){var t;return u(this,(function(n){switch(n.label){case 0:return t=Date.now(),[4,e.changeState(new Gi,t)];case 1:return n.sent(),[2]}}))}))},t.prototype.onLogout=function(e){return a(this,void 0,void 0,(function(){var t;return u(this,(function(n){switch(n.label){case 0:return t=Date.now(),[4,e.changeState(new Vi,t)];case 1:return n.sent(),[2]}}))}))},t}(Bi),Zi=function(e){function t(t){var n=t.authToken,r=e.call(this)||this;return r.type=si.CONNECTING,r.name="connecting",r._authToken="",r._callbacks=[],r._authToken=n,r}return i(t,e),t.prototype._halt=function(e){this._haltConnect&&(this._haltConnect(e),this._haltConnect=void 0)},t.prototype._flushCallbacks=function(e){this._haltConnect=void 0,this._callbacks.forEach((function(t){return t(e)}))},t.prototype.run=function(e){return a(this,void 0,void 0,(function(){var t,n,r,i=this;return u(this,(function(o){switch(o.label){case 0:t=Date.now(),n=new He,this._callbacks.push((function(e){return e?n.reject(e):n.resolve()})),o.label=1;case 1:return o.trys.push([1,4,,10]),[4,Yi((function(t){return a(i,void 0,void 0,(function(){var n;return u(this,(function(r){switch(r.label){case 0:this._haltConnect=t,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,e.connect(this._authToken)];case 2:return r.sent(),[3,4];case 3:if(n=r.sent(),e.clearLoginTimer(),n instanceof w&&n.code===d.CONNECTION_CANCELED)return t(n),[2];throw n;case 4:return[2]}}))}))}),e.sdkState.websocket.connectMaxRetry)];case 2:return o.sent(),[4,e.changeState(new Ji,t)];case 3:return o.sent(),Hi((function(){return a(i,void 0,void 0,(function(){return u(this,(function(t){return this._flushCallbacks(),e.connectionHandlers.forEach((function(t){t.onConnected&&t.onConnected(e.sdkState.userId)})),[2]}))}))})),[3,10];case 4:return r=o.sent(),_(r)?[3,8]:[4,e.disconnect()];case 5:return o.sent(),r instanceof w?r.code===d.CONNECTION_CANCELED?[3,7]:[4,e.changeState(new $i,t)]:[3,7];case 6:o.sent(),o.label=7;case 7:return Hi((function(){return a(i,void 0,void 0,(function(){return u(this,(function(e){return this._flushCallbacks(r),[2]}))}))})),[3,9];case 8:throw r;case 9:return[3,10];case 10:return[2,n.promise]}}))}))},t.prototype.onConnect=function(e){return a(this,void 0,void 0,(function(){var e;return u(this,(function(t){return e=new He,this._callbacks.push((function(t){return t?e.reject(t):e.resolve()})),[2,e.promise]}))}))},t.prototype.onDisconnect=function(e,t){var n=t.error,r=void 0===n?null:n,i=t.autoReconnect,o=void 0!==i&&i;return a(this,void 0,void 0,(function(){var t;return u(this,(function(n){switch(n.label){case 0:return t=Date.now(),this._halt(null!=r?r:w.connectionCanceled),e.hasSession?[4,e.changeState(new zi({autoReconnect:o}),t)]:[3,2];case 1:return n.sent(),[3,4];case 2:return[4,e.changeState(new Vi,t)];case 3:n.sent(),n.label=4;case 4:return[2]}}))}))},t.prototype.onDisconnectWebSocket=function(e){return a(this,void 0,void 0,(function(){var t;return u(this,(function(n){switch(n.label){case 0:return t=Date.now(),this._halt(w.connectionCanceled),e.hasSession?[4,e.changeState(new Gi,t)]:[3,2];case 1:return n.sent(),[3,4];case 2:return[4,e.changeState(new Vi,t)];case 3:n.sent(),n.label=4;case 4:return[2]}}))}))},t.prototype.onLogout=function(e){return a(this,void 0,void 0,(function(){var t;return u(this,(function(n){switch(n.label){case 0:return t=Date.now(),this._halt(w.connectionCanceled),[4,e.changeState(new Vi,t)];case 1:return n.sent(),[2]}}))}))},t}(Bi),$i=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=si.INITIALIZED,t.name="initialized",t}return i(t,e),t.prototype.onConnect=function(e,t){return a(this,void 0,void 0,(function(){var n;return u(this,(function(r){switch(r.label){case 0:return n=Date.now(),[4,e.changeState(new Zi({authToken:t}),n)];case 1:return r.sent(),[2]}}))}))},t.prototype.onLogout=function(e){return a(this,void 0,void 0,(function(){var t;return u(this,(function(n){switch(n.label){case 0:return t=Date.now(),[4,e.changeState(new Vi({wasPreviouslyConnected:!1}),t)];case 1:return n.sent(),[2]}}))}))},t}(Bi),Xi=function(e){function t(){return e.call(this,{code:"PING",payload:{id:Date.now(),active:1},ackRequired:!1})||this}return i(t,e),t}(ui),eo=function(){function e(e){var t=e.pingDelegate,n=e.sdkState,r=e.logger;this.pingDelegate=t,this.sdkState=n,this._logger=r}return Object.defineProperty(e.prototype,"isWaiting",{get:function(){return!!this._pingTimeoutTimer},enumerable:!1,configurable:!0}),e.prototype.ping=function(){var e,t=this;if(!this.sdkState.websocket)throw w.connectionRequired;var n=new Xi;try{var r=null!==(e=this.sdkState.websocket.pongTimeout)&&void 0!==e?e:5e3;this._pingTimeoutTimer=setTimeout((function(){t._logger.debug("pinger.ping() timeout"),t.pingDelegate.error()}),r),this.pingDelegate.send(n),this._logger.debug("pinger.ping()")}catch(e){this._logger.debug("pinger.ping() error",e),this._pingTimeoutTimer&&(clearTimeout(this._pingTimeoutTimer),this._pingTimeoutTimer=void 0),this.pingDelegate.error()}return n},e.prototype.pong=function(){this._logger.debug("pinger.pong()"),this._pingTimeoutTimer&&(clearTimeout(this._pingTimeoutTimer),this._pingTimeoutTimer=void 0)},e.prototype.refreshTimer=function(){var e,t=this;if(!this.sdkState.websocket)throw w.connectionRequired;this._logger.debug("pinger.refreshTimer()");var n=null!==(e=this.sdkState.websocket.pingInterval)&&void 0!==e?e:15e3;this.stop(),this._pingTimer=setInterval((function(){t.ping()}),n)},e.prototype.start=function(){this._logger.debug("pinger.start()"),this.refreshTimer(),this.ping()},e.prototype.stop=function(){this._logger.debug("pinger.stop()"),this._pingTimer&&(clearInterval(this._pingTimer),this._pingTimer=void 0),this._pingTimeoutTimer&&(clearTimeout(this._pingTimeoutTimer),this._pingTimeoutTimer=void 0)},e}(),to=function(e){function t(t){var n=t.request,r=void 0===n||n,i=t.features,s=void 0===i?{}:i,a=t.options,u=void 0===a?{}:a,c=e.call(this)||this;return c.request=r,c.features=o({localCache:!0},s),c.options=o({ingestion:!0},u),c}return i(t,e),t}(ne),no=["premium_feature_list","file_upload_size_limit","application_attributes","emoji_hash","multiple_file_send_max_size","notifications"],ro=function(e){function t(t,n){var r,i=n.sdkState,o=n.cacheContext,s=n.connectionHandlers,a=n.sessionManager,u=n.websocketClient,c=n.dispatcher,l=n.logger,h=n.entryState,d=void 0===h?new $i:h,f=this;return(f=e.call(this)||this)._stateUpdatedAt=0,f._connectingAt=0,f._connectionRequestQueue=[],f._iid=t,f.sdkState=i,f.cacheContext=o,f.connectionHandlers=s,f._sessionManager=a,f._websocketClient=u,f._dispatcher=c,f._logger=l,f._currentState=d,(null===(r=f.sdkState.websocket)||void 0===r?void 0:r.pingerDisabled)||(f._pinger=new eo({pingDelegate:{send:function(e){return f._websocketClient.send(e)},error:function(e){return f._websocketClient.error(e)}},sdkState:f.sdkState,logger:l})),f._websocketClient.on("open",(function(){f._tryResolveConnectionRequest()})).on("message",(function(e){"LOGI"===e.code&&(f.clearLoginTimer(),f._dispatcher.dispatch(e.as(Fi)))})).on("ping-refresh",(function(){var e;return null===(e=f._pinger)||void 0===e?void 0:e.refreshTimer()})).on("pong",(function(){var e;return null===(e=f._pinger)||void 0===e?void 0:e.pong()})).on("error",(function(){var e;return null===(e=f._pinger)||void 0===e?void 0:e.stop()})).on("close",(function(){f._logiProcessingTimer=setTimeout((function(){f._logiProcessingTimer=void 0,f._unresolvedLogi||f._rejectConnectionRequest(w.networkError)}),500)})),f._dispatcher.on((function(e){e instanceof Fi&&(f._unresolvedLogi=e,f._tryResolveConnectionRequest())})),f}return i(t,e),Object.defineProperty(t.prototype,"currentState",{get:function(){return this._currentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasSession",{get:function(){return this._sessionManager.session.hasSession},enumerable:!1,configurable:!0}),t.prototype.changeState=function(e,t){return a(this,void 0,void 0,(function(){return u(this,(function(n){switch(n.label){case 0:return t>=this._stateUpdatedAt?(this._currentState=e,this._stateUpdatedAt=t,this._dispatcher.dispatch(new hi({stateType:e.type})),this._logger.debug("connection state changes to ".concat(e.name)),[4,this._currentState.run(this)]):[3,2];case 1:return n.sent(),[2,!0];case 2:return[2,!1]}}))}))},t.prototype._tryResolveConnectionRequest=function(){var e;return a(this,void 0,void 0,(function(){var t,n;return u(this,(function(r){switch(r.label){case 0:return t=this._unresolvedLogi,this._websocketClient.isOpen&&t?(this._unresolvedLogi=void 0,t.error?[3,2]:[4,t.applyTo(this._iid)]):[3,3];case 1:return r.sent(),n=t.userProfile,this._enableStatLog({request:n.appInfo.applicationAttributes.includes("allow_sdk_request_log_publish"),features:{localCache:n.appInfo.applicationAttributes.includes("allow_sdk_feature_local_cache_log_publish")},options:{ingestion:n.appInfo.allowSdkStatsUpload}}),this._statLogConnection(),null===(e=this._pinger)||void 0===e||e.start(),this._connectionRequestQueue.forEach((function(e){return e.resolve()})),this._connectionRequestQueue=[],this.sdkState.appState="foreground",[3,3];case 2:this._sessionManager.session.authToken=void 0,(t.error.isSessionExpiredError||t.error.isSessionInvalidatedError)&&this._dispatcher.dispatch(new xe({reason:t.error.code})),this._rejectConnectionRequest(t.error),r.label=3;case 3:return[2]}}))}))},t.prototype._rejectConnectionRequest=function(e){var t;if(null===(t=this._pinger)||void 0===t||t.stop(),this.clearLoginTimer(),this._connectionRequestQueue.length>0){var n=this._connectionRequestQueue;this._connectionRequestQueue=[],n.forEach((function(t){return t.reject(e)})),this._statLogConnection(e)}},t.prototype._url=function(){var e,t=this.sdkState,n=t.appId,r=t.appVersion,i=t.userId,o=t.extensions,s=t.sendbirdRuntimeEnvironment,a=this.cacheContext.localCacheEnabled,u=this._sessionManager.session,c=null===(e=this.sdkState.websocket)||void 0===e?void 0:e.compression,l=!!(null!=o?o:{}).sb_uikit,h=Be.userAgentWithExtension(o);return"".concat(this.sdkState.websocket.host,"/?p=JS&pv=").concat(encodeURIComponent(p.OS_VERSION),"&sv=").concat(encodeURIComponent(p.SDK_VERSION),"&ai=").concat(n).concat(r?"&av=".concat(r):"").concat(u.hasSession?"":"&user_id=".concat(encodeURIComponent(i)),"&pmce=").concat(c?1:0,"&active=1&device_token_types=").concat(encodeURIComponent(["gcm","huawei","apns"].join(",")),"&SB-User-Agent=").concat(h,"&SB-SDK-User-Agent=").concat(encodeURIComponent(Be.sendbirdSdkUserAgentWithExtension(s)),"&Request-Sent-Timestamp=").concat(Date.now().toString(),"&include_extra_data=").concat(encodeURIComponent(String(no))).concat(this._sessionManager.handler?"&expiring_session=1":"","&use_local_cache=").concat(a?1:0,"&include_poll_details=1").concat(l?"&uikit_config=1":"")},t.prototype._enableStatLog=function(e){var t=e.request,n=e.features,r=e.options,i=void 0===r?{}:r;this._dispatcher.dispatch(new to({request:t,features:n,options:i}))},t.prototype._statLogConnection=function(e){var t;this._dispatcher.dispatch(new je(new De({type:Ae.WEBSOCKET_CONNECT,data:{host_url:null===(t=this.sdkState.websocket)||void 0===t?void 0:t.host,success:!e,latency:Date.now()-this._connectingAt,error_code:null==e?void 0:e.code,error_description:null==e?void 0:e.message}})))},t.prototype.connect=function(e){var t;return void 0===e&&(e=""),a(this,void 0,void 0,(function(){var n,r,i,o=this;return u(this,(function(s){return this._logiProcessingTimer&&(clearTimeout(this._logiProcessingTimer),this._logiProcessingTimer=void 0,this._rejectConnectionRequest(w.connectionCanceled)),n=this._url(),r=new He,this._connectionRequestQueue.push(r),1===this._connectionRequestQueue.length&&(this._connectingAt=Date.now(),this._loginTimer=setTimeout((function(){o._loginTimer=void 0,o._rejectConnectionRequest(w.loginTimeout)}),null===(t=this.sdkState.websocket)||void 0===t?void 0:t.responseTimeout),i=this._sessionManager.session,e&&(i.authToken=e),this._websocketClient.connect(n,JSON.stringify(i.hasSession?{auth:i.sessionKey}:{token:e}))),[2,r.promise]}))}))},t.prototype.cancelConnectForRetry=function(){this._dispatcher.dispatch(Fi.asError(w.connectionRenew))},t.prototype.disconnect=function(){return a(this,void 0,void 0,(function(){return u(this,(function(e){switch(e.label){case 0:return[4,this._websocketClient.disconnect()];case 1:return e.sent(),[2]}}))}))},t.prototype.logout=function(){return a(this,void 0,void 0,(function(){return u(this,(function(e){switch(e.label){case 0:return this.sdkState.userId=void 0,this._unresolvedLogi=void 0,[4,this._sessionManager.clear()];case 1:return e.sent(),[4,this.disconnect()];case 2:return e.sent(),[2]}}))}))},t.prototype.clearLoginTimer=function(){this._loginTimer&&(clearTimeout(this._loginTimer),this._loginTimer=void 0)},t}(ee),io=function(e){function t(t){var n=t.appId,r=t.userId,i=t.services,o=void 0===i?[L.CHAT]:i,s=t.includeUIKitConfig,a=void 0!==s&&s,u=t.localCacheEnabled,c=void 0===u||u,l=t.expiringSession,h=void 0===l||l,d=e.call(this)||this;return d.path="".concat(ae,"/").concat(r,"/login"),d.method=oe.POST,d.params={expiring_session:!!h,services:o,include_logi:!0,include_extra_data:String(no),uikit_config:a,use_local_cache:c,app_id:n},d.requireAuth=!1,d}return i(t,e),t}(Ce),oo=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.logi=new Fi(t,"LOGI",n),r}return i(t,e),t}(Te);!function(e){e[e.ALL=0]="ALL",e[e.WEBSOCKET=1]="WEBSOCKET",e[e.API=2]="API"}(Pi||(Pi={}));var so,ao=[mi,io],uo=function(){function e(e,t){var n=t.session,r=t.sdkState,i=t.dispatcher,o=t.logger,s=t.useFetchCompat,a=void 0!==s&&s,u=this;this._currentConnectionStateType=si.INITIALIZED,this._lazyCallQueue=[],this.commandRouter=new li(e,{session:n,sdkState:r,dispatcher:i,logger:o,useFetchCompat:a}),this._session=n,this._logger=o,this._dispatcher=i,this._dispatcher.on((function(e){var t,n,r,i;if(e instanceof hi){var o=e.stateType;switch(u._currentConnectionStateType=o,o){case si.CONNECTED:u._resolveLazyCallQueue();break;case si.INITIALIZED:case si.INTERNAL_DISCONNECTED:case si.EXTERNAL_DISCONNECTED:case si.LOGOUT:u._rejectLazyCallQueue((null===(r=u._session)||void 0===r?void 0:r.hasSession)?w.connectionClosed:w.connectionRequired)}}else if(e instanceof di)(null===(i=u._session.services)||void 0===i?void 0:i.includes(L.CHAT))||u._resolveLazyCallQueue(Pi.API);else if(e instanceof fi||e instanceof pi)u._rejectLazyCallQueue(w.connectionClosed);else if(e instanceof Ie){var s=e.request,a=e.deferred,l=e.error;try{for(var h=c(ao),d=h.next();!d.done;d=h.next())if(s instanceof d.value)return void a.reject(l)}catch(e){t={error:e}}finally{try{d&&!d.done&&(n=h.return)&&n.call(h)}finally{if(t)throw t.error}}u._lazyCallQueue.push({command:s,deferred:a})}}))}return Object.defineProperty(e.prototype,"isReady",{get:function(){return this._currentConnectionStateType===si.CONNECTED},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isLazyCallActivated",{get:function(){return this._currentConnectionStateType===si.CONNECTING||this._currentConnectionStateType===si.RECONNECTING||this._session.isRefreshing},enumerable:!1,configurable:!0}),e.prototype._classifyLazyCallQueueByScope=function(e){var t,n=[],r=[];switch(e){case Pi.ALL:t=null;break;case Pi.WEBSOCKET:t=ui;break;case Pi.API:t=Ce}var i=!1;return this._lazyCallQueue.forEach((function(e){!t||e.command instanceof t||(i=!0),i?r.push(e):n.push(e)})),[n,r]},e.prototype._resolveLazyCallQueue=function(e){var t=this;void 0===e&&(e=Pi.ALL);var n=l(this._classifyLazyCallQueueByScope(e),2),r=n[0],i=n[1];this._lazyCallQueue=i,r.forEach((function(e){return a(t,void 0,void 0,(function(){var t,n,r,i,o;return u(this,(function(s){switch(s.label){case 0:t=e.command,n=e.deferred,(r=e.timeout)&&clearTimeout(r),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,this.send(t)];case 2:return i=s.sent(),n.resolve(i),[3,4];case 3:return o=s.sent(),n.reject(o),[3,4];case 4:return[2]}}))}))}))},e.prototype._rejectLazyCallQueue=function(e,t){var n=this;void 0===t&&(t=Pi.ALL);var r=l(this._classifyLazyCallQueueByScope(t),2),i=r[0],o=r[1];this._lazyCallQueue=o,i.forEach((function(t){return a(n,void 0,void 0,(function(){var n,r;return u(this,(function(i){return n=t.deferred,r=t.timeout,clearTimeout(r),n.reject(e),[2]}))}))}))},e.prototype.send=function(e){return a(this,void 0,void 0,(function(){var t,n,r=this;return u(this,(function(i){switch(i.label){case 0:return e instanceof ui?this.isReady?(this._logger.debug("send websocket request",e),[4,this.commandRouter.send(e)]):[3,2]:[3,4];case 1:case 5:return[2,i.sent()];case 2:if(this.isLazyCallActivated)return this._logger.debug("wait websocket request",e),t=new He,this._lazyCallQueue.push({command:e,deferred:t,timeout:setTimeout((function(){return r.timeout(e.requestId)}),1e4)}),[2,t.promise];throw this._logger.debug("fail websocket request"),w.connectionRequired;case 3:case 7:return[3,9];case 4:return e instanceof Ce?this._session.hasSession?(this._logger.debug("send api request",e),[4,this.commandRouter.send(e)]):[3,6]:[3,8];case 6:if(this.isLazyCallActivated)return this._logger.debug("wait api request",e),t=new He,this._lazyCallQueue.push({command:e,deferred:t,timeout:setTimeout((function(){return r.timeout(e.requestId)}),1e4)}),[2,t.promise];throw n=w.connectionRequired,this._logger.debug("fail api request",n),n;case 8:throw w.invalidCommand;case 9:return[2]}}))}))},e.prototype.forceSend=function(e){return a(this,void 0,void 0,(function(){return u(this,(function(t){switch(t.label){case 0:return this._logger.debug("send forced request",e),e instanceof ui||e instanceof Ce?[4,this.commandRouter.send(e)]:[3,2];case 1:return[2,t.sent()];case 2:throw w.invalidCommand}}))}))},e.prototype.timeout=function(e){this._logger.debug("timeout request",e);var t=this._lazyCallQueue.findIndex((function(t){return t.command.requestId===e}));t>-1&&(this._lazyCallQueue[t].deferred.reject(w.connectionRequired),this._lazyCallQueue.splice(t,1))},e.prototype.cancel=function(e){this._logger.debug("cancel api request",e),this.commandRouter.cancel(e)},e.prototype.cancelAll=function(){this._logger.debug("cancel all api requests"),this.commandRouter.cancelAll()},e}(),co="sendbird@devicetokens",lo=function(){function e(e){var t=e.type,n=e.token;this.type=t,this.token=n}return e.payloadify=function(e){return re(ie({type:e.type,token:e.token}))},e}(),ho=new WeakMap,fo=function(e){function t(t){var n=t.session,r=t.cacheContext,i=t.sdkState,o=t.dispatcher,s=t.requestQueue,a=t.logger,u=e.call(this)||this;return u._currentConnectionStateType=si.INITIALIZED,u._isRefreshingAuthToken=!1,u.currentUser=null,u.session=n,u._cacheContext=r,u._sdkState=i,u._dispatcher=o,u._requestQueue=s,u._logger=a,u._deviceTokens=[],u._dispatcher.on((function(e){var t;if(e instanceof hi){var n=e.stateType;u._currentConnectionStateType=n}else e instanceof xe&&u.handler&&(e.invalidateSessionToken&&(u.session.authToken=void 0),e.error&&e.error.isSessionExpiredError&&(u._logger.debug("session expired"),(null===(t=u.handler)||void 0===t?void 0:t.onSessionExpired)&&u.handler.onSessionExpired(),u.refresh()))})),u}return i(t,e),Object.defineProperty(t.prototype,"ekey",{get:function(){return ho.get(this)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"deviceTokens",{get:function(){return this._deviceTokens},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"deviceTokenLastDeletedAt",{get:function(){return this._deviceTokenLastDeletedAt},enumerable:!1,configurable:!0}),t.prototype.indexOfDeviceToken=function(e,t){return this._deviceTokens.findIndex((function(n){return n.type===e&&n.token===t}))},t.prototype.hasDeviceToken=function(e,t){return this.indexOfDeviceToken(e,t)>=0},t.prototype.createRefreshWebsocketCommand=function(e,t){return new gi({authToken:e,expiringSession:!0,requestId:t})},t.prototype._refreshSessionKeyByWebSocket=function(e){return a(this,void 0,void 0,(function(){var t,n,r,i,o;return u(this,(function(s){switch(s.label){case 0:return t=this.createRefreshWebsocketCommand(e),[4,this._requestQueue.forceSend(t)];case 1:if(n=s.sent(),r=n.as(vi),i=r.newKey,o=r.error)throw o;return this.session.sessionKey=null!=i?i:this.session.sessionKey,[2]}}))}))},t.prototype._refreshSessionKeyByApi=function(e){return a(this,void 0,void 0,(function(){var t,n=this;return u(this,(function(r){switch(r.label){case 0:return t=new mi({userId:this._sdkState.userId,authToken:e,services:this.session.services,expiringSession:!0}),[4,Yi((function(e){return a(n,void 0,void 0,(function(){var n,r,i,o,s;return u(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,this._requestQueue.forceSend(t)];case 1:return n=a.sent(),r=n.as(bi),i=r.key,o=r.services,this.session.sessionKey=i,this.session.services=o,[3,3];case 2:if(s=a.sent(),!this._isSessionRelatedError(s))throw s;return e(s),[3,3];case 3:return[2]}}))}))}),3)];case 1:return r.sent(),[2]}}))}))},t.prototype._refreshSessionKey=function(e,t){return void 0===t&&(t=!0),a(this,void 0,void 0,(function(){var n,r,i;return u(this,(function(o){switch(o.label){case 0:if(this._currentConnectionStateType!==si.CONNECTED)return[3,10];o.label=1;case 1:return o.trys.push([1,3,,10]),[4,this._refreshSessionKeyByWebSocket(e)];case 2:return o.sent(),this.complete(),[2];case 3:return(n=o.sent())instanceof w&&n.isSessionTokenExpiredError&&t?[4,this._receiveNewAuthToken()]:[3,9];case 4:return(i=o.sent())?(this.session.authToken=i,[4,this._refreshSessionKey(this.session.authToken,!1)]):[3,6];case 5:return o.sent(),this.complete(),[3,8];case 6:return[4,this.clear()];case 7:o.sent(),o.label=8;case 8:return[2];case 9:return[3,10];case 10:return o.trys.push([10,12,,22]),[4,this._refreshSessionKeyByApi(e)];case 11:return o.sent(),this.complete(),[3,22];case 12:return(r=o.sent())instanceof w&&r.isSessionTokenExpiredError?t?[4,this._receiveNewAuthToken()]:[3,18]:[3,20];case 13:return(i=o.sent())?(this.session.authToken=i,[4,this._refreshSessionKeyByApi(this.session.authToken)]):[3,15];case 14:return o.sent(),this.complete(),[3,17];case 15:return[4,this.clear()];case 16:o.sent(),o.label=17;case 17:return[3,19];case 18:throw r;case 19:return[3,21];case 20:throw r;case 21:return[3,22];case 22:return[2]}}))}))},t.prototype._receiveNewAuthToken=function(){var e=this,t=new He;return Hi((function(){return a(e,void 0,void 0,(function(){var e,n,r,i,o,s=this;return u(this,(function(a){return this._isRefreshingAuthToken=!0,this.session.clear(),(null===(o=this.handler)||void 0===o?void 0:o.onSessionTokenRequired)?(e=null,n=function(){e&&(clearTimeout(e),e=null)},r=function(e){n(),s._isRefreshingAuthToken&&(s._isRefreshingAuthToken=!1,s.dispatch("refresh-authtoken"),t.resolve(e))},i=function(e){n(),s._isRefreshingAuthToken&&(s._isRefreshingAuthToken=!1,t.reject(e))},e=setTimeout((function(){return i()}),1e3*this._sdkState.sessionTokenRefreshTimeout),this.handler.onSessionTokenRequired(r,i)):t.resolve(null),[2]}))}))})),t.promise},t.prototype._isSessionRelatedError=function(e){return e instanceof w&&(e.isSessionExpiredError||e.isSessionInvalidatedError)},Object.defineProperty(t.prototype,"isSessionKeyRefreshing",{get:function(){return this.session.isRefreshing},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRefreshingAuthToken",{get:function(){return this._isRefreshingAuthToken},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isSessionExpiring",{get:function(){return!!this.handler},enumerable:!1,configurable:!0}),t.prototype.authenticateFeed=function(e,t){var n;return a(this,void 0,void 0,(function(){var r,i,o;return u(this,(function(s){switch(s.label){case 0:return this.session.authToken=t,r=new io({appId:this._sdkState.appId,userId:e,services:[L.FEED],includeUIKitConfig:!!(null!==(n=this._sdkState.extensions)&&void 0!==n?n:{}).sb_uikit,localCacheEnabled:this._cacheContext.localCacheEnabled,expiringSession:!t||this.isSessionExpiring}),[4,this._requestQueue.commandRouter.send(r)];case 1:return i=s.sent(),(o=i.as(oo).logi).error?[3,3]:[4,this.login(o)];case 2:return s.sent(),o.userProfile.apply(),[3,4];case 3:throw o.error;case 4:return[2]}}))}))},t.prototype.login=function(e){var t;return a(this,void 0,void 0,(function(){var n,r,i,o,s,a,c,l;return u(this,(function(u){switch(u.label){case 0:return n=e.key,r=e.ekey,i=e.services,o=e.userProfile,s=e.deviceTokenLastDeletedAt,a=void 0===s?0:s,this.session.hasLessServiceScopeThan(i)&&(this.session.sessionKey=n,this.session.services=i),ho.set(this,r),this._deviceTokenCacheEnabled=null===(t=null==o?void 0:o.appInfo)||void 0===t?void 0:t.deviceTokenCache,c=this._cacheContext.preference,this._deviceTokenCacheEnabled?[4,c.get(co)]:[3,5];case 1:return!(l=u.sent())||l.lastDeletedAt<a?(this._deviceTokens=[],this._deviceTokenLastDeletedAt=a,[4,this.saveDeviceToken()]):[3,3];case 2:return u.sent(),[3,4];case 3:this._deviceTokens=l.tokens.map((function(e){return new lo(lo.payloadify(e))})),this._deviceTokenLastDeletedAt=l.lastDeletedAt,u.label=4;case 4:return[3,7];case 5:return[4,c.remove(co)];case 6:u.sent(),u.label=7;case 7:return[2]}}))}))},t.prototype.complete=function(){var e=this;this.dispatch("refresh"),this._dispatcher.dispatch(new di),Hi((function(){return a(e,void 0,void 0,(function(){var e;return u(this,(function(t){return this._logger.debug("session refreshed"),(null===(e=this.handler)||void 0===e?void 0:e.onSessionRefreshed)&&this.handler.onSessionRefreshed(),[2]}))}))}))},t.prototype.error=function(e){var t=this;Hi((function(){return a(t,void 0,void 0,(function(){var t;return u(this,(function(n){return(null===(t=this.handler)||void 0===t?void 0:t.onSessionError)&&this.handler.onSessionError(e),[2]}))}))}))},t.prototype.close=function(){var e=this;this.dispatch("close"),this._dispatcher.dispatch(new pi),Hi((function(){return a(e,void 0,void 0,(function(){var e;return u(this,(function(t){return this._logger.debug("session closed"),(null===(e=this.handler)||void 0===e?void 0:e.onSessionClosed)&&this.handler.onSessionClosed(),[2]}))}))}))},t.prototype.refresh=function(){return a(this,void 0,void 0,(function(){var e,t;return u(this,(function(n){switch(n.label){case 0:if(!this.isSessionExpiring)return[3,10];if(this.session.isRefreshing)return[3,10];if(this.session.isRefreshing=!0,this.session.authToken)return[3,7];n.label=1;case 1:return n.trys.push([1,6,,7]),[4,this._receiveNewAuthToken()];case 2:return(e=n.sent())?(this._logger.debug("session refreshing.."),this.session.authToken=e,[3,5]):[3,3];case 3:return[4,this.clear()];case 4:return n.sent(),this.session.isRefreshing=!1,[2];case 5:return[3,7];case 6:throw n.sent(),t=w.sessionTokenRequestFailed,this._dispatcher.dispatch(new fi),this.error(t),this.session.isRefreshing=!1,t;case 7:return n.trys.push([7,9,,10]),[4,this._refreshSessionKey(this.session.authToken)];case 8:return n.sent(),this.session.isRefreshing=!1,[3,10];case 9:throw n.sent(),t=w.sessionTokenRefreshFailed,this._dispatcher.dispatch(new fi),this.error(t),this.session.isRefreshing=!1,t;case 10:return[2]}}))}))},t.prototype.setDeviceToken=function(e,t){return!!(this._deviceTokenCacheEnabled&&this.indexOfDeviceToken(e,t)<0)&&(this._deviceTokens.push(new lo({type:e,token:t})),!0)},t.prototype.unsetDeviceToken=function(e,t){if(this._deviceTokenCacheEnabled){var n=this.indexOfDeviceToken(e,t);n>=0&&this._deviceTokens.splice(n,1)}},t.prototype.unsetDeviceTokens=function(e){this._deviceTokenCacheEnabled&&(this._deviceTokens=e?this._deviceTokens.filter((function(t){return t.type!==e})):[])},t.prototype.setDeviceTokenDeletedAt=function(e){e>0&&(this._deviceTokenLastDeletedAt=e)},t.prototype.saveDeviceToken=function(){return a(this,void 0,void 0,(function(){return u(this,(function(e){switch(e.label){case 0:return this._deviceTokenCacheEnabled?[4,this._cacheContext.preference.set(co,{tokens:this._deviceTokens,lastDeletedAt:this._deviceTokenLastDeletedAt})]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},t.prototype.clear=function(){return a(this,void 0,void 0,(function(){return u(this,(function(e){switch(e.label){case 0:return this.currentUser=null,this.session.clear(),this.close(),ho.delete(this),this._deviceTokens=[],this._deviceTokenLastDeletedAt=0,[4,this.saveDeviceToken()];case 1:return e.sent(),[2]}}))}))},t}(ee),po=function(){function e(e,t){var n=t.sdkState,r=t.cacheContext,i=t.connectionHandlers,o=t.sessionManager,s=t.websocketClient,a=t.dispatcher,u=t.logger,c=t.disableWebSocketCloseEventHandling,l=void 0!==c&&c;this._disableWebSocketCloseEventHandling=!1,this._externalCalledWebSocketClose=!1,this._logger=u,this._disableWebSocketCloseEventHandling=l,this._context=new ro(e,{sdkState:n,cacheContext:r,connectionHandlers:i,sessionManager:o,websocketClient:s,dispatcher:a,logger:u}),this._sdkState=n,this._sessionManager=o,this._websocketClient=s}return e.prototype._registerEventDispatcher=function(){var e=this;this._disableWebSocketCloseEventHandling||(this._clearEventDispatcher(),this._sessionEventDispatcherContext=this._sessionManager.on("refresh-authtoken",(function(){e.isConnected||(e._logger.debug("try reconnect by session token refresh"),e.reconnect())})).on("refresh",(function(){e.isConnecting||e.isConnected||(e._logger.debug("try reconnect by session key refresh"),e.reconnect())})),this._websocketEventDispatcherContext=this._websocketClient.on("close",(function(){"foreground"!==e._sdkState.appState||e._externalCalledWebSocketClose||e._sessionManager.isRefreshingAuthToken||(e._logger.debug("try reconnect by websocket connection closed"),e.reconnect())})))},e.prototype._clearEventDispatcher=function(){this._sessionEventDispatcherContext&&(this._sessionEventDispatcherContext.close(),this._sessionEventDispatcherContext=void 0),this._websocketEventDispatcherContext&&(this._websocketEventDispatcherContext.close(),this._websocketEventDispatcherContext=void 0)},Object.defineProperty(e.prototype,"isConnected",{get:function(){return this._context.currentState.type===si.CONNECTED},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isConnecting",{get:function(){var e=this._context.currentState;return e.type===si.CONNECTING||e.type===si.RECONNECTING},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"websocketClient",{get:function(){return this._websocketClient},enumerable:!1,configurable:!0}),e.prototype.connect=function(e){return a(this,void 0,void 0,(function(){var t;return u(this,(function(n){switch(n.label){case 0:return t=this._context.currentState,this._externalCalledWebSocketClose=!1,[4,t.onConnect(this._context,e)];case 1:return n.sent(),this._registerEventDispatcher(),[2]}}))}))},e.prototype.reconnect=function(){return a(this,void 0,void 0,(function(){var e;return u(this,(function(t){switch(t.label){case 0:return e=this._context.currentState,this._externalCalledWebSocketClose=!1,[4,e.onReconnect(this._context,{})];case 1:return t.sent(),[2]}}))}))},e.prototype.resetAndReconnect=function(){return a(this,void 0,void 0,(function(){var e;return u(this,(function(t){switch(t.label){case 0:return e=this._context.currentState,this._externalCalledWebSocketClose=!1,[4,e.onReconnect(this._context,{resetReconnectCount:!0})];case 1:return t.sent(),[2]}}))}))},e.prototype.background=function(){return a(this,void 0,void 0,(function(){var e;return u(this,(function(t){switch(t.label){case 0:return e=this._context.currentState,this._externalCalledWebSocketClose=!0,[4,e.onDisconnect(this._context,{autoReconnect:!1})];case 1:return t.sent(),[2]}}))}))},e.prototype.disconnect=function(e){return a(this,void 0,void 0,(function(){return u(this,(function(t){switch(t.label){case 0:return[4,this._context.currentState.onDisconnect(this._context,{error:e,autoReconnect:!0})];case 1:return t.sent(),[2]}}))}))},e.prototype.disconnectWebSocket=function(){return a(this,void 0,void 0,(function(){var e;return u(this,(function(t){switch(t.label){case 0:return e=this._context.currentState,this._externalCalledWebSocketClose=!0,[4,e.onDisconnectWebSocket(this._context)];case 1:return t.sent(),[2]}}))}))},e.prototype.logout=function(){return a(this,void 0,void 0,(function(){var e;return u(this,(function(t){switch(t.label){case 0:return e=this._context.currentState,this._clearEventDispatcher(),[4,e.onLogout(this._context)];case 1:return t.sent(),[2]}}))}))},e}(),mo=function(e){function t(t){var n,r,i,o,s=t.type,a=t.data,u=t.ts,c=void 0===u?Date.now():u,l=e.call(this,{type:s,data:a,ts:c})||this;return l.date=new Date(c),l.key="".concat((n=l.date,r=n.getFullYear(),i=String(n.getMonth()+1).padStart(2,"0"),o=String(n.getDate()).padStart(2,"0"),"".concat(r).concat(i).concat(o)),"_").concat(s),l}return i(t,e),t}(De),go=function(e){function t(t){var n=t.deviceId,r=t.statLogs,i=e.call(this)||this;return i.method=oe.POST,i.path="".concat(_e),i.params={device_id:n,log_entries:r.map((function(e){return De.payloadify(e)}))},i}return i(t,e),t}(Ce),bo=function(e,t){var n,r;if(null!==e&&null!==t){var i=Object.keys(e),o=Object.keys(t),s=h([],l(new Set(h(h([],l(i),!1),l(o),!1))),!1),a={};try{for(var u=c(s),d=u.next();!d.done;d=u.next()){var f=d.value,p=typeof e[f],m=typeof t[f];"undefined"===p?a[f]=t[f]:"undefined"===m?a[f]=e[f]:p!==m?a[f]=t[f]:"object"===p&&e[f]&&t[f]?a[f]=bo(e[f],t[f]):a[f]=t[f]}}catch(e){n={error:e}}finally{try{d&&!d.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}return a}return t};!function(e){e[e.PENDING=0]="PENDING",e[e.COLLECT_ONLY=1]="COLLECT_ONLY",e[e.ENABLED=2]="ENABLED",e[e.DISABLED=3]="DISABLED"}(so||(so={}));var vo,yo=function(e){function t(t){var n=t.cacheContext,r=t.requestQueue,i=t.dispatcher,o=t.baseLimit,s=void 0===o?100:o,a=t.maxLimit,u=void 0===a?1e3:a,c=t.minLimit,l=void 0===c?10:c,h=e.call(this)||this;return h.queue=[],h.enabledState=so.PENDING,h.isFlushing=!1,h.generation=1,h.lastFlushedAt=0,h._collectRequestStat=!0,h._collectFeatureLocalCacheStat=!0,h.deviceId=$(),h.cacheContext=n,h.requestQueue=r,h.dispatcher=i,h.baseLimit=s,h.limit=s,h.maxLimit=u,h.minLimit=l,h}return i(t,e),Object.defineProperty(t.prototype,"isEnabled",{get:function(){return this.enabledState===so.ENABLED},enumerable:!1,configurable:!0}),t.prototype._arrangeStat=function(){var e=[];this._collectRequestStat&&e.push.apply(e,h([],l(this.queue.filter((function(e){return e.type===Ae.API_RESULT||e.type===Ae.WEBSOCKET_CONNECT}))),!1)),this._collectFeatureLocalCacheStat&&e.push.apply(e,h([],l(this.queue.filter((function(e){return e.type===Ae.FEATURE_LOCALCACHE}))),!1)),this.queue=e},t.prototype._save=function(){return a(this,void 0,void 0,(function(){return u(this,(function(e){switch(e.label){case 0:return this.enabledState!==so.ENABLED?[3,2]:[4,this.cacheContext.preference.set(this.key,{deviceId:this.deviceId,statLogs:this.queue.map((function(e){return De.payloadify(e)})),generation:this.generation++,lastFlushedAt:this.lastFlushedAt})];case 1:e.sent(),this.dispatch("save",h([],l(this.queue),!1)),e.label=2;case 2:return[2]}}))}))},t.prototype._flush=function(){return a(this,void 0,void 0,(function(){var e,t,n,r,i;return u(this,(function(o){switch(o.label){case 0:if(!this.isEnabled)return[3,10];if(this.isFlushing)return[3,10];this.isFlushing=!0,o.label=1;case 1:return o.trys.push([1,5,9,10]),this._arrangeStat(),e=this.queue.filter((function(e){if(e instanceof mo){var t=new Date,n=l([e.date.getFullYear(),t.getFullYear()],2),r=n[0],i=n[1];if(r<i)return!0;if(r===i){var o=l([e.date.getMonth(),t.getMonth()],2),s=o[0],a=o[1];if(s<a)return!0;if(s===a){var u=l([e.date.getDate(),t.getDate()],2);return u[0]<u[1]}}}return!1})),t=this.queue.filter((function(e){return!(e instanceof mo)})),(n=h(h([],l(e),!1),l(t),!1).slice(0,Math.min(this.limit,this.maxLimit))).length>0?(r=new go({deviceId:this.deviceId,statLogs:n}),[4,this.requestQueue.send(r)]):[3,4];case 2:return o.sent(),this.dispatch("flush",n),this.queue=h(h([],l(e),!1),l(t),!1).slice(n.length),[4,this._save()];case 3:o.sent(),o.label=4;case 4:return this.limit=this.baseLimit,this.lastFlushedAt=Date.now(),[3,10];case 5:return(i=o.sent())instanceof w?i.code!==d.STAT_LOG_NOT_ALLOWED?[3,7]:[4,this.clear()]:[3,8];case 6:return o.sent(),this.enabledState=so.DISABLED,[3,8];case 7:i.code===d.STAT_UPLOAD_NOT_ALLOWED&&(this.enabledState=so.COLLECT_ONLY),o.label=8;case 8:return this.limit=this.limit+20,[3,10];case 9:return this.isFlushing=!1,[7];case 10:return[2]}}))}))},t.prototype.init=function(e){return a(this,void 0,void 0,(function(){var t,n,r=this;return u(this,(function(i){switch(i.label){case 0:return this.key=e,[4,this.cacheContext.preference.get(this.key)];case 1:return(t=i.sent())?(this.deviceId=t.deviceId,this.queue=t.statLogs.map((function(e){return new De({type:e.stat_type,ts:e.ts,data:e.data})})),this.generation=t.generation,this.lastFlushedAt=t.lastFlushedAt,Date.now()-this.lastFlushedAt>=108e5&&this.queue.length>=this.minLimit?(n=Math.min(Math.floor(18e4*Math.random()),100),[4,Wi(n)]):[3,4]):[3,4];case 2:return i.sent(),[4,this._flush()];case 3:i.sent(),i.label=4;case 4:return this.commandEventContext||(this.commandEventContext=this.dispatcher.on((function(e){if(e instanceof je){var t=e.statLog;r.put(t)}else if(e instanceof to){var n=e.request,i=e.features,o=e.options;r._collectRequestStat=n,r._collectFeatureLocalCacheStat=null==i?void 0:i.localCache,r._arrangeStat(),r._collectRequestStat||r._collectFeatureLocalCacheStat?r.enabledState=o.ingestion?so.ENABLED:so.COLLECT_ONLY:r.enabledState=so.DISABLED,r.isEnabled?r.queue.length>=r.limit&&r._flush():r.clear()}}))),[2]}}))}))},t.prototype.put=function(e){return a(this,void 0,void 0,(function(){var t,n;return u(this,(function(r){switch(r.label){case 0:return this.enabledState===so.DISABLED?[3,3]:(e instanceof mo?this._collectFeatureLocalCacheStat&&(t=l(this.queue.filter((function(t){return t instanceof mo&&t.key===e.key})),1),(n=t[0])?n.data=bo(n.data,e.data):this.queue.push(e)):this._collectRequestStat&&this.queue.push(e),[4,this._save()]);case 1:return r.sent(),this.queue.length>=this.limit?[4,this._flush()]:[3,3];case 2:r.sent(),r.label=3;case 3:return[2]}}))}))},t.prototype.clear=function(){return a(this,void 0,void 0,(function(){return u(this,(function(e){switch(e.label){case 0:return this.queue=[],this.generation=1,[4,this._save()];case 1:return e.sent(),[2]}}))}))},t.prototype.close=function(){this.commandEventContext&&(this.commandEventContext.close(),this.commandEventContext=void 0)},t}(ee);!function(e){e[e.NONE=0]="NONE",e[e.VERBOSE=1]="VERBOSE",e[e.DEBUG=2]="DEBUG",e[e.INFO=3]="INFO",e[e.WARN=4]="WARN",e[e.ERROR=5]="ERROR"}(vo||(vo={}));var _o,wo=function(){function e(){this.level=vo.WARN}return e.prototype.verbose=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.level<=vo.VERBOSE&&console.log.apply(console,h(["[verbose]"],l(e),!1))},e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.level<=vo.DEBUG&&console.log.apply(console,h(["[debug]"],l(e),!1))},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.level<=vo.INFO&&console.log.apply(console,h(["[info]"],l(e),!1))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.level<=vo.WARN&&console.warn.apply(console,h(["[warn]"],l(e),!1))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.level<=vo.ERROR&&console.error.apply(console,h(["[error]"],l(e),!1))},e}(),Eo={},So=function(){function e(e,t){var n,r,i,o,s,a,u,c,l,h;if(this.connectedAt=0,this.firstConnectedAt=0,this.connectionHandlers=new Map,this.userEventHandlers=new Map,!Eo[e]){Eo[e]=this;var d=null!==(n=t.options)&&void 0!==n?n:new N,f=this.sdkState={appId:t.appId,appVersion:null!==(r=t.appVersion)&&void 0!==r?r:"",appState:"foreground",userId:void 0,extensions:{},api:{host:null!==(i=t.apiHost)&&void 0!==i?i:"https://api-".concat(t.appId,".sendbird.com")},websocket:{host:null!==(o=t.websocketHost)&&void 0!==o?o:"wss://ws-".concat(t.appId,".sendbird.com"),pingerDisabled:!!t.noPingpong,pingInterval:void 0,pongTimeout:void 0,connectMaxRetry:2,compression:!0,reconnectMaxRetry:-1,reconnectRetryStrategy:new Ki,responseTimeout:d.websocketResponseTimeout},sessionTokenRefreshTimeout:d.sessionTokenRefreshTimeout};this.appInfo=void 0,this.subscribedUnreadMessageCount={all:0,feed:0,customTypes:{},ts:0};var m=this.logger=new wo;this.logger.level=null!==(s=t.logLevel)&&void 0!==s?s:vo.WARN,this.connectedAt=0,this.firstConnectedAt=0,this.connectionHandlers=new Map,this.userEventHandlers=new Map;var g=this.cacheContext=new U({encryption:t.encryption,store:t.store,localCacheEnabled:null!==(a=t.localCacheEnabled)&&void 0!==a&&a,localCacheConfig:null!==(u=t.localCacheConfig)&&void 0!==u?u:new B});this.debugMode=null!==(c=t.debugMode)&&void 0!==c&&c,this.maxSuperGroupChannelUnreadCount=p.DEFAULT_MAX_UNREAD_COUNT_OF_SUPER_GROUP_CHANNEL,this.useMemberInfoInMessage=d.useMemberInfoInMessage,this.typingIndicatorInvalidateTime=d.typingIndicatorInvalidateTime,this.typingIndicatorThrottle=d.typingIndicatorThrottle,this.concurrentCallLimit=void 0,this.backOffDelay=void 0;var b=this.dispatcher=new te,v=new Z;this.requestQueue=new uo(e,{session:v,sdkState:f,dispatcher:b,logger:m,useFetchCompat:t.useFetchCompat}),this.sessionManager=new fo({session:v,cacheContext:g,sdkState:f,dispatcher:b,requestQueue:this.requestQueue,logger:m}),this.connectionManager=new po(e,{sdkState:f,cacheContext:this.cacheContext,connectionHandlers:this.connectionHandlers,dispatcher:b,sessionManager:this.sessionManager,websocketClient:this.requestQueue.commandRouter.websocketClient,disableWebSocketCloseEventHandling:null!==(l=t.disableWebSocketCloseEventHandling)&&void 0!==l&&l,logger:m}),this.statLogCollector=new yo({cacheContext:this.cacheContext,requestQueue:this.requestQueue,dispatcher:b}),this.appStateToggleEnabled=null===(h=t.appStateToggleEnabled)||void 0===h||h}return Eo[e]}return e.of=function(e){if(Eo[e])return Eo[e];throw w.lostInstance},e.clear=function(e){Eo[e]&&delete Eo[e]},e.prototype.hasExtension=function(e){return this.sdkState.extensions&&this.sdkState.extensions[e]},e}(),Mo=function(){function e(){}return e.prototype.init=function(e,t){var n=t.sdkState,r=t.dispatcher,i=t.sessionManager,o=t.requestQueue,s=t.logger;t.onlineDetector;var a=t.cacheContext;this._iid=e,this._cacheContext=a,this._sdkState=n,this._dispatcher=r,this._sessionManager=i,this._requestQueue=o,this._logger=s},e}();!function(e){e.OPEN="open",e.CLOSED="closed"}(_o||(_o={}));var Oo,Ao="removed",Co=function(e){switch(e){case"open":return _o.OPEN;case"closed":return _o.CLOSED;default:return null}},To=function(e){return!e||!!e.text&&O("string",e.text)},ko=function(e){function t(t,n){var r,i,o,s,a,u,c,l=this;return(l=e.call(this,t)||this).pollId=0,l.id=0,l.text=null,l.voteCount=0,l.createdBy=null,l.createdAt=0,l.updatedAt=0,l._lastVotedAt=0,l.pollId=null!==(r=n.poll_id)&&void 0!==r?r:0,l.id=null!==(i=n.id)&&void 0!==i?i:0,l.text=null!==(o=n.text)&&void 0!==o?o:null,l.voteCount=null!==(s=n.vote_count)&&void 0!==s?s:0,l.createdBy=null!==(a=n.created_by)&&void 0!==a?a:null,l.createdAt=null!==(u=n.created_at)&&void 0!==u?u:0,l.updatedAt=null!==(c=n.updated_at)&&void 0!==c?c:0,l}return i(t,e),t.payloadify=function(t){return re(ie(o(o({},e.payloadify.call(this,t)),{vote_count:t.voteCount,poll_id:t.pollId,text:t.text,created_at:t.createdAt,id:t.id,created_by:t.createdBy,updated_at:t.updatedAt})))},t}(Mi),xo=function(e){function t(t,n){var r,i,o,s,a,u,c,l,h,d,f,p,m,g=this;return(g=e.call(this,t)||this).id=0,g.title=null,g.createdAt=0,g.updatedAt=0,g.closeAt=-1,g.status=_o.CLOSED,g.messageId=0,g.data=null,g.voterCount=-1,g.options=[],g.createdBy=null,g.allowUserSuggestion=!1,g.allowMultipleVotes=!1,g.votedPollOptionIds=[],g.id=null!==(r=n.id)&&void 0!==r?r:0,g.title=null!==(i=n.title)&&void 0!==i?i:null,g.createdAt=null!==(o=n.created_at)&&void 0!==o?o:0,g.updatedAt=null!==(s=n.updated_at)&&void 0!==s?s:0,g.closeAt=null!==(a=n.close_at)&&void 0!==a?a:-1,g.status=null!==(u=Co(n.status))&&void 0!==u?u:_o.CLOSED,g.messageId=null!==(c=n.message_id)&&void 0!==c?c:0,g.data=null!==(l=n.data)&&void 0!==l?l:null,g.voterCount=null!==(h=n.voter_count)&&void 0!==h?h:-1,g.options=n.options?n.options.map((function(e){return new ko(g._iid,e)})):[],g.createdBy=null!==(d=n.created_by)&&void 0!==d?d:null,g.allowUserSuggestion=null!==(f=n.allow_user_suggestion)&&void 0!==f&&f,g.allowMultipleVotes=null!==(p=n.allow_multiple_votes)&&void 0!==p&&p,g.votedPollOptionIds=null!==(m=n.voted_option_ids)&&void 0!==m?m:[],g}return i(t,e),t.prototype._applyPollUpdatePayload=function(e){var t,n,r,i,o,s,a,u,c=this;this.title=null!==(t=e.title)&&void 0!==t?t:this.title,this.updatedAt=null!==(n=e.updated_at)&&void 0!==n?n:this.updatedAt,this.closeAt=null!==(r=e.close_at)&&void 0!==r?r:this.closeAt,this.status=null!==(i=Co(e.status))&&void 0!==i?i:this.status,this.data=null!==(o=e.data)&&void 0!==o?o:this.data,this.voterCount=null!==(s=e.voter_count)&&void 0!==s?s:this.voterCount,e.options&&(this.options=e.options.map((function(e){return new ko(c._iid,e)})),this.votedPollOptionIds=e.options.filter((function(e){return e.vote_count>0})).map((function(e){return e.id}))),this.allowUserSuggestion=null!==(a=e.allow_user_suggestion)&&void 0!==a?a:this.allowUserSuggestion,this.allowMultipleVotes=null!==(u=e.allow_multiple_votes)&&void 0!==u?u:this.allowMultipleVotes},t.payloadify=function(t){return re(ie(o(o({},e.payloadify.call(this,t)),{id:t.id,title:t.title,created_at:t.createdAt,updated_at:t.updatedAt,close_at:t.closeAt,status:t.status,message_id:t.messageId,data:t.data,voter_count:t.voterCount,options:t.options.map((function(e){return ko.payloadify(e)})),created_by:t.createdBy,allow_user_suggestion:t.allowUserSuggestion,allow_multiple_votes:t.allowMultipleVotes,voted_option_ids:t.votedPollOptionIds})))},t.prototype.applyPollUpdateEvent=function(e){var t=e._payload.poll;return!(!t||this.id!==t.id||t.updated_at<this.updatedAt||(this._applyPollUpdatePayload(t),0))},t.prototype.applyPollVoteEvent=function(e){if(this.id!==e.pollId)return!1;var t=this.options,n=t.map((function(e){return e.id})),r=e._payload,i=Math.floor(r.ts/1e3);return r.updated_vote_counts.forEach((function(e){var r=n.indexOf(e.option_id);if(r>-1){var o=t[r];i>=o._lastVotedAt&&(o.voteCount=e.vote_count,o._lastVotedAt=i)}})),r.req_id&&r.voted_option_ids&&(this.votedPollOptionIds=r.voted_option_ids),"number"==typeof r.voter_count&&(this.voterCount=r.voter_count),!0},t.prototype.serialize=function(){return Ii(this)},t}(Mi);!function(e){e.UNKNOWN="UNKNOWN",e.EVENT_CHANNEL_CREATED="EVENT_CHANNEL_CREATED",e.EVENT_CHANNEL_UPDATED="EVENT_CHANNEL_UPDATED",e.EVENT_CHANNEL_DELETED="EVENT_CHANNEL_DELETED",e.EVENT_CHANNEL_READ="EVENT_CHANNEL_READ",e.EVENT_CHANNEL_DELIVERED="EVENT_CHANNEL_DELIVERED",e.EVENT_CHANNEL_INVITED="EVENT_CHANNEL_INVITED",e.EVENT_CHANNEL_JOINED="EVENT_CHANNEL_JOINED",e.EVENT_CHANNEL_LEFT="EVENT_CHANNEL_LEFT",e.EVENT_CHANNEL_ACCEPTED_INVITE="EVENT_CHANNEL_ACCEPTED_INVITE",e.EVENT_CHANNEL_DECLINED_INVITE="EVENT_CHANNEL_DECLINED_INVITE",e.EVENT_CHANNEL_OPERATOR_UPDATED="EVENT_CHANNEL_OPERATOR_UPDATED",e.EVENT_CHANNEL_BANNED="EVENT_CHANNEL_BANNED",e.EVENT_CHANNEL_UNBANNED="EVENT_CHANNEL_UNBANNED",e.EVENT_CHANNEL_MUTED="EVENT_CHANNEL_MUTED",e.EVENT_CHANNEL_UNMUTED="EVENT_CHANNEL_UNMUTED",e.EVENT_CHANNEL_FROZEN="EVENT_CHANNEL_FROZEN",e.EVENT_CHANNEL_UNFROZEN="EVENT_CHANNEL_UNFROZEN",e.EVENT_CHANNEL_HIDDEN="EVENT_CHANNEL_HIDDEN",e.EVENT_CHANNEL_UNHIDDEN="EVENT_CHANNEL_UNHIDDEN",e.EVENT_CHANNEL_RESET_HISTORY="EVENT_CHANNEL_RESET_HISTORY",e.EVENT_CHANNEL_TYPING_STATUS_UPDATE="EVENT_CHANNEL_TYPING_STATUS_UPDATE",e.EVENT_CHANNEL_MEMBER_COUNT_UPDATED="EVENT_CHANNEL_MEMBER_COUNT_UPDATED",e.EVENT_CHANNEL_METADATA_CREATED="EVENT_CHANNEL_METADATA_CREATED",e.EVENT_CHANNEL_METADATA_UPDATED="EVENT_CHANNEL_METADATA_UPDATED",e.EVENT_CHANNEL_METADATA_DELETED="EVENT_CHANNEL_METADATA_DELETED",e.EVENT_CHANNEL_METACOUNTER_CREATED="EVENT_CHANNEL_METACOUNTER_CREATED",e.EVENT_CHANNEL_METACOUNTER_UPDATED="EVENT_CHANNEL_METACOUNTER_UPDATED",e.EVENT_CHANNEL_METACOUNTER_DELETED="EVENT_CHANNEL_METACOUNTER_DELETED",e.EVENT_MESSAGE_SENT="EVENT_MESSAGE_SENT",e.EVENT_MESSAGE_RECEIVED="EVENT_MESSAGE_RECEIVED",e.EVENT_MESSAGE_UPDATED="EVENT_MESSAGE_UPDATED",e.EVENT_PINNED_MESSAGE_UPDATED="EVENT_PINNED_MESSAGE_UPDATED",e.REQUEST_CHANNEL="REQUEST_CHANNEL",e.REQUEST_CHANNEL_CHANGELOGS="REQUEST_CHANNEL_CHANGELOGS",e.REFRESH_CHANNEL="REFRESH_CHANNEL",e.CHANNEL_LASTACCESSEDAT_UPDATED="CHANNEL_LASTACCESSEDAT_UPDATED",e.SYNC_CHANNEL_BACKGROUND="SYNC_CHANNEL_BACKGROUND",e.SYNC_CHANNEL_CHANGELOGS="SYNC_CHANNEL_CHANGELOGS",e.EVENT_MESSAGE_SENT_SUCCESS="EVENT_MESSAGE_SENT_SUCCESS",e.EVENT_MESSAGE_SENT_FAILED="EVENT_MESSAGE_SENT_FAILED",e.EVENT_MESSAGE_SENT_PENDING="EVENT_MESSAGE_SENT_PENDING",e.EVENT_MESSAGE_DELETED="EVENT_MESSAGE_DELETED",e.EVENT_MESSAGE_READ="EVENT_MESSAGE_READ",e.EVENT_MESSAGE_DELIVERED="EVENT_MESSAGE_DELIVERED",e.EVENT_MESSAGE_REACTION_UPDATED="EVENT_MESSAGE_REACTION_UPDATED",e.EVENT_MESSAGE_THREADINFO_UPDATED="EVENT_MESSAGE_THREADINFO_UPDATED",e.EVENT_MESSAGE_OFFSET_UPDATED="EVENT_MESSAGE_OFFSET_UPDATED",e.REQUEST_MESSAGE="REQUEST_MESSAGE",e.EVENT_POLL_UPDATED="EVENT_POLL_UPDATED",e.EVENT_POLL_VOTED="EVENT_POLL_VOTED",e.SYNC_POLL_CHANGELOGS="SYNC_POLL_CHANGELOGS",e.REQUEST_RESEND_MESSAGE="REQUEST_RESEND_MESSAGE",e.REQUEST_THREADED_MESSAGE="REQUEST_THREADED_MESSAGE",e.REQUEST_MESSAGE_CHANGELOGS="REQUEST_MESSAGE_CHANGELOGS",e.SYNC_MESSAGE_FILL="SYNC_MESSAGE_FILL",e.SYNC_MESSAGE_BACKGROUND="SYNC_MESSAGE_BACKGROUND",e.SYNC_MESSAGE_CHANGELOGS="SYNC_MESSAGE_CHANGELOGS",e.LOCAL_MESSAGE_PENDING_CREATED="LOCAL_MESSAGE_PENDING_CREATED",e.LOCAL_MESSAGE_FAILED="LOCAL_MESSAGE_FAILED",e.LOCAL_MESSAGE_CANCELED="LOCAL_MESSAGE_CANCELED",e.LOCAL_MESSAGE_RESEND_STARTED="LOCAL_MESSAGE_RESEND_STARTED"}(Oo||(Oo={}));o({},Oo);var jo=function(e){return e.startsWith("EVENT_")||e.startsWith("LOCAL_MESSAGE_")||e===Oo.SYNC_MESSAGE_FILL||e===Oo.SYNC_MESSAGE_CHANGELOGS||e===Oo.SYNC_POLL_CHANGELOGS},Io=function(e){function t(t){var n=t.messages,r=t.source,i=t.isWebSocketEventComing,o=void 0!==i&&i,s=e.call(this)||this;return s.messages=n,s.source=r,s.isWebSocketEventComing=o,s}return i(t,e),t}(ne),Ro=function(e){function t(t){var n=t.messageIds,r=t.source,i=t.isWebSocketEventComing,o=void 0!==i&&i,s=e.call(this)||this;return s.messageIds=n,s.source=r,s.isWebSocketEventComing=o,s}return i(t,e),t}(ne),No=function(e){function t(t){var n=t.reqId,r=t.source,i=e.call(this)||this;return i.reqId=n,i.source=r,i}return i(t,e),t}(ne),Po=function(e){function t(t){var n=t.polls,r=t.source,i=e.call(this)||this;return i.polls=n,i.source=r,i}return i(t,e),t}(ne),Do=function(e){function t(t){var n=t.event,r=t.source,i=e.call(this)||this;return i.event=n,i.source=r,i}return i(t,e),t}(ne),Uo=function(e){function t(t){var n=t.event,r=t.source,i=e.call(this)||this;return i.event=n,i.source=r,i}return i(t,e),t}(ne),Lo=function(){function e(e,t){var n;this.limit=20,this._isLoading=!1,this._hasNext=!0,this._token="",this._iid=e,this.limit=null!==(n=t.limit)&&void 0!==n?n:20}return Object.defineProperty(e.prototype,"hasNext",{get:function(){return this._hasNext},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isLoading",{get:function(){return this._isLoading},enumerable:!1,configurable:!0}),e.prototype._validate=function(){return O("number",this.limit)&&this.limit>0},e}(),Fo=function(e){function t(t,n,r,i){var o=e.call(this,t,i)||this;return o.channelUrl=n,o.channelType=r,o}return i(t,e),t.prototype._validate=function(){return e.prototype._validate.call(this)&&O("string",this.channelUrl)&&A(H,this.channelType)},t}(Lo),Bo=function(e){this.pollId=0,this.messageId=0,this.pollId=e.poll_id,this.messageId=e.message_id,this._payload=e},Ho=function(e){function t(t){var n=t.title,r=t.optionTexts,i=t.data,o=t.allowUserSuggestion,s=t.allowMultipleVotes,a=t.closeAt,u=e.call(this)||this;return u.method=oe.POST,u.path=be,u.params={title:n,options:r,data:i,allow_user_suggestion:o,allow_multiple_votes:s,close_at:a},u}return i(t,e),t}(Ce),qo=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.poll=new xo(t,n),r}return i(t,e),t}(Te),Vo=function(e){function t(t){var n=t.channelUrl,r=t.channelType,i=t.pollId,o=e.call(this)||this;return o.method=oe.GET,o.path="".concat(be,"/").concat(encodeURIComponent(i)),o.params={channel_url:n,channel_type:r},o}return i(t,e),t}(Ce),Go=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.poll=new xo(t,n),r}return i(t,e),t}(Te),zo=function(e){function t(t){var n=t.channelUrl,r=t.channelType,i=t.pollId,o=t.pollOptionId,s=e.call(this)||this;return s.method=oe.GET,s.path="".concat(be,"/").concat(encodeURIComponent(i),"/options/").concat(encodeURIComponent(o)),s.params={channel_url:n,channel_type:r},s}return i(t,e),t}(Ce),Wo=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.pollOption=new ko(t,n),r}return i(t,e),t}(Te),Ko=function(e){function t(t){var n=t.channelType,r=t.channelUrl,i=t.timestamp,o=t.token,s=e.call(this)||this;return s.method=oe.GET,s.path="".concat(we(n),"/").concat(encodeURIComponent(r),"/polls/changelogs"),s.params=re({change_ts:i,token:o}),s}return i(t,e),t}(Ce),Yo=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.updatedPolls=n.updated.map((function(e){return function(e,t){return new xo(e,t)}(t,e)})),r.deletedPollIds=n.deleted.map((function(e){return e})),r.hasMore=n.has_more,r.nextToken=n.next,r}return i(t,e),t}(Te),Qo={title:"",optionTexts:[],data:void 0,allowUserSuggestion:void 0,allowMultipleVotes:void 0,closeAt:-1},Jo=function(e){return O("string",e.title)&&(t=e.optionTexts,T("string",t)&&t.every((function(e){return""!==e.trim()})))&&To(e.data)&&O("boolean",e.allowUserSuggestion,!0)&&O("boolean",e.allowMultipleVotes,!0)&&O("number",e.closeAt,!0);var t},Zo={channelUrl:"",channelType:H.BASE,pollId:0,pollOptionId:0},$o=function(e){return O("string",e.channelUrl)&&""!==e.channelUrl&&A(H,e.channelType)&&O("number",e.pollId)&&e.pollId>0&&O("number",e.pollOptionId)&&e.pollOptionId>0},Xo={channelUrl:"",channelType:H.BASE,pollId:0},es=function(e){return O("string",e.channelUrl)&&""!==e.channelUrl&&A(H,e.channelType)&&O("number",e.pollId)},ts={},ns=function(){function e(e,t){var n=t.sdkState,r=t.dispatcher,i=t.sessionManager,o=t.requestQueue,s=t.logger;this._iid=e,this._sdkState=n,this._sessionManager=i,this._requestQueue=o,this._dispatcher=r,this._logger=s,ts[e]=this}return e.of=function(e){return ts[e]},e.prototype.buildPollFromSerializedData=function(e){var t=Ri(e);return new xo(this._iid,xo.payloadify(t))},e.prototype.get=function(e){return a(this,void 0,void 0,(function(){var t;return u(this,(function(n){switch(n.label){case 0:return Ni(es(e)).throw(w.invalidParameters),t=new Vo(o({},e)),[4,this._requestQueue.send(t)];case 1:return[2,n.sent().as(Go).poll]}}))}))},e.prototype.create=function(e){return a(this,void 0,void 0,(function(){var t;return u(this,(function(n){switch(n.label){case 0:return Ni(Jo(e)).throw(w.invalidParameters),t=new Ho(o({},e)),[4,this._requestQueue.send(t)];case 1:return[2,n.sent().as(qo).poll]}}))}))},e.prototype.getOption=function(e){return a(this,void 0,void 0,(function(){var t;return u(this,(function(n){switch(n.label){case 0:return Ni($o(e)).throw(w.invalidParameters),t=new zo(o({},e)),[4,this._requestQueue.send(t)];case 1:return[2,n.sent().as(Wo).pollOption]}}))}))},e.prototype.getPollChangeLogs=function(e,t,n,r){return void 0===r&&(r=Oo.SYNC_POLL_CHANGELOGS),a(this,void 0,void 0,(function(){var i,o,s,a,c,l,h;return u(this,(function(u){switch(u.label){case 0:return i=new Ko(ie({channelType:t,channelUrl:e,timestamp:"number"==typeof n?n:null,token:"string"==typeof n?n:null})),[4,this._requestQueue.send(i)];case 1:return o=u.sent(),s=o.as(Yo),a=s.updatedPolls,c=s.deletedPollIds,l=s.hasMore,h=s.nextToken,a.length>0&&this._dispatcher.dispatch(new Po({polls:a,source:r})),[2,{updatedPolls:a,deletedPollIds:c,hasMore:l,token:h}]}}))}))},e}(),rs=function(e){function t(t){var n=t.channelUrl,r=t.channelType,i=t.token,o=t.limit,s=e.call(this)||this;return s.method=oe.GET,s.path=be,s.params={channel_url:n,channel_type:r,token:i,limit:o},s}return i(t,e),t}(Ce),is=function(e){function t(t,n){var r,i=this;return(i=e.call(this,t,n)||this).polls=(null!==(r=n.polls)&&void 0!==r?r:[]).map((function(e){return new xo(t,e)})),i.token=n.next,i}return i(t,e),t}(Te),os=function(e){function t(t,n){return e.call(this,t,n.channelUrl,n.channelType,n)||this}return i(t,e),t.prototype.next=function(){return a(this,void 0,void 0,(function(){var e,t,n,r,i,s;return u(this,(function(a){switch(a.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,e=So.of(this._iid).requestQueue,t=new rs(o(o({},this),{token:this._token})),[4,e.send(t)]):[3,2]:[3,5];case 1:return n=a.sent(),r=n.as(is),i=r.polls,s=r.token,this._token=s,this._hasNext=!!s,this._isLoading=!1,[2,i];case 2:return[2,[]];case 3:throw w.queryInProgress;case 4:return[3,6];case 5:throw w.invalidParameters;case 6:return[2]}}))}))},t}(Fo),ss=function(e){function t(t){var n=t.channelUrl,r=t.channelType,i=t.pollId,o=t.pollOptionId,s=t.token,a=t.limit,u=e.call(this)||this;return u.method=oe.GET,u.path="".concat(be,"/").concat(encodeURIComponent(i),"/options/").concat(encodeURIComponent(o),"/voters"),u.params={channel_url:n,channel_type:r,token:s,limit:a},u}return i(t,e),t}(Ce),as=function(e){function t(t,n){var r,i=this;return(i=e.call(this,t,n)||this).voters=(null!==(r=n.voters)&&void 0!==r?r:[]).map((function(e){return new Di(t,e)})),i.token=n.next,i}return i(t,e),t}(Te),us=function(e){function t(t,n){var r=e.call(this,t,n.channelUrl,n.channelType,n)||this;return r.pollId=n.pollId,r.pollOptionId=n.pollOptionId,r}return i(t,e),t.prototype._validate=function(){return e.prototype._validate.call(this)&&O("number",this.pollId)&&O("number",this.pollOptionId)},t.prototype.next=function(){return a(this,void 0,void 0,(function(){var e,t,n,r,i,s;return u(this,(function(a){switch(a.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,e=So.of(this._iid).requestQueue,t=new ss(o(o({},this),{pollId:this.pollId,pollOptionId:this.pollOptionId,token:this._token})),[4,e.send(t)]):[3,2]:[3,5];case 1:return n=a.sent(),r=n.as(as),i=r.voters,s=r.token,this._token=s,this._hasNext=!!s,this._isLoading=!1,[2,i];case 2:return[2,[]];case 3:throw w.queryInProgress;case 4:return[3,6];case 5:throw w.invalidParameters;case 6:return[2]}}))}))},t}(Fo)}).call(this,n(19))},function(e,t,n){"use strict";n.d(t,"a",(function(){return w})),n.d(t,"b",(function(){return wr})),n.d(t,"c",(function(){return yn})),n.d(t,"d",(function(){return hn})),n.d(t,"e",(function(){return Kt})),n.d(t,"f",(function(){return j})),n.d(t,"g",(function(){return En})),n.d(t,"h",(function(){return c})),n.d(t,"i",(function(){return l})),n.d(t,"j",(function(){return _r})),n.d(t,"k",(function(){return C})),n.d(t,"l",(function(){return I})),n.d(t,"m",(function(){return tt})),n.d(t,"n",(function(){return Er})),n.d(t,"o",(function(){return Yt})),n.d(t,"p",(function(){return ee})),n.d(t,"q",(function(){return Ge})),n.d(t,"r",(function(){return dn})),n.d(t,"s",(function(){return ft})),n.d(t,"t",(function(){return fn})),n.d(t,"u",(function(){return ht})),n.d(t,"v",(function(){return ct})),n.d(t,"w",(function(){return ot})),n.d(t,"x",(function(){return at})),n.d(t,"y",(function(){return Wt})),n.d(t,"z",(function(){return Mt})),n.d(t,"A",(function(){return Qt})),n.d(t,"B",(function(){return _t})),n.d(t,"C",(function(){return Et})),n.d(t,"D",(function(){return vt})),n.d(t,"E",(function(){return P})),n.d(t,"F",(function(){return Br})),n.d(t,"G",(function(){return Jt})),n.d(t,"H",(function(){return ve})),n.d(t,"I",(function(){return ye})),n.d(t,"J",(function(){return _e})),n.d(t,"K",(function(){return we})),n.d(t,"L",(function(){return E})),n.d(t,"M",(function(){return f})),n.d(t,"N",(function(){return g})),n.d(t,"O",(function(){return x})),n.d(t,"P",(function(){return an})),n.d(t,"Q",(function(){return Cr})),n.d(t,"R",(function(){return Tr})),n.d(t,"S",(function(){return kr})),n.d(t,"T",(function(){return xr})),n.d(t,"U",(function(){return ue})),n.d(t,"V",(function(){return on})),n.d(t,"W",(function(){return ge})),n.d(t,"X",(function(){return se})),n.d(t,"Y",(function(){return pe})),n.d(t,"Z",(function(){return rn})),n.d(t,"ab",(function(){return te})),n.d(t,"bb",(function(){return It})),n.d(t,"cb",(function(){return un})),n.d(t,"db",(function(){return a})),n.d(t,"eb",(function(){return s})),n.d(t,"fb",(function(){return Lr})),n.d(t,"gb",(function(){return O})),n.d(t,"hb",(function(){return h})),n.d(t,"ib",(function(){return Hr})),n.d(t,"jb",(function(){return Zt})),n.d(t,"kb",(function(){return $t})),n.d(t,"lb",(function(){return jr})),n.d(t,"mb",(function(){return Ir})),n.d(t,"nb",(function(){return Xt})),n.d(t,"ob",(function(){return Ar})),n.d(t,"pb",(function(){return en})),n.d(t,"qb",(function(){return tn})),n.d(t,"rb",(function(){return nn})),n.d(t,"sb",(function(){return br})),n.d(t,"tb",(function(){return Kr})),n.d(t,"ub",(function(){return gn})),n.d(t,"vb",(function(){return zr})),n.d(t,"wb",(function(){return Sr})),n.d(t,"xb",(function(){return Dr})),n.d(t,"yb",(function(){return Nr})),n.d(t,"zb",(function(){return yr})),n.d(t,"Ab",(function(){return ln})),n.d(t,"Bb",(function(){return X})),n.d(t,"Cb",(function(){return Mr}));var r,i,o=n(0),s=function(e){function t(t){var n=e.call(this)||this;if(n.method=o.a.POST,n.path="".concat(o.F),n.params=Object(o.Tb)({file:t.file,channel_url:t.channelUrl}),t.thumbnailSizes)for(var r=0;r<t.thumbnailSizes.length;r++){var i=t.thumbnailSizes[r],s=i.maxWidth,a=i.maxHeight;n.params["thumbnail".concat(r+1)]="".concat(s,",").concat(a)}return n.requestId=t.requestId,n}return Object(o.A)(t,e),t}(o.Ub),a=function(e){function t(t,n){var r,i,o,s=this;return(s=e.call(this,t,n)||this).url=n.url,s.fileSize=null!==(r=n.file_size)&&void 0!==r?r:0,s.thumbnailSizes=null!==(i=n.thumbnails)&&void 0!==i?i:[],s.requireAuth=null!==(o=n.require_auth)&&void 0!==o&&o,s}return Object(o.A)(t,e),t}(o.Wb),u=function(e){function t(t,n){var r,i,s,a=this;return(a=e.call(this,t)||this).replyCount=0,a.lastRepliedAt=0,a.updatedAt=0,a.replyCount=null!==(r=n.reply_count)&&void 0!==r?r:0,a.mostRepliedUsers=n.most_replies&&Object(o.k)("object",n.most_replies)?n.most_replies.map((function(e){return new o.u(a._iid,e)})):[],a.lastRepliedAt=null!==(i=n.last_replied_at)&&void 0!==i?i:0,a.updatedAt=null!==(s=n.updated_at)&&void 0!==s?s:0,a}return Object(o.A)(t,e),t.payloadify=function(t){return Object(o.Tb)(Object(o.jc)(Object(o.Vb)(Object(o.Vb)({},e.payloadify.call(this,t)),{reply_count:t.replyCount,most_replies:Array.isArray(t.mostRepliedUsers)?t.mostRepliedUsers.map((function(e){return o.u.payloadify(e)})):[],last_replied_at:t.lastRepliedAt,updated_at:t.updatedAt})))},t}(o.G);(i=r||(r={})).ADD="add",i.DELETE="delete";var c,l,h=function(e){this.messageId=0,this.operation=null,this.updatedAt=0;var t=Object(o.B)("string",e.msg_id)?parseInt(e.msg_id):e.msg_id,n=e.user_id,i=e.operation?e.operation.toLowerCase():null,s=e.reaction,a=e.updated_at;t&&Object(o.B)("string",n)&&Object(o.B)("string",i)&&Object(o.q)(r,i)&&Object(o.B)("string",s)&&s&&Object(o.B)("number",a)&&(this.messageId=t,this.userId=n,this.key=s,this.operation=i,this.updatedAt=a)},d=function(){function e(e){var t,n,r,i=e.key,s=null!==(r=Object(o.dc)([],Object(o.ec)(e.user_ids),!1))&&void 0!==r?r:[],a=e.updated_at;Object(o.B)("string",i)&&i&&Object(o.k)("string",s)&&s.length>0&&Object(o.B)("number",a)&&(this.key=i,this.userIds=s,this.updatedAt=a);var u={};try{for(var c=Object(o.gc)(this.userIds),l=c.next();!l.done;l=c.next())u[l.value]=this.updatedAt}catch(e){t={error:e}}finally{try{l&&!l.done&&(n=c.return)&&n.call(c)}finally{if(t)throw t.error}}this._version=u}return Object.defineProperty(e.prototype,"isEmpty",{get:function(){return 0===this.userIds.length},enumerable:!1,configurable:!0}),e.payloadify=function(e){return Object(o.Tb)(Object(o.jc)({key:e.key,user_ids:e.userIds,updated_at:e.updatedAt}))},e.prototype.applyEvent=function(e){if(e.key===this.key&&this.updatedAt<=e.updatedAt){if(!this._version[e.userId]||this._version[e.userId]<=e.updatedAt){var t=this.userIds.indexOf(e.userId);switch(e.operation){case r.ADD:t<0&&this.userIds.push(e.userId);break;case r.DELETE:t>=0&&this.userIds.splice(t,1)}this._version[e.userId]=e.updatedAt}this.updatedAt=Math.max(this.updatedAt,e.updatedAt)}},e}(),f=function(){function e(e){this.key=e.key,this.value=Object(o.k)("string",e.value)?Object(o.dc)([],Object(o.ec)(e.value),!1):[]}return e.payloadify=function(e){var t;return Object(o.Tb)(Object(o.jc)({key:e.key,value:null!==(t=e.value)&&void 0!==t?t:[]}))},e}(),p=function(){function e(e){this.secureUrl=null,this.type=null,this.width=0,this.height=0,this.alt=null,this.url=e.url,e.secure_url&&(this.secureUrl=e.secure_url),e.type&&(this.type=e.type),e.width&&(this.width=e.width),e.height&&(this.height=e.height),e.alt&&(this.alt=e.alt)}return e.payloadify=function(e){var t,n;return Object(o.Tb)(Object(o.jc)({url:e.url,secure_url:e.secureUrl,type:e.type,width:null!==(t=e.width)&&void 0!==t?t:0,height:null!==(n=e.height)&&void 0!==n?n:0,alt:e.alt}))},e}(),m=function(){function e(e){this.title=null,this.url=null,this.description=null,this.defaultImage=null,e["og:title"]&&(this.title=e["og:title"]),e["og:url"]&&(this.url=e["og:url"]),e["og:description"]&&(this.description=e["og:description"]),e["og:image"]&&(this.defaultImage=new p(e["og:image"]))}return e.payloadify=function(e){return Object(o.Tb)(Object(o.jc)({"og:title":e.title,"og:url":e.url,"og:description":e.description,"og:image":e.defaultImage?p.payloadify(e.defaultImage):null}))},e}(),g=function(){function e(e){var t,n;this.volume=0,this.name=null!==(t=e.name)&&void 0!==t?t:"default",this.volume=null!==(n=e.volume)&&void 0!==n?n:1}return e.prototype.serialize=function(){return{name:this.name,volume:this.volume}},e.payloadify=function(e){return Object(o.Tb)(Object(o.jc)({name:e.name,volume:e.volume}))},e}(),b=function(e){function t(t,n){var r,i=this;return(i=e.call(this,t,n)||this).isBlockedByMe=!1,i.role=Object(o.q)(o.D,n.role)?n.role:o.D.NONE,i.isBlockedByMe=null!==(r=n.is_blocked_by_me)&&void 0!==r&&r,i}return Object(o.A)(t,e),t.payloadify=function(t){return Object(o.Tb)(Object(o.jc)(Object(o.Vb)(Object(o.Vb)({},e.payloadify.call(this,t)),{role:t.role,is_blocked_by_me:t.isBlockedByMe})))},t}(o.u);!function(e){e.PENDING="pending",e.SENT="sent",e.FAILED="failed",e.CANCELED="canceled"}(c||(c={})),function(e){e.PENDING="pending",e.IN_QUEUE="in_queue",e.SENT="sent",e.FAILED="failed",e.CANCELED="canceled",e.REMOVED="removed"}(l||(l={}));var v,y=function(e){switch(e){case o.gb.BASE:return"";case o.gb.USER:return"MESG";case o.gb.FILE:return"FILE";case o.gb.ADMIN:return"ADMM"}},_=function(e){function t(t,n){var r,i,s,a,c,l,h,p,b,v,y,_,w,E,S,M,O=this;(O=e.call(this,t)||this).channelType=o.y.BASE,O.parentMessage=null,O.silent=!1,O.isOperatorMessage=!1,O.messageType=o.gb.BASE,O.mentionType=null,O.threadInfo=null,O.reactions=[],O.metaArrays=[],O.appleCriticalAlertOptions=null,O.createdAt=0,O.updatedAt=0,O.scheduledInfo=null,O.extendedMessage={},O.notificationData=null,O._isContinuousMessages=!1,O._scheduledStatus=null,O.messageId=null!==(i=null!==(r=n.msg_id)&&void 0!==r?r:n.message_id)&&void 0!==i?i:0,O.channelUrl=n.channel_url,O.channelType=Object(o.q)(o.y,n.channel_type)?n.channel_type:o.y.GROUP,n.channel&&(n.channel.channel_url&&(O.channelUrl=n.channel.channel_url),n.channel.channel_type&&(O.channelType=n.channel.channel_type)),O.parentMessageId=null!==(s="string"==typeof n.parent_message_id?parseInt(n.parent_message_id):n.parent_message_id)&&void 0!==s?s:0,O.data=null!==(a=n.data)&&void 0!==a?a:"",O.customType=null!==(c=n.custom_type)&&void 0!==c?c:"",O.mentionType=Object(o.q)(o.ib,n.mention_type)?n.mention_type:null,O.mentionedUsers=n.mentioned_users?n.mentioned_users.map((function(e){return new o.u(O._iid,e)})):null,O.mentionedUserIds=null!==(l=n.mentioned_user_ids)&&void 0!==l?l:null,O.mentionedUsers&&!O.mentionedUserIds&&(O.mentionedUserIds=O.mentionedUsers.map((function(e){return e.userId}))),O.mentionedMessageTemplate=null!==(h=n.mentioned_message_template)&&void 0!==h?h:"",O.threadInfo=n.thread_info?new u(O._iid,n.thread_info):null,O.reactions=n.reactions?n.reactions.map((function(e){return new d(e)})):[];var A=null!==(p=n.metaarray)&&void 0!==p?p:{},C=null!==(b=n.metaarray_key_order)&&void 0!==b?b:Object.keys(A).sort((function(e,t){return e.localeCompare(t)}));O.metaArrays=[];for(var T=0;T<C.length;T++){var k=C[T];O.metaArrays.push(new f({key:k,value:A[k]||[]}))}if(n.sorted_metaarray&&(O.metaArrays=n.sorted_metaarray.map((function(e){return new f(e)}))),O.ogMetaData=n.og_tag?new m(n.og_tag):null,O.silent=null!==(v=n.silent)&&void 0!==v&&v,O.isOperatorMessage=null!==(y=n.is_op_msg)&&void 0!==y&&y,O.appleCriticalAlertOptions=n.apple_critical_alert_options?new g(n.apple_critical_alert_options):null,O.createdAt=null!==(w=null!==(_=n.created_at)&&void 0!==_?_:n.ts)&&void 0!==w?w:0,O.updatedAt=null!==(E=n.updated_at)&&void 0!==E?E:0,"number"==typeof n.scheduled_message_id&&"number"==typeof n.scheduled_at&&n.scheduled_status&&(O.scheduledInfo={scheduledMessageId:n.scheduled_message_id,scheduledAt:n.scheduled_at},O._scheduledStatus=n.scheduled_status),O.extendedMessage=null!==(S=n.extended_message)&&void 0!==S?S:{},0===O.extendedMessage.sub_type)try{var x=O.extendedMessage.sub_data,j=x.label,I=x.template_key,R=x.template_variables;O.notificationData={label:j,templateKey:I,templateVariables:R}}catch(t){}return O._isContinuousMessages=null!==(M=n.is_continuous_messages)&&void 0!==M&&M,O}return Object(o.A)(t,e),t.payloadify=function(t){var n,r,i,s;return Object(o.Tb)(Object(o.jc)(Object(o.Vb)(Object(o.Vb)({},e.payloadify.call(this,t)),{channel_url:t.channelUrl,channel_type:t.channelType,message_id:t.messageId,type:y(t.messageType),parent_message_id:t.parentMessageId,data:t.data,custom_type:t.customType,mention_type:t.mentionType,mentioned_user_ids:t.mentionedUserIds,mentioned_users:null===(n=t.mentionedUsers)||void 0===n?void 0:n.map((function(e){return o.u.payloadify(e)})),mentioned_message_template:t.mentionedMessageTemplate,thread_info:t.threadInfo?u.payloadify(t.threadInfo):null,reactions:t.reactions.map((function(e){return d.payloadify(e)})),sorted_metaarray:null===(r=t.metaArrays)||void 0===r?void 0:r.map((function(e){return f.payloadify(e)})),og_tag:t.ogMetaData?m.payloadify(t.ogMetaData):null,silent:t.silent,is_op_msg:t.isOperatorMessage,apple_critical_alert_options:t.appleCriticalAlertOptions?g.payloadify(t.appleCriticalAlertOptions):null,created_at:t.createdAt,updated_at:t.updatedAt,scheduled_message_id:null===(i=t.scheduledInfo)||void 0===i?void 0:i.scheduledMessageId,scheduled_at:null===(s=t.scheduledInfo)||void 0===s?void 0:s.scheduledAt,scheduled_status:t._scheduledStatus,extended_message:t.extendedMessage})))},t._getParentMessageInfoPayload=function(e){return Object(o.Tb)(Object(o.jc)({type:y(e.messageType),ts:e.createdAt,user:e.sender?b.payloadify(e.sender):null,message:e.message,file:{url:e.plainUrl,name:e.name,type:e.type,require_auth:e.requireAuth}}))},t.prototype.isIdentical=function(e){return this.messageId===e.messageId},t.prototype.isEqual=function(e){return Object(o.H)(this,e)},t.prototype.isUserMessage=function(){return this.messageType===o.gb.USER},t.prototype.isFileMessage=function(){return this.messageType===o.gb.FILE&&!Object.prototype.hasOwnProperty.call(this,"fileInfoList")},t.prototype.isMultipleFilesMessage=function(){return this.messageType===o.gb.FILE&&Object.prototype.hasOwnProperty.call(this,"fileInfoList")},t.prototype.isAdminMessage=function(){return this.messageType===o.gb.ADMIN},t.prototype.serialize=function(){return Object(o.hb)(this)},t.prototype.getMetaArraysByKeys=function(e){return this.metaArrays.filter((function(t){return e.includes(t.key)}))},t.prototype.applyThreadInfoUpdateEvent=function(e){return this.messageId===e.targetMessageId&&(this.threadInfo=e.threadInfo),!1},t.prototype.applyReactionEvent=function(e){if(this.messageId===e.messageId){for(var t=!1,n=0;n<this.reactions.length;n++)if(this.reactions[n].key===e.key){this.reactions[n].applyEvent(e),this.reactions[n].isEmpty&&this.reactions.splice(n,1),t=!0;break}t||"add"!==e.operation||this.reactions.push(new d(d.payloadify({key:e.key,userIds:[e.userId],updatedAt:e.updatedAt})))}},t.prototype.applyParentMessage=function(e){if(!this.parentMessage)return this.parentMessage=e,!0;if(this.parentMessageId===e.messageId){var t=this.parentMessage.updatedAt;if(e.updatedAt>=t)return this.parentMessage=e,!0}return!1},t}(o.G),w=function(e){function t(t,n){var r,i,s,a,u=this;if((u=e.call(this,t,n)||this).reqId="",u.replyToChannel=!1,u.errorCode=0,u.sender=n.user?new b(u._iid,n.user):n.sender_id,u.reqId=null!==(i=null!==(r=n.req_id)&&void 0!==r?r:n.request_id)&&void 0!==i?i:"",u.replyToChannel=null!==(s=n.is_reply_to_channel)&&void 0!==s&&s,n.request_state&&Object(o.q)(o.jb,n.request_state)&&(u.sendingStatus=n.request_state),!u.sendingStatus)if(u.messageId>0)u.sendingStatus=o.jb.SUCCEEDED;else if(u.scheduledInfo)switch(n.scheduled_status&&(u._scheduledStatus=n.scheduled_status),n.scheduled_status){case l.SENT:case l.IN_QUEUE:u.sendingStatus=o.jb.SUCCEEDED;break;case l.PENDING:u.sendingStatus=o.jb.SCHEDULED;break;case l.FAILED:case l.REMOVED:u.sendingStatus=o.jb.FAILED;break;case l.CANCELED:u.sendingStatus=o.jb.CANCELED}else u.sendingStatus=o.jb.PENDING;return u.errorCode=null!==(a=n.error_code)&&void 0!==a?a:0,u}return Object(o.A)(t,e),t.payloadify=function(t){return Object(o.Tb)(Object(o.jc)(Object(o.Vb)(Object(o.Vb)({},e.payloadify.call(this,t)),{user:b.payloadify(t.sender),req_id:t.reqId,is_reply_to_channel:t.replyToChannel,request_state:t.sendingStatus,error_code:t.errorCode})))},Object.defineProperty(t.prototype,"isResendable",{get:function(){return(this.sendingStatus===o.jb.FAILED||this.sendingStatus===o.jb.CANCELED)&&Object(o.kb)(this.errorCode)},enumerable:!1,configurable:!0}),t.prototype.isIdentical=function(e){return this.messageId>0&&e.messageId>0?this.messageId===e.messageId:this.reqId===e.reqId},t}(_),E=function(){function e(e,t,n){var r,i;this.width=0,this.height=0,this.realWidth=0,this.realHeight=0,this._requireAuth=!1,this._iid=e,this.plainUrl=t.url,this.width=t.width,this.height=t.height,this.realWidth=null!==(r=t.real_width)&&void 0!==r?r:t.width,this.realHeight=null!==(i=t.real_height)&&void 0!==i?i:t.height,this._requireAuth=n}return e.payloadify=function(e){return Object(o.Tb)(Object(o.jc)({url:"",width:e.maxWidth,height:e.maxHeight,real_width:0,real_height:0}))},Object.defineProperty(e.prototype,"url",{get:function(){var e=o.v.of(this._iid).sessionManager;return this._requireAuth?"".concat(this.plainUrl,"?auth=").concat(e.ekey):this.plainUrl},enumerable:!1,configurable:!0}),e}(),S={prevResultSize:0,nextResultSize:0,isInclusive:!1,reverse:!1,messageTypeFilter:o.lb.ALL,customTypesFilter:void 0,senderUserIdsFilter:void 0,includeReactions:!1,includeMetaArray:!1,includeParentMessageInfo:!1},M=function(e){return Object(o.B)("number",e.prevResultSize)&&Object(o.B)("number",e.nextResultSize)&&Object(o.B)("boolean",e.isInclusive)&&Object(o.B)("boolean",e.reverse)&&Object(o.B)("string",e.messageTypeFilter)&&Object(o.q)(o.lb,e.messageTypeFilter)&&Object(o.k)("string",e.customTypesFilter,!0)&&Object(o.k)("string",e.senderUserIdsFilter,!0)&&Object(o.B)("boolean",e.includeMetaArray)&&Object(o.B)("boolean",e.includeReactions)&&Object(o.B)("boolean",e.includeParentMessageInfo)},O=function(e){function t(t,n){var r,i,s,a,u=this;if((u=e.call(this,t,n)||this).translations={},u.message=null!==(r=n.message)&&void 0!==r?r:"",u.messageType=o.gb.ADMIN,u.translations=null!==(i=n.translations)&&void 0!==i?i:{},n.parent_message_info){var c=n.parent_message_info;u.parentMessage=j(t,Object(o.Tb)(Object(o.jc)(Object(o.Vb)(Object(o.Vb)({},c),{message_id:u.parentMessageId,channel_url:u.channelUrl,channel_type:u.channelType,file:c.file,url:null===(s=c.file)||void 0===s?void 0:s.url,require_auth:null===(a=c.file)||void 0===a?void 0:a.require_auth}))))}return u}return Object(o.A)(t,e),t.payloadify=function(t){return Object(o.Tb)(Object(o.jc)(Object(o.Vb)(Object(o.Vb)({},e.payloadify.call(this,t)),{message:t.message,translations:t.translations,parent_message_info:t.parentMessage?e._getParentMessageInfoPayload.call(this,t.parentMessage):null})))},t.prototype.getThreadedMessagesByTimestamp=function(e,t){return Object(o.Gb)(this,void 0,void 0,(function(){var n;return Object(o.Rb)(this,(function(r){switch(r.label){case 0:return n=Object(o.Vb)(Object(o.Vb)({},S),t),Object(o.hc)(this.messageId>0&&Object(o.B)("number",e)&&M(n)).throw(o.fc.invalidParameters),[4,Br.of(this._iid).getThreadedMessagesByTimestamp(this,e,n)];case 1:return[2,r.sent()]}}))}))},t}(_),A=function(){function e(e){var t,n;this.detail={},this.type=null!==(t=e.type)&&void 0!==t?t:"",this.vendor=null!==(n=e.vendor)&&void 0!==n?n:"",e.detail&&Object(o.B)("object",e.detail)&&!Array.isArray(e.detail)&&(this.detail=e.detail)}return e.payloadify=function(e){return Object(o.Tb)(Object(o.jc)({type:e.type,vendor:e.vendor,detail:e.detail}))},e}(),C=function(e){function t(t,n){var r,i,s,a,u,c,l,h=this;if((h=e.call(this,t,n)||this).message="",h.messageParams=null,h.translations={},h.translationTargetLanguages=[],h.messageSurvivalSeconds=-1,h.plugins=[],h._poll=null,h.message=n.message,h.messageType=o.gb.USER,h.translations=null!==(s=n.translations)&&void 0!==s?s:{},h.translationTargetLanguages=null!==(a=n.target_langs)&&void 0!==a?a:[],0===Object.keys(h.translations).length&&h.translationTargetLanguages.length>0)try{for(var d=Object(o.gc)(h.translationTargetLanguages),f=d.next();!f.done;f=d.next()){var p=f.value;h.translations[p]=""}}catch(t){r={error:t}}finally{try{f&&!f.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}if(h.messageSurvivalSeconds=null!==(u=n.message_survival_seconds)&&void 0!==u?u:-1,h.plugins=n.plugins?n.plugins.map((function(e){return new A(e)})):[],h._poll=n.poll?new o.mb(h._iid,n.poll):null,n.parent_message_info){var m=n.parent_message_info;h.parentMessage=j(t,Object(o.Tb)(Object(o.jc)(Object(o.Vb)(Object(o.Vb)({},m),{created_at:m.ts,message_id:h.parentMessageId,channel_url:h.channelUrl,channel_type:h.channelType,file:m.file,url:null===(c=m.file)||void 0===c?void 0:c.url,require_auth:null===(l=m.file)||void 0===l?void 0:l.require_auth}))))}return h}return Object(o.A)(t,e),t.payloadify=function(t){return Object(o.Tb)(Object(o.jc)(Object(o.Vb)(Object(o.Vb)({},e.payloadify.call(this,t)),{message:t.message,translations:t.translations,message_survival_seconds:t.messageSurvivalSeconds,plugins:t.plugins.map((function(e){return A.payloadify(e)})),poll:t._poll?o.mb.payloadify(t._poll):null,parent_message_info:t.parentMessage?e._getParentMessageInfoPayload.call(this,t.parentMessage):null})))},t.prototype.getThreadedMessagesByTimestamp=function(e,t){return Object(o.Gb)(this,void 0,void 0,(function(){var n;return Object(o.Rb)(this,(function(r){switch(r.label){case 0:return n=Object(o.Vb)(Object(o.Vb)({},S),t),Object(o.hc)(this.messageId>0&&Object(o.B)("number",e)&&M(n)).throw(o.fc.invalidParameters),[4,Br.of(this._iid).getThreadedMessagesByTimestamp(this,e,n)];case 1:return[2,r.sent()]}}))}))},t.prototype.applyPoll=function(e){return!(this._poll&&this._poll.id===e.id&&this._poll.updatedAt>e.updatedAt||(this._poll=e,0))},Object.defineProperty(t.prototype,"poll",{get:function(){return this._poll},enumerable:!1,configurable:!0}),t}(w),T=function(e){function t(t,n){var r,i,s,a,u,c=this;return(c=e.call(this,t)||this).plainUrl="",c.fileName=null,c.mimeType=null,c.fileSize=0,c.thumbnails=[],c._requireAuth=!1,c.plainUrl=null!==(r=n.url)&&void 0!==r?r:"",c.fileName=null!==(i=n.file_name)&&void 0!==i?i:null,c.mimeType=null!==(s=n.file_type)&&void 0!==s?s:null,c.fileSize=null!==(a=n.file_size)&&void 0!==a?a:0,c._requireAuth=null!==(u=n.require_auth)&&void 0!==u&&u,o.v.of(c._iid).sessionManager,c.thumbnails=n.thumbnails?n.thumbnails.map((function(e){var t;return new E(c._iid,"string"==typeof e?{url:e,width:0,height:0}:Object(o.Vb)(Object(o.Vb)({},e),{url:(null!==(t=e.url)&&void 0!==t?t:"").split("auth=")[0]}),c._requireAuth)})):[],c}return Object(o.A)(t,e),t.payloadify=function(e){var t;return Object(o.Tb)(Object(o.jc)({url:e.plainUrl,file_name:e.fileName,file_type:e.mimeType,file_size:e.fileSize,thumbnails:null===(t=e.thumbnails)||void 0===t?void 0:t.map((function(e){return{url:e.url,width:e.width,height:e.height,real_width:e.realWidth,real_height:e.realHeight}})),require_auth:e._requireAuth}))},Object.defineProperty(t.prototype,"url",{get:function(){var e=o.v.of(this._iid).sessionManager;return this._requireAuth?"".concat(this.plainUrl,"?auth=").concat(e.ekey):this.plainUrl},enumerable:!1,configurable:!0}),t}(o.G),k=function(e){function t(t,n){var r,i,s,a,u,c=this;if((c=e.call(this,t,n)||this).messageParams=null,c.fileInfoList=[],c.messageSurvivalSeconds=-1,c.messageType=o.gb.FILE,c.fileInfoList=null!==(i=null===(r=n.files)||void 0===r?void 0:r.map((function(e){return new T(t,e)})))&&void 0!==i?i:[],c.messageSurvivalSeconds=null!==(s=n.message_survival_seconds)&&void 0!==s?s:-1,n.parent_message_info){var l=n.parent_message_info;c.parentMessage=j(t,Object(o.Tb)(Object(o.jc)(Object(o.Vb)(Object(o.Vb)({},l),{created_at:l.ts,message_id:c.parentMessageId,channel_url:c.channelUrl,channel_type:c.channelType,file:l.file,url:null===(a=l.file)||void 0===a?void 0:a.url,require_auth:null===(u=l.file)||void 0===u?void 0:u.require_auth}))))}return c}return Object(o.A)(t,e),t.prototype.getThreadedMessagesByTimestamp=function(e,t){return Object(o.Gb)(this,void 0,void 0,(function(){var n;return Object(o.Rb)(this,(function(r){switch(r.label){case 0:return n=Object(o.Vb)(Object(o.Vb)({},S),t),Object(o.hc)(this.messageId>0&&Object(o.B)("number",e)&&M(n)).throw(o.fc.invalidParameters),[4,Br.of(this._iid).getThreadedMessagesByTimestamp(this,e,n)];case 1:return[2,r.sent()]}}))}))},t.payloadify=function(t){return Object(o.Tb)(Object(o.jc)(Object(o.Vb)(Object(o.Vb)({},e.payloadify.call(this,t)),{files:t.fileInfoList&&t.fileInfoList&&Array.isArray(t.fileInfoList)?t.fileInfoList.map((function(e){return T.payloadify(e)})):null,message_survival_seconds:t.messageSurvivalSeconds,parent_message_info:t.parentMessage?e._getParentMessageInfoPayload.call(this,t.parentMessage):null})))},t._isMultipleFilesMessagePayload=function(e){var t=e.files;return Array.isArray(t)&&t.length>=2},t._isMultipleFilesMessageSerializedData=function(e){var t=e.fileInfoList;return Array.isArray(t)},t}(w),x=function(e){switch(e.messageType){case o.gb.USER:return C.payloadify(e);case o.gb.FILE:return e.fileInfoList?k.payloadify(e):I.payloadify(e);case o.gb.ADMIN:return O.payloadify(e);default:throw o.fc.unknown}},j=function(e,t){switch(t.type){case"MESG":return new C(e,t);case"FILE":return k._isMultipleFilesMessagePayload(t)?new k(e,t):new I(e,t);case"ADMM":case"BRDM":return new O(e,t)}return null},I=function(e){function t(t,n){var r,i,s,a,u,c,l,h,d,f,p,m,g,b,v=this;(v=e.call(this,t,n)||this).messageParams=null,v.plainUrl="",v.requireAuth=!1,v.thumbnails=[],v.messageSurvivalSeconds=-1,v.messageType=o.gb.FILE;var y=n.file;if(v.plainUrl=(null!==(i=null!==(r=null==y?void 0:y.url)&&void 0!==r?r:n.url)&&void 0!==i?i:"").split("?auth=")[0],v.name=null!==(a=null!==(s=null==y?void 0:y.name)&&void 0!==s?s:n.name)&&void 0!==a?a:"File",v.size=null!==(c=null!==(u=null==y?void 0:y.size)&&void 0!==u?u:n.size)&&void 0!==c?c:0,v.data=null!==(h=null!==(l=null==y?void 0:y.data)&&void 0!==l?l:n.custom)&&void 0!==h?h:"",v.type=y?null!==(d=y.type)&&void 0!==d?d:"":null!==(f=n.type)&&void 0!==f?f:"",o.v.of(v._iid).sessionManager,v.requireAuth=null!==(p=n.require_auth)&&void 0!==p&&p,v.thumbnails=n.thumbnails?n.thumbnails.map((function(e){var t;return new E(v._iid,"string"==typeof e?{url:e,width:0,height:0}:Object(o.Vb)(Object(o.Vb)({},e),{url:(null!==(t=e.url)&&void 0!==t?t:"").split("auth=")[0]}),v.requireAuth)})):[],v.messageSurvivalSeconds=null!==(m=n.message_survival_seconds)&&void 0!==m?m:-1,n.parent_message_info){var _=n.parent_message_info;v.parentMessage=j(t,Object(o.Tb)(Object(o.jc)(Object(o.Vb)(Object(o.Vb)({},_),{created_at:_.ts,message_id:v.parentMessageId,channel_url:v.channelUrl,channel_type:v.channelType,file:_.file,url:null===(g=_.file)||void 0===g?void 0:g.url,require_auth:null===(b=_.file)||void 0===b?void 0:b.require_auth}))))}return v}return Object(o.A)(t,e),t.payloadify=function(t){var n;return Object(o.Tb)(Object(o.jc)(Object(o.Vb)(Object(o.Vb)({},e.payloadify.call(this,t)),{url:t.plainUrl,require_auth:t.requireAuth,file:{name:t.name,size:t.size,type:t.type,data:t.data},thumbnails:null===(n=t.thumbnails)||void 0===n?void 0:n.map((function(e){return{url:e.plainUrl,width:e.width,height:e.height,real_width:e.realWidth,real_height:e.realHeight}})),message_survival_seconds:t.messageSurvivalSeconds,parent_message_info:t.parentMessage?e._getParentMessageInfoPayload.call(this,t.parentMessage):null})))},Object.defineProperty(t.prototype,"url",{get:function(){var e=o.v.of(this._iid).sessionManager;return this.requireAuth?"".concat(this.plainUrl,"?auth=").concat(e.ekey):this.plainUrl},enumerable:!1,configurable:!0}),t.prototype.getThreadedMessagesByTimestamp=function(e,t){return Object(o.Gb)(this,void 0,void 0,(function(){var n;return Object(o.Rb)(this,(function(r){switch(r.label){case 0:return n=Object(o.Vb)(Object(o.Vb)({},S),t),Object(o.hc)(this.messageId>0&&Object(o.B)("number",e)&&M(n)).throw(o.fc.invalidParameters),[4,Br.of(this._iid).getThreadedMessagesByTimestamp(this,e,n)];case 1:return[2,r.sent()]}}))}))},t}(w),R=function(e){function t(t){var n,r,i,s=[];return t.mentionType===o.ib.USERS&&(t.mentionedUserIds?s=t.mentionedUserIds:t.mentionedUsers&&(s=t.mentionedUsers.map((function(e){return e.userId})))),e.call(this,{code:"FILE",ackRequired:!0,payload:Object(o.Tb)(Object(o.jc)({channel_url:t.channelUrl,files:t.files?U(t.files):null,url:t.url,name:null!==(n=t.fileName)&&void 0!==n?n:"",type:null!==(r=t.mimeType)&&void 0!==r?r:"",size:null!==(i=t.fileSize)&&void 0!==i?i:0,custom:t.data,custom_type:t.customType,thumbnails:t.thumbnailSizes,require_auth:t.requireAuth,metaarray:t.metaArrays,mention_type:t.mentionType,mentioned_user_ids:s,push_option:t.pushNotificationDeliveryOption&&t.pushNotificationDeliveryOption!==o.nb.DEFAULT?t.pushNotificationDeliveryOption:void 0,apple_critical_alert_options:t.appleCriticalAlertOptions?g.payloadify(t.appleCriticalAlertOptions):null,silent:t.silent,reply_to_channel:t.isReplyToChannel,parent_message_id:t.parentMessageId?t.parentMessageId:null,req_id:t.reqId,pin_message:t.isPinnedMessage}))})||this}return Object(o.A)(t,e),t}(o.ob),N=function(e){function t(t){var n,r,i=this;i=e.call(this)||this;var s=[];return t.mentionType===o.ib.USERS&&(t.mentionedUserIds?s=t.mentionedUserIds:t.mentionedUsers&&(s=t.mentionedUsers.map((function(e){return e.userId})))),i.method=o.a.POST,i.path="".concat(Object(o.pb)(t.channelType),"/").concat(encodeURIComponent(t.channelUrl),"/messages"),i.params=Object(o.Tb)(Object(o.jc)({message_type:o.gb.FILE,user_id:t.userId,files:t.files?U(t.files):null,url:t.fileUrl,mention_type:t.mentionType,mentioned_user_ids:s,file_name:t.fileName,file_size:t.fileSize,file_type:t.mimeType,data:t.data,custom_type:t.customType,thumbnails:null===(n=t.thumbnailSizes)||void 0===n?void 0:n.map((function(e){return E.payloadify(e)})),require_auth:t.requireAuth,sorted_metaarray:null===(r=t.metaArrays)||void 0===r?void 0:r.map((function(e){return f.payloadify(e)})),push_option:t.pushNotificationDeliveryOption,parent_message_id:t.parentMessageId?t.parentMessageId:null,apple_critical_alert_options:t.appleCriticalAlertOptions?g.payloadify(t.appleCriticalAlertOptions):null,reply_to_channel:t.isReplyToChannel,req_id:t.reqId,pin_message:t.isPinnedMessage})),i}return Object(o.A)(t,e),t}(o.Ub),P=function(e){function t(t,n,r){var i,s,a,u,c=this;(c=e.call(this,t,"FILE",r)||this).message=r.files&&r.files.length>=2?new k(t,r):new I(t,r);var l=o.v.of(t).sdkState;return c.isMentioned=Object(o.qb)(c.message.mentionType,null!==(a=null!==(i=c.message.mentionedUserIds)&&void 0!==i?i:null===(s=c.message.mentionedUsers)||void 0===s?void 0:s.map((function(e){return e.userId})))&&void 0!==a?a:[],l.userId),c.forceUpdateLastMessage=null!==(u=r.force_update_last_message)&&void 0!==u&&u,c}return Object(o.A)(t,e),t}(o.w),D=function(e){function t(t,n){var r,i,s,a,u=this;(u=e.call(this,t,n)||this).message=n.files&&n.files.length>=2?new k(t,n):new I(t,n);var c=o.v.of(t).sdkState;return u.isMentioned=Object(o.qb)(u.message.mentionType,null!==(s=null!==(r=u.message.mentionedUserIds)&&void 0!==r?r:null===(i=u.message.mentionedUsers)||void 0===i?void 0:i.map((function(e){return e.userId})))&&void 0!==s?s:[],c.userId),u.forceUpdateLastMessage=null!==(a=n.force_update_last_message)&&void 0!==a&&a,u}return Object(o.A)(t,e),t}(o.Wb);function U(e){return e.map((function(e){var t,n;return Object(o.Tb)(Object(o.jc)({url:e.fileUrl,file_name:e.fileName,file_type:e.mimeType,file_size:e.fileSize,thumbnails:null===(t=e.thumbnailSizes)||void 0===t?void 0:t.map((function(e){return E.payloadify(e)})),require_auth:null===(n=e._uploadedMetaData)||void 0===n?void 0:n.requireAuth}))}))}!function(e){e[e.PENDING=0]="PENDING",e[e.UPLOADING=1]="UPLOADING",e[e.UPLOADED=2]="UPLOADED",e[e.SENDING=3]="SENDING",e[e.FAILED=4]="FAILED"}(v||(v={}));var L,F=function(){function e(e,t){var n=t.sdkState,r=t.dispatcher,i=t.requestQueue,s=t.onlineDetector,a=t.cacheContext,u=this;this._queueMap=new Map,this._iid=e,this._sdkState=n,this._requestQueue=i,this._cacheContext=a,this._dispatcher=r,this._dispatcher.on((function(e){e instanceof o.nc&&(u._connectionState=e.stateType)})),this._onlineDetector=s}return Object.defineProperty(e.prototype,"_shouldSendThroughWebSocket",{get:function(){return this._connectionState===o.oc.CONNECTED||this._connectionState===o.oc.CONNECTING||this._connectionState===o.oc.RECONNECTING},enumerable:!1,configurable:!0}),e.prototype._sendFileMessage=function(e,t){return Object(o.Gb)(this,void 0,void 0,(function(){var n,r;return Object(o.Rb)(this,(function(i){switch(i.label){case 0:return n=this._createSendFileMessageRequestParams(e,t),this._shouldSendThroughWebSocket?(r=new R(n),[4,this._requestQueue.send(r)]):[3,2];case 1:return[2,i.sent().as(P).message];case 2:return r=new N(Object(o.Vb)(Object(o.Vb)({},n),{userId:this._sdkState.userId})),[4,this._requestQueue.send(r)];case 3:return[2,i.sent().as(D).message]}}))}))},e.prototype._createSendFileMessageRequestParams=function(e,t){var n=Object(o.Vb)(Object(o.Vb)({},t.params),{channelUrl:e.url,channelType:e.channelType,reqId:t.requestId,url:""});if(t.multipleFileUploadInfo){var r=t.params;n.files=r.fileInfoList}else r=t.params,n.url=r.fileUrl,n.requireAuth=r.requireAuth;return n},e.prototype._resolveMessageQueue=function(e){var t;return Object(o.Gb)(this,void 0,void 0,(function(){var n,r,i,s,a,u,c,l,h,d,f,p,m;return Object(o.Rb)(this,(function(g){switch(g.label){case 0:if(!(n=this._queueMap.get(e.url)))return[3,21];if(n.isResolving)return[3,20];n.isResolving=!0,r=[],i=!0,g.label=1;case 1:g.trys.push([1,15,16,17]),s=Object(o.gc)(n.messageQueue),a=s.next(),g.label=2;case 2:if(a.done)return[3,14];switch((u=a.value).state){case v.PENDING:case v.UPLOADING:return[3,3];case v.UPLOADED:return[3,4];case v.FAILED:return[3,12]}return[3,13];case 3:return i=!1,r.push(u),[3,13];case 4:if(!i)return[3,10];g.label=5;case 5:return g.trys.push([5,8,,9]),u.state=v.SENDING,[4,this._sendFileMessage(e,u)];case 6:return c=g.sent(),u.deferred.resolve(c),[4,Object(o.sb)(100)];case 7:return g.sent(),[3,9];case 8:return l=g.sent(),u.deferred.reject(l),[3,9];case 9:return[3,11];case 10:r.push(u),g.label=11;case 11:return[3,13];case 12:return h=null!==(t=u.error)&&void 0!==t?t:o.fc.unknown,u.deferred.reject(h.code===o.rb.REQUEST_CANCELED?o.fc.fileUploadCanceled:h),[3,13];case 13:return a=s.next(),[3,2];case 14:return[3,17];case 15:return d=g.sent(),p={error:d},[3,17];case 16:try{a&&!a.done&&(m=s.return)&&m.call(s)}finally{if(p)throw p.error}return[7];case 17:return f=n.isResolveRequestPending,n.messageQueue=r,n.isResolving=!1,n.isResolveRequestPending=!1,f?[4,this._resolveMessageQueue(e)]:[3,19];case 18:g.sent(),g.label=19;case 19:return[3,21];case 20:n.isResolveRequestPending=!0,g.label=21;case 21:return[2]}}))}))},e.prototype._uploadNextPendingItem=function(e){var t;return Object(o.Gb)(this,void 0,void 0,(function(){var n,r,i,s,a,u,c,l,h;return Object(o.Rb)(this,(function(d){switch(d.label){case 0:return(n=this._queueMap.get(e.url))&&(r=n.messageQueue.find((function(e){return e.state===v.PENDING})))?r.multipleFileUploadInfo?(i=r.multipleFileUploadInfo,s=i.uploadIndex,a=i.uploadCount,u=i.requestHandler,h=r.params,c=h.fileInfoList[s],!Object(o.Xb)(c.file)||(null===(t=c._uploadedMetaData)||void 0===t?void 0:t.isUploaded)?[3,2]:[4,this._tryUploadNextItemAndUpdateItemState(e,n,r)]):[3,4]:[3,9];case 1:return d.sent(),[3,3];case 2:r.state=s<a-1?v.PENDING:v.UPLOADED,d.label=3;case 3:return l=r.multipleFileUploadInfo.uploadIndex++,r.multipleFileUploadInfo.isCopy||null==u||u._triggerOnFileUploaded(r.requestId,l,c,r.error),[3,7];case 4:return h=r.params,Object(o.Xb)(h.file)?[4,this._tryUploadNextItemAndUpdateItemState(e,n,r)]:[3,6];case 5:return d.sent(),[3,7];case 6:h.thumbnailSizes=[],r.state=v.UPLOADED,d.label=7;case 7:return this._uploadNextPendingItem(e),[4,this._resolveMessageQueue(e)];case 8:d.sent(),d.label=9;case 9:return[2]}}))}))},e.prototype._tryUploadNextItemAndUpdateItemState=function(e,t,n){return Object(o.Gb)(this,void 0,void 0,(function(){var r,i,s,a,u,c;return Object(o.Rb)(this,(function(l){switch(l.label){case 0:return[4,this._onlineDetector.isOnline()];case 1:if(r=l.sent(),!o.v.of(this._iid).sessionManager.currentUser||!r)return n.error=o.fc.connectionRequired,n.state=v.FAILED,[2];if(!(t.uploadQueue.length<6))return[3,9];n.state=v.UPLOADING,t.uploadQueue.push(n),l.label=2;case 2:return l.trys.push([2,7,,8]),n.multipleFileUploadInfo?(i=n.multipleFileUploadInfo,s=i.uploadIndex,a=i.uploadCount,u=n.params,[4,this._uploadNextFileForMultipleFilesItemAndUpdateParams(e,n,u)]):[3,4];case 3:return l.sent(),n.state=s<a-1?v.PENDING:v.UPLOADED,[3,6];case 4:return u=n.params,[4,this._uploadNextFileForSingleFileItemAndUpdateParams(e,n,u)];case 5:l.sent(),n.state=v.UPLOADED,l.label=6;case 6:return[3,8];case 7:switch((c=l.sent()).code){case o.rb.REQUEST_FAILED:n.error=new o.fc({code:o.rb.NETWORK_ERROR,message:"Failed to upload a file."});break;case o.rb.REQUEST_CANCELED:n.error=o.fc.fileUploadCanceled;break;default:n.error=c}return n.state=v.FAILED,[3,8];case 8:this._dequeueUploadItem(t,n),l.label=9;case 9:return[2]}}))}))},e.prototype._dequeueUploadItem=function(e,t){var n=e.uploadQueue.findIndex((function(e){return e.requestId===t.requestId}));n>=0&&e.uploadQueue.splice(n,1)},e.prototype._uploadNextFileForSingleFileItemAndUpdateParams=function(e,t,n){var r,i,u;return Object(o.Gb)(this,void 0,void 0,(function(){var c,l,h,d,f,p,m,g,b,v;return Object(o.Rb)(this,(function(o){switch(o.label){case 0:return c=new s({file:n.file,channelUrl:e.url,thumbnailSizes:n.thumbnailSizes,requestId:t.requestId}),[4,this._requestQueue.send(c)];case 1:return l=o.sent(),h=l.as(a),d=h.url,f=h.fileSize,p=void 0===f?n.fileSize:f,m=h.thumbnailSizes,g=void 0===m?n.thumbnailSizes:m,b=h.requireAuth,v=void 0!==b&&b,n.fileName=null!==(r=n.fileName)&&void 0!==r?r:n.file.name,n.mimeType=null!==(i=n.mimeType)&&void 0!==i?i:n.file.type,n.fileSize=null!==(u=n.fileSize)&&void 0!==u?u:n.file.size,n.fileUrl=d,n.fileSize=p,n.thumbnailSizes=g,n.requireAuth=v,[2]}}))}))},e.prototype._uploadNextFileForMultipleFilesItemAndUpdateParams=function(e,t,n){var r,i,u;return Object(o.Gb)(this,void 0,void 0,(function(){var c,l,h,d,f,p,m,g,b,v,y,_;return Object(o.Rb)(this,(function(w){switch(w.label){case 0:return c=t.multipleFileUploadInfo.uploadIndex,l=n.fileInfoList[c],h=new s({file:l.file,channelUrl:e.url,thumbnailSizes:l.thumbnailSizes,requestId:t.requestId}),[4,this._requestQueue.send(h)];case 1:return d=w.sent(),f=d.as(a),p=f.url,m=f.fileSize,g=void 0===m?l.fileSize:m,b=f.thumbnailSizes,v=void 0===b?l.thumbnailSizes:b,y=f.requireAuth,_=void 0!==y&&y,l.fileName=null!==(r=l.fileName)&&void 0!==r?r:l.file.name,l.mimeType=null!==(i=l.mimeType)&&void 0!==i?i:l.file.type,l.fileSize=null!==(u=l.fileSize)&&void 0!==u?u:l.file.size,l.file=void 0,l.fileUrl=p,l.fileSize=g,l.thumbnailSizes=v,l._uploadedMetaData=Object(o.Vb)(Object(o.Vb)({},l._uploadedMetaData),{requireAuth:_,isUploaded:!0}),[2]}}))}))},e.prototype.request=function(e,t,n,r){return void 0===r&&(r={}),Object(o.Gb)(this,void 0,void 0,(function(){var i,s,a,u,c;return Object(o.Rb)(this,(function(l){return this._queueMap.has(e.url)||(i={messageQueue:[],uploadQueue:[],isResolving:!1,isResolveRequestPending:!1},this._queueMap.set(e.url,i)),s=this._queueMap.get(e.url),a=new o.tb,u={requestId:t,params:n,state:v.PENDING,deferred:a},function(e){return"fileInfoList"in e}(n)&&(c=Object(o.Vb)({uploadIndex:0,uploadCount:n.fileInfoList.length},r),u.multipleFileUploadInfo=c),s.messageQueue.push(u),this._uploadNextPendingItem(e),[2,a.promise]}))}))},e.prototype.cancel=function(e,t){var n,r,i=this._queueMap.get(e.url);if(i){var s=t?[i.messageQueue.find((function(e){return e.requestId===t}))]:Object(o.dc)([],Object(o.ec)(i.messageQueue),!1);try{for(var a=Object(o.gc)(s),u=a.next();!u.done;u=a.next()){var c=u.value;if(c)switch(c.state){case v.PENDING:if(c.state=v.FAILED,c.error=o.fc.requestCanceled,c.multipleFileUploadInfo&&!c.multipleFileUploadInfo.isCopy){var l=c.multipleFileUploadInfo,h=l.uploadIndex,d=l.requestHandler,f=c.params.fileInfoList[h];null==d||d._triggerOnFileUploaded(c.requestId,h,f,o.fc.fileUploadCanceled)}this._resolveMessageQueue(e);break;case v.UPLOADING:this._requestQueue.cancel(c.requestId)}}}catch(e){n={error:e}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}},e}(),B={prevResultSize:0,nextResultSize:0,isInclusive:!1,reverse:!1,messageTypeFilter:o.lb.ALL,customTypesFilter:void 0,senderUserIdsFilter:void 0,replyType:o.ub.NONE,includeReactions:!1,includeMetaArray:!1,includeParentMessageInfo:!1,includeThreadInfo:!1,showSubchannelMessagesOnly:!1},H=function(e){return Object(o.B)("number",e.prevResultSize)&&Object(o.B)("number",e.nextResultSize)&&Object(o.B)("boolean",e.isInclusive)&&Object(o.B)("boolean",e.reverse)&&Object(o.B)("string",e.messageTypeFilter)&&Object(o.q)(o.lb,e.messageTypeFilter)&&Object(o.k)("string",e.customTypesFilter,!0)&&Object(o.k)("string",e.senderUserIdsFilter,!0)&&Object(o.q)(o.ub,e.replyType)&&Object(o.B)("boolean",e.includeMetaArray)&&Object(o.B)("boolean",e.includeReactions)&&Object(o.B)("boolean",e.includeParentMessageInfo)&&Object(o.B)("boolean",e.includeThreadInfo)&&Object(o.B)("boolean",e.showSubchannelMessagesOnly)},q={replyType:o.ub.NONE,includeReactions:!1,includeThreadInfo:!1,includeMetaArray:!1,includeParentMessageInfo:!1},V=function(e){return Object(o.q)(o.ub,e.replyType)&&Object(o.B)("boolean",e.includeReactions)&&Object(o.B)("boolean",e.includeMetaArray)&&Object(o.B)("boolean",e.includeParentMessageInfo)&&Object(o.B)("boolean",e.includeThreadInfo)},G=function(e){function t(t){var n=t.channelType,r=t.channelUrl,i=t.messageId,s=t.includeMetaArray,a=t.includeReactions,u=t.includeThreadInfo,c=t.includeParentMessageInfo,l=e.call(this)||this;return l.method=o.a.GET,l.path="".concat(Object(o.pb)(n),"/").concat(encodeURIComponent(r),"/messages/").concat(encodeURIComponent(i)),l.params={is_sdk:!0,with_sorted_meta_array:s,include_reactions:a,include_thread_info:u,include_parent_message_info:c,include_poll_details:!0},l}return Object(o.A)(t,e),t}(o.Ub),z=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.message=n?j(t,Object(o.Vb)({},n)):null,r}return Object(o.A)(t,e),t}(o.Wb),W=function(e){function t(t){var n=t.channelType,r=t.channelUrl,i=t.timestamp,s=t.token,a=t.prevResultSize,u=t.nextResultSize,c=t.isInclusive,l=t.reverse,h=t.messageTypeFilter,d=t.customTypesFilter,f=t.senderUserIdsFilter,p=t.replyType,m=t.includeMetaArray,g=t.includeReactions,b=t.parentMessageId,v=t.includeThreadInfo,y=t.includeParentMessageInfo,_=t.showSubchannelMessagesOnly,w=t.checkingContinuousMessages,E=e.call(this)||this;return E.method=o.a.GET,E.path="".concat(Object(o.pb)(n),"/").concat(encodeURIComponent(r),"/messages"),E.params=Object(o.Tb)(Object(o.jc)({is_sdk:!0,prev_limit:a,next_limit:u,include:c,reverse:l,message_ts:i,message_id:s,message_type:null!=h?h:null,custom_types:d,sender_ids:f,include_reply_type:p,with_sorted_meta_array:m,include_reactions:g,parent_message_id:b,include_thread_info:v,include_parent_message_info:y,show_subchannel_message_only:_,include_poll_details:!0,checking_continuous_messages:w})),E}return Object(o.A)(t,e),t}(o.Ub),K=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.messages=n.messages.map((function(e){return j(t,e)})),r}return Object(o.A)(t,e),t}(o.Wb),Y=function(e){function t(t){var n=t.channelType,r=t.channelUrl,i=t.timestamp,s=t.token,a=t.replyType,u=t.includeMetaArray,c=t.includeReactions,l=t.includeThreadInfo,h=t.includeParentMessageInfo,d=e.call(this)||this;return d.method=o.a.GET,d.path="".concat(Object(o.pb)(n),"/").concat(encodeURIComponent(r),"/messages/changelogs"),d.params={change_ts:i,token:s,with_sorted_meta_array:u,include_reactions:c,include_thread_info:l,include_reply_type:a,include_parent_message_info:h,include_poll_details:!0},d}return Object(o.A)(t,e),t}(o.Ub),Q=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.updatedMessages=n.updated.map((function(e){return j(t,e)})),r.deletedMessagesInfo=n.deleted.map((function(e){return{messageId:e.message_id,deletedAt:e.deleted_at}})),r.hasMore=n.has_more,r.nextToken=n.next,r}return Object(o.A)(t,e),t}(o.Wb),J=function(e){function t(t){var n=t.channelUrl,r=t.scheduledMessageId,i=e.call(this)||this;return i.method=o.a.GET,i.path="".concat(o.vb,"/").concat(encodeURIComponent(n),"/scheduled_messages/").concat(encodeURIComponent(r)),i.params={},i}return Object(o.A)(t,e),t}(o.Ub),Z=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.message=n?j(t,Object(o.Vb)({},n)):null,r}return Object(o.A)(t,e),t}(o.Wb);!function(e){e.MUTED="muted",e.BANNED="banned"}(L||(L={}));var $=function(){function e(e){var t,n,r,i;this.restrictionType=null,Object(o.q)(L,e.restriction_type)&&(this.restrictionType=e.restriction_type),this.description=null!==(t=e.description)&&void 0!==t?t:null,this.endAt=null!==(r=null!==(n=e.end_at)&&void 0!==n?n:e.muted_end_at)&&void 0!==r?r:-1,this.remainingDuration=null!==(i=e.remaining_duration)&&void 0!==i?i:-1}return e.payloadify=function(e){return Object(o.Tb)(Object(o.jc)({restriction_type:e.restrictionType,description:e.description,end_at:e.endAt,remaining_duration:e.remainingDuration}))},e}(),X=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.restrictionInfo=new $(n),r}return Object(o.A)(t,e),t.payloadify=function(t){return Object(o.Tb)(Object(o.jc)(Object(o.Vb)(Object(o.Vb)({},e.payloadify.call(this,t)),$.payloadify(t.restrictionInfo))))},t}(o.u),ee=function(e){function t(t,n){var r,i=this;return(i=e.call(this,t,n)||this).isMuted=!1,i.isMuted=null!==(r=n.is_muted)&&void 0!==r&&r,i}return Object(o.A)(t,e),t}(o.u),te=function(){function e(){this._onPending=o.wb,this._onFailed=o.wb,this._onSucceeded=o.wb}return e.prototype._trigger=function(e){switch(null==e?void 0:e.sendingStatus){case o.jb.PENDING:0===e.errorCode&&this._onPending(e);break;case o.jb.SCHEDULED:case o.jb.SUCCEEDED:this._onSucceeded(e)}},e.prototype._triggerFailed=function(e,t){switch(null==t?void 0:t.sendingStatus){case o.jb.FAILED:case o.jb.CANCELED:this._onFailed(e,t.scheduledInfo?null:t)}},e.prototype.onPending=function(e){return this._onPending=e,this},e.prototype.onFailed=function(e){return this._onFailed=e,this},e.prototype.onSucceeded=function(e){return this._onSucceeded=e,this},e}(),ne={data:void 0,customType:void 0,mentionType:o.ib.USERS,mentionedUserIds:void 0,mentionedUsers:void 0,mentionedMessageTemplate:void 0,metaArrays:void 0,parentMessageId:void 0,isReplyToChannel:!1,pushNotificationDeliveryOption:void 0,appleCriticalAlertOptions:void 0,isPinnedMessage:!1},re=function(e){return Object(o.B)("string",e.data,!0)&&Object(o.B)("string",e.customType,!0)&&Object(o.q)(o.ib,e.mentionType)&&Object(o.k)("string",e.mentionedUserIds,!0)&&Object(o.k)(o.u,e.mentionedUsers,!0)&&Object(o.B)("string",e.mentionedMessageTemplate,!0)&&Object(o.k)(f,e.metaArrays,!0)&&Object(o.B)("number",e.parentMessageId,!0)&&Object(o.B)("boolean",e.isReplyToChannel)&&Object(o.q)(o.nb,e.pushNotificationDeliveryOption,!0)&&Object(o.B)(g,e.appleCriticalAlertOptions,!0)&&Object(o.B)("boolean",e.isPinnedMessage,!0)},ie=function(e){return{isReplyToChannel:e.isReplyToChannel,pushNotificationDeliveryOption:e.pushNotificationDeliveryOption,pollId:e.pollId}},oe=Object(o.Vb)(Object(o.Vb)({},ne),{message:"",translationTargetLanguages:void 0,pollId:void 0});function se(e){var t,n,r;return null!==(t=e.messageParams)&&void 0!==t?t:Object(o.jc)(Object(o.Vb)(Object(o.Vb)({},e),{mentionType:e.mentionType,mentionedUserIds:null!==(n=e.mentionedUserIds)&&void 0!==n?n:null===(r=e.mentionedUsers)||void 0===r?void 0:r.map((function(e){return e.userId})),translationTargetLanguages:Object.keys(e.translations),pushNotificationDeliveryOption:o.nb.DEFAULT,parentMessageId:null,isReplyToChannel:!1,isPinnedMessage:!1}))}var ae,ue=function(e){var t;return Object(o.Tb)(Object(o.jc)({data:e.data,customType:e.customType,mentionType:e.mentionType,mentionedUsers:e.mentionedUsers,mentionedUserIds:e.mentionedUserIds,mentionedMessageTemplate:e.mentionedMessageTemplate,metaArrays:e.metaArrays,pollId:null===(t=e.poll)||void 0===t?void 0:t.id,parentMessageId:e.parentMessageId,appleCriticalAlertOptions:e.appleCriticalAlertOptions,message:e.message,translationTargetLanguages:Object.keys(e.translations)}))},ce=function(e){return re(e)&&Object(o.B)("string",e.message)&&Object(o.k)("string",e.translationTargetLanguages,!0)&&Object(o.B)("number",e.pollId,!0)};!function(e){e.FILE="file",e.BLOB="blob",e.BLOB_LIKE_OBJECT="blobLikeObject",e.URL="url"}(ae||(ae={}));var le=function(e){return"undefined"!=typeof window&&"Blob"in window&&"undefined"!=typeof Blob&&e instanceof Blob},he=function(e){return e===ae.BLOB||e===ae.FILE},de=function(e){return{file:e.file,fileKey:e.fileKey,fileType:e.fileType,isReplyToChannel:e.isReplyToChannel,pushNotificationDeliveryOption:e.pushNotificationDeliveryOption}},fe=Object(o.Vb)(Object(o.Vb)({},ne),{file:void 0,fileKey:void 0,fileUrl:void 0,fileName:void 0,fileType:void 0,fileSize:void 0,mimeType:void 0,thumbnailSizes:void 0,requireAuth:!1});function pe(e){var t,n,r,i;return null!==(t=e.messageParams)&&void 0!==t?t:Object(o.jc)(Object(o.Vb)(Object(o.Vb)({},e),{fileUrl:e.plainUrl,fileName:e.name,fileSize:e.size,mimeType:e.type,mentionType:e.mentionType,mentionedUserIds:null!==(n=e.mentionedUserIds)&&void 0!==n?n:null===(r=e.mentionedUsers)||void 0===r?void 0:r.map((function(e){return e.userId})),pushNotificationDeliveryOption:o.nb.DEFAULT,parentMessageId:null,isReplyToChannel:!1,thumbnailSizes:null===(i=e.thumbnails)||void 0===i?void 0:i.map((function(e){return{maxWidth:e.width,maxHeight:e.height}})),requireAuth:e.requireAuth,isPinnedMessage:!1}))}var me,ge=function(e,t){var n;return e.messageParams?(!e.url&&Object(o.Xb)(t)&&(e.messageParams.file=t),e.messageParams):Object(o.Tb)(Object(o.jc)({data:e.data,customType:e.customType,mentionType:e.mentionType,mentionedUsers:e.mentionedUsers,mentionedUserIds:e.mentionedUserIds,metaArrays:e.metaArrays,parentMessageId:e.parentMessageId,appleCriticalAlertOptions:e.appleCriticalAlertOptions,file:t,fileUrl:e.url,fileName:e.name,fileSize:e.size,mimeType:e.type,thumbnailSizes:null===(n=e.thumbnails)||void 0===n?void 0:n.map((function(e){return{maxWidth:e.width,maxHeight:e.height}}))}))},be=function(e){return re(e)&&(Object(o.Xb)(e.file)||Object(o.B)("string",e.fileUrl))&&Object(o.B)("string",e.fileName,!0)&&Object(o.B)("string",e.mimeType,!0)&&Object(o.B)("number",e.fileSize,!0)&&(null===e.thumbnailSizes||void 0===e.thumbnailSizes||Array.isArray(e.thumbnailSizes)&&e.thumbnailSizes.every((function(e){return Object(o.B)("object",e)&&e.maxWidth>0&&e.maxHeight>0})))},ve={data:void 0,customType:void 0,mentionType:o.ib.USERS,mentionedUserIds:void 0,mentionedUsers:void 0,mentionedMessageTemplate:void 0,metaArrays:void 0,pushNotificationDeliveryOption:void 0,appleCriticalAlertOptions:void 0},ye=function(e){return Object(o.B)("string",e.data,!0)&&Object(o.B)("string",e.customType,!0)&&Object(o.q)(o.ib,e.mentionType)&&Object(o.k)("string",e.mentionedUserIds,!0)&&Object(o.k)(o.u,e.mentionedUsers,!0)&&Object(o.B)("string",e.mentionedMessageTemplate,!0)&&Object(o.k)(f,e.metaArrays,!0)&&Object(o.q)(o.nb,e.pushNotificationDeliveryOption,!0)&&Object(o.B)(g,e.appleCriticalAlertOptions,!0)},_e=Object(o.Vb)(Object(o.Vb)({},ve),{message:void 0,translationTargetLanguages:void 0,pollId:void 0}),we=function(e){return ye(e)&&Object(o.B)("string",e.message,!0)&&Object(o.k)("string",e.translationTargetLanguages,!0)&&Object(o.B)("number",e.pollId,!0)},Ee=Object(o.Vb)({},ve),Se=function(e){function t(t){var n=t.channelUrl,r=t.channelType,i=t.token,s=t.limit,a=e.call(this)||this;return a.method=o.a.GET,a.path="".concat(Object(o.pb)(r),"/").concat(encodeURIComponent(n),"/operators"),a.params={token:i,limit:s},a}return Object(o.A)(t,e),t}(o.Ub),Me=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.operators=n.operators.map((function(e){return new o.u(t,e)})),r.token=n.next,r}return Object(o.A)(t,e),t}(o.Wb),Oe=function(e){function t(t,n,r,i){return e.call(this,t,n,r,i)||this}return Object(o.A)(t,e),t.prototype._validate=function(){return e.prototype._validate.call(this)},t.prototype.next=function(){return Object(o.Gb)(this,void 0,void 0,(function(){var e,t,n,r,i,s,a;return Object(o.Rb)(this,(function(u){switch(u.label){case 0:return this._validate()?this._isLoading?[3,3]:(e=[],this._hasNext?(this._isLoading=!0,t=o.v.of(this._iid).requestQueue,n=new Se(Object(o.Vb)(Object(o.Vb)({},this),{channelUrl:this.channelUrl,token:this._token})),[4,t.send(n)]):[3,2]):[3,5];case 1:return r=u.sent(),i=r.as(Me),s=i.operators,a=i.token,this._token=a,this._hasNext=!!a,this._isLoading=!1,[2,s];case 2:return[2,e];case 3:throw o.fc.queryInProgress;case 4:return[3,6];case 5:throw o.fc.invalidParameters;case 6:return[2]}}))}))},t}(o.xb),Ae=function(e){function t(t,n,r,i){var s,a,u,c,l,h,d,f,p,m,g=this;return(g=e.call(this,t,n,r,i)||this).reverse=!1,g.messageTypeFilter=o.lb.ALL,g.customTypesFilter=null,g.senderUserIdsFilter=null,g.replyType=o.ub.NONE,g.includeMetaArray=!1,g.includeReactions=!1,g.includeParentMessageInfo=!1,g.includeThreadInfo=!1,g.showSubchannelMessagesOnly=!1,g._edge=Number.MAX_SAFE_INTEGER,g.reverse=null!==(s=i.reverse)&&void 0!==s&&s,g.messageTypeFilter=null!==(a=i.messageTypeFilter)&&void 0!==a?a:o.lb.ALL,g.customTypesFilter=null!==(u=i.customTypesFilter)&&void 0!==u?u:null,g.senderUserIdsFilter=null!==(c=i.senderUserIdsFilter)&&void 0!==c?c:null,g.replyType=null!==(l=i.replyType)&&void 0!==l?l:o.ub.NONE,g.includeMetaArray=null!==(h=i.includeMetaArray)&&void 0!==h&&h,g.includeReactions=null!==(d=i.includeReactions)&&void 0!==d&&d,g.includeParentMessageInfo=null!==(f=i.includeParentMessageInfo)&&void 0!==f&&f,g.includeThreadInfo=null!==(p=i.includeThreadInfo)&&void 0!==p&&p,g.showSubchannelMessagesOnly=null!==(m=i.showSubchannelMessagesOnly)&&void 0!==m&&m,g}return Object(o.A)(t,e),t.prototype._validate=function(){return e.prototype._validate.call(this)&&Object(o.B)("boolean",this.reverse)&&Object(o.q)(o.lb,this.messageTypeFilter)&&Object(o.q)(o.ub,this.replyType)&&Object(o.k)("string",this.customTypesFilter,!0)&&Object(o.k)("string",this.senderUserIdsFilter,!0)&&Object(o.B)("boolean",this.includeMetaArray)&&Object(o.B)("boolean",this.includeReactions)&&Object(o.B)("boolean",this.includeParentMessageInfo)&&Object(o.B)("boolean",this.includeThreadInfo)&&Object(o.B)("boolean",this.showSubchannelMessagesOnly)},t.prototype.load=function(){return Object(o.Gb)(this,void 0,void 0,(function(){var e;return Object(o.Rb)(this,(function(t){switch(t.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,[4,Br.of(this._iid).getMessagesByTimestamp(this.channelUrl,this.channelType,this._edge,Object(o.jc)({prevResultSize:this.limit,nextResultSize:0,isInclusive:!1,reverse:this.reverse,messageTypeFilter:this.messageTypeFilter,customTypesFilter:this.customTypesFilter,replyType:this.replyType,senderUserIdsFilter:this.senderUserIdsFilter,includeReactions:this.includeReactions,includeMetaArray:this.includeMetaArray,includeParentMessageInfo:this.includeParentMessageInfo,includeThreadInfo:this.includeThreadInfo,showSubchannelMessagesOnly:this.showSubchannelMessagesOnly}))]):[3,2]:[3,5];case 1:return e=t.sent(),this._edge=Math.min.apply(Math,Object(o.dc)([Number.MAX_SAFE_INTEGER],Object(o.ec)(e.map((function(e){return e.createdAt}))),!1)),this._hasNext=e.length>=this.limit,this._isLoading=!1,[2,e];case 2:return[2,[]];case 3:throw o.fc.queryInProgress;case 4:return[3,6];case 5:throw o.fc.invalidParameters;case 6:return[2]}}))}))},t}(o.xb),Ce=function(e){function t(t){var n=this,r=t.channelUrl,i=t.channelType,s=t.limit,a=t.token;return(n=e.call(this)||this).method=o.a.GET,n.path="".concat(Object(o.pb)(i),"/").concat(encodeURIComponent(r),"/mute"),n.params={limit:s,token:a},n}return Object(o.A)(t,e),t}(o.Ub),Te=function(e){function t(t,n){var r=e.call(this,t,n)||this;r.mutedUsers=[];var i=n.next,o=n.muted_list;return r.token=i,o&&o.length>0&&(r.mutedUsers=o.map((function(e){return new X(t,e)}))),r}return Object(o.A)(t,e),t}(o.Wb),ke=function(e){function t(t,n,r,i){return e.call(this,t,n,r,i)||this}return Object(o.A)(t,e),t.prototype.next=function(){return Object(o.Gb)(this,void 0,void 0,(function(){var e,t,n,r,i,s;return Object(o.Rb)(this,(function(a){switch(a.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,e=o.v.of(this._iid).requestQueue,t=new Ce(Object(o.Vb)(Object(o.Vb)({},this),{token:this._token})),[4,e.send(t)]):[3,2]:[3,5];case 1:return n=a.sent(),r=n.as(Te),i=r.mutedUsers,s=r.token,this._token=s,this._hasNext=!!s,this._isLoading=!1,[2,i];case 2:return[2,[]];case 3:throw o.fc.queryInProgress;case 4:return[3,6];case 5:throw o.fc.invalidParameters;case 6:return[2]}}))}))},t}(o.xb),xe=function(e){function t(t){var n=this,r=t.channelUrl,i=t.channelType,s=t.limit,a=t.token;return(n=e.call(this)||this).method=o.a.GET,n.path="".concat(Object(o.pb)(i),"/").concat(encodeURIComponent(r),"/ban"),n.params=Object(o.Tb)({limit:s,token:a}),n}return Object(o.A)(t,e),t}(o.Ub),je=function(e){function t(t,n){var r=e.call(this,t,n)||this;r.bannedUsers=[];var i=n.next,o=n.banned_list;return r.token=i,o&&o.length>0&&(r.bannedUsers=o.map((function(e){return new X(t,e.user)}))),r}return Object(o.A)(t,e),t}(o.Wb),Ie=function(e){function t(t,n,r,i){return e.call(this,t,n,r,i)||this}return Object(o.A)(t,e),t.prototype._validate=function(){return e.prototype._validate.call(this)},t.prototype.next=function(){return Object(o.Gb)(this,void 0,void 0,(function(){var e,t,n,r,i,s;return Object(o.Rb)(this,(function(a){switch(a.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,e=o.v.of(this._iid).requestQueue,t=new xe(Object(o.Vb)(Object(o.Vb)({},this),{token:this._token})),[4,e.send(t)]):[3,2]:[3,5];case 1:return n=a.sent(),r=n.as(je),i=r.bannedUsers,s=r.token,this._token=s,this._hasNext=!!s,this._isLoading=!1,[2,i];case 2:return[2,[]];case 3:throw o.fc.queryInProgress;case 4:return[3,6];case 5:throw o.fc.invalidParameters;case 6:return[2]}}))}))},t}(o.xb);!function(e){e.SPAM="spam",e.HARASSING="harassing",e.SUSPICIOUS="suspicious",e.INAPPROPRIATE="inappropriate"}(me||(me={}));var Re,Ne=function(e){function t(t){var n=this,r=t.channelUrl,i=t.channelType,s=t.operatorUserIds;return(n=e.call(this)||this).method=o.a.POST,n.path="".concat(Object(o.pb)(i),"/").concat(encodeURIComponent(r),"/operators"),n.params={operator_ids:s},n}return Object(o.A)(t,e),t}(o.Ub);Re=o.Wb,Object(o.A)((function(){return null!==Re&&Re.apply(this,arguments)||this}),Re);var Pe=function(e){function t(t){var n=this,r=t.channelUrl,i=t.channelType,s=t.operatorUserIds;return(n=e.call(this)||this).method=o.a.DELETE,n.path="".concat(Object(o.pb)(i),"/").concat(encodeURIComponent(r),"/operators"),n.params={operator_ids:s},n}return Object(o.A)(t,e),t}(o.Ub);!function(e){Object(o.A)((function(t,n){return e.call(this,t,n)||this}),e)}(o.Wb);var De=function(e){function t(t){var n=this,r=t.channelUrl,i=t.channelType,s=t.userId;return(n=e.call(this)||this).method=o.a.GET,n.path="".concat(Object(o.pb)(i),"/").concat(encodeURIComponent(r),"/mute/").concat(s),n}return Object(o.A)(t,e),t}(o.Ub),Ue=function(e){function t(t,n){var r=e.call(this,t,n)||this;r.isMuted=!1,r.startAt=0,r.endAt=0;var i=n.is_muted,o=n.start_at,s=n.end_at,a=n.remaining_duration,u=n.description;return r.isMuted=i,r.startAt=o,r.endAt=s,r.remainingDuration=a,r.description=u,r}return Object(o.A)(t,e),t}(o.Wb),Le=function(e){function t(t){var n=this,r=t.channelUrl,i=t.channelType,s=t.keys;return(n=e.call(this)||this).method=o.a.GET,n.path="".concat(Object(o.pb)(i),"/").concat(encodeURIComponent(r),"/metadata"),n.params={keys:s,include_ts:!0},n}return Object(o.A)(t,e),t}(o.Ub),Fe=function(e){function t(t,n){var r=e.call(this,t,n)||this,i=n.metadata,o=n.ts;return r.metadata=i,r.ts=o,r}return Object(o.A)(t,e),t}(o.Wb),Be=function(e){function t(t){var n=this,r=t.channelUrl,i=t.channelType,s=t.metadata;return(n=e.call(this)||this).method=o.a.POST,n.path="".concat(Object(o.pb)(i),"/").concat(encodeURIComponent(r),"/metadata"),n.params={metadata:s,include_ts:!0},n}return Object(o.A)(t,e),t}(o.Ub),He=function(e){function t(t,n){var r,i,o=this;return(o=e.call(this,t,n)||this).metaData=null!==(r=n.metadata)&&void 0!==r?r:{},o.ts=null!==(i=n.ts)&&void 0!==i?i:null,o}return Object(o.A)(t,e),t}(o.Wb),qe=function(e){function t(t){var n=this,r=t.channelUrl,i=t.channelType,s=t.metadata,a=t.upsert;return(n=e.call(this)||this).method=o.a.PUT,n.path="".concat(Object(o.pb)(i),"/").concat(encodeURIComponent(r),"/metadata"),n.params={metadata:s,include_ts:!0,upsert:null!=a&&a},n}return Object(o.A)(t,e),t}(o.Ub),Ve=function(e){function t(t,n){var r=e.call(this,t,n)||this,i=n.metadata,o=n.ts;return r.metadata=i,r.ts=o,r}return Object(o.A)(t,e),t}(o.Wb),Ge=function(e){function t(t,n,r){var i=e.call(this,t,"SYEV",r)||this;return r.data&&(i.created=r.data.created,i.updated=r.data.updated,i.deleted=r.data.deleted),i}return Object(o.A)(t,e),t}(o.w),ze=function(e){function t(t){var n=this,r=t.channelUrl,i=t.channelType,s=t.key;return(n=e.call(this)||this).method=o.a.DELETE,n.path="".concat(Object(o.pb)(i),"/").concat(encodeURIComponent(r),"/metadata/").concat(s),n.params={include_ts:!0},n}return Object(o.A)(t,e),t}(o.Ub),We=function(e){function t(t,n){var r=e.call(this,t,n)||this,i=n.ts;return r.ts=i,r}return Object(o.A)(t,e),t}(o.Wb),Ke=function(e){function t(t){var n=this,r=t.channelUrl,i=t.channelType;return(n=e.call(this)||this).method=o.a.DELETE,n.path="".concat(Object(o.pb)(i),"/").concat(encodeURIComponent(r),"/metadata"),n.params={include_ts:!0},n}return Object(o.A)(t,e),t}(o.Ub),Ye=function(e){function t(t,n){var r=e.call(this,t,n)||this,i=n.ts;return r.ts=i,r}return Object(o.A)(t,e),t}(o.Wb),Qe=function(e){function t(t){var n=this,r=t.channelUrl,i=t.channelType,s=t.keys;return(n=e.call(this)||this).method=o.a.GET,n.path="".concat(Object(o.pb)(i),"/").concat(encodeURIComponent(r),"/metacounter"),n.params={keys:s},n}return Object(o.A)(t,e),t}(o.Ub),Je=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.metaCounter=n,r}return Object(o.A)(t,e),t}(o.Wb),Ze=function(e){function t(t){var n=this,r=t.channelUrl,i=t.channelType,s=t.metaCounter;return(n=e.call(this)||this).method=o.a.POST,n.path="".concat(Object(o.pb)(i),"/").concat(encodeURIComponent(r),"/metacounter"),n.params={metacounter:s},n}return Object(o.A)(t,e),t}(o.Ub),$e=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.metaCounter=n,r}return Object(o.A)(t,e),t}(o.Wb),Xe=function(e){function t(t){var n=this,r=t.channelUrl,i=t.channelType,s=t.metaCounter,a=t.upsert,u=void 0!==a&&a,c=t.mode,l=void 0===c?"set":c;return(n=e.call(this)||this).method=o.a.PUT,n.path="".concat(Object(o.pb)(i),"/").concat(encodeURIComponent(r),"/metacounter"),n.params={metacounter:s,upsert:u,mode:l},n}return Object(o.A)(t,e),t}(o.Ub),et=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.metaCounter=n,r}return Object(o.A)(t,e),t}(o.Wb),tt=function(e){function t(t,n,r){var i=e.call(this,t,"SYEV",r)||this;return r.data&&(i.created=r.data.created,i.updated=r.data.updated,i.deleted=r.data.deleted),i}return Object(o.A)(t,e),t}(o.w),nt=function(e){function t(t){var n=this,r=t.channelUrl,i=t.channelType,s=t.key;return(n=e.call(this)||this).method=o.a.DELETE,n.path="".concat(Object(o.pb)(i),"/").concat(encodeURIComponent(r),"/metacounter/").concat(s),n.params={},n}return Object(o.A)(t,e),t}(o.Ub);!function(e){Object(o.A)((function(t,n){return e.call(this,t,n)||this}),e)}(o.Wb);var rt=function(e){function t(t){var n=this,r=t.channelUrl,i=t.channelType;return(n=e.call(this)||this).method=o.a.DELETE,n.path="".concat(Object(o.pb)(i),"/").concat(encodeURIComponent(r),"/metacounter"),n.params={},n}return Object(o.A)(t,e),t}(o.Ub);!function(e){Object(o.A)((function(){return null!==e&&e.apply(this,arguments)||this}),e)}(o.Wb);var it=function(e){function t(t){var n=this,r=t.channelUrl,i=t.channelType,s=t.userId,a=t.seconds,u=t.description;return(n=e.call(this)||this).method=o.a.POST,n.path="".concat(Object(o.pb)(i),"/").concat(encodeURIComponent(r),"/mute"),n.params={user_id:s,seconds:a,description:u},n}return Object(o.A)(t,e),t}(o.Ub);!function(e){Object(o.A)((function(t,n){return e.call(this,t,n)||this}),e)}(o.Wb);var ot=function(e){function t(t,n,r){var i=e.call(this,t,"SYEV",r)||this;return i.user=new X(t,r.data),i}return Object(o.A)(t,e),t}(o.w),st=function(e){function t(t){var n=this,r=t.channelUrl,i=t.channelType,s=t.userId;return(n=e.call(this)||this).method=o.a.DELETE,n.path="".concat(Object(o.pb)(i),"/").concat(encodeURIComponent(r),"/mute/").concat(encodeURIComponent(s)),n}return Object(o.A)(t,e),t}(o.Ub);!function(e){Object(o.A)((function(){return null!==e&&e.apply(this,arguments)||this}),e)}(o.Wb);var at=function(e){function t(t,n,r){var i=e.call(this,t,"SYEV",r)||this;return i.user=new X(t,r.data),i}return Object(o.A)(t,e),t}(o.w),ut=function(e){function t(t){var n=this,r=t.channelUrl,i=t.channelType,s=t.userId,a=t.seconds,u=t.description;return(n=e.call(this)||this).method=o.a.POST,n.path="".concat(Object(o.pb)(i),"/").concat(encodeURIComponent(r),"/ban"),n.params=Object(o.Tb)({user_id:s,seconds:a,description:u}),n}return Object(o.A)(t,e),t}(o.Ub);!function(e){Object(o.A)((function(){return null!==e&&e.apply(this,arguments)||this}),e)}(o.Wb);var ct=function(e){function t(t,n,r){var i=e.call(this,t,"SYEV",r)||this;return i.user=new X(t,r.data),r.data.member_count&&(i.memberCount=r.data.member_count),r.data.joined_member_count&&(i.joinedMemberCount=r.data.joined_member_count),i}return Object(o.A)(t,e),t}(o.w),lt=function(e){function t(t){var n=this,r=t.channelUrl,i=t.channelType,s=t.userId;return(n=e.call(this)||this).method=o.a.DELETE,n.path="".concat(Object(o.pb)(i),"/").concat(encodeURIComponent(r),"/ban/").concat(encodeURIComponent(s)),n}return Object(o.A)(t,e),t}(o.Ub);!function(e){Object(o.A)((function(){return null!==e&&e.apply(this,arguments)||this}),e)}(o.Wb);var ht=function(e){function t(t,n,r){var i=e.call(this,t,"SYEV",r)||this;return i.user=new X(t,r.data),i}return Object(o.A)(t,e),t}(o.w),dt=function(e){function t(t){var n=this,r=t.channelUrl,i=t.channelType,s=t.freezing;return(n=e.call(this)||this).method=o.a.PUT,n.path="".concat(Object(o.pb)(i),"/").concat(encodeURIComponent(r),"/freeze"),n.params={freeze:s},n}return Object(o.A)(t,e),t}(o.Ub);!function(e){Object(o.A)((function(){return null!==e&&e.apply(this,arguments)||this}),e)}(o.Wb);var ft=function(e){function t(t,n,r){var i=e.call(this,t,"SYEV",r)||this;return i.freeze=r.data.freeze,i}return Object(o.A)(t,e),t}(o.w),pt=function(e){function t(t){var n=this,r=t.channelUrl,i=t.channelType,s=t.category,a=t.userId,u=t.description;return(n=e.call(this)||this).method=o.a.POST,n.path="".concat(Object(o.yb)(i),"/").concat(encodeURIComponent(r)),n.params={report_category:s,reporting_user_id:a,report_description:u},n}return Object(o.A)(t,e),t}(o.Ub),mt=function(e){function t(t){var n=this,r=t.channelUrl,i=t.channelType,s=t.category,a=t.userId,u=t.offendingUserId,c=t.description;return(n=e.call(this)||this).method=o.a.POST,n.path="".concat(o.zb,"/users/").concat(u),n.params={channel_url:r,channel_type:i===o.y.OPEN?"open_channels":"group_channels",report_category:s,reporting_user_id:a,report_description:c},n}return Object(o.A)(t,e),t}(o.Ub),gt=function(e){function t(t){var n=this,r=t.channelUrl,i=t.channelType,s=t.category,a=t.userId,u=t.offendingUserId,c=t.messageId,l=t.description;return(n=e.call(this)||this).method=o.a.POST,n.path="".concat(Object(o.yb)(i),"/").concat(encodeURIComponent(r),"/messages/").concat(c),n.params={report_category:s,reporting_user_id:a,report_description:l,offending_user_id:u},n}return Object(o.A)(t,e),t}(o.Ub),bt=function(e){function t(t){var n=[];return t.mentionType===o.ib.USERS&&(t.mentionedUserIds?n=t.mentionedUserIds:t.mentionedUsers&&(n=t.mentionedUsers.map((function(e){return e.userId})))),e.call(this,{code:"MESG",ackRequired:!0,payload:Object(o.Tb)(Object(o.jc)({channel_url:t.channelUrl,message:t.message,data:t.data,custom_type:t.customType,metaarray:t.metaArrays,mention_type:t.mentionType,mentioned_user_ids:n,mentioned_message_template:t.mentionedMessageTemplate,target_langs:t.translationTargetLanguages,push_option:t.pushNotificationDeliveryOption&&t.pushNotificationDeliveryOption!==o.nb.DEFAULT?t.pushNotificationDeliveryOption:void 0,apple_critical_alert_options:t.appleCriticalAlertOptions,silent:t.silent,reply_to_channel:t.isReplyToChannel,parent_message_id:t.parentMessageId?t.parentMessageId:null,req_id:t.reqId,poll_id:t.pollId,pin_message:t.isPinnedMessage}))})||this}return Object(o.A)(t,e),t}(o.ob),vt=function(e){function t(t,n,r){var i,s,a,u,c=this;(c=e.call(this,t,"MESG",r)||this).message=new C(t,r);var l=o.v.of(t).sdkState;return c.isMentioned=Object(o.qb)(c.message.mentionType,null!==(a=null!==(i=c.message.mentionedUserIds)&&void 0!==i?i:null===(s=c.message.mentionedUsers)||void 0===s?void 0:s.map((function(e){return e.userId})))&&void 0!==a?a:[],l.userId),c.forceUpdateLastMessage=null!==(u=r.force_update_last_message)&&void 0!==u&&u,c}return Object(o.A)(t,e),t}(o.w),yt=function(e){function t(t){var n=null;return t.mentionType===o.ib.USERS&&(t.mentionedUserIds?n=t.mentionedUserIds:t.mentionedUsers&&(n=t.mentionedUsers.map((function(e){return e.userId})))),e.call(this,{code:"MEDI",ackRequired:!0,payload:Object(o.Tb)(Object(o.jc)({channel_url:t.channelUrl,msg_id:t.messageId,message:t.message,data:t.data,custom_type:t.customType,metaarray:t.metaArrayParams,mention_type:t.mentionType,mentioned_user_ids:n,mentioned_message_template:t.mentionedMessageTemplate,apple_critical_alert_options:t.appleCriticalAlertOptions?g.payloadify(t.appleCriticalAlertOptions):null,poll_id:t.pollId}))})||this}return Object(o.A)(t,e),t}(o.ob),_t=function(e){function t(t,n,r){var i,s,a,u,c,l=this;(l=e.call(this,t,"MEDI",r)||this).message=new C(t,r);var h=o.v.of(t).sdkState;return l.mentionCountChange=Object(o.Ab)({mentionType:null===(i=r.old_values)||void 0===i?void 0:i.mention_type,mentionedUserIds:null!==(a=null===(s=r.old_values)||void 0===s?void 0:s.mentioned_user_ids)&&void 0!==a?a:[]},Object(o.jc)({mentionType:l.message.mentionType,mentionedUserIds:null!==(u=l.message.mentionedUserIds)&&void 0!==u?u:null===(c=l.message.mentionedUsers)||void 0===c?void 0:c.map((function(e){return e.userId}))}),h.userId),l}return Object(o.A)(t,e),t}(o.w),wt=function(e){function t(t){var n=null;return t.mentionType===o.ib.USERS&&(t.mentionedUserIds?n=t.mentionedUserIds:t.mentionedUsers&&(n=t.mentionedUsers.map((function(e){return e.userId})))),e.call(this,{code:"FEDI",ackRequired:!0,payload:Object(o.Tb)(Object(o.jc)({channel_url:t.channelUrl,msg_id:t.messageId,data:t.data,custom_type:t.customType,metaarray:t.metaArrayParams,mention_type:t.mentionType,mentioned_user_ids:n,apple_critical_alert_options:t.appleCriticalAlertOptions}))})||this}return Object(o.A)(t,e),t}(o.ob),Et=function(e){function t(t,n,r){var i,s,a,u,c,l=this;(l=e.call(this,t,"FEDI",r)||this).message=new I(t,r);var h=o.v.of(t).sdkState;return l.mentionCountChange=Object(o.Ab)({mentionType:null===(i=r.old_values)||void 0===i?void 0:i.mention_type,mentionedUserIds:null!==(a=null===(s=r.old_values)||void 0===s?void 0:s.mentioned_user_ids)&&void 0!==a?a:[]},Object(o.jc)({mentionType:l.message.mentionType,mentionedUserIds:null!==(u=l.message.mentionedUserIds)&&void 0!==u?u:null===(c=l.message.mentionedUsers)||void 0===c?void 0:c.map((function(e){return e.userId}))}),h.userId),l}return Object(o.A)(t,e),t}(o.w),St=function(e){function t(t){var n=e.call(this)||this;return n.method=o.a.DELETE,n.path="".concat(Object(o.pb)(t.channelType),"/").concat(t.channelUrl,"/messages/").concat(t.messageId),n}return Object(o.A)(t,e),t}(o.Ub);!function(e){Object(o.A)((function(){return null!==e&&e.apply(this,arguments)||this}),e)}(o.Wb);var Mt=function(e){function t(t,n,r){var i=e.call(this,t,"DELM",r)||this;return i.channelUrl=r.channel_url,i.channelType=r.channel_type,i.messageId=Number(r.msg_id),i}return Object(o.A)(t,e),t}(o.w),Ot=function(e){function t(t){var n=t.channelType,r=t.channelUrl,i=t.messageId,s=t.reactionKey,a=e.call(this)||this;return a.method=o.a.POST,a.path="".concat(Object(o.pb)(n),"/").concat(encodeURIComponent(r),"/messages/").concat(i,"/reactions"),a.params={reaction:s},a}return Object(o.A)(t,e),t}(o.Ub),At=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.reactionEvent=new h(n),r}return Object(o.A)(t,e),t}(o.Wb),Ct=function(e){function t(t){var n=t.channelType,r=t.channelUrl,i=t.messageId,s=t.reactionKey,a=e.call(this)||this;return a.method=o.a.DELETE,a.path="".concat(Object(o.pb)(n),"/").concat(encodeURIComponent(r),"/messages/").concat(i,"/reactions"),a.params={reaction:s},a}return Object(o.A)(t,e),t}(o.Ub),Tt=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.reactionEvent=new h(Object(o.Vb)({},n)),r}return Object(o.A)(t,e),t}(o.Wb),kt=function(e){function t(t){var n=t.channelType,r=t.channelUrl,i=t.messageId,s=t.translationTargetLanguages,a=e.call(this)||this;return a.method=o.a.POST,a.path="".concat(Object(o.pb)(n),"/").concat(encodeURIComponent(r),"/messages/").concat(encodeURIComponent(i),"/translation"),a.params={target_langs:s},a}return Object(o.A)(t,e),t}(o.Ub),xt=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.message=new C(t,n),r}return Object(o.A)(t,e),t}(o.Wb),jt=function(e){function t(t){var n,r=this;r=e.call(this)||this;var i=[];t.mentionType===o.ib.USERS&&(t.mentionedUserIds?i=t.mentionedUserIds:t.mentionedUsers&&(i=t.mentionedUsers.map((function(e){return e.userId}))));var s=t.channelType,a=t.channelUrl;return r.method=o.a.POST,r.path="".concat(Object(o.pb)(s),"/").concat(encodeURIComponent(a),"/scheduled_messages"),r.params=Object(o.Tb)(Object(o.jc)({req_id:t.reqId,scheduled_at:t.scheduledAt,message_type:o.Bb.USER,message:t.message,custom_type:t.customType,data:t.data,mention_type:t.mentionType,mentioned_user_ids:i,sorted_metaarray:null===(n=t.metaArrays)||void 0===n?void 0:n.map((function(e){return f.payloadify(e)})),apple_critical_alert_options:t.appleCriticalAlertOptions?g.payloadify(t.appleCriticalAlertOptions):null,target_langs:t.translationTargetLanguages,push_option:t.pushNotificationDeliveryOption})),r}return Object(o.A)(t,e),t}(o.Ub),It=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.message=new C(t,n),r}return Object(o.A)(t,e),t}(o.Wb),Rt=function(e){function t(t){var n,r=this;r=e.call(this)||this;var i=[];t.mentionType===o.ib.USERS&&(t.mentionedUserIds?i=t.mentionedUserIds:t.mentionedUsers&&(i=t.mentionedUsers.map((function(e){return e.userId}))));var s=t.channelType,a=t.channelUrl;return r.method=o.a.POST,r.path="".concat(Object(o.pb)(s),"/").concat(encodeURIComponent(a),"/scheduled_messages"),r.params=Object(o.jc)({req_id:t.reqId,scheduled_at:t.scheduledAt,message_type:o.Bb.FILE,url:t.fileUrl,file_name:t.fileName,file_size:t.fileSize,file_type:t.mimeType,thumbnails:t.thumbnailSizes?t.thumbnailSizes.map((function(e){return E.payloadify(e)})):[],custom_type:t.customType,data:t.data,require_auth:t.requireAuth,mention_type:t.mentionType,mentioned_user_ids:i,sorted_metaarray:null===(n=t.metaArrays)||void 0===n?void 0:n.map((function(e){return f.payloadify(e)})),apple_critical_alert_options:t.appleCriticalAlertOptions?g.payloadify(t.appleCriticalAlertOptions):null,push_option:t.pushNotificationDeliveryOption}),r}return Object(o.A)(t,e),t}(o.Ub),Nt=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.message=new I(t,n),r}return Object(o.A)(t,e),t}(o.Wb),Pt=function(e){function t(t){var n=t.pollId,r=t.title,i=t.data,s=t.allowUserSuggestion,a=t.allowMultipleVotes,u=t.closeAt,c=e.call(this)||this;return c.method=o.a.PUT,c.path="".concat(o.Db,"/").concat(encodeURIComponent(n)),c.params={title:r,data:i,allow_user_suggestion:s,allow_multiple_votes:a,close_at:u},c}return Object(o.A)(t,e),t}(o.Ub),Dt=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.poll=new o.mb(t,n),r}return Object(o.A)(t,e),t}(o.Wb),Ut=function(e){function t(t){var n=t.pollId,r=e.call(this)||this;return r.method=o.a.DELETE,r.path="".concat(o.Db,"/").concat(encodeURIComponent(n)),r}return Object(o.A)(t,e),t}(o.Ub);!function(e){Object(o.A)((function(){return null!==e&&e.apply(this,arguments)||this}),e)}(o.Wb);var Lt=function(e){function t(t){var n=t.pollId,r=e.call(this)||this;return r.method=o.a.PUT,r.path="".concat(o.Db,"/").concat(encodeURIComponent(n),"/close"),r}return Object(o.A)(t,e),t}(o.Ub),Ft=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.poll=new o.mb(t,n),r}return Object(o.A)(t,e),t}(o.Wb),Bt=function(e){function t(t){var n=t.channelUrl,r=t.channelType,i=t.pollId,s=t.optionText,a=e.call(this)||this;return a.method=o.a.POST,a.path="".concat(o.Db,"/").concat(encodeURIComponent(i),"/options"),a.params={channel_url:n,channel_type:r,text:s},a}return Object(o.A)(t,e),t}(o.Ub),Ht=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.poll=new o.mb(t,n),r}return Object(o.A)(t,e),t}(o.Wb),qt=function(e){function t(t){var n=t.pollId,r=t.pollOptionId,i=t.optionText,s=e.call(this)||this;return s.method=o.a.PUT,s.path="".concat(o.Db,"/").concat(encodeURIComponent(n),"/options/").concat(encodeURIComponent(r)),s.params={text:i},s}return Object(o.A)(t,e),t}(o.Ub),Vt=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.poll=new o.mb(t,n),r}return Object(o.A)(t,e),t}(o.Wb),Gt=function(e){function t(t){var n=t.pollId,r=t.pollOptionId,i=e.call(this)||this;return i.method=o.a.DELETE,i.path="".concat(o.Db,"/").concat(encodeURIComponent(n),"/options/").concat(encodeURIComponent(r)),i}return Object(o.A)(t,e),t}(o.Ub);!function(e){Object(o.A)((function(){return null!==e&&e.apply(this,arguments)||this}),e)}(o.Wb);var zt=function(e){function t(t){var n=t.reqId,r=t.channelType,i=t.channelUrl,s=t.pollId,a=t.pollOptionIds;return e.call(this,{code:"VOTE",ackRequired:!0,payload:Object(o.Tb)({req_id:n,channel_type:r===o.y.OPEN?"open_channels":"group_channels",channel_url:i,poll_id:s,option_ids:a})})||this}return Object(o.A)(t,e),t}(o.ob),Wt=function(e){function t(t,n,r){var i=e.call(this,t,"VOTE",r)||this;return i.event=new o.Eb(r),i.channelUrl=r.channel_url,i.channelType=r.channel_type,i}return Object(o.A)(t,e),t}(o.w),Kt=100,Yt="GroupChannel",Qt="url",Jt=100,Zt="Message",$t="messageId",Xt="Poll",en="pollId",tn="FeedChannel",nn="url";function rn(e){var t,n,r;return null!==(t=e.messageParams)&&void 0!==t?t:Object(o.jc)(Object(o.Vb)(Object(o.Vb)({},e),{isReplyToChannel:!1,mentionedUserIds:null!==(n=e.mentionedUserIds)&&void 0!==n?n:null===(r=e.mentionedUsers)||void 0===r?void 0:r.map((function(e){return e.userId})),pushNotificationDeliveryOption:o.nb.DEFAULT,isPinnedMessage:!1,fileInfoList:e.fileInfoList.map((function(e){var t;return{fileUrl:e.plainUrl,fileName:e.fileName,fileSize:e.fileSize,mimeType:e.mimeType,thumbnailSizes:null===(t=e.thumbnails)||void 0===t?void 0:t.map((function(e){return{maxWidth:e.width,maxHeight:e.height}})),_uploadedMetaData:{requireAuth:e._requireAuth,isUploaded:!0}}}))}))}var on,sn=Object(o.Vb)(Object(o.Vb)({},ne),{fileInfoList:[]}),an=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._onFileUploaded=o.wb,t}return Object(o.A)(t,e),t.prototype._triggerOnFileUploaded=function(e,t,n,r){this._onFileUploaded(e,t,n,r)},t.prototype.onFileUploaded=function(e){return this._onFileUploaded=e,this},t.prototype.onPending=function(t){return e.prototype.onPending.call(this,t),this},t.prototype.onFailed=function(t){return e.prototype.onFailed.call(this,t),this},t.prototype.onSucceeded=function(t){return e.prototype.onSucceeded.call(this,t),this},t}(te),un=2;!function(e){e.SEND="send",e.RESEND="resend",e.COPY="copy"}(on||(on={}));var cn,ln=function(e){function t(t,n){var r,i,s,a,u,c,l=this;return(l=e.call(this,t)||this)._name="",l._createdAt=0,l.channelType=o.y.BASE,l.coverUrl="",l.customType="",l.data="",l.isFrozen=!1,l.isEphemeral=!1,l.creator=null,l._messageCollectionLastAccessedAt=0,l._url=n.channel_url,l._name=null!==(r=n.name)&&void 0!==r?r:"",l._createdAt=1e3*n.created_at,l.coverUrl=null!==(i=n.cover_url)&&void 0!==i?i:"",l.customType=null!==(s=n.custom_type)&&void 0!==s?s:"",l.data=null!==(a=n.data)&&void 0!==a?a:"",l.isFrozen=null!==(u=n.freeze)&&void 0!==u&&u,l.isEphemeral=null!==(c=n.is_ephemeral)&&void 0!==c&&c,l.creator=n.created_by?new o.u(l._iid,n.created_by):null,n.metadata&&Object.keys(n.metadata).length>0&&n.ts&&(l._cachedMetaData=new Map,Object.keys(n.metadata).forEach((function(e){l._cachedMetaData.set(e,{value:n.metadata[e],isRemoved:!1,updatedAt:n.ts})}))),l}return Object(o.A)(t,e),Object.defineProperty(t.prototype,"url",{get:function(){return this._url},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this._name},set:function(e){this._name=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"createdAt",{get:function(){return this._createdAt},enumerable:!1,configurable:!0}),t.prototype.toJSON=function(){return Object(o.Vb)(Object(o.Vb)({},this),{url:this._url,name:this._name,createdAt:this._createdAt})},t.payloadify=function(t){return Object(o.Tb)(Object(o.jc)(Object(o.Vb)(Object(o.Vb)({},e.payloadify.call(this,t)),{channel_url:t.url,name:t.name,cover_url:t.coverUrl,custom_type:t.customType,data:t.data,freeze:t.isFrozen,is_ephemeral:t.isEphemeral,created_by:t.creator?o.u.payloadify(t.creator):null,created_at:t.createdAt/1e3})))},t.prototype.isGroupChannel=function(){return this.channelType===o.y.GROUP},t.prototype.isOpenChannel=function(){return this.channelType===o.y.OPEN},t.prototype.isFeedChannel=function(){return this.channelType===o.y.FEED},Object.defineProperty(t.prototype,"cachedMetaData",{get:function(){var e={};return this._cachedMetaData?(this._cachedMetaData.forEach((function(t,n){t.isRemoved||(e[n]=t.value)})),e):e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"messageCollectionLastAccessedAt",{get:function(){return this._messageCollectionLastAccessedAt},enumerable:!1,configurable:!0}),t.prototype._updateMessageCollectionLastAccessedAt=function(){this._messageCollectionLastAccessedAt=Date.now()},t.prototype._update=function(e){var t=Object(o.Tb)(e);Object.assign(this,t)},t.prototype._upsertCachedMetaData=function(e,t){var n=this;Object.keys(e).forEach((function(r){n._cachedMetaData||(n._cachedMetaData=new Map);var i=n._cachedMetaData.get(r);(!i||i.updatedAt<=t)&&n._cachedMetaData.set(r,{value:e[r],isRemoved:!1,updatedAt:t})}))},t.prototype._updateCachedMetaData=function(e,t){var n=this;this._cachedMetaData?this._cachedMetaData.forEach((function(r,i){var o;r.updatedAt<=t&&n._cachedMetaData.set(i,{value:null!==(o=e[i])&&void 0!==o?o:r.value,isRemoved:!e[i],updatedAt:t})})):(this._cachedMetaData=new Map,Object.keys(e).forEach((function(r){n._cachedMetaData.set(r,{value:e[r],isRemoved:!1,updatedAt:t})})))},t.prototype._removeFromCachedMetaData=function(e,t){var n=this;this._cachedMetaData&&e.forEach((function(e){var r=n._cachedMetaData.get(e);r&&r.updatedAt<t&&(r.isRemoved=!0,r.updatedAt=t)}))},t.prototype._runIfHandleableWithGroupChannel=function(e){this.isGroupChannel()?e(this):this.isFeedChannel()&&e(this.groupChannel)},t.prototype._generateRequestId=function(){return"rq-".concat(Object(o.bc)())},t.prototype.isIdentical=function(e){return e&&this.url===e.url},t.prototype.isEqual=function(e){return Object(o.H)(this,e)},t.prototype.createOperatorListQuery=function(e){return void 0===e&&(e={}),new Oe(this._iid,this.url,this.channelType,e)},t.prototype.createMutedUserListQuery=function(e){return void 0===e&&(e={}),new ke(this._iid,this.url,this.channelType,e)},t.prototype.createBannedUserListQuery=function(e){return void 0===e&&(e={}),new Ie(this._iid,this.url,this.channelType,e)},t.prototype.createPreviousMessageListQuery=function(e){return void 0===e&&(e={}),new Ae(this._iid,this.url,this.channelType,e)},t.prototype.addOperators=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){var t,n;return Object(o.Rb)(this,(function(r){switch(r.label){case 0:return Object(o.hc)(Object(o.k)("string",e)).throw(o.fc.invalidParameters),t=o.v.of(this._iid).requestQueue,n=new Ne({channelUrl:this.url,channelType:this.channelType,operatorUserIds:e}),[4,t.send(n)];case 1:return r.sent(),[2]}}))}))},t.prototype.removeOperators=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){var t,n;return Object(o.Rb)(this,(function(r){switch(r.label){case 0:return Object(o.hc)(Object(o.k)("string",e)).throw(o.fc.invalidParameters),t=o.v.of(this._iid).requestQueue,n=new Pe({channelUrl:this.url,channelType:this.channelType,operatorUserIds:e}),[4,t.send(n)];case 1:return r.sent(),[2]}}))}))},t.prototype.getMyMutedInfo=function(){return Object(o.Gb)(this,void 0,void 0,(function(){var e,t,n,r,i,s,a,u,c,l,h;return Object(o.Rb)(this,(function(d){switch(d.label){case 0:return e=o.v.of(this._iid),t=e.sdkState,n=e.requestQueue,r=new De({channelUrl:this.url,channelType:this.channelType,userId:t.userId}),[4,n.send(r)];case 1:return i=d.sent(),s=i.as(Ue),a=s.isMuted,u=s.startAt,c=s.endAt,l=s.remainingDuration,h=s.description,[2,{isMuted:a,startAt:u,endAt:c,remainingDuration:l,description:h}]}}))}))},t.prototype.getMetaData=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){var t,n,r,i,s,a;return Object(o.Rb)(this,(function(u){switch(u.label){case 0:return Object(o.hc)(Object(o.k)("string",e)).throw(o.fc.invalidParameters),t=o.v.of(this._iid).requestQueue,n=new Le({channelUrl:this.url,channelType:this.channelType,keys:e}),[4,t.send(n)];case 1:return r=u.sent(),i=r.as(Fe),s=i.metadata,a=i.ts,this._upsertCachedMetaData(s,a),[2,s]}}))}))},t.prototype.getAllMetaData=function(){return Object(o.Gb)(this,void 0,void 0,(function(){var e,t,n,r,i,s;return Object(o.Rb)(this,(function(a){switch(a.label){case 0:return e=o.v.of(this._iid).requestQueue,t=new Le({channelUrl:this.url,channelType:this.channelType,keys:[]}),[4,e.send(t)];case 1:return n=a.sent(),r=n.as(Fe),i=r.metadata,s=r.ts,this._updateCachedMetaData(i,s),[2,i]}}))}))},t.prototype.createMetaData=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){var t,n,r,i;return Object(o.Rb)(this,(function(s){switch(s.label){case 0:return t=o.v.of(this._iid).requestQueue,n=new Be({channelUrl:this.url,channelType:this.channelType,metadata:e}),[4,t.send(n)];case 1:return r=s.sent(),i=r.as(He).metaData,this._upsertCachedMetaData(i,0),[2,i]}}))}))},t.prototype.updateMetaData=function(e,t){return void 0===t&&(t=!1),Object(o.Gb)(this,void 0,void 0,(function(){var n,r,i,s,a,u;return Object(o.Rb)(this,(function(c){switch(c.label){case 0:return n=o.v.of(this._iid).requestQueue,r=new qe({channelUrl:this.url,channelType:this.channelType,metadata:e,upsert:t}),[4,n.send(r)];case 1:return i=c.sent(),s=i.as(Ve),a=s.metadata,u=s.ts,this._upsertCachedMetaData(a,u),[2,a]}}))}))},t.prototype.deleteMetaData=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){var t,n,r,i;return Object(o.Rb)(this,(function(s){switch(s.label){case 0:return Object(o.hc)(Object(o.B)("string",e)).throw(o.fc.invalidParameters),t=o.v.of(this._iid).requestQueue,n=new ze({channelUrl:this.url,channelType:this.channelType,key:e}),[4,t.send(n)];case 1:return r=s.sent(),i=r.as(We).ts,this._removeFromCachedMetaData([e],i),[2]}}))}))},t.prototype.deleteAllMetaData=function(){return Object(o.Gb)(this,void 0,void 0,(function(){var e,t,n,r;return Object(o.Rb)(this,(function(i){switch(i.label){case 0:return e=o.v.of(this._iid).requestQueue,t=new Ke({channelUrl:this.url,channelType:this.channelType}),[4,e.send(t)];case 1:return n=i.sent(),r=n.as(Ye).ts,this._removeFromCachedMetaData(Object(o.dc)([],Object(o.ec)(this._cachedMetaData.keys()),!1),r),[2]}}))}))},t.prototype.getMetaCounters=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){var t,n;return Object(o.Rb)(this,(function(r){switch(r.label){case 0:return Object(o.hc)(Object(o.k)("string",e)).throw(o.fc.invalidParameters),t=o.v.of(this._iid).requestQueue,n=new Qe({channelUrl:this.url,channelType:this.channelType,keys:e}),[4,t.send(n)];case 1:return[2,r.sent().as(Je).metaCounter]}}))}))},t.prototype.getAllMetaCounters=function(){return Object(o.Gb)(this,void 0,void 0,(function(){var e,t;return Object(o.Rb)(this,(function(n){switch(n.label){case 0:return e=o.v.of(this._iid).requestQueue,t=new Qe({channelUrl:this.url,channelType:this.channelType,keys:[]}),[4,e.send(t)];case 1:return[2,n.sent().as(Je).metaCounter]}}))}))},t.prototype.createMetaCounters=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){var t,n;return Object(o.Rb)(this,(function(r){switch(r.label){case 0:return t=o.v.of(this._iid).requestQueue,n=new Ze({channelUrl:this.url,channelType:this.channelType,metaCounter:e}),[4,t.send(n)];case 1:return[2,r.sent().as($e).metaCounter]}}))}))},t.prototype.updateMetaCounters=function(e,t){return void 0===t&&(t=!1),Object(o.Gb)(this,void 0,void 0,(function(){var n,r;return Object(o.Rb)(this,(function(i){switch(i.label){case 0:return n=o.v.of(this._iid).requestQueue,r=new Xe({channelUrl:this.url,channelType:this.channelType,metaCounter:e,upsert:t}),[4,n.send(r)];case 1:return[2,i.sent().as(et).metaCounter]}}))}))},t.prototype.increaseMetaCounters=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){var t,n;return Object(o.Rb)(this,(function(r){switch(r.label){case 0:return t=o.v.of(this._iid).requestQueue,n=new Xe({channelUrl:this.url,channelType:this.channelType,metaCounter:e,upsert:!1,mode:"increase"}),[4,t.send(n)];case 1:return[2,r.sent().as(et).metaCounter]}}))}))},t.prototype.decreaseMetaCounters=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){var t,n;return Object(o.Rb)(this,(function(r){switch(r.label){case 0:return t=o.v.of(this._iid).requestQueue,n=new Xe({channelUrl:this.url,channelType:this.channelType,metaCounter:e,upsert:!1,mode:"decrease"}),[4,t.send(n)];case 1:return[2,r.sent().as(et).metaCounter]}}))}))},t.prototype.deleteMetaCounter=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){var t,n;return Object(o.Rb)(this,(function(r){switch(r.label){case 0:return Object(o.hc)(Object(o.B)("string",e)).throw(o.fc.invalidParameters),t=o.v.of(this._iid).requestQueue,n=new nt({channelUrl:this.url,channelType:this.channelType,key:e}),[4,t.send(n)];case 1:return r.sent(),[2]}}))}))},t.prototype.deleteAllMetaCounters=function(){return Object(o.Gb)(this,void 0,void 0,(function(){var e,t;return Object(o.Rb)(this,(function(n){switch(n.label){case 0:return e=o.v.of(this._iid).requestQueue,t=new rt({channelUrl:this.url,channelType:this.channelType}),[4,e.send(t)];case 1:return n.sent(),[2]}}))}))},t.prototype.muteUser=function(e,t,n){return Object(o.Gb)(this,void 0,void 0,(function(){return Object(o.Rb)(this,(function(r){return[2,this.muteUserWithUserId(e.userId,t,n)]}))}))},t.prototype.muteUserWithUserId=function(e,t,n){return Object(o.Gb)(this,void 0,void 0,(function(){var r,i;return Object(o.Rb)(this,(function(s){switch(s.label){case 0:return Object(o.hc)(Object(o.B)("string",e)&&Object(o.B)("number",t,!0)&&Object(o.B)("string",n,!0)).throw(o.fc.invalidParameters),r=o.v.of(this._iid).requestQueue,i=new it({channelUrl:this.url,channelType:this.channelType,userId:e,seconds:t,description:n}),[4,r.send(i)];case 1:return s.sent(),[2]}}))}))},t.prototype.unmuteUser=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){return Object(o.Rb)(this,(function(t){return[2,this.unmuteUserWithUserId(e.userId)]}))}))},t.prototype.unmuteUserWithUserId=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){var t,n;return Object(o.Rb)(this,(function(r){switch(r.label){case 0:return Object(o.hc)(Object(o.B)("string",e)).throw(o.fc.invalidParameters),t=o.v.of(this._iid).requestQueue,n=new st({channelUrl:this.url,channelType:this.channelType,userId:e}),[4,t.send(n)];case 1:return r.sent(),[2]}}))}))},t.prototype.banUser=function(e,t,n){return Object(o.Gb)(this,void 0,void 0,(function(){return Object(o.Rb)(this,(function(r){return[2,this.banUserWithUserId(e.userId,t,n)]}))}))},t.prototype.banUserWithUserId=function(e,t,n){return Object(o.Gb)(this,void 0,void 0,(function(){var r,i;return Object(o.Rb)(this,(function(s){switch(s.label){case 0:return Object(o.hc)(Object(o.B)("string",e)&&Object(o.B)("number",t,!0)&&Object(o.B)("string",n,!0)).throw(o.fc.invalidParameters),r=o.v.of(this._iid).requestQueue,i=new ut({channelUrl:this.url,channelType:this.channelType,userId:e,seconds:t,description:n}),[4,r.send(i)];case 1:return s.sent(),[2]}}))}))},t.prototype.unbanUser=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){return Object(o.Rb)(this,(function(t){return[2,this.unbanUserWithUserId(e.userId)]}))}))},t.prototype.unbanUserWithUserId=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){var t,n;return Object(o.Rb)(this,(function(r){switch(r.label){case 0:return Object(o.hc)(Object(o.B)("string",e)).throw(o.fc.invalidParameters),t=o.v.of(this._iid).requestQueue,n=new lt({channelUrl:this.url,channelType:this.channelType,userId:e}),[4,t.send(n)];case 1:return r.sent(),[2]}}))}))},t.prototype.freeze=function(){return Object(o.Gb)(this,void 0,void 0,(function(){var e,t;return Object(o.Rb)(this,(function(n){switch(n.label){case 0:return e=o.v.of(this._iid).requestQueue,t=new dt({channelUrl:this.url,channelType:this.channelType,freezing:!0}),[4,e.send(t)];case 1:return n.sent(),this.isFrozen=!0,[2]}}))}))},t.prototype.unfreeze=function(){return Object(o.Gb)(this,void 0,void 0,(function(){var e,t;return Object(o.Rb)(this,(function(n){switch(n.label){case 0:return e=o.v.of(this._iid).requestQueue,t=new dt({channelUrl:this.url,channelType:this.channelType,freezing:!1}),[4,e.send(t)];case 1:return n.sent(),this.isFrozen=!1,[2]}}))}))},t.prototype.getMessagesByMessageId=function(e,t){return Object(o.Gb)(this,void 0,void 0,(function(){var n;return Object(o.Rb)(this,(function(r){switch(r.label){case 0:return n=Object(o.Vb)(Object(o.Vb)({},B),t),Object(o.hc)(Object(o.B)("number",e)&&H(n)).throw(o.fc.invalidParameters),[4,Br.of(this._iid).getMessagesByMessageId(this.url,this.channelType,e,n)];case 1:return[2,r.sent()]}}))}))},t.prototype.getMessagesByTimestamp=function(e,t){return Object(o.Gb)(this,void 0,void 0,(function(){var n;return Object(o.Rb)(this,(function(r){switch(r.label){case 0:return n=Object(o.Vb)(Object(o.Vb)({},B),t),Object(o.hc)(Object(o.B)("number",e)&&H(n)).throw(o.fc.invalidParameters),[4,Br.of(this._iid).getMessagesByTimestamp(this.url,this.channelType,e,n)];case 1:return[2,r.sent()]}}))}))},t.prototype.getMessageChangeLogsSinceTimestamp=function(e,t){return void 0===t&&(t={}),Object(o.Gb)(this,void 0,void 0,(function(){var n;return Object(o.Rb)(this,(function(r){switch(r.label){case 0:return n=Object(o.Vb)(Object(o.Vb)({},q),t),Object(o.hc)(Object(o.B)("number",e)&&V(n)).throw(o.fc.invalidParameters),[4,Br.of(this._iid).getMessageChangelogs(this.url,this.channelType,e,n)];case 1:return[2,r.sent()]}}))}))},t.prototype.getMessageChangeLogsSinceToken=function(e,t){return void 0===t&&(t={}),Object(o.Gb)(this,void 0,void 0,(function(){var n;return Object(o.Rb)(this,(function(r){switch(r.label){case 0:return n=Object(o.Vb)(Object(o.Vb)({},q),t),Object(o.hc)(Object(o.B)("string",e)&&V(n)).throw(o.fc.invalidParameters),[4,Br.of(this._iid).getMessageChangelogs(this.url,this.channelType,e,n)];case 1:return[2,r.sent()]}}))}))},t.prototype._createPendingSendableMessagePayload=function(e,t,n){var r,i=o.v.of(this._iid).sessionManager;return Object(o.Tb)(Object(o.jc)({channel_url:this.url,channel_type:this.channelType,msg_id:0,parent_message_id:e.parentMessageId,data:e.data,custom_type:e.customType,mention_type:e.mentionType,sorted_metaarray:e.metaArrays?e.metaArrays.map((function(e){return f.payloadify(e)})):null,apple_critical_alert_options:e.appleCriticalAlertOptions?g.payloadify(e.appleCriticalAlertOptions):null,created_at:n,user:i.currentUser?b.payloadify(i.currentUser):null,req_id:t,request_state:o.jb.PENDING,mentioned_user_ids:e.mentionedUserIds,mentioned_users:null===(r=e.mentionedUsers)||void 0===r?void 0:r.map((function(e){return o.u.payloadify(e)}))}))},t.prototype._createPendingUserMessage=function(e,t,n){var r,i,s={};if(e.translationTargetLanguages)try{for(var a=Object(o.gc)(e.translationTargetLanguages),u=a.next();!u.done;u=a.next())s[u.value]=""}catch(e){r={error:e}}finally{try{u&&!u.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}var c=Object(o.Tb)(Object(o.Vb)(Object(o.Vb)({},this._createPendingSendableMessagePayload(e,t,n)),{type:o.gb.USER,message:e.message,translations:s})),l=new C(this._iid,c);return l.messageParams=e,l},t.prototype._createPendingScheduledUserMessage=function(e,t,n){var r=this._createPendingUserMessage(e,t,n);return r.scheduledInfo={scheduledMessageId:0,scheduledAt:e.scheduledAt,scheduledMessageParams:e},r},t.prototype._createPendingFileMessage=function(e,t,n){var r,i,s,a,u,c,l=Object(o.Tb)(Object(o.Vb)(Object(o.Vb)({},this._createPendingSendableMessagePayload(e,t,n)),{type:o.gb.FILE,url:e.fileUrl,file:{name:null!==(r=e.fileName)&&void 0!==r?r:null===(i=e.file)||void 0===i?void 0:i.name,size:null!==(s=e.fileSize)&&void 0!==s?s:null===(a=e.file)||void 0===a?void 0:a.size,type:null!==(u=e.mimeType)&&void 0!==u?u:null===(c=e.file)||void 0===c?void 0:c.type,data:e.data},thumbnails:e.thumbnailSizes?e.thumbnailSizes.map((function(e){return{url:"",width:e.maxWidth,height:e.maxHeight}})):[]})),h=new I(this._iid,l);return h.messageParams=e,h},t.prototype._createPendingMultipleFilesMessage=function(e,t,n){var r=Object(o.Tb)(Object(o.Vb)(Object(o.Vb)({},this._createPendingSendableMessagePayload(e,t,n)),{type:o.gb.FILE})),i=new k(this._iid,r);return i.messageParams=e,i},t.prototype._validateFailedFileMessageHasFile=function(e,t){var n;return Boolean(e.url)||Object(o.Xb)(t)||Object(o.Xb)(null===(n=e.messageParams)||void 0===n?void 0:n.file)},t.prototype._createPendingScheduledFileMessage=function(e,t,n){var r=this._createPendingFileMessage(e,t,n);return r.scheduledInfo={scheduledMessageId:0,scheduledAt:e.scheduledAt,scheduledMessageParams:e},r},t.prototype._markMessageAsFailed=function(e,t,n){void 0===n&&(n=!1),e.errorCode=t.code,t.code===o.rb.REQUEST_CANCELED||t.code===o.rb.FILE_UPLOAD_CANCEL_FAILED?e.sendingStatus=o.jb.CANCELED:n||(e.sendingStatus=o.jb.FAILED)},t.prototype.sendUserMessage=function(e){var t=Object(o.Vb)(Object(o.Vb)({},oe),e);return Object(o.hc)(ce(t)).throw(o.fc.invalidParameters),this._sendUserMessage(t)},t.prototype._sendUserMessage=function(e,t,n){var r=this;void 0===t&&(t=on.SEND);var i=o.v.of(this._iid),s=i.dispatcher,a=i.requestQueue,u=null!=n?n:this._generateRequestId(),c=Date.now(),l=new te;return Object(o.sb)(2).then((function(){var n=r._createPendingUserMessage(e,u,c);s.dispatch(new o.I({messages:[n],source:t===on.RESEND?o.x.LOCAL_MESSAGE_RESEND_STARTED:o.x.EVENT_MESSAGE_SENT_PENDING})),Object(o.b)((function(){return Object(o.Gb)(r,void 0,void 0,(function(){return Object(o.Rb)(this,(function(e){return[2,l._trigger(n)]}))}))}));var i=new bt(Object(o.Vb)(Object(o.Vb)({},e),{channelUrl:r.url,channelType:r.channelType,reqId:u}));a.send(i).then((function(e){var t=e.as(vt).message;s.dispatch(new o.I({messages:[t],source:o.x.EVENT_MESSAGE_SENT_SUCCESS})),Object(o.b)((function(){return Object(o.Gb)(r,void 0,void 0,(function(){return Object(o.Rb)(this,(function(e){return[2,l._trigger(t)]}))}))}))})).catch((function(t){if(Object(o.J)(t))throw t;Object(o.sb)(2).then((function(){var n=r._createPendingUserMessage(e,u,c),i=o.v.of(r._iid).cacheContext.localCacheEnabled&&Object(o.K)(t.code);r._markMessageAsFailed(n,t,i),s.dispatch(new o.I({messages:[n],source:n.sendingStatus===o.jb.PENDING?o.x.REQUEST_RESEND_MESSAGE:o.x.EVENT_MESSAGE_SENT_FAILED})),Object(o.b)((function(){return Object(o.Gb)(r,void 0,void 0,(function(){return Object(o.Rb)(this,(function(e){return[2,l._triggerFailed(t,n)]}))}))}))}))}))})),l},t.prototype._autoResendUserMessage=function(e){return Object(o.hc)(e instanceof C&&!!e.messageParams).throw(o.fc.invalidParameters),this._sendUserMessage(e.messageParams,on.SEND,e.reqId)},t.prototype.resendUserMessage=function(e){var t;return Object(o.Gb)(this,void 0,void 0,(function(){var n,r;return Object(o.Rb)(this,(function(i){return Object(o.hc)(e instanceof C&&!e.scheduledInfo).throw(o.fc.invalidParameters),n=new o.tb,r=null!==(t=e.messageParams)&&void 0!==t?t:ue(e),this._sendUserMessage(r,on.RESEND,e.reqId).onFailed((function(e){return n.reject(e)})).onSucceeded((function(e){return n.resolve(e)})),[2,n.promise]}))}))},t.prototype.updateUserMessage=function(e,t){return Object(o.Gb)(this,void 0,void 0,(function(){var n,r,i;return Object(o.Rb)(this,(function(s){switch(s.label){case 0:return n=Object(o.Vb)(Object(o.Vb)({},_e),t),Object(o.hc)(Object(o.B)("number",e)&&we(n)).throw(o.fc.invalidParameters),r=o.v.of(this._iid).requestQueue,i=new yt(Object(o.Vb)({channelType:this.channelType,channelUrl:this.url,messageId:e},n)),[4,r.send(i)];case 1:return[2,s.sent().as(_t).message]}}))}))},t.prototype.copyUserMessage=function(e,n){var r,i,s;return Object(o.Gb)(this,void 0,void 0,(function(){var a,u;return Object(o.Rb)(this,(function(c){return Object(o.hc)(e instanceof t&&n instanceof C&&n.sendingStatus===o.jb.SUCCEEDED&&this.url===n.channelUrl&&!n.scheduledInfo).throw(o.fc.invalidParameters),Object(o.hc)(!n.poll).throw(o.fc.notSupportedError),a=new o.tb,u=null!==(r=n.messageParams)&&void 0!==r?r:Object(o.jc)(Object(o.Vb)(Object(o.Vb)({},n),{mentionType:n.mentionType,mentionedUserIds:null!==(i=n.mentionedUserIds)&&void 0!==i?i:null===(s=n.mentionedUsers)||void 0===s?void 0:s.map((function(e){return e.userId})),translationTargetLanguages:Object.keys(n.translations),pushNotificationDeliveryOption:o.nb.DEFAULT,parentMessageId:null,isReplyToChannel:!1,isPinnedMessage:!1})),e._sendUserMessage(u).onSucceeded((function(e){a.resolve(e)})).onFailed((function(e){return a.reject(e)})),[2,a.promise]}))}))},t.prototype.translateUserMessage=function(e,t){return Object(o.Gb)(this,void 0,void 0,(function(){var n,r;return Object(o.Rb)(this,(function(i){switch(i.label){case 0:return Object(o.hc)(e instanceof C&&e.messageId>0&&Object(o.k)("string",t)).throw(o.fc.invalidParameters),n=o.v.of(this._iid).requestQueue,r=new kt({channelType:this.channelType,channelUrl:this.url,messageId:e.messageId,translationTargetLanguages:t}),[4,n.send(r)];case 1:return[2,i.sent().as(xt).message]}}))}))},t.prototype._createScheduledUserMessage=function(e,t){var n=this,r=o.v.of(this._iid).requestQueue,i=Date.now(),s=this._generateRequestId();Object(o.sb)(2).then((function(){var r=n._createPendingScheduledUserMessage(e,s,i);Object(o.b)((function(){return Object(o.Gb)(n,void 0,void 0,(function(){return Object(o.Rb)(this,(function(e){return[2,t._trigger(r)]}))}))}))}));var a=new jt(Object(o.Vb)({reqId:s,channelType:this.channelType,channelUrl:this.url},e));r.send(a).then((function(e){var r=e.as(It).message;Object(o.b)((function(){return Object(o.Gb)(n,void 0,void 0,(function(){return Object(o.Rb)(this,(function(e){return[2,t._trigger(r)]}))}))}))})).catch((function(r){if(Object(o.J)(r))throw r;Object(o.sb)(2).then((function(){var a=n._createPendingScheduledUserMessage(e,s,i);n._markMessageAsFailed(a,r),Object(o.b)((function(){return Object(o.Gb)(n,void 0,void 0,(function(){return Object(o.Rb)(this,(function(e){return[2,t._trigger(a)]}))}))}))}))}))},t.prototype.sendFileMessage=function(e){var t=Object(o.Vb)(Object(o.Vb)({},fe),e);return Object(o.hc)(be(t)).throw(o.fc.invalidParameters),this._sendFileMessage(t)},t.prototype.sendMultipleFilesMessage=function(e){var t,n=Object(o.Vb)(Object(o.Vb)({},sn),e),r=o.v.of(this._iid);Object(o.hc)(function(e,t){return void 0===t&&(t=o.Fb),re(e)&&Array.isArray(e.fileInfoList)&&e.fileInfoList.length>=2&&e.fileInfoList.length<=t&&e.fileInfoList.every((function(e){return function(e){return(Object(o.Xb)(e.file)||Object(o.B)("string",e.fileUrl))&&Object(o.B)("string",e.fileName,!0)&&Object(o.B)("string",e.mimeType,!0)&&Object(o.B)("number",e.fileSize,!0)&&(void 0===e.thumbnailSizes||Array.isArray(e.thumbnailSizes)&&e.thumbnailSizes.every((function(e){return e.maxWidth>0&&e.maxHeight>0})))}(e)}))}(n,null===(t=r.appInfo)||void 0===t?void 0:t.multipleFilesMessageFileCountLimit)).throw(o.fc.invalidParameters);var i=!!e.fileInfoList.find((function(e){var t=r.appInfo.uploadSizeLimit;return e.file instanceof Blob&&e.file.size>t||e.fileSize>t}));return Object(o.hc)(!i).throw(o.fc.fileSizeLimitExceededError),this._sendMultipleFilesMessage(n)},t.prototype._sendFileMessage=function(e,t,n){var r=this;void 0===t&&(t=on.SEND);var i=o.v.of(this._iid).dispatcher,s=Br.of(this._iid).fileMessageQueue,a=null!=n?n:this._generateRequestId(),u=Date.now(),c=new te;return Object(o.sb)(2).then((function(){var n=r._createPendingFileMessage(e,a,u);i.dispatch(new o.I({messages:[n],source:t===on.RESEND?o.x.LOCAL_MESSAGE_RESEND_STARTED:o.x.EVENT_MESSAGE_SENT_PENDING})),Object(o.b)((function(){return Object(o.Gb)(r,void 0,void 0,(function(){return Object(o.Rb)(this,(function(e){return[2,c._trigger(n)]}))}))})),s.request(r,a,e).then((function(e){i.dispatch(new o.I({messages:[e],source:o.x.EVENT_MESSAGE_SENT_SUCCESS})),Object(o.b)((function(){return Object(o.Gb)(r,void 0,void 0,(function(){return Object(o.Rb)(this,(function(t){return[2,c._trigger(e)]}))}))}))})).catch((function(t){if(Object(o.J)(t))throw t;Object(o.sb)(2).then((function(){var n=r._createPendingFileMessage(e,a,u),s=o.v.of(r._iid).cacheContext.localCacheEnabled&&Object(o.K)(t.code);r._markMessageAsFailed(n,t,s),i.dispatch(new o.I({messages:[n],source:n.sendingStatus===o.jb.PENDING?o.x.REQUEST_RESEND_MESSAGE:t.code===o.rb.FILE_UPLOAD_CANCEL_FAILED?o.x.LOCAL_MESSAGE_CANCELED:o.x.EVENT_MESSAGE_SENT_FAILED})),Object(o.b)((function(){return Object(o.Gb)(r,void 0,void 0,(function(){return Object(o.Rb)(this,(function(e){return[2,c._triggerFailed(t,n)]}))}))}))}))}))})),c},t.prototype._autoResendFileMessage=function(e){Object(o.hc)(e instanceof I&&!!e.messageParams).throw(o.fc.invalidParameters);var t=o.v.of(this._iid).logger;return t.debug("autoResendFileMessage pending",e),this._sendFileMessage(e.messageParams,on.SEND,e.reqId).onFailed((function(e){t.debug("autoResendFileMessage failed",e)})).onSucceeded((function(e){t.debug("autoResendFileMessage success",e)}))},t.prototype._sendMultipleFilesMessage=function(e,t,n){var r=this,i=o.v.of(this._iid).dispatcher,s=Br.of(this._iid).fileMessageQueue,a=null!=n?n:this._generateRequestId(),u=Date.now(),c=new an;return Object(o.sb)(2).then((function(){var n=r._createPendingMultipleFilesMessage(e,a,u);i.dispatch(new o.I({messages:[n],source:t===on.RESEND?o.x.LOCAL_MESSAGE_RESEND_STARTED:o.x.EVENT_MESSAGE_SENT_PENDING})),Object(o.b)((function(){return Object(o.Gb)(r,void 0,void 0,(function(){return Object(o.Rb)(this,(function(e){return[2,c._trigger(n)]}))}))})),s.request(r,a,e,{requestHandler:c,isCopy:t===on.COPY}).then((function(e){i.dispatch(new o.I({messages:[e],source:o.x.EVENT_MESSAGE_SENT_SUCCESS})),Object(o.b)((function(){return Object(o.Gb)(r,void 0,void 0,(function(){return Object(o.Rb)(this,(function(t){return[2,c._trigger(e)]}))}))}))})).catch((function(t){if(Object(o.J)(t))throw t;Object(o.sb)(2).then((function(){var n=r._createPendingMultipleFilesMessage(e,a,u);r._markMessageAsFailed(n,t),i.dispatch(new o.I({messages:[n],source:o.x.EVENT_MESSAGE_SENT_FAILED})),Object(o.b)((function(){return Object(o.Gb)(r,void 0,void 0,(function(){return Object(o.Rb)(this,(function(e){return[2,c._triggerFailed(t,n)]}))}))}))}))}))})),c},t.prototype._createScheduledFileMessage=function(e,t,n,r){var i=this,s=o.v.of(this._iid).requestQueue,a=new Rt(Object(o.Vb)(Object(o.Vb)({reqId:n,channelType:this.channelType,channelUrl:this.url},e),{fileUrl:e.fileUrl,requireAuth:e.requireAuth}));s.send(a).then((function(e){var n=e.as(Nt).message;Object(o.b)((function(){return Object(o.Gb)(i,void 0,void 0,(function(){return Object(o.Rb)(this,(function(e){return[2,t._trigger(n)]}))}))}))})).catch((function(s){if(Object(o.J)(s))throw s;Object(o.sb)(2).then((function(){var a=i._createPendingScheduledFileMessage(e,n,r);i._markMessageAsFailed(a,s),Object(o.b)((function(){return Object(o.Gb)(i,void 0,void 0,(function(){return Object(o.Rb)(this,(function(e){return[2,t._triggerFailed(s,a)]}))}))}))}))}))},t.prototype.sendFileMessages=function(e){var t,n;Object(o.hc)(e.every((function(e){return be(Object(o.Vb)(Object(o.Vb)({},fe),e))}))).throw(o.fc.invalidParameters);var r=new te;try{for(var i=Object(o.gc)(e),s=i.next();!s.done;s=i.next()){var a=s.value;this.sendFileMessage(a).onPending((function(e){return r._trigger(e)})).onFailed((function(e,t){return r._triggerFailed(e,t)})).onSucceeded((function(e){return r._trigger(e)}))}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r},t.prototype.resendFileMessage=function(e,t){return Object(o.Gb)(this,void 0,void 0,(function(){var n,r,i;return Object(o.Rb)(this,(function(s){return n=this._validateFailedFileMessageHasFile(e,t),Object(o.hc)(e instanceof I&&n&&!e.scheduledInfo).throw(o.fc.invalidParameters),r=new o.tb,i=ge(e,t),this._sendFileMessage(i,on.RESEND,e.reqId).onFailed((function(e){return r.reject(e)})).onSucceeded((function(e){return r.resolve(e)})),[2,r.promise]}))}))},t.prototype.resendMessage=function(e,t){var n,r;if(Object(o.hc)(e instanceof w&&!e.scheduledInfo&&e.isResendable).throw(o.fc.invalidParameters),e.isUserMessage()){var i=null!==(n=e.messageParams)&&void 0!==n?n:ue(e);return this._sendUserMessage(i,on.RESEND,e.reqId)}if(e.isFileMessage()){var s=this._validateFailedFileMessageHasFile(e,t);return Object(o.hc)(s).throw(o.fc.invalidParameters),i=null!==(r=e.messageParams)&&void 0!==r?r:ge(e,t),this._sendFileMessage(i,on.RESEND,e.reqId)}if(e.isMultipleFilesMessage())throw o.fc.channelTypeNotSupportedError},t.prototype.updateFileMessage=function(e,t){return Object(o.Gb)(this,void 0,void 0,(function(){var n,r,i;return Object(o.Rb)(this,(function(s){switch(s.label){case 0:return n=Object(o.Vb)(Object(o.Vb)({},Ee),t),Object(o.hc)(Object(o.B)("number",e)&&function(e){return ye(e)}(n)).throw(o.fc.invalidParameters),r=o.v.of(this._iid).requestQueue,i=new wt(Object(o.Vb)({channelType:this.channelType,channelUrl:this.url,messageId:e},n)),[4,r.send(i)];case 1:return[2,s.sent().as(Et).message]}}))}))},t.prototype.cancelUploadingFileMessage=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){return Object(o.Rb)(this,(function(t){return Object(o.hc)(Object(o.B)("string",e)).throw(o.fc.invalidParameters),Br.of(this._iid).fileMessageQueue.cancel(this,e),[2,!0]}))}))},t.prototype.copyFileMessage=function(e,n){var r,i,s;return Object(o.Gb)(this,void 0,void 0,(function(){var a,u;return Object(o.Rb)(this,(function(c){return Object(o.hc)(e instanceof t&&n instanceof I&&n.sendingStatus===o.jb.SUCCEEDED&&this.url===n.channelUrl&&!n.scheduledInfo).throw(o.fc.invalidParameters),a=new o.tb,u=Object(o.jc)(Object(o.Vb)(Object(o.Vb)({},n),{fileUrl:n.url,fileName:n.name,fileSize:n.size,mimeType:n.type,mentionType:n.mentionType,mentionedUserIds:null!==(r=n.mentionedUserIds)&&void 0!==r?r:null===(i=n.mentionedUsers)||void 0===i?void 0:i.map((function(e){return e.userId})),pushNotificationDeliveryOption:o.nb.DEFAULT,parentMessageId:null,isReplyToChannel:!1,thumbnailSizes:null===(s=n.thumbnails)||void 0===s?void 0:s.map((function(e){return{maxWidth:e.width,maxHeight:e.height}})),requireAuth:n.requireAuth,isPinnedMessage:!1})),e._sendFileMessage(u).onSucceeded((function(e){return a.resolve(e)})).onFailed((function(e){return a.reject(e)})),[2,a.promise]}))}))},t.prototype.copyMessage=function(e,n){Object(o.hc)(e instanceof t&&n instanceof w&&n.sendingStatus===o.jb.SUCCEEDED&&this.url===n.channelUrl&&!n.scheduledInfo).throw(o.fc.invalidParameters);var r=n,i=e;if(r.isUserMessage()){Object(o.hc)(!r.poll).throw(o.fc.notSupportedError);var s=se(r);return i._sendUserMessage(s)}if(r.isFileMessage())return s=pe(r),i._sendFileMessage(s);if(n.isMultipleFilesMessage())throw o.fc.channelTypeNotSupportedError},t.prototype.deleteMessage=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){var t,n;return Object(o.Rb)(this,(function(r){switch(r.label){case 0:return Object(o.hc)(e instanceof _).throw(o.fc.invalidParameters),e.messageId>0?(t=o.v.of(this._iid).requestQueue,n=new St({channelType:this.channelType,channelUrl:this.url,messageId:e.messageId}),[4,t.send(n)]):[3,2];case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.addReaction=function(e,t){return Object(o.Gb)(this,void 0,void 0,(function(){var n,r;return Object(o.Rb)(this,(function(i){switch(i.label){case 0:return Object(o.hc)(e instanceof _&&e.messageId>0&&Object(o.B)("string",t)).throw(o.fc.invalidParameters),n=o.v.of(this._iid).requestQueue,r=new Ot({channelType:this.channelType,channelUrl:this.url,messageId:e.messageId,reactionKey:t}),[4,n.send(r)];case 1:return[2,i.sent().as(At).reactionEvent]}}))}))},t.prototype.deleteReaction=function(e,t){return Object(o.Gb)(this,void 0,void 0,(function(){var n,r;return Object(o.Rb)(this,(function(i){switch(i.label){case 0:return Object(o.hc)(e instanceof _&&e.messageId>0&&Object(o.B)("string",t)).throw(o.fc.invalidParameters),n=o.v.of(this._iid).requestQueue,r=new Ct({channelType:this.channelType,channelUrl:this.url,messageId:e.messageId,reactionKey:t}),[4,n.send(r)];case 1:return[2,i.sent().as(Tt).reactionEvent]}}))}))},t.prototype._updateUserMessageMetaArray=function(e,t,n,r){return Object(o.Gb)(this,void 0,void 0,(function(){var i,s,a,u,c,l;return Object(o.Rb)(this,(function(h){switch(h.label){case 0:return i=o.v.of(this._iid),s=i.dispatcher,a=i.requestQueue,u=new yt({channelType:this.channelType,channelUrl:this.url,messageId:e,metaArrayParams:{array:t,mode:n,upsert:r}}),[4,a.send(u)];case 1:return c=h.sent(),l=c.as(_t).message,s.dispatch(new o.I({messages:[l],source:o.x.EVENT_MESSAGE_UPDATED})),[2,l]}}))}))},t.prototype._updateFileMessageMetaArray=function(e,t,n,r){return Object(o.Gb)(this,void 0,void 0,(function(){var i,s,a,u,c,l;return Object(o.Rb)(this,(function(h){switch(h.label){case 0:return i=o.v.of(this._iid),s=i.dispatcher,a=i.requestQueue,u=new wt({channelType:this.channelType,channelUrl:this.url,messageId:e,metaArrayParams:{array:t,mode:n,upsert:r}}),[4,a.send(u)];case 1:return c=h.sent(),l=c.as(Et).message,s.dispatch(new o.I({messages:[l],source:o.x.EVENT_MESSAGE_UPDATED})),[2,l]}}))}))},t.prototype.createMessageMetaArrayKeys=function(e,t){return Object(o.Gb)(this,void 0,void 0,(function(){var n;return Object(o.Rb)(this,(function(r){return Object(o.hc)(e instanceof _&&e.messageId>0&&Object(o.k)("string",t)).throw(o.fc.invalidParameters),n=t.map((function(e){return new f({key:e})})),e instanceof I?[2,this._updateFileMessageMetaArray(e.messageId,n,"add",!0)]:[2,this._updateUserMessageMetaArray(e.messageId,n,"add",!0)]}))}))},t.prototype.deleteMessageMetaArrayKeys=function(e,t){return Object(o.Gb)(this,void 0,void 0,(function(){var n;return Object(o.Rb)(this,(function(r){return Object(o.hc)(e instanceof _&&e.messageId>0&&Object(o.k)("string",t)).throw(o.fc.invalidParameters),n=t.map((function(e){return new f({key:e})})),e instanceof I?[2,this._updateFileMessageMetaArray(e.messageId,n,"remove",!0)]:[2,this._updateUserMessageMetaArray(e.messageId,n,"remove",!0)]}))}))},t.prototype.addMessageMetaArrayValues=function(e,t){return Object(o.Gb)(this,void 0,void 0,(function(){return Object(o.Rb)(this,(function(n){return Object(o.hc)(e instanceof _&&e.messageId>0&&t.every((function(e){return e instanceof f}))).throw(o.fc.invalidParameters),e instanceof I?[2,this._updateFileMessageMetaArray(e.messageId,t,"add",!0)]:[2,this._updateUserMessageMetaArray(e.messageId,t,"add",!0)]}))}))},t.prototype.removeMessageMetaArrayValues=function(e,t){return Object(o.Gb)(this,void 0,void 0,(function(){return Object(o.Rb)(this,(function(n){return Object(o.hc)(e instanceof _&&e.messageId>0&&t.every((function(e){return e instanceof f}))).throw(o.fc.invalidParameters),e instanceof I?[2,this._updateFileMessageMetaArray(e.messageId,t,"remove",!0)]:[2,this._updateUserMessageMetaArray(e.messageId,t,"remove",!0)]}))}))},t.prototype.report=function(e,t){return Object(o.Gb)(this,void 0,void 0,(function(){var n,r,i,s;return Object(o.Rb)(this,(function(a){switch(a.label){case 0:return Object(o.hc)(Object(o.q)(me,e)&&Object(o.B)("string",t)).throw(o.fc.invalidParameters),n=o.v.of(this._iid),r=n.sdkState,i=n.requestQueue,s=new pt({channelUrl:this.url,channelType:this.channelType,userId:r.userId,category:e,description:t}),[4,i.send(s)];case 1:return a.sent(),[2]}}))}))},t.prototype.reportUser=function(e,t,n){return Object(o.Gb)(this,void 0,void 0,(function(){var r,i,s,a;return Object(o.Rb)(this,(function(u){switch(u.label){case 0:return Object(o.hc)(e instanceof o.u&&Object(o.q)(me,t)&&Object(o.B)("string",n)).throw(o.fc.invalidParameters),r=o.v.of(this._iid),i=r.sdkState,s=r.requestQueue,a=new mt({channelUrl:this.url,channelType:this.channelType,userId:i.userId,offendingUserId:e.userId,category:t,description:n}),[4,s.send(a)];case 1:return u.sent(),[2]}}))}))},t.prototype.reportMessage=function(e,t,n){return Object(o.Gb)(this,void 0,void 0,(function(){var r,i,s,a;return Object(o.Rb)(this,(function(u){switch(u.label){case 0:return Object(o.hc)(e instanceof w&&Object(o.q)(me,t)&&Object(o.B)("string",n)).throw(o.fc.invalidParameters),r=o.v.of(this._iid),i=r.sdkState,s=r.requestQueue,a=new gt({channelUrl:this.url,channelType:this.channelType,userId:i.userId,offendingUserId:e.sender.userId,messageId:e.messageId,category:t,description:n}),[4,s.send(a)];case 1:return u.sent(),[2]}}))}))},t.prototype.updatePoll=function(e,t){return Object(o.Gb)(this,void 0,void 0,(function(){var n,r;return Object(o.Rb)(this,(function(i){switch(i.label){case 0:return Object(o.hc)(Object(o.B)("number",e)&&function(e){return Object(o.B)("string",e.title,!0)&&Object(o.Cb)(e.data)&&Object(o.B)("boolean",e.allowUserSuggestion,!0)&&Object(o.B)("boolean",e.allowMultipleVotes,!0)&&Object(o.B)("number",e.closeAt,!0)}(t)).throw(o.fc.invalidParameters),n=o.v.of(this._iid).requestQueue,r=new Pt(Object(o.Vb)({pollId:e},t)),[4,n.send(r)];case 1:return[2,i.sent().as(Dt).poll]}}))}))},t.prototype.deletePoll=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){var t,n,r;return Object(o.Rb)(this,(function(i){switch(i.label){case 0:return t=Object(o.B)("number",e),Object(o.hc)(t).throw(o.fc.invalidParameters),n=o.v.of(this._iid).requestQueue,r=new Ut({pollId:e}),[4,n.send(r)];case 1:return i.sent(),[2]}}))}))},t.prototype.closePoll=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){var t,n,r;return Object(o.Rb)(this,(function(i){switch(i.label){case 0:return t=Object(o.B)("number",e),Object(o.hc)(t).throw(o.fc.invalidParameters),n=o.v.of(this._iid).requestQueue,r=new Lt({pollId:e}),[4,n.send(r)];case 1:return[2,i.sent().as(Ft).poll]}}))}))},t.prototype.addPollOption=function(e,t){return Object(o.Gb)(this,void 0,void 0,(function(){var n,r,i;return Object(o.Rb)(this,(function(s){switch(s.label){case 0:return n=Object(o.B)("number",e)&&Object(o.B)("string",t)&&""!==t.trim(),Object(o.hc)(n).throw(o.fc.invalidParameters),r=o.v.of(this._iid).requestQueue,i=new Bt({channelUrl:this.url,channelType:this.channelType,pollId:e,optionText:t}),[4,r.send(i)];case 1:return[2,s.sent().as(Ht).poll]}}))}))},t.prototype.updatePollOption=function(e,t,n){return Object(o.Gb)(this,void 0,void 0,(function(){var r,i,s;return Object(o.Rb)(this,(function(a){switch(a.label){case 0:return r=Object(o.B)("number",e)&&Object(o.B)("number",t)&&Object(o.B)("string",n)&&""!==n.trim(),Object(o.hc)(r).throw(o.fc.invalidParameters),i=o.v.of(this._iid).requestQueue,s=new qt({pollId:e,pollOptionId:t,optionText:n}),[4,i.send(s)];case 1:return[2,a.sent().as(Vt).poll]}}))}))},t.prototype.deletePollOption=function(e,t){return Object(o.Gb)(this,void 0,void 0,(function(){var n,r,i;return Object(o.Rb)(this,(function(s){switch(s.label){case 0:return n=Object(o.B)("number",e)&&Object(o.B)("number",t),Object(o.hc)(n).throw(o.fc.invalidParameters),r=o.v.of(this._iid).requestQueue,i=new Gt({pollId:e,pollOptionId:t}),[4,r.send(i)];case 1:return s.sent(),[2]}}))}))},t.prototype.votePoll=function(e,t){return Object(o.Gb)(this,void 0,void 0,(function(){var n,r,i,s,a,u,c;return Object(o.Rb)(this,(function(l){switch(l.label){case 0:return n=Object(o.B)("number",e)&&Object(o.k)("number",t),Object(o.hc)(n).throw(o.fc.invalidParameters),r=o.v.of(this._iid),i=r.requestQueue,s=r.dispatcher,a=new zt({reqId:this._generateRequestId(),channelUrl:this.url,channelType:this.channelType,pollId:e,pollOptionIds:t}),[4,i.send(a)];case 1:return u=l.sent(),c=u.as(Wt).event,s.dispatch(new o.L({event:c,source:o.x.EVENT_POLL_VOTED})),[2,c]}}))}))},t.prototype.getPollChangeLogsSinceTimestamp=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){return Object(o.Rb)(this,(function(t){switch(t.label){case 0:return Object(o.hc)(Object(o.B)("number",e)).throw(o.fc.invalidParameters),[4,o.M.of(this._iid).getPollChangeLogs(this.url,this.channelType,e)];case 1:return[2,t.sent()]}}))}))},t.prototype.getPollChangeLogsSinceToken=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){return Object(o.Rb)(this,(function(t){switch(t.label){case 0:return Object(o.hc)(Object(o.B)("string",e,!0)),[4,o.M.of(this._iid).getPollChangeLogs(this.url,this.channelType,e)];case 1:return[2,t.sent()]}}))}))},t.prototype.createPollListQuery=function(e){return void 0===e&&(e=10),new o.ic(this._iid,{channelUrl:this.url,channelType:this.channelType,limit:e})},t.prototype.createPollVoterListQuery=function(e,t,n){return void 0===n&&(n=20),new o.lc(this._iid,{channelUrl:this.url,channelType:this.channelType,pollId:e,pollOptionId:t,limit:n})},t}(o.G),hn=function(e){function t(t){void 0===t&&(t={});var n=e.call(this)||this;return Object.keys(t).forEach((function(e){n.hasOwnProperty(e)&&(n[e]=t[e])})),n}return Object(o.A)(t,e),t}((function(){this.onConnected=o.wb,this.onReconnectStarted=o.wb,this.onReconnectSucceeded=o.wb,this.onReconnectFailed=o.wb,this.onDisconnected=o.wb})),dn=function(e){function t(t){void 0===t&&(t={});var n=e.call(this)||this;return Object.keys(t).forEach((function(e){n.hasOwnProperty(e)&&(n[e]=t[e])})),n}return Object(o.A)(t,e),t}((function(){this.onSessionExpired=o.wb,this.onSessionTokenRequired=function(e){return e(null)},this.onSessionError=o.wb,this.onSessionRefreshed=o.wb,this.onSessionClosed=o.wb})),fn=function(e){function t(t){void 0===t&&(t={});var n=e.call(this)||this;return Object.keys(t).forEach((function(e){n.hasOwnProperty(e)&&(n[e]=t[e])})),n}return Object(o.A)(t,e),t}((function(){this.onFriendsDiscovered=o.wb,this.onTotalUnreadMessageCountChanged=o.wb,this.onTotalUnreadMessageCountUpdated=o.wb})),pn=function(e){function t(t){var n=t.limit,r=t.token,i=t.userIdsFilter,s=t.metaDataKeyFilter,a=t.metaDataValuesFilter,u=t.nicknameStartsWithFilter,c=e.call(this)||this;return c.method=o.a.GET,c.path=o.Sb,c.params=Object(o.Tb)({limit:n,token:r,user_ids:i,metadatakey:s,metadatavalues_in:a,nickname_startswith:u}),c}return Object(o.A)(t,e),t}(o.Ub),mn=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.users=n.users.map((function(e){return new o.u(t,e)})),r.next=n.next,r}return Object(o.A)(t,e),t}(o.Wb),gn=function(e){function t(t,n){var r,i,o,s=this;return(s=e.call(this,t,n)||this).userIdsFilter=null,s.metaDataKeyFilter=null,s.metaDataValuesFilter=null,s.nicknameStartsWithFilter=null,s.userIdsFilter=null!==(r=n.userIdsFilter)&&void 0!==r?r:null,s.metaDataKeyFilter=null!==(i=n.metaDataKeyFilter)&&void 0!==i?i:null,s.metaDataValuesFilter=null!==(o=n.metaDataValuesFilter)&&void 0!==o?o:null,s.nicknameStartsWithFilter=n.nicknameStartsWithFilter||null,s}return Object(o.A)(t,e),t.prototype._validate=function(){return e.prototype._validate.call(this)&&Object(o.k)("string",this.userIdsFilter,!0)&&Object(o.B)("string",this.metaDataKeyFilter,!0)&&Object(o.k)("string",this.metaDataValuesFilter,!0)&&Object(o.B)("string",this.metaDataKeyFilter,!0)},t.prototype.next=function(){return Object(o.Gb)(this,void 0,void 0,(function(){var e,t,n,r,i,s;return Object(o.Rb)(this,(function(a){switch(a.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,e=o.v.of(this._iid).requestQueue,t=new pn(Object(o.jc)(Object(o.Vb)(Object(o.Vb)({},this),{token:this._token}))),[4,e.send(t)]):[3,2]:[3,5];case 1:return n=a.sent(),r=n.as(mn),i=r.users,s=r.next,this._token=s,this._hasNext=!!s,this._isLoading=!1,[2,i];case 2:return[2,[]];case 3:throw o.fc.queryInProgress;case 4:return[3,6];case 5:throw o.fc.invalidParameters;case 6:return[2]}}))}))},t}(o.N),bn=function(e){function t(t){var n=t.userId,r=t.limit,i=t.token,s=t.userIdsFilter,a=e.call(this)||this;return a.method=o.a.GET,a.path="".concat(o.Sb,"/").concat(n,"/block"),a.params=Object(o.Tb)({limit:r,token:i,user_ids:s}),a}return Object(o.A)(t,e),t}(o.Ub),vn=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.users=n.users.map((function(e){return new o.u(t,e)})),r.next=n.next,r}return Object(o.A)(t,e),t}(o.Wb),yn=function(e){function t(t,n){var r,i=this;return(i=e.call(this,t,n)||this).userIdsFilter=null,i.userIdsFilter=null!==(r=n.userIdsFilter)&&void 0!==r?r:null,i}return Object(o.A)(t,e),t.prototype._validate=function(){return e.prototype._validate.call(this)&&Object(o.k)("string",this.userIdsFilter,!0)},t.prototype.next=function(){return Object(o.Gb)(this,void 0,void 0,(function(){var e,t,n,r,i,s,a,u;return Object(o.Rb)(this,(function(c){switch(c.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,e=o.v.of(this._iid),t=e.sdkState,n=e.requestQueue,r=new bn(Object(o.jc)(Object(o.Vb)(Object(o.Vb)({},this),{userId:t.userId,token:this._token}))),[4,n.send(r)]):[3,2]:[3,5];case 1:return i=c.sent(),s=i.as(vn),a=s.users,u=s.next,this._token=u,this._hasNext=!!u,this._isLoading=!1,[2,a];case 2:return[2,[]];case 3:throw o.fc.queryInProgress;case 4:return[3,6];case 5:throw o.fc.invalidParameters;case 6:return[2]}}))}))},t}(o.N),_n=function(e){function t(t){var n=t.userId,r=t.limit,i=t.token,s=e.call(this)||this;return s.method=o.a.GET,s.path="".concat(o.Sb,"/").concat(encodeURIComponent(n),"/friends"),s.params={limit:r,token:i},s}return Object(o.A)(t,e),t}(o.Ub),wn=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.hasMore=n.has_more,r.users=n.users.map((function(e){return new o.u(t,e)})),r.next=n.next,r}return Object(o.A)(t,e),t}(o.Wb),En=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.A)(t,e),t.prototype._validate=function(){return e.prototype._validate.call(this)},t.prototype.next=function(){return Object(o.Gb)(this,void 0,void 0,(function(){var e,t,n,r,i,s,a,u,c;return Object(o.Rb)(this,(function(l){switch(l.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,e=o.v.of(this._iid),t=e.sdkState,n=e.requestQueue,r=new _n(Object(o.Vb)(Object(o.Vb)({},this),{userId:t.userId,token:this._token})),[4,n.send(r)]):[3,2]:[3,5];case 1:return i=l.sent(),s=i.as(wn),a=s.users,u=s.hasMore,c=s.next,this._token=c,this._hasNext=u,this._isLoading=!1,[2,a];case 2:return[2,[]];case 3:throw o.fc.queryInProgress;case 4:return[3,6];case 5:throw o.fc.invalidParameters;case 6:return[2]}}))}))},t}(o.N),Sn={},Mn=function(){function e(e){var t=e.dbname,n=e.itemSizeLimit,r=void 0===n?1048576:n,i=e.cacheLimit,o=void 0===i?256:i,s=e.blockHashBase,a=void 0===s?2:s,u=e.blockHashMultiplier,c=void 0===u?10:u,l=e.blockHashConstant,h=void 0===l?11:l,d=e.transactionApplyDelay,f=void 0===d?200:d,p=e.disableLogger,m=void 0!==p&&p;return Sn[t]||(this.itemSizeLimit=r,this.cacheLimit=o,this.blockHashBase=a,this.blockHashMultiplier=c,this.blockHashConstant=h,this.transactionApplyDelay=f,this.disableLogger=m,Sn[t]=this),Sn[t]}return e.get=function(e){return Sn[e]},e}();!function(e){e[e.UNKNOWN_ERROR=6e7]="UNKNOWN_ERROR",e[e.STORE_NOT_DEFINED=61001e3]="STORE_NOT_DEFINED",e[e.STORE_NOT_AVAILABLE=61001001]="STORE_NOT_AVAILABLE",e[e.STORE_NOT_AVAILABLE_IN_PRIVATE_BROWSING=61001002]="STORE_NOT_AVAILABLE_IN_PRIVATE_BROWSING",e[e.STORE_IS_FULL=61001003]="STORE_IS_FULL",e[e.STORE_NOT_INITIALIZED=61001004]="STORE_NOT_INITIALIZED",e[e.STORE_INVALID_KEY_TYPE=61002e3]="STORE_INVALID_KEY_TYPE",e[e.STORE_BROKEN_INTEGRITY=61002001]="STORE_BROKEN_INTEGRITY",e[e.STORE_BROKEN_BLOB=61002002]="STORE_BROKEN_BLOB",e[e.STORE_ENCRYPTION_INVALID=61002003]="STORE_ENCRYPTION_INVALID",e[e.STORE_ITEM_SIZE_LIMIT_EXCEEDED=61017e3]="STORE_ITEM_SIZE_LIMIT_EXCEEDED",e[e.STORE_READ_FAILED=61017001]="STORE_READ_FAILED",e[e.STORE_WRITE_FAILED=61017002]="STORE_WRITE_FAILED",e[e.DATABASE_SCHEMA_NOT_ON_UPGRADE=62002e3]="DATABASE_SCHEMA_NOT_ON_UPGRADE",e[e.COLLECTION_NOT_READY=63001e3]="COLLECTION_NOT_READY",e[e.COLLECTION_KEY_NOT_MATCH=63002e3]="COLLECTION_KEY_NOT_MATCH",e[e.COLLECTION_QUERY_NOT_VALID=63002001]="COLLECTION_QUERY_NOT_VALID",e[e.COLLECTION_KEY_NOT_FOUND=63004e3]="COLLECTION_KEY_NOT_FOUND",e[e.COLLECTION_KEY_NOT_GIVEN=63004001]="COLLECTION_KEY_NOT_GIVEN",e[e.COLLECTION_INSERT_DUPLICATE=63009e3]="COLLECTION_INSERT_DUPLICATE",e[e.COLLECTION_WRITE_FAILED=63017e3]="COLLECTION_WRITE_FAILED",e[e.COLLECTION_ITEM_SIZE_LIMIT_EXCEEDED=63017001]="COLLECTION_ITEM_SIZE_LIMIT_EXCEEDED",e[e.INDEX_TABLE_IS_REQUIRED=65001e3]="INDEX_TABLE_IS_REQUIRED",e[e.INDEX_TYPE_NOT_MATCH=65002e3]="INDEX_TYPE_NOT_MATCH",e[e.COMPARE_TYPE_NOT_MATCH=69002001]="COMPARE_TYPE_NOT_MATCH",e[e.CIRCULAR_REFERENCE_FOUND=69002002]="CIRCULAR_REFERENCE_FOUND"}(cn||(cn={}));var On,An=function(e){function t(n){var r=n.code,i=void 0===r?cn.UNKNOWN_ERROR:r,o=n.message,s=void 0===o?"Unknown error occurred.":o,a=e.call(this,s)||this;return a.code=i,Object.setPrototypeOf(a,t.prototype),a}return Object(o.A)(t,e),Object.defineProperty(t,"storeNotDefined",{get:function(){return new t({code:cn.STORE_NOT_DEFINED,message:"Store is not defined. Specify the store on NestDB()"})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"storeNotAvailable",{get:function(){return new t({code:cn.STORE_NOT_AVAILABLE,message:"Store is not available. Check your environment settings."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"storeNotAvailableInPrivateBrowsing",{get:function(){return new t({code:cn.STORE_NOT_AVAILABLE_IN_PRIVATE_BROWSING,message:"Store is not available because it is in private browsing."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"storeIsFull",{get:function(){return new t({code:cn.STORE_IS_FULL,message:"Store is full."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"storeNotInitialized",{get:function(){return new t({code:cn.STORE_NOT_INITIALIZED,message:"Store is not initialized."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"storeKeyTypeIsInvalid",{get:function(){return new t({code:cn.STORE_INVALID_KEY_TYPE,message:"Store key should be string type."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"storeBrokenIntegrity",{get:function(){return new t({code:cn.STORE_BROKEN_INTEGRITY,message:"Data should be in a store but it does not. Integrity is broken."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"storeBrokenBlob",{get:function(){return new t({code:cn.STORE_BROKEN_BLOB,message:"Data should be in a store but it does not. Blob data is broken."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"storeEncryptionInvalid",{get:function(){return new t({code:cn.STORE_ENCRYPTION_INVALID,message:"Encryption algorithm has changed. All the store should reset."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"storeItemSizeExceeded",{get:function(){return new t({code:cn.STORE_ITEM_SIZE_LIMIT_EXCEEDED,message:"The size of the item exceeds the limit that the store allows."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"storeReadFailed",{get:function(){return new t({code:cn.STORE_READ_FAILED,message:"Failed to read from store."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"storeWriteFailed",{get:function(){return new t({code:cn.STORE_WRITE_FAILED,message:"Failed to write to store."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"databaseSchemaNotOnUpgrade",{get:function(){return new t({code:cn.DATABASE_SCHEMA_NOT_ON_UPGRADE,message:"Committing schema is not allowed when upgrade is not running."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"collectionNotReady",{get:function(){return new t({code:cn.COLLECTION_NOT_READY,message:"Collection is not ready due to an error during initialization."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"collectionKeyNotMatch",{get:function(){return new t({code:cn.COLLECTION_KEY_NOT_MATCH,message:"keyName of collection could not change."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"collectionQueryNotValid",{get:function(){return new t({code:cn.COLLECTION_QUERY_NOT_VALID,message:"Query parameter is not a valid format."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"collectionInsertDuplicate",{get:function(){return new t({code:cn.COLLECTION_INSERT_DUPLICATE,message:"The key already exists."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"collectionKeyNotFound",{get:function(){return new t({code:cn.COLLECTION_KEY_NOT_FOUND,message:"The key is not found."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"collectionKeyNotGiven",{get:function(){return new t({code:cn.COLLECTION_KEY_NOT_GIVEN,message:"The item should contain [keyName] property."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"collectionWriteFailed",{get:function(){return new t({code:cn.COLLECTION_WRITE_FAILED,message:"Failed to write an item."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"collectionItemSizeExceeded",{get:function(){return new t({code:cn.COLLECTION_ITEM_SIZE_LIMIT_EXCEEDED,message:"The size of the item exceeds the limit that a collection allows."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"indexTableIsRequired",{get:function(){return new t({code:cn.INDEX_TABLE_IS_REQUIRED,message:"Index table is required."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"indexTypesNotMatch",{get:function(){return new t({code:cn.INDEX_TYPE_NOT_MATCH,message:"Indexed column should have primitive type."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"compareTypesNotMatch",{get:function(){return new t({code:cn.COMPARE_TYPE_NOT_MATCH,message:"Values to compare have different types."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"circularReferenceFound",{get:function(){return new t({code:cn.CIRCULAR_REFERENCE_FOUND,message:"Cannot handle circular referenced object."})},enumerable:!1,configurable:!0}),t}(Error);!function(e){e.INIT="init",e.READY="ready",e.CLOSED="closed"}(On||(On={}));var Cn,Tn=function(e,t){if(void 0===t&&(t=new WeakMap),"object"==typeof e&&null!==e){if(t.has(e))throw An.circularReferenceFound;t.set(e,!0);var n=void 0;if(Array.isArray(e))n=e.map((function(e){return Tn(e,t)}));else if(e instanceof RegExp)n=e;else if(e instanceof Date)n=e;else for(var r in n={},e)n[r]=Tn(e[r],t);return t.delete(e),n}return e},kn=function(e,t){if(null==t)return 1;if(null==e)return-1;if(typeof e!=typeof t)throw An.compareTypesNotMatch;var n=0;switch(typeof e){case"boolean":case"number":n=e-t;break;case"string":n=e.localeCompare(t)}return n},xn=function(e,t){for(var n=0,r=0;r<e.length;r++)n=e.charCodeAt(r)+(n<<6)+(n<<16)-n;return(n>>>0)%t},jn=function(e){return new Promise((function(t){setTimeout((function(){return t()}),e)}))},In=function(e,t){if(!t)return!1;if("function"!=typeof e){for(var n in e)if(["/and","&&"].includes(n)){if(e[n].some((function(e){return!In(e,t)})))return!1}else if(["/or","||"].includes(n)){if(e[n].every((function(e){return!In(e,t)})))return!1}else if("/where"===n){if(!(0,e[n])(t))return!1}else{var r=n;if("object"==typeof e[r]){var i=e[r];for(var o in i)switch(o){case"/eq":case"=":if((s=t[r])!==(a=i[o]))return!1;break;case"/neq":case"!=":if((s=t[r])===(a=i[o]))return!1;break;case"/gt":case">":var s=t[r],a=i[o];if(!(kn(s,a)>0))return!1;break;case"/gte":case">=":if(s=t[r],a=i[o],!(kn(s,a)>=0))return!1;break;case"/lt":case"<":if(s=t[r],a=i[o],!(kn(s,a)<0))return!1;break;case"/lte":case"<=":if(s=t[r],a=i[o],!(kn(s,a)<=0))return!1;break;case"/in":if(s=t[r],!(a=i[o]).includes(s))return!1;break;case"/nin":if(s=t[r],(a=i[o]).includes(s))return!1;break;case"/contain":if(s=t[r],a=i[o],!s.includes(a))return!1;break;case"/regex":if(s=t[r],!(a=i[o]).test(s))return!1;break;case"/where":if(s=t[r],!(0,i[o])(s))return!1}}else if("function"==typeof e[r]){if(!e[r](t[r]))return!1}else if(e[r]!==t[r])return!1}return!0}return e(t)},Rn=function(){},Nn=function(){return Promise.resolve()},Pn=function(e){return e},Dn=function(e,t){t()};!function(e){e[e.FORWARD=0]="FORWARD",e[e.BACKWARD=1]="BACKWARD"}(Cn||(Cn={}));var Un,Ln,Fn,Bn=function(){function e(e){var t=e.initialPrevValue,n=void 0===t?null:t,r=e.initialNextValue,i=void 0===r?null:r,o=e.iterator,s=e.map,a=void 0===s?Pn:s,u=e.backward,c=void 0===u?Nn:u,l=e.forward,h=void 0===l?Nn:l,d=e.complete,f=void 0===d?Rn:d;this._prevValue=n,this._nextValue=i,this._error=null,this._map=a,this._backward=c,this._forward=h,this._iterator=o,this._complete=f}return Object.defineProperty(e.prototype,"prevValue",{get:function(){return this._map(this._prevValue)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextValue",{get:function(){return this._map(this._nextValue)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"error",{get:function(){return this._error},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasPrevious",{get:function(){return!!this._prevValue},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasNext",{get:function(){return!!this._nextValue},enumerable:!1,configurable:!0}),e.prototype.prev=function(){return Object(o.Gb)(this,void 0,void 0,(function(){var e,t,n;return Object(o.Rb)(this,(function(r){switch(r.label){case 0:if(!this.hasPrevious)return[3,6];r.label=1;case 1:return r.trys.push([1,3,,4]),e=this._prevValue,t=this,[4,this._backward()];case 2:return t._prevValue=r.sent()||null,this._nextValue=e,[3,4];case 3:return n=r.sent(),this._error=n,[3,4];case 4:return[4,this._iterator(this)];case 5:return[2,r.sent()];case 6:this._complete(),r.label=7;case 7:return[2]}}))}))},e.prototype.next=function(){return Object(o.Gb)(this,void 0,void 0,(function(){var e,t,n;return Object(o.Rb)(this,(function(r){switch(r.label){case 0:if(!this.hasNext)return[3,6];r.label=1;case 1:return r.trys.push([1,3,,4]),e=this._nextValue,t=this,[4,this._forward()];case 2:return t._nextValue=r.sent()||null,this._prevValue=e,[3,4];case 3:return n=r.sent(),this._error=n,[3,4];case 4:return[4,this._iterator(this)];case 5:return[2,r.sent()];case 6:this._complete(),r.label=7;case 7:return[2]}}))}))},e.prototype.stop=function(){this._prevValue=null,this._nextValue=null,this._complete()},e}(),Hn=function(){function e(e){var t=e.condition,n=void 0===t?{}:t,r=e.backward,i=void 0!==r&&r,o=e.blockManager,s=e.indexer;this.condition=n,this.backward=i,this._blockManager=o,this._indexer=s}return e.prototype.findOptimizedStartPosition=function(){var e=this,t=["=","/eq",">",">=","/gt","/gte"],n=["=","/eq","<","<=","/lt","/lte"];if(this.backward){var r=this._indexer.origin.length-1;if("function"!=typeof this.condition)for(var i in this._indexer.fields){var o=this._indexer.fields[i],s=1;if("-"===o[0]&&(o=o.slice(1),s=-1),this.condition[o])if("object"==typeof this.condition[o]){var a=s>0?n:t;for(var u in this.condition[o])if(a.includes(u))for(var c=r;c>=0;c--)if(s*kn(this._indexer.origin[c].columnValues[i],this.condition[o][u])<=0){r=c;break}}else for(c=r;c>=0;c--)if(s*kn(this._indexer.origin[c].columnValues[i],this.condition[o])<=0){r=c;break}}return Math.min(r+1,this._indexer.origin.length-1)}var l=0;if("function"!=typeof this.condition){var h=function(r){var i=d._indexer.fields[r],o=1;if("-"===i[0]&&(i=i.slice(1),o=-1),d.condition[i])if("object"==typeof d.condition[i])Object.keys(d.condition[i]).forEach((function(s){if((o>0?t:n).includes(s))for(var a=l;a<e._indexer.origin.length;a++)if(o*kn(e._indexer.origin[a].columnValues[r],e.condition[i][s])>=0){l=a;break}}));else for(var s=l;s<d._indexer.origin.length;s++)if(o*kn(d._indexer.origin[s].columnValues[r],d.condition[i])>=0){l=s;break}},d=this;for(i=0;i<this._indexer.fields.length;i++)h(i)}return Math.max(l-1,0)},e.prototype.each=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){var t,n,r,i,s,a,u,c=this;return Object(o.Rb)(this,(function(l){switch(l.label){case 0:if(t=this.findOptimizedStartPosition(),n=0,this.backward&&this._indexer.origin[t]&&(n=this._indexer.origin[t].keys.length-1),r=function(){if(c._indexer.origin[t]){if(!c._indexer.origin[t].keys[++n]){if(!c._indexer.origin[++t])return!1;n=0}return!0}return!1},i=function(){if(c._indexer.origin[t]){if(!c._indexer.origin[t].keys[--n]){if(!c._indexer.origin[--t])return!1;n=c._indexer.origin[t].keys.length-1}return!0}return!1},s=null,!this._indexer.origin[t])return[3,4];a=this.backward?i:r,l.label=1;case 1:return[4,this._blockManager.getFromBlock(this._indexer.origin[t].keys[n])];case 2:if((u=l.sent())&&In(this.condition,u))return s=u,[3,4];l.label=3;case 3:if(a())return[3,1];l.label=4;case 4:return[4,new Promise((function(a){var u=new Bn({initialNextValue:Tn(s),iterator:e,forward:function(){return Object(o.Gb)(c,void 0,void 0,(function(){var e,s;return Object(o.Rb)(this,(function(o){switch(o.label){case 0:e=this.backward?i:r,o.label=1;case 1:return e()?[4,this._blockManager.getFromBlock(this._indexer.origin[t].keys[n])]:[3,3];case 2:return(s=o.sent())&&In(this.condition,s)?[2,Tn(s)]:[3,1];case 3:return[2,null]}}))}))},backward:function(){return Object(o.Gb)(c,void 0,void 0,(function(){var e,s;return Object(o.Rb)(this,(function(o){switch(o.label){case 0:e=this.backward?r:i,o.label=1;case 1:return e()?[4,this._blockManager.getFromBlock(this._indexer.origin[t].keys[n])]:[3,3];case 2:return(s=o.sent())&&In(this.condition,s)?[2,Tn(s)]:[3,1];case 3:return[2,null]}}))}))},complete:a});e(u)}))];case 5:return[2,l.sent()]}}))}))},e}(),qn=function(){function e(e){var t=e.condition,n=void 0===t?{}:t,r=e.backward,i=void 0!==r&&r,o=e.mutex,s=e.blockManager,a=e.indexer;this._mutex=o,this._iterator=new Hn({condition:n,backward:i,blockManager:s,indexer:a})}return e.prototype.fetch=function(e){return void 0===e&&(e={}),Object(o.Gb)(this,void 0,void 0,(function(){var t,n,r,i,s=this;return Object(o.Rb)(this,(function(a){switch(a.label){case 0:if(t=Math.max(e.offset||0,0),0===(n="number"==typeof e.limit?e.limit:Number.MAX_SAFE_INTEGER))return[2,[]];if(n<0)throw An.collectionQueryNotValid;a.label=1;case 1:return a.trys.push([1,4,,5]),r=[],[4,this._mutex.lock()];case 2:return a.sent(),[4,this._iterator.each((function(e){return Object(o.Gb)(s,void 0,void 0,(function(){return Object(o.Rb)(this,(function(i){return e.error?e.stop():e.hasNext?0===t?(r.push(e.nextValue),0<n&&n<=r.length?e.stop():e.next()):(t--,e.next()):e.stop(),[2]}))}))}))];case 3:return a.sent(),this._mutex.unlock(),[2,r];case 4:throw i=a.sent(),this._mutex.unlock(),i;case 5:return[2]}}))}))},e.prototype.count=function(){return Object(o.Gb)(this,void 0,void 0,(function(){var e,t,n=this;return Object(o.Rb)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),e=0,[4,this._mutex.lock()];case 1:return r.sent(),[4,this._iterator.each((function(t){return Object(o.Gb)(n,void 0,void 0,(function(){return Object(o.Rb)(this,(function(n){return t.error?t.stop():t.hasNext?(e++,t.next()):t.stop(),[2]}))}))}))];case 2:return r.sent(),this._mutex.unlock(),[2,e];case 3:throw t=r.sent(),this._mutex.unlock(),t;case 4:return[2]}}))}))},e}(),Vn=function(e){return"".concat("nest","@").concat(e)},Gn=function(e,t){return"".concat(Vn(e),"/").concat(t)},zn=function(e,t){return"".concat(Gn(e,t),".metadata")},Wn=function(e,t){return"".concat(Gn(e,t),"/block.")},Kn=function(e,t){return"".concat(Gn(e,t),"/blob.")},Yn=function(){function e(e){var t=e.dbname,n=e.collectionName,r=e.store;this.dbname=t,this.collectionName=n,this.store=r}return e.prototype.get=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){var t,n,r,i,s,a,u,c,l;return Object(o.Rb)(this,(function(o){switch(o.label){case 0:return[4,this.store.get(e)];case 1:return(t=o.sent())?(n=t.data,r=t.type,"undefined"==typeof fetch?[3,4]:[4,fetch(n)]):[3,5];case 2:return[4,o.sent().blob()];case 3:return[2,o.sent()];case 4:for(i=[],s=atob(n.split(",")[1]),a=0;a<s.length;a+=512){for(u=s.slice(a,a+512),c=new Array(u.length),l=0;l<u.length;l++)c[l]=u.charCodeAt(l);i.push(new Uint8Array(c))}return[2,new Blob(i,{type:r})];case 5:return[2,null]}}))}))},e.prototype.save=function(e,t){return void 0===t&&(t="".concat(Date.now())),Object(o.Gb)(this,void 0,void 0,(function(){var n,r,i,s,a=this;return Object(o.Rb)(this,(function(o){switch(o.label){case 0:return[4,new Promise((function(n){var r=function(e,t,n,r){return void 0===r&&(r=0),"".concat(Kn(e,t)).concat(n,".").concat(r)}(a.dbname,a.collectionName,t),i=new FileReader;i.onload=function(){n({blobId:r,data:i.result,type:e.type})},i.readAsDataURL(e)}))];case 1:return n=o.sent(),r=n.blobId,i=n.data,s=n.type,[4,this.store.set({key:r,value:{data:i,type:s}})];case 2:return o.sent(),[2,r]}}))}))},e.prototype.remove=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){return Object(o.Rb)(this,(function(t){switch(t.label){case 0:return[4,this.store.remove(e)];case 1:return t.sent(),[2]}}))}))},e.prototype.clear=function(){return Object(o.Gb)(this,void 0,void 0,(function(){var e,t,n=this;return Object(o.Rb)(this,(function(r){switch(r.label){case 0:return e=Kn(this.dbname,this.collectionName),[4,this.store.getAllKeys()];case 1:return t=r.sent(),[4,Promise.all(t.filter((function(t){return t.startsWith(e)})).map((function(e){return Object(o.Gb)(n,void 0,void 0,(function(){return Object(o.Rb)(this,(function(t){switch(t.label){case 0:return[4,this.store.remove(e)];case 1:return[2,t.sent()]}}))}))})))];case 2:return r.sent(),[2]}}))}))},e}();!function(e){e[e.COMMIT=0]="COMMIT",e[e.WRITE=1]="WRITE",e[e.ERROR=2]="ERROR"}(Un||(Un={})),function(e){e.PENDING="pending",e.PERSISTENT="persistent",e.VOLATILE="volatile"}(Ln||(Ln={})),function(e){e[e.NO_CACHE=0]="NO_CACHE",e[e.DEFAULT=1]="DEFAULT",e[e.PERSISTENT=2]="PERSISTENT"}(Fn||(Fn={}));var Qn,Jn,Zn=[Ln.PENDING,Ln.VOLATILE],$n={},Xn=function(){function e(e){var t=e.dbname,n=e.limit,r=void 0===n?256:n;return $n[t]||(this.dbname=t,this._items=[],this._limit=r,$n[t]=this),$n[t]}return e.get=function(e){return $n[e]},Object.defineProperty(e.prototype,"items",{get:function(){return this._items},enumerable:!1,configurable:!0}),e.prototype.find=function(e,t,n){return void 0===n&&(n=Fn.DEFAULT),Object(o.Gb)(this,void 0,void 0,(function(){var r,i;return Object(o.Rb)(this,(function(o){switch(o.label){case 0:return(r=this.get(t))?[3,2]:[4,e.get(t)];case 1:return(i=o.sent())&&(r={key:t,value:i,state:n===Fn.PERSISTENT?Ln.PERSISTENT:Ln.VOLATILE},this.put(r)),[3,3];case 2:n===Fn.PERSISTENT&&(r.state=Ln.PERSISTENT),o.label=3;case 3:return[2,r]}}))}))},e.prototype.get=function(e,t){void 0===t&&(t=Fn.DEFAULT);var n=this._items.map((function(e){return e.key})).indexOf(e);if(n>-1){var r=this._items[n];return t===Fn.PERSISTENT&&(r.state=Ln.PERSISTENT),t!==Fn.NO_CACHE&&this.put(r),r}return null},e.prototype.put=function(e){var t,n;if(this._limit>0){var r=this._items.map((function(e){return e.key})).indexOf(e.key);if(r>-1)Zn.includes(this._items[r].state)&&Zn.includes(e.state)?(this._items.splice(r,1),this._items.push(e)):(this._items[r].state=e.state,this._items[r].value=e.value);else{this._items.push(e);var i=this._items.filter((function(e){return e.state===Ln.VOLATILE})).length-this._limit;if(i>0){var s=[];try{for(var a=Object(o.gc)(this._items),u=a.next();!u.done;u=a.next()){var c=u.value;c.state===Ln.VOLATILE&&i>0?i--:s.push(c)}}catch(e){t={error:e}}finally{try{u&&!u.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}this._items=s}}}},e.prototype.remove=function(e){var t=this._items.map((function(e){return e.key})).indexOf(e);t>-1&&this._items.splice(t,1)},e.prototype.clearByCondition=function(e){this._items=this._items.filter((function(t){return!e(t)}))},e.prototype.clear=function(e){void 0===e&&(e=!1),this._items=e?[]:this._items.filter((function(e){return e.state!==Ln.VOLATILE}))},e}(),er=function(){function e(e){var t=e.dbname,n=e.collectionName,r=e.store;this._requests=[],this._onCommit=new Map,this._onWrite=new Map,this._onError=new Map,this.dbname=t,this.collectionName=n,this.metadataKey=function(e,t){return"".concat(Gn(e,t),"/trans.metadata")}(t,n),this.recordsetKey=function(e,t){return"".concat(Gn(e,t),"/trans.recordset")}(t,n),this._store=r}return Object.defineProperty(e.prototype,"generation",{get:function(){return this._metadata?this._metadata.generation:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"requestCount",{get:function(){return this._requests.length},enumerable:!1,configurable:!0}),e.prototype._getReducedRecordset=function(e){return void 0===e&&(e=[]),Object(o.Gb)(this,void 0,void 0,(function(){var t;return Object(o.Rb)(this,(function(n){switch(n.label){case 0:return[4,this._store.get(this.recordsetKey)];case 1:return(t=n.sent()||[]).push.apply(t,Object(o.dc)([],Object(o.ec)(e),!1)),[2,this._reduceRecordSet(t)]}}))}))},e.prototype._reduceRecordSet=function(e){for(var t=[],n={},r=e.length-1;r>=0;r--){for(var i=e[r],o=[],s=i.requests.length-1;s>=0;s--){var a=i.requests[s],u=a.data;n[u.key]||(o.unshift(a),n[u.key]=!0)}o.length>0&&(i.requests=o,t.unshift(i))}return t},e.prototype._applyRecord=function(e,t){return Object(o.Gb)(this,void 0,void 0,(function(){var n,r,i,s,a,u,c,l,h;return Object(o.Rb)(this,(function(d){switch(d.label){case 0:n=Xn.get(this.dbname),r=t.generation,i=t.requests,s=null,d.label=1;case 1:return d.trys.push([1,3,,4]),[4,this._store.setMany(i.map((function(e){return Object(o.Vb)(Object(o.Vb)({},e.data),{generation:r})})))];case 2:for(a=d.sent(),u=0;u<i.length;u++)a[u]instanceof Error&&(s||(s=a[u]),c=i[u].data,n.put(Object(o.Vb)(Object(o.Vb)({},c),{state:Ln.PERSISTENT})));return[3,4];case 3:return l=d.sent(),s=l,[3,4];case 4:return s?[3,6]:(h=e.filter((function(e){return e.generation!==r})),[4,this._store.set({key:this.recordsetKey,value:h})]);case 5:return d.sent(),this._onWrite.forEach((function(e){e(i.map((function(e){return e.data})))})),[3,7];case 6:this._onError.forEach((function(e){s&&e(s)})),d.label=7;case 7:return[2]}}))}))},e.prototype.init=function(){return Object(o.Gb)(this,void 0,void 0,(function(){var e,t,n,r,i,s,a,u;return Object(o.Rb)(this,(function(c){switch(c.label){case 0:return e=this,[4,this._store.get(this.metadataKey)];case 1:return e._metadata=c.sent()||{generation:1},[4,this._getReducedRecordset()];case 2:t=c.sent(),c.label=3;case 3:c.trys.push([3,8,9,10]),n=Object(o.gc)(t),r=n.next(),c.label=4;case 4:return r.done?[3,7]:(i=r.value,[4,this._applyRecord(t,i)]);case 5:c.sent(),c.label=6;case 6:return r=n.next(),[3,4];case 7:return[3,10];case 8:return s=c.sent(),a={error:s},[3,10];case 9:try{r&&!r.done&&(u=n.return)&&u.call(n)}finally{if(a)throw a.error}return[7];case 10:return[2]}}))}))},e.prototype.on=function(e,t,n){switch(e){case Un.COMMIT:this._onCommit.set(t,n);break;case Un.WRITE:this._onWrite.set(t,n);break;case Un.ERROR:this._onError.set(t,n)}},e.prototype.requestWrite=function(e,t){this._requests.push({data:e,options:t}),Xn.get(this.dbname).put(Object(o.Vb)({state:Ln.PENDING},e))},e.prototype.requestMultipleWrite=function(e,t){var n,r,i=Xn.get(this.dbname);try{for(var s=Object(o.gc)(e),a=s.next();!a.done;a=s.next()){var u=a.value;this._requests.push({data:u,options:t}),i.put(Object(o.Vb)({state:Ln.PENDING},u))}}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}},e.prototype.clear=function(){return Object(o.Gb)(this,void 0,void 0,(function(){return Object(o.Rb)(this,(function(e){return Xn.get(this.dbname).clearByCondition((function(e){return e.state===Ln.PENDING})),this._requests=[],[2]}))}))},e.prototype.commit=function(){return Object(o.Gb)(this,void 0,void 0,(function(){var e,t,n,r,i,s,a,u,c,l,h,d,f=this;return Object(o.Rb)(this,(function(p){switch(p.label){case 0:if(!((e=this._requests).length>0))return[3,4];for(t=[],n={},u=e.length-1;u>=0;u--)r=e[u],l=r.data,n[l.key]||(n[l.key]=!0,t.unshift(r));return i={generation:this.generation,requests:t},[4,this._getReducedRecordset([i])];case 1:return s=p.sent(),[4,this._store.set({key:this.recordsetKey,value:s})];case 2:return p.sent(),this._metadata.generation++,[4,this._store.set({key:this.metadataKey,value:this._metadata})];case 3:for(p.sent(),a=Xn.get(this.dbname),u=0;u<t.length;u++)c=t[u],l=c.data,h=c.options,a.put(Object(o.Vb)(Object(o.Vb)({},l),{state:h&&h.persistent?Ln.PERSISTENT:Ln.VOLATILE}));this._requests=[],this._onCommit.forEach((function(t){t(e.map((function(e){return e.data})))})),d=Mn.get(this.dbname),setTimeout((function(){try{f._applyRecord(s,i)}catch(e){f._onError.forEach((function(t){return t(e)}))}}),d.transactionApplyDelay),p.label=4;case 4:return[2]}}))}))},e}(),tr=function(){function e(e){var t=e.blockId,n=e.keyName,r=e.items,i=void 0===r?[]:r,s=e.limit;this.blockId=t,this.keyName=n,this.limit=s,this._items=Object(o.dc)([],Object(o.ec)(i),!1)}return e.createFromCacheItem=function(t){return t?new e(t.value):null},Object.defineProperty(e.prototype,"isEmpty",{get:function(){return 0===this._items.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"items",{get:function(){return this._items},enumerable:!1,configurable:!0}),e.prototype.serialize=function(){return{blockId:this.blockId,keyName:this.keyName,limit:this.limit,items:this._items}},e.prototype.getItemByKey=function(e){var t=this,n=this._items.find((function(n){var r=n[t.keyName];return e===r}));return null!=n?n:null},e.prototype.has=function(e){var t=this;return this._items.map((function(e){return e[t.keyName]})).includes(e)},e.prototype.add=function(e){var t=this,n=this._items.map((function(e){return e[t.keyName]})).indexOf(e[this.keyName]);return n<0?this._items.length<this.limit&&(this._items.push(e),!0):(this._items[n]=e,!0)},e.prototype.remove=function(e){for(var t in this._items)if(this._items[t][this.keyName]===e)return this._items.splice(parseInt(t),1),!0;return!1},e.prototype.clear=function(){this._items=[]},e}(),nr=function(){function e(e){var t=e.dbname,n=e.collectionName,r=e.metadata,i=e.hashFunction,o=void 0===i?xn:i,s=e.transaction,a=e.store;this.dbname=t,this.collectionName=n,this.hashFunction=o,this.metadata=r,this._transaction=s,this._store=a}return Object.defineProperty(e.prototype,"keyName",{get:function(){return this.metadata.keyName},enumerable:!1,configurable:!0}),e.prototype.createBlockId=function(e,t){return void 0===t&&(t=this.metadata.blockLevel),n=this.dbname,r=this.collectionName,i=t,o="".concat(function(e,t,n){var r=n.base*Math.pow(n.multiplier,t)+n.constant;return(n.hashFunction||xn)(e,r)}(e,t,{hashFunction:this.hashFunction,base:this.metadata.blockHashBase,multiplier:this.metadata.blockHashMultiplier,constant:this.metadata.blockHashConstant})),"".concat(Wn(n,r)).concat(i,".").concat(o);var n,r,i,o},e.prototype._findBlock=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){var t,n,r,i,s;return Object(o.Rb)(this,(function(o){switch(o.label){case 0:t=Xn.get(this.dbname),n=this.metadata.blockLevel,o.label=1;case 1:return n>0?(r=this.createBlockId(e,n),[4,t.find(this._store,r)]):[3,4];case 2:if((i=o.sent())&&(null==(s=tr.createFromCacheItem(i))?void 0:s.getItemByKey(e)))return[2,s];o.label=3;case 3:return n--,[3,1];case 4:return[2,null]}}))}))},e.prototype.getFromBlock=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){var t;return Object(o.Rb)(this,(function(n){switch(n.label){case 0:return[4,this._findBlock(e)];case 1:return[2,(t=n.sent())?t.getItemByKey(e):null]}}))}))},e.prototype.putToBlock=function(e,t){return Object(o.Gb)(this,void 0,void 0,(function(){var n,r,i,s,a;return Object(o.Rb)(this,(function(o){switch(o.label){case 0:return n=Mn.get(this.dbname),r=this.createBlockId(e),i=Math.floor(this._store.itemSizeLimit/n.itemSizeLimit),[4,Xn.get(this.dbname).find(this._store,r)];case 1:return s=o.sent(),(null==(a=s?tr.createFromCacheItem(s):new tr({blockId:r,keyName:this.keyName,items:[],limit:i}))?void 0:a.add(t))?(this._transaction.requestWrite({key:a.blockId,value:a.serialize()}),[2,!0]):[2,!1]}}))}))},e.prototype.removeFromBlock=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){var t;return Object(o.Rb)(this,(function(n){switch(n.label){case 0:return[4,this._findBlock(e)];case 1:return(t=n.sent())&&t.remove(e)?(this._transaction.requestWrite({key:t.blockId,value:t.serialize()}),[2,!0]):[2,!1]}}))}))},e.prototype.clearAllBlocks=function(){return Object(o.Gb)(this,void 0,void 0,(function(){var e,t,n;return Object(o.Rb)(this,(function(r){switch(r.label){case 0:return e=Wn(this.dbname,this.collectionName),[4,this._store.getAllKeys()];case 1:return t=r.sent(),n=t.filter((function(t){return t.startsWith(e)})),[4,this._store.removeMany(n)];case 2:return r.sent(),[4,this._transaction.clear()];case 3:return r.sent(),Xn.get(this.dbname).clearByCondition((function(t){return t.key.startsWith(e)})),[2]}}))}))},e}(),rr={},ir=function(){function e(e){var t=e.dbname,n=e.collectionName,r=e.keyName,i=e.fields,o=e.transaction,s=e.store,a=this;this._origin=[],this._table=[];var u=function(e,t,n){return"".concat(Gn(e,t),"/index.").concat(n)}(t,n,i.join(">"));return rr[u]||(this.dbname=t,this.collectionName=n,this.keyName=r,this.fields=i,this.indexerKey=u,this._transaction=o,this._store=s,this._transaction.on(Un.COMMIT,this.indexerKey,(function(){return a.commit()})),this._transaction.on(Un.ERROR,this.indexerKey,(function(){return a.abort()}))),rr[u]}return e.createKey=function(e){return e.join(">")},e.parseKey=function(e){return e.split(">")},e.clearIndexerMap=function(){for(var e in rr)delete rr[e]},e.prototype._addItem=function(e){var t=e[this.keyName],n=this.getColumnValues(e),r=Object(o.ec)(this.indexOf(n),2),i=r[0];return r[1]?!this._table[i].keys.includes(t)&&(this._table[i].keys.push(t),!0):(this._table.splice(i,0,{columnValues:n,keys:[t]}),!0)},e.prototype._removeItem=function(e){var t=e[this.keyName],n=this.getColumnValues(e),r=Object(o.ec)(this.indexOf(n),2),i=r[0];if(r[1]){var s=this._table[i].keys.indexOf(t);if(s>-1)return this._table[i].keys.splice(s,1),0===this._table[i].keys.length&&this._table.splice(i,1),!0}return!1},Object.defineProperty(e.prototype,"origin",{get:function(){return this._origin},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"table",{get:function(){return this._table},enumerable:!1,configurable:!0}),e.prototype.getColumnValues=function(e){var t,n,r,i,s=[];try{for(var a=Object(o.gc)(this.fields),u=a.next();!u.done;u=a.next()){var c=u.value;if("-"===c[0]&&(c=c.slice(1)),r=e[c],void 0,i=typeof r,null!==r&&"undefined"!==i&&"boolean"!==i&&"number"!==i&&"string"!==i)throw An.indexTypesNotMatch;s.push(e[c])}}catch(e){t={error:e}}finally{try{u&&!u.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return s},e.prototype.diff=function(e,t){for(var n in this.fields){var r="-"===this.fields[n][0]?-1:1,i=kn(e[n],t[n]);if(0!==i)return r*i}return 0},e.prototype.indexOf=function(e){if(this._table.length>0){for(var t=0,n=this._table.length-1;t<=n;){var r=Math.floor((t+n)/2),i=this.diff(e,this._table[r].columnValues);if(i>0)t=r+1;else{if(!(i<0))return[r,!0];n=r-1}}return[t,!1]}return[0,!1]},e.prototype.ensure=function(){return Object(o.Gb)(this,void 0,void 0,(function(){var e,t,n,r,i,s,a,u,c,l,h,d,f,p,m,g,b;return Object(o.Rb)(this,(function(v){switch(v.label){case 0:return[4,(e=Xn.get(this.dbname)).find(this._store,this.indexerKey,Fn.PERSISTENT)];case 1:return(t=v.sent())?[3,11]:(n=Wn(this.dbname,this.collectionName),[4,this._store.getAllKeys()]);case 2:r=v.sent(),v.label=3;case 3:v.trys.push([3,8,9,10]),i=Object(o.gc)(r),s=i.next(),v.label=4;case 4:return s.done?[3,7]:(a=s.value).startsWith(n)?[4,e.find(this._store,a,Fn.NO_CACHE)]:[3,6];case 5:if(u=v.sent(),c=tr.createFromCacheItem(u))try{for(g=void 0,l=Object(o.gc)(c.items),h=l.next();!h.done;h=l.next())d=h.value,this._addItem(d)}catch(e){g={error:e}}finally{try{h&&!h.done&&(b=l.return)&&b.call(l)}finally{if(g)throw g.error}}v.label=6;case 6:return s=i.next(),[3,4];case 7:return[3,10];case 8:return f=v.sent(),p={error:f},[3,10];case 9:try{s&&!s.done&&(m=i.return)&&m.call(i)}finally{if(p)throw p.error}return[7];case 10:return this._transaction.requestWrite({key:this.indexerKey,value:this._table},{persistent:!0}),[3,12];case 11:this._origin=t.value,this._table=Tn(this._origin),v.label=12;case 12:return rr[this.indexerKey]=this,[2]}}))}))},e.prototype.drop=function(){return Object(o.Gb)(this,void 0,void 0,(function(){return Object(o.Rb)(this,(function(e){switch(e.label){case 0:return Xn.get(this.dbname).remove(this.indexerKey),[4,this._store.remove(this.indexerKey)];case 1:return e.sent(),delete rr[this.indexerKey],[2]}}))}))},e.prototype.addItem=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){return Object(o.Rb)(this,(function(t){return this._addItem(e)&&this._transaction.requestWrite({key:this.indexerKey,value:this._table},{persistent:!0}),[2]}))}))},e.prototype.removeItem=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){return Object(o.Rb)(this,(function(t){return this._removeItem(e)&&this._transaction.requestWrite({key:this.indexerKey,value:this._table},{persistent:!0}),[2]}))}))},e.prototype.clear=function(){return Object(o.Gb)(this,void 0,void 0,(function(){return Object(o.Rb)(this,(function(e){return this._table=[],this._transaction.requestWrite({key:this.indexerKey,value:this._table},{persistent:!0}),[2]}))}))},e.prototype.commit=function(){this._origin=this._table,this._table=Tn(this._origin)},e.prototype.abort=function(){this._table=Tn(this._origin)},e}(),or=function(){return"undefined"!=typeof document&&"undefined"!=typeof navigator&&"ReactNative"!==navigator.product},sr=function(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:3&n|8).toString(16)}))};!function(e){e[e.PROCESSING=0]="PROCESSING",e[e.DONE=1]="DONE"}(Qn||(Qn={})),function(e){e.NEWNODE="newnode",e.REMOVENODE="removenode",e.CLAIM_HOST="claimhost",e.SYNC_HOST="synchost",e.REQUEST_LOCK="requestlock",e.ACQUIRE_LOCK="acquirelock",e.RELEASE_LOCK="releaselock"}(Jn||(Jn={}));var ar,ur={},cr=function(){function e(e,t){void 0===t&&(t={});var n=this;return this._state=Qn.PROCESSING,this._queue=[],this._activationQueue=[],ur[e]&&!t.forceCreate||(this.nodeId=sr(),this.key=e,or()&&(t.startAsInvisible?this.registerNode():"visible"===document.visibilityState?this.claimHost():this.registerNode(),document.addEventListener("visibilitychange",(function(){"visible"===document.visibilityState&&n.claimHost()})),window.addEventListener("message",(function(e){var t,r,i=e.data,s=i.nodeId,a=i.requestId,u=i.key,c=i.op,l=i.data;if(s!==n.nodeId&&u===n.key)switch(c){case Jn.NEWNODE:n._sendSync();break;case Jn.CLAIM_HOST:n._sendSync(),n._hostId=s;break;case Jn.SYNC_HOST:if(!n.isInSync){n._activationTimeout&&clearTimeout(n._activationTimeout);var h=l,d=h.currentItemRequestId,f=h.queue,p=function(e){n._queue.findIndex((function(t){return t.requestId===e.requestId}))<0&&n._requestLock({nodeId:e.nodeId,requestId:e.requestId,key:n.key,op:Jn.REQUEST_LOCK,ts:e.ts})};try{for(var m=Object(o.gc)(f),g=m.next();!g.done;g=m.next())p(g.value)}catch(e){t={error:e}}finally{try{g&&!g.done&&(r=m.return)&&r.call(m)}finally{if(t)throw t.error}}n._currentItem=n._queue.find((function(e){return e.requestId===d})),n._completeSync()}break;case Jn.REMOVENODE:n._queue=n._queue.filter((function(e){return e.nodeId!==i.nodeId})),n._currentItem&&n._currentItem.nodeId===i.nodeId&&(n._currentItem=void 0,n._acquire(n._queue[0]));break;case Jn.REQUEST_LOCK:n._requestLock(i);break;case Jn.ACQUIRE_LOCK:var b=n._queue.find((function(e){return e.requestId===a}));n._acquire(b);break;case Jn.RELEASE_LOCK:n._release(a)}})),window.addEventListener("beforeunload",(function(){n._send(Jn.REMOVENODE)}))),ur[e]=this),ur[e]}return Object.defineProperty(e.prototype,"locked",{get:function(){return!!this._currentItem},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isHost",{get:function(){return this._hostId===this.nodeId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isInSync",{get:function(){return this._state==Qn.DONE},enumerable:!1,configurable:!0}),e.prototype._send=function(e,t){var n;void 0===t&&(t={});var r={nodeId:this.nodeId,requestId:null!==(n=null==t?void 0:t.requestId)&&void 0!==n?n:sr(),key:this.key,op:e,data:t.data,ts:Date.now()};return or()&&window.postMessage(r,"*"),r},e.prototype._acquire=function(e){e?(this._currentItem=e,this._currentItem.onAcquired&&this._currentItem.onAcquired(e.requestId)):this._currentItem=void 0},e.prototype._release=function(e){if(this._currentItem&&this._currentItem.requestId===e){var t=this._currentItem;this._currentItem=void 0,t.nodeId===this.nodeId&&this._send(Jn.RELEASE_LOCK,{requestId:t.requestId});var n=this._queue.findIndex((function(t){return t.requestId===e}));n>-1&&this._queue.splice(n,1),t.onReleased&&t.onReleased(e)}},e.prototype._requestLock=function(e){var t=this;return new Promise((function(n){var r={nodeId:e.nodeId,requestId:e.requestId,ts:e.ts,onAcquired:function(e){t.isHost&&t._send(Jn.ACQUIRE_LOCK,{requestId:e}),n()},onReleased:function(){t._acquire(t._queue[0])}},i=!1;for(var o in t._queue)if(t._queue[o].ts>r.ts){t._queue.splice(parseInt(o),0,r),i=!0;break}i||t._queue.push(r),t._currentItem||t._acquire(t._queue[0])}))},e.prototype._sendSync=function(){var e;this.isHost&&this._send(Jn.SYNC_HOST,{data:{currentItemRequestId:null===(e=this._currentItem)||void 0===e?void 0:e.requestId,queue:this._queue.map((function(e){return{nodeId:e.nodeId,requestId:e.requestId,ts:e.ts}}))}})},e.prototype._waitUntilSyncCompleted=function(){return Object(o.Gb)(this,void 0,void 0,(function(){var e=this;return Object(o.Rb)(this,(function(t){return this.isHost&&!this.isInSync?[2,new Promise((function(t){e._activationQueue.push(t)}))]:[2]}))}))},e.prototype._waitSync=function(){var e=this;this.isInSync||(this._activationTimeout=setTimeout((function(){e._completeSync()}),8))},e.prototype._completeSync=function(){this.isInSync||(this._state=Qn.DONE,this._activationQueue.forEach((function(e){return e()})),this._activationQueue=[])},e.prototype.registerNode=function(){this._send(Jn.NEWNODE),this._waitSync()},e.prototype.claimHost=function(){this._hostId=this.nodeId,this._send(Jn.CLAIM_HOST),this._waitSync()},e.prototype.lock=function(){return Object(o.Gb)(this,void 0,void 0,(function(){var e;return Object(o.Rb)(this,(function(t){switch(t.label){case 0:return[4,this._waitUntilSyncCompleted()];case 1:return t.sent(),e=this._send(Jn.REQUEST_LOCK),[4,this._requestLock(e)];case 2:return t.sent(),[2]}}))}))},e.prototype.unlock=function(){var e;(null===(e=this._currentItem)||void 0===e?void 0:e.requestId)&&this._release(this._currentItem.requestId)},e}(),lr=function(){function e(e){var t=e.dbname,n=e.collectionName,r=e.keyName,i=e.keyHash,s=e.indexes,a=e.store,u=this;this._state=On.INIT,this._indexers=[],this.dbname=t,this.name=n,this.keyName=r,this.indexes=Object(o.dc)([[r]],Object(o.ec)(s.filter((function(e){return ir.createKey(e)!==u.keyName}))),!1),this._keyHash=i,this._store=a,this._mutex=new cr(function(e,t){return"".concat(Gn(e,t),".lock")}(t,n)),this._blobContainer=new Yn({dbname:t,collectionName:n,store:a}),this._transaction=new er({dbname:t,collectionName:n,store:a})}return e.metadataOf=function(e,t,n){return Object(o.Gb)(this,void 0,void 0,(function(){var r;return Object(o.Rb)(this,(function(i){switch(i.label){case 0:return r=zn(e,t),[4,n.get(r)];case 1:return[2,i.sent()]}}))}))},Object.defineProperty(e.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isReady",{get:function(){return this._state===On.READY},enumerable:!1,configurable:!0}),e.prototype.init=function(){return Object(o.Gb)(this,void 0,void 0,(function(){var t,n,r,i,s,a,u,c,l,h,d,f,p,m,g=this;return Object(o.Rb)(this,(function(b){switch(b.label){case 0:return[4,this._mutex.lock()];case 1:b.sent(),b.label=2;case 2:return b.trys.push([2,9,,10]),t=Mn.get(this.dbname),[4,e.metadataOf(this.dbname,this.name,this._store)];case 3:return n=b.sent(),this._metadata=n||{keyName:this.keyName,blockLevel:1,blockHashBase:t.blockHashBase,blockHashMultiplier:t.blockHashMultiplier,blockHashConstant:t.blockHashConstant,indexes:this.indexes},[4,this._transaction.init()];case 4:b.sent(),this._blockManager=new nr({dbname:this.dbname,collectionName:this.name,hashFunction:this._keyHash,metadata:this._metadata,transaction:this._transaction,store:this._store}),r=Object(o.dc)([],Object(o.ec)(this.indexes),!1),i=[],s=r.map((function(e){return ir.createKey(e)})),a=n?n.indexes.map((function(e){return ir.createKey(e)})):[];try{for(u=Object(o.gc)(a),c=u.next();!c.done;c=u.next())l=c.value,s.includes(l)||i.push(ir.parseKey(l))}catch(e){p={error:e}}finally{try{c&&!c.done&&(m=u.return)&&m.call(u)}finally{if(p)throw p.error}}return(h=[]).push.apply(h,Object(o.dc)([],Object(o.ec)(r.map((function(e){var t=new ir({dbname:g.dbname,collectionName:g.name,keyName:g.keyName,fields:e,transaction:g._transaction,store:g._store});return g._indexers.push(t),t.ensure()}))),!1)),h.push.apply(h,Object(o.dc)([],Object(o.ec)(i.map((function(e){return new ir({dbname:g.dbname,collectionName:g.name,keyName:g.keyName,fields:e,transaction:g._transaction,store:g._store}).drop()}))),!1)),[4,Promise.all(h)];case 5:return b.sent(),[4,this._transaction.commit()];case 6:return b.sent(),s.sort().join(",")===a.sort().join(",")?[3,8]:(d=zn(this.dbname,this.name),this._metadata.indexes=r,[4,this._store.set({key:d,value:this._metadata})]);case 7:b.sent(),b.label=8;case 8:return this._state=On.READY,this._mutex.unlock(),[3,10];case 9:throw f=b.sent(),this._mutex.unlock(),f;case 10:return[2]}}))}))},e.prototype.close=function(){this._state=On.CLOSED},e.prototype._hasPropertyOfKeyName=function(e){var t=e[this.keyName];return"string"==typeof t&&!!t},e.prototype._getIndexerBy=function(e){var t,n;void 0===e&&(e=null),e||(e=[this.keyName]);var r=ir.createKey(e);try{for(var i=Object(o.gc)(this._indexers),s=i.next();!s.done;s=i.next()){var a=s.value;if(r===ir.createKey(a.fields))return a}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}throw An.indexTableIsRequired},e.prototype._upgradeBlockLevel=function(){return Object(o.Gb)(this,void 0,void 0,(function(){var e;return Object(o.Rb)(this,(function(t){switch(t.label){case 0:return e=zn(this.dbname,this.name),this._metadata.blockLevel++,[4,this._store.set({key:e,value:this._metadata})];case 1:return t.sent(),[2]}}))}))},e.prototype._requestInsert=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){var t,n,r,i,s,a;return Object(o.Rb)(this,(function(u){switch(u.label){case 0:return t=e[this.keyName],[4,this._blockManager.getFromBlock(t)];case 1:return u.sent()?[3,13]:[4,this._blockManager.putToBlock(t,e)];case 2:return u.sent()?[3,5]:[4,this._upgradeBlockLevel()];case 3:return u.sent(),[4,this._blockManager.putToBlock(t,e)];case 4:u.sent(),u.label=5;case 5:u.trys.push([5,10,11,12]),n=Object(o.gc)(this._indexers),r=n.next(),u.label=6;case 6:return r.done?[3,9]:[4,r.value.addItem(e)];case 7:u.sent(),u.label=8;case 8:return r=n.next(),[3,6];case 9:return[3,12];case 10:return i=u.sent(),s={error:i},[3,12];case 11:try{r&&!r.done&&(a=n.return)&&a.call(n)}finally{if(s)throw s.error}return[7];case 12:return[3,14];case 13:throw An.collectionInsertDuplicate;case 14:return[2]}}))}))},e.prototype._requestUpsert=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){var t,n,r,i,s,a,u,c,l,h,d,f,p;return Object(o.Rb)(this,(function(m){switch(m.label){case 0:return t=e[this.keyName],[4,this._blockManager.getFromBlock(t)];case 1:return(n=m.sent())?[3,13]:[4,this._blockManager.putToBlock(t,e)];case 2:return m.sent()?[3,5]:[4,this._upgradeBlockLevel()];case 3:return m.sent(),[4,this._blockManager.putToBlock(t,e)];case 4:m.sent(),m.label=5;case 5:m.trys.push([5,10,11,12]),r=Object(o.gc)(this._indexers),i=r.next(),m.label=6;case 6:return i.done?[3,9]:[4,(c=i.value).addItem(e)];case 7:m.sent(),m.label=8;case 8:return i=r.next(),[3,6];case 9:return[3,12];case 10:return s=m.sent(),h={error:s},[3,12];case 11:try{i&&!i.done&&(d=r.return)&&d.call(r)}finally{if(h)throw h.error}return[7];case 12:return[3,23];case 13:return[4,this._blockManager.putToBlock(t,e)];case 14:m.sent(),m.label=15;case 15:m.trys.push([15,21,22,23]),a=Object(o.gc)(this._indexers),u=a.next(),m.label=16;case 16:return u.done?[3,20]:0===(c=u.value).diff(c.getColumnValues(n),c.getColumnValues(e))?[3,19]:[4,c.removeItem(n)];case 17:return m.sent(),[4,c.addItem(e)];case 18:m.sent(),m.label=19;case 19:return u=a.next(),[3,16];case 20:return[3,23];case 21:return l=m.sent(),f={error:l},[3,23];case 22:try{u&&!u.done&&(p=a.return)&&p.call(a)}finally{if(f)throw f.error}return[7];case 23:return[2]}}))}))},e.prototype._requestUpdate=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){var t,n,r,i,s,a,u,c;return Object(o.Rb)(this,(function(l){switch(l.label){case 0:return t=e[this.keyName],[4,this._blockManager.getFromBlock(t)];case 1:return(n=l.sent())?[4,this._blockManager.putToBlock(t,e)]:[3,11];case 2:l.sent(),l.label=3;case 3:l.trys.push([3,9,10,11]),r=Object(o.gc)(this._indexers),i=r.next(),l.label=4;case 4:return i.done?[3,8]:0===(s=i.value).diff(s.getColumnValues(n),s.getColumnValues(e))?[3,7]:[4,s.removeItem(n)];case 5:return l.sent(),[4,s.addItem(e)];case 6:l.sent(),l.label=7;case 7:return i=r.next(),[3,4];case 8:return[3,11];case 9:return a=l.sent(),u={error:a},[3,11];case 10:try{i&&!i.done&&(c=r.return)&&c.call(r)}finally{if(u)throw u.error}return[7];case 11:return[2]}}))}))},e.prototype._requestRemove=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){var t,n,r,i,s,a;return Object(o.Rb)(this,(function(u){switch(u.label){case 0:return[4,this._blockManager.getFromBlock(e)];case 1:return(t=u.sent())?[4,this._blockManager.removeFromBlock(e)]:[3,10];case 2:u.sent(),u.label=3;case 3:u.trys.push([3,8,9,10]),n=Object(o.gc)(this._indexers),r=n.next(),u.label=4;case 4:return r.done?[3,7]:[4,r.value.removeItem(t)];case 5:u.sent(),u.label=6;case 6:return r=n.next(),[3,4];case 7:return[3,10];case 8:return i=u.sent(),s={error:i},[3,10];case 9:try{r&&!r.done&&(a=n.return)&&a.call(n)}finally{if(s)throw s.error}return[7];case 10:return[2]}}))}))},e.prototype._requestClear=function(){return Object(o.Gb)(this,void 0,void 0,(function(){var e,t,n,r,i;return Object(o.Rb)(this,(function(s){switch(s.label){case 0:return[4,this._blockManager.clearAllBlocks()];case 1:s.sent(),s.label=2;case 2:s.trys.push([2,7,8,9]),e=Object(o.gc)(this._indexers),t=e.next(),s.label=3;case 3:return t.done?[3,6]:[4,t.value.clear()];case 4:s.sent(),s.label=5;case 5:return t=e.next(),[3,3];case 6:return[3,9];case 7:return n=s.sent(),r={error:n},[3,9];case 8:try{t&&!t.done&&(i=e.return)&&i.call(e)}finally{if(r)throw r.error}return[7];case 9:return[2]}}))}))},e.prototype.getByKey=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){var t,n;return Object(o.Rb)(this,(function(r){switch(r.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,6];case 1:r.sent(),r.label=2;case 2:return r.trys.push([2,4,,5]),[4,this._blockManager.getFromBlock(e)];case 3:return t=r.sent(),this._mutex.unlock(),[2,Tn(t)];case 4:throw n=r.sent(),this._mutex.unlock(),n;case 5:return[3,7];case 6:throw An.collectionNotReady;case 7:return[2]}}))}))},e.prototype.query=function(e){if(void 0===e&&(e={}),this.isReady)return new qn({condition:e.where,mutex:this._mutex,blockManager:this._blockManager,indexer:this._getIndexerBy(e.index),backward:!!e.backward});throw An.collectionNotReady},e.prototype.insertOne=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){var t;return Object(o.Rb)(this,(function(n){switch(n.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,8];case 1:n.sent(),n.label=2;case 2:if(n.trys.push([2,5,,7]),!this._hasPropertyOfKeyName(e))throw An.collectionKeyNotGiven;return[4,this._requestInsert(Tn(e))];case 3:return n.sent(),[4,this._transaction.commit()];case 4:return n.sent(),this._mutex.unlock(),[2,e];case 5:return t=n.sent(),[4,this._transaction.clear()];case 6:throw n.sent(),this._mutex.unlock(),t;case 7:return[3,9];case 8:throw An.collectionNotReady;case 9:return[2]}}))}))},e.prototype.insertMany=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){var t,n,r,i,s,a,u,c=this;return Object(o.Rb)(this,(function(l){switch(l.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,15];case 1:l.sent(),l.label=2;case 2:if(l.trys.push([2,12,,14]),e.some((function(e){return!c._hasPropertyOfKeyName(e)})))throw An.collectionKeyNotGiven;l.label=3;case 3:l.trys.push([3,8,9,10]),t=Object(o.gc)(e),n=t.next(),l.label=4;case 4:return n.done?[3,7]:(r=n.value,[4,this._requestInsert(Tn(r))]);case 5:l.sent(),l.label=6;case 6:return n=t.next(),[3,4];case 7:return[3,10];case 8:return i=l.sent(),a={error:i},[3,10];case 9:try{n&&!n.done&&(u=t.return)&&u.call(t)}finally{if(a)throw a.error}return[7];case 10:return[4,this._transaction.commit()];case 11:return l.sent(),this._mutex.unlock(),[2,e];case 12:return s=l.sent(),[4,this._transaction.clear()];case 13:throw l.sent(),this._mutex.unlock(),s;case 14:return[3,16];case 15:throw An.collectionNotReady;case 16:return[2]}}))}))},e.prototype.upsertOne=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){var t;return Object(o.Rb)(this,(function(n){switch(n.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,8];case 1:n.sent(),n.label=2;case 2:if(n.trys.push([2,5,,7]),!this._hasPropertyOfKeyName(e))throw An.collectionKeyNotGiven;return[4,this._requestUpsert(Tn(e))];case 3:return n.sent(),[4,this._transaction.commit()];case 4:return n.sent(),this._mutex.unlock(),[2,e];case 5:return t=n.sent(),[4,this._transaction.clear()];case 6:throw n.sent(),this._mutex.unlock(),t;case 7:return[3,9];case 8:throw An.collectionNotReady;case 9:return[2]}}))}))},e.prototype.upsertMany=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){var t,n,r,i,s,a,u,c=this;return Object(o.Rb)(this,(function(l){switch(l.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,15];case 1:l.sent(),l.label=2;case 2:if(l.trys.push([2,12,,14]),e.some((function(e){return!c._hasPropertyOfKeyName(e)})))throw An.collectionKeyNotGiven;l.label=3;case 3:l.trys.push([3,8,9,10]),t=Object(o.gc)(e),n=t.next(),l.label=4;case 4:return n.done?[3,7]:(r=n.value,[4,this._requestUpsert(Tn(r))]);case 5:l.sent(),l.label=6;case 6:return n=t.next(),[3,4];case 7:return[3,10];case 8:return i=l.sent(),a={error:i},[3,10];case 9:try{n&&!n.done&&(u=t.return)&&u.call(t)}finally{if(a)throw a.error}return[7];case 10:return[4,this._transaction.commit()];case 11:return l.sent(),this._mutex.unlock(),[2,e];case 12:return s=l.sent(),[4,this._transaction.clear()];case 13:throw l.sent(),this._mutex.unlock(),s;case 14:return[3,16];case 15:throw An.collectionNotReady;case 16:return[2]}}))}))},e.prototype.update=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){var t;return Object(o.Rb)(this,(function(n){switch(n.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,8];case 1:n.sent(),n.label=2;case 2:if(n.trys.push([2,5,,7]),!this._hasPropertyOfKeyName(e))throw An.collectionKeyNotGiven;return[4,this._requestUpdate(Tn(e))];case 3:return n.sent(),[4,this._transaction.commit()];case 4:return n.sent(),this._mutex.unlock(),[2,e];case 5:return t=n.sent(),[4,this._transaction.clear()];case 6:throw n.sent(),this._mutex.unlock(),t;case 7:return[3,9];case 8:throw An.collectionNotReady;case 9:return[2]}}))}))},e.prototype.updateIf=function(e,t){return Object(o.Gb)(this,void 0,void 0,(function(){var n,r,i,s,a,u,c,l,h,d,f,p,m,g,b=this;return Object(o.Rb)(this,(function(v){switch(v.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,16];case 1:v.sent(),v.label=2;case 2:return v.trys.push([2,13,,15]),n=e.where,r=void 0===n?{}:n,i=e.index,s=void 0===i?null:i,a=e.backward,u=void 0!==a&&a,c=[],[4,new Hn({condition:r,blockManager:this._blockManager,backward:u,indexer:this._getIndexerBy(s)}).each((function(e){return Object(o.Gb)(b,void 0,void 0,(function(){var n,i;return Object(o.Rb)(this,(function(o){if(e.error)throw e.stop(),e.error;if(e.hasNext){if(n=e.nextValue,In(r,n)&&t.set){if("function"!=typeof t.set)for(i in t.set)n[i]=t.set[i];else t.set(n);c.push(n)}e.next()}else e.stop();return[2]}))}))}))];case 3:v.sent(),v.label=4;case 4:v.trys.push([4,9,10,11]),l=Object(o.gc)(c),h=l.next(),v.label=5;case 5:return h.done?[3,8]:(d=h.value,[4,this._requestUpdate(Tn(d))]);case 6:v.sent(),v.label=7;case 7:return h=l.next(),[3,5];case 8:return[3,11];case 9:return f=v.sent(),m={error:f},[3,11];case 10:try{h&&!h.done&&(g=l.return)&&g.call(l)}finally{if(m)throw m.error}return[7];case 11:return[4,this._transaction.commit()];case 12:return v.sent(),this._mutex.unlock(),[2,c];case 13:return p=v.sent(),[4,this._transaction.clear()];case 14:throw v.sent(),this._mutex.unlock(),p;case 15:return[3,17];case 16:throw this._transaction.clear(),An.collectionNotReady;case 17:return[2]}}))}))},e.prototype.remove=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){var t;return Object(o.Rb)(this,(function(n){switch(n.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,8];case 1:n.sent(),n.label=2;case 2:return n.trys.push([2,5,,7]),[4,this._requestRemove(e)];case 3:return n.sent(),[4,this._transaction.commit()];case 4:return n.sent(),this._mutex.unlock(),[3,7];case 5:return t=n.sent(),[4,this._transaction.clear()];case 6:throw n.sent(),this._mutex.unlock(),t;case 7:return[3,9];case 8:throw An.collectionNotReady;case 9:return[2]}}))}))},e.prototype.removeIf=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){var t,n,r,i,s,a,u,c,l,h,d,f,p,m,g=this;return Object(o.Rb)(this,(function(b){switch(b.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,15];case 1:b.sent(),b.label=2;case 2:return b.trys.push([2,13,,14]),t=e.where,n=void 0===t?{}:t,r=e.index,i=void 0===r?null:r,s=e.backward,a=void 0!==s&&s,u=[],[4,new Hn({condition:n,blockManager:this._blockManager,backward:a,indexer:this._getIndexerBy(i)}).each((function(e){return Object(o.Gb)(g,void 0,void 0,(function(){var t,r;return Object(o.Rb)(this,(function(i){if(e.error)throw e.stop(),e.error;return e.hasNext?(t=e.nextValue,In(n,t)&&(r=t[this.keyName],u.push(r)),e.next()):e.stop(),[2]}))}))}))];case 3:b.sent(),b.label=4;case 4:b.trys.push([4,9,10,11]),c=Object(o.gc)(u),l=c.next(),b.label=5;case 5:return l.done?[3,8]:(h=l.value,[4,this._requestRemove(h)]);case 6:b.sent(),b.label=7;case 7:return l=c.next(),[3,5];case 8:return[3,11];case 9:return d=b.sent(),p={error:d},[3,11];case 10:try{l&&!l.done&&(m=c.return)&&m.call(c)}finally{if(p)throw p.error}return[7];case 11:return[4,this._transaction.commit()];case 12:return b.sent(),this._mutex.unlock(),[2,u];case 13:throw f=b.sent(),this._mutex.unlock(),f;case 14:return[3,16];case 15:throw this._transaction.clear(),An.collectionNotReady;case 16:return[2]}}))}))},e.prototype.clear=function(){return Object(o.Gb)(this,void 0,void 0,(function(){var e;return Object(o.Rb)(this,(function(t){switch(t.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,8];case 1:t.sent(),t.label=2;case 2:return t.trys.push([2,5,,7]),[4,this._requestClear()];case 3:return t.sent(),[4,this._transaction.commit()];case 4:return t.sent(),this._mutex.unlock(),[3,7];case 5:return e=t.sent(),[4,this._transaction.clear()];case 6:throw t.sent(),this._mutex.unlock(),e;case 7:return[3,9];case 8:throw An.collectionNotReady;case 9:return[2]}}))}))},e.prototype.getBlob=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){return Object(o.Rb)(this,(function(t){switch(t.label){case 0:return[4,this._blobContainer.get(e)];case 1:return[2,t.sent()]}}))}))},e.prototype.saveBlob=function(e,t){return Object(o.Gb)(this,void 0,void 0,(function(){return Object(o.Rb)(this,(function(n){switch(n.label){case 0:return[4,this._blobContainer.save(e,t)];case 1:return[2,n.sent()]}}))}))},e.prototype.removeBlob=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){return Object(o.Rb)(this,(function(t){switch(t.label){case 0:return[4,this._blobContainer.remove(e)];case 1:return t.sent(),[2]}}))}))},e.prototype.removeAllBlobs=function(){return Object(o.Gb)(this,void 0,void 0,(function(){return Object(o.Rb)(this,(function(e){switch(e.label){case 0:return[4,this._blobContainer.clear()];case 1:return e.sent(),[2]}}))}))},e}(),hr="[NESTDB]",dr=!0,fr=function(){function e(){}return e.off=function(){dr=!1},e.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];dr&&console.log.apply(console,Object(o.dc)(["".concat(hr,"[LOG]")],Object(o.ec)(e),!1))},e.warning=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];dr&&console.warn.apply(console,Object(o.dc)(["".concat(hr,"[WARNING]")],Object(o.ec)(e),!1))},e.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];dr&&console.error.apply(console,Object(o.dc)(["".concat(hr,"[ERROR]")],Object(o.ec)(e),!1))},e}(),pr=[{},{a:700400,n:"error"}],mr=function(){function e(e){var t,n,r;this.encryption=null!==(t=e.encryption)&&void 0!==t?t:o.O,this.itemSizeLimit=null!==(n=e.itemSizeLimit)&&void 0!==n?n:4194304,this.metadataBuffer=null!==(r=e.metadataBuffer)&&void 0!==r?r:256}return Object.defineProperty(e.prototype,"_encryptionCheckKey",{get:function(){return"".concat(this.dbname,".encrypt")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_reservedKeys",{get:function(){return[this._encryptionCheckKey]},enumerable:!1,configurable:!0}),e.prototype._getRawKey=function(e,t){return void 0===t&&(t=""),"".concat(e).concat(t)},e.prototype._generateShardPostfixArray=function(e){return void 0===e&&(e=1),Object(o.dc)([],Object(o.ec)(Array(e).keys()),!1)},e.prototype._shardify=function(e){var t=this,n=e.key,r=e.value,i=JSON.stringify(this.encryption.encrypt(r)),o=Math.ceil(i.length/this.adjustedItemSizeLimit);return this._generateShardPostfixArray(o).map((function(e){var r={key:t._getRawKey(n,".".concat(e)),data:i.substring(e*t.adjustedItemSizeLimit,(e+1)*t.adjustedItemSizeLimit)};return 0===e&&(r.metadata={shards:o}),r}))},e.prototype._resetIfEncryptionChanged=function(){return Object(o.Gb)(this,void 0,void 0,(function(){var e,t,n,r,i,s,a,u,c,l=this;return Object(o.Rb)(this,(function(o){switch(o.label){case 0:return[4,this.get(this._encryptionCheckKey)];case 1:if(e=o.sent(),t={encrypted:pr.map((function(e){var t;return null===(t=l.encryption)||void 0===t?void 0:t.encrypt(e)}))},!(e&&e.encrypted&&Array.isArray(e.encrypted)))return[3,5];for(i in n=e.encrypted,r=[],n)r.push(i);s=0,o.label=2;case 2:return s<r.length?(i=r[s])in n?(a=i,u=JSON.stringify(e.encrypted[a]),c=JSON.stringify(t.encrypted[a]),u===c?[3,4]:(fr.warning("Encryption algorithm has changed. Stored data would be cleared."),[4,this.clear()])):[3,4]:[3,5];case 3:return o.sent(),[3,5];case 4:return s++,[3,2];case 5:return[4,this.set({key:this._encryptionCheckKey,value:t})];case 6:return o.sent(),[2]}}))}))},Object.defineProperty(e.prototype,"adjustedItemSizeLimit",{get:function(){return Math.max(this.itemSizeLimit-this.metadataBuffer,4)},enumerable:!1,configurable:!0}),e.prototype.usage=function(){return Object(o.Gb)(this,void 0,void 0,(function(){var e,t,n,r,i,s,a,u,c;return Object(o.Rb)(this,(function(l){switch(l.label){case 0:return e=0,[4,this._getAllRawKeys()];case 1:t=l.sent(),l.label=2;case 2:l.trys.push([2,7,8,9]),n=Object(o.gc)(t),r=n.next(),l.label=3;case 3:return r.done?[3,6]:(i=r.value,[4,this._getRaw(i)]);case 4:(s=l.sent())&&(e+=JSON.stringify(s).length),l.label=5;case 5:return r=n.next(),[3,3];case 6:return[3,9];case 7:return a=l.sent(),u={error:a},[3,9];case 8:try{r&&!r.done&&(c=n.return)&&c.call(n)}finally{if(u)throw u.error}return[7];case 9:return[2,e]}}))}))},e.prototype.getAllKeys=function(){return Object(o.Gb)(this,void 0,void 0,(function(){var e=this;return Object(o.Rb)(this,(function(t){switch(t.label){case 0:return[4,this._getAllRawKeys()];case 1:return[2,t.sent().filter((function(e){return e.endsWith(".0")})).map((function(e){return e.replace(/\.0$/,"")})).filter((function(t){return!e._reservedKeys.includes(t)}))]}}))}))},e.prototype.get=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){var t,n,r,i,s,a,u=this;return Object(o.Rb)(this,(function(c){switch(c.label){case 0:return t=this._getRawKey(e,".0"),[4,this._getRaw(t)];case 1:if(!(n=c.sent()))return[3,7];c.label=2;case 2:return c.trys.push([2,6,,7]),r=n.data,(null==(i=n.metadata)?void 0:i.shards)&&i.shards>1?[4,Promise.all(this._generateShardPostfixArray(null==i?void 0:i.shards).map((function(t){return Object(o.Gb)(u,void 0,void 0,(function(){var n,i;return Object(o.Rb)(this,(function(o){switch(o.label){case 0:return t>0?(n=this._getRawKey(e,".".concat(t)),[4,this._getRaw(n)]):[3,2];case 1:if(!(i=o.sent()))throw An.storeBrokenIntegrity;return[2,i.data];case 2:return[2,r]}}))}))})))]:[3,4];case 3:return a=c.sent(),[3,5];case 4:a=[r],c.label=5;case 5:return s=a,[2,this.encryption.decrypt(JSON.parse(s.join("")))];case 6:return c.sent(),[2,null];case 7:return[2,null]}}))}))},e.prototype.set=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){var t;return Object(o.Rb)(this,(function(n){switch(n.label){case 0:return t=this._shardify(e),[4,this._setRaw(t)];case 1:return n.sent(),[2,Object(o.Vb)({},e.value)]}}))}))},e.prototype.setMany=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){var t,n=this;return Object(o.Rb)(this,(function(r){switch(r.label){case 0:return t=[],[4,this._setRaw(t.concat.apply(t,Object(o.dc)([],Object(o.ec)(e.map((function(e){return n._shardify(e)}))),!1)))];case 1:return r.sent(),[2,e.map((function(e){return e.value}))]}}))}))},e.prototype.remove=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){var t,n,r,i=this;return Object(o.Rb)(this,(function(o){switch(o.label){case 0:return t=this._getRawKey(e,".0"),[4,this._getRaw(t)];case 1:return(n=o.sent())?(r=n.metadata,[4,this._removeRaw(this._generateShardPostfixArray(null==r?void 0:r.shards).map((function(t){return i._getRawKey(e,".".concat(t))})))]):[3,3];case 2:return o.sent(),[2,!0];case 3:return[2,!1]}}))}))},e.prototype.removeMany=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){var t,n,r,i,s,a,u,c,l,h=this;return Object(o.Rb)(this,(function(d){switch(d.label){case 0:t=[],n=function(e){var n,i,s;return Object(o.Rb)(this,(function(a){switch(a.label){case 0:return n=r._getRawKey(e,".0"),[4,r._getRaw(n)];case 1:return(i=a.sent())&&(s=i.metadata,t.push.apply(t,Object(o.dc)([],Object(o.ec)(r._generateShardPostfixArray(null==s?void 0:s.shards).map((function(t){return h._getRawKey(e,".".concat(t))}))),!1))),[2]}}))},r=this,d.label=1;case 1:d.trys.push([1,6,7,8]),i=Object(o.gc)(e),s=i.next(),d.label=2;case 2:return s.done?[3,5]:(a=s.value,[5,n(a)]);case 3:d.sent(),d.label=4;case 4:return s=i.next(),[3,2];case 5:return[3,8];case 6:return u=d.sent(),c={error:u},[3,8];case 7:try{s&&!s.done&&(l=i.return)&&l.call(i)}finally{if(c)throw c.error}return[7];case 8:return t.length>0?[4,this._removeRaw(t)]:[3,10];case 9:d.sent(),d.label=10;case 10:return[2,e]}}))}))},e}(),gr={},br=function(e){function t(t){void 0===t&&(t={});var n,r=this;r=e.call(this,Object(o.Vb)(Object(o.Vb)({},t),{itemSizeLimit:null!==(n=t.itemSizeLimit)&&void 0!==n?n:4194304}))||this;var i=t.delay,s=void 0===i?1:i;return r.delay=s,r.observer={},r}return Object(o.A)(t,e),Object.defineProperty(t.prototype,"rawData",{get:function(){return gr[this.dbname]},set:function(e){gr[this.dbname]=e},enumerable:!1,configurable:!0}),t.prototype._getAllRawKeys=function(){return Object(o.Gb)(this,void 0,void 0,(function(){return Object(o.Rb)(this,(function(e){if(gr[this.dbname])return[2,Object.keys(gr[this.dbname])];throw An.storeNotAvailable}))}))},t.prototype._getRaw=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){return Object(o.Rb)(this,(function(t){switch(t.label){case 0:return gr[this.dbname]?[4,jn(this.delay)]:[3,2];case 1:return t.sent(),[2,gr[this.dbname][e]?Object(o.Vb)({key:e},gr[this.dbname][e]):null];case 2:throw An.storeNotAvailable}}))}))},t.prototype._setRaw=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){var t,n,r,i,s,a,u,c;return Object(o.Rb)(this,(function(l){switch(l.label){case 0:return gr[this.dbname]?[4,jn(this.delay)]:[3,2];case 1:l.sent();try{for(t=Object(o.gc)(e),n=t.next();!n.done;n=t.next())r=n.value,i=r.key,s=r.data,a=r.metadata,gr[this.dbname][i]=Object.freeze({data:s,metadata:a})}catch(e){u={error:e}}finally{try{n&&!n.done&&(c=t.return)&&c.call(t)}finally{if(u)throw u.error}}return[3,3];case 2:throw An.storeNotAvailable;case 3:return[2]}}))}))},t.prototype._removeRaw=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){var t,n,r,i,s;return Object(o.Rb)(this,(function(a){switch(a.label){case 0:return gr[this.dbname]?[4,jn(this.delay)]:[3,2];case 1:a.sent();try{for(t=Object(o.gc)(e),n=t.next();!n.done;n=t.next())r=n.value,gr[this.dbname][r]&&delete gr[this.dbname][r]}catch(e){i={error:e}}finally{try{n&&!n.done&&(s=t.return)&&s.call(t)}finally{if(i)throw i.error}}return[3,3];case 2:throw An.storeNotAvailable;case 3:return[2]}}))}))},t.prototype.observe=function(e,t,n){var r=this;this.observer[e]||(this.observer[e]={}),t.forEach((function(t){return r.observer[e][t]=n}))},t.prototype.checkAvailability=function(){return Object(o.Gb)(this,void 0,void 0,(function(){return Object(o.Rb)(this,(function(e){return[2]}))}))},t.prototype.init=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){return Object(o.Rb)(this,(function(t){switch(t.label){case 0:return this.dbname=e,gr[this.dbname]||(gr[this.dbname]={}),[4,this._resetIfEncryptionChanged()];case 1:return t.sent(),[2]}}))}))},t.prototype.set=function(t){return Object(o.Gb)(this,void 0,void 0,(function(){var n,r;return Object(o.Rb)(this,(function(i){if((n=this.observer[t.key])&&"function"==typeof n.set&&(r=n.set()))throw r;return[2,e.prototype.set.call(this,t)]}))}))},t.prototype.setMany=function(t){return Object(o.Gb)(this,void 0,void 0,(function(){var n,r,i,s,a,u,c;return Object(o.Rb)(this,(function(l){try{for(n=Object(o.gc)(t),r=n.next();!r.done;r=n.next())if(i=r.value,(s=this.observer[i.key])&&"function"==typeof s.set&&(a=s.set()))throw a}catch(e){u={error:e}}finally{try{r&&!r.done&&(c=n.return)&&c.call(n)}finally{if(u)throw u.error}}return[2,e.prototype.setMany.call(this,t)]}))}))},t.prototype.clear=function(){return Object(o.Gb)(this,void 0,void 0,(function(){return Object(o.Rb)(this,(function(e){switch(e.label){case 0:return[4,jn(this.delay)];case 1:return e.sent(),gr[this.dbname]={},[2]}}))}))},t}(mr),vr="NestDBStore";!function(e){e[e.UNINITIALIZED=0]="UNINITIALIZED",e[e.OPENING=1]="OPENING",e[e.OPEN=2]="OPEN",e[e.CLOSED=3]="CLOSED"}(ar||(ar={}));var yr,_r=function(e){function t(t){void 0===t&&(t={});var n,r=this;return(r=e.call(this,Object(o.Vb)(Object(o.Vb)({},t),{itemSizeLimit:null!==(n=t.itemSizeLimit)&&void 0!==n?n:104857600}))||this)._storeName=vr,r._state=ar.UNINITIALIZED,r._openJobQueue=[],r._window="undefined"!=typeof window?window:void 0,r._indexedDb=r._window?r._window.indexedDB||r._window.mozIndexedDB||r._window.webkitIndexedDB||r._window.msIndexedDB:void 0,r}return Object(o.A)(t,e),Object.defineProperty(t.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),t.prototype._openDatabase=function(e){var t=this;return new Promise((function(n,r){if(t._indexedDb){t._state=ar.OPENING;var i=t._indexedDb.open(e);i.addEventListener("upgradeneeded",(function(e){e.target.result.createObjectStore(vr,{keyPath:"key"})})),i.addEventListener("success",(function(r){t._state=ar.OPEN,t._database=r.target.result,t._openJobQueue.forEach((function(e){return e()})),t._openJobQueue=[],t._database.onclose=function(){t._database=void 0,t._state=ar.OPENING,setTimeout((function(){t._openDatabase(e)}),5)},n(t._database)})),i.addEventListener("error",(function(e){t._state=ar.UNINITIALIZED,r(e.target.error)}))}else r(An.storeNotAvailable)}))},t.prototype._getObjectStore=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){var t=this;return Object(o.Rb)(this,(function(n){switch(n.label){case 0:return this._database?[2,this._database.transaction(this._storeName,e).objectStore(this._storeName)]:[3,1];case 1:switch(this._state){case ar.UNINITIALIZED:case ar.OPEN:return[3,2];case ar.OPENING:case ar.CLOSED:return[3,3]}return[3,4];case 2:throw An.storeNotInitialized;case 3:return[2,new Promise((function(n){t._openJobQueue.push((function(){return n(t._getObjectStore(e))}))}))];case 4:return[4,this._getObjectStore(e)];case 5:return[2,n.sent()]}}))}))},t.prototype._getAllRawKeys=function(){return Object(o.Gb)(this,void 0,void 0,(function(){var e;return Object(o.Rb)(this,(function(t){switch(t.label){case 0:return[4,this._getObjectStore("readonly")];case 1:return e=t.sent(),[4,new Promise((function(t,n){var r=e.getAllKeys();r.addEventListener("success",(function(e){t(e.target.result)})),r.addEventListener("error",(function(e){return n(e.target.error)}))}))];case 2:return[2,t.sent()]}}))}))},t.prototype._getRaw=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){var t;return Object(o.Rb)(this,(function(n){switch(n.label){case 0:return[4,this._getObjectStore("readonly")];case 1:return t=n.sent(),[4,new Promise((function(n,r){var i=t.get(e);i.addEventListener("success",(function(e){var t;n(null===(t=null==e?void 0:e.target)||void 0===t?void 0:t.result)})),i.addEventListener("error",(function(e){return r(e.target.error)}))}))];case 2:return[2,n.sent()]}}))}))},t.prototype._setRaw=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){var t;return Object(o.Rb)(this,(function(n){switch(n.label){case 0:return[4,this._getObjectStore("readwrite")];case 1:return t=n.sent(),[4,Promise.all(e.map((function(e){return new Promise((function(n,r){var i=t.put(e);i.addEventListener("success",(function(e){n(e.target.result)})),i.addEventListener("error",(function(){r("Failed to write.")}))}))})))];case 2:return n.sent(),[2]}}))}))},t.prototype._removeRaw=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){var t;return Object(o.Rb)(this,(function(n){switch(n.label){case 0:return[4,this._getObjectStore("readwrite")];case 1:return t=n.sent(),[4,Promise.all(e.map((function(e){return new Promise((function(n,r){var i=t.delete(e);i.addEventListener("success",(function(){return n(e)})),i.addEventListener("error",(function(e){return r(e.target.error)}))}))})))];case 2:return n.sent(),[2]}}))}))},t.prototype._triggerDatabaseClose=function(){this._database&&this._database.onclose&&this._database.onclose(new Event("dummy"))},t.prototype.checkAvailability=function(){return Object(o.Gb)(this,void 0,void 0,(function(){var e,t=this;return Object(o.Rb)(this,(function(n){switch(n.label){case 0:if(!((null==(e="undefined"!=typeof window?window:null)?void 0:e.indexedDB)||(null==e?void 0:e.mozIndexedDB)||(null==e?void 0:e.webkitIndexedDB)||(null==e?void 0:e.msIndexedDB)))return[3,6];if(this._indexedDb=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB,!this._window||!or())return[3,4];if(!(or()&&navigator.userAgent&&navigator.userAgent.includes("Edge/")))return[3,1];if(!this._window.indexedDB&&(e.PointerEvent||e.MSPointerEvent))throw An.storeNotAvailableInPrivateBrowsing;return[3,3];case 1:return[4,new Promise((function(e,n){if(t._indexedDb)try{var r=t._indexedDb.open("_testMozilla");r.onerror=function(){return n(An.storeNotAvailableInPrivateBrowsing)},r.onsuccess=function(){return e()}}catch(e){n(An.storeNotAvailableInPrivateBrowsing)}else n(An.storeNotAvailable)}))];case 2:n.sent(),n.label=3;case 3:return[3,5];case 4:throw An.storeNotAvailable;case 5:return[3,7];case 6:throw An.storeNotAvailable;case 7:return[2]}}))}))},t.prototype.init=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){return Object(o.Rb)(this,(function(t){switch(t.label){case 0:return this.dbname=e,[4,this.checkAvailability()];case 1:return t.sent(),[4,this._openDatabase(e)];case 2:return t.sent(),[4,this._resetIfEncryptionChanged()];case 3:return t.sent(),[2]}}))}))},t.prototype.clear=function(){return Object(o.Gb)(this,void 0,void 0,(function(){var e;return Object(o.Rb)(this,(function(t){switch(t.label){case 0:return[4,this._getObjectStore("readwrite")];case 1:return e=t.sent(),[4,new Promise((function(t,n){var r=e.clear();r.addEventListener("success",(function(){return t()})),r.addEventListener("error",(function(e){return n(e.target.error)}))}))];case 2:return[2,t.sent()]}}))}))},t}(mr),wr=function(e){function t(t){var n=this,r=t.AsyncStorage,i=t.itemSizeLimit,s=void 0===i?6291456:i,a=Object(o.P)(t,["AsyncStorage","itemSizeLimit"]);return(n=e.call(this,Object(o.Vb)(Object(o.Vb)({},a),{itemSizeLimit:s}))||this)._asyncStorage=r,n}return Object(o.A)(t,e),t.prototype._isBelonging=function(e){return e.startsWith("".concat(this.dbname,"/"))},t.prototype._getActualKey=function(e){return"".concat(this.dbname,"/").concat(e)},t.prototype._getAllRawKeys=function(){return Object(o.Gb)(this,void 0,void 0,(function(){var e=this;return Object(o.Rb)(this,(function(t){switch(t.label){case 0:return[4,this._asyncStorage.getAllKeys()];case 1:return[2,t.sent().filter((function(t){return e._isBelonging(t)})).map((function(t){return t.substring("".concat(e.dbname,"/").length)}))]}}))}))},t.prototype._getRaw=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){var t;return Object(o.Rb)(this,(function(n){switch(n.label){case 0:return[4,this._asyncStorage.getItem(this._getActualKey(e))];case 1:return[2,(t=n.sent())?JSON.parse(t):null]}}))}))},t.prototype._setRaw=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){var t,n,r,i,s,a,u;return Object(o.Rb)(this,(function(c){switch(c.label){case 0:t=[];try{for(n=Object(o.gc)(e),r=n.next();!r.done;r=n.next())i=r.value,s=i.key,i.data.length<=this.adjustedItemSizeLimit&&t.push([this._getActualKey(s),JSON.stringify(i)])}catch(e){a={error:e}}finally{try{r&&!r.done&&(u=n.return)&&u.call(n)}finally{if(a)throw a.error}}return[4,this._asyncStorage.multiSet(t)];case 1:return c.sent(),[2]}}))}))},t.prototype._removeRaw=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){var t=this;return Object(o.Rb)(this,(function(n){switch(n.label){case 0:return[4,this._asyncStorage.multiRemove(e.map((function(e){return t._getActualKey(e)})))];case 1:return n.sent(),[2]}}))}))},t.prototype.checkAvailability=function(){return Object(o.Gb)(this,void 0,void 0,(function(){return Object(o.Rb)(this,(function(e){if(!this._asyncStorage)throw An.storeNotAvailable;return[2]}))}))},t.prototype.init=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){return Object(o.Rb)(this,(function(t){switch(t.label){case 0:return this.dbname=e,[4,this._resetIfEncryptionChanged()];case 1:return t.sent(),[2]}}))}))},t.prototype.clear=function(){return Object(o.Gb)(this,void 0,void 0,(function(){var e;return Object(o.Rb)(this,(function(t){switch(t.label){case 0:return[4,this.getAllKeys()];case 1:return e=t.sent(),[4,this.removeMany(e)];case 2:return t.sent(),[2]}}))}))},t}(mr);!function(e){function t(t){var n,r=this;return(r=e.call(this,Object(o.Vb)(Object(o.Vb)({},t),{itemSizeLimit:null!==(n=t.itemSizeLimit)&&void 0!==n?n:6291456}))||this)._mmkv=t.MMKV,r}Object(o.A)(t,e),t.prototype._isBelonging=function(e){return e.startsWith("".concat(this.dbname,"/"))},t.prototype._getActualKey=function(e){return"".concat(this.dbname,"/").concat(e)},t.prototype._getAllRawKeys=function(){return Object(o.Gb)(this,void 0,void 0,(function(){var e=this;return Object(o.Rb)(this,(function(t){switch(t.label){case 0:return[4,this._mmkv.getAllKeys()];case 1:return[2,t.sent().filter((function(t){return e._isBelonging(t)})).map((function(t){return t.substring("".concat(e.dbname,"/").length)}))]}}))}))},t.prototype._getRaw=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){var t;return Object(o.Rb)(this,(function(n){switch(n.label){case 0:return[4,this._mmkv.getString(this._getActualKey(e))];case 1:return[2,(t=n.sent())?JSON.parse(t):null]}}))}))},t.prototype._setRaw=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){var t,n,r,i,s,a;return Object(o.Rb)(this,(function(u){try{for(t=Object(o.gc)(e),n=t.next();!n.done;n=t.next())r=n.value,i=r.key,r.data.length<=this.adjustedItemSizeLimit&&this._mmkv.set(this._getActualKey(i),JSON.stringify(r))}catch(e){s={error:e}}finally{try{n&&!n.done&&(a=t.return)&&a.call(t)}finally{if(s)throw s.error}}return[2]}))}))},t.prototype._removeRaw=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){var t,n,r,i,s;return Object(o.Rb)(this,(function(a){try{for(t=Object(o.gc)(e),n=t.next();!n.done;n=t.next())r=n.value,this._mmkv.delete(this._getActualKey(r))}catch(e){i={error:e}}finally{try{n&&!n.done&&(s=t.return)&&s.call(t)}finally{if(i)throw i.error}}return[2]}))}))},t.prototype.checkAvailability=function(){return Object(o.Gb)(this,void 0,void 0,(function(){return Object(o.Rb)(this,(function(e){if(!this._mmkv)throw An.storeNotAvailable;return[2]}))}))},t.prototype.init=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){return Object(o.Rb)(this,(function(t){switch(t.label){case 0:return this.dbname=e,[4,this._resetIfEncryptionChanged()];case 1:return t.sent(),[2]}}))}))},t.prototype.clear=function(){return Object(o.Gb)(this,void 0,void 0,(function(){var e;return Object(o.Rb)(this,(function(t){switch(t.label){case 0:return[4,this.getAllKeys()];case 1:return e=t.sent(),[4,this.removeMany(e)];case 2:return t.sent(),[2]}}))}))}}(mr),function(e){e.INIT="INIT",e.OPENING="OPENING",e.OPENED="OPENED",e.CLOSED="CLOSED"}(yr||(yr={}));var Er,Sr=function(){function e(e){var t=e.name,n=e.version,r=e.store,i=e.config;this.name=t,this._version=n,this._state=yr.INIT,this._config=i||new Mn({dbname:t}),this._store=r,this._event={success:Rn,error:Rn,storeReplaced:Rn,upgrade:Dn},this._collections=new Map,this._globalMutex=new cr("".concat(this.name,".lock")),this._config.disableLogger&&fr.off(),new Xn({dbname:t,limit:this._config.cacheLimit})}return Object.defineProperty(e.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"store",{get:function(){return this._store},enumerable:!1,configurable:!0}),e.prototype.estimateUsage=function(){return Object(o.Gb)(this,void 0,void 0,(function(){return Object(o.Rb)(this,(function(e){switch(e.label){case 0:return[4,(t=this._store,Object(o.Gb)(void 0,void 0,void 0,(function(){return Object(o.Rb)(this,(function(e){switch(e.label){case 0:return[4,t.usage()];case 1:return[2,e.sent()]}}))})))];case 1:return[2,e.sent()]}var t}))}))},e.prototype.commitSchema=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){var t=this;return Object(o.Rb)(this,(function(n){switch(n.label){case 0:return this._state!==yr.OPENING?[3,2]:[4,Promise.all(e.map((function(e){return Object(o.Gb)(t,void 0,void 0,(function(){var t,n,r,i,s;return Object(o.Rb)(this,(function(o){switch(o.label){case 0:return t=e.collectionName,n=e.keyName,r=e.index,i=void 0===r?[]:r,this._collections.has(t)||this._collections.set(t,new lr({dbname:this.name,collectionName:t,keyName:n,indexes:i,store:this._store})),(s=this._collections.get(t))?[4,s.init()]:[3,2];case 1:o.sent(),o.label=2;case 2:return[2]}}))}))})))];case 1:return n.sent(),[3,3];case 2:throw An.databaseSchemaNotOnUpgrade;case 3:return[2]}}))}))},e.prototype.open=function(){var e;return Object(o.Gb)(this,void 0,void 0,(function(){var t,n,r,i,s=this;return Object(o.Rb)(this,(function(a){switch(a.label){case 0:return[4,this._globalMutex.lock()];case 1:if(a.sent(),this._state===yr.OPENED)return[3,12];this._state=yr.OPENING,a.label=2;case 2:return a.trys.push([2,5,,12]),[4,this._store.init(this.name)];case 3:return a.sent(),u=this.name,t="".concat(Vn(u),".metadata"),n={version:0,collectionNames:[]},[4,this._store.get(t)];case 4:return r=null!==(e=a.sent())&&void 0!==e?e:n,[2,new Promise((function(e,n){var i=function(e){r.version<s._version?s._event.upgrade(r.version,(function(n){return Object(o.Gb)(s,void 0,void 0,(function(){var i;return Object(o.Rb)(this,(function(o){switch(o.label){case 0:if(n)return[3,5];r.version++,r.collectionNames=Array.from(this._collections.keys()),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this._store.set({key:t,value:r})];case 2:return o.sent(),e({continued:!0}),[3,4];case 3:return i=o.sent(),e({continued:!1,err:i}),[3,4];case 4:return[3,6];case 5:e({continued:!1,err:n}),o.label=6;case 6:return[2]}}))}))})):e({continued:!1})},a=function(t){var u=t.continued,c=void 0!==u&&u,l=t.err,h=void 0===l?null:l;if(c)setTimeout((function(){return i(a)}),10);else if(h)fr.error(h.message),s._globalMutex.unlock(),s._event.error(h),n(h);else{var d=[];r.collectionNames.forEach((function(e){var t=s._collections.get(e);t&&t.state===On.READY||d.push(Object(o.Gb)(s,void 0,void 0,(function(){var t,n;return Object(o.Rb)(this,(function(r){switch(r.label){case 0:return[4,lr.metadataOf(this.name,e,this._store)];case 1:return(t=r.sent())?(n=new lr({dbname:this.name,collectionName:e,keyName:t.keyName,indexes:t.indexes,store:this._store}),this._collections.set(e,n),[4,n.init()]):[3,3];case 2:r.sent(),r.label=3;case 3:return[2]}}))})))})),Promise.all(d).then((function(){s._state=yr.OPENED,s._globalMutex.unlock(),s._event.success(),e()})).catch((function(e){fr.error(e.message),s._globalMutex.unlock(),s._event.error(e),n(e)}))}};i(a)}))];case 5:switch((i=a.sent()).code){case cn.STORE_NOT_AVAILABLE_IN_PRIVATE_BROWSING:return[3,6];case cn.STORE_NOT_AVAILABLE:return[3,8]}return[3,10];case 6:return fr.warning("Access to the local storage is not allowed. Switched to MemoryStore automatically."),this._store=new br({}),this._globalMutex.unlock(),this._event.error(i),this._event.storeReplaced(this._store),[4,this.open()];case 7:return a.sent(),[3,11];case 8:return fr.warning("IndexedDB is not available in this environment. Switched to MemoryStore automatically. Consider using other store to save data persistently (e.g. AsyncStorage)."),this._store=new br({}),this._globalMutex.unlock(),this._event.error(i),this._event.storeReplaced(this._store),[4,this.open()];case 9:return a.sent(),[3,11];case 10:throw fr.error(i.message),this._globalMutex.unlock(),this._event.error(i),i;case 11:return[3,12];case 12:return[2]}var u}))}))},e.prototype.close=function(){this._collections.forEach((function(e){return e.close()})),this._state=yr.CLOSED},e.prototype.clear=function(){return Object(o.Gb)(this,void 0,void 0,(function(){return Object(o.Rb)(this,(function(e){switch(e.label){case 0:return[4,Promise.all(Array.from(this._collections.values()).map((function(e){return e.clear()})))];case 1:return e.sent(),[2]}}))}))},e.prototype.reset=function(){return Object(o.Gb)(this,void 0,void 0,(function(){var e,t=this;return Object(o.Rb)(this,(function(n){switch(n.label){case 0:return this.close(),(e=Xn.get(this.name))&&e.clearByCondition((function(e){return e.key.startsWith(Vn(t.name))})),[4,this._store.clear()];case 1:return n.sent(),[2]}}))}))},e.prototype.on=function(e,t){this._event[e]=t},e.prototype.off=function(e){"function"==typeof this._event[e]&&(this._event[e]="upgrade"===e?Dn:Rn)},e.prototype.collection=function(e){var t=this._collections.get(e);if(t)return t;throw An.collectionNotReady},e}(),Mr=function(){function e(){this.messageTypeFilter=o.lb.ALL,this.customTypesFilter=null,this.senderUserIdsFilter=null,this.replyType=o.ub.NONE}return e.prototype.clone=function(){var t=new e,n=JSON.parse(JSON.stringify(this));return Object.keys(n).forEach((function(e){t[e]=n[e]})),t},e.prototype.match=function(e){switch(this.messageTypeFilter){case o.lb.USER:if(e.messageType!==o.gb.USER)return!1;break;case o.lb.FILE:if(e.messageType!==o.gb.FILE)return!1;break;case o.lb.ADMIN:if(e.messageType!==o.gb.ADMIN)return!1}if(this.customTypesFilter&&this.customTypesFilter.length>0&&!this.customTypesFilter.includes(e.customType))return!1;if(this.senderUserIdsFilter&&this.senderUserIdsFilter.length>0){if(!(e instanceof w))return!1;if(!this.senderUserIdsFilter.includes(e.sender.userId))return!1}switch(this.replyType){case o.ub.NONE:if(e.parentMessageId>0)return!1;break;case o.ub.ONLY_REPLY_TO_CHANNEL:if(e instanceof w&&e.parentMessageId>0&&!e.replyToChannel)return!1}return!0},e}();!function(e){e.CHANNEL_LATEST="channel_latest",e.NEWEST_CHILD_MESSAGE="newest_child_message"}(Er||(Er={}));var Or,Ar=function(e){switch(e){case Er.CHANNEL_LATEST:return["channelUrl","-createdAt","-messageId"];case Er.NEWEST_CHILD_MESSAGE:return["channelUrl","-parentMessageId","-createdAt","-messageId"]}},Cr=Object(o.Vb)(Object(o.Vb)({},oe),{scheduledAt:void 0}),Tr=function(e){return ce(e)&&Object(o.B)("number",e.scheduledAt,!0)},kr=Object(o.Vb)(Object(o.Vb)({},ne),{scheduledAt:0,file:void 0,fileUrl:void 0,fileName:void 0,mimeType:void 0,fileSize:void 0,thumbnailSizes:void 0,requireAuth:!1}),xr=function(e){return re(e)&&Object(o.B)("number",e.scheduledAt)&&(Object(o.Xb)(e.file)||Object(o.B)("string",e.fileUrl))&&Object(o.B)("string",e.fileName,!0)&&Object(o.B)("string",e.mimeType,!0)&&Object(o.B)("number",e.fileSize,!0)&&(null===e.thumbnailSizes||void 0===e.thumbnailSizes||e.thumbnailSizes.every((function(e){return Object(o.B)("object",e)&&e.maxWidth>0&&e.maxHeight>0})))},jr="UnsentMessage",Ir="reqId",Rr={},Nr=function(e){function t(t){var n=e.call(this,t)||this;return n._mutex=new cr("unsendmessagecache.lock"),Rr[t]=n,n}return Object(o.A)(t,e),Object.defineProperty(t.prototype,"_cacheContext",{get:function(){return o.v.of(this._iid).cacheContext},enumerable:!1,configurable:!0}),t.of=function(e,n){return void 0===n&&(n=!1),Rr[e]&&!n||(Rr[e]=new t(e)),Rr[e]},Object.defineProperty(t.prototype,"collection",{get:function(){var e=this._cacheContext.nestdb,t=null==e?void 0:e.collection(jr);if(!t)throw o.fc.databaseError;return t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"localCacheEnabled",{get:function(){return this._cacheContext.localCacheEnabled&&!!this.collection},enumerable:!1,configurable:!0}),t.prototype._serialize=function(e){if(e.messageId>0)throw o.fc.invalidParameters;var t,n=Object(o.Vb)({},e.serialize());return e instanceof C?(e.messageParams&&(n.messageParams=ie(e.messageParams)),e.scheduledInfo&&e.scheduledInfo.scheduledMessageParams&&(n.scheduledInfo.scheduledMessageParams=(t=e.scheduledInfo.scheduledMessageParams,Object(o.Vb)(Object(o.Vb)({},ie(t)),{scheduledAt:t.scheduledAt})))):e instanceof I?(e.messageParams&&(n.messageParams=de(e.messageParams)),e.scheduledInfo&&e.scheduledInfo.scheduledMessageParams&&(n.scheduledInfo.scheduledMessageParams=function(e){return Object(o.Vb)(Object(o.Vb)({},de(e)),{scheduledAt:e.scheduledAt})}(e.scheduledInfo.scheduledMessageParams))):e instanceof k&&e.messageParams&&(n.messageParams=function(e){return Object(o.Tb)({fileInfoList:e.fileInfoList,isReplyToChannel:e.isReplyToChannel,pushNotificationDeliveryOption:e.pushNotificationDeliveryOption})}(e.messageParams)),n},t.prototype._deserialize=function(e){return e=Object(o.Vb)(Object(o.Vb)({},e),{messageId:parseInt(e.messageId)}),Br.of(this._iid).buildMessageFromSerializedData(e)},t.prototype._deserializeWithMessageCreateParams=function(e){var t,n,r;return Object(o.Gb)(this,void 0,void 0,(function(){var i,s,a,u,c,l,h=this;return Object(o.Rb)(this,(function(d){switch(d.label){case 0:return i=Br.of(this._iid),s=this._deserialize(e),e.messageParams?s instanceof C?(u=e.messageParams,s.messageParams=i.buildUserMessageCreateParamsFromSerializedData(u,s),[3,6]):[3,1]:[3,6];case 1:return s instanceof I?(u=e.messageParams).fileKey&&"string"==typeof u.fileKey&&he(null!==(t=u.fileType)&&void 0!==t?t:"")?(a=u,[4,this.collection.getBlob(u.fileKey)]):[3,3]:[3,4];case 2:a.file=null!==(n=d.sent())&&void 0!==n?n:void 0,d.label=3;case 3:return s.messageParams=i.buildFileMessageCreateParamsFromSerializedData(u,s),[3,6];case 4:return s instanceof k&&(u=e.messageParams)&&u.fileInfoList?(s.messageParams=i.buildMultipleFilesMessageCreateParamsFromSerializedData(u,s),[4,Promise.all(s.messageParams.fileInfoList.map((function(e){return Object(o.Gb)(h,void 0,void 0,(function(){var t,n,r,i,s;return Object(o.Rb)(this,(function(o){switch(o.label){case 0:return"string"==typeof(null===(n=e._uploadedMetaData)||void 0===n?void 0:n.fileKey)&&he(null!==(i=null===(r=e._uploadedMetaData)||void 0===r?void 0:r.fileType)&&void 0!==i?i:"")?(t=e,[4,this.collection.getBlob(e._uploadedMetaData.fileKey)]):[3,2];case 1:t.file=null!==(s=o.sent())&&void 0!==s?s:void 0,o.label=2;case 2:return[2]}}))}))})))]):[3,6];case 5:d.sent(),d.label=6;case 6:return s.scheduledInfo&&e.scheduledInfo&&e.scheduledInfo.scheduledMessageParams?s instanceof C?(c=e.scheduledInfo.scheduledMessageParams,s.scheduledInfo.scheduledMessageParams=i.buildScheduledUserMessageCreateParamsFromSerializedData(c,s),[3,10]):[3,7]:[3,10];case 7:return s instanceof I?(c=e.scheduledInfo.scheduledMessageParams).fileKey&&"string"==typeof c.fileKey&&"string"==typeof c.fileType&&he(c.fileType)?(l=c,[4,this.collection.getBlob(c.fileKey)]):[3,9]:[3,10];case 8:l.file=null!==(r=d.sent())&&void 0!==r?r:void 0,d.label=9;case 9:s.scheduledInfo.scheduledMessageParams=i.buildScheduledFileMessageCreateParamsFromSerializedData(c,s),d.label=10;case 10:return[2,s]}}))}))},t.prototype._getFileInfoBlobKey=function(e,t){return"".concat(e,".").concat(t)},t.prototype.get=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){var t;return Object(o.Rb)(this,(function(n){switch(n.label){case 0:return this.localCacheEnabled?[4,this.collection.getByKey("".concat(e))]:[3,2];case 1:if(t=n.sent())return[2,this._deserializeWithMessageCreateParams(t)];n.label=2;case 2:return[2,void 0]}}))}))},t.prototype.fetch=function(e){var t=e.channelUrl,n=e.filter,r=void 0===n?new Mr:n,i=e.order,s=void 0===i?Er.CHANNEL_LATEST:i,a=e.sendingStatus,u=e.backward,c=void 0!==u&&u,l=e.parentMessageId;return Object(o.Gb)(this,void 0,void 0,(function(){var e,n,i,u,h=this;return Object(o.Rb)(this,(function(d){switch(d.label){case 0:return this.localCacheEnabled?(e=Ar(s),n={"/where":function(e){return!!(s!==Er.NEWEST_CHILD_MESSAGE||l&&0!==e.parentMessageId&&e.parentMessageId===l)&&r.match(h._deserialize(e))}},t&&(n.channelUrl=t),a&&(n.sendingStatus=a),i={where:n,index:e,backward:c},[4,this.collection.query(i)]):[3,3];case 1:return[4,d.sent().fetch({})];case 2:return u=d.sent(),[2,Promise.all(u.map((function(e){return Object(o.Gb)(h,void 0,void 0,(function(){return Object(o.Rb)(this,(function(t){switch(t.label){case 0:return[4,this._deserializeWithMessageCreateParams(e)];case 1:return[2,t.sent()]}}))}))})))];case 3:return[2,[]]}}))}))},t.prototype.getAllChildMessages=function(e,t){return void 0===t&&(t=new Mr),Object(o.Gb)(this,void 0,void 0,(function(){return Object(o.Rb)(this,(function(n){switch(n.label){case 0:return[4,this.fetch({filter:t,order:Er.NEWEST_CHILD_MESSAGE,channelUrl:e.channelUrl,backward:!1,parentMessageId:e.messageId})];case 1:return[2,n.sent()]}}))}))},t.prototype.upsert=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){var t=this;return Object(o.Rb)(this,(function(n){switch(n.label){case 0:return this.localCacheEnabled?[4,Promise.all(e.map((function(e){return Object(o.Gb)(t,void 0,void 0,(function(){var t;return Object(o.Rb)(this,(function(n){switch(n.label){case 0:return e instanceof I||e instanceof k?[4,this._mutex.lock()]:[3,4];case 1:return n.sent(),[4,this.saveBlob(e)];case 2:return n.sent(),[4,this._mutex.unlock()];case 3:n.sent(),n.label=4;case 4:return t=this._serialize(e),[4,this.collection.upsertOne(t)];case 5:return n.sent(),[2]}}))}))})))]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}}))}))},t.prototype.upsertChildMessages=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){var t=this;return Object(o.Rb)(this,(function(n){switch(n.label){case 0:return this.localCacheEnabled?[4,Promise.all(e.map((function(e){return Object(o.Gb)(t,void 0,void 0,(function(){var t;return Object(o.Rb)(this,(function(n){switch(n.label){case 0:return t=[],e.threadInfo&&e.threadInfo.replyCount>0?[4,this.getAllChildMessages(e)]:[3,2];case 1:t=n.sent(),n.label=2;case 2:return t.length>0?(t.forEach((function(t){return t.applyParentMessage(e)})),[4,this.upsert(t)]):[3,4];case 3:n.sent(),n.label=4;case 4:return[2]}}))}))})))]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}}))}))},t.prototype.remove=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){var t,n,r,i,s,a;return Object(o.Rb)(this,(function(u){switch(u.label){case 0:if(!this.localCacheEnabled)return[3,8];u.label=1;case 1:u.trys.push([1,6,7,8]),t=Object(o.gc)(e),n=t.next(),u.label=2;case 2:return n.done?[3,5]:(r=n.value,[4,this.collection.remove(r)]);case 3:u.sent(),u.label=4;case 4:return n=t.next(),[3,2];case 5:return[3,8];case 6:return i=u.sent(),s={error:i},[3,8];case 7:try{n&&!n.done&&(a=t.return)&&a.call(t)}finally{if(s)throw s.error}return[7];case 8:return[2]}}))}))},t.prototype.removeMessagesOfChannel=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){return Object(o.Rb)(this,(function(t){switch(t.label){case 0:return this.localCacheEnabled?[4,this.collection.removeIf({where:{channelUrl:e}})]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.clear=function(){return Object(o.Gb)(this,void 0,void 0,(function(){return Object(o.Rb)(this,(function(e){switch(e.label){case 0:return this.localCacheEnabled?[4,this.collection.clear()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},t.prototype.saveBlob=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){var t,n,r,i=this;return Object(o.Rb)(this,(function(s){switch(s.label){case 0:return e instanceof I?e.messageParams&&(r=e.messageParams).file&&le(r.file)?[4,this.collection.saveBlob(r.file,e.reqId)]:[3,2]:[3,5];case 1:n=s.sent(),r.fileKey=n,r.fileType=ae.BLOB,s.label=2;case 2:return e.scheduledInfo&&e.scheduledInfo.scheduledMessageParams&&(t=e.scheduledInfo.scheduledMessageParams).file&&le(t.file)?[4,this.collection.saveBlob(t.file,e.reqId)]:[3,4];case 3:n=s.sent(),t.fileKey=n,t.fileType=ae.BLOB,s.label=4;case 4:return[3,7];case 5:return e instanceof k&&(r=e.messageParams)&&r.fileInfoList&&Array.isArray(r.fileInfoList)?[4,Promise.all(r.fileInfoList.map((function(t,n){return Object(o.Gb)(i,void 0,void 0,(function(){var r;return Object(o.Rb)(this,(function(i){switch(i.label){case 0:return t.file&&le(t.file)?[4,this.collection.saveBlob(t.file,this._getFileInfoBlobKey(e.reqId,n))]:[3,2];case 1:r=i.sent(),t._uploadedMetaData||(t._uploadedMetaData={}),t._uploadedMetaData.fileKey=r,t._uploadedMetaData.fileType=ae.BLOB,i.label=2;case 2:return[2]}}))}))})))]:[3,7];case 6:s.sent(),s.label=7;case 7:return[2]}}))}))},t}(o.G),Pr={},Dr=function(e){function t(t){var n=e.call(this,t)||this;return Pr[t]=n,n}return Object(o.A)(t,e),Object.defineProperty(t.prototype,"_sdkState",{get:function(){return o.v.of(this._iid).sdkState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_cacheContext",{get:function(){return o.v.of(this._iid).cacheContext},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_unsentMessageCache",{get:function(){return Nr.of(this._iid)},enumerable:!1,configurable:!0}),t.of=function(e,n){return void 0===n&&(n=!1),Pr[e]&&!n||(Pr[e]=new t(e)),Pr[e]},Object.defineProperty(t.prototype,"collection",{get:function(){var e=this._cacheContext.nestdb;return Object(o.hc)(!!e).throw(o.fc.databaseError),e.collection(Zt)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"localCacheEnabled",{get:function(){return this._cacheContext.localCacheEnabled&&!!this.collection},enumerable:!1,configurable:!0}),t.prototype._serialize=function(e){return Object(o.Vb)(Object(o.Vb)({},e.serialize()),{messageId:"".concat(e.messageId)})},t.prototype._deserialize=function(e){return e=Object(o.Vb)(Object(o.Vb)({},e),{messageId:parseInt(e.messageId)}),Br.of(this._iid).buildMessageFromSerializedData(e)},t.prototype.get=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){var t;return Object(o.Rb)(this,(function(n){switch(n.label){case 0:return this.localCacheEnabled?[4,this.collection.getByKey("".concat(e))]:[3,2];case 1:if(t=n.sent())return[2,this._deserialize(t)];n.label=2;case 2:return[2,void 0]}}))}))},t.prototype.fetch=function(e){var t=e.channelUrl,n=e.token,r=e.limit,i=void 0===r?100:r,s=e.filter,a=void 0===s?new Mr:s,u=e.order,c=void 0===u?Er.CHANNEL_LATEST:u,l=e.backward,h=void 0!==l&&l,d=e.parentMessageId,f=e.isPollOnly,p=void 0!==f&&f,m=e.exactMatch,g=void 0!==m&&m,b=e.inclusive,v=void 0===b||b;return Object(o.Gb)(this,void 0,void 0,(function(){var e,r,s,u=this;return Object(o.Rb)(this,(function(l){switch(l.label){case 0:return this.localCacheEnabled?(e=Ar(c),r={where:{channelUrl:t,"/where":function(e){if(n)switch(c){case Er.CHANNEL_LATEST:if(g&&e.createdAt!==n)return!1;if(h){if(v&&e.createdAt<n||!v&&e.createdAt<=n)return!1}else if(v&&e.createdAt>n||!v&&e.createdAt>=n)return!1;break;case Er.NEWEST_CHILD_MESSAGE:if(!d||0===e.parentMessageId||e.parentMessageId!==d)return!1}return!(p&&!e._poll)&&a.match(u._deserialize(e))}},index:e,backward:h},[4,this.collection.query(r)]):[3,3];case 1:return[4,l.sent().fetch({limit:null!=i?i:void 0})];case 2:return s=l.sent(),[2,Promise.all(s.map((function(e){return Object(o.Gb)(u,void 0,void 0,(function(){return Object(o.Rb)(this,(function(t){return[2,this._deserialize(e)]}))}))})))];case 3:return[2,[]]}}))}))},t.prototype.getAllChildMessages=function(e,t){return void 0===t&&(t=new Mr),Object(o.Gb)(this,void 0,void 0,(function(){return Object(o.Rb)(this,(function(n){switch(n.label){case 0:return[4,this.fetch({channelUrl:e.channelUrl,token:Date.now(),limit:null,backward:!1,filter:t,order:Er.NEWEST_CHILD_MESSAGE,parentMessageId:e.messageId})];case 1:return[2,n.sent()]}}))}))},t.prototype.upsert=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){var t,n=this;return Object(o.Rb)(this,(function(r){switch(r.label){case 0:return this.localCacheEnabled?[4,this.saveBlobs(e)]:[3,5];case 1:return r.sent(),t=e.map((function(e){return n._serialize(e)})),[4,this.collection.upsertMany(t)];case 2:return r.sent(),[4,this.upsertChildMessages(e)];case 3:return r.sent(),[4,this._unsentMessageCache.upsertChildMessages(e)];case 4:r.sent(),r.label=5;case 5:return[2]}}))}))},t.prototype.upsertChildMessages=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){var t=this;return Object(o.Rb)(this,(function(n){switch(n.label){case 0:return this.localCacheEnabled?[4,Promise.all(e.map((function(e){return Object(o.Gb)(t,void 0,void 0,(function(){var t,n;return Object(o.Rb)(this,(function(r){switch(r.label){case 0:return t=[],(null===(n=e.threadInfo)||void 0===n?void 0:n.replyCount)&&e.threadInfo.replyCount>0?[4,this.getAllChildMessages(e)]:[3,2];case 1:t=r.sent(),r.label=2;case 2:return t.length>0?(t.forEach((function(t){return t.applyParentMessage(e)})),[4,this.upsert(t)]):[3,4];case 3:r.sent(),r.label=4;case 4:return[2]}}))}))})))]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}}))}))},t.prototype.remove=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){var t,n,r,i,s,a;return Object(o.Rb)(this,(function(u){switch(u.label){case 0:if(!this.localCacheEnabled)return[3,8];u.label=1;case 1:u.trys.push([1,6,7,8]),t=Object(o.gc)(e),n=t.next(),u.label=2;case 2:return n.done?[3,5]:(r=n.value,[4,this.collection.remove("".concat(r))]);case 3:u.sent(),u.label=4;case 4:return n=t.next(),[3,2];case 5:return[3,8];case 6:return i=u.sent(),s={error:i},[3,8];case 7:try{n&&!n.done&&(a=t.return)&&a.call(t)}finally{if(s)throw s.error}return[7];case 8:return[2]}}))}))},t.prototype.removeMessagesOfChannel=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){var t;return Object(o.Rb)(this,(function(n){switch(n.label){case 0:return this.localCacheEnabled?[4,this.collection.removeIf({where:{channelUrl:e},index:Ar(Er.CHANNEL_LATEST)})]:[3,6];case 1:return n.sent(),[4,(t=this._cacheContext.preference).remove("sendbird:".concat(this._sdkState.userId,"@groupchannel/").concat(e,"/message/sync"))];case 2:return n.sent(),[4,t.remove("sendbird:".concat(this._sdkState.userId,"@groupchannel/").concat(e,"/message/sync.meta"))];case 3:return n.sent(),[4,t.remove("sendbird:".concat(this._sdkState.userId,"@groupchannel/").concat(e,"/message/changelogs"))];case 4:return n.sent(),[4,t.remove("sendbird:".concat(this._sdkState.userId,"@groupchannel/").concat(e,"/message/changelogs.meta"))];case 5:n.sent(),n.label=6;case 6:return[2]}}))}))},t.prototype.removeUnderOffset=function(e,t){return Object(o.Gb)(this,void 0,void 0,(function(){return Object(o.Rb)(this,(function(n){switch(n.label){case 0:return this.localCacheEnabled?[4,this.collection.removeIf({where:{channelUrl:e,createdAt:{"<":t}},index:Ar(Er.CHANNEL_LATEST)})]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}}))}))},t.prototype.clear=function(){return Object(o.Gb)(this,void 0,void 0,(function(){return Object(o.Rb)(this,(function(e){switch(e.label){case 0:return this.localCacheEnabled?[4,this.collection.clear()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},t.prototype.countBetween=function(e,t,n){return Object(o.Gb)(this,void 0,void 0,(function(){var r,i=this;return Object(o.Rb)(this,(function(o){switch(o.label){case 0:return this.localCacheEnabled?(r=Ar(Er.CHANNEL_LATEST),[4,this.collection.query({where:{channelUrl:e,"/where":function(e){var r=i._deserialize(e);return n.includes(r.createdAt)&&t.match(r)}},index:r}).count()]):[3,2];case 1:return[2,o.sent()];case 2:return[2,0]}}))}))},t.prototype.saveBlobs=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){var t=this;return Object(o.Rb)(this,(function(n){switch(n.label){case 0:return[4,Promise.all(e.map((function(e){return Object(o.Gb)(t,void 0,void 0,(function(){var t,n;return Object(o.Rb)(this,(function(r){switch(r.label){case 0:return e instanceof I&&e.messageParams&&(t=e.messageParams).file&&le(t.file)?[4,this.collection.saveBlob(t.file,e.reqId)]:[3,2];case 1:n=r.sent(),t.fileKey=n,r.label=2;case 2:return[2]}}))}))})))];case 1:return n.sent(),[2]}}))}))},t.prototype._getGroupChannelPreferenceSize=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){var t,n,r,i,s,a;return Object(o.Rb)(this,(function(o){switch(o.label){case 0:return t=0,[4,(n=this._cacheContext.preference).get("sendbird:".concat(this._sdkState.userId,"@groupchannel/").concat(e,"/message/sync"))];case 1:return r=o.sent(),[4,n.get("sendbird:".concat(this._sdkState.userId,"@groupchannel/").concat(e,"/message/sync.meta"))];case 2:return i=o.sent(),[4,n.get("sendbird:".concat(this._sdkState.userId,"@groupchannel/").concat(e,"/message/changelogs"))];case 3:return s=o.sent(),[4,n.get("sendbird:".concat(this._sdkState.userId,"@groupchannel/").concat(e,"/message/changelogs.meta"))];case 4:return a=o.sent(),r&&(t+=JSON.stringify(r).length),i&&(t+=JSON.stringify(i).length),s&&(t+=JSON.stringify(s).length),a&&(t+=JSON.stringify(a).length),[2,t]}}))}))},t}(o.G),Ur={},Lr=function(e){function t(t){var n=e.call(this,t)||this;return n._observers=new Map,n._dispatcherContext=n._dispatcher.on((function(e){return Object(o.Gb)(n,void 0,void 0,(function(){var t,n,r,i,s,a,u,c,l,h,d,f,p,m,g=this;return Object(o.Rb)(this,(function(b){switch(b.label){case 0:return e instanceof o.I?(t=e.messages,p=e.source,s=e.isWebSocketEventComing,n=t.filter((function(e){return e.messageId>0})),r=t.filter((function(e){return 0===e.messageId})),n.length>0?[4,Object(o.o)((function(){return Object(o.Gb)(g,void 0,void 0,(function(){return Object(o.Rb)(this,(function(e){switch(e.label){case 0:return[4,this._messageCache.upsert(n)];case 1:return e.sent(),[4,this._unsentMessageCache.remove(n.map((function(e){return e instanceof w?e.reqId:null})).filter((function(e){return null!==e})))];case 2:return e.sent(),[2]}}))}))}))]:[3,2]):[3,5];case 1:b.sent(),s||this._broadcastUpdateEvent(n,p),b.label=2;case 2:return r.length>0?[4,Object(o.o)((function(){return Object(o.Gb)(g,void 0,void 0,(function(){return Object(o.Rb)(this,(function(e){switch(e.label){case 0:return[4,this._unsentMessageCache.upsert(r)];case 1:return e.sent(),[2]}}))}))}))]:[3,4];case 3:b.sent(),s||this._broadcastUpdateEvent(r,p),b.label=4;case 4:return[3,21];case 5:return e instanceof o.T?(i=e.messageIds,p=e.source,s=e.isWebSocketEventComing,[4,Object(o.o)((function(){return Object(o.Gb)(g,void 0,void 0,(function(){return Object(o.Rb)(this,(function(e){switch(e.label){case 0:return[4,this._messageCache.remove(i)];case 1:return e.sent(),[2]}}))}))}))]):[3,7];case 6:return b.sent(),s||this._broadcastRemoveEvent(i,p),[3,21];case 7:return e instanceof o.S?(a=e.reqId,p=e.source,[4,Object(o.o)((function(){return Object(o.Gb)(g,void 0,void 0,(function(){return Object(o.Rb)(this,(function(e){switch(e.label){case 0:return[4,this._unsentMessageCache.remove([a])];case 1:return e.sent(),[2]}}))}))}))]):[3,9];case 8:return b.sent(),this._broadcastRemoveUnsentEvent(a,p),[3,21];case 9:return e instanceof o.R?(u=e.polls,p=e.source,this._cacheContext.localCacheEnabled?(c=u.map((function(e){return e.messageId})),[4,Promise.all(c.map((function(e){return g._messageCache.get(e)})))]):[3,12]):[3,13];case 10:return(l=b.sent().filter((function(e){return e}))).length>0&&u.forEach((function(e){var t=l.find((function(t){return t.messageId===e.messageId}));t&&t.applyPoll(e)})),[4,Object(o.o)((function(){return Object(o.Gb)(g,void 0,void 0,(function(){return Object(o.Rb)(this,(function(e){switch(e.label){case 0:return[4,this._messageCache.upsert(l)];case 1:return[2,e.sent()]}}))}))}))];case 11:b.sent(),b.label=12;case 12:return this._broadcastPollChangeLogEvent(u,p),[3,21];case 13:return e instanceof o.Q?(h=e.event,p=e.source,[4,this._messageCache.get(h.messageId)]):[3,17];case 14:return(d=b.sent())&&d.isUserMessage()&&d.poll&&d.poll.applyPollUpdateEvent(h)?[4,Object(o.o)((function(){return Object(o.Gb)(g,void 0,void 0,(function(){return Object(o.Rb)(this,(function(e){switch(e.label){case 0:return[4,this._messageCache.upsert([d])];case 1:return[2,e.sent()]}}))}))}))]:[3,16];case 15:b.sent(),b.label=16;case 16:return this._broadcastPollUpdateEvent(h,p),[3,21];case 17:return e instanceof o.L?(f=e.event,p=e.source,[4,this._messageCache.get(f.messageId)]):[3,21];case 18:return(m=b.sent())&&m.isUserMessage()&&m.poll&&m.poll.applyPollVoteEvent(f)?[4,Object(o.o)((function(){return Object(o.Gb)(g,void 0,void 0,(function(){return Object(o.Rb)(this,(function(e){switch(e.label){case 0:return[4,this._messageCache.upsert([m])];case 1:return[2,e.sent()]}}))}))}))]:[3,20];case 19:b.sent(),b.label=20;case 20:this._broadcastPollVoteEvent(f,p),b.label=21;case 21:return[2]}}))}))})),n}return Object(o.A)(t,e),Object.defineProperty(t.prototype,"_cacheContext",{get:function(){return o.v.of(this._iid).cacheContext},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_dispatcher",{get:function(){return o.v.of(this._iid).dispatcher},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_messageCache",{get:function(){return Dr.of(this._iid)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_unsentMessageCache",{get:function(){return Nr.of(this._iid)},enumerable:!1,configurable:!0}),t.of=function(e,n){var r;return void 0===n&&(n=!1),Ur[e]&&!n||(Ur[e]&&(null===(r=Ur[e]._dispatcherContext)||void 0===r||r.close()),Ur[e]=new t(e)),Ur[e]},t.prototype._broadcastUpdateEvent=function(e,t){var n,r;try{for(var i=Object(o.gc)(this._observers.values()),s=i.next();!s.done;s=i.next()){var a=s.value;a.onUpdate&&a.onUpdate(e,t)}}catch(e){n={error:e}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}},t.prototype._broadcastPollChangeLogEvent=function(e,t){var n,r;try{for(var i=Object(o.gc)(this._observers.values()),s=i.next();!s.done;s=i.next()){var a=s.value;a.onPollChangeLogUpdate&&a.onPollChangeLogUpdate(e,t)}}catch(e){n={error:e}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}},t.prototype._broadcastPollUpdateEvent=function(e,t){var n,r;try{for(var i=Object(o.gc)(this._observers.values()),s=i.next();!s.done;s=i.next()){var a=s.value;a.onPollUpdate&&a.onPollUpdate(e,t)}}catch(e){n={error:e}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}},t.prototype._broadcastPollVoteEvent=function(e,t){var n,r;try{for(var i=Object(o.gc)(this._observers.values()),s=i.next();!s.done;s=i.next()){var a=s.value;a.onPollVote&&a.onPollVote(e,t)}}catch(e){n={error:e}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}},t.prototype._broadcastRemoveEvent=function(e,t){var n,r;try{for(var i=Object(o.gc)(this._observers.values()),s=i.next();!s.done;s=i.next()){var a=s.value;a.onRemove&&a.onRemove(e,t)}}catch(e){n={error:e}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}},t.prototype._broadcastRemoveUnsentEvent=function(e,t){var n,r;try{for(var i=Object(o.gc)(this._observers.values()),s=i.next();!s.done;s=i.next()){var a=s.value;a.onRemoveUnsent&&a.onRemoveUnsent(e,t)}}catch(e){n={error:e}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}},t.prototype.subscribe=function(e,t){this._observers.set(e,t)},t.prototype.unsubscribe=function(e){this._observers.delete(e)},t.prototype.unsubscribeAll=function(){this._observers.clear()},t}(o.G),Fr={},Br=function(){function e(e,t){var n=t.sdkState,r=t.dispatcher,i=t.requestQueue,o=t.onlineDetector,s=t.cacheContext;this._iid=e,this._sdkState=n,this._requestQueue=i,this._dispatcher=r,this._cacheContext=s,Dr.of(e),Nr.of(e),Lr.of(e),this.fileMessageQueue=new F(e,{sdkState:n,dispatcher:r,requestQueue:i,onlineDetector:o,cacheContext:s}),Fr[e]=this}return e.of=function(e){return Fr[e]},e.prototype.buildMessageFromSerializedData=function(e){var t=Object(o.mc)(e);switch(t.messageType){case o.gb.USER:return new C(this._iid,C.payloadify(t));case o.gb.FILE:return k._isMultipleFilesMessageSerializedData(t)?new k(this._iid,k.payloadify(t)):new I(this._iid,I.payloadify(t));case o.gb.ADMIN:return new O(this._iid,O.payloadify(t))}throw o.fc.invalidParameters},e.prototype.buildUserMessageCreateParamsFromSerializedData=function(e,t){return Object(o.Tb)(Object(o.jc)({data:t.data,customType:t.customType,mentionType:t.mentionType,mentionedUserIds:t.mentionedUserIds,mentionedUsers:t.mentionedUsers,mentionedMessageTemplate:t.mentionedMessageTemplate,metaArrays:t.metaArrays,parentMessageId:t.parentMessageId,isReplyToChannel:e.isReplyToChannel,pushNotificationDeliveryOption:e.pushNotificationDeliveryOption,appleCriticalAlertOptions:t.appleCriticalAlertOptions,reqId:t.reqId,message:t.message,translationTargetLanguages:Object.keys(t.translations),pollId:e.pollId}))},e.prototype.buildFileMessageCreateParamsFromSerializedData=function(e,t){var n;return Object(o.Tb)(Object(o.jc)({data:t.data,customType:t.customType,mentionType:t.mentionType,mentionedUserIds:t.mentionedUserIds,mentionedUsers:t.mentionedUsers,mentionedMessageTemplate:t.mentionedMessageTemplate,metaArrays:t.metaArrays,parentMessageId:t.parentMessageId,isReplyToChannel:e.isReplyToChannel,pushNotificationDeliveryOption:e.pushNotificationDeliveryOption,appleCriticalAlertOptions:t.appleCriticalAlertOptions,reqId:t.reqId,file:e.file,fileKey:e.fileKey,fileUrl:t.plainUrl,fileName:t.name,fileSize:t.size,mimeType:t.type,thumbnailSizes:null===(n=t.thumbnails)||void 0===n?void 0:n.map((function(e){return{maxWidth:e.width,maxHeight:e.height}})),fileType:e.fileType,requireAuth:t.requireAuth}))},e.prototype.buildMultipleFilesMessageCreateParamsFromSerializedData=function(e,t){return Object(o.Tb)({data:t.data,customType:t.customType,mentionType:t.mentionType,mentionedUserIds:t.mentionedUserIds,mentionedUsers:t.mentionedUsers,mentionedMessageTemplate:t.mentionedMessageTemplate,metaArrays:t.metaArrays,parentMessageId:t.parentMessageId,isReplyToChannel:e.isReplyToChannel,pushNotificationDeliveryOption:e.pushNotificationDeliveryOption,appleCriticalAlertOptions:t.appleCriticalAlertOptions,reqId:t.reqId,fileInfoList:e.fileInfoList})},e.prototype.buildScheduledUserMessageCreateParamsFromSerializedData=function(e,t){return Object(o.Vb)(Object(o.Vb)({},this.buildUserMessageCreateParamsFromSerializedData(e,t)),{scheduledAt:e.scheduledAt})},e.prototype.buildScheduledFileMessageCreateParamsFromSerializedData=function(e,t){return Object(o.Vb)(Object(o.Vb)({},this.buildFileMessageCreateParamsFromSerializedData(e,t)),{scheduledAt:e.scheduledAt})},e.prototype.buildSenderFromSerializedData=function(e){var t=Object(o.mc)(e);return new b(this._iid,b.payloadify(t))},e.prototype.getMessage=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){var t;return Object(o.Rb)(this,(function(n){switch(n.label){case 0:return t=new G(e),[4,this._requestQueue.send(t)];case 1:return[2,n.sent().as(z).message]}}))}))},e.prototype.getScheduledMessage=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){var t;return Object(o.Rb)(this,(function(n){switch(n.label){case 0:return t=new J(e),[4,this._requestQueue.send(t)];case 1:return[2,n.sent().as(Z).message]}}))}))},e.prototype.getMessagesByMessageId=function(e,t,n,r,i){return void 0===i&&(i=o.x.REQUEST_MESSAGE),Object(o.Gb)(this,void 0,void 0,(function(){var s,a,u;return Object(o.Rb)(this,(function(c){switch(c.label){case 0:return s=new W(Object(o.Vb)(Object(o.Vb)({channelType:t,channelUrl:e,token:String(n)},B),r)),[4,this._requestQueue.send(s)];case 1:return a=c.sent(),u=a.as(K).messages,this._dispatcher.dispatch(new o.I({messages:u,source:i})),[2,u]}}))}))},e.prototype.getMessagesByTimestamp=function(e,t,n,r,i){return void 0===i&&(i=o.x.REQUEST_MESSAGE),Object(o.Gb)(this,void 0,void 0,(function(){var s,a,u;return Object(o.Rb)(this,(function(c){switch(c.label){case 0:return s=new W(Object(o.Vb)(Object(o.Vb)({channelType:t,channelUrl:e,timestamp:n},B),r)),[4,this._requestQueue.send(s)];case 1:return a=c.sent(),u=a.as(K).messages,this._dispatcher.dispatch(new o.I({messages:u,source:i})),[2,u]}}))}))},e.prototype._getMessagesByTimestampForCollection=function(e,t,n,r,i,s){return void 0===i&&(i=o.x.REQUEST_MESSAGE),Object(o.Gb)(this,void 0,void 0,(function(){var a,u,c,l;return Object(o.Rb)(this,(function(h){switch(h.label){case 0:return a=new W(Object(o.Vb)(Object(o.Vb)(Object(o.Vb)({channelType:t,channelUrl:e,timestamp:n},B),r),{checkingContinuousMessages:s})),[4,this._requestQueue.send(a)];case 1:return u=h.sent(),c=u.payload,l=u.as(K).messages,this._dispatcher.dispatch(new o.I({messages:l,source:i})),[2,{messages:l,isContinuousMessages:c}]}}))}))},e.prototype.getThreadedMessagesByTimestamp=function(e,t,n,r){return void 0===r&&(r=o.x.REQUEST_THREADED_MESSAGE),Object(o.Gb)(this,void 0,void 0,(function(){var i,s,a,u;return Object(o.Rb)(this,(function(c){switch(c.label){case 0:return i=new W(Object(o.Vb)(Object(o.Vb)(Object(o.Vb)({channelUrl:e.channelUrl,channelType:e.channelType,timestamp:t},S),n),{replyType:o.ub.ALL,parentMessageId:e.messageId,includeThreadInfo:!0})),[4,this._requestQueue.send(i)];case 1:return s=c.sent(),a=s.as(K).messages,(u=a.slice(1)).forEach((function(t){t.parentMessage=e})),this._dispatcher.dispatch(new o.I({messages:u,source:r})),[2,{parentMessage:a[0],threadedMessages:u}]}}))}))},e.prototype.getMessageChangelogs=function(e,t,n,r,i){return void 0===i&&(i=o.x.REQUEST_MESSAGE_CHANGELOGS),Object(o.Gb)(this,void 0,void 0,(function(){var s,a,u,c,l,h,d,f;return Object(o.Rb)(this,(function(p){switch(p.label){case 0:return s=new Y(Object(o.Tb)(Object(o.jc)(Object(o.Vb)(Object(o.Vb)({channelType:t,channelUrl:e,timestamp:"number"==typeof n?n:null,token:"string"==typeof n?n:null},q),r)))),[4,this._requestQueue.send(s)];case 1:return a=p.sent(),u=a.as(Q),c=u.updatedMessages,l=u.deletedMessagesInfo,h=u.hasMore,d=u.nextToken,f=l.map((function(e){return e.messageId})),c.length>0&&this._dispatcher.dispatch(new o.I({messages:c,source:i})),f.length>0&&this._dispatcher.dispatch(new o.T({messageIds:f,source:i})),[2,{updatedMessages:c,deletedMessageIds:f,hasMore:h,token:d}]}}))}))},e}(),Hr=function(e){function t(t,n){var r=e.call(this,t)||this;r.targetMessageId=0;var i=n.thread_info,s=n.parent_message_id,a=n.channel_url,c=n.channel_type;return i&&Object(o.B)("object",i)&&Object(o.B)("number",s)&&Object(o.B)("string",a)&&Object(o.B)("string",c)&&(r.threadInfo=new u(t,i),r.targetMessageId=s,r.channelUrl=a,r.channelType=c),r}return Object(o.A)(t,e),t}(o.G),qr={channelUrl:"",channelType:o.y.BASE,messageId:0,includeReactions:!1,includeMetaArray:!1,includeParentMessageInfo:!1,includeThreadInfo:!1},Vr=function(e){function t(t){var n=t.channelCustomType,r=t.keyword,i=t.limit,s=t.reverse,a=t.exactMatch,u=t.channelUrl,c=t.order,l=t.messageTimestampFrom,h=t.messageTimestampTo,d=t.advancedQuery,f=t.targetFields,p=t.nextToken,m=e.call(this)||this;return m.method=o.a.GET,m.path="".concat(o.U,"/messages"),m.params={custom_type:n,query:r,limit:i,reverse:s,exact_match:a,channel_url:u,message_ts_from:l,message_ts_to:h,sort_field:c,advanced_query:d,target_fields:f,after:p},m}return Object(o.A)(t,e),t}(o.Ub),Gr=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.messages=n.results.map((function(e){return j(t,e)})),r.hasNext=n.has_next,r.nextToken=n.end_cursor,r.totalCount=n.total_count,r}return Object(o.A)(t,e),t}(o.Wb);!function(e){e.SCORE="score",e.TIMESTAMP="ts"}(Or||(Or={}));var zr=function(e){function t(t,n){var r,i,o,s,a,u,c,l,h,d=this;return(d=e.call(this,t,n)||this).keyword="",d.reverse=!1,d.exactMatch=!1,d.channelUrl="",d.channelCustomType="",d.messageTimestampFrom=null,d.messageTimestampTo=null,d.order=Or.SCORE,d.advancedQuery=!1,d.targetFields=null,d._nextToken="",d.totalCount=-1,d.keyword=n.keyword,d.reverse=null!==(r=n.reverse)&&void 0!==r&&r,d.exactMatch=null!==(i=n.exactMatch)&&void 0!==i&&i,d.channelUrl=null!==(o=n.channelUrl)&&void 0!==o?o:"",d.channelCustomType=null!==(s=n.channelCustomType)&&void 0!==s?s:"",d.messageTimestampFrom=null!==(a=n.messageTimestampFrom)&&void 0!==a?a:null,d.messageTimestampTo=null!==(u=n.messageTimestampTo)&&void 0!==u?u:null,d.order=null!==(c=n.order)&&void 0!==c?c:Or.SCORE,d.advancedQuery=null!==(l=n.advancedQuery)&&void 0!==l&&l,d.targetFields=null!==(h=n.targetFields)&&void 0!==h?h:null,d}return Object(o.A)(t,e),t.prototype._validate=function(){return e.prototype._validate.call(this)&&Object(o.B)("string",this.keyword)&&this.keyword.length>0&&Object(o.B)("boolean",this.reverse)&&Object(o.B)("boolean",this.exactMatch)&&Object(o.B)("string",this.channelUrl)&&Object(o.B)("string",this.channelCustomType)&&(Object(o.B)("number",this.messageTimestampFrom)||null===this.messageTimestampFrom)&&(Object(o.B)("number",this.messageTimestampTo)||null===this.messageTimestampTo)&&Object(o.q)(Or,this.order)&&Object(o.B)("boolean",this.advancedQuery)&&Object(o.k)("string",this.targetFields,!0)},t.prototype.next=function(){return Object(o.Gb)(this,void 0,void 0,(function(){var e,t,n,r,i,s,a,u;return Object(o.Rb)(this,(function(c){switch(c.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,e=o.v.of(this._iid).requestQueue,t=new Vr(Object(o.jc)(Object(o.Vb)(Object(o.Vb)({},this),{nextToken:this._nextToken?this._nextToken:null}))),[4,e.send(t)]):[3,2]:[3,5];case 1:return n=c.sent(),r=n.as(Gr),i=r.messages,s=r.hasNext,a=r.nextToken,u=r.totalCount,this._nextToken=a,this._hasNext=s,this._isLoading=!1,this.totalCount=u,[2,i];case 2:return[2,[]];case 3:throw o.fc.queryInProgress;case 4:return[3,6];case 5:throw o.fc.invalidParameters;case 6:return[2]}}))}))},t}(o.N),Wr={channelUrl:"",scheduledMessageId:0},Kr=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.name="message",t}return Object(o.A)(t,e),t.prototype.init=function(t,n){var r=n.sdkState,i=n.dispatcher,o=n.sessionManager,s=n.requestQueue,a=n.logger,u=n.onlineDetector,c=n.cacheContext;e.prototype.init.call(this,t,{sdkState:r,dispatcher:i,sessionManager:o,requestQueue:s,logger:a,onlineDetector:u,cacheContext:c}),this._manager=new Br(t,{sdkState:r,dispatcher:i,requestQueue:s,onlineDetector:u,cacheContext:c})},t.prototype.buildMessageFromSerializedData=function(e){return this._manager.buildMessageFromSerializedData(e)},t.prototype.buildSenderFromSerializedData=function(e){return this._manager.buildSenderFromSerializedData(e)},t.prototype.getMessage=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){var t;return Object(o.Rb)(this,(function(n){return t=Object(o.Vb)(Object(o.Vb)({},qr),e),Object(o.hc)(function(e){return Object(o.B)("string",e.channelUrl)&&Object(o.q)(o.y,e.channelType)&&Object(o.B)("number",e.messageId)&&Object(o.B)("boolean",e.includeReactions,!0)&&Object(o.B)("boolean",e.includeMetaArray,!0)&&Object(o.B)("boolean",e.includeParentMessageInfo,!0)&&Object(o.B)("boolean",e.includeThreadInfo,!0)}(t)).throw(o.fc.invalidParameters),[2,this._manager.getMessage(t)]}))}))},t.prototype.getScheduledMessage=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){var t;return Object(o.Rb)(this,(function(n){return t=Object(o.Vb)(Object(o.Vb)({},Wr),e),Object(o.hc)(function(e){return Object(o.B)("string",e.channelUrl)&&""!==e.channelUrl&&Object(o.B)("number",e.scheduledMessageId)&&e.scheduledMessageId>0}(t)).throw(o.fc.invalidParameters),[2,this._manager.getScheduledMessage(t)]}))}))},t}(o.V)},function(e,t,n){"use strict";e.exports=n(174)},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}));var r={OPEN_CHAT_WINDOW:"OPEN_CHAT_WINDOW",CHAT_WINDOW_VIEW:"CHAT_WINDOW_VIEW",CLOSE_CHAT_WINDOW:"CLOSE_CHAT_WINDOW",SET_CHAT_HISTORY_WINDOW_IS_MAXIMIZED:"SET_CHAT_HISTORY_WINDOW_IS_MAXIMIZED",SET_CHAT_CONTEXT:"SET_CHAT_CONTEXT",ADD_USERS:"ADD_USERS",SET_CHATTERBOX_SESSION_TOKEN:"SET_CHATTERBOX_SESSION_TOKEN",NEW_MESSAGE:"NEW_MESSAGE",LOAD_INITIAL_MESSAGES:"LOAD_INITIAL_MESSAGES",LOAD_PREVIOUS_MESSAGES:"LOAD_PREVIOUS_MESSAGES",START_LOAD_MESSAGES:"START_LOAD_MESSAGES",SET_LOGIN_USER_ID:"SET_LOGIN_USER_ID",LOAD_CHAT_HISTORY_CHANNELS:"LOAD_CHAT_HISTORY_CHANNELS",SET_USER_CONNECTION_STATUS:"SET_USER_CONNECTION_STATUS",SET_USER_PROFILE_IMAGE:"SET_USER_PROFILE_IMAGE",UNREAD_MESSAGE_COUNT:"UNREAD_MESSAGE_COUNT",UNREAD_CHANNEL_COUNT:"UNREAD_CHANNEL_COUNT",LOAD_PREVIOUS_CHAT_HISTORY_CHANNELS:"LOAD_PREVIOUS_CHAT_HISTORY_CHANNELS",HAS_MORE_CHAT_HISTORY_CHANNELS:"HAS_MORE_CHAT_HISTORY_CHANNELS",HAS_MORE_MESSAGES:"HAS_MORE_MESSAGES",CHAT_ERROR:"CHAT_ERROR",CLEAR_DRAFT:"CLEAR_DRAFT",SET_CHAT_CONTEXT_RESTORED:"SET_CHAT_CONTEXT_RESTORED",MW_LOAD_INITIAL_MESSAGES:"MW_LOAD_INITIAL_MESSAGES",MW_UNREGISTER_CHANNEL_HANDLER:"MW_UNREGISTER_CHANNEL_HANDLER",MW_LOAD_MORE_MESSAGES:"MW_LOAD_MORE_MESSAGES",MW_FETCH_USER_DATA:"MW_FETCH_USER_DATA",MW_MARK_AS_READ:"MW_MARK_AS_READ",ACTIVE_USER_UNREAD_MESSAGE_COUNT:"ACTIVE_USER_UNREAD_MESSAGE_COUNT"},i={openChatWindow:function(e){return{type:r.OPEN_CHAT_WINDOW,payload:e}},closeChatWindow:function(e){return{type:r.CLOSE_CHAT_WINDOW,payload:e}},addUsers:function(e){return{type:r.ADD_USERS,payload:e}},setChatterBoxSessionToken:function(e){return{type:r.SET_CHATTERBOX_SESSION_TOKEN,payload:e}},setNewMessage:function(e){return{type:r.NEW_MESSAGE,payload:e}},loadInitialMessages:function(e){return{type:r.LOAD_INITIAL_MESSAGES,payload:e}},loadPreviousMessages:function(e){return{type:r.LOAD_PREVIOUS_MESSAGES,payload:e}},startLoadingMessages:function(){return{type:r.START_LOAD_MESSAGES}},setLoginUserId:function(e){return{type:r.SET_LOGIN_USER_ID,payload:e}},loadChatHistoryChannels:function(e){return{type:r.LOAD_CHAT_HISTORY_CHANNELS,payload:e}},loadPreviousChatHistoryChannels:function(e){return{type:r.LOAD_PREVIOUS_CHAT_HISTORY_CHANNELS,payload:e}},hasMoreChatHistoryChannels:function(e){return{type:r.HAS_MORE_CHAT_HISTORY_CHANNELS,payload:e}},hasMoreMessages:function(e){return{type:r.HAS_MORE_MESSAGES,payload:e}},setUserConnectionStatus:function(e){return{type:r.SET_USER_CONNECTION_STATUS,payload:e}},setUserProfileImage:function(e){return{type:r.SET_USER_PROFILE_IMAGE,payload:e}},setUnreadMessageCount:function(e){return{type:r.UNREAD_MESSAGE_COUNT,payload:e}},setUnreadChannelCount:function(e){return{type:r.UNREAD_CHANNEL_COUNT,payload:e}},maximizeChatWindow:function(e){return{type:r.CHAT_WINDOW_VIEW,payload:e}},setChatError:function(e){return{type:r.CHAT_ERROR,payload:e}},setChatHistoryWindowIsMaximized:function(e){return{type:r.SET_CHAT_HISTORY_WINDOW_IS_MAXIMIZED,payload:e}},setChatContext:function(e){return{type:r.SET_CHAT_CONTEXT,payload:e}},setIsChatContextRestored:function(e){return{type:r.SET_CHAT_CONTEXT_RESTORED,payload:e}},setShouldClearDraft:function(e){return{type:r.CLEAR_DRAFT,payload:e}},mwLoadInitialMessages:function(e){var t=e.loginUserId,n=e.chatUserId,i=e.scrollToBottomCallback;return{type:r.MW_LOAD_INITIAL_MESSAGES,payload:{loginUserId:t,chatUserId:n,scrollToBottomCallback:i}}},mwLoadMoreMessages:function(){return{type:r.MW_LOAD_MORE_MESSAGES}},mwUnregisterChannelHandler:function(e){return{type:r.MW_UNREGISTER_CHANNEL_HANDLER,payload:e}},mwFetchUserData:function(e){var t=e.algoliaToken,n=e.chatUserIds,i=e.users;return{type:r.MW_FETCH_USER_DATA,payload:{algoliaToken:t,chatUserIds:n,users:i}}},mwMarkAsRead:function(){return{type:r.MW_MARK_AS_READ}},setActiveWindowUnreadMesageCount:function(e){return{type:r.ACTIVE_USER_UNREAD_MESSAGE_COUNT,payload:e}}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(40);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}},function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return y})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return b})),n.d(t,"e",(function(){return l})),n.d(t,"f",(function(){return v})),n.d(t,"g",(function(){return m})),n.d(t,"h",(function(){return h})),n.d(t,"i",(function(){return p})),n.d(t,"j",(function(){return d})),n.d(t,"k",(function(){return r})),n.d(t,"l",(function(){return g}));var r,i,o=n(0),s=n(1),a=n(39);(i=r||(r={}))[i.NONE=0]="NONE",i[i.CHANNEL_ENTER=10102]="CHANNEL_ENTER",i[i.CHANNEL_EXIT=10103]="CHANNEL_EXIT",i[i.USER_CHANNEL_MUTE=10201]="USER_CHANNEL_MUTE",i[i.USER_CHANNEL_UNMUTE=10200]="USER_CHANNEL_UNMUTE",i[i.USER_CHANNEL_BAN=10601]="USER_CHANNEL_BAN",i[i.USER_CHANNEL_UNBAN=10600]="USER_CHANNEL_UNBAN",i[i.CHANNEL_FREEZE=10701]="CHANNEL_FREEZE",i[i.CHANNEL_UNFREEZE=10700]="CHANNEL_UNFREEZE",i[i.TYPING_START=10900]="TYPING_START",i[i.TYPING_END=10901]="TYPING_END",i[i.CHANNEL_JOIN=1e4]="CHANNEL_JOIN",i[i.CHANNEL_LEAVE=10001]="CHANNEL_LEAVE",i[i.CHANNEL_OPERATOR_UPDATE=10002]="CHANNEL_OPERATOR_UPDATE",i[i.CHANNEL_INVITE=10020]="CHANNEL_INVITE",i[i.CHANNEL_ACCEPT_INVITE=10021]="CHANNEL_ACCEPT_INVITE",i[i.CHANNEL_DECLINE_INVITE=10022]="CHANNEL_DECLINE_INVITE",i[i.CHANNEL_PROP_CHANGED=11e3]="CHANNEL_PROP_CHANGED",i[i.CHANNEL_DELETED=12e3]="CHANNEL_DELETED",i[i.CHANNEL_META_DATA_CHANGED=11100]="CHANNEL_META_DATA_CHANGED",i[i.CHANNEL_META_COUNTERS_CHANGED=11200]="CHANNEL_META_COUNTERS_CHANGED",i[i.CHANNEL_HIDE=13e3]="CHANNEL_HIDE",i[i.CHANNEL_UNHIDE=13001]="CHANNEL_UNHIDE",i[i.PINNED_MESSAGE_CHANGED=11300]="PINNED_MESSAGE_CHANGED";var u=function(){function e(e){var t;this.channelUrl=e.channel_url,this.channelType=e.channel_type,this.category=e.cat,this.data=null!==(t=e.data)&&void 0!==t?t:{},this.ts=e.ts}return Object.defineProperty(e.prototype,"isGroupChannelEvent",{get:function(){return this.channelType===o.y.GROUP},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isOpenChannelEvent",{get:function(){return this.channelType===o.y.OPEN},enumerable:!1,configurable:!0}),e}(),c=function(e){function t(t,n,r){var i=e.call(this,t,"SYEV",r)||this;return i.event=new u(r),i}return Object(o.A)(t,e),t}(o.w),l=function(e){function t(t,n,r){var i=e.call(this,t,n,r)||this,s=r.data.operators,a=void 0===s?[]:s;return i.operators=a.map((function(e){return new o.u(i._iid,e)})),i}return Object(o.A)(t,e),t}(c),h=function(){function e(e){var t=e.top,n=void 0===t?Number.MAX_SAFE_INTEGER:t,r=e.bottom,i=void 0===r?0:r;this.top=n,this.bottom=i}return e.prototype.includes=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return t.every((function(t){return e.top<=t&&t<=e.bottom}))},e.prototype.overlap=function(e){return this.includes(e.top)||this.includes(e.bottom)},e.prototype.intersect=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return t.some((function(t){return e.top<=t&&t<=e.bottom}))},e.prototype.extends=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.top=Math.min.apply(Math,Object(o.dc)([this.top],Object(o.ec)(e),!1)),this.bottom=Math.max.apply(Math,Object(o.dc)([this.bottom],Object(o.ec)(e),!1))},e}(),d=function(e){function t(t,n){var r=e.call(this,t)||this;return r._logger=n.logger,r._sdkState=n.sdkState,r._sessionManager=n.sessionManager,r._requestQueue=n.requestQueue,r._dispatcher=n.dispatcher,r._cacheContext=n.cacheContext,r._channelType=n.channelType,r}return Object(o.A)(t,e),Object.defineProperty(t.prototype,"_messageCache",{get:function(){return s.xb.of(this._iid)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_unsentMessageCache",{get:function(){return s.yb.of(this._iid)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_messageBroadcast",{get:function(){return s.fb.of(this._iid)},enumerable:!1,configurable:!0}),t.prototype.subscribeMessageEvent=function(e,t){this._messageBroadcast.subscribe(e,t)},t.prototype.unsubscribeMessageEvent=function(e){this._messageBroadcast.unsubscribe(e)},t.prototype.getMessageFromCache=function(e){var t;return Object(o.Gb)(this,void 0,void 0,(function(){return Object(o.Rb)(this,(function(n){switch(n.label){case 0:return[4,this._messageCache.get(e)];case 1:return[2,null!==(t=n.sent())&&void 0!==t?t:null]}}))}))},t.prototype.getExactlyMatchingMessagesForTokenFromCache=function(e,t,n){return Object(o.Gb)(this,void 0,void 0,(function(){return Object(o.Rb)(this,(function(r){switch(r.label){case 0:return[4,this._messageCache.fetch({channelUrl:e,token:t,filter:n,exactMatch:!0})];case 1:return[2,r.sent()]}}))}))},t.prototype.getMessagesFromCache=function(e,t,n,r,i,a){return void 0===i&&(i=s.G),void 0===a&&(a=!0),Object(o.Gb)(this,void 0,void 0,(function(){return Object(o.Rb)(this,(function(o){switch(o.label){case 0:return[4,this._messageCache.fetch({channelUrl:e,token:t,limit:i,filter:r,backward:"next"===n,inclusive:a})];case 1:return[2,o.sent()]}}))}))},t.prototype.getPollMessagesFromCache=function(e,t,n,r){return Object(o.Gb)(this,void 0,void 0,(function(){return Object(o.Rb)(this,(function(i){switch(i.label){case 0:return[4,this._messageCache.fetch({channelUrl:e,token:t,limit:r,filter:n,backward:!1,isPollOnly:!0})];case 1:return[2,i.sent()]}}))}))},t.prototype.getCachedMessageCountBetween=function(e,t,n,r){return Object(o.Gb)(this,void 0,void 0,(function(){return Object(o.Rb)(this,(function(i){switch(i.label){case 0:return[4,this._messageCache.countBetween(e,t,new h({top:n,bottom:r}))];case 1:return[2,i.sent()]}}))}))},t.prototype.getUnsentMessagesFromCache=function(e,t){return Object(o.Gb)(this,void 0,void 0,(function(){return Object(o.Rb)(this,(function(n){switch(n.label){case 0:return[4,this._unsentMessageCache.fetch({channelUrl:e,filter:t})];case 1:return[2,n.sent()]}}))}))},t.prototype.removeFailedMessageFromCache=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){return Object(o.Rb)(this,(function(t){switch(t.label){case 0:return[4,this._unsentMessageCache.remove([e])];case 1:return t.sent(),[2]}}))}))},t}(o.G),f=function(e){function t(t,n,r){var i,a,u,c,l=this;(l=e.call(this,t,"ADMM",r)||this).message=new s.gb(t,r);var h=o.v.of(t).sdkState;return l.isMentioned=Object(o.qb)(l.message.mentionType,null!==(u=null!==(i=l.message.mentionedUserIds)&&void 0!==i?i:null===(a=l.message.mentionedUsers)||void 0===a?void 0:a.map((function(e){return e.userId})))&&void 0!==u?u:[],h.userId),l.forceUpdateLastMessage=null!==(c=r.force_update_last_message)&&void 0!==c&&c,l}return Object(o.A)(t,e),t}(o.w),p=function(e){function t(t,n,r){var i,a,u,c,l,h=this;(h=e.call(this,t,"AEDI",r)||this).message=new s.gb(t,r);var d=o.v.of(t).sdkState;return h.mentionCountChange=Object(o.Ab)({mentionType:null===(i=r.old_values)||void 0===i?void 0:i.mention_type,mentionedUserIds:null!==(u=null===(a=r.old_values)||void 0===a?void 0:a.mentioned_user_ids)&&void 0!==u?u:[]},Object(o.jc)({mentionType:h.message.mentionType,mentionedUserIds:null!==(c=h.message.mentionedUserIds)&&void 0!==c?c:null===(l=h.message.mentionedUsers)||void 0===l?void 0:l.map((function(e){return e.userId}))}),d.userId),h}return Object(o.A)(t,e),t}(o.w),m=function(e){function t(t,n,r){var i=e.call(this,t,"MRCT",r)||this;return i.channelUrl=r.channel_url,i.channelType=r.channel_type,i.event=new s.hb(r),i}return Object(o.A)(t,e),t}(o.w),g=function(e){function t(t,n,r){var i=e.call(this,t,"MTHD",r)||this;return i.event=new s.ib(t,r),i}return Object(o.A)(t,e),t}(o.w),b=function(e){function t(t,n,r){var i=e.call(this,t,"MCNT",r)||this;return i.groupChannelMemberCounts=r.group_channels.map((function(e){return{channelUrl:e.channel_url,memberCount:e.member_count,joinedMemberCount:e.joined_member_count,updatedAt:e.ts}})),i.openChannelMemberCounts=r.open_channels.map((function(e){return{channelUrl:e.channel_url,participantCount:e.participant_count,updatedAt:e.ts}})),i}return Object(o.A)(t,e),t}(o.w),v=function(e){function t(t,n,r){var i=e.call(this,t,"PEDI",r)||this;return i.event=new a.a(t,r),i.status=Object(o.Ob)(r.poll.status)||r.poll.status,i.channelUrl=r.channel_url,i.channelType=r.channel_type,i}return Object(o.A)(t,e),t}(o.w),y=function(){this.onUserMuted=o.wb,this.onUserUnmuted=o.wb,this.onUserBanned=o.wb,this.onUserUnbanned=o.wb,this.onChannelChanged=o.wb,this.onChannelDeleted=o.wb,this.onChannelFrozen=o.wb,this.onChannelUnfrozen=o.wb,this.onOperatorUpdated=o.wb,this.onChannelMemberCountChanged=o.wb,this.onMetaDataCreated=o.wb,this.onMetaDataUpdated=o.wb,this.onMetaDataDeleted=o.wb,this.onMetaCounterCreated=o.wb,this.onMetaCounterUpdated=o.wb,this.onMetaCounterDeleted=o.wb,this.onMessageReceived=o.wb,this.onMessageUpdated=o.wb,this.onMessageDeleted=o.wb,this.onMentionReceived=o.wb,this.onReactionUpdated=o.wb,this.onThreadInfoUpdated=o.wb}},function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return m})),n.d(t,"c",(function(){return r})),n.d(t,"d",(function(){return i})),n.d(t,"e",(function(){return g})),n.d(t,"f",(function(){return o})),n.d(t,"g",(function(){return b})),n.d(t,"h",(function(){return c})),n.d(t,"i",(function(){return p})),n.d(t,"j",(function(){return h})),n.d(t,"k",(function(){return l}));var r,i,o,s,a=n(0),u=n(1);(s=r||(r={})).LATEST_LAST_MESSAGE="latest_last_message",s.CHRONOLOGICAL="chronological",s.CHANNEL_NAME_ALPHABETICAL="channel_name_alphabetical",s.METADATA_VALUE_ALPHABETICAL="metadata_value_alphabetical",function(e){e.CHRONOLOGICAL="chronological",e.CHANNEL_NAME_ALPHABETICAL="channel_name_alphabetical",e.METADATA_VALUE_ALPHABETICAL="metadata_value_alphabetical"}(i||(i={})),function(e){e.CREATED_AT="created_at",e.SCHEDULED_AT="scheduled_at"}(o||(o={}));var c,l=function(e){switch(e){case r.LATEST_LAST_MESSAGE:return["-lastMessageUpdatedAt","-createdAt","syncIndex"];case r.CHRONOLOGICAL:return["-createdAt","syncIndex"];case r.CHANNEL_NAME_ALPHABETICAL:return["name"];default:return["-lastMessageUpdatedAt","-createdAt","syncIndex"]}},h=function(e){function t(t){var n=t.message,r=e.call(this)||this;return r.message=n,r}return Object(a.A)(t,e),t}(a.cb),d={},f=function(){function e(e,t){var n=t.localCacheEnabled,r=t.dispatcher,i=t.sdkState,o=t.logger,s=this;this._iid=e,d[e]=this,this._localCacheEnabled=n,this._isProcessingAutoResend=!1,this._autoResendQueue=[],this._dispatcher=r,this._logger=o,this._sdkState=i,this._localCacheEnabled&&r.on((function(e){if(e instanceof a.nc)switch(e.stateType){case a.oc.CONNECTED:s._isProcessingAutoResend||s.processAutoResendRegisteredPendingMessages().then((function(){return s._processNextAutoResend()}));break;case a.oc.INTERNAL_DISCONNECTED:case a.oc.EXTERNAL_DISCONNECTED:s._isProcessingAutoResend=!1}}))}return e.of=function(e){return d[e]},e.prototype.processNonAutoResendRegisteredPendingMessages=function(){return Object(a.Gb)(this,void 0,void 0,(function(){var e,t,n,r,i,o;return Object(a.Rb)(this,(function(s){switch(s.label){case 0:return[4,this._fetchAllCachedPendingMessages()];case 1:e=s.sent();try{for(t=Object(a.gc)(e),n=t.next();!n.done;n=t.next())0===(r=n.value).errorCode&&(this._logger.debug("cached pending message is not auto-resend registered. changing its sending status to failed: ",r.reqId),r.sendingStatus=a.jb.FAILED,r.errorCode=a.rb.ACK_TIMEOUT,this._dispatcher.dispatch(new a.I({messages:[r],source:a.x.LOCAL_MESSAGE_FAILED})))}catch(e){i={error:e}}finally{try{n&&!n.done&&(o=t.return)&&o.call(t)}finally{if(i)throw i.error}}return[2]}}))}))},e.prototype.processAutoResendRegisteredPendingMessages=function(){return Object(a.Gb)(this,void 0,void 0,(function(){var e,t,n,r,i,o,s,u;return Object(a.Rb)(this,(function(c){switch(c.label){case 0:return[4,this._fetchAllCachedPendingMessages()];case 1:e=c.sent();try{for(t=Object(a.gc)(e),n=t.next();!n.done;n=t.next())(r=n.value).errorCode&&Object(a.K)(r.errorCode)&&(i=(new Date).getTime(),o=r.createdAt+2592e5,i<=o?this._autoResendQueue.map((function(e){return e.reqId})).indexOf(r.reqId)<0&&this._autoResendQueue.push(r):(this._logger.debug("auto-resend registered pending messaged expired. expiration date: ",new Date(o).toLocaleString()),r.sendingStatus=a.jb.FAILED,this._dispatcher.dispatch(new a.I({messages:[r],source:a.x.LOCAL_MESSAGE_FAILED}))))}catch(e){s={error:e}}finally{try{n&&!n.done&&(u=t.return)&&u.call(t)}finally{if(s)throw s.error}}return[2]}}))}))},e.prototype.completeCurrentAndProcessNextAutoResend=function(e){if(this._localCacheEnabled&&(e.sendingStatus===a.jb.SUCCEEDED||e.sendingStatus===a.jb.FAILED&&!Object(a.K)(e.errorCode))){var t=this.indexOf(e);t>=0&&this._autoResendQueue.splice(t,1),0===t&&this._processNextAutoResend()}},e.prototype._fetchAllCachedPendingMessages=function(){return Object(a.Gb)(this,void 0,void 0,(function(){var e,t;return Object(a.Rb)(this,(function(n){switch(n.label){case 0:return e=u.yb.of(this._iid),(t=new u.Cb).replyType=a.ub.ALL,[4,e.fetch({sendingStatus:a.jb.PENDING,backward:!0,filter:t})];case 1:return[2,n.sent()]}}))}))},e.prototype.indexOf=function(e){return this._autoResendQueue.length>0?this._autoResendQueue.map((function(e){return e.reqId})).indexOf(e.reqId):-1},e.prototype._isNotInQueue=function(e){return-1===this._autoResendQueue.map((function(e){return e.reqId})).indexOf(e.reqId)},e.prototype._processNextAutoResend=function(){return Object(a.Gb)(this,void 0,void 0,(function(){var e;return Object(a.Rb)(this,(function(t){if(this._localCacheEnabled&&"foreground"===this._sdkState.appState)try{this._autoResendQueue.length>0?(this._isProcessingAutoResend||(this._logger.debug("auto-resend queue started."),this._isProcessingAutoResend=!0),e=this._autoResendQueue[0],this._dispatcher.dispatch(new h({message:e})),this._logger.debug("processing auto-resend for message request id: ",e.reqId)):(this._logger.debug("auto-resend queue finished."),this._isProcessingAutoResend=!1)}catch(e){this._logger.warn("process auto-resend error: ",e),this._isProcessingAutoResend=!1}return[2]}))}))},e}();!function(e){e[e.USER_BLOCK=20001]="USER_BLOCK",e[e.USER_UNBLOCK=2e4]="USER_UNBLOCK",e[e.FRIEND_DISCOVERED=20900]="FRIEND_DISCOVERED"}(c||(c={}));var p=function(){function e(e){this.category=e.cat,this.data=e.data}return e.getDataAsUserBlockEvent=function(e,t){var n=t.data,r=n.blocker,i=n.blockee;return{blocker:new a.u(e,r),blockee:new a.u(e,i)}},e.getDataAsFriendDiscoveredEvent=function(e,t){var n=t.data.friend_discoveries;return{friendDiscoveries:Array.isArray(n)?n.map((function(t){return new a.u(e,t)})):[]}},e}(),m=function(e){function t(t,n){var r=n.userId,i=e.call(this)||this;return i._iid=t,i.userId=r,i}return Object(a.A)(t,e),t}(a.cb),g=function(e){function t(){return e.call(this)||this}return Object(a.A)(t,e),t}(a.cb),b=function(e){function t(t,n,r){var i=e.call(this,t,"USEV",r)||this;return i.event=new p(r),i}return Object(a.A)(t,e),t}(a.w)},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},function(e,t,n){
/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
var r=n(17),i=r.Buffer;function o(e,t){for(var n in e)t[n]=e[n]}function s(e,t,n){return i(e,t,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=r:(o(r,t),t.Buffer=s),s.prototype=Object.create(i.prototype),o(i,s),s.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,n)},s.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=i(e);return void 0!==t?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},s.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},s.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}},function(e,t,n){"use strict";var r=n(4),i=n(13),o={local:{serviceName:"chatterbox-ui",serviceVersion:"1.0"},localAgainstDev:{serviceName:"chatterbox-ui",serviceVersion:"1.0"},dev:{serviceName:"chatterbox-ui",serviceVersion:"1.0"},show:{serviceName:"chatterbox-ui",serviceVersion:"1.0"},preprod:{serviceName:"chatterbox-ui",serviceVersion:"1.0"},prod:{serviceName:"chatterbox-ui",serviceVersion:"1.0"}},s=function(e){return e&&o[e]?o[e]:null},a={},u={initialize:function(e){var t;try{var n,o,u=window[e],c=(u.environment?u.environment.trim():null)||"prod",l=s(c);l||console.log("Failed to load environment config data"),t=Object(r.a)(Object(r.a)({},u.props.algoliaConfig),{},{environment:c,eventEditionId:u.props.context.eventEditionId,interfaceLocale:u.props.context.interfaceLocale,primaryLocale:u.props.context.primaryLocale,themes:u.props.themes,baseApiUrl:u.props.baseApiUrl,loggingUrl:u.props.loggingUrl||"".concat(u.props.baseApiUrl,"log"),participantProtectedDetailsPath:null===(n=window)||void 0===n||null===(o=n.reactSettingsChat)||void 0===o?void 0:o.props.navigation.participantProtectedDetails,baseUrlPrivateAssets:u.props.baseUrlPrivateAssets,baseUrlPublicAssets:u.props.baseUrlPublicAssets,assets:{defaultParticipantPhotoUrl:u.props.assets.defaultParticipantPhotoUrl,defaultParticipantPhotoMobileUrl:u.props.assets.defaultParticipantPhotoMobileUrl}},l)}catch(e){i.a.logWarning("settings error",e)}Object.assign(a,t)},get:function(){return a}};t.a=u},function(e,t,n){"use strict";n.d(t,"f",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return s})),n.d(t,"e",(function(){return a})),n.d(t,"d",(function(){return o})),n.d(t,"b",(function(){return u}));var r={OK:200,BadRequest:400,NoContent:204,NotFound:404,Error:500,Unauthorized:401,Created:201,Forbidden:403},i={CHAT_SESSION_TOKEN:"ChatSessionToken",CHAT_APP_ID:"ChatAppId",ALGOLIA_TOKEN:"AlgoliaToken"},o={desktop:"desktop",mobile:"mobile"},s={send:"Chat_ChatMessage_Sent",seen:"Chat_ChatMessage_Seen"},a=768,u={RxAtlasEe:"rxAtlasEe",RxParticipant:"rxParticipant"}},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */
i=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var i=t&&t.prototype instanceof f?t:f,o=Object.create(i.prototype),s=new O(r||[]);return o._invoke=function(e,t,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return C()}for(n.method=i,n.arg=o;;){var s=n.delegate;if(s){var a=E(s,n);if(a){if(a===d)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=h(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===d)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,s),o}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var d={};function f(){}function p(){}function m(){}var g={};c(g,s,(function(){return this}));var b=Object.getPrototypeOf,v=b&&b(b(A([])));v&&v!==t&&n.call(v,s)&&(g=v);var y=m.prototype=f.prototype=Object.create(g);function _(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){var i;this._invoke=function(o,s){function a(){return new t((function(i,a){!function i(o,s,a,u){var c=h(e[o],e,s);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==r(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){i("next",e,a,u)}),(function(e){i("throw",e,a,u)})):t.resolve(d).then((function(e){l.value=e,a(l)}),(function(e){return i("throw",e,a,u)}))}u(c.arg)}(o,s,i,a)}))}return i=i?i.then(a,a):a()}}function E(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=h(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,d;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function M(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function A(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:C}}function C(){return{value:void 0,done:!0}}return p.prototype=m,c(y,"constructor",m),c(m,"constructor",p),p.displayName=c(m,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,c(e,u,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},_(w.prototype),c(w.prototype,a,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var s=new w(l(t,n,r,i),o);return e.isGeneratorFunction(n)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},_(y),c(y,u,"Generator"),c(y,s,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=A,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(M),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return s.type="throw",s.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],s=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var a=n.call(o,"catchLoc"),u=n.call(o,"finallyLoc");if(a&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=e,s.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),M(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;M(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:A(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}n.d(t,"a",(function(){return i}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r={GENERIC_ERROR:"GENERIC_ERROR",SESSION_ERROR:"SESSION_ERROR",USER_NOT_ACTIVATE_ERROR:"USER_NOT_ACTIVATE_ERROR",NO_ERROR:"NO_ERROR",ALGOLIA_TOKEN_COOKIE_NOT_FOUND:"ALGOLIA_TOKEN_COOKIE_NOT_FOUND",INACTIVE_SESSION_EXPIRED_ERROR:"SESSION_EXPIRED_ERROR"}},function(e,t,n){"use strict";var r=n(160),i=n.n(r),o=n(9),s=n(20),a={},u=function(){var e,t,n,r,u,c;return 0===Object.keys(a).length&&(e=o.a.get(),t=e.loggingUrl,n=e.serviceName,r=e.serviceVersion,u=s.a.getCookie("ClientId"),c=i.a.configure({url:t,service:n,version:r,apigeeClientId:u}),Object.freeze(Object.assign(a,c))),a},c=function(e){return e instanceof Error?e.toString():"string"==typeof e?e:(e.body&&e.body.errors&&(t=e.body.errors),e.errors&&(t=e.errors),t?t.map((function(e){return e.code?"".concat(e.code).concat((t=e.message)?": ".concat(t):""):function(e){return"string"==typeof e?e:JSON.stringify(e)}(e);var t})).join(", "):null);var t};t.a={logInfo:function(e,t){u().info({message:e,userIdentification:o.a.get().userId},t?c(t):"")},logWarning:function(e,t){u().warn({message:e,userIdentification:o.a.get().userId},t?c(t):"")},logError:function(e,t){u().error({message:e,userIdentification:o.a.get().userId},t?c(t):"")}}},function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n=e[1]||"",r=e[3];if(!r)return n;if(t&&"function"==typeof btoa){var i=(s=r,a=btoa(unescape(encodeURIComponent(JSON.stringify(s)))),u="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(a),"/*# ".concat(u," */")),o=r.sources.map((function(e){return"/*# sourceURL=".concat(r.sourceRoot||"").concat(e," */")}));return[n].concat(o).concat([i]).join("\n")}var s,a,u;return[n].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,r){"string"==typeof e&&(e=[[null,e,""]]);var i={};if(r)for(var o=0;o<this.length;o++){var s=this[o][0];null!=s&&(i[s]=!0)}for(var a=0;a<e.length;a++){var u=[].concat(e[a]);r&&i[u[0]]||(n&&(u[2]?u[2]="".concat(n," and ").concat(u[2]):u[2]=n),t.push(u))}},t}},function(e,t,n){"use strict";function r(e,t,n,r,i,o,s){try{var a=e[o](s),u=a.value}catch(e){return void n(e)}a.done?t(u):Promise.resolve(u).then(r,i)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(i,o){var s=e.apply(t,n);function a(e){r(s,i,o,a,u,"next",e)}function u(e){r(s,i,o,a,u,"throw",e)}a(void 0)}))}}n.d(t,"a",(function(){return i}))},function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(e){r=s}}();var u,c=[],l=!1,h=-1;function d(){l&&u&&(l=!1,u.length?c=u.concat(c):h=-1,c.length&&f())}function f(){if(!l){var e=a(d);l=!0;for(var t=c.length;t;){for(u=c,c=[];++h<t;)u&&u[h].run();h=-1,t=c.length}u=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function m(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new p(e,t)),1!==c.length||l||a(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){"use strict";(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var r=n(188),i=n(189),o=n(100);function s(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(e,t){if(s()<t)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=u.prototype:(null===e&&(e=new u(t)),e.length=t),e}function u(e,t,n){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return h(this,e)}return c(this,e,t,n)}function c(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r);u.TYPED_ARRAY_SUPPORT?(e=t).__proto__=u.prototype:e=d(e,t);return e}(e,t,n,r):"string"==typeof t?function(e,t,n){"string"==typeof n&&""!==n||(n="utf8");if(!u.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|p(t,n),i=(e=a(e,r)).write(t,n);i!==r&&(e=e.slice(0,i));return e}(e,t,n):function(e,t){if(u.isBuffer(t)){var n=0|f(t.length);return 0===(e=a(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(r=t.length)!=r?a(e,0):d(e,t);if("Buffer"===t.type&&o(t.data))return d(e,t.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function h(e,t){if(l(t),e=a(e,t<0?0:0|f(t)),!u.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function d(e,t){var n=t.length<0?0:0|f(t.length);e=a(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function f(e){if(e>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|e}function p(e,t){if(u.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return B(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return H(e).length;default:if(r)return B(e).length;t=(""+t).toLowerCase(),r=!0}}function m(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return k(this,t,n);case"utf8":case"utf-8":return A(this,t,n);case"ascii":return C(this,t,n);case"latin1":case"binary":return T(this,t,n);case"base64":return O(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function g(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function b(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=u.from(t,r)),u.isBuffer(t))return 0===t.length?-1:v(e,t,n,r,i);if("number"==typeof t)return t&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):v(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function v(e,t,n,r,i){var o,s=1,a=e.length,u=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;s=2,a/=2,u/=2,n/=2}function c(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(i){var l=-1;for(o=n;o<a;o++)if(c(e,o)===c(t,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===u)return l*s}else-1!==l&&(o-=o-l),l=-1}else for(n+u>a&&(n=a-u),o=n;o>=0;o--){for(var h=!0,d=0;d<u;d++)if(c(e,o+d)!==c(t,d)){h=!1;break}if(h)return o}return-1}function y(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var s=0;s<r;++s){var a=parseInt(t.substr(2*s,2),16);if(isNaN(a))return s;e[n+s]=a}return s}function _(e,t,n,r){return q(B(t,e.length-n),e,n,r)}function w(e,t,n,r){return q(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function E(e,t,n,r){return w(e,t,n,r)}function S(e,t,n,r){return q(H(t),e,n,r)}function M(e,t,n,r){return q(function(e,t){for(var n,r,i,o=[],s=0;s<e.length&&!((t-=2)<0);++s)n=e.charCodeAt(s),r=n>>8,i=n%256,o.push(i),o.push(r);return o}(t,e.length-n),e,n,r)}function O(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function A(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o,s,a,u,c=e[i],l=null,h=c>239?4:c>223?3:c>191?2:1;if(i+h<=n)switch(h){case 1:c<128&&(l=c);break;case 2:128==(192&(o=e[i+1]))&&(u=(31&c)<<6|63&o)>127&&(l=u);break;case 3:o=e[i+1],s=e[i+2],128==(192&o)&&128==(192&s)&&(u=(15&c)<<12|(63&o)<<6|63&s)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:o=e[i+1],s=e[i+2],a=e[i+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&(u=(15&c)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&u<1114112&&(l=u)}null===l?(l=65533,h=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),i+=h}return function(e){var t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=4096));return n}(r)}t.Buffer=u,t.SlowBuffer=function(e){+e!=e&&(e=0);return u.alloc(+e)},t.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=s(),u.poolSize=8192,u._augment=function(e){return e.__proto__=u.prototype,e},u.from=function(e,t,n){return c(null,e,t,n)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(e,t,n){return function(e,t,n,r){return l(t),t<=0?a(e,t):void 0!==n?"string"==typeof r?a(e,t).fill(n,r):a(e,t).fill(n):a(e,t)}(null,e,t,n)},u.allocUnsafe=function(e){return h(null,e)},u.allocUnsafeSlow=function(e){return h(null,e)},u.isBuffer=function(e){return!(null==e||!e._isBuffer)},u.compare=function(e,t){if(!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!o(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=u.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var s=e[n];if(!u.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,i),i+=s.length}return r},u.byteLength=p,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)g(this,t,t+1);return this},u.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},u.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},u.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?A(this,0,e):m.apply(this,arguments)},u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},u.prototype.compare=function(e,t,n,r,i){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(r>>>=0),s=(n>>>=0)-(t>>>=0),a=Math.min(o,s),c=this.slice(r,i),l=e.slice(t,n),h=0;h<a;++h)if(c[h]!==l[h]){o=c[h],s=l[h];break}return o<s?-1:s<o?1:0},u.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},u.prototype.indexOf=function(e,t,n){return b(this,e,t,n,!0)},u.prototype.lastIndexOf=function(e,t,n){return b(this,e,t,n,!1)},u.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return y(this,e,t,n);case"utf8":case"utf-8":return _(this,e,t,n);case"ascii":return w(this,e,t,n);case"latin1":case"binary":return E(this,e,t,n);case"base64":return S(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function C(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function T(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function k(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=F(e[o]);return i}function x(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function j(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function I(e,t,n,r,i,o){if(!u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function R(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);i<o;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function N(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);i<o;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function P(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function D(e,t,n,r,o){return o||P(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function U(e,t,n,r,o){return o||P(e,0,n,8),i.write(e,t,n,r,52,8),n+8}u.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),u.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=u.prototype;else{var i=t-e;n=new u(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+e]}return n},u.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||j(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},u.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||j(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},u.prototype.readUInt8=function(e,t){return t||j(e,1,this.length),this[e]},u.prototype.readUInt16LE=function(e,t){return t||j(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUInt16BE=function(e,t){return t||j(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUInt32LE=function(e,t){return t||j(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUInt32BE=function(e,t){return t||j(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||j(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},u.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||j(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},u.prototype.readInt8=function(e,t){return t||j(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,t){t||j(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(e,t){t||j(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(e,t){return t||j(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return t||j(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readFloatLE=function(e,t){return t||j(e,4,this.length),i.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return t||j(e,4,this.length),i.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return t||j(e,8,this.length),i.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return t||j(e,8,this.length),i.read(this,e,!1,52,8)},u.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||I(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},u.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||I(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},u.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,1,255,0),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},u.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):R(this,e,t,!0),t+2},u.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):R(this,e,t,!1),t+2},u.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):N(this,e,t,!0),t+4},u.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):N(this,e,t,!1),t+4},u.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);I(this,e,t,n,i-1,-i)}var o=0,s=1,a=0;for(this[t]=255&e;++o<n&&(s*=256);)e<0&&0===a&&0!==this[t+o-1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+n},u.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);I(this,e,t,n,i-1,-i)}var o=n-1,s=1,a=0;for(this[t+o]=255&e;--o>=0&&(s*=256);)e<0&&0===a&&0!==this[t+o+1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+n},u.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,1,127,-128),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):R(this,e,t,!0),t+2},u.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):R(this,e,t,!1),t+2},u.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):N(this,e,t,!0),t+4},u.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):N(this,e,t,!1),t+4},u.prototype.writeFloatLE=function(e,t,n){return D(this,e,t,!0,n)},u.prototype.writeFloatBE=function(e,t,n){return D(this,e,t,!1,n)},u.prototype.writeDoubleLE=function(e,t,n){return U(this,e,t,!0,n)},u.prototype.writeDoubleBE=function(e,t,n){return U(this,e,t,!1,n)},u.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,o=r-n;if(this===e&&n<t&&t<r)for(i=o-1;i>=0;--i)e[i+t]=this[i+n];else if(o<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},u.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!u.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{var s=u.isBuffer(e)?e:B(new u(e,r).toString()),a=s.length;for(o=0;o<n-t;++o)this[o+t]=s[o%a]}return this};var L=/[^+\/0-9A-Za-z-_]/g;function F(e){return e<16?"0"+e.toString(16):e.toString(16)}function B(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],s=0;s<r;++s){if((n=e.charCodeAt(s))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function H(e){return r.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(L,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function q(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}}).call(this,n(19))},function(e,t,n){"use strict";var r=n(4),i={"en-GB":n(168),"pt-BR":n(169),"es-MX":n(170)},o=function(e){return i[e]||i["en-GB"]},s={fromSuccess:function(e){return Object(r.a)(Object(r.a)({},e),{},{mustLogIn:!1,errors:[],fieldErrors:{},ok:!0})},error:{constructLocalizedErrorMessage:function(e,t){var n=o(e).errorMessages;return t.map((function(t){return{code:t,message:n[t],locale:e}}))}},info:{constructLocalizedInfoMessage:function(e,t){var n=o(e).infoMessages;return t.map((function(t){return{code:t,message:n[t],locale:e}}))}},ui:{constructLocalizedInfoMessage:function(e,t){var n=o(e).ui;return t.map((function(t){return{code:t,message:n[t],locale:e}}))}},fromGraphQlError:function(e,t){var n=t.map((function(e){return e.extensions.code}));if(n.includes("unauthorized"))return{isAuthenticated:!1,errors:[]};var r=o(e).errorMessages;return{isAuthenticated:!0,errors:n.map((function(e){return r[e]}))}}};t.a=s},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";var r=n(4),i=n(11),o=n(15),s=n(40),a=n(21),u=n(31),c=n(32),l="undefined"!=typeof window&&(window&&window.authSettings&&window.authSettings.usePkce),h=function(e){return Object.assign.apply(Object,[{}].concat(Object(u.a)(document.cookie.split("; ").map((function(e){var t=e.split("="),n=Object(a.a)(t,2),r=n[0],i=n[1];return Object(s.a)({},r,i)})))))[e]},d=function(){return{"x-clientid":h("ClientId")||"IaXWs8Eg721A9D0NYKq3fM0hhkAldXHx"}},f=function(){var e=Object(o.a)(Object(i.a)().mark((function e(){var t;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m();case 2:if(!(t=e.sent)){e.next=7;break}return e.abrupt("return",{Authorization:"Bearer ".concat(t)});case 7:return e.abrupt("return",{});case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(){return Object(r.a)(Object(r.a)({},{"Content-Type":"application/json"}),d())},m=function(){return l?c.authController.getToken().then((function(e){return e})).catch((function(e){return null})):Promise.resolve(h("RX_AUTH"))};t.a={getCookie:h,getHeaders:p,getHeadersAuthorized:function(){return f().then((function(e){return Object(r.a)(Object(r.a)({},p()),e)}))},getFileTypeHeadersAuthorized:function(){return f().then((function(e){return Object(r.a)(Object(r.a)({},d()),e)}))},getClientIdHeader:d,getAuthHeader:f,getToken:m,setCookie:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"/";return document.cookie="".concat(e,"=").concat(t,";expires=").concat(n,";path=").concat(r)}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(66);function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],s=!0,a=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);s=!0);}catch(e){a=!0,i=e}finally{try{s||null==n.return||n.return()}finally{if(a)throw i}}return o}}(e,t)||Object(r.a)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return c}));var r=n(31),i=n(96),o=n(56),s=n(163),a=n(164),u=n(171),c=Object(o.createStore)(i.a,i.b,Object(a.composeWithDevTools)(Object(o.applyMiddleware)(s.a),o.applyMiddleware.apply(void 0,Object(r.a)(u.a))));e.window.chatterUiDispatcher=c}).call(this,n(19))},function(e,t,n){"use strict";var r,i=function(){return void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r},o=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),s=[];function a(e){for(var t=-1,n=0;n<s.length;n++)if(s[n].identifier===e){t=n;break}return t}function u(e,t){for(var n={},r=[],i=0;i<e.length;i++){var o=e[i],u=t.base?o[0]+t.base:o[0],c=n[u]||0,l="".concat(u," ").concat(c);n[u]=c+1;var h=a(l),d={css:o[1],media:o[2],sourceMap:o[3]};-1!==h?(s[h].references++,s[h].updater(d)):s.push({identifier:l,updater:g(d,t),references:1}),r.push(l)}return r}function c(e){var t=document.createElement("style"),r=e.attributes||{};if(void 0===r.nonce){var i=n.nc;i&&(r.nonce=i)}if(Object.keys(r).forEach((function(e){t.setAttribute(e,r[e])})),"function"==typeof e.insert)e.insert(t);else{var s=o(e.insert||"head");if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(t)}return t}var l,h=(l=[],function(e,t){return l[e]=t,l.filter(Boolean).join("\n")});function d(e,t,n,r){var i=n?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(e.styleSheet)e.styleSheet.cssText=h(t,i);else{var o=document.createTextNode(i),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(o,s[t]):e.appendChild(o)}}function f(e,t,n){var r=n.css,i=n.media,o=n.sourceMap;if(i?e.setAttribute("media",i):e.removeAttribute("media"),o&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}var p=null,m=0;function g(e,t){var n,r,i;if(t.singleton){var o=m++;n=p||(p=c(t)),r=d.bind(null,n,o,!1),i=d.bind(null,n,o,!0)}else n=c(t),r=f.bind(null,n,t),i=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else i()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=i());var n=u(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var r=0;r<n.length;r++){var i=a(n[r]);s[i].references--}for(var o=u(e,t),c=0;c<n.length;c++){var l=a(n[c]);0===s[l].references&&(s[l].updater(),s.splice(l,1))}n=o}}}},function(e,t){function n(e,t){if(!e)throw new Error(t||"Assertion failed")}e.exports=n,n.equal=function(e,t,n){if(e!=t)throw new Error(n||"Assertion failed: "+e+" != "+t)}},function(e,t,n){"use strict";var r=t,i=n(30),o=n(24),s=n(140);r.assert=o,r.toArray=s.toArray,r.zero2=s.zero2,r.toHex=s.toHex,r.encode=s.encode,r.getNAF=function(e,t,n){var r=new Array(Math.max(e.bitLength(),n)+1);r.fill(0);for(var i=1<<t+1,o=e.clone(),s=0;s<r.length;s++){var a,u=o.andln(i-1);o.isOdd()?(a=u>(i>>1)-1?(i>>1)-u:u,o.isubn(a)):a=0,r[s]=a,o.iushrn(1)}return r},r.getJSF=function(e,t){var n=[[],[]];e=e.clone(),t=t.clone();for(var r,i=0,o=0;e.cmpn(-i)>0||t.cmpn(-o)>0;){var s,a,u=e.andln(3)+i&3,c=t.andln(3)+o&3;3===u&&(u=-1),3===c&&(c=-1),s=0==(1&u)?0:3!==(r=e.andln(7)+i&7)&&5!==r||2!==c?u:-u,n[0].push(s),a=0==(1&c)?0:3!==(r=t.andln(7)+o&7)&&5!==r||2!==u?c:-c,n[1].push(a),2*i===s+1&&(i=1-i),2*o===a+1&&(o=1-o),e.iushrn(1),t.iushrn(1)}return n},r.cachedProperty=function(e,t,n){var r="_"+t;e.prototype[t]=function(){return void 0!==this[r]?this[r]:this[r]=n.call(this)}},r.parseBytes=function(e){return"string"==typeof e?r.toArray(e,"hex"):e},r.intFromLE=function(e){return new i(e,"hex","le")}},function(e,t,n){"use strict";var r,i=n(11),o=n(15),s=n(49),a=n(0),u=n(1),c=n(5),l=(n(39),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._channels=new Map,t._enteredChannelUrls=[],t}return Object(a.A)(t,e),Object.defineProperty(t.prototype,"enteredChannels",{get:function(){var e=this;return this._enteredChannelUrls.map((function(t){return e._channels.get(t)})).filter((function(e){return!!e}))},enumerable:!1,configurable:!0}),t.prototype.isEnteredChannel=function(e){return this._enteredChannelUrls.includes(e)},t.prototype.enter=function(e){this._enteredChannelUrls.indexOf(e)<0&&this._enteredChannelUrls.push(e)},t.prototype.exit=function(e){var t=this._enteredChannelUrls.indexOf(e);t>=0&&this._enteredChannelUrls.splice(t,1)},t.prototype.exitAll=function(){this._enteredChannelUrls=[]},t.prototype.get=function(e){return Object(a.Gb)(this,void 0,void 0,(function(){return Object(a.Rb)(this,(function(t){return[2,this._channels.get(e)]}))}))},t.prototype.upsert=function(e){return Object(a.Gb)(this,void 0,void 0,(function(){var t,n=this;return Object(a.Rb)(this,(function(r){return t=[],e.forEach((function(e){if(n._channels.has(e.url)){var r=n._channels.get(e.url);Object.assign(r,e),t.push(r)}else n._channels.set(e.url,e),t.push(e)})),[2,t]}))}))},t.prototype.remove=function(e){return Object(a.Gb)(this,void 0,void 0,(function(){return Object(a.Rb)(this,(function(t){return this._channels.delete(e),this.exit(e),[2]}))}))},t.prototype.clear=function(){return Object(a.Gb)(this,void 0,void 0,(function(){return Object(a.Rb)(this,(function(e){return this._channels.clear(),this._enteredChannelUrls=[],[2]}))}))},t}(a.G)),h={channelUrl:void 0,name:void 0,coverUrlOrImage:void 0,data:void 0,customType:void 0,operatorUserIds:void 0,isEphemeral:void 0},d=function(e){function t(t){var n=t.channelUrl,r=t.isInternalCall,i=e.call(this)||this;return i.method=a.a.GET,i.path="".concat(r?a.Pb:a.Qb,"/").concat(encodeURIComponent(n)),i}return Object(a.A)(t,e),t}(a.Ub),f=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.channel=new k(t,n),r}return Object(a.A)(t,e),t}(a.Wb),p=function(e){function t(t){var n=this,r=t.channelUrl,i=t.coverUrlOrImage,o=t.name,s=t.data,u=t.customType,c=t.operatorUserIds,l=t.isEphemeral;return(n=e.call(this)||this).method=a.a.POST,n.path=a.Qb,n.params=Object(a.Tb)(Object(a.jc)({channel_url:r,cover_url:Object(a.B)("string",i)?i:null,cover_file:Object(a.Xb)(i)?i:null,name:o,data:s,custom_type:u,operators:c,is_ephemeral:l})),n}return Object(a.A)(t,e),t}(a.Ub);r=a.Wb,Object(a.A)((function(e,t){var n=r.call(this,e,t)||this;return n.channel=new k(e,t),n}),r);var m=function(e){function t(t){var n=t.channelUrl;return e.call(this,{code:"ENTR",payload:{channel_url:n},ackRequired:!0})||this}return Object(a.A)(t,e),t}(a.ob),g=function(e){function t(t,n,r){var i,o,s=this;return s=e.call(this,t,"SYEV",r)||this,r.data&&(s.participantCount=null!==(i=r.data.participant_count)&&void 0!==i?i:0,s.user=new a.u(t,r.data),s.ts=null!==(o=r.data.edge_ts)&&void 0!==o?o:0),s}return Object(a.A)(t,e),t}(c.c),b=function(e){function t(t){var n=t.channelUrl;return e.call(this,{code:"EXIT",payload:{channel_url:n},ackRequired:!0})||this}return Object(a.A)(t,e),t}(a.ob),v=function(e){function t(t,n,r){var i,o,s=this;return s=e.call(this,t,"EXIT",r)||this,r.data&&(s.participantCount=null!==(i=r.data.participant_count)&&void 0!==i?i:0,s.user=new a.u(t,r.data),s.ts=null!==(o=r.data.edge_ts)&&void 0!==o?o:0),s}return Object(a.A)(t,e),t}(c.c),y={},_=function(e){function t(t,n){var r=e.call(this,t,Object(a.Vb)(Object(a.Vb)({},n),{channelType:a.y.OPEN}))||this;return r.subscribeChannelEvent=a.wb,r.unsubscribeChannelEvent=a.wb,r.refreshChannel=function(){return Object(a.Gb)(r,void 0,void 0,(function(){return Object(a.Rb)(this,(function(e){return[2,Object(a.wb)()]}))}))},r._openChannelCache=new l(t),r._openChannelHandlers=new Map,r._dispatcher.on((function(e){var t,n;if(e instanceof a.w)r._handleEvent(e);else if(e instanceof a.nc&&e.stateType===a.oc.CONNECTED){var i=r._openChannelCache.enteredChannels;try{for(var o=Object(a.gc)(i),s=o.next();!s.done;s=o.next())s.value.enter()}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}}})),y[t]||(y[t]=r),r}return Object(a.A)(t,e),t.of=function(e){return y[e]},t.prototype.buildOpenChannelFromSerializedData=function(e){var t=Object(a.mc)(e);return new k(this._iid,k.payloadify(t))},t.prototype.getChannelFromCache=function(e){var t;return Object(a.Gb)(this,void 0,void 0,(function(){return Object(a.Rb)(this,(function(n){switch(n.label){case 0:return[4,this._openChannelCache.get(e)];case 1:return[2,null!==(t=n.sent())&&void 0!==t?t:null]}}))}))},t.prototype.upsertChannelsToCache=function(e){return Object(a.Gb)(this,void 0,void 0,(function(){return Object(a.Rb)(this,(function(t){switch(t.label){case 0:return[4,this._openChannelCache.upsert(e)];case 1:return[2,t.sent()]}}))}))},t.prototype.removeChannelsFromCache=function(e){return Object(a.Gb)(this,void 0,void 0,(function(){var t,n,r,i,o,s;return Object(a.Rb)(this,(function(u){switch(u.label){case 0:u.trys.push([0,5,6,7]),t=Object(a.gc)(e),n=t.next(),u.label=1;case 1:return n.done?[3,4]:(r=n.value,[4,this._openChannelCache.remove(r)]);case 2:u.sent(),u.label=3;case 3:return n=t.next(),[3,1];case 4:return[3,7];case 5:return i=u.sent(),o={error:i},[3,7];case 6:try{n&&!n.done&&(s=t.return)&&s.call(t)}finally{if(o)throw o.error}return[7];case 7:return[2]}}))}))},t.prototype.setEnteredToCache=function(e){this._openChannelCache.enter(e.url)},t.prototype.setExitedToCache=function(e){this._openChannelCache.exit(e.url)},t.prototype._handleEvent=function(e){return Object(a.Gb)(this,void 0,void 0,(function(){var t,n,r,i,o,s,l,h,d,f,p,m,b,y,_,w,E,S,M,O,A,C,T,k,x,j,I,R,N,P,D,U,L,F,B,H,q,V,G,z,W,K,Y,Q,J,Z,$,X,ee,te,ne,re,ie,oe,se,ae,ue,ce,le,he,de,fe,pe,me,ge,be,ve,ye,_e=this;return Object(a.Rb)(this,(function(we){switch(we.label){case 0:switch(we.trys.push([0,57,,58]),e.code){case"MESG":case"FILE":case"ADMM":case"BRDM":return[3,1];case"MEDI":case"FEDI":case"AEDI":return[3,4];case"DELM":return[3,7];case"MRCT":return[3,10];case"MTHD":return[3,13];case"MCNT":return[3,16];case"PEDI":return[3,27];case"VOTE":return[3,30];case"SYEV":return[3,33]}return[3,56];case 1:return i=null,"MESG"===e.code?i=e.as(u.D):"FILE"===e.code?i=e.as(u.E):"ADMM"!==e.code&&"BRDM"!=e.code||(i=e.as(c.a)),i?(t=i.message,n=i.isMentioned,t.channelType!==a.y.OPEN?[3,3]:[4,this.getChannel(t.channelUrl,!0)]):[3,3];case 2:r=we.sent(),Object(a.b)((function(){return Object(a.Gb)(_e,void 0,void 0,(function(){var e,i,o,s,u;return Object(a.Rb)(this,(function(c){try{for(e=Object(a.gc)(this._openChannelHandlers.values()),i=e.next();!i.done;i=e.next())o=i.value,this._openChannelCache.isEnteredChannel(r.url)&&(o.onMessageReceived&&o.onMessageReceived(r,t),n&&o.onMentionReceived&&o.onMentionReceived(r,t))}catch(e){s={error:e}}finally{try{i&&!i.done&&(u=e.return)&&u.call(e)}finally{if(s)throw s.error}}return[2]}))}))})),we.label=3;case 3:return[3,56];case 4:return i=null,"MEDI"===e.code?i=e.as(u.B):"FEDI"===e.code?i=e.as(u.C):"AEDI"===e.code&&(i=e.as(c.i)),i?(o=i.message,s=i.mentionCountChange,o.channelType!==a.y.OPEN?[3,6]:[4,this.getChannel(o.channelUrl,!0)]):[3,6];case 5:l=we.sent(),Object(a.b)((function(){return Object(a.Gb)(_e,void 0,void 0,(function(){var e,t,n,r,i;return Object(a.Rb)(this,(function(u){try{for(e=Object(a.gc)(this._openChannelHandlers.values()),t=e.next();!t.done;t=e.next())n=t.value,this._openChannelCache.isEnteredChannel(l.url)&&(n.onMessageUpdated&&n.onMessageUpdated(l,o),s>0&&n.onMentionReceived&&n.onMentionReceived(l,o))}catch(e){r={error:e}}finally{try{t&&!t.done&&(i=e.return)&&i.call(e)}finally{if(r)throw r.error}}return[2]}))}))})),we.label=6;case 6:return[3,56];case 7:return h=e.as(u.z),D=h.channelUrl,U=h.channelType,d=h.messageId,U!==a.y.OPEN?[3,9]:[4,this.getChannel(D,!0)];case 8:f=we.sent(),Object(a.b)((function(){return Object(a.Gb)(_e,void 0,void 0,(function(){var e,t,n,r,i;return Object(a.Rb)(this,(function(o){try{for(e=Object(a.gc)(this._openChannelHandlers.values()),t=e.next();!t.done;t=e.next())n=t.value,this._openChannelCache.isEnteredChannel(f.url)&&n.onMessageDeleted&&n.onMessageDeleted(f,d)}catch(e){r={error:e}}finally{try{t&&!t.done&&(i=e.return)&&i.call(e)}finally{if(r)throw r.error}}return[2]}))}))})),we.label=9;case 9:return[3,56];case 10:return p=e.as(c.g),D=p.channelUrl,U=p.channelType,m=p.event,U!==a.y.OPEN?[3,12]:[4,this.getChannel(D,!0)];case 11:b=we.sent(),Object(a.b)((function(){return Object(a.Gb)(_e,void 0,void 0,(function(){var e,t,n,r,i;return Object(a.Rb)(this,(function(o){try{for(e=Object(a.gc)(this._openChannelHandlers.values()),t=e.next();!t.done;t=e.next())n=t.value,this._openChannelCache.isEnteredChannel(b.url)&&n.onReactionUpdated&&n.onReactionUpdated(b,m)}catch(e){r={error:e}}finally{try{t&&!t.done&&(i=e.return)&&i.call(e)}finally{if(r)throw r.error}}return[2]}))}))})),we.label=12;case 12:return[3,56];case 13:return(y=e.as(c.l).event).channelType!==a.y.OPEN?[3,15]:[4,this.getChannel(y.channelUrl,!0)];case 14:_=we.sent(),Object(a.b)((function(){return Object(a.Gb)(_e,void 0,void 0,(function(){var e,t,n,r,i;return Object(a.Rb)(this,(function(o){try{for(e=Object(a.gc)(this._openChannelHandlers.values()),t=e.next();!t.done;t=e.next())n=t.value,this._openChannelCache.isEnteredChannel(_.url)&&n.onThreadInfoUpdated&&n.onThreadInfoUpdated(_,y)}catch(e){r={error:e}}finally{try{t&&!t.done&&(i=e.return)&&i.call(e)}finally{if(r)throw r.error}}return[2]}))}))})),we.label=15;case 15:return[3,56];case 16:w=e.as(c.d).openChannelMemberCounts,E=[],we.label=17;case 17:we.trys.push([17,22,23,24]),S=Object(a.gc)(w),M=S.next(),we.label=18;case 18:return M.done?[3,21]:(O=M.value,D=O.channelUrl,W=O.participantCount,A=O.updatedAt,[4,this.getChannelFromCache(D)]);case 19:(C=we.sent())&&C._updateParticipantCount(W,A)&&E.push(C),we.label=20;case 20:return M=S.next(),[3,18];case 21:return[3,24];case 22:return T=we.sent(),ve={error:T},[3,24];case 23:try{M&&!M.done&&(ye=S.return)&&ye.call(S)}finally{if(ve)throw ve.error}return[7];case 24:return E.length>0?[4,this.upsertChannelsToCache(E)]:[3,26];case 25:k=we.sent(),Object(a.b)((function(){return Object(a.Gb)(_e,void 0,void 0,(function(){var e,t,n,r,i;return Object(a.Rb)(this,(function(o){try{for(e=Object(a.gc)(this._openChannelHandlers.values()),t=e.next();!t.done;t=e.next())(n=t.value).onChannelMemberCountChanged&&n.onChannelMemberCountChanged(k)}catch(e){r={error:e}}finally{try{t&&!t.done&&(i=e.return)&&i.call(e)}finally{if(r)throw r.error}}return[2]}))}))})),we.label=26;case 26:return[3,56];case 27:return x=e.as(c.f),j=x.event,I=x.status,D=x.channelUrl,U=x.channelType,D&&U===a.y.OPEN?[4,this.getChannel(D,!0)]:[3,29];case 28:R=we.sent(),this._dispatcher.dispatch(new a.Q({event:j,source:a.x.EVENT_POLL_UPDATED})),Object(a.b)(I===a.Kb?function(){return Object(a.Gb)(_e,void 0,void 0,(function(){var e,t,n,r,i;return Object(a.Rb)(this,(function(o){try{for(e=Object(a.gc)(this._openChannelHandlers.values()),t=e.next();!t.done;t=e.next())(n=t.value).onPollDeleted&&n.onPollDeleted(R,j.pollId)}catch(e){r={error:e}}finally{try{t&&!t.done&&(i=e.return)&&i.call(e)}finally{if(r)throw r.error}}return[2]}))}))}:function(){return Object(a.Gb)(_e,void 0,void 0,(function(){var e,t,n,r,i;return Object(a.Rb)(this,(function(o){try{for(e=Object(a.gc)(this._openChannelHandlers.values()),t=e.next();!t.done;t=e.next())(n=t.value).onPollUpdated&&n.onPollUpdated(R,j)}catch(e){r={error:e}}finally{try{t&&!t.done&&(i=e.return)&&i.call(e)}finally{if(r)throw r.error}}return[2]}))}))}),we.label=29;case 29:return[3,56];case 30:return N=e.as(u.y),P=N.event,D=N.channelUrl,U=N.channelType,D&&U===a.y.OPEN?[4,this.getChannel(D,!0)]:[3,32];case 31:L=we.sent(),this._dispatcher.dispatch(new a.L({event:P,source:a.x.EVENT_POLL_VOTED})),Object(a.b)((function(){return Object(a.Gb)(_e,void 0,void 0,(function(){var e,t,n,r,i;return Object(a.Rb)(this,(function(o){try{for(e=Object(a.gc)(this._openChannelHandlers.values()),t=e.next();!t.done;t=e.next())(n=t.value).onPollVoted&&n.onPollVoted(L,P)}catch(e){r={error:e}}finally{try{t&&!t.done&&(i=e.return)&&i.call(e)}finally{if(r)throw r.error}}return[2]}))}))})),we.label=32;case 32:return[3,56];case 33:if(!(F=e.as(c.c).event).isOpenChannelEvent)return[3,55];switch(F.category){case c.k.CHANNEL_ENTER:return[3,34];case c.k.CHANNEL_EXIT:return[3,36];case c.k.CHANNEL_OPERATOR_UPDATE:return[3,38];case c.k.USER_CHANNEL_MUTE:case c.k.USER_CHANNEL_UNMUTE:return[3,40];case c.k.USER_CHANNEL_BAN:case c.k.USER_CHANNEL_UNBAN:return[3,42];case c.k.CHANNEL_FREEZE:case c.k.CHANNEL_UNFREEZE:return[3,44];case c.k.CHANNEL_DELETED:return[3,46];case c.k.CHANNEL_PROP_CHANGED:return[3,49];case c.k.CHANNEL_META_DATA_CHANGED:return[3,51];case c.k.CHANNEL_META_COUNTERS_CHANGED:return[3,53]}return[3,55];case 34:return[4,this.getChannel(F.channelUrl,!0)];case 35:return B=we.sent(),H=e.as(g),W=H.participantCount,q=H.user,V=B._updateParticipantCount(W,F.ts),Object(a.b)((function(){return Object(a.Gb)(_e,void 0,void 0,(function(){return Object(a.Rb)(this,(function(e){return this._openChannelHandlers.forEach((function(e){e.onUserEntered&&e.onUserEntered(B,q),V&&e.onChannelParticipantCountChanged&&e.onChannelParticipantCountChanged(B)})),[2]}))}))})),[3,55];case 36:return[4,this.getChannel(F.channelUrl,!0)];case 37:return G=we.sent(),z=e.as(v),W=z.participantCount,K=z.user,Y=G._updateParticipantCount(W,F.ts),Object(a.b)((function(){return Object(a.Gb)(_e,void 0,void 0,(function(){return Object(a.Rb)(this,(function(e){return this._openChannelHandlers.forEach((function(e){e.onUserExited&&e.onUserExited(G,K),Y&&e.onChannelParticipantCountChanged&&e.onChannelParticipantCountChanged(G)})),[2]}))}))})),[3,55];case 38:return[4,this.getChannel(F.channelUrl,!0)];case 39:return Q=we.sent(),J=e.as(c.e).operators,Q.operators=J,this.upsertChannelsToCache([Q]),Object(a.b)((function(){return Object(a.Gb)(_e,void 0,void 0,(function(){return Object(a.Rb)(this,(function(e){return this._openChannelHandlers.forEach((function(e){e.onOperatorUpdated&&e.onOperatorUpdated(Q,J)})),[2]}))}))})),[3,55];case 40:return[4,this.getChannel(F.channelUrl,!0)];case 41:return Z=we.sent(),$=F.category===c.k.USER_CHANNEL_MUTE,X=e.as($?u.w:u.x).user,Object(a.b)((function(){return Object(a.Gb)(_e,void 0,void 0,(function(){return Object(a.Rb)(this,(function(e){return this._openChannelHandlers.forEach((function(e){$?e.onUserMuted&&e.onUserMuted(Z,X):e.onUserUnmuted&&e.onUserUnmuted(Z,X)})),[2]}))}))})),[3,55];case 42:return[4,this.getChannel(F.channelUrl,!0)];case 43:return ee=we.sent(),te=F.category===c.k.USER_CHANNEL_BAN,ne=e.as(te?u.v:u.u).user,Object(a.b)((function(){return Object(a.Gb)(_e,void 0,void 0,(function(){return Object(a.Rb)(this,(function(e){return this._openChannelHandlers.forEach((function(e){te?e.onUserBanned&&e.onUserBanned(ee,ne):e.onUserUnbanned&&e.onUserUnbanned(ee,ne)})),[2]}))}))})),[3,55];case 44:return[4,this.getChannel(F.channelUrl,!0)];case 45:return re=we.sent(),ie=e.as(u.s).freeze,re.isFrozen=ie,this.upsertChannelsToCache([re]),Object(a.b)((function(){return Object(a.Gb)(_e,void 0,void 0,(function(){return Object(a.Rb)(this,(function(e){return this._openChannelHandlers.forEach((function(e){ie?e.onChannelFrozen&&e.onChannelFrozen(re):e.onChannelUnfrozen&&e.onChannelUnfrozen(re)})),[2]}))}))})),[3,55];case 46:return[4,this.getChannel(F.channelUrl,!0)];case 47:return oe=we.sent(),[4,this.removeChannelsFromCache([oe.url])];case 48:return we.sent(),Object(a.b)((function(){return Object(a.Gb)(_e,void 0,void 0,(function(){return Object(a.Rb)(this,(function(e){return this._openChannelHandlers.forEach((function(e){e.onChannelDeleted&&e.onChannelDeleted(oe.url,oe.channelType)})),[2]}))}))})),[3,55];case 49:return[4,this.getChannelWithoutCache(F.channelUrl,!0)];case 50:return se=we.sent(),Object(a.b)((function(){return Object(a.Gb)(_e,void 0,void 0,(function(){return Object(a.Rb)(this,(function(e){return this._openChannelHandlers.forEach((function(e){e.onChannelChanged&&e.onChannelChanged(se)})),[2]}))}))})),[3,55];case 51:return[4,this.getChannel(F.channelUrl,!0)];case 52:return ae=we.sent(),ue=e.as(u.q),ce=ue.created,le=ue.updated,he=ue.deleted,ce&&ae._upsertCachedMetaData(ce,F.ts),le&&ae._upsertCachedMetaData(le,F.ts),he&&ae._removeFromCachedMetaData(he,F.ts),Object(a.b)((function(){return Object(a.Gb)(_e,void 0,void 0,(function(){return Object(a.Rb)(this,(function(e){return this._openChannelHandlers.forEach((function(e){ce&&e.onMetaDataCreated&&e.onMetaDataCreated(ae,ce),le&&e.onMetaDataUpdated&&e.onMetaDataUpdated(ae,le),he&&e.onMetaDataDeleted&&e.onMetaDataDeleted(ae,he)})),[2]}))}))})),[3,55];case 53:return[4,this.getChannel(F.channelUrl,!0)];case 54:return de=we.sent(),fe=e.as(u.m),pe=fe.created,me=fe.updated,ge=fe.deleted,Object(a.b)((function(){return Object(a.Gb)(_e,void 0,void 0,(function(){return Object(a.Rb)(this,(function(e){return this._openChannelHandlers.forEach((function(e){pe&&e.onMetaCounterCreated&&e.onMetaCounterCreated(de,pe),me&&e.onMetaCounterUpdated&&e.onMetaCounterUpdated(de,me),ge&&e.onMetaCounterDeleted&&e.onMetaCounterDeleted(de,ge)})),[2]}))}))})),[3,55];case 55:return[3,56];case 56:return[3,58];case 57:if(be=we.sent(),Object(a.J)(be))throw be;return[3,58];case 58:return[2]}}))}))},t.prototype.addHandler=function(e,t){this._openChannelHandlers.set(e,t)},t.prototype.removeHandler=function(e){this._openChannelHandlers.delete(e)},t.prototype.clearHandler=function(){this._openChannelHandlers.clear()},t.prototype.getChannel=function(e,t){return Object(a.Gb)(this,void 0,void 0,(function(){var t;return Object(a.Rb)(this,(function(n){switch(n.label){case 0:Object(a.hc)(Object(a.B)("string",e)).throw(a.fc.invalidParameters),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.getChannelFromCache(e)];case 2:return(t=n.sent())?[2,t]:[3,4];case 3:return n.sent(),[3,4];case 4:return[4,this.getChannelWithoutCache(e)];case 5:return[2,n.sent()]}}))}))},t.prototype.getChannelWithoutCache=function(e,t){return void 0===t&&(t=!1),Object(a.Gb)(this,void 0,void 0,(function(){var n,r,i;return Object(a.Rb)(this,(function(o){switch(o.label){case 0:return Object(a.hc)(Object(a.B)("string",e)).throw(a.fc.invalidParameters),n=new d({channelUrl:e,isInternalCall:t}),[4,this._requestQueue.send(n)];case 1:return r=o.sent(),i=r.as(f).channel,[4,this.upsertChannelsToCache([i])];case 2:return[2,o.sent()[0]]}}))}))},t.prototype.createChannel=function(e){return Object(a.Gb)(this,void 0,void 0,(function(){var t,n,r,i;return Object(a.Rb)(this,(function(o){switch(o.label){case 0:return t=Object(a.Vb)(Object(a.Vb)({},h),e),Object(a.hc)(function(e){return Object(a.k)("string",e.operatorUserIds,!0)&&(Object(a.B)("string",e.coverUrlOrImage,!0)||Object(a.Xb)(e.coverUrlOrImage,!0))&&Object(a.B)("string",e.name,!0)&&Object(a.B)("string",e.data,!0)&&Object(a.B)("string",e.customType,!0)&&(Object(a.B)("string",e.channelUrl)&&/^\w+$/.test(e.channelUrl)||null===e.channelUrl||void 0===e.channelUrl)&&Object(a.B)("boolean",e.isEphemeral,!0)}(t)).throw(a.fc.invalidParameters),n=new p(t),[4,this._requestQueue.send(n)];case 1:return r=o.sent(),i=r.as(f).channel,this.upsertChannelsToCache([i]),[2,i]}}))}))},t}(c.j),w={name:void 0,coverUrlOrImage:void 0,data:void 0,customType:void 0,operatorUserIds:void 0},E=function(e){function t(t){var n=this,r=t.channelUrl,i=t.token,o=t.limit;return(n=e.call(this)||this).method=a.a.GET,n.path="".concat(a.Qb,"/").concat(encodeURIComponent(r),"/participants"),n.params={token:i,limit:o},n}return Object(a.A)(t,e),t}(a.Ub),S=function(e){function t(t,n){var r=e.call(this,t,n)||this;r.participants=[];var i=n.next,o=n.participants;return r.token=i,r.participants=o.map((function(e){return new u.p(t,e)})),r}return Object(a.A)(t,e),t}(a.Wb),M=function(e){function t(t,n,r){return e.call(this,t,n,a.y.OPEN,r)||this}return Object(a.A)(t,e),t.prototype._validate=function(){return e.prototype._validate.call(this)},t.prototype.next=function(){return Object(a.Gb)(this,void 0,void 0,(function(){var e,t,n,r,i,o;return Object(a.Rb)(this,(function(s){switch(s.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,e=a.v.of(this._iid).requestQueue,t=new E(Object(a.Vb)(Object(a.Vb)({},this),{token:this._token})),[4,e.send(t)]):[3,2]:[3,5];case 1:return n=s.sent(),r=n.as(S),i=r.participants,o=r.token,this._token=o,this._hasNext=!!o,this._isLoading=!1,[2,i];case 2:return[2,[]];case 3:throw a.fc.queryInProgress;case 4:return[3,6];case 5:throw a.fc.invalidParameters;case 6:return[2]}}))}))},t}(a.xb),O=function(e){function t(t){var n=this,r=t.channelUrl,i=t.coverUrlOrImage,o=t.name,s=t.data,u=t.customType,c=t.operatorUserIds;return(n=e.call(this)||this).method=a.a.PUT,n.path="".concat(a.Qb,"/").concat(encodeURIComponent(r)),n.params=Object(a.Tb)(Object(a.jc)({cover_url:Object(a.B)("string",i)?i:null,cover_file:Object(a.Xb)(i)?i:null,name:o,data:s,custom_type:u,operators:c})),n}return Object(a.A)(t,e),t}(a.Ub),A=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.channel=new k(t,n),r}return Object(a.A)(t,e),t}(a.Wb),C=function(e){function t(t){var n=this,r=t.channelUrl;return(n=e.call(this)||this).method=a.a.DELETE,n.path="".concat(a.Qb,"/").concat(encodeURIComponent(r)),n}return Object(a.A)(t,e),t}(a.Ub);!function(e){Object(a.A)((function(t,n){return e.call(this,t,n)||this}),e)}(a.Wb);var T,k=function(e){function t(t,n){var r,i=this;return(i=e.call(this,t,n)||this)._lastParticipantCountUpdated=0,i.participantCount=0,i.operators=[],i.channelType=a.y.OPEN,i.participantCount=null!==(r=n.participant_count)&&void 0!==r?r:0,i.operators=Array.isArray(n.operators)?n.operators.map((function(e){return new a.u(t,e)})):[],i}return Object(a.A)(t,e),t.payloadify=function(e){return Object(a.Tb)(Object(a.jc)(Object(a.Vb)(Object(a.Vb)({},u.Ab.payloadify(e)),{participant_count:e.participantCount,operators:e.operators.map((function(e){return a.u.payloadify(e)}))})))},t.prototype.serialize=function(){return Object(a.hb)(this)},t.prototype.isOperator=function(e){return e instanceof a.u?this.isOperator(e.userId):this.operators.some((function(t){return t.userId===e}))},t.prototype._updateParticipantCount=function(e,t){return t>this._lastParticipantCountUpdated&&(this.participantCount=e,this._lastParticipantCountUpdated=t,!0)},t.prototype.createParticipantListQuery=function(e){return new M(this._iid,this.url,e)},t.prototype.refresh=function(){return Object(a.Gb)(this,void 0,void 0,(function(){return Object(a.Rb)(this,(function(e){switch(e.label){case 0:return[4,_.of(this._iid).getChannelWithoutCache(this.url)];case 1:return[2,e.sent()]}}))}))},t.prototype.enter=function(){return Object(a.Gb)(this,void 0,void 0,(function(){var e,t,n,r,i,o;return Object(a.Rb)(this,(function(s){switch(s.label){case 0:return e=a.v.of(this._iid).requestQueue,t=new m({channelUrl:this.url}),[4,e.send(t)];case 1:return n=s.sent(),r=n.as(g),i=r.participantCount,o=r.ts,this._updateParticipantCount(i,o),_.of(this._iid).setEnteredToCache(this),[2]}}))}))},t.prototype.exit=function(){return Object(a.Gb)(this,void 0,void 0,(function(){var e,t,n,r,i,o;return Object(a.Rb)(this,(function(s){switch(s.label){case 0:return e=a.v.of(this._iid).requestQueue,t=new b({channelUrl:this.url}),[4,e.send(t)];case 1:return n=s.sent(),r=n.as(v),i=r.participantCount,o=r.ts,this._updateParticipantCount(i,o),_.of(this._iid).setExitedToCache(this),u.F.of(this._iid).fileMessageQueue.cancel(this),[2]}}))}))},t.prototype.updateChannel=function(e){return Object(a.Gb)(this,void 0,void 0,(function(){var t,n,r,i,o;return Object(a.Rb)(this,(function(s){switch(s.label){case 0:return t=Object(a.Vb)(Object(a.Vb)({},w),e),Object(a.hc)(function(e){return Object(a.k)("string",e.operatorUserIds,!0)&&(Object(a.B)("string",e.coverUrlOrImage)||Object(a.Xb)(e.coverUrlOrImage)||null===e.coverUrlOrImage)&&Object(a.B)("string",e.name,!0)&&Object(a.B)("string",e.data,!0)&&Object(a.B)("string",e.customType,!0)}(t)).throw(a.fc.invalidParameters),n=a.v.of(this._iid).requestQueue,r=new O(Object(a.Vb)({channelUrl:this.url},t)),[4,n.send(r)];case 1:return i=s.sent(),o=i.as(A).channel,this._update(o),[4,_.of(this._iid).upsertChannelsToCache([o])];case 2:return s.sent(),[2,this]}}))}))},t.prototype.updateChannelWithOperatorUserIds=function(e,t,n,r,i){return Object(a.Gb)(this,void 0,void 0,(function(){var o;return Object(a.Rb)(this,(function(s){return o=Object(a.Vb)(Object(a.Vb)({},w),{name:e,coverUrlOrImage:t,data:n,operatorUserIds:r,customType:i}),[2,this.updateChannel(o)]}))}))},t.prototype.delete=function(){return Object(a.Gb)(this,void 0,void 0,(function(){var e,t;return Object(a.Rb)(this,(function(n){switch(n.label){case 0:return e=a.v.of(this._iid).requestQueue,t=new C({channelUrl:this.url}),[4,e.send(t)];case 1:return n.sent(),[4,_.of(this._iid).removeChannelsFromCache([this.url])];case 2:return n.sent(),[2]}}))}))},t.prototype.sendUserMessage=function(t){return Object(a.hc)(!t.isPinnedMessage).throw(a.fc.notSupportedError),e.prototype.sendUserMessage.call(this,t)},t.prototype.sendFileMessage=function(t){return Object(a.hc)(!t.isPinnedMessage).throw(a.fc.notSupportedError),e.prototype.sendFileMessage.call(this,t)},t}(u.Ab),x=(function(e){function t(t){void 0===t&&(t={});var n=e.call(this)||this;return Object.keys(t).forEach((function(e){n.hasOwnProperty(e)&&(n[e]=t[e])})),n}Object(a.A)(t,e)}(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onUserEntered=a.wb,t.onUserExited=a.wb,t.onChannelParticipantCountChanged=a.wb,t.onPollUpdated=a.wb,t.onPollVoted=a.wb,t.onPollDeleted=a.wb,t}return Object(a.A)(t,e),t}(c.b)),function(e){function t(t){var n=this,r=t.token,i=t.limit,o=t.nameKeyword,s=t.urlKeyword,u=t.customTypes,c=t.includeFrozen,l=t.includeMetaData;return(n=e.call(this)||this).method=a.a.GET,n.path=a.Qb,n.params=Object(a.Tb)({token:r,limit:i,name_contains:o,url_contains:s,custom_types:u,show_frozen:c,show_metadata:l}),n}return Object(a.A)(t,e),t}(a.Ub)),j=function(e){function t(t,n){var r=e.call(this,t,n)||this;r.channels=[];var i=n.next,o=n.channels,s=n.ts;return r.token=i,o&&o.length>0&&(r.channels=o.map((function(e){return new k(t,e)}))),r.ts="number"==typeof s?s:null,r}return Object(a.A)(t,e),t}(a.Wb),I=function(e){function t(t,n){var r,i,o,s,a,u=this;return(u=e.call(this,t,n)||this).includeFrozen=!0,u.includeMetaData=!0,u.nameKeyword=null,u.urlKeyword=null,u.customTypes=null,u.includeFrozen=null===(r=n.includeFrozen)||void 0===r||r,u.includeMetaData=null===(i=n.includeMetaData)||void 0===i||i,u.nameKeyword=null!==(o=n.nameKeyword)&&void 0!==o?o:null,u.urlKeyword=null!==(s=n.urlKeyword)&&void 0!==s?s:null,u.customTypes=null!==(a=n.customTypes)&&void 0!==a?a:null,u}return Object(a.A)(t,e),t.prototype._validate=function(){return e.prototype._validate.call(this)&&Object(a.B)("boolean",this.includeFrozen)&&Object(a.B)("boolean",this.includeMetaData)&&Object(a.B)("string",this.nameKeyword,!0)&&Object(a.B)("string",this.urlKeyword,!0)&&Object(a.k)("string",this.customTypes,!0)},t.prototype.next=function(){return Object(a.Gb)(this,void 0,void 0,(function(){var e,t,n,r,i,o;return Object(a.Rb)(this,(function(s){switch(s.label){case 0:return this._validate()?this._isLoading?[3,4]:this._hasNext?(this._isLoading=!0,e=a.v.of(this._iid).requestQueue,t=new x(Object(a.jc)(Object(a.Vb)(Object(a.Vb)({},this),{token:this._token}))),[4,e.send(t)]):[3,3]:[3,6];case 1:return n=s.sent(),r=n.as(j),i=r.channels,o=r.token,this._token=o,this._hasNext=!!o,[4,_.of(this._iid).upsertChannelsToCache(i)];case 2:return s.sent(),this._isLoading=!1,[2,i];case 3:return[2,[]];case 4:throw a.fc.queryInProgress;case 5:return[3,7];case 6:throw a.fc.invalidParameters;case 7:return[2]}}))}))},t}(a.N),R=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.name="openChannel",t}return Object(a.A)(t,e),t.prototype.init=function(t,n){var r=n.sdkState,i=n.dispatcher,o=n.sessionManager,s=n.requestQueue,a=n.logger,u=n.onlineDetector,c=n.cacheContext;e.prototype.init.call(this,t,{sdkState:r,dispatcher:i,sessionManager:o,requestQueue:s,logger:a,onlineDetector:u,cacheContext:c}),this._manager=new _(t,{sdkState:r,dispatcher:i,requestQueue:s,logger:a,cacheContext:c,sessionManager:o})},t.prototype.createOpenChannelListQuery=function(e){return void 0===e&&(e={}),new I(this._iid,e)},t.prototype.addOpenChannelHandler=function(e,t){this._manager.addHandler(e,t)},t.prototype.removeOpenChannelHandler=function(e){this._manager.removeHandler(e)},t.prototype.removeAllOpenChannelHandlers=function(){this._manager.clearHandler()},t.prototype.buildOpenChannelFromSerializedData=function(e){return this._manager.buildOpenChannelFromSerializedData(e)},t.prototype.getChannel=function(e){return Object(a.Gb)(this,void 0,void 0,(function(){return Object(a.Rb)(this,(function(t){return[2,this._manager.getChannel(e)]}))}))},t.prototype.getChannelWithoutCache=function(e){return Object(a.Gb)(this,void 0,void 0,(function(){return Object(a.Rb)(this,(function(t){return[2,this._manager.getChannelWithoutCache(e)]}))}))},t.prototype.createChannel=function(e){return void 0===e&&(e={}),Object(a.Gb)(this,void 0,void 0,(function(){return Object(a.Rb)(this,(function(t){return[2,this._manager.createChannel(e)]}))}))},t.prototype.createChannelWithOperatorUserIds=function(e,t,n,r,i){return Object(a.Gb)(this,void 0,void 0,(function(){var o;return Object(a.Rb)(this,(function(s){return(o=Object(a.Vb)({},h)).name=e,o.coverUrlOrImage=t,o.data=n,o.operatorUserIds=r,o.customType=i,[2,this._manager.createChannel(o)]}))}))},t}(a.V),N=n(13),P=n(3),D=n(12),U=n(35),L=n(69),F={},B="",H={getInstance:function(){return F},userEventHandler:null,initialize:function(e){var t={appId:e,modules:[new R,new L.b,new u.tb]};F=s.c.init(t),this.userEventHandler=new s.a,this.userEventHandler.onTotalUnreadMessageCountUpdated=function(e,t){U.a.getChatHistoryChannels(B),F.groupChannel.getTotalUnreadChannelCount().then((function(e){return H.updateUnreadChannelCount(e)})).catch((function(e){N.a.logError("failed to connect to sendbird:",e)}))},F.addUserEventHandler("UNIQUE_HANDLER_ID",this.userEventHandler)},connect:(T=Object(o.a)(Object(i.a)().mark((function e(t,n,r){var o;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return B=t,o=H.getInstance(),e.next=4,o.connect(B,n).catch((function(e){return H.handleError(e)}));case 4:r(),o.groupChannel.getTotalUnreadChannelCount().then((function(e){return H.updateUnreadChannelCount(e)})).catch((function(e){N.a.logError("failed to connect to sendbird:",e)}));case 6:case"end":return e.stop()}}),e)}))),function(e,t,n){return T.apply(this,arguments)}),handleError:function(e){if(e)return window.chatterUiDispatcher.dispatch(P.b.setChatError(D.a.GENERIC_ERROR)),console.log("failed to connect :",e),void N.a.logError("failed to connect to sendbird:",e)},updateUnreadChannelCount:function(e,t){t?N.a.logError("failed to connect to sendbird:",t):window.chatterUiDispatcher.dispatch(P.b.setUnreadChannelCount(e))}};t.a=H},function(e,t,n){"use strict";var r=n(24),i=n(7);function o(e,t){return 55296==(64512&e.charCodeAt(t))&&(!(t<0||t+1>=e.length)&&56320==(64512&e.charCodeAt(t+1)))}function s(e){return(e>>>24|e>>>8&65280|e<<8&16711680|(255&e)<<24)>>>0}function a(e){return 1===e.length?"0"+e:e}function u(e){return 7===e.length?"0"+e:6===e.length?"00"+e:5===e.length?"000"+e:4===e.length?"0000"+e:3===e.length?"00000"+e:2===e.length?"000000"+e:1===e.length?"0000000"+e:e}t.inherits=i,t.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var n=[];if("string"==typeof e)if(t){if("hex"===t)for((e=e.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(e="0"+e),i=0;i<e.length;i+=2)n.push(parseInt(e[i]+e[i+1],16))}else for(var r=0,i=0;i<e.length;i++){var s=e.charCodeAt(i);s<128?n[r++]=s:s<2048?(n[r++]=s>>6|192,n[r++]=63&s|128):o(e,i)?(s=65536+((1023&s)<<10)+(1023&e.charCodeAt(++i)),n[r++]=s>>18|240,n[r++]=s>>12&63|128,n[r++]=s>>6&63|128,n[r++]=63&s|128):(n[r++]=s>>12|224,n[r++]=s>>6&63|128,n[r++]=63&s|128)}else for(i=0;i<e.length;i++)n[i]=0|e[i];return n},t.toHex=function(e){for(var t="",n=0;n<e.length;n++)t+=a(e[n].toString(16));return t},t.htonl=s,t.toHex32=function(e,t){for(var n="",r=0;r<e.length;r++){var i=e[r];"little"===t&&(i=s(i)),n+=u(i.toString(16))}return n},t.zero2=a,t.zero8=u,t.join32=function(e,t,n,i){var o=n-t;r(o%4==0);for(var s=new Array(o/4),a=0,u=t;a<s.length;a++,u+=4){var c;c="big"===i?e[u]<<24|e[u+1]<<16|e[u+2]<<8|e[u+3]:e[u+3]<<24|e[u+2]<<16|e[u+1]<<8|e[u],s[a]=c>>>0}return s},t.split32=function(e,t){for(var n=new Array(4*e.length),r=0,i=0;r<e.length;r++,i+=4){var o=e[r];"big"===t?(n[i]=o>>>24,n[i+1]=o>>>16&255,n[i+2]=o>>>8&255,n[i+3]=255&o):(n[i+3]=o>>>24,n[i+2]=o>>>16&255,n[i+1]=o>>>8&255,n[i]=255&o)}return n},t.rotr32=function(e,t){return e>>>t|e<<32-t},t.rotl32=function(e,t){return e<<t|e>>>32-t},t.sum32=function(e,t){return e+t>>>0},t.sum32_3=function(e,t,n){return e+t+n>>>0},t.sum32_4=function(e,t,n,r){return e+t+n+r>>>0},t.sum32_5=function(e,t,n,r,i){return e+t+n+r+i>>>0},t.sum64=function(e,t,n,r){var i=e[t],o=r+e[t+1]>>>0,s=(o<r?1:0)+n+i;e[t]=s>>>0,e[t+1]=o},t.sum64_hi=function(e,t,n,r){return(t+r>>>0<t?1:0)+e+n>>>0},t.sum64_lo=function(e,t,n,r){return t+r>>>0},t.sum64_4_hi=function(e,t,n,r,i,o,s,a){var u=0,c=t;return u+=(c=c+r>>>0)<t?1:0,u+=(c=c+o>>>0)<o?1:0,e+n+i+s+(u+=(c=c+a>>>0)<a?1:0)>>>0},t.sum64_4_lo=function(e,t,n,r,i,o,s,a){return t+r+o+a>>>0},t.sum64_5_hi=function(e,t,n,r,i,o,s,a,u,c){var l=0,h=t;return l+=(h=h+r>>>0)<t?1:0,l+=(h=h+o>>>0)<o?1:0,l+=(h=h+a>>>0)<a?1:0,e+n+i+s+u+(l+=(h=h+c>>>0)<c?1:0)>>>0},t.sum64_5_lo=function(e,t,n,r,i,o,s,a,u,c){return t+r+o+a+c>>>0},t.rotr64_hi=function(e,t,n){return(t<<32-n|e>>>n)>>>0},t.rotr64_lo=function(e,t,n){return(e<<32-n|t>>>n)>>>0},t.shr64_hi=function(e,t,n){return e>>>n},t.shr64_lo=function(e,t,n){return(e<<32-n|t>>>n)>>>0}},function(e,t,n){"use strict";var r=n(67),i=n.n(r),o=n(10),s=function(e,t){return"".concat(t).concat("/"===e.charAt(0)?"":"/").concat(e)};t.a={addDomainPrefix:s,getImageUrl:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0,i=t,o=e.filter((function(e){return e.key.indexOf("/mobile/")>-1})),a=e.filter((function(e){return e.key.indexOf("/desktop/")>-1})),u=n?{mobile:i.defaultParticipantPhotoMobileUrl,desktop:i.defaultParticipantPhotoUrl}:null;return o.length?{mobile:s(o[0].url,r),desktop:s(a[0].url,r)}:u},getFromLocalStorage:function(e){return JSON.parse("".concat(window.localStorage.getItem(e)))},saveToLocalStorage:function(e,t){return window.localStorage.setItem(e,JSON.stringify(t))},isAuthFailure:function(e){var t,n,r,i,o,s;return(null==e?void 0:e.errors)&&("unauthorized"===(null===(t=e.errors[0])||void 0===t||null===(n=t.extensions)||void 0===n||null===(r=n.code)||void 0===r?void 0:r.toLowerCase())||"forbidden"===(null===(i=e.errors[0])||void 0===i||null===(o=i.extensions)||void 0===o||null===(s=o.code)||void 0===s?void 0:s.toLowerCase()))},hasParticipantClaim:function(e){if(!e)return!1;try{return!!i.a.decode(e)[o.b.RxParticipant]}catch(e){return!1}}}},function(e,t,n){(function(e){e.exports=function(){"use strict";var t,n;function r(){return t.apply(null,arguments)}function i(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function o(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function s(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function a(e){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(e).length;var t;for(t in e)if(s(e,t))return!1;return!0}function u(e){return void 0===e}function c(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function l(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function h(e,t){var n,r=[],i=e.length;for(n=0;n<i;++n)r.push(t(e[n],n));return r}function d(e,t){for(var n in t)s(t,n)&&(e[n]=t[n]);return s(t,"toString")&&(e.toString=t.toString),s(t,"valueOf")&&(e.valueOf=t.valueOf),e}function f(e,t,n,r){return Mt(e,t,n,r,!0).utc()}function p(e){return null==e._pf&&(e._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}),e._pf}function m(e){if(null==e._isValid){var t=p(e),r=n.call(t.parsedDateParts,(function(e){return null!=e})),i=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&r);if(e._strict&&(i=i&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour),null!=Object.isFrozen&&Object.isFrozen(e))return i;e._isValid=i}return e._isValid}function g(e){var t=f(NaN);return null!=e?d(p(t),e):p(t).userInvalidated=!0,t}n=Array.prototype.some?Array.prototype.some:function(e){var t,n=Object(this),r=n.length>>>0;for(t=0;t<r;t++)if(t in n&&e.call(this,n[t],t,n))return!0;return!1};var b=r.momentProperties=[],v=!1;function y(e,t){var n,r,i,o=b.length;if(u(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),u(t._i)||(e._i=t._i),u(t._f)||(e._f=t._f),u(t._l)||(e._l=t._l),u(t._strict)||(e._strict=t._strict),u(t._tzm)||(e._tzm=t._tzm),u(t._isUTC)||(e._isUTC=t._isUTC),u(t._offset)||(e._offset=t._offset),u(t._pf)||(e._pf=p(t)),u(t._locale)||(e._locale=t._locale),o>0)for(n=0;n<o;n++)u(i=t[r=b[n]])||(e[r]=i);return e}function _(e){y(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===v&&(v=!0,r.updateOffset(this),v=!1)}function w(e){return e instanceof _||null!=e&&null!=e._isAMomentObject}function E(e){!1===r.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function S(e,t){var n=!0;return d((function(){if(null!=r.deprecationHandler&&r.deprecationHandler(null,e),n){var i,o,a,u=[],c=arguments.length;for(o=0;o<c;o++){if(i="","object"==typeof arguments[o]){for(a in i+="\n["+o+"] ",arguments[0])s(arguments[0],a)&&(i+=a+": "+arguments[0][a]+", ");i=i.slice(0,-2)}else i=arguments[o];u.push(i)}E(e+"\nArguments: "+Array.prototype.slice.call(u).join("")+"\n"+(new Error).stack),n=!1}return t.apply(this,arguments)}),t)}var M,O={};function A(e,t){null!=r.deprecationHandler&&r.deprecationHandler(e,t),O[e]||(E(t),O[e]=!0)}function C(e){return"undefined"!=typeof Function&&e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function T(e,t){var n,r=d({},e);for(n in t)s(t,n)&&(o(e[n])&&o(t[n])?(r[n]={},d(r[n],e[n]),d(r[n],t[n])):null!=t[n]?r[n]=t[n]:delete r[n]);for(n in e)s(e,n)&&!s(t,n)&&o(e[n])&&(r[n]=d({},r[n]));return r}function k(e){null!=e&&this.set(e)}function x(e,t,n){var r=""+Math.abs(e),i=t-r.length;return(e>=0?n?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+r}r.suppressDeprecationWarnings=!1,r.deprecationHandler=null,M=Object.keys?Object.keys:function(e){var t,n=[];for(t in e)s(e,t)&&n.push(t);return n};var j=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,I=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,R={},N={};function P(e,t,n,r){var i=r;"string"==typeof r&&(i=function(){return this[r]()}),e&&(N[e]=i),t&&(N[t[0]]=function(){return x(i.apply(this,arguments),t[1],t[2])}),n&&(N[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),e)})}function D(e,t){return e.isValid()?(t=U(t,e.localeData()),R[t]=R[t]||function(e){var t,n,r,i=e.match(j);for(t=0,n=i.length;t<n;t++)N[i[t]]?i[t]=N[i[t]]:i[t]=(r=i[t]).match(/\[[\s\S]/)?r.replace(/^\[|\]$/g,""):r.replace(/\\/g,"");return function(t){var r,o="";for(r=0;r<n;r++)o+=C(i[r])?i[r].call(t,e):i[r];return o}}(t),R[t](e)):e.localeData().invalidDate()}function U(e,t){var n=5;function r(e){return t.longDateFormat(e)||e}for(I.lastIndex=0;n>=0&&I.test(e);)e=e.replace(I,r),I.lastIndex=0,n-=1;return e}var L={};function F(e,t){var n=e.toLowerCase();L[n]=L[n+"s"]=L[t]=e}function B(e){return"string"==typeof e?L[e]||L[e.toLowerCase()]:void 0}function H(e){var t,n,r={};for(n in e)s(e,n)&&(t=B(n))&&(r[t]=e[n]);return r}var q={};function V(e,t){q[e]=t}function G(e){return e%4==0&&e%100!=0||e%400==0}function z(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function W(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=z(t)),n}function K(e,t){return function(n){return null!=n?(Q(this,e,n),r.updateOffset(this,t),this):Y(this,e)}}function Y(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function Q(e,t,n){e.isValid()&&!isNaN(n)&&("FullYear"===t&&G(e.year())&&1===e.month()&&29===e.date()?(n=W(n),e._d["set"+(e._isUTC?"UTC":"")+t](n,e.month(),we(n,e.month()))):e._d["set"+(e._isUTC?"UTC":"")+t](n))}var J,Z=/\d/,$=/\d\d/,X=/\d{3}/,ee=/\d{4}/,te=/[+-]?\d{6}/,ne=/\d\d?/,re=/\d\d\d\d?/,ie=/\d\d\d\d\d\d?/,oe=/\d{1,3}/,se=/\d{1,4}/,ae=/[+-]?\d{1,6}/,ue=/\d+/,ce=/[+-]?\d+/,le=/Z|[+-]\d\d:?\d\d/gi,he=/Z|[+-]\d\d(?::?\d\d)?/gi,de=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i;function fe(e,t,n){J[e]=C(t)?t:function(e,r){return e&&n?n:t}}function pe(e,t){return s(J,e)?J[e](t._strict,t._locale):new RegExp(me(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,(function(e,t,n,r,i){return t||n||r||i}))))}function me(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}J={};var ge,be={};function ve(e,t){var n,r,i=t;for("string"==typeof e&&(e=[e]),c(t)&&(i=function(e,n){n[t]=W(e)}),r=e.length,n=0;n<r;n++)be[e[n]]=i}function ye(e,t){ve(e,(function(e,n,r,i){r._w=r._w||{},t(e,r._w,r,i)}))}function _e(e,t,n){null!=t&&s(be,e)&&be[e](t,n._a,n,e)}function we(e,t){if(isNaN(e)||isNaN(t))return NaN;var n,r=(t%(n=12)+n)%n;return e+=(t-r)/12,1===r?G(e)?29:28:31-r%7%2}ge=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1},P("M",["MM",2],"Mo",(function(){return this.month()+1})),P("MMM",0,0,(function(e){return this.localeData().monthsShort(this,e)})),P("MMMM",0,0,(function(e){return this.localeData().months(this,e)})),F("month","M"),V("month",8),fe("M",ne),fe("MM",ne,$),fe("MMM",(function(e,t){return t.monthsShortRegex(e)})),fe("MMMM",(function(e,t){return t.monthsRegex(e)})),ve(["M","MM"],(function(e,t){t[1]=W(e)-1})),ve(["MMM","MMMM"],(function(e,t,n,r){var i=n._locale.monthsParse(e,r,n._strict);null!=i?t[1]=i:p(n).invalidMonth=e}));var Ee="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Se="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Me=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Oe=de,Ae=de;function Ce(e,t,n){var r,i,o,s=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],r=0;r<12;++r)o=f([2e3,r]),this._shortMonthsParse[r]=this.monthsShort(o,"").toLocaleLowerCase(),this._longMonthsParse[r]=this.months(o,"").toLocaleLowerCase();return n?"MMM"===t?-1!==(i=ge.call(this._shortMonthsParse,s))?i:null:-1!==(i=ge.call(this._longMonthsParse,s))?i:null:"MMM"===t?-1!==(i=ge.call(this._shortMonthsParse,s))||-1!==(i=ge.call(this._longMonthsParse,s))?i:null:-1!==(i=ge.call(this._longMonthsParse,s))||-1!==(i=ge.call(this._shortMonthsParse,s))?i:null}function Te(e,t){var n;if(!e.isValid())return e;if("string"==typeof t)if(/^\d+$/.test(t))t=W(t);else if(!c(t=e.localeData().monthsParse(t)))return e;return n=Math.min(e.date(),we(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e}function ke(e){return null!=e?(Te(this,e),r.updateOffset(this,!0),this):Y(this,"Month")}function xe(){function e(e,t){return t.length-e.length}var t,n,r=[],i=[],o=[];for(t=0;t<12;t++)n=f([2e3,t]),r.push(this.monthsShort(n,"")),i.push(this.months(n,"")),o.push(this.months(n,"")),o.push(this.monthsShort(n,""));for(r.sort(e),i.sort(e),o.sort(e),t=0;t<12;t++)r[t]=me(r[t]),i[t]=me(i[t]);for(t=0;t<24;t++)o[t]=me(o[t]);this._monthsRegex=new RegExp("^("+o.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+r.join("|")+")","i")}function je(e){return G(e)?366:365}P("Y",0,0,(function(){var e=this.year();return e<=9999?x(e,4):"+"+e})),P(0,["YY",2],0,(function(){return this.year()%100})),P(0,["YYYY",4],0,"year"),P(0,["YYYYY",5],0,"year"),P(0,["YYYYYY",6,!0],0,"year"),F("year","y"),V("year",1),fe("Y",ce),fe("YY",ne,$),fe("YYYY",se,ee),fe("YYYYY",ae,te),fe("YYYYYY",ae,te),ve(["YYYYY","YYYYYY"],0),ve("YYYY",(function(e,t){t[0]=2===e.length?r.parseTwoDigitYear(e):W(e)})),ve("YY",(function(e,t){t[0]=r.parseTwoDigitYear(e)})),ve("Y",(function(e,t){t[0]=parseInt(e,10)})),r.parseTwoDigitYear=function(e){return W(e)+(W(e)>68?1900:2e3)};var Ie=K("FullYear",!0);function Re(e,t,n,r,i,o,s){var a;return e<100&&e>=0?(a=new Date(e+400,t,n,r,i,o,s),isFinite(a.getFullYear())&&a.setFullYear(e)):a=new Date(e,t,n,r,i,o,s),a}function Ne(e){var t,n;return e<100&&e>=0?((n=Array.prototype.slice.call(arguments))[0]=e+400,t=new Date(Date.UTC.apply(null,n)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function Pe(e,t,n){var r=7+t-n;return-(7+Ne(e,0,r).getUTCDay()-t)%7+r-1}function De(e,t,n,r,i){var o,s,a=1+7*(t-1)+(7+n-r)%7+Pe(e,r,i);return a<=0?s=je(o=e-1)+a:a>je(e)?(o=e+1,s=a-je(e)):(o=e,s=a),{year:o,dayOfYear:s}}function Ue(e,t,n){var r,i,o=Pe(e.year(),t,n),s=Math.floor((e.dayOfYear()-o-1)/7)+1;return s<1?r=s+Le(i=e.year()-1,t,n):s>Le(e.year(),t,n)?(r=s-Le(e.year(),t,n),i=e.year()+1):(i=e.year(),r=s),{week:r,year:i}}function Le(e,t,n){var r=Pe(e,t,n),i=Pe(e+1,t,n);return(je(e)-r+i)/7}function Fe(e,t){return e.slice(t,7).concat(e.slice(0,t))}P("w",["ww",2],"wo","week"),P("W",["WW",2],"Wo","isoWeek"),F("week","w"),F("isoWeek","W"),V("week",5),V("isoWeek",5),fe("w",ne),fe("ww",ne,$),fe("W",ne),fe("WW",ne,$),ye(["w","ww","W","WW"],(function(e,t,n,r){t[r.substr(0,1)]=W(e)})),P("d",0,"do","day"),P("dd",0,0,(function(e){return this.localeData().weekdaysMin(this,e)})),P("ddd",0,0,(function(e){return this.localeData().weekdaysShort(this,e)})),P("dddd",0,0,(function(e){return this.localeData().weekdays(this,e)})),P("e",0,0,"weekday"),P("E",0,0,"isoWeekday"),F("day","d"),F("weekday","e"),F("isoWeekday","E"),V("day",11),V("weekday",11),V("isoWeekday",11),fe("d",ne),fe("e",ne),fe("E",ne),fe("dd",(function(e,t){return t.weekdaysMinRegex(e)})),fe("ddd",(function(e,t){return t.weekdaysShortRegex(e)})),fe("dddd",(function(e,t){return t.weekdaysRegex(e)})),ye(["dd","ddd","dddd"],(function(e,t,n,r){var i=n._locale.weekdaysParse(e,r,n._strict);null!=i?t.d=i:p(n).invalidWeekday=e})),ye(["d","e","E"],(function(e,t,n,r){t[r]=W(e)}));var Be="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),He="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),qe="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Ve=de,Ge=de,ze=de;function We(e,t,n){var r,i,o,s=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],r=0;r<7;++r)o=f([2e3,1]).day(r),this._minWeekdaysParse[r]=this.weekdaysMin(o,"").toLocaleLowerCase(),this._shortWeekdaysParse[r]=this.weekdaysShort(o,"").toLocaleLowerCase(),this._weekdaysParse[r]=this.weekdays(o,"").toLocaleLowerCase();return n?"dddd"===t?-1!==(i=ge.call(this._weekdaysParse,s))?i:null:"ddd"===t?-1!==(i=ge.call(this._shortWeekdaysParse,s))?i:null:-1!==(i=ge.call(this._minWeekdaysParse,s))?i:null:"dddd"===t?-1!==(i=ge.call(this._weekdaysParse,s))||-1!==(i=ge.call(this._shortWeekdaysParse,s))||-1!==(i=ge.call(this._minWeekdaysParse,s))?i:null:"ddd"===t?-1!==(i=ge.call(this._shortWeekdaysParse,s))||-1!==(i=ge.call(this._weekdaysParse,s))||-1!==(i=ge.call(this._minWeekdaysParse,s))?i:null:-1!==(i=ge.call(this._minWeekdaysParse,s))||-1!==(i=ge.call(this._weekdaysParse,s))||-1!==(i=ge.call(this._shortWeekdaysParse,s))?i:null}function Ke(){function e(e,t){return t.length-e.length}var t,n,r,i,o,s=[],a=[],u=[],c=[];for(t=0;t<7;t++)n=f([2e3,1]).day(t),r=me(this.weekdaysMin(n,"")),i=me(this.weekdaysShort(n,"")),o=me(this.weekdays(n,"")),s.push(r),a.push(i),u.push(o),c.push(r),c.push(i),c.push(o);s.sort(e),a.sort(e),u.sort(e),c.sort(e),this._weekdaysRegex=new RegExp("^("+c.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+u.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+s.join("|")+")","i")}function Ye(){return this.hours()%12||12}function Qe(e,t){P(e,0,0,(function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)}))}function Je(e,t){return t._meridiemParse}P("H",["HH",2],0,"hour"),P("h",["hh",2],0,Ye),P("k",["kk",2],0,(function(){return this.hours()||24})),P("hmm",0,0,(function(){return""+Ye.apply(this)+x(this.minutes(),2)})),P("hmmss",0,0,(function(){return""+Ye.apply(this)+x(this.minutes(),2)+x(this.seconds(),2)})),P("Hmm",0,0,(function(){return""+this.hours()+x(this.minutes(),2)})),P("Hmmss",0,0,(function(){return""+this.hours()+x(this.minutes(),2)+x(this.seconds(),2)})),Qe("a",!0),Qe("A",!1),F("hour","h"),V("hour",13),fe("a",Je),fe("A",Je),fe("H",ne),fe("h",ne),fe("k",ne),fe("HH",ne,$),fe("hh",ne,$),fe("kk",ne,$),fe("hmm",re),fe("hmmss",ie),fe("Hmm",re),fe("Hmmss",ie),ve(["H","HH"],3),ve(["k","kk"],(function(e,t,n){var r=W(e);t[3]=24===r?0:r})),ve(["a","A"],(function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e})),ve(["h","hh"],(function(e,t,n){t[3]=W(e),p(n).bigHour=!0})),ve("hmm",(function(e,t,n){var r=e.length-2;t[3]=W(e.substr(0,r)),t[4]=W(e.substr(r)),p(n).bigHour=!0})),ve("hmmss",(function(e,t,n){var r=e.length-4,i=e.length-2;t[3]=W(e.substr(0,r)),t[4]=W(e.substr(r,2)),t[5]=W(e.substr(i)),p(n).bigHour=!0})),ve("Hmm",(function(e,t,n){var r=e.length-2;t[3]=W(e.substr(0,r)),t[4]=W(e.substr(r))})),ve("Hmmss",(function(e,t,n){var r=e.length-4,i=e.length-2;t[3]=W(e.substr(0,r)),t[4]=W(e.substr(r,2)),t[5]=W(e.substr(i))}));var Ze,$e=K("Hours",!0),Xe={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:Ee,monthsShort:Se,week:{dow:0,doy:6},weekdays:Be,weekdaysMin:qe,weekdaysShort:He,meridiemParse:/[ap]\.?m?\.?/i},et={},tt={};function nt(e,t){var n,r=Math.min(e.length,t.length);for(n=0;n<r;n+=1)if(e[n]!==t[n])return n;return r}function rt(e){return e?e.toLowerCase().replace("_","-"):e}function it(t){var n=null;if(void 0===et[t]&&void 0!==e&&e&&e.exports&&function(e){return null!=e.match("^[^/\\\\]*$")}(t))try{n=Ze._abbr,function(){var e=new Error("Cannot find module 'undefined'");throw e.code="MODULE_NOT_FOUND",e}(),ot(n)}catch(e){et[t]=null}return et[t]}function ot(e,t){var n;return e&&((n=u(t)?at(e):st(e,t))?Ze=n:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),Ze._abbr}function st(e,t){if(null!==t){var n,r=Xe;if(t.abbr=e,null!=et[e])A("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),r=et[e]._config;else if(null!=t.parentLocale)if(null!=et[t.parentLocale])r=et[t.parentLocale]._config;else{if(null==(n=it(t.parentLocale)))return tt[t.parentLocale]||(tt[t.parentLocale]=[]),tt[t.parentLocale].push({name:e,config:t}),null;r=n._config}return et[e]=new k(T(r,t)),tt[e]&&tt[e].forEach((function(e){st(e.name,e.config)})),ot(e),et[e]}return delete et[e],null}function at(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return Ze;if(!i(e)){if(t=it(e))return t;e=[e]}return function(e){for(var t,n,r,i,o=0;o<e.length;){for(t=(i=rt(e[o]).split("-")).length,n=(n=rt(e[o+1]))?n.split("-"):null;t>0;){if(r=it(i.slice(0,t).join("-")))return r;if(n&&n.length>=t&&nt(i,n)>=t-1)break;t--}o++}return Ze}(e)}function ut(e){var t,n=e._a;return n&&-2===p(e).overflow&&(t=n[1]<0||n[1]>11?1:n[2]<1||n[2]>we(n[0],n[1])?2:n[3]<0||n[3]>24||24===n[3]&&(0!==n[4]||0!==n[5]||0!==n[6])?3:n[4]<0||n[4]>59?4:n[5]<0||n[5]>59?5:n[6]<0||n[6]>999?6:-1,p(e)._overflowDayOfYear&&(t<0||t>2)&&(t=2),p(e)._overflowWeeks&&-1===t&&(t=7),p(e)._overflowWeekday&&-1===t&&(t=8),p(e).overflow=t),e}var ct=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,lt=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,ht=/Z|[+-]\d\d(?::?\d\d)?/,dt=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],ft=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],pt=/^\/?Date\((-?\d+)/i,mt=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,gt={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function bt(e){var t,n,r,i,o,s,a=e._i,u=ct.exec(a)||lt.exec(a),c=dt.length,l=ft.length;if(u){for(p(e).iso=!0,t=0,n=c;t<n;t++)if(dt[t][1].exec(u[1])){i=dt[t][0],r=!1!==dt[t][2];break}if(null==i)return void(e._isValid=!1);if(u[3]){for(t=0,n=l;t<n;t++)if(ft[t][1].exec(u[3])){o=(u[2]||" ")+ft[t][0];break}if(null==o)return void(e._isValid=!1)}if(!r&&null!=o)return void(e._isValid=!1);if(u[4]){if(!ht.exec(u[4]))return void(e._isValid=!1);s="Z"}e._f=i+(o||"")+(s||""),Et(e)}else e._isValid=!1}function vt(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}function yt(e){var t,n,r,i,o,s,a,u,c=mt.exec(e._i.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));if(c){if(n=c[4],r=c[3],i=c[2],o=c[5],s=c[6],a=c[7],u=[vt(n),Se.indexOf(r),parseInt(i,10),parseInt(o,10),parseInt(s,10)],a&&u.push(parseInt(a,10)),t=u,!function(e,t,n){return!e||He.indexOf(e)===new Date(t[0],t[1],t[2]).getDay()||(p(n).weekdayMismatch=!0,n._isValid=!1,!1)}(c[1],t,e))return;e._a=t,e._tzm=function(e,t,n){if(e)return gt[e];if(t)return 0;var r=parseInt(n,10),i=r%100;return(r-i)/100*60+i}(c[8],c[9],c[10]),e._d=Ne.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),p(e).rfc2822=!0}else e._isValid=!1}function _t(e,t,n){return null!=e?e:null!=t?t:n}function wt(e){var t,n,i,o,s,a=[];if(!e._d){for(i=function(e){var t=new Date(r.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}(e),e._w&&null==e._a[2]&&null==e._a[1]&&function(e){var t,n,r,i,o,s,a,u,c;null!=(t=e._w).GG||null!=t.W||null!=t.E?(o=1,s=4,n=_t(t.GG,e._a[0],Ue(Ot(),1,4).year),r=_t(t.W,1),((i=_t(t.E,1))<1||i>7)&&(u=!0)):(o=e._locale._week.dow,s=e._locale._week.doy,c=Ue(Ot(),o,s),n=_t(t.gg,e._a[0],c.year),r=_t(t.w,c.week),null!=t.d?((i=t.d)<0||i>6)&&(u=!0):null!=t.e?(i=t.e+o,(t.e<0||t.e>6)&&(u=!0)):i=o),r<1||r>Le(n,o,s)?p(e)._overflowWeeks=!0:null!=u?p(e)._overflowWeekday=!0:(a=De(n,r,i,o,s),e._a[0]=a.year,e._dayOfYear=a.dayOfYear)}(e),null!=e._dayOfYear&&(s=_t(e._a[0],i[0]),(e._dayOfYear>je(s)||0===e._dayOfYear)&&(p(e)._overflowDayOfYear=!0),n=Ne(s,0,e._dayOfYear),e._a[1]=n.getUTCMonth(),e._a[2]=n.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=a[t]=i[t];for(;t<7;t++)e._a[t]=a[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[3]&&0===e._a[4]&&0===e._a[5]&&0===e._a[6]&&(e._nextDay=!0,e._a[3]=0),e._d=(e._useUTC?Ne:Re).apply(null,a),o=e._useUTC?e._d.getUTCDay():e._d.getDay(),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[3]=24),e._w&&void 0!==e._w.d&&e._w.d!==o&&(p(e).weekdayMismatch=!0)}}function Et(e){if(e._f!==r.ISO_8601)if(e._f!==r.RFC_2822){e._a=[],p(e).empty=!0;var t,n,i,o,s,a,u,c=""+e._i,l=c.length,h=0;for(u=(i=U(e._f,e._locale).match(j)||[]).length,t=0;t<u;t++)o=i[t],(n=(c.match(pe(o,e))||[])[0])&&((s=c.substr(0,c.indexOf(n))).length>0&&p(e).unusedInput.push(s),c=c.slice(c.indexOf(n)+n.length),h+=n.length),N[o]?(n?p(e).empty=!1:p(e).unusedTokens.push(o),_e(o,n,e)):e._strict&&!n&&p(e).unusedTokens.push(o);p(e).charsLeftOver=l-h,c.length>0&&p(e).unusedInput.push(c),e._a[3]<=12&&!0===p(e).bigHour&&e._a[3]>0&&(p(e).bigHour=void 0),p(e).parsedDateParts=e._a.slice(0),p(e).meridiem=e._meridiem,e._a[3]=function(e,t,n){var r;return null==n?t:null!=e.meridiemHour?e.meridiemHour(t,n):null!=e.isPM?((r=e.isPM(n))&&t<12&&(t+=12),r||12!==t||(t=0),t):t}(e._locale,e._a[3],e._meridiem),null!==(a=p(e).era)&&(e._a[0]=e._locale.erasConvertYear(a,e._a[0])),wt(e),ut(e)}else yt(e);else bt(e)}function St(e){var t=e._i,n=e._f;return e._locale=e._locale||at(e._l),null===t||void 0===n&&""===t?g({nullInput:!0}):("string"==typeof t&&(e._i=t=e._locale.preparse(t)),w(t)?new _(ut(t)):(l(t)?e._d=t:i(n)?function(e){var t,n,r,i,o,s,a=!1,u=e._f.length;if(0===u)return p(e).invalidFormat=!0,void(e._d=new Date(NaN));for(i=0;i<u;i++)o=0,s=!1,t=y({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[i],Et(t),m(t)&&(s=!0),o+=p(t).charsLeftOver,o+=10*p(t).unusedTokens.length,p(t).score=o,a?o<r&&(r=o,n=t):(null==r||o<r||s)&&(r=o,n=t,s&&(a=!0));d(e,n||t)}(e):n?Et(e):function(e){var t=e._i;u(t)?e._d=new Date(r.now()):l(t)?e._d=new Date(t.valueOf()):"string"==typeof t?function(e){var t=pt.exec(e._i);null===t?(bt(e),!1===e._isValid&&(delete e._isValid,yt(e),!1===e._isValid&&(delete e._isValid,e._strict?e._isValid=!1:r.createFromInputFallback(e)))):e._d=new Date(+t[1])}(e):i(t)?(e._a=h(t.slice(0),(function(e){return parseInt(e,10)})),wt(e)):o(t)?function(e){if(!e._d){var t=H(e._i),n=void 0===t.day?t.date:t.day;e._a=h([t.year,t.month,n,t.hour,t.minute,t.second,t.millisecond],(function(e){return e&&parseInt(e,10)})),wt(e)}}(e):c(t)?e._d=new Date(t):r.createFromInputFallback(e)}(e),m(e)||(e._d=null),e))}function Mt(e,t,n,r,s){var u,c={};return!0!==t&&!1!==t||(r=t,t=void 0),!0!==n&&!1!==n||(r=n,n=void 0),(o(e)&&a(e)||i(e)&&0===e.length)&&(e=void 0),c._isAMomentObject=!0,c._useUTC=c._isUTC=s,c._l=n,c._i=e,c._f=t,c._strict=r,(u=new _(ut(St(c))))._nextDay&&(u.add(1,"d"),u._nextDay=void 0),u}function Ot(e,t,n,r){return Mt(e,t,n,r,!1)}r.createFromInputFallback=S("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",(function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))})),r.ISO_8601=function(){},r.RFC_2822=function(){};var At=S("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=Ot.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:g()})),Ct=S("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=Ot.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:g()}));function Tt(e,t){var n,r;if(1===t.length&&i(t[0])&&(t=t[0]),!t.length)return Ot();for(n=t[0],r=1;r<t.length;++r)t[r].isValid()&&!t[r][e](n)||(n=t[r]);return n}var kt=["year","quarter","month","week","day","hour","minute","second","millisecond"];function xt(e){var t=H(e),n=t.year||0,r=t.quarter||0,i=t.month||0,o=t.week||t.isoWeek||0,a=t.day||0,u=t.hour||0,c=t.minute||0,l=t.second||0,h=t.millisecond||0;this._isValid=function(e){var t,n,r=!1,i=kt.length;for(t in e)if(s(e,t)&&(-1===ge.call(kt,t)||null!=e[t]&&isNaN(e[t])))return!1;for(n=0;n<i;++n)if(e[kt[n]]){if(r)return!1;parseFloat(e[kt[n]])!==W(e[kt[n]])&&(r=!0)}return!0}(t),this._milliseconds=+h+1e3*l+6e4*c+1e3*u*60*60,this._days=+a+7*o,this._months=+i+3*r+12*n,this._data={},this._locale=at(),this._bubble()}function jt(e){return e instanceof xt}function It(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function Rt(e,t){P(e,0,0,(function(){var e=this.utcOffset(),n="+";return e<0&&(e=-e,n="-"),n+x(~~(e/60),2)+t+x(~~e%60,2)}))}Rt("Z",":"),Rt("ZZ",""),fe("Z",he),fe("ZZ",he),ve(["Z","ZZ"],(function(e,t,n){n._useUTC=!0,n._tzm=Pt(he,e)}));var Nt=/([\+\-]|\d\d)/gi;function Pt(e,t){var n,r,i=(t||"").match(e);return null===i?null:0===(r=60*(n=((i[i.length-1]||[])+"").match(Nt)||["-",0,0])[1]+W(n[2]))?0:"+"===n[0]?r:-r}function Dt(e,t){var n,i;return t._isUTC?(n=t.clone(),i=(w(e)||l(e)?e.valueOf():Ot(e).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+i),r.updateOffset(n,!1),n):Ot(e).local()}function Ut(e){return-Math.round(e._d.getTimezoneOffset())}function Lt(){return!!this.isValid()&&this._isUTC&&0===this._offset}r.updateOffset=function(){};var Ft=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Bt=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Ht(e,t){var n,r,i,o,a,u,l=e,h=null;return jt(e)?l={ms:e._milliseconds,d:e._days,M:e._months}:c(e)||!isNaN(+e)?(l={},t?l[t]=+e:l.milliseconds=+e):(h=Ft.exec(e))?(n="-"===h[1]?-1:1,l={y:0,d:W(h[2])*n,h:W(h[3])*n,m:W(h[4])*n,s:W(h[5])*n,ms:W(It(1e3*h[6]))*n}):(h=Bt.exec(e))?(n="-"===h[1]?-1:1,l={y:qt(h[2],n),M:qt(h[3],n),w:qt(h[4],n),d:qt(h[5],n),h:qt(h[6],n),m:qt(h[7],n),s:qt(h[8],n)}):null==l?l={}:"object"==typeof l&&("from"in l||"to"in l)&&(o=Ot(l.from),a=Ot(l.to),i=o.isValid()&&a.isValid()?(a=Dt(a,o),o.isBefore(a)?u=Vt(o,a):((u=Vt(a,o)).milliseconds=-u.milliseconds,u.months=-u.months),u):{milliseconds:0,months:0},(l={}).ms=i.milliseconds,l.M=i.months),r=new xt(l),jt(e)&&s(e,"_locale")&&(r._locale=e._locale),jt(e)&&s(e,"_isValid")&&(r._isValid=e._isValid),r}function qt(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function Vt(e,t){var n={};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function Gt(e,t){return function(n,r){var i;return null===r||isNaN(+r)||(A(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),i=n,n=r,r=i),zt(this,Ht(n,r),e),this}}function zt(e,t,n,i){var o=t._milliseconds,s=It(t._days),a=It(t._months);e.isValid()&&(i=null==i||i,a&&Te(e,Y(e,"Month")+a*n),s&&Q(e,"Date",Y(e,"Date")+s*n),o&&e._d.setTime(e._d.valueOf()+o*n),i&&r.updateOffset(e,s||a))}Ht.fn=xt.prototype,Ht.invalid=function(){return Ht(NaN)};var Wt=Gt(1,"add"),Kt=Gt(-1,"subtract");function Yt(e){return"string"==typeof e||e instanceof String}function Qt(e){return w(e)||l(e)||Yt(e)||c(e)||function(e){var t=i(e),n=!1;return t&&(n=0===e.filter((function(t){return!c(t)&&Yt(e)})).length),t&&n}(e)||function(e){var t,n,r=o(e)&&!a(e),i=!1,u=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],c=u.length;for(t=0;t<c;t+=1)n=u[t],i=i||s(e,n);return r&&i}(e)||null==e}function Jt(e){var t,n=o(e)&&!a(e),r=!1,i=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"];for(t=0;t<i.length;t+=1)r=r||s(e,i[t]);return n&&r}function Zt(e,t){if(e.date()<t.date())return-Zt(t,e);var n=12*(t.year()-e.year())+(t.month()-e.month()),r=e.clone().add(n,"months");return-(n+(t-r<0?(t-r)/(r-e.clone().add(n-1,"months")):(t-r)/(e.clone().add(n+1,"months")-r)))||0}function $t(e){var t;return void 0===e?this._locale._abbr:(null!=(t=at(e))&&(this._locale=t),this)}r.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",r.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Xt=S("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",(function(e){return void 0===e?this.localeData():this.locale(e)}));function en(){return this._locale}function tn(e,t){return(e%t+t)%t}function nn(e,t,n){return e<100&&e>=0?new Date(e+400,t,n)-126227808e5:new Date(e,t,n).valueOf()}function rn(e,t,n){return e<100&&e>=0?Date.UTC(e+400,t,n)-126227808e5:Date.UTC(e,t,n)}function on(e,t){return t.erasAbbrRegex(e)}function sn(){var e,t,n=[],r=[],i=[],o=[],s=this.eras();for(e=0,t=s.length;e<t;++e)r.push(me(s[e].name)),n.push(me(s[e].abbr)),i.push(me(s[e].narrow)),o.push(me(s[e].name)),o.push(me(s[e].abbr)),o.push(me(s[e].narrow));this._erasRegex=new RegExp("^("+o.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+r.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+n.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+i.join("|")+")","i")}function an(e,t){P(0,[e,e.length],0,t)}function un(e,t,n,r,i){var o;return null==e?Ue(this,r,i).year:(t>(o=Le(e,r,i))&&(t=o),cn.call(this,e,t,n,r,i))}function cn(e,t,n,r,i){var o=De(e,t,n,r,i),s=Ne(o.year,0,o.dayOfYear);return this.year(s.getUTCFullYear()),this.month(s.getUTCMonth()),this.date(s.getUTCDate()),this}P("N",0,0,"eraAbbr"),P("NN",0,0,"eraAbbr"),P("NNN",0,0,"eraAbbr"),P("NNNN",0,0,"eraName"),P("NNNNN",0,0,"eraNarrow"),P("y",["y",1],"yo","eraYear"),P("y",["yy",2],0,"eraYear"),P("y",["yyy",3],0,"eraYear"),P("y",["yyyy",4],0,"eraYear"),fe("N",on),fe("NN",on),fe("NNN",on),fe("NNNN",(function(e,t){return t.erasNameRegex(e)})),fe("NNNNN",(function(e,t){return t.erasNarrowRegex(e)})),ve(["N","NN","NNN","NNNN","NNNNN"],(function(e,t,n,r){var i=n._locale.erasParse(e,r,n._strict);i?p(n).era=i:p(n).invalidEra=e})),fe("y",ue),fe("yy",ue),fe("yyy",ue),fe("yyyy",ue),fe("yo",(function(e,t){return t._eraYearOrdinalRegex||ue})),ve(["y","yy","yyy","yyyy"],0),ve(["yo"],(function(e,t,n,r){var i;n._locale._eraYearOrdinalRegex&&(i=e.match(n._locale._eraYearOrdinalRegex)),n._locale.eraYearOrdinalParse?t[0]=n._locale.eraYearOrdinalParse(e,i):t[0]=parseInt(e,10)})),P(0,["gg",2],0,(function(){return this.weekYear()%100})),P(0,["GG",2],0,(function(){return this.isoWeekYear()%100})),an("gggg","weekYear"),an("ggggg","weekYear"),an("GGGG","isoWeekYear"),an("GGGGG","isoWeekYear"),F("weekYear","gg"),F("isoWeekYear","GG"),V("weekYear",1),V("isoWeekYear",1),fe("G",ce),fe("g",ce),fe("GG",ne,$),fe("gg",ne,$),fe("GGGG",se,ee),fe("gggg",se,ee),fe("GGGGG",ae,te),fe("ggggg",ae,te),ye(["gggg","ggggg","GGGG","GGGGG"],(function(e,t,n,r){t[r.substr(0,2)]=W(e)})),ye(["gg","GG"],(function(e,t,n,i){t[i]=r.parseTwoDigitYear(e)})),P("Q",0,"Qo","quarter"),F("quarter","Q"),V("quarter",7),fe("Q",Z),ve("Q",(function(e,t){t[1]=3*(W(e)-1)})),P("D",["DD",2],"Do","date"),F("date","D"),V("date",9),fe("D",ne),fe("DD",ne,$),fe("Do",(function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient})),ve(["D","DD"],2),ve("Do",(function(e,t){t[2]=W(e.match(ne)[0])}));var ln=K("Date",!0);P("DDD",["DDDD",3],"DDDo","dayOfYear"),F("dayOfYear","DDD"),V("dayOfYear",4),fe("DDD",oe),fe("DDDD",X),ve(["DDD","DDDD"],(function(e,t,n){n._dayOfYear=W(e)})),P("m",["mm",2],0,"minute"),F("minute","m"),V("minute",14),fe("m",ne),fe("mm",ne,$),ve(["m","mm"],4);var hn=K("Minutes",!1);P("s",["ss",2],0,"second"),F("second","s"),V("second",15),fe("s",ne),fe("ss",ne,$),ve(["s","ss"],5);var dn,fn,pn=K("Seconds",!1);for(P("S",0,0,(function(){return~~(this.millisecond()/100)})),P(0,["SS",2],0,(function(){return~~(this.millisecond()/10)})),P(0,["SSS",3],0,"millisecond"),P(0,["SSSS",4],0,(function(){return 10*this.millisecond()})),P(0,["SSSSS",5],0,(function(){return 100*this.millisecond()})),P(0,["SSSSSS",6],0,(function(){return 1e3*this.millisecond()})),P(0,["SSSSSSS",7],0,(function(){return 1e4*this.millisecond()})),P(0,["SSSSSSSS",8],0,(function(){return 1e5*this.millisecond()})),P(0,["SSSSSSSSS",9],0,(function(){return 1e6*this.millisecond()})),F("millisecond","ms"),V("millisecond",16),fe("S",oe,Z),fe("SS",oe,$),fe("SSS",oe,X),dn="SSSS";dn.length<=9;dn+="S")fe(dn,ue);function mn(e,t){t[6]=W(1e3*("0."+e))}for(dn="S";dn.length<=9;dn+="S")ve(dn,mn);fn=K("Milliseconds",!1),P("z",0,0,"zoneAbbr"),P("zz",0,0,"zoneName");var gn=_.prototype;function bn(e){return e}gn.add=Wt,gn.calendar=function(e,t){1===arguments.length&&(arguments[0]?Qt(arguments[0])?(e=arguments[0],t=void 0):Jt(arguments[0])&&(t=arguments[0],e=void 0):(e=void 0,t=void 0));var n=e||Ot(),i=Dt(n,this).startOf("day"),o=r.calendarFormat(this,i)||"sameElse",s=t&&(C(t[o])?t[o].call(this,n):t[o]);return this.format(s||this.localeData().calendar(o,this,Ot(n)))},gn.clone=function(){return new _(this)},gn.diff=function(e,t,n){var r,i,o;if(!this.isValid())return NaN;if(!(r=Dt(e,this)).isValid())return NaN;switch(i=6e4*(r.utcOffset()-this.utcOffset()),t=B(t)){case"year":o=Zt(this,r)/12;break;case"month":o=Zt(this,r);break;case"quarter":o=Zt(this,r)/3;break;case"second":o=(this-r)/1e3;break;case"minute":o=(this-r)/6e4;break;case"hour":o=(this-r)/36e5;break;case"day":o=(this-r-i)/864e5;break;case"week":o=(this-r-i)/6048e5;break;default:o=this-r}return n?o:z(o)},gn.endOf=function(e){var t,n;if(void 0===(e=B(e))||"millisecond"===e||!this.isValid())return this;switch(n=this._isUTC?rn:nn,e){case"year":t=n(this.year()+1,0,1)-1;break;case"quarter":t=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=n(this.year(),this.month()+1,1)-1;break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=36e5-tn(t+(this._isUTC?0:6e4*this.utcOffset()),36e5)-1;break;case"minute":t=this._d.valueOf(),t+=6e4-tn(t,6e4)-1;break;case"second":t=this._d.valueOf(),t+=1e3-tn(t,1e3)-1}return this._d.setTime(t),r.updateOffset(this,!0),this},gn.format=function(e){e||(e=this.isUtc()?r.defaultFormatUtc:r.defaultFormat);var t=D(this,e);return this.localeData().postformat(t)},gn.from=function(e,t){return this.isValid()&&(w(e)&&e.isValid()||Ot(e).isValid())?Ht({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},gn.fromNow=function(e){return this.from(Ot(),e)},gn.to=function(e,t){return this.isValid()&&(w(e)&&e.isValid()||Ot(e).isValid())?Ht({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},gn.toNow=function(e){return this.to(Ot(),e)},gn.get=function(e){return C(this[e=B(e)])?this[e]():this},gn.invalidAt=function(){return p(this).overflow},gn.isAfter=function(e,t){var n=w(e)?e:Ot(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=B(t)||"millisecond")?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(t).valueOf())},gn.isBefore=function(e,t){var n=w(e)?e:Ot(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=B(t)||"millisecond")?this.valueOf()<n.valueOf():this.clone().endOf(t).valueOf()<n.valueOf())},gn.isBetween=function(e,t,n,r){var i=w(e)?e:Ot(e),o=w(t)?t:Ot(t);return!!(this.isValid()&&i.isValid()&&o.isValid())&&(("("===(r=r||"()")[0]?this.isAfter(i,n):!this.isBefore(i,n))&&(")"===r[1]?this.isBefore(o,n):!this.isAfter(o,n)))},gn.isSame=function(e,t){var n,r=w(e)?e:Ot(e);return!(!this.isValid()||!r.isValid())&&("millisecond"===(t=B(t)||"millisecond")?this.valueOf()===r.valueOf():(n=r.valueOf(),this.clone().startOf(t).valueOf()<=n&&n<=this.clone().endOf(t).valueOf()))},gn.isSameOrAfter=function(e,t){return this.isSame(e,t)||this.isAfter(e,t)},gn.isSameOrBefore=function(e,t){return this.isSame(e,t)||this.isBefore(e,t)},gn.isValid=function(){return m(this)},gn.lang=Xt,gn.locale=$t,gn.localeData=en,gn.max=Ct,gn.min=At,gn.parsingFlags=function(){return d({},p(this))},gn.set=function(e,t){if("object"==typeof e){var n,r=function(e){var t,n=[];for(t in e)s(e,t)&&n.push({unit:t,priority:q[t]});return n.sort((function(e,t){return e.priority-t.priority})),n}(e=H(e)),i=r.length;for(n=0;n<i;n++)this[r[n].unit](e[r[n].unit])}else if(C(this[e=B(e)]))return this[e](t);return this},gn.startOf=function(e){var t,n;if(void 0===(e=B(e))||"millisecond"===e||!this.isValid())return this;switch(n=this._isUTC?rn:nn,e){case"year":t=n(this.year(),0,1);break;case"quarter":t=n(this.year(),this.month()-this.month()%3,1);break;case"month":t=n(this.year(),this.month(),1);break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=n(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=tn(t+(this._isUTC?0:6e4*this.utcOffset()),36e5);break;case"minute":t=this._d.valueOf(),t-=tn(t,6e4);break;case"second":t=this._d.valueOf(),t-=tn(t,1e3)}return this._d.setTime(t),r.updateOffset(this,!0),this},gn.subtract=Kt,gn.toArray=function(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]},gn.toObject=function(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}},gn.toDate=function(){return new Date(this.valueOf())},gn.toISOString=function(e){if(!this.isValid())return null;var t=!0!==e,n=t?this.clone().utc():this;return n.year()<0||n.year()>9999?D(n,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):C(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",D(n,"Z")):D(n,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},gn.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e,t,n,r="moment",i="";return this.isLocal()||(r=0===this.utcOffset()?"moment.utc":"moment.parseZone",i="Z"),e="["+r+'("]',t=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",n=i+'[")]',this.format(e+t+"-MM-DD[T]HH:mm:ss.SSS"+n)},"undefined"!=typeof Symbol&&null!=Symbol.for&&(gn[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),gn.toJSON=function(){return this.isValid()?this.toISOString():null},gn.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},gn.unix=function(){return Math.floor(this.valueOf()/1e3)},gn.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},gn.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},gn.eraName=function(){var e,t,n,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),r[e].since<=n&&n<=r[e].until)return r[e].name;if(r[e].until<=n&&n<=r[e].since)return r[e].name}return""},gn.eraNarrow=function(){var e,t,n,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),r[e].since<=n&&n<=r[e].until)return r[e].narrow;if(r[e].until<=n&&n<=r[e].since)return r[e].narrow}return""},gn.eraAbbr=function(){var e,t,n,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),r[e].since<=n&&n<=r[e].until)return r[e].abbr;if(r[e].until<=n&&n<=r[e].since)return r[e].abbr}return""},gn.eraYear=function(){var e,t,n,i,o=this.localeData().eras();for(e=0,t=o.length;e<t;++e)if(n=o[e].since<=o[e].until?1:-1,i=this.clone().startOf("day").valueOf(),o[e].since<=i&&i<=o[e].until||o[e].until<=i&&i<=o[e].since)return(this.year()-r(o[e].since).year())*n+o[e].offset;return this.year()},gn.year=Ie,gn.isLeapYear=function(){return G(this.year())},gn.weekYear=function(e){return un.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},gn.isoWeekYear=function(e){return un.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)},gn.quarter=gn.quarters=function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},gn.month=ke,gn.daysInMonth=function(){return we(this.year(),this.month())},gn.week=gn.weeks=function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")},gn.isoWeek=gn.isoWeeks=function(e){var t=Ue(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")},gn.weeksInYear=function(){var e=this.localeData()._week;return Le(this.year(),e.dow,e.doy)},gn.weeksInWeekYear=function(){var e=this.localeData()._week;return Le(this.weekYear(),e.dow,e.doy)},gn.isoWeeksInYear=function(){return Le(this.year(),1,4)},gn.isoWeeksInISOWeekYear=function(){return Le(this.isoWeekYear(),1,4)},gn.date=ln,gn.day=gn.days=function(e){if(!this.isValid())return null!=e?this:NaN;var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=function(e,t){return"string"!=typeof e?e:isNaN(e)?"number"==typeof(e=t.weekdaysParse(e))?e:null:parseInt(e,10)}(e,this.localeData()),this.add(e-t,"d")):t},gn.weekday=function(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")},gn.isoWeekday=function(e){if(!this.isValid())return null!=e?this:NaN;if(null!=e){var t=function(e,t){return"string"==typeof e?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}(e,this.localeData());return this.day(this.day()%7?t:t-7)}return this.day()||7},gn.dayOfYear=function(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")},gn.hour=gn.hours=$e,gn.minute=gn.minutes=hn,gn.second=gn.seconds=pn,gn.millisecond=gn.milliseconds=fn,gn.utcOffset=function(e,t,n){var i,o=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null!=e){if("string"==typeof e){if(null===(e=Pt(he,e)))return this}else Math.abs(e)<16&&!n&&(e*=60);return!this._isUTC&&t&&(i=Ut(this)),this._offset=e,this._isUTC=!0,null!=i&&this.add(i,"m"),o!==e&&(!t||this._changeInProgress?zt(this,Ht(e-o,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,r.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?o:Ut(this)},gn.utc=function(e){return this.utcOffset(0,e)},gn.local=function(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Ut(this),"m")),this},gn.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var e=Pt(le,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this},gn.hasAlignedHourOffset=function(e){return!!this.isValid()&&(e=e?Ot(e).utcOffset():0,(this.utcOffset()-e)%60==0)},gn.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},gn.isLocal=function(){return!!this.isValid()&&!this._isUTC},gn.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},gn.isUtc=Lt,gn.isUTC=Lt,gn.zoneAbbr=function(){return this._isUTC?"UTC":""},gn.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},gn.dates=S("dates accessor is deprecated. Use date instead.",ln),gn.months=S("months accessor is deprecated. Use month instead",ke),gn.years=S("years accessor is deprecated. Use year instead",Ie),gn.zone=S("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",(function(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()})),gn.isDSTShifted=S("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",(function(){if(!u(this._isDSTShifted))return this._isDSTShifted;var e,t={};return y(t,this),(t=St(t))._a?(e=t._isUTC?f(t._a):Ot(t._a),this._isDSTShifted=this.isValid()&&function(e,t,n){var r,i=Math.min(e.length,t.length),o=Math.abs(e.length-t.length),s=0;for(r=0;r<i;r++)(n&&e[r]!==t[r]||!n&&W(e[r])!==W(t[r]))&&s++;return s+o}(t._a,e.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}));var vn=k.prototype;function yn(e,t,n,r){var i=at(),o=f().set(r,t);return i[n](o,e)}function _n(e,t,n){if(c(e)&&(t=e,e=void 0),e=e||"",null!=t)return yn(e,t,n,"month");var r,i=[];for(r=0;r<12;r++)i[r]=yn(e,r,n,"month");return i}function wn(e,t,n,r){"boolean"==typeof e?(c(t)&&(n=t,t=void 0),t=t||""):(n=t=e,e=!1,c(t)&&(n=t,t=void 0),t=t||"");var i,o=at(),s=e?o._week.dow:0,a=[];if(null!=n)return yn(t,(n+s)%7,r,"day");for(i=0;i<7;i++)a[i]=yn(t,(i+s)%7,r,"day");return a}vn.calendar=function(e,t,n){var r=this._calendar[e]||this._calendar.sameElse;return C(r)?r.call(t,n):r},vn.longDateFormat=function(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.match(j).map((function(e){return"MMMM"===e||"MM"===e||"DD"===e||"dddd"===e?e.slice(1):e})).join(""),this._longDateFormat[e])},vn.invalidDate=function(){return this._invalidDate},vn.ordinal=function(e){return this._ordinal.replace("%d",e)},vn.preparse=bn,vn.postformat=bn,vn.relativeTime=function(e,t,n,r){var i=this._relativeTime[n];return C(i)?i(e,t,n,r):i.replace(/%d/i,e)},vn.pastFuture=function(e,t){var n=this._relativeTime[e>0?"future":"past"];return C(n)?n(t):n.replace(/%s/i,t)},vn.set=function(e){var t,n;for(n in e)s(e,n)&&(C(t=e[n])?this[n]=t:this["_"+n]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},vn.eras=function(e,t){var n,i,o,s=this._eras||at("en")._eras;for(n=0,i=s.length;n<i;++n){switch(typeof s[n].since){case"string":o=r(s[n].since).startOf("day"),s[n].since=o.valueOf()}switch(typeof s[n].until){case"undefined":s[n].until=1/0;break;case"string":o=r(s[n].until).startOf("day").valueOf(),s[n].until=o.valueOf()}}return s},vn.erasParse=function(e,t,n){var r,i,o,s,a,u=this.eras();for(e=e.toUpperCase(),r=0,i=u.length;r<i;++r)if(o=u[r].name.toUpperCase(),s=u[r].abbr.toUpperCase(),a=u[r].narrow.toUpperCase(),n)switch(t){case"N":case"NN":case"NNN":if(s===e)return u[r];break;case"NNNN":if(o===e)return u[r];break;case"NNNNN":if(a===e)return u[r]}else if([o,s,a].indexOf(e)>=0)return u[r]},vn.erasConvertYear=function(e,t){var n=e.since<=e.until?1:-1;return void 0===t?r(e.since).year():r(e.since).year()+(t-e.offset)*n},vn.erasAbbrRegex=function(e){return s(this,"_erasAbbrRegex")||sn.call(this),e?this._erasAbbrRegex:this._erasRegex},vn.erasNameRegex=function(e){return s(this,"_erasNameRegex")||sn.call(this),e?this._erasNameRegex:this._erasRegex},vn.erasNarrowRegex=function(e){return s(this,"_erasNarrowRegex")||sn.call(this),e?this._erasNarrowRegex:this._erasRegex},vn.months=function(e,t){return e?i(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||Me).test(t)?"format":"standalone"][e.month()]:i(this._months)?this._months:this._months.standalone},vn.monthsShort=function(e,t){return e?i(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[Me.test(t)?"format":"standalone"][e.month()]:i(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},vn.monthsParse=function(e,t,n){var r,i,o;if(this._monthsParseExact)return Ce.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++){if(i=f([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),n||this._monthsParse[r]||(o="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[r]=new RegExp(o.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[r].test(e))return r;if(n&&"MMM"===t&&this._shortMonthsParse[r].test(e))return r;if(!n&&this._monthsParse[r].test(e))return r}},vn.monthsRegex=function(e){return this._monthsParseExact?(s(this,"_monthsRegex")||xe.call(this),e?this._monthsStrictRegex:this._monthsRegex):(s(this,"_monthsRegex")||(this._monthsRegex=Ae),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)},vn.monthsShortRegex=function(e){return this._monthsParseExact?(s(this,"_monthsRegex")||xe.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(s(this,"_monthsShortRegex")||(this._monthsShortRegex=Oe),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)},vn.week=function(e){return Ue(e,this._week.dow,this._week.doy).week},vn.firstDayOfYear=function(){return this._week.doy},vn.firstDayOfWeek=function(){return this._week.dow},vn.weekdays=function(e,t){var n=i(this._weekdays)?this._weekdays:this._weekdays[e&&!0!==e&&this._weekdays.isFormat.test(t)?"format":"standalone"];return!0===e?Fe(n,this._week.dow):e?n[e.day()]:n},vn.weekdaysMin=function(e){return!0===e?Fe(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin},vn.weekdaysShort=function(e){return!0===e?Fe(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort},vn.weekdaysParse=function(e,t,n){var r,i,o;if(this._weekdaysParseExact)return We.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),r=0;r<7;r++){if(i=f([2e3,1]).day(r),n&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(i,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(i,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(i,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[r]||(o="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[r]=new RegExp(o.replace(".",""),"i")),n&&"dddd"===t&&this._fullWeekdaysParse[r].test(e))return r;if(n&&"ddd"===t&&this._shortWeekdaysParse[r].test(e))return r;if(n&&"dd"===t&&this._minWeekdaysParse[r].test(e))return r;if(!n&&this._weekdaysParse[r].test(e))return r}},vn.weekdaysRegex=function(e){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||Ke.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(s(this,"_weekdaysRegex")||(this._weekdaysRegex=Ve),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)},vn.weekdaysShortRegex=function(e){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||Ke.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(s(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Ge),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},vn.weekdaysMinRegex=function(e){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||Ke.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(s(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=ze),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},vn.isPM=function(e){return"p"===(e+"").toLowerCase().charAt(0)},vn.meridiem=function(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"},ot("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===W(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),r.lang=S("moment.lang is deprecated. Use moment.locale instead.",ot),r.langData=S("moment.langData is deprecated. Use moment.localeData instead.",at);var En=Math.abs;function Sn(e,t,n,r){var i=Ht(t,n);return e._milliseconds+=r*i._milliseconds,e._days+=r*i._days,e._months+=r*i._months,e._bubble()}function Mn(e){return e<0?Math.floor(e):Math.ceil(e)}function On(e){return 4800*e/146097}function An(e){return 146097*e/4800}function Cn(e){return function(){return this.as(e)}}var Tn=Cn("ms"),kn=Cn("s"),xn=Cn("m"),jn=Cn("h"),In=Cn("d"),Rn=Cn("w"),Nn=Cn("M"),Pn=Cn("Q"),Dn=Cn("y");function Un(e){return function(){return this.isValid()?this._data[e]:NaN}}var Ln=Un("milliseconds"),Fn=Un("seconds"),Bn=Un("minutes"),Hn=Un("hours"),qn=Un("days"),Vn=Un("months"),Gn=Un("years"),zn=Math.round,Wn={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function Kn(e,t,n,r,i){return i.relativeTime(t||1,!!n,e,r)}var Yn=Math.abs;function Qn(e){return(e>0)-(e<0)||+e}function Jn(){if(!this.isValid())return this.localeData().invalidDate();var e,t,n,r,i,o,s,a,u=Yn(this._milliseconds)/1e3,c=Yn(this._days),l=Yn(this._months),h=this.asSeconds();return h?(e=z(u/60),t=z(e/60),u%=60,e%=60,n=z(l/12),l%=12,r=u?u.toFixed(3).replace(/\.?0+$/,""):"",i=h<0?"-":"",o=Qn(this._months)!==Qn(h)?"-":"",s=Qn(this._days)!==Qn(h)?"-":"",a=Qn(this._milliseconds)!==Qn(h)?"-":"",i+"P"+(n?o+n+"Y":"")+(l?o+l+"M":"")+(c?s+c+"D":"")+(t||e||u?"T":"")+(t?a+t+"H":"")+(e?a+e+"M":"")+(u?a+r+"S":"")):"P0D"}var Zn=xt.prototype;return Zn.isValid=function(){return this._isValid},Zn.abs=function(){var e=this._data;return this._milliseconds=En(this._milliseconds),this._days=En(this._days),this._months=En(this._months),e.milliseconds=En(e.milliseconds),e.seconds=En(e.seconds),e.minutes=En(e.minutes),e.hours=En(e.hours),e.months=En(e.months),e.years=En(e.years),this},Zn.add=function(e,t){return Sn(this,e,t,1)},Zn.subtract=function(e,t){return Sn(this,e,t,-1)},Zn.as=function(e){if(!this.isValid())return NaN;var t,n,r=this._milliseconds;if("month"===(e=B(e))||"quarter"===e||"year"===e)switch(t=this._days+r/864e5,n=this._months+On(t),e){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(t=this._days+Math.round(An(this._months)),e){case"week":return t/7+r/6048e5;case"day":return t+r/864e5;case"hour":return 24*t+r/36e5;case"minute":return 1440*t+r/6e4;case"second":return 86400*t+r/1e3;case"millisecond":return Math.floor(864e5*t)+r;default:throw new Error("Unknown unit "+e)}},Zn.asMilliseconds=Tn,Zn.asSeconds=kn,Zn.asMinutes=xn,Zn.asHours=jn,Zn.asDays=In,Zn.asWeeks=Rn,Zn.asMonths=Nn,Zn.asQuarters=Pn,Zn.asYears=Dn,Zn.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*W(this._months/12):NaN},Zn._bubble=function(){var e,t,n,r,i,o=this._milliseconds,s=this._days,a=this._months,u=this._data;return o>=0&&s>=0&&a>=0||o<=0&&s<=0&&a<=0||(o+=864e5*Mn(An(a)+s),s=0,a=0),u.milliseconds=o%1e3,e=z(o/1e3),u.seconds=e%60,t=z(e/60),u.minutes=t%60,n=z(t/60),u.hours=n%24,s+=z(n/24),i=z(On(s)),a+=i,s-=Mn(An(i)),r=z(a/12),a%=12,u.days=s,u.months=a,u.years=r,this},Zn.clone=function(){return Ht(this)},Zn.get=function(e){return e=B(e),this.isValid()?this[e+"s"]():NaN},Zn.milliseconds=Ln,Zn.seconds=Fn,Zn.minutes=Bn,Zn.hours=Hn,Zn.days=qn,Zn.weeks=function(){return z(this.days()/7)},Zn.months=Vn,Zn.years=Gn,Zn.humanize=function(e,t){if(!this.isValid())return this.localeData().invalidDate();var n,r,i=!1,o=Wn;return"object"==typeof e&&(t=e,e=!1),"boolean"==typeof e&&(i=e),"object"==typeof t&&(o=Object.assign({},Wn,t),null!=t.s&&null==t.ss&&(o.ss=t.s-1)),n=this.localeData(),r=function(e,t,n,r){var i=Ht(e).abs(),o=zn(i.as("s")),s=zn(i.as("m")),a=zn(i.as("h")),u=zn(i.as("d")),c=zn(i.as("M")),l=zn(i.as("w")),h=zn(i.as("y")),d=o<=n.ss&&["s",o]||o<n.s&&["ss",o]||s<=1&&["m"]||s<n.m&&["mm",s]||a<=1&&["h"]||a<n.h&&["hh",a]||u<=1&&["d"]||u<n.d&&["dd",u];return null!=n.w&&(d=d||l<=1&&["w"]||l<n.w&&["ww",l]),(d=d||c<=1&&["M"]||c<n.M&&["MM",c]||h<=1&&["y"]||["yy",h])[2]=t,d[3]=+e>0,d[4]=r,Kn.apply(null,d)}(this,!i,o,n),i&&(r=n.pastFuture(+this,r)),n.postformat(r)},Zn.toISOString=Jn,Zn.toString=Jn,Zn.toJSON=Jn,Zn.locale=$t,Zn.localeData=en,Zn.toIsoString=S("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Jn),Zn.lang=Xt,P("X",0,0,"unix"),P("x",0,0,"valueOf"),fe("x",ce),fe("X",/[+-]?\d+(\.\d{1,3})?/),ve("X",(function(e,t,n){n._d=new Date(1e3*parseFloat(e))})),ve("x",(function(e,t,n){n._d=new Date(W(e))})),
//! moment.js
r.version="2.29.3",t=Ot,r.fn=gn,r.min=function(){var e=[].slice.call(arguments,0);return Tt("isBefore",e)},r.max=function(){var e=[].slice.call(arguments,0);return Tt("isAfter",e)},r.now=function(){return Date.now?Date.now():+new Date},r.utc=f,r.unix=function(e){return Ot(1e3*e)},r.months=function(e,t){return _n(e,t,"months")},r.isDate=l,r.locale=ot,r.invalid=g,r.duration=Ht,r.isMoment=w,r.weekdays=function(e,t,n){return wn(e,t,n,"weekdays")},r.parseZone=function(){return Ot.apply(null,arguments).parseZone()},r.localeData=at,r.isDuration=jt,r.monthsShort=function(e,t){return _n(e,t,"monthsShort")},r.weekdaysMin=function(e,t,n){return wn(e,t,n,"weekdaysMin")},r.defineLocale=st,r.updateLocale=function(e,t){if(null!=t){var n,r,i=Xe;null!=et[e]&&null!=et[e].parentLocale?et[e].set(T(et[e]._config,t)):(null!=(r=it(e))&&(i=r._config),t=T(i,t),null==r&&(t.abbr=e),(n=new k(t)).parentLocale=et[e],et[e]=n),ot(e)}else null!=et[e]&&(null!=et[e].parentLocale?(et[e]=et[e].parentLocale,e===ot()&&ot(e)):null!=et[e]&&delete et[e]);return et[e]},r.locales=function(){return M(et)},r.weekdaysShort=function(e,t,n){return wn(e,t,n,"weekdaysShort")},r.normalizeUnits=B,r.relativeTimeRounding=function(e){return void 0===e?zn:"function"==typeof e&&(zn=e,!0)},r.relativeTimeThreshold=function(e,t){return void 0!==Wn[e]&&(void 0===t?Wn[e]:(Wn[e]=t,"s"===e&&(Wn.ss=t-1),!0))},r.calendarFormat=function(e,t){var n=e.diff(t,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"},r.prototype=gn,r.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},r}()}).call(this,n(34)(e))},function(e,t,n){(function(e){!function(e,t){"use strict";function r(e,t){if(!e)throw new Error(t||"Assertion failed")}function i(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}function o(e,t,n){if(o.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(n=t,t=10),this._init(e||0,t||10,n||"be"))}var s;"object"==typeof e?e.exports=o:t.BN=o,o.BN=o,o.wordSize=26;try{s="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:n(252).Buffer}catch(e){}function a(e,t){var n=e.charCodeAt(t);return n>=65&&n<=70?n-55:n>=97&&n<=102?n-87:n-48&15}function u(e,t,n){var r=a(e,n);return n-1>=t&&(r|=a(e,n-1)<<4),r}function c(e,t,n,r){for(var i=0,o=Math.min(e.length,n),s=t;s<o;s++){var a=e.charCodeAt(s)-48;i*=r,i+=a>=49?a-49+10:a>=17?a-17+10:a}return i}o.isBN=function(e){return e instanceof o||null!==e&&"object"==typeof e&&e.constructor.wordSize===o.wordSize&&Array.isArray(e.words)},o.max=function(e,t){return e.cmp(t)>0?e:t},o.min=function(e,t){return e.cmp(t)<0?e:t},o.prototype._init=function(e,t,n){if("number"==typeof e)return this._initNumber(e,t,n);if("object"==typeof e)return this._initArray(e,t,n);"hex"===t&&(t=16),r(t===(0|t)&&t>=2&&t<=36);var i=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<e.length&&(16===t?this._parseHex(e,i,n):(this._parseBase(e,t,i),"le"===n&&this._initArray(this.toArray(),t,n)))},o.prototype._initNumber=function(e,t,n){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(r(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===n&&this._initArray(this.toArray(),t,n)},o.prototype._initArray=function(e,t,n){if(r("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var o,s,a=0;if("be"===n)for(i=e.length-1,o=0;i>=0;i-=3)s=e[i]|e[i-1]<<8|e[i-2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);else if("le"===n)for(i=0,o=0;i<e.length;i+=3)s=e[i]|e[i+1]<<8|e[i+2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);return this.strip()},o.prototype._parseHex=function(e,t,n){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var i,o=0,s=0;if("be"===n)for(r=e.length-1;r>=t;r-=2)i=u(e,t,r)<<o,this.words[s]|=67108863&i,o>=18?(o-=18,s+=1,this.words[s]|=i>>>26):o+=8;else for(r=(e.length-t)%2==0?t+1:t;r<e.length;r+=2)i=u(e,t,r)<<o,this.words[s]|=67108863&i,o>=18?(o-=18,s+=1,this.words[s]|=i>>>26):o+=8;this.strip()},o.prototype._parseBase=function(e,t,n){this.words=[0],this.length=1;for(var r=0,i=1;i<=67108863;i*=t)r++;r--,i=i/t|0;for(var o=e.length-n,s=o%r,a=Math.min(o,o-s)+n,u=0,l=n;l<a;l+=r)u=c(e,l,l+r,t),this.imuln(i),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==s){var h=1;for(u=c(e,l,e.length,t),l=0;l<s;l++)h*=t;this.imuln(h),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this.strip()},o.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},o.prototype.clone=function(){var e=new o(null);return this.copy(e),e},o.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var l=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],d=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function f(e,t,n){n.negative=t.negative^e.negative;var r=e.length+t.length|0;n.length=r,r=r-1|0;var i=0|e.words[0],o=0|t.words[0],s=i*o,a=67108863&s,u=s/67108864|0;n.words[0]=a;for(var c=1;c<r;c++){for(var l=u>>>26,h=67108863&u,d=Math.min(c,t.length-1),f=Math.max(0,c-e.length+1);f<=d;f++){var p=c-f|0;l+=(s=(i=0|e.words[p])*(o=0|t.words[f])+h)/67108864|0,h=67108863&s}n.words[c]=0|h,u=0|l}return 0!==u?n.words[c]=0|u:n.length--,n.strip()}o.prototype.toString=function(e,t){var n;if(t=0|t||1,16===(e=e||10)||"hex"===e){n="";for(var i=0,o=0,s=0;s<this.length;s++){var a=this.words[s],u=(16777215&(a<<i|o)).toString(16);n=0!==(o=a>>>24-i&16777215)||s!==this.length-1?l[6-u.length]+u+n:u+n,(i+=2)>=26&&(i-=26,s--)}for(0!==o&&(n=o.toString(16)+n);n.length%t!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}if(e===(0|e)&&e>=2&&e<=36){var c=h[e],f=d[e];n="";var p=this.clone();for(p.negative=0;!p.isZero();){var m=p.modn(f).toString(e);n=(p=p.idivn(f)).isZero()?m+n:l[c-m.length]+m+n}for(this.isZero()&&(n="0"+n);n.length%t!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}r(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(e,t){return r(void 0!==s),this.toArrayLike(s,e,t)},o.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},o.prototype.toArrayLike=function(e,t,n){var i=this.byteLength(),o=n||Math.max(1,i);r(i<=o,"byte array longer than desired length"),r(o>0,"Requested array length <= 0"),this.strip();var s,a,u="le"===t,c=new e(o),l=this.clone();if(u){for(a=0;!l.isZero();a++)s=l.andln(255),l.iushrn(8),c[a]=s;for(;a<o;a++)c[a]=0}else{for(a=0;a<o-i;a++)c[a]=0;for(a=0;!l.isZero();a++)s=l.andln(255),l.iushrn(8),c[o-a-1]=s}return c},Math.clz32?o.prototype._countBits=function(e){return 32-Math.clz32(e)}:o.prototype._countBits=function(e){var t=e,n=0;return t>=4096&&(n+=13,t>>>=13),t>=64&&(n+=7,t>>>=7),t>=8&&(n+=4,t>>>=4),t>=2&&(n+=2,t>>>=2),n+t},o.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,n=0;return 0==(8191&t)&&(n+=13,t>>>=13),0==(127&t)&&(n+=7,t>>>=7),0==(15&t)&&(n+=4,t>>>=4),0==(3&t)&&(n+=2,t>>>=2),0==(1&t)&&n++,n},o.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var n=this._zeroBits(this.words[t]);if(e+=n,26!==n)break}return e},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},o.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this.strip()},o.prototype.ior=function(e){return r(0==(this.negative|e.negative)),this.iuor(e)},o.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},o.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},o.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var n=0;n<t.length;n++)this.words[n]=this.words[n]&e.words[n];return this.length=t.length,this.strip()},o.prototype.iand=function(e){return r(0==(this.negative|e.negative)),this.iuand(e)},o.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},o.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},o.prototype.iuxor=function(e){var t,n;this.length>e.length?(t=this,n=e):(t=e,n=this);for(var r=0;r<n.length;r++)this.words[r]=t.words[r]^n.words[r];if(this!==t)for(;r<t.length;r++)this.words[r]=t.words[r];return this.length=t.length,this.strip()},o.prototype.ixor=function(e){return r(0==(this.negative|e.negative)),this.iuxor(e)},o.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},o.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},o.prototype.inotn=function(e){r("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),n=e%26;this._expand(t),n>0&&t--;for(var i=0;i<t;i++)this.words[i]=67108863&~this.words[i];return n>0&&(this.words[i]=~this.words[i]&67108863>>26-n),this.strip()},o.prototype.notn=function(e){return this.clone().inotn(e)},o.prototype.setn=function(e,t){r("number"==typeof e&&e>=0);var n=e/26|0,i=e%26;return this._expand(n+1),this.words[n]=t?this.words[n]|1<<i:this.words[n]&~(1<<i),this.strip()},o.prototype.iadd=function(e){var t,n,r;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(n=this,r=e):(n=e,r=this);for(var i=0,o=0;o<r.length;o++)t=(0|n.words[o])+(0|r.words[o])+i,this.words[o]=67108863&t,i=t>>>26;for(;0!==i&&o<n.length;o++)t=(0|n.words[o])+i,this.words[o]=67108863&t,i=t>>>26;if(this.length=n.length,0!==i)this.words[this.length]=i,this.length++;else if(n!==this)for(;o<n.length;o++)this.words[o]=n.words[o];return this},o.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},o.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var n,r,i=this.cmp(e);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(n=this,r=e):(n=e,r=this);for(var o=0,s=0;s<r.length;s++)o=(t=(0|n.words[s])-(0|r.words[s])+o)>>26,this.words[s]=67108863&t;for(;0!==o&&s<n.length;s++)o=(t=(0|n.words[s])+o)>>26,this.words[s]=67108863&t;if(0===o&&s<n.length&&n!==this)for(;s<n.length;s++)this.words[s]=n.words[s];return this.length=Math.max(this.length,s),n!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(e){return this.clone().isub(e)};var p=function(e,t,n){var r,i,o,s=e.words,a=t.words,u=n.words,c=0,l=0|s[0],h=8191&l,d=l>>>13,f=0|s[1],p=8191&f,m=f>>>13,g=0|s[2],b=8191&g,v=g>>>13,y=0|s[3],_=8191&y,w=y>>>13,E=0|s[4],S=8191&E,M=E>>>13,O=0|s[5],A=8191&O,C=O>>>13,T=0|s[6],k=8191&T,x=T>>>13,j=0|s[7],I=8191&j,R=j>>>13,N=0|s[8],P=8191&N,D=N>>>13,U=0|s[9],L=8191&U,F=U>>>13,B=0|a[0],H=8191&B,q=B>>>13,V=0|a[1],G=8191&V,z=V>>>13,W=0|a[2],K=8191&W,Y=W>>>13,Q=0|a[3],J=8191&Q,Z=Q>>>13,$=0|a[4],X=8191&$,ee=$>>>13,te=0|a[5],ne=8191&te,re=te>>>13,ie=0|a[6],oe=8191&ie,se=ie>>>13,ae=0|a[7],ue=8191&ae,ce=ae>>>13,le=0|a[8],he=8191&le,de=le>>>13,fe=0|a[9],pe=8191&fe,me=fe>>>13;n.negative=e.negative^t.negative,n.length=19;var ge=(c+(r=Math.imul(h,H))|0)+((8191&(i=(i=Math.imul(h,q))+Math.imul(d,H)|0))<<13)|0;c=((o=Math.imul(d,q))+(i>>>13)|0)+(ge>>>26)|0,ge&=67108863,r=Math.imul(p,H),i=(i=Math.imul(p,q))+Math.imul(m,H)|0,o=Math.imul(m,q);var be=(c+(r=r+Math.imul(h,G)|0)|0)+((8191&(i=(i=i+Math.imul(h,z)|0)+Math.imul(d,G)|0))<<13)|0;c=((o=o+Math.imul(d,z)|0)+(i>>>13)|0)+(be>>>26)|0,be&=67108863,r=Math.imul(b,H),i=(i=Math.imul(b,q))+Math.imul(v,H)|0,o=Math.imul(v,q),r=r+Math.imul(p,G)|0,i=(i=i+Math.imul(p,z)|0)+Math.imul(m,G)|0,o=o+Math.imul(m,z)|0;var ve=(c+(r=r+Math.imul(h,K)|0)|0)+((8191&(i=(i=i+Math.imul(h,Y)|0)+Math.imul(d,K)|0))<<13)|0;c=((o=o+Math.imul(d,Y)|0)+(i>>>13)|0)+(ve>>>26)|0,ve&=67108863,r=Math.imul(_,H),i=(i=Math.imul(_,q))+Math.imul(w,H)|0,o=Math.imul(w,q),r=r+Math.imul(b,G)|0,i=(i=i+Math.imul(b,z)|0)+Math.imul(v,G)|0,o=o+Math.imul(v,z)|0,r=r+Math.imul(p,K)|0,i=(i=i+Math.imul(p,Y)|0)+Math.imul(m,K)|0,o=o+Math.imul(m,Y)|0;var ye=(c+(r=r+Math.imul(h,J)|0)|0)+((8191&(i=(i=i+Math.imul(h,Z)|0)+Math.imul(d,J)|0))<<13)|0;c=((o=o+Math.imul(d,Z)|0)+(i>>>13)|0)+(ye>>>26)|0,ye&=67108863,r=Math.imul(S,H),i=(i=Math.imul(S,q))+Math.imul(M,H)|0,o=Math.imul(M,q),r=r+Math.imul(_,G)|0,i=(i=i+Math.imul(_,z)|0)+Math.imul(w,G)|0,o=o+Math.imul(w,z)|0,r=r+Math.imul(b,K)|0,i=(i=i+Math.imul(b,Y)|0)+Math.imul(v,K)|0,o=o+Math.imul(v,Y)|0,r=r+Math.imul(p,J)|0,i=(i=i+Math.imul(p,Z)|0)+Math.imul(m,J)|0,o=o+Math.imul(m,Z)|0;var _e=(c+(r=r+Math.imul(h,X)|0)|0)+((8191&(i=(i=i+Math.imul(h,ee)|0)+Math.imul(d,X)|0))<<13)|0;c=((o=o+Math.imul(d,ee)|0)+(i>>>13)|0)+(_e>>>26)|0,_e&=67108863,r=Math.imul(A,H),i=(i=Math.imul(A,q))+Math.imul(C,H)|0,o=Math.imul(C,q),r=r+Math.imul(S,G)|0,i=(i=i+Math.imul(S,z)|0)+Math.imul(M,G)|0,o=o+Math.imul(M,z)|0,r=r+Math.imul(_,K)|0,i=(i=i+Math.imul(_,Y)|0)+Math.imul(w,K)|0,o=o+Math.imul(w,Y)|0,r=r+Math.imul(b,J)|0,i=(i=i+Math.imul(b,Z)|0)+Math.imul(v,J)|0,o=o+Math.imul(v,Z)|0,r=r+Math.imul(p,X)|0,i=(i=i+Math.imul(p,ee)|0)+Math.imul(m,X)|0,o=o+Math.imul(m,ee)|0;var we=(c+(r=r+Math.imul(h,ne)|0)|0)+((8191&(i=(i=i+Math.imul(h,re)|0)+Math.imul(d,ne)|0))<<13)|0;c=((o=o+Math.imul(d,re)|0)+(i>>>13)|0)+(we>>>26)|0,we&=67108863,r=Math.imul(k,H),i=(i=Math.imul(k,q))+Math.imul(x,H)|0,o=Math.imul(x,q),r=r+Math.imul(A,G)|0,i=(i=i+Math.imul(A,z)|0)+Math.imul(C,G)|0,o=o+Math.imul(C,z)|0,r=r+Math.imul(S,K)|0,i=(i=i+Math.imul(S,Y)|0)+Math.imul(M,K)|0,o=o+Math.imul(M,Y)|0,r=r+Math.imul(_,J)|0,i=(i=i+Math.imul(_,Z)|0)+Math.imul(w,J)|0,o=o+Math.imul(w,Z)|0,r=r+Math.imul(b,X)|0,i=(i=i+Math.imul(b,ee)|0)+Math.imul(v,X)|0,o=o+Math.imul(v,ee)|0,r=r+Math.imul(p,ne)|0,i=(i=i+Math.imul(p,re)|0)+Math.imul(m,ne)|0,o=o+Math.imul(m,re)|0;var Ee=(c+(r=r+Math.imul(h,oe)|0)|0)+((8191&(i=(i=i+Math.imul(h,se)|0)+Math.imul(d,oe)|0))<<13)|0;c=((o=o+Math.imul(d,se)|0)+(i>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,r=Math.imul(I,H),i=(i=Math.imul(I,q))+Math.imul(R,H)|0,o=Math.imul(R,q),r=r+Math.imul(k,G)|0,i=(i=i+Math.imul(k,z)|0)+Math.imul(x,G)|0,o=o+Math.imul(x,z)|0,r=r+Math.imul(A,K)|0,i=(i=i+Math.imul(A,Y)|0)+Math.imul(C,K)|0,o=o+Math.imul(C,Y)|0,r=r+Math.imul(S,J)|0,i=(i=i+Math.imul(S,Z)|0)+Math.imul(M,J)|0,o=o+Math.imul(M,Z)|0,r=r+Math.imul(_,X)|0,i=(i=i+Math.imul(_,ee)|0)+Math.imul(w,X)|0,o=o+Math.imul(w,ee)|0,r=r+Math.imul(b,ne)|0,i=(i=i+Math.imul(b,re)|0)+Math.imul(v,ne)|0,o=o+Math.imul(v,re)|0,r=r+Math.imul(p,oe)|0,i=(i=i+Math.imul(p,se)|0)+Math.imul(m,oe)|0,o=o+Math.imul(m,se)|0;var Se=(c+(r=r+Math.imul(h,ue)|0)|0)+((8191&(i=(i=i+Math.imul(h,ce)|0)+Math.imul(d,ue)|0))<<13)|0;c=((o=o+Math.imul(d,ce)|0)+(i>>>13)|0)+(Se>>>26)|0,Se&=67108863,r=Math.imul(P,H),i=(i=Math.imul(P,q))+Math.imul(D,H)|0,o=Math.imul(D,q),r=r+Math.imul(I,G)|0,i=(i=i+Math.imul(I,z)|0)+Math.imul(R,G)|0,o=o+Math.imul(R,z)|0,r=r+Math.imul(k,K)|0,i=(i=i+Math.imul(k,Y)|0)+Math.imul(x,K)|0,o=o+Math.imul(x,Y)|0,r=r+Math.imul(A,J)|0,i=(i=i+Math.imul(A,Z)|0)+Math.imul(C,J)|0,o=o+Math.imul(C,Z)|0,r=r+Math.imul(S,X)|0,i=(i=i+Math.imul(S,ee)|0)+Math.imul(M,X)|0,o=o+Math.imul(M,ee)|0,r=r+Math.imul(_,ne)|0,i=(i=i+Math.imul(_,re)|0)+Math.imul(w,ne)|0,o=o+Math.imul(w,re)|0,r=r+Math.imul(b,oe)|0,i=(i=i+Math.imul(b,se)|0)+Math.imul(v,oe)|0,o=o+Math.imul(v,se)|0,r=r+Math.imul(p,ue)|0,i=(i=i+Math.imul(p,ce)|0)+Math.imul(m,ue)|0,o=o+Math.imul(m,ce)|0;var Me=(c+(r=r+Math.imul(h,he)|0)|0)+((8191&(i=(i=i+Math.imul(h,de)|0)+Math.imul(d,he)|0))<<13)|0;c=((o=o+Math.imul(d,de)|0)+(i>>>13)|0)+(Me>>>26)|0,Me&=67108863,r=Math.imul(L,H),i=(i=Math.imul(L,q))+Math.imul(F,H)|0,o=Math.imul(F,q),r=r+Math.imul(P,G)|0,i=(i=i+Math.imul(P,z)|0)+Math.imul(D,G)|0,o=o+Math.imul(D,z)|0,r=r+Math.imul(I,K)|0,i=(i=i+Math.imul(I,Y)|0)+Math.imul(R,K)|0,o=o+Math.imul(R,Y)|0,r=r+Math.imul(k,J)|0,i=(i=i+Math.imul(k,Z)|0)+Math.imul(x,J)|0,o=o+Math.imul(x,Z)|0,r=r+Math.imul(A,X)|0,i=(i=i+Math.imul(A,ee)|0)+Math.imul(C,X)|0,o=o+Math.imul(C,ee)|0,r=r+Math.imul(S,ne)|0,i=(i=i+Math.imul(S,re)|0)+Math.imul(M,ne)|0,o=o+Math.imul(M,re)|0,r=r+Math.imul(_,oe)|0,i=(i=i+Math.imul(_,se)|0)+Math.imul(w,oe)|0,o=o+Math.imul(w,se)|0,r=r+Math.imul(b,ue)|0,i=(i=i+Math.imul(b,ce)|0)+Math.imul(v,ue)|0,o=o+Math.imul(v,ce)|0,r=r+Math.imul(p,he)|0,i=(i=i+Math.imul(p,de)|0)+Math.imul(m,he)|0,o=o+Math.imul(m,de)|0;var Oe=(c+(r=r+Math.imul(h,pe)|0)|0)+((8191&(i=(i=i+Math.imul(h,me)|0)+Math.imul(d,pe)|0))<<13)|0;c=((o=o+Math.imul(d,me)|0)+(i>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,r=Math.imul(L,G),i=(i=Math.imul(L,z))+Math.imul(F,G)|0,o=Math.imul(F,z),r=r+Math.imul(P,K)|0,i=(i=i+Math.imul(P,Y)|0)+Math.imul(D,K)|0,o=o+Math.imul(D,Y)|0,r=r+Math.imul(I,J)|0,i=(i=i+Math.imul(I,Z)|0)+Math.imul(R,J)|0,o=o+Math.imul(R,Z)|0,r=r+Math.imul(k,X)|0,i=(i=i+Math.imul(k,ee)|0)+Math.imul(x,X)|0,o=o+Math.imul(x,ee)|0,r=r+Math.imul(A,ne)|0,i=(i=i+Math.imul(A,re)|0)+Math.imul(C,ne)|0,o=o+Math.imul(C,re)|0,r=r+Math.imul(S,oe)|0,i=(i=i+Math.imul(S,se)|0)+Math.imul(M,oe)|0,o=o+Math.imul(M,se)|0,r=r+Math.imul(_,ue)|0,i=(i=i+Math.imul(_,ce)|0)+Math.imul(w,ue)|0,o=o+Math.imul(w,ce)|0,r=r+Math.imul(b,he)|0,i=(i=i+Math.imul(b,de)|0)+Math.imul(v,he)|0,o=o+Math.imul(v,de)|0;var Ae=(c+(r=r+Math.imul(p,pe)|0)|0)+((8191&(i=(i=i+Math.imul(p,me)|0)+Math.imul(m,pe)|0))<<13)|0;c=((o=o+Math.imul(m,me)|0)+(i>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,r=Math.imul(L,K),i=(i=Math.imul(L,Y))+Math.imul(F,K)|0,o=Math.imul(F,Y),r=r+Math.imul(P,J)|0,i=(i=i+Math.imul(P,Z)|0)+Math.imul(D,J)|0,o=o+Math.imul(D,Z)|0,r=r+Math.imul(I,X)|0,i=(i=i+Math.imul(I,ee)|0)+Math.imul(R,X)|0,o=o+Math.imul(R,ee)|0,r=r+Math.imul(k,ne)|0,i=(i=i+Math.imul(k,re)|0)+Math.imul(x,ne)|0,o=o+Math.imul(x,re)|0,r=r+Math.imul(A,oe)|0,i=(i=i+Math.imul(A,se)|0)+Math.imul(C,oe)|0,o=o+Math.imul(C,se)|0,r=r+Math.imul(S,ue)|0,i=(i=i+Math.imul(S,ce)|0)+Math.imul(M,ue)|0,o=o+Math.imul(M,ce)|0,r=r+Math.imul(_,he)|0,i=(i=i+Math.imul(_,de)|0)+Math.imul(w,he)|0,o=o+Math.imul(w,de)|0;var Ce=(c+(r=r+Math.imul(b,pe)|0)|0)+((8191&(i=(i=i+Math.imul(b,me)|0)+Math.imul(v,pe)|0))<<13)|0;c=((o=o+Math.imul(v,me)|0)+(i>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,r=Math.imul(L,J),i=(i=Math.imul(L,Z))+Math.imul(F,J)|0,o=Math.imul(F,Z),r=r+Math.imul(P,X)|0,i=(i=i+Math.imul(P,ee)|0)+Math.imul(D,X)|0,o=o+Math.imul(D,ee)|0,r=r+Math.imul(I,ne)|0,i=(i=i+Math.imul(I,re)|0)+Math.imul(R,ne)|0,o=o+Math.imul(R,re)|0,r=r+Math.imul(k,oe)|0,i=(i=i+Math.imul(k,se)|0)+Math.imul(x,oe)|0,o=o+Math.imul(x,se)|0,r=r+Math.imul(A,ue)|0,i=(i=i+Math.imul(A,ce)|0)+Math.imul(C,ue)|0,o=o+Math.imul(C,ce)|0,r=r+Math.imul(S,he)|0,i=(i=i+Math.imul(S,de)|0)+Math.imul(M,he)|0,o=o+Math.imul(M,de)|0;var Te=(c+(r=r+Math.imul(_,pe)|0)|0)+((8191&(i=(i=i+Math.imul(_,me)|0)+Math.imul(w,pe)|0))<<13)|0;c=((o=o+Math.imul(w,me)|0)+(i>>>13)|0)+(Te>>>26)|0,Te&=67108863,r=Math.imul(L,X),i=(i=Math.imul(L,ee))+Math.imul(F,X)|0,o=Math.imul(F,ee),r=r+Math.imul(P,ne)|0,i=(i=i+Math.imul(P,re)|0)+Math.imul(D,ne)|0,o=o+Math.imul(D,re)|0,r=r+Math.imul(I,oe)|0,i=(i=i+Math.imul(I,se)|0)+Math.imul(R,oe)|0,o=o+Math.imul(R,se)|0,r=r+Math.imul(k,ue)|0,i=(i=i+Math.imul(k,ce)|0)+Math.imul(x,ue)|0,o=o+Math.imul(x,ce)|0,r=r+Math.imul(A,he)|0,i=(i=i+Math.imul(A,de)|0)+Math.imul(C,he)|0,o=o+Math.imul(C,de)|0;var ke=(c+(r=r+Math.imul(S,pe)|0)|0)+((8191&(i=(i=i+Math.imul(S,me)|0)+Math.imul(M,pe)|0))<<13)|0;c=((o=o+Math.imul(M,me)|0)+(i>>>13)|0)+(ke>>>26)|0,ke&=67108863,r=Math.imul(L,ne),i=(i=Math.imul(L,re))+Math.imul(F,ne)|0,o=Math.imul(F,re),r=r+Math.imul(P,oe)|0,i=(i=i+Math.imul(P,se)|0)+Math.imul(D,oe)|0,o=o+Math.imul(D,se)|0,r=r+Math.imul(I,ue)|0,i=(i=i+Math.imul(I,ce)|0)+Math.imul(R,ue)|0,o=o+Math.imul(R,ce)|0,r=r+Math.imul(k,he)|0,i=(i=i+Math.imul(k,de)|0)+Math.imul(x,he)|0,o=o+Math.imul(x,de)|0;var xe=(c+(r=r+Math.imul(A,pe)|0)|0)+((8191&(i=(i=i+Math.imul(A,me)|0)+Math.imul(C,pe)|0))<<13)|0;c=((o=o+Math.imul(C,me)|0)+(i>>>13)|0)+(xe>>>26)|0,xe&=67108863,r=Math.imul(L,oe),i=(i=Math.imul(L,se))+Math.imul(F,oe)|0,o=Math.imul(F,se),r=r+Math.imul(P,ue)|0,i=(i=i+Math.imul(P,ce)|0)+Math.imul(D,ue)|0,o=o+Math.imul(D,ce)|0,r=r+Math.imul(I,he)|0,i=(i=i+Math.imul(I,de)|0)+Math.imul(R,he)|0,o=o+Math.imul(R,de)|0;var je=(c+(r=r+Math.imul(k,pe)|0)|0)+((8191&(i=(i=i+Math.imul(k,me)|0)+Math.imul(x,pe)|0))<<13)|0;c=((o=o+Math.imul(x,me)|0)+(i>>>13)|0)+(je>>>26)|0,je&=67108863,r=Math.imul(L,ue),i=(i=Math.imul(L,ce))+Math.imul(F,ue)|0,o=Math.imul(F,ce),r=r+Math.imul(P,he)|0,i=(i=i+Math.imul(P,de)|0)+Math.imul(D,he)|0,o=o+Math.imul(D,de)|0;var Ie=(c+(r=r+Math.imul(I,pe)|0)|0)+((8191&(i=(i=i+Math.imul(I,me)|0)+Math.imul(R,pe)|0))<<13)|0;c=((o=o+Math.imul(R,me)|0)+(i>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,r=Math.imul(L,he),i=(i=Math.imul(L,de))+Math.imul(F,he)|0,o=Math.imul(F,de);var Re=(c+(r=r+Math.imul(P,pe)|0)|0)+((8191&(i=(i=i+Math.imul(P,me)|0)+Math.imul(D,pe)|0))<<13)|0;c=((o=o+Math.imul(D,me)|0)+(i>>>13)|0)+(Re>>>26)|0,Re&=67108863;var Ne=(c+(r=Math.imul(L,pe))|0)+((8191&(i=(i=Math.imul(L,me))+Math.imul(F,pe)|0))<<13)|0;return c=((o=Math.imul(F,me))+(i>>>13)|0)+(Ne>>>26)|0,Ne&=67108863,u[0]=ge,u[1]=be,u[2]=ve,u[3]=ye,u[4]=_e,u[5]=we,u[6]=Ee,u[7]=Se,u[8]=Me,u[9]=Oe,u[10]=Ae,u[11]=Ce,u[12]=Te,u[13]=ke,u[14]=xe,u[15]=je,u[16]=Ie,u[17]=Re,u[18]=Ne,0!==c&&(u[19]=c,n.length++),n};function m(e,t,n){return(new g).mulp(e,t,n)}function g(e,t){this.x=e,this.y=t}Math.imul||(p=f),o.prototype.mulTo=function(e,t){var n=this.length+e.length;return 10===this.length&&10===e.length?p(this,e,t):n<63?f(this,e,t):n<1024?function(e,t,n){n.negative=t.negative^e.negative,n.length=e.length+t.length;for(var r=0,i=0,o=0;o<n.length-1;o++){var s=i;i=0;for(var a=67108863&r,u=Math.min(o,t.length-1),c=Math.max(0,o-e.length+1);c<=u;c++){var l=o-c,h=(0|e.words[l])*(0|t.words[c]),d=67108863&h;a=67108863&(d=d+a|0),i+=(s=(s=s+(h/67108864|0)|0)+(d>>>26)|0)>>>26,s&=67108863}n.words[o]=a,r=s,s=i}return 0!==r?n.words[o]=r:n.length--,n.strip()}(this,e,t):m(this,e,t)},g.prototype.makeRBT=function(e){for(var t=new Array(e),n=o.prototype._countBits(e)-1,r=0;r<e;r++)t[r]=this.revBin(r,n,e);return t},g.prototype.revBin=function(e,t,n){if(0===e||e===n-1)return e;for(var r=0,i=0;i<t;i++)r|=(1&e)<<t-i-1,e>>=1;return r},g.prototype.permute=function(e,t,n,r,i,o){for(var s=0;s<o;s++)r[s]=t[e[s]],i[s]=n[e[s]]},g.prototype.transform=function(e,t,n,r,i,o){this.permute(o,e,t,n,r,i);for(var s=1;s<i;s<<=1)for(var a=s<<1,u=Math.cos(2*Math.PI/a),c=Math.sin(2*Math.PI/a),l=0;l<i;l+=a)for(var h=u,d=c,f=0;f<s;f++){var p=n[l+f],m=r[l+f],g=n[l+f+s],b=r[l+f+s],v=h*g-d*b;b=h*b+d*g,g=v,n[l+f]=p+g,r[l+f]=m+b,n[l+f+s]=p-g,r[l+f+s]=m-b,f!==a&&(v=u*h-c*d,d=u*d+c*h,h=v)}},g.prototype.guessLen13b=function(e,t){var n=1|Math.max(t,e),r=1&n,i=0;for(n=n/2|0;n;n>>>=1)i++;return 1<<i+1+r},g.prototype.conjugate=function(e,t,n){if(!(n<=1))for(var r=0;r<n/2;r++){var i=e[r];e[r]=e[n-r-1],e[n-r-1]=i,i=t[r],t[r]=-t[n-r-1],t[n-r-1]=-i}},g.prototype.normalize13b=function(e,t){for(var n=0,r=0;r<t/2;r++){var i=8192*Math.round(e[2*r+1]/t)+Math.round(e[2*r]/t)+n;e[r]=67108863&i,n=i<67108864?0:i/67108864|0}return e},g.prototype.convert13b=function(e,t,n,i){for(var o=0,s=0;s<t;s++)o+=0|e[s],n[2*s]=8191&o,o>>>=13,n[2*s+1]=8191&o,o>>>=13;for(s=2*t;s<i;++s)n[s]=0;r(0===o),r(0==(-8192&o))},g.prototype.stub=function(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=0;return t},g.prototype.mulp=function(e,t,n){var r=2*this.guessLen13b(e.length,t.length),i=this.makeRBT(r),o=this.stub(r),s=new Array(r),a=new Array(r),u=new Array(r),c=new Array(r),l=new Array(r),h=new Array(r),d=n.words;d.length=r,this.convert13b(e.words,e.length,s,r),this.convert13b(t.words,t.length,c,r),this.transform(s,o,a,u,r,i),this.transform(c,o,l,h,r,i);for(var f=0;f<r;f++){var p=a[f]*l[f]-u[f]*h[f];u[f]=a[f]*h[f]+u[f]*l[f],a[f]=p}return this.conjugate(a,u,r),this.transform(a,u,d,o,r,i),this.conjugate(d,o,r),this.normalize13b(d,r),n.negative=e.negative^t.negative,n.length=e.length+t.length,n.strip()},o.prototype.mul=function(e){var t=new o(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},o.prototype.mulf=function(e){var t=new o(null);return t.words=new Array(this.length+e.length),m(this,e,t)},o.prototype.imul=function(e){return this.clone().mulTo(e,this)},o.prototype.imuln=function(e){r("number"==typeof e),r(e<67108864);for(var t=0,n=0;n<this.length;n++){var i=(0|this.words[n])*e,o=(67108863&i)+(67108863&t);t>>=26,t+=i/67108864|0,t+=o>>>26,this.words[n]=67108863&o}return 0!==t&&(this.words[n]=t,this.length++),this},o.prototype.muln=function(e){return this.clone().imuln(e)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),n=0;n<t.length;n++){var r=n/26|0,i=n%26;t[n]=(e.words[r]&1<<i)>>>i}return t}(e);if(0===t.length)return new o(1);for(var n=this,r=0;r<t.length&&0===t[r];r++,n=n.sqr());if(++r<t.length)for(var i=n.sqr();r<t.length;r++,i=i.sqr())0!==t[r]&&(n=n.mul(i));return n},o.prototype.iushln=function(e){r("number"==typeof e&&e>=0);var t,n=e%26,i=(e-n)/26,o=67108863>>>26-n<<26-n;if(0!==n){var s=0;for(t=0;t<this.length;t++){var a=this.words[t]&o,u=(0|this.words[t])-a<<n;this.words[t]=u|s,s=a>>>26-n}s&&(this.words[t]=s,this.length++)}if(0!==i){for(t=this.length-1;t>=0;t--)this.words[t+i]=this.words[t];for(t=0;t<i;t++)this.words[t]=0;this.length+=i}return this.strip()},o.prototype.ishln=function(e){return r(0===this.negative),this.iushln(e)},o.prototype.iushrn=function(e,t,n){var i;r("number"==typeof e&&e>=0),i=t?(t-t%26)/26:0;var o=e%26,s=Math.min((e-o)/26,this.length),a=67108863^67108863>>>o<<o,u=n;if(i-=s,i=Math.max(0,i),u){for(var c=0;c<s;c++)u.words[c]=this.words[c];u.length=s}if(0===s);else if(this.length>s)for(this.length-=s,c=0;c<this.length;c++)this.words[c]=this.words[c+s];else this.words[0]=0,this.length=1;var l=0;for(c=this.length-1;c>=0&&(0!==l||c>=i);c--){var h=0|this.words[c];this.words[c]=l<<26-o|h>>>o,l=h&a}return u&&0!==l&&(u.words[u.length++]=l),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(e,t,n){return r(0===this.negative),this.iushrn(e,t,n)},o.prototype.shln=function(e){return this.clone().ishln(e)},o.prototype.ushln=function(e){return this.clone().iushln(e)},o.prototype.shrn=function(e){return this.clone().ishrn(e)},o.prototype.ushrn=function(e){return this.clone().iushrn(e)},o.prototype.testn=function(e){r("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26,i=1<<t;return!(this.length<=n)&&!!(this.words[n]&i)},o.prototype.imaskn=function(e){r("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26;if(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=n)return this;if(0!==t&&n++,this.length=Math.min(n,this.length),0!==t){var i=67108863^67108863>>>t<<t;this.words[this.length-1]&=i}return this.strip()},o.prototype.maskn=function(e){return this.clone().imaskn(e)},o.prototype.iaddn=function(e){return r("number"==typeof e),r(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},o.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},o.prototype.isubn=function(e){if(r("number"==typeof e),r(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this.strip()},o.prototype.addn=function(e){return this.clone().iaddn(e)},o.prototype.subn=function(e){return this.clone().isubn(e)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(e,t,n){var i,o,s=e.length+n;this._expand(s);var a=0;for(i=0;i<e.length;i++){o=(0|this.words[i+n])+a;var u=(0|e.words[i])*t;a=((o-=67108863&u)>>26)-(u/67108864|0),this.words[i+n]=67108863&o}for(;i<this.length-n;i++)a=(o=(0|this.words[i+n])+a)>>26,this.words[i+n]=67108863&o;if(0===a)return this.strip();for(r(-1===a),a=0,i=0;i<this.length;i++)a=(o=-(0|this.words[i])+a)>>26,this.words[i]=67108863&o;return this.negative=1,this.strip()},o.prototype._wordDiv=function(e,t){var n=(this.length,e.length),r=this.clone(),i=e,s=0|i.words[i.length-1];0!==(n=26-this._countBits(s))&&(i=i.ushln(n),r.iushln(n),s=0|i.words[i.length-1]);var a,u=r.length-i.length;if("mod"!==t){(a=new o(null)).length=u+1,a.words=new Array(a.length);for(var c=0;c<a.length;c++)a.words[c]=0}var l=r.clone()._ishlnsubmul(i,1,u);0===l.negative&&(r=l,a&&(a.words[u]=1));for(var h=u-1;h>=0;h--){var d=67108864*(0|r.words[i.length+h])+(0|r.words[i.length+h-1]);for(d=Math.min(d/s|0,67108863),r._ishlnsubmul(i,d,h);0!==r.negative;)d--,r.negative=0,r._ishlnsubmul(i,1,h),r.isZero()||(r.negative^=1);a&&(a.words[h]=d)}return a&&a.strip(),r.strip(),"div"!==t&&0!==n&&r.iushrn(n),{div:a||null,mod:r}},o.prototype.divmod=function(e,t,n){return r(!e.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===e.negative?(a=this.neg().divmod(e,t),"mod"!==t&&(i=a.div.neg()),"div"!==t&&(s=a.mod.neg(),n&&0!==s.negative&&s.iadd(e)),{div:i,mod:s}):0===this.negative&&0!==e.negative?(a=this.divmod(e.neg(),t),"mod"!==t&&(i=a.div.neg()),{div:i,mod:a.mod}):0!=(this.negative&e.negative)?(a=this.neg().divmod(e.neg(),t),"div"!==t&&(s=a.mod.neg(),n&&0!==s.negative&&s.isub(e)),{div:a.div,mod:s}):e.length>this.length||this.cmp(e)<0?{div:new o(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new o(this.modn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new o(this.modn(e.words[0]))}:this._wordDiv(e,t);var i,s,a},o.prototype.div=function(e){return this.divmod(e,"div",!1).div},o.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},o.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},o.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var n=0!==t.div.negative?t.mod.isub(e):t.mod,r=e.ushrn(1),i=e.andln(1),o=n.cmp(r);return o<0||1===i&&0===o?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},o.prototype.modn=function(e){r(e<=67108863);for(var t=(1<<26)%e,n=0,i=this.length-1;i>=0;i--)n=(t*n+(0|this.words[i]))%e;return n},o.prototype.idivn=function(e){r(e<=67108863);for(var t=0,n=this.length-1;n>=0;n--){var i=(0|this.words[n])+67108864*t;this.words[n]=i/e|0,t=i%e}return this.strip()},o.prototype.divn=function(e){return this.clone().idivn(e)},o.prototype.egcd=function(e){r(0===e.negative),r(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i=new o(1),s=new o(0),a=new o(0),u=new o(1),c=0;t.isEven()&&n.isEven();)t.iushrn(1),n.iushrn(1),++c;for(var l=n.clone(),h=t.clone();!t.isZero();){for(var d=0,f=1;0==(t.words[0]&f)&&d<26;++d,f<<=1);if(d>0)for(t.iushrn(d);d-- >0;)(i.isOdd()||s.isOdd())&&(i.iadd(l),s.isub(h)),i.iushrn(1),s.iushrn(1);for(var p=0,m=1;0==(n.words[0]&m)&&p<26;++p,m<<=1);if(p>0)for(n.iushrn(p);p-- >0;)(a.isOdd()||u.isOdd())&&(a.iadd(l),u.isub(h)),a.iushrn(1),u.iushrn(1);t.cmp(n)>=0?(t.isub(n),i.isub(a),s.isub(u)):(n.isub(t),a.isub(i),u.isub(s))}return{a:a,b:u,gcd:n.iushln(c)}},o.prototype._invmp=function(e){r(0===e.negative),r(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i,s=new o(1),a=new o(0),u=n.clone();t.cmpn(1)>0&&n.cmpn(1)>0;){for(var c=0,l=1;0==(t.words[0]&l)&&c<26;++c,l<<=1);if(c>0)for(t.iushrn(c);c-- >0;)s.isOdd()&&s.iadd(u),s.iushrn(1);for(var h=0,d=1;0==(n.words[0]&d)&&h<26;++h,d<<=1);if(h>0)for(n.iushrn(h);h-- >0;)a.isOdd()&&a.iadd(u),a.iushrn(1);t.cmp(n)>=0?(t.isub(n),s.isub(a)):(n.isub(t),a.isub(s))}return(i=0===t.cmpn(1)?s:a).cmpn(0)<0&&i.iadd(e),i},o.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),n=e.clone();t.negative=0,n.negative=0;for(var r=0;t.isEven()&&n.isEven();r++)t.iushrn(1),n.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;n.isEven();)n.iushrn(1);var i=t.cmp(n);if(i<0){var o=t;t=n,n=o}else if(0===i||0===n.cmpn(1))break;t.isub(n)}return n.iushln(r)},o.prototype.invm=function(e){return this.egcd(e).a.umod(e)},o.prototype.isEven=function(){return 0==(1&this.words[0])},o.prototype.isOdd=function(){return 1==(1&this.words[0])},o.prototype.andln=function(e){return this.words[0]&e},o.prototype.bincn=function(e){r("number"==typeof e);var t=e%26,n=(e-t)/26,i=1<<t;if(this.length<=n)return this._expand(n+1),this.words[n]|=i,this;for(var o=i,s=n;0!==o&&s<this.length;s++){var a=0|this.words[s];o=(a+=o)>>>26,a&=67108863,this.words[s]=a}return 0!==o&&(this.words[s]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(e){var t,n=e<0;if(0!==this.negative&&!n)return-1;if(0===this.negative&&n)return 1;if(this.strip(),this.length>1)t=1;else{n&&(e=-e),r(e<=67108863,"Number is too big");var i=0|this.words[0];t=i===e?0:i<e?-1:1}return 0!==this.negative?0|-t:t},o.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},o.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,n=this.length-1;n>=0;n--){var r=0|this.words[n],i=0|e.words[n];if(r!==i){r<i?t=-1:r>i&&(t=1);break}}return t},o.prototype.gtn=function(e){return 1===this.cmpn(e)},o.prototype.gt=function(e){return 1===this.cmp(e)},o.prototype.gten=function(e){return this.cmpn(e)>=0},o.prototype.gte=function(e){return this.cmp(e)>=0},o.prototype.ltn=function(e){return-1===this.cmpn(e)},o.prototype.lt=function(e){return-1===this.cmp(e)},o.prototype.lten=function(e){return this.cmpn(e)<=0},o.prototype.lte=function(e){return this.cmp(e)<=0},o.prototype.eqn=function(e){return 0===this.cmpn(e)},o.prototype.eq=function(e){return 0===this.cmp(e)},o.red=function(e){return new S(e)},o.prototype.toRed=function(e){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},o.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(e){return this.red=e,this},o.prototype.forceRed=function(e){return r(!this.red,"Already a number in reduction context"),this._forceRed(e)},o.prototype.redAdd=function(e){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},o.prototype.redIAdd=function(e){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},o.prototype.redSub=function(e){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},o.prototype.redISub=function(e){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},o.prototype.redShl=function(e){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},o.prototype.redMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},o.prototype.redIMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},o.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(e){return r(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var b={k256:null,p224:null,p192:null,p25519:null};function v(e,t){this.name=e,this.p=new o(t,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function y(){v.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function _(){v.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function w(){v.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function E(){v.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function S(e){if("string"==typeof e){var t=o._prime(e);this.m=t.p,this.prime=t}else r(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function M(e){S.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}v.prototype._tmp=function(){var e=new o(null);return e.words=new Array(Math.ceil(this.n/13)),e},v.prototype.ireduce=function(e){var t,n=e;do{this.split(n,this.tmp),t=(n=(n=this.imulK(n)).iadd(this.tmp)).bitLength()}while(t>this.n);var r=t<this.n?-1:n.ucmp(this.p);return 0===r?(n.words[0]=0,n.length=1):r>0?n.isub(this.p):void 0!==n.strip?n.strip():n._strip(),n},v.prototype.split=function(e,t){e.iushrn(this.n,0,t)},v.prototype.imulK=function(e){return e.imul(this.k)},i(y,v),y.prototype.split=function(e,t){for(var n=Math.min(e.length,9),r=0;r<n;r++)t.words[r]=e.words[r];if(t.length=n,e.length<=9)return e.words[0]=0,void(e.length=1);var i=e.words[9];for(t.words[t.length++]=4194303&i,r=10;r<e.length;r++){var o=0|e.words[r];e.words[r-10]=(4194303&o)<<4|i>>>22,i=o}i>>>=22,e.words[r-10]=i,0===i&&e.length>10?e.length-=10:e.length-=9},y.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,n=0;n<e.length;n++){var r=0|e.words[n];t+=977*r,e.words[n]=67108863&t,t=64*r+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},i(_,v),i(w,v),i(E,v),E.prototype.imulK=function(e){for(var t=0,n=0;n<e.length;n++){var r=19*(0|e.words[n])+t,i=67108863&r;r>>>=26,e.words[n]=i,t=r}return 0!==t&&(e.words[e.length++]=t),e},o._prime=function(e){if(b[e])return b[e];var t;if("k256"===e)t=new y;else if("p224"===e)t=new _;else if("p192"===e)t=new w;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new E}return b[e]=t,t},S.prototype._verify1=function(e){r(0===e.negative,"red works only with positives"),r(e.red,"red works only with red numbers")},S.prototype._verify2=function(e,t){r(0==(e.negative|t.negative),"red works only with positives"),r(e.red&&e.red===t.red,"red works only with red numbers")},S.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):e.umod(this.m)._forceRed(this)},S.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},S.prototype.add=function(e,t){this._verify2(e,t);var n=e.add(t);return n.cmp(this.m)>=0&&n.isub(this.m),n._forceRed(this)},S.prototype.iadd=function(e,t){this._verify2(e,t);var n=e.iadd(t);return n.cmp(this.m)>=0&&n.isub(this.m),n},S.prototype.sub=function(e,t){this._verify2(e,t);var n=e.sub(t);return n.cmpn(0)<0&&n.iadd(this.m),n._forceRed(this)},S.prototype.isub=function(e,t){this._verify2(e,t);var n=e.isub(t);return n.cmpn(0)<0&&n.iadd(this.m),n},S.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},S.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},S.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},S.prototype.isqr=function(e){return this.imul(e,e.clone())},S.prototype.sqr=function(e){return this.mul(e,e)},S.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(r(t%2==1),3===t){var n=this.m.add(new o(1)).iushrn(2);return this.pow(e,n)}for(var i=this.m.subn(1),s=0;!i.isZero()&&0===i.andln(1);)s++,i.iushrn(1);r(!i.isZero());var a=new o(1).toRed(this),u=a.redNeg(),c=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new o(2*l*l).toRed(this);0!==this.pow(l,c).cmp(u);)l.redIAdd(u);for(var h=this.pow(l,i),d=this.pow(e,i.addn(1).iushrn(1)),f=this.pow(e,i),p=s;0!==f.cmp(a);){for(var m=f,g=0;0!==m.cmp(a);g++)m=m.redSqr();r(g<p);var b=this.pow(h,new o(1).iushln(p-g-1));d=d.redMul(b),h=b.redSqr(),f=f.redMul(h),p=g}return d},S.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},S.prototype.pow=function(e,t){if(t.isZero())return new o(1).toRed(this);if(0===t.cmpn(1))return e.clone();var n=new Array(16);n[0]=new o(1).toRed(this),n[1]=e;for(var r=2;r<n.length;r++)n[r]=this.mul(n[r-1],e);var i=n[0],s=0,a=0,u=t.bitLength()%26;for(0===u&&(u=26),r=t.length-1;r>=0;r--){for(var c=t.words[r],l=u-1;l>=0;l--){var h=c>>l&1;i!==n[0]&&(i=this.sqr(i)),0!==h||0!==s?(s<<=1,s|=h,(4===++a||0===r&&0===l)&&(i=this.mul(i,n[s]),a=0,s=0)):a=0}u=26}return i},S.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},S.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},o.mont=function(e){return new M(e)},i(M,S),M.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},M.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},M.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var n=e.imul(t),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=n.isub(r).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},M.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new o(0)._forceRed(this);var n=e.mul(t),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=n.isub(r).iushrn(this.shift),s=i;return i.cmp(this.m)>=0?s=i.isub(this.m):i.cmpn(0)<0&&(s=i.iadd(this.m)),s._forceRed(this)},M.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(e,this)}).call(this,n(34)(e))},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(55);var i=n(66);function o(e){return function(e){if(Array.isArray(e))return Object(r.a)(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Object(i.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},function(e,t,n){var r;r=function(){return function(){var e={7757:function(e,t,n){e.exports=n(5666)},9662:function(e,t,n){var r=n(614),i=n(6330);e.exports=function(e){if(r(e))return e;throw TypeError(i(e)+" is not a function")}},9483:function(e,t,n){var r=n(4411),i=n(6330);e.exports=function(e){if(r(e))return e;throw TypeError(i(e)+" is not a constructor")}},6077:function(e,t,n){var r=n(614);e.exports=function(e){if("object"==typeof e||r(e))return e;throw TypeError("Can't set "+String(e)+" as a prototype")}},1223:function(e,t,n){var r=n(5112),i=n(30),o=n(3070),s=r("unscopables"),a=Array.prototype;null==a[s]&&o.f(a,s,{configurable:!0,value:i(null)}),e.exports=function(e){a[s][e]=!0}},1530:function(e,t,n){"use strict";var r=n(8710).charAt;e.exports=function(e,t,n){return t+(n?r(e,t).length:1)}},5787:function(e){e.exports=function(e,t,n){if(e instanceof t)return e;throw TypeError("Incorrect "+(n?n+" ":"")+"invocation")}},9670:function(e,t,n){var r=n(111);e.exports=function(e){if(r(e))return e;throw TypeError(String(e)+" is not an object")}},8533:function(e,t,n){"use strict";var r=n(2092).forEach,i=n(9341)("forEach");e.exports=i?[].forEach:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}},8457:function(e,t,n){"use strict";var r=n(9974),i=n(7908),o=n(3411),s=n(7659),a=n(4411),u=n(7466),c=n(6135),l=n(8554),h=n(1246);e.exports=function(e){var t=i(e),n=a(this),d=arguments.length,f=d>1?arguments[1]:void 0,p=void 0!==f;p&&(f=r(f,d>2?arguments[2]:void 0,2));var m,g,b,v,y,_,w=h(t),E=0;if(!w||this==Array&&s(w))for(m=u(t.length),g=n?new this(m):Array(m);m>E;E++)_=p?f(t[E],E):t[E],c(g,E,_);else for(y=(v=l(t,w)).next,g=n?new this:[];!(b=y.call(v)).done;E++)_=p?o(v,f,[b.value,E],!0):b.value,c(g,E,_);return g.length=E,g}},1318:function(e,t,n){var r=n(5656),i=n(7466),o=n(1400),s=function(e){return function(t,n,s){var a,u=r(t),c=i(u.length),l=o(s,c);if(e&&n!=n){for(;c>l;)if((a=u[l++])!=a)return!0}else for(;c>l;l++)if((e||l in u)&&u[l]===n)return e||l||0;return!e&&-1}};e.exports={includes:s(!0),indexOf:s(!1)}},2092:function(e,t,n){var r=n(9974),i=n(8361),o=n(7908),s=n(7466),a=n(5417),u=[].push,c=function(e){var t=1==e,n=2==e,c=3==e,l=4==e,h=6==e,d=7==e,f=5==e||h;return function(p,m,g,b){for(var v,y,_=o(p),w=i(_),E=r(m,g,3),S=s(w.length),M=0,O=b||a,A=t?O(p,S):n||d?O(p,0):void 0;S>M;M++)if((f||M in w)&&(y=E(v=w[M],M,_),e))if(t)A[M]=y;else if(y)switch(e){case 3:return!0;case 5:return v;case 6:return M;case 2:u.call(A,v)}else switch(e){case 4:return!1;case 7:u.call(A,v)}return h?-1:c||l?l:A}};e.exports={forEach:c(0),map:c(1),filter:c(2),some:c(3),every:c(4),find:c(5),findIndex:c(6),filterReject:c(7)}},1194:function(e,t,n){var r=n(7293),i=n(5112),o=n(7392),s=i("species");e.exports=function(e){return o>=51||!r((function(){var t=[];return(t.constructor={})[s]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},9341:function(e,t,n){"use strict";var r=n(7293);e.exports=function(e,t){var n=[][e];return!!n&&r((function(){n.call(null,t||function(){throw 1},1)}))}},7475:function(e,t,n){var r=n(3157),i=n(4411),o=n(111),s=n(5112)("species");e.exports=function(e){var t;return r(e)&&(t=e.constructor,(i(t)&&(t===Array||r(t.prototype))||o(t)&&null===(t=t[s]))&&(t=void 0)),void 0===t?Array:t}},5417:function(e,t,n){var r=n(7475);e.exports=function(e,t){return new(r(e))(0===t?0:t)}},3411:function(e,t,n){var r=n(9670),i=n(9212);e.exports=function(e,t,n,o){try{return o?t(r(n)[0],n[1]):t(n)}catch(t){i(e,"throw",t)}}},7072:function(e,t,n){var r=n(5112)("iterator"),i=!1;try{var o=0,s={next:function(){return{done:!!o++}},return:function(){i=!0}};s[r]=function(){return this},Array.from(s,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!i)return!1;var n=!1;try{var o={};o[r]=function(){return{next:function(){return{done:n=!0}}}},e(o)}catch(e){}return n}},4326:function(e){var t={}.toString;e.exports=function(e){return t.call(e).slice(8,-1)}},648:function(e,t,n){var r=n(1694),i=n(614),o=n(4326),s=n(5112)("toStringTag"),a="Arguments"==o(function(){return arguments}());e.exports=r?o:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),s))?n:a?o(t):"Object"==(r=o(t))&&i(t.callee)?"Arguments":r}},9920:function(e,t,n){var r=n(6656),i=n(3887),o=n(1236),s=n(3070);e.exports=function(e,t){for(var n=i(t),a=s.f,u=o.f,c=0;c<n.length;c++){var l=n[c];r(e,l)||a(e,l,u(t,l))}}},4964:function(e,t,n){var r=n(5112)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[r]=!1,"/./"[e](t)}catch(e){}}return!1}},8544:function(e,t,n){var r=n(7293);e.exports=!r((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},4994:function(e,t,n){"use strict";var r=n(3383).IteratorPrototype,i=n(30),o=n(9114),s=n(8003),a=n(7497),u=function(){return this};e.exports=function(e,t,n){var c=t+" Iterator";return e.prototype=i(r,{next:o(1,n)}),s(e,c,!1,!0),a[c]=u,e}},8880:function(e,t,n){var r=n(9781),i=n(3070),o=n(9114);e.exports=r?function(e,t,n){return i.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},9114:function(e){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},6135:function(e,t,n){"use strict";var r=n(4948),i=n(3070),o=n(9114);e.exports=function(e,t,n){var s=r(t);s in e?i.f(e,s,o(0,n)):e[s]=n}},654:function(e,t,n){"use strict";var r=n(2109),i=n(1913),o=n(6530),s=n(614),a=n(4994),u=n(9518),c=n(7674),l=n(8003),h=n(8880),d=n(1320),f=n(5112),p=n(7497),m=n(3383),g=o.PROPER,b=o.CONFIGURABLE,v=m.IteratorPrototype,y=m.BUGGY_SAFARI_ITERATORS,_=f("iterator"),w=function(){return this};e.exports=function(e,t,n,o,f,m,E){a(n,t,o);var S,M,O,A=function(e){if(e===f&&j)return j;if(!y&&e in k)return k[e];switch(e){case"keys":case"values":case"entries":return function(){return new n(this,e)}}return function(){return new n(this)}},C=t+" Iterator",T=!1,k=e.prototype,x=k[_]||k["@@iterator"]||f&&k[f],j=!y&&x||A(f),I="Array"==t&&k.entries||x;if(I&&(S=u(I.call(new e)))!==Object.prototype&&S.next&&(i||u(S)===v||(c?c(S,v):s(S[_])||d(S,_,w)),l(S,C,!0,!0),i&&(p[C]=w)),g&&"values"==f&&x&&"values"!==x.name&&(!i&&b?h(k,"name","values"):(T=!0,j=function(){return x.call(this)})),f)if(M={values:A("values"),keys:m?j:A("keys"),entries:A("entries")},E)for(O in M)(y||T||!(O in k))&&d(k,O,M[O]);else r({target:t,proto:!0,forced:y||T},M);return i&&!E||k[_]===j||d(k,_,j,{name:f}),p[t]=j,M}},7235:function(e,t,n){var r=n(857),i=n(6656),o=n(6061),s=n(3070).f;e.exports=function(e){var t=r.Symbol||(r.Symbol={});i(t,e)||s(t,e,{value:o.f(e)})}},9781:function(e,t,n){var r=n(7293);e.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},317:function(e,t,n){var r=n(7854),i=n(111),o=r.document,s=i(o)&&i(o.createElement);e.exports=function(e){return s?o.createElement(e):{}}},8324:function(e){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},8509:function(e,t,n){var r=n(317)("span").classList,i=r&&r.constructor&&r.constructor.prototype;e.exports=i===Object.prototype?void 0:i},7871:function(e){e.exports="object"==typeof window},1528:function(e,t,n){var r=n(8113),i=n(7854);e.exports=/ipad|iphone|ipod/i.test(r)&&void 0!==i.Pebble},6833:function(e,t,n){var r=n(8113);e.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(r)},5268:function(e,t,n){var r=n(4326),i=n(7854);e.exports="process"==r(i.process)},1036:function(e,t,n){var r=n(8113);e.exports=/web0s(?!.*chrome)/i.test(r)},8113:function(e,t,n){var r=n(5005);e.exports=r("navigator","userAgent")||""},7392:function(e,t,n){var r,i,o=n(7854),s=n(8113),a=o.process,u=o.Deno,c=a&&a.versions||u&&u.version,l=c&&c.v8;l?i=(r=l.split("."))[0]<4?1:r[0]+r[1]:s&&(!(r=s.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=s.match(/Chrome\/(\d+)/))&&(i=r[1]),e.exports=i&&+i},748:function(e){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},2109:function(e,t,n){var r=n(7854),i=n(1236).f,o=n(8880),s=n(1320),a=n(3505),u=n(9920),c=n(4705);e.exports=function(e,t){var n,l,h,d,f,p=e.target,m=e.global,g=e.stat;if(n=m?r:g?r[p]||a(p,{}):(r[p]||{}).prototype)for(l in t){if(d=t[l],h=e.noTargetGet?(f=i(n,l))&&f.value:n[l],!c(m?l:p+(g?".":"#")+l,e.forced)&&void 0!==h){if(typeof d==typeof h)continue;u(d,h)}(e.sham||h&&h.sham)&&o(d,"sham",!0),s(n,l,d,e)}}},7293:function(e){e.exports=function(e){try{return!!e()}catch(e){return!0}}},7007:function(e,t,n){"use strict";n(4916);var r=n(1320),i=n(2261),o=n(7293),s=n(5112),a=n(8880),u=s("species"),c=RegExp.prototype;e.exports=function(e,t,n,l){var h=s(e),d=!o((function(){var t={};return t[h]=function(){return 7},7!=""[e](t)})),f=d&&!o((function(){var t=!1,n=/a/;return"split"===e&&((n={}).constructor={},n.constructor[u]=function(){return n},n.flags="",n[h]=/./[h]),n.exec=function(){return t=!0,null},n[h](""),!t}));if(!d||!f||n){var p=/./[h],m=t(h,""[e],(function(e,t,n,r,o){var s=t.exec;return s===i||s===c.exec?d&&!o?{done:!0,value:p.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}}));r(String.prototype,e,m[0]),r(c,h,m[1])}l&&a(c[h],"sham",!0)}},9974:function(e,t,n){var r=n(9662);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},6530:function(e,t,n){var r=n(9781),i=n(6656),o=Function.prototype,s=r&&Object.getOwnPropertyDescriptor,a=i(o,"name"),u=a&&"something"===function(){}.name,c=a&&(!r||r&&s(o,"name").configurable);e.exports={EXISTS:a,PROPER:u,CONFIGURABLE:c}},5005:function(e,t,n){var r=n(7854),i=n(614),o=function(e){return i(e)?e:void 0};e.exports=function(e,t){return arguments.length<2?o(r[e]):r[e]&&r[e][t]}},1246:function(e,t,n){var r=n(648),i=n(8173),o=n(7497),s=n(5112)("iterator");e.exports=function(e){if(null!=e)return i(e,s)||i(e,"@@iterator")||o[r(e)]}},8554:function(e,t,n){var r=n(9662),i=n(9670),o=n(1246);e.exports=function(e,t){var n=arguments.length<2?o(e):t;if(r(n))return i(n.call(e));throw TypeError(String(e)+" is not iterable")}},8173:function(e,t,n){var r=n(9662);e.exports=function(e,t){var n=e[t];return null==n?void 0:r(n)}},647:function(e,t,n){var r=n(7908),i=Math.floor,o="".replace,s=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,a=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,n,u,c,l){var h=n+e.length,d=u.length,f=a;return void 0!==c&&(c=r(c),f=s),o.call(l,f,(function(r,o){var s;switch(o.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,n);case"'":return t.slice(h);case"<":s=c[o.slice(1,-1)];break;default:var a=+o;if(0===a)return r;if(a>d){var l=i(a/10);return 0===l?r:l<=d?void 0===u[l-1]?o.charAt(1):u[l-1]+o.charAt(1):r}s=u[a-1]}return void 0===s?"":s}))}},7854:function(e,t,n){var r=function(e){return e&&e.Math==Math&&e};e.exports=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof n.g&&n.g)||function(){return this}()||Function("return this")()},6656:function(e,t,n){var r=n(7908),i={}.hasOwnProperty;e.exports=Object.hasOwn||function(e,t){return i.call(r(e),t)}},3501:function(e){e.exports={}},842:function(e,t,n){var r=n(7854);e.exports=function(e,t){var n=r.console;n&&n.error&&(1===arguments.length?n.error(e):n.error(e,t))}},490:function(e,t,n){var r=n(5005);e.exports=r("document","documentElement")},4664:function(e,t,n){var r=n(9781),i=n(7293),o=n(317);e.exports=!r&&!i((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},8361:function(e,t,n){var r=n(7293),i=n(4326),o="".split;e.exports=r((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==i(e)?o.call(e,""):Object(e)}:Object},2788:function(e,t,n){var r=n(614),i=n(5465),o=Function.toString;r(i.inspectSource)||(i.inspectSource=function(e){return o.call(e)}),e.exports=i.inspectSource},9909:function(e,t,n){var r,i,o,s=n(8536),a=n(7854),u=n(111),c=n(8880),l=n(6656),h=n(5465),d=n(6200),f=n(3501),p=a.WeakMap;if(s||h.state){var m=h.state||(h.state=new p),g=m.get,b=m.has,v=m.set;r=function(e,t){if(b.call(m,e))throw new TypeError("Object already initialized");return t.facade=e,v.call(m,e,t),t},i=function(e){return g.call(m,e)||{}},o=function(e){return b.call(m,e)}}else{var y=d("state");f[y]=!0,r=function(e,t){if(l(e,y))throw new TypeError("Object already initialized");return t.facade=e,c(e,y,t),t},i=function(e){return l(e,y)?e[y]:{}},o=function(e){return l(e,y)}}e.exports={set:r,get:i,has:o,enforce:function(e){return o(e)?i(e):r(e,{})},getterFor:function(e){return function(t){var n;if(!u(t)||(n=i(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}}}},7659:function(e,t,n){var r=n(5112),i=n(7497),o=r("iterator"),s=Array.prototype;e.exports=function(e){return void 0!==e&&(i.Array===e||s[o]===e)}},3157:function(e,t,n){var r=n(4326);e.exports=Array.isArray||function(e){return"Array"==r(e)}},614:function(e){e.exports=function(e){return"function"==typeof e}},4411:function(e,t,n){var r=n(7293),i=n(614),o=n(648),s=n(5005),a=n(2788),u=[],c=s("Reflect","construct"),l=/^\s*(?:class|function)\b/,h=l.exec,d=!l.exec((function(){})),f=function(e){if(!i(e))return!1;try{return c(Object,u,e),!0}catch(e){return!1}};e.exports=!c||r((function(){var e;return f(f.call)||!f(Object)||!f((function(){e=!0}))||e}))?function(e){if(!i(e))return!1;switch(o(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}return d||!!h.call(l,a(e))}:f},4705:function(e,t,n){var r=n(7293),i=n(614),o=/#|\.prototype\./,s=function(e,t){var n=u[a(e)];return n==l||n!=c&&(i(t)?r(t):!!t)},a=s.normalize=function(e){return String(e).replace(o,".").toLowerCase()},u=s.data={},c=s.NATIVE="N",l=s.POLYFILL="P";e.exports=s},111:function(e,t,n){var r=n(614);e.exports=function(e){return"object"==typeof e?null!==e:r(e)}},1913:function(e){e.exports=!1},7850:function(e,t,n){var r=n(111),i=n(4326),o=n(5112)("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==i(e))}},2190:function(e,t,n){var r=n(614),i=n(5005),o=n(3307);e.exports=o?function(e){return"symbol"==typeof e}:function(e){var t=i("Symbol");return r(t)&&Object(e)instanceof t}},408:function(e,t,n){var r=n(9670),i=n(7659),o=n(7466),s=n(9974),a=n(8554),u=n(1246),c=n(9212),l=function(e,t){this.stopped=e,this.result=t};e.exports=function(e,t,n){var h,d,f,p,m,g,b,v=n&&n.that,y=!(!n||!n.AS_ENTRIES),_=!(!n||!n.IS_ITERATOR),w=!(!n||!n.INTERRUPTED),E=s(t,v,1+y+w),S=function(e){return h&&c(h,"normal",e),new l(!0,e)},M=function(e){return y?(r(e),w?E(e[0],e[1],S):E(e[0],e[1])):w?E(e,S):E(e)};if(_)h=e;else{if(!(d=u(e)))throw TypeError(String(e)+" is not iterable");if(i(d)){for(f=0,p=o(e.length);p>f;f++)if((m=M(e[f]))&&m instanceof l)return m;return new l(!1)}h=a(e,d)}for(g=h.next;!(b=g.call(h)).done;){try{m=M(b.value)}catch(e){c(h,"throw",e)}if("object"==typeof m&&m&&m instanceof l)return m}return new l(!1)}},9212:function(e,t,n){var r=n(9670),i=n(8173);e.exports=function(e,t,n){var o,s;r(e);try{if(!(o=i(e,"return"))){if("throw"===t)throw n;return n}o=o.call(e)}catch(e){s=!0,o=e}if("throw"===t)throw n;if(s)throw o;return r(o),n}},3383:function(e,t,n){"use strict";var r,i,o,s=n(7293),a=n(614),u=n(30),c=n(9518),l=n(1320),h=n(5112),d=n(1913),f=h("iterator"),p=!1;[].keys&&("next"in(o=[].keys())?(i=c(c(o)))!==Object.prototype&&(r=i):p=!0),null==r||s((function(){var e={};return r[f].call(e)!==e}))?r={}:d&&(r=u(r)),a(r[f])||l(r,f,(function(){return this})),e.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:p}},7497:function(e){e.exports={}},5948:function(e,t,n){var r,i,o,s,a,u,c,l,h=n(7854),d=n(1236).f,f=n(261).set,p=n(6833),m=n(1528),g=n(1036),b=n(5268),v=h.MutationObserver||h.WebKitMutationObserver,y=h.document,_=h.process,w=h.Promise,E=d(h,"queueMicrotask"),S=E&&E.value;S||(r=function(){var e,t;for(b&&(e=_.domain)&&e.exit();i;){t=i.fn,i=i.next;try{t()}catch(e){throw i?s():o=void 0,e}}o=void 0,e&&e.enter()},p||b||g||!v||!y?!m&&w&&w.resolve?((c=w.resolve(void 0)).constructor=w,l=c.then,s=function(){l.call(c,r)}):s=b?function(){_.nextTick(r)}:function(){f.call(h,r)}:(a=!0,u=y.createTextNode(""),new v(r).observe(u,{characterData:!0}),s=function(){u.data=a=!a})),e.exports=S||function(e){var t={fn:e,next:void 0};o&&(o.next=t),i||(i=t,s()),o=t}},3366:function(e,t,n){var r=n(7854);e.exports=r.Promise},133:function(e,t,n){var r=n(7392),i=n(7293);e.exports=!!Object.getOwnPropertySymbols&&!i((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&r&&r<41}))},590:function(e,t,n){var r=n(7293),i=n(5112),o=n(1913),s=i("iterator");e.exports=!r((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,n="";return e.pathname="c%20d",t.forEach((function(e,r){t.delete("b"),n+=r+e})),o&&!e.toJSON||!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[s]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host}))},8536:function(e,t,n){var r=n(7854),i=n(614),o=n(2788),s=r.WeakMap;e.exports=i(s)&&/native code/.test(o(s))},8523:function(e,t,n){"use strict";var r=n(9662),i=function(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=r(t),this.reject=r(n)};e.exports.f=function(e){return new i(e)}},3929:function(e,t,n){var r=n(7850);e.exports=function(e){if(r(e))throw TypeError("The method doesn't accept regular expressions");return e}},30:function(e,t,n){var r,i=n(9670),o=n(6048),s=n(748),a=n(3501),u=n(490),c=n(317),l=n(6200),h=l("IE_PROTO"),d=function(){},f=function(e){return"<script>"+e+"<\/script>"},p=function(e){e.write(f("")),e.close();var t=e.parentWindow.Object;return e=null,t},m=function(){try{r=new ActiveXObject("htmlfile")}catch(e){}var e,t;m="undefined"!=typeof document?document.domain&&r?p(r):((t=c("iframe")).style.display="none",u.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(f("document.F=Object")),e.close(),e.F):p(r);for(var n=s.length;n--;)delete m.prototype[s[n]];return m()};a[h]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(d.prototype=i(e),n=new d,d.prototype=null,n[h]=e):n=m(),void 0===t?n:o(n,t)}},6048:function(e,t,n){var r=n(9781),i=n(3070),o=n(9670),s=n(1956);e.exports=r?Object.defineProperties:function(e,t){o(e);for(var n,r=s(t),a=r.length,u=0;a>u;)i.f(e,n=r[u++],t[n]);return e}},3070:function(e,t,n){var r=n(9781),i=n(4664),o=n(9670),s=n(4948),a=Object.defineProperty;t.f=r?a:function(e,t,n){if(o(e),t=s(t),o(n),i)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},1236:function(e,t,n){var r=n(9781),i=n(5296),o=n(9114),s=n(5656),a=n(4948),u=n(6656),c=n(4664),l=Object.getOwnPropertyDescriptor;t.f=r?l:function(e,t){if(e=s(e),t=a(t),c)try{return l(e,t)}catch(e){}if(u(e,t))return o(!i.f.call(e,t),e[t])}},1156:function(e,t,n){var r=n(5656),i=n(8006).f,o={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return s&&"[object Window]"==o.call(e)?function(e){try{return i(e)}catch(e){return s.slice()}}(e):i(r(e))}},8006:function(e,t,n){var r=n(6324),i=n(748).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},5181:function(e,t){t.f=Object.getOwnPropertySymbols},9518:function(e,t,n){var r=n(6656),i=n(614),o=n(7908),s=n(6200),a=n(8544),u=s("IE_PROTO"),c=Object.prototype;e.exports=a?Object.getPrototypeOf:function(e){var t=o(e);if(r(t,u))return t[u];var n=t.constructor;return i(n)&&t instanceof n?n.prototype:t instanceof Object?c:null}},6324:function(e,t,n){var r=n(6656),i=n(5656),o=n(1318).indexOf,s=n(3501);e.exports=function(e,t){var n,a=i(e),u=0,c=[];for(n in a)!r(s,n)&&r(a,n)&&c.push(n);for(;t.length>u;)r(a,n=t[u++])&&(~o(c,n)||c.push(n));return c}},1956:function(e,t,n){var r=n(6324),i=n(748);e.exports=Object.keys||function(e){return r(e,i)}},5296:function(e,t){"use strict";var n={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,i=r&&!n.call({1:2},1);t.f=i?function(e){var t=r(this,e);return!!t&&t.enumerable}:n},7674:function(e,t,n){var r=n(9670),i=n(6077);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),t=n instanceof Array}catch(e){}return function(n,o){return r(n),i(o),t?e.call(n,o):n.__proto__=o,n}}():void 0)},288:function(e,t,n){"use strict";var r=n(1694),i=n(648);e.exports=r?{}.toString:function(){return"[object "+i(this)+"]"}},2140:function(e,t,n){var r=n(614),i=n(111);e.exports=function(e,t){var n,o;if("string"===t&&r(n=e.toString)&&!i(o=n.call(e)))return o;if(r(n=e.valueOf)&&!i(o=n.call(e)))return o;if("string"!==t&&r(n=e.toString)&&!i(o=n.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},3887:function(e,t,n){var r=n(5005),i=n(8006),o=n(5181),s=n(9670);e.exports=r("Reflect","ownKeys")||function(e){var t=i.f(s(e)),n=o.f;return n?t.concat(n(e)):t}},857:function(e,t,n){var r=n(7854);e.exports=r},2534:function(e){e.exports=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}}},9478:function(e,t,n){var r=n(9670),i=n(111),o=n(8523);e.exports=function(e,t){if(r(e),i(t)&&t.constructor===e)return t;var n=o.f(e);return(0,n.resolve)(t),n.promise}},2248:function(e,t,n){var r=n(1320);e.exports=function(e,t,n){for(var i in t)r(e,i,t[i],n);return e}},1320:function(e,t,n){var r=n(7854),i=n(614),o=n(6656),s=n(8880),a=n(3505),u=n(2788),c=n(9909),l=n(6530).CONFIGURABLE,h=c.get,d=c.enforce,f=String(String).split("String");(e.exports=function(e,t,n,u){var c,h=!!u&&!!u.unsafe,p=!!u&&!!u.enumerable,m=!!u&&!!u.noTargetGet,g=u&&void 0!==u.name?u.name:t;i(n)&&("Symbol("===String(g).slice(0,7)&&(g="["+String(g).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!o(n,"name")||l&&n.name!==g)&&s(n,"name",g),(c=d(n)).source||(c.source=f.join("string"==typeof g?g:""))),e!==r?(h?!m&&e[t]&&(p=!0):delete e[t],p?e[t]=n:s(e,t,n)):p?e[t]=n:a(t,n)})(Function.prototype,"toString",(function(){return i(this)&&h(this).source||u(this)}))},7651:function(e,t,n){var r=n(9670),i=n(614),o=n(4326),s=n(2261);e.exports=function(e,t){var n=e.exec;if(i(n)){var a=n.call(e,t);return null!==a&&r(a),a}if("RegExp"===o(e))return s.call(e,t);throw TypeError("RegExp#exec called on incompatible receiver")}},2261:function(e,t,n){"use strict";var r,i,o=n(1340),s=n(7066),a=n(2999),u=n(2309),c=n(30),l=n(9909).get,h=n(9441),d=n(7168),f=RegExp.prototype.exec,p=u("native-string-replace",String.prototype.replace),m=f,g=(r=/a/,i=/b*/g,f.call(r,"a"),f.call(i,"a"),0!==r.lastIndex||0!==i.lastIndex),b=a.UNSUPPORTED_Y||a.BROKEN_CARET,v=void 0!==/()??/.exec("")[1];(g||v||b||h||d)&&(m=function(e){var t,n,r,i,a,u,h,d=this,y=l(d),_=o(e),w=y.raw;if(w)return w.lastIndex=d.lastIndex,t=m.call(w,_),d.lastIndex=w.lastIndex,t;var E=y.groups,S=b&&d.sticky,M=s.call(d),O=d.source,A=0,C=_;if(S&&(-1===(M=M.replace("y","")).indexOf("g")&&(M+="g"),C=_.slice(d.lastIndex),d.lastIndex>0&&(!d.multiline||d.multiline&&"\n"!==_.charAt(d.lastIndex-1))&&(O="(?: "+O+")",C=" "+C,A++),n=new RegExp("^(?:"+O+")",M)),v&&(n=new RegExp("^"+O+"$(?!\\s)",M)),g&&(r=d.lastIndex),i=f.call(S?n:d,C),S?i?(i.input=i.input.slice(A),i[0]=i[0].slice(A),i.index=d.lastIndex,d.lastIndex+=i[0].length):d.lastIndex=0:g&&i&&(d.lastIndex=d.global?i.index+i[0].length:r),v&&i&&i.length>1&&p.call(i[0],n,(function(){for(a=1;a<arguments.length-2;a++)void 0===arguments[a]&&(i[a]=void 0)})),i&&E)for(i.groups=u=c(null),a=0;a<E.length;a++)u[(h=E[a])[0]]=i[h[1]];return i}),e.exports=m},7066:function(e,t,n){"use strict";var r=n(9670);e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},2999:function(e,t,n){var r=n(7293),i=n(7854).RegExp;t.UNSUPPORTED_Y=r((function(){var e=i("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),t.BROKEN_CARET=r((function(){var e=i("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},9441:function(e,t,n){var r=n(7293),i=n(7854).RegExp;e.exports=r((function(){var e=i(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)}))},7168:function(e,t,n){var r=n(7293),i=n(7854).RegExp;e.exports=r((function(){var e=i("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")}))},4488:function(e){e.exports=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e}},3505:function(e,t,n){var r=n(7854);e.exports=function(e,t){try{Object.defineProperty(r,e,{value:t,configurable:!0,writable:!0})}catch(n){r[e]=t}return t}},6340:function(e,t,n){"use strict";var r=n(5005),i=n(3070),o=n(5112),s=n(9781),a=o("species");e.exports=function(e){var t=r(e),n=i.f;s&&t&&!t[a]&&n(t,a,{configurable:!0,get:function(){return this}})}},8003:function(e,t,n){var r=n(3070).f,i=n(6656),o=n(5112)("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,o)&&r(e,o,{configurable:!0,value:t})}},6200:function(e,t,n){var r=n(2309),i=n(9711),o=r("keys");e.exports=function(e){return o[e]||(o[e]=i(e))}},5465:function(e,t,n){var r=n(7854),i=n(3505),o=r["__core-js_shared__"]||i("__core-js_shared__",{});e.exports=o},2309:function(e,t,n){var r=n(1913),i=n(5465);(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.18.0",mode:r?"pure":"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})},6707:function(e,t,n){var r=n(9670),i=n(9483),o=n(5112)("species");e.exports=function(e,t){var n,s=r(e).constructor;return void 0===s||null==(n=r(s)[o])?t:i(n)}},8710:function(e,t,n){var r=n(9958),i=n(1340),o=n(4488),s=function(e){return function(t,n){var s,a,u=i(o(t)),c=r(n),l=u.length;return c<0||c>=l?e?"":void 0:(s=u.charCodeAt(c))<55296||s>56319||c+1===l||(a=u.charCodeAt(c+1))<56320||a>57343?e?u.charAt(c):s:e?u.slice(c,c+2):a-56320+(s-55296<<10)+65536}};e.exports={codeAt:s(!1),charAt:s(!0)}},261:function(e,t,n){var r,i,o,s,a=n(7854),u=n(614),c=n(7293),l=n(9974),h=n(490),d=n(317),f=n(6833),p=n(5268),m=a.setImmediate,g=a.clearImmediate,b=a.process,v=a.MessageChannel,y=a.Dispatch,_=0,w={};try{r=a.location}catch(e){}var E=function(e){if(w.hasOwnProperty(e)){var t=w[e];delete w[e],t()}},S=function(e){return function(){E(e)}},M=function(e){E(e.data)},O=function(e){a.postMessage(String(e),r.protocol+"//"+r.host)};m&&g||(m=function(e){for(var t=[],n=arguments.length,r=1;n>r;)t.push(arguments[r++]);return w[++_]=function(){(u(e)?e:Function(e)).apply(void 0,t)},i(_),_},g=function(e){delete w[e]},p?i=function(e){b.nextTick(S(e))}:y&&y.now?i=function(e){y.now(S(e))}:v&&!f?(s=(o=new v).port2,o.port1.onmessage=M,i=l(s.postMessage,s,1)):a.addEventListener&&u(a.postMessage)&&!a.importScripts&&r&&"file:"!==r.protocol&&!c(O)?(i=O,a.addEventListener("message",M,!1)):i="onreadystatechange"in d("script")?function(e){h.appendChild(d("script")).onreadystatechange=function(){h.removeChild(this),E(e)}}:function(e){setTimeout(S(e),0)}),e.exports={set:m,clear:g}},1400:function(e,t,n){var r=n(9958),i=Math.max,o=Math.min;e.exports=function(e,t){var n=r(e);return n<0?i(n+t,0):o(n,t)}},5656:function(e,t,n){var r=n(8361),i=n(4488);e.exports=function(e){return r(i(e))}},9958:function(e){var t=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:t)(e)}},7466:function(e,t,n){var r=n(9958),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},7908:function(e,t,n){var r=n(4488);e.exports=function(e){return Object(r(e))}},7593:function(e,t,n){var r=n(111),i=n(2190),o=n(8173),s=n(2140),a=n(5112)("toPrimitive");e.exports=function(e,t){if(!r(e)||i(e))return e;var n,u=o(e,a);if(u){if(void 0===t&&(t="default"),n=u.call(e,t),!r(n)||i(n))return n;throw TypeError("Can't convert object to primitive value")}return void 0===t&&(t="number"),s(e,t)}},4948:function(e,t,n){var r=n(7593),i=n(2190);e.exports=function(e){var t=r(e,"string");return i(t)?t:String(t)}},1694:function(e,t,n){var r={};r[n(5112)("toStringTag")]="z",e.exports="[object z]"===String(r)},1340:function(e,t,n){var r=n(648);e.exports=function(e){if("Symbol"===r(e))throw TypeError("Cannot convert a Symbol value to a string");return String(e)}},6330:function(e){e.exports=function(e){try{return String(e)}catch(e){return"Object"}}},9711:function(e){var t=0,n=Math.random();e.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++t+n).toString(36)}},3307:function(e,t,n){var r=n(133);e.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},6061:function(e,t,n){var r=n(5112);t.f=r},5112:function(e,t,n){var r=n(7854),i=n(2309),o=n(6656),s=n(9711),a=n(133),u=n(3307),c=i("wks"),l=r.Symbol,h=u?l:l&&l.withoutSetter||s;e.exports=function(e){return o(c,e)&&(a||"string"==typeof c[e])||(a&&o(l,e)?c[e]=l[e]:c[e]=h("Symbol."+e)),c[e]}},2222:function(e,t,n){"use strict";var r=n(2109),i=n(7293),o=n(3157),s=n(111),a=n(7908),u=n(7466),c=n(6135),l=n(5417),h=n(1194),d=n(5112),f=n(7392),p=d("isConcatSpreadable"),m=f>=51||!i((function(){var e=[];return e[p]=!1,e.concat()[0]!==e})),g=h("concat"),b=function(e){if(!s(e))return!1;var t=e[p];return void 0!==t?!!t:o(e)};r({target:"Array",proto:!0,forced:!m||!g},{concat:function(e){var t,n,r,i,o,s=a(this),h=l(s,0),d=0;for(t=-1,r=arguments.length;t<r;t++)if(b(o=-1===t?s:arguments[t])){if(d+(i=u(o.length))>9007199254740991)throw TypeError("Maximum allowed index exceeded");for(n=0;n<i;n++,d++)n in o&&c(h,d,o[n])}else{if(d>=9007199254740991)throw TypeError("Maximum allowed index exceeded");c(h,d++,o)}return h.length=d,h}})},7327:function(e,t,n){"use strict";var r=n(2109),i=n(2092).filter;r({target:"Array",proto:!0,forced:!n(1194)("filter")},{filter:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},1038:function(e,t,n){var r=n(2109),i=n(8457);r({target:"Array",stat:!0,forced:!n(7072)((function(e){Array.from(e)}))},{from:i})},6699:function(e,t,n){"use strict";var r=n(2109),i=n(1318).includes,o=n(1223);r({target:"Array",proto:!0},{includes:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),o("includes")},6992:function(e,t,n){"use strict";var r=n(5656),i=n(1223),o=n(7497),s=n(9909),a=n(654),u=s.set,c=s.getterFor("Array Iterator");e.exports=a(Array,"Array",(function(e,t){u(this,{type:"Array Iterator",target:r(e),index:0,kind:t})}),(function(){var e=c(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:t[r],done:!1}:{value:[r,t[r]],done:!1}}),"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},1249:function(e,t,n){"use strict";var r=n(2109),i=n(2092).map;r({target:"Array",proto:!0,forced:!n(1194)("map")},{map:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},7042:function(e,t,n){"use strict";var r=n(2109),i=n(3157),o=n(4411),s=n(111),a=n(1400),u=n(7466),c=n(5656),l=n(6135),h=n(5112),d=n(1194)("slice"),f=h("species"),p=[].slice,m=Math.max;r({target:"Array",proto:!0,forced:!d},{slice:function(e,t){var n,r,h,d=c(this),g=u(d.length),b=a(e,g),v=a(void 0===t?g:t,g);if(i(d)&&(n=d.constructor,(o(n)&&(n===Array||i(n.prototype))||s(n)&&null===(n=n[f]))&&(n=void 0),n===Array||void 0===n))return p.call(d,b,v);for(r=new(void 0===n?Array:n)(m(v-b,0)),h=0;b<v;b++,h++)b in d&&l(r,h,d[b]);return r.length=h,r}})},8309:function(e,t,n){var r=n(9781),i=n(6530).EXISTS,o=n(3070).f,s=Function.prototype,a=s.toString,u=/^\s*function ([^ (]*)/;r&&!i&&o(s,"name",{configurable:!0,get:function(){try{return a.call(this).match(u)[1]}catch(e){return""}}})},5003:function(e,t,n){var r=n(2109),i=n(7293),o=n(5656),s=n(1236).f,a=n(9781),u=i((function(){s(1)}));r({target:"Object",stat:!0,forced:!a||u,sham:!a},{getOwnPropertyDescriptor:function(e,t){return s(o(e),t)}})},9337:function(e,t,n){var r=n(2109),i=n(9781),o=n(3887),s=n(5656),a=n(1236),u=n(6135);r({target:"Object",stat:!0,sham:!i},{getOwnPropertyDescriptors:function(e){for(var t,n,r=s(e),i=a.f,c=o(r),l={},h=0;c.length>h;)void 0!==(n=i(r,t=c[h++]))&&u(l,t,n);return l}})},7941:function(e,t,n){var r=n(2109),i=n(7908),o=n(1956);r({target:"Object",stat:!0,forced:n(7293)((function(){o(1)}))},{keys:function(e){return o(i(e))}})},1539:function(e,t,n){var r=n(1694),i=n(1320),o=n(288);r||i(Object.prototype,"toString",o,{unsafe:!0})},8674:function(e,t,n){"use strict";var r,i,o,s,a=n(2109),u=n(1913),c=n(7854),l=n(5005),h=n(3366),d=n(1320),f=n(2248),p=n(7674),m=n(8003),g=n(6340),b=n(9662),v=n(614),y=n(111),_=n(5787),w=n(2788),E=n(408),S=n(7072),M=n(6707),O=n(261).set,A=n(5948),C=n(9478),T=n(842),k=n(8523),x=n(2534),j=n(9909),I=n(4705),R=n(5112),N=n(7871),P=n(5268),D=n(7392),U=R("species"),L="Promise",F=j.get,B=j.set,H=j.getterFor(L),q=h&&h.prototype,V=h,G=q,z=c.TypeError,W=c.document,K=c.process,Y=k.f,Q=Y,J=!!(W&&W.createEvent&&c.dispatchEvent),Z=v(c.PromiseRejectionEvent),$=!1,X=I(L,(function(){var e=w(V),t=e!==String(V);if(!t&&66===D)return!0;if(u&&!G.finally)return!0;if(D>=51&&/native code/.test(e))return!1;var n=new V((function(e){e(1)})),r=function(e){e((function(){}),(function(){}))};return(n.constructor={})[U]=r,!($=n.then((function(){}))instanceof r)||!t&&N&&!Z})),ee=X||!S((function(e){V.all(e).catch((function(){}))})),te=function(e){var t;return!(!y(e)||!v(t=e.then))&&t},ne=function(e,t){if(!e.notified){e.notified=!0;var n=e.reactions;A((function(){for(var r=e.value,i=1==e.state,o=0;n.length>o;){var s,a,u,c=n[o++],l=i?c.ok:c.fail,h=c.resolve,d=c.reject,f=c.domain;try{l?(i||(2===e.rejection&&se(e),e.rejection=1),!0===l?s=r:(f&&f.enter(),s=l(r),f&&(f.exit(),u=!0)),s===c.promise?d(z("Promise-chain cycle")):(a=te(s))?a.call(s,h,d):h(s)):d(r)}catch(e){f&&!u&&f.exit(),d(e)}}e.reactions=[],e.notified=!1,t&&!e.rejection&&ie(e)}))}},re=function(e,t,n){var r,i;J?((r=W.createEvent("Event")).promise=t,r.reason=n,r.initEvent(e,!1,!0),c.dispatchEvent(r)):r={promise:t,reason:n},!Z&&(i=c["on"+e])?i(r):"unhandledrejection"===e&&T("Unhandled promise rejection",n)},ie=function(e){O.call(c,(function(){var t,n=e.facade,r=e.value;if(oe(e)&&(t=x((function(){P?K.emit("unhandledRejection",r,n):re("unhandledrejection",n,r)})),e.rejection=P||oe(e)?2:1,t.error))throw t.value}))},oe=function(e){return 1!==e.rejection&&!e.parent},se=function(e){O.call(c,(function(){var t=e.facade;P?K.emit("rejectionHandled",t):re("rejectionhandled",t,e.value)}))},ae=function(e,t,n){return function(r){e(t,r,n)}},ue=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=2,ne(e,!0))},ce=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw z("Promise can't be resolved itself");var r=te(t);r?A((function(){var n={done:!1};try{r.call(t,ae(ce,n,e),ae(ue,n,e))}catch(t){ue(n,t,e)}})):(e.value=t,e.state=1,ne(e,!1))}catch(t){ue({done:!1},t,e)}}};if(X&&(G=(V=function(e){_(this,V,L),b(e),r.call(this);var t=F(this);try{e(ae(ce,t),ae(ue,t))}catch(e){ue(t,e)}}).prototype,(r=function(e){B(this,{type:L,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=f(G,{then:function(e,t){var n=H(this),r=Y(M(this,V));return r.ok=!v(e)||e,r.fail=v(t)&&t,r.domain=P?K.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&ne(n,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),i=function(){var e=new r,t=F(e);this.promise=e,this.resolve=ae(ce,t),this.reject=ae(ue,t)},k.f=Y=function(e){return e===V||e===o?new i(e):Q(e)},!u&&v(h)&&q!==Object.prototype)){s=q.then,$||(d(q,"then",(function(e,t){var n=this;return new V((function(e,t){s.call(n,e,t)})).then(e,t)}),{unsafe:!0}),d(q,"catch",G.catch,{unsafe:!0}));try{delete q.constructor}catch(e){}p&&p(q,G)}a({global:!0,wrap:!0,forced:X},{Promise:V}),m(V,L,!1,!0),g(L),o=l(L),a({target:L,stat:!0,forced:X},{reject:function(e){var t=Y(this);return t.reject.call(void 0,e),t.promise}}),a({target:L,stat:!0,forced:u||X},{resolve:function(e){return C(u&&this===o?V:this,e)}}),a({target:L,stat:!0,forced:ee},{all:function(e){var t=this,n=Y(t),r=n.resolve,i=n.reject,o=x((function(){var n=b(t.resolve),o=[],s=0,a=1;E(e,(function(e){var u=s++,c=!1;o.push(void 0),a++,n.call(t,e).then((function(e){c||(c=!0,o[u]=e,--a||r(o))}),i)})),--a||r(o)}));return o.error&&i(o.value),n.promise},race:function(e){var t=this,n=Y(t),r=n.reject,i=x((function(){var i=b(t.resolve);E(e,(function(e){i.call(t,e).then(n.resolve,r)}))}));return i.error&&r(i.value),n.promise}})},4916:function(e,t,n){"use strict";var r=n(2109),i=n(2261);r({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},9714:function(e,t,n){"use strict";var r=n(6530).PROPER,i=n(1320),o=n(9670),s=n(1340),a=n(7293),u=n(7066),c=RegExp.prototype,l=c.toString,h=a((function(){return"/a/b"!=l.call({source:"a",flags:"b"})})),d=r&&"toString"!=l.name;(h||d)&&i(RegExp.prototype,"toString",(function(){var e=o(this),t=s(e.source),n=e.flags;return"/"+t+"/"+s(void 0===n&&e instanceof RegExp&&!("flags"in c)?u.call(e):n)}),{unsafe:!0})},2023:function(e,t,n){"use strict";var r=n(2109),i=n(3929),o=n(4488),s=n(1340);r({target:"String",proto:!0,forced:!n(4964)("includes")},{includes:function(e){return!!~s(o(this)).indexOf(s(i(e)),arguments.length>1?arguments[1]:void 0)}})},8783:function(e,t,n){"use strict";var r=n(8710).charAt,i=n(1340),o=n(9909),s=n(654),a=o.set,u=o.getterFor("String Iterator");s(String,"String",(function(e){a(this,{type:"String Iterator",string:i(e),index:0})}),(function(){var e,t=u(this),n=t.string,i=t.index;return i>=n.length?{value:void 0,done:!0}:(e=r(n,i),t.index+=e.length,{value:e,done:!1})}))},5306:function(e,t,n){"use strict";var r=n(7007),i=n(7293),o=n(9670),s=n(614),a=n(9958),u=n(7466),c=n(1340),l=n(4488),h=n(1530),d=n(8173),f=n(647),p=n(7651),m=n(5112)("replace"),g=Math.max,b=Math.min,v="$0"==="a".replace(/./,"$0"),y=!!/./[m]&&""===/./[m]("a","$0");r("replace",(function(e,t,n){var r=y?"$":"$0";return[function(e,n){var r=l(this),i=null==e?void 0:d(e,m);return i?i.call(e,r,n):t.call(c(r),e,n)},function(e,i){var l=o(this),d=c(e);if("string"==typeof i&&-1===i.indexOf(r)&&-1===i.indexOf("$<")){var m=n(t,l,d,i);if(m.done)return m.value}var v=s(i);v||(i=c(i));var y=l.global;if(y){var _=l.unicode;l.lastIndex=0}for(var w=[];;){var E=p(l,d);if(null===E)break;if(w.push(E),!y)break;""===c(E[0])&&(l.lastIndex=h(d,u(l.lastIndex),_))}for(var S,M="",O=0,A=0;A<w.length;A++){E=w[A];for(var C=c(E[0]),T=g(b(a(E.index),d.length),0),k=[],x=1;x<E.length;x++)k.push(void 0===(S=E[x])?S:String(S));var j=E.groups;if(v){var I=[C].concat(k,T,d);void 0!==j&&I.push(j);var R=c(i.apply(void 0,I))}else R=f(C,d,T,k,j,i);T>=O&&(M+=d.slice(O,T)+R,O=T+C.length)}return M+d.slice(O)}]}),!!i((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}))||!v||y)},3123:function(e,t,n){"use strict";var r=n(7007),i=n(7850),o=n(9670),s=n(4488),a=n(6707),u=n(1530),c=n(7466),l=n(1340),h=n(8173),d=n(7651),f=n(2261),p=n(2999),m=n(7293),g=p.UNSUPPORTED_Y,b=[].push,v=Math.min;r("split",(function(e,t,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,n){var r=l(s(this)),o=void 0===n?4294967295:n>>>0;if(0===o)return[];if(void 0===e)return[r];if(!i(e))return t.call(r,e,o);for(var a,u,c,h=[],d=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),p=0,m=new RegExp(e.source,d+"g");(a=f.call(m,r))&&!((u=m.lastIndex)>p&&(h.push(r.slice(p,a.index)),a.length>1&&a.index<r.length&&b.apply(h,a.slice(1)),c=a[0].length,p=u,h.length>=o));)m.lastIndex===a.index&&m.lastIndex++;return p===r.length?!c&&m.test("")||h.push(""):h.push(r.slice(p)),h.length>o?h.slice(0,o):h}:"0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:t.call(this,e,n)}:t,[function(t,n){var i=s(this),o=null==t?void 0:h(t,e);return o?o.call(t,i,n):r.call(l(i),t,n)},function(e,i){var s=o(this),h=l(e),f=n(r,s,h,i,r!==t);if(f.done)return f.value;var p=a(s,RegExp),m=s.unicode,b=(s.ignoreCase?"i":"")+(s.multiline?"m":"")+(s.unicode?"u":"")+(g?"g":"y"),y=new p(g?"^(?:"+s.source+")":s,b),_=void 0===i?4294967295:i>>>0;if(0===_)return[];if(0===h.length)return null===d(y,h)?[h]:[];for(var w=0,E=0,S=[];E<h.length;){y.lastIndex=g?0:E;var M,O=d(y,g?h.slice(E):h);if(null===O||(M=v(c(y.lastIndex+(g?E:0)),h.length))===w)E=u(h,E,m);else{if(S.push(h.slice(w,E)),S.length===_)return S;for(var A=1;A<=O.length-1;A++)if(S.push(O[A]),S.length===_)return S;E=w=M}}return S.push(h.slice(w)),S}]}),!!m((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]})),g)},6755:function(e,t,n){"use strict";var r,i=n(2109),o=n(1236).f,s=n(7466),a=n(1340),u=n(3929),c=n(4488),l=n(4964),h=n(1913),d="".startsWith,f=Math.min,p=l("startsWith");i({target:"String",proto:!0,forced:!(!h&&!p&&(r=o(String.prototype,"startsWith"),r&&!r.writable)||p)},{startsWith:function(e){var t=a(c(this));u(e);var n=s(f(arguments.length>1?arguments[1]:void 0,t.length)),r=a(e);return d?d.call(t,r,n):t.slice(n,n+r.length)===r}})},1817:function(e,t,n){"use strict";var r=n(2109),i=n(9781),o=n(7854),s=n(6656),a=n(614),u=n(111),c=n(3070).f,l=n(9920),h=o.Symbol;if(i&&a(h)&&(!("description"in h.prototype)||void 0!==h().description)){var d={},f=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof f?new h(e):void 0===e?h():h(e);return""===e&&(d[t]=!0),t};l(f,h);var p=f.prototype=h.prototype;p.constructor=f;var m=p.toString,g="Symbol(test)"==String(h("test")),b=/^Symbol\((.*)\)[^)]+$/;c(p,"description",{configurable:!0,get:function(){var e=u(this)?this.valueOf():this,t=m.call(e);if(s(d,e))return"";var n=g?t.slice(7,-1):t.replace(b,"$1");return""===n?void 0:n}}),r({global:!0,forced:!0},{Symbol:f})}},2165:function(e,t,n){n(7235)("iterator")},2526:function(e,t,n){"use strict";var r=n(2109),i=n(7854),o=n(5005),s=n(1913),a=n(9781),u=n(133),c=n(7293),l=n(6656),h=n(3157),d=n(614),f=n(111),p=n(2190),m=n(9670),g=n(7908),b=n(5656),v=n(4948),y=n(1340),_=n(9114),w=n(30),E=n(1956),S=n(8006),M=n(1156),O=n(5181),A=n(1236),C=n(3070),T=n(5296),k=n(1320),x=n(2309),j=n(6200),I=n(3501),R=n(9711),N=n(5112),P=n(6061),D=n(7235),U=n(8003),L=n(9909),F=n(2092).forEach,B=j("hidden"),H=N("toPrimitive"),q=L.set,V=L.getterFor("Symbol"),G=Object.prototype,z=i.Symbol,W=o("JSON","stringify"),K=A.f,Y=C.f,Q=M.f,J=T.f,Z=x("symbols"),$=x("op-symbols"),X=x("string-to-symbol-registry"),ee=x("symbol-to-string-registry"),te=x("wks"),ne=i.QObject,re=!ne||!ne.prototype||!ne.prototype.findChild,ie=a&&c((function(){return 7!=w(Y({},"a",{get:function(){return Y(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=K(G,t);r&&delete G[t],Y(e,t,n),r&&e!==G&&Y(G,t,r)}:Y,oe=function(e,t){var n=Z[e]=w(z.prototype);return q(n,{type:"Symbol",tag:e,description:t}),a||(n.description=t),n},se=function(e,t,n){e===G&&se($,t,n),m(e);var r=v(t);return m(n),l(Z,r)?(n.enumerable?(l(e,B)&&e[B][r]&&(e[B][r]=!1),n=w(n,{enumerable:_(0,!1)})):(l(e,B)||Y(e,B,_(1,{})),e[B][r]=!0),ie(e,r,n)):Y(e,r,n)},ae=function(e,t){m(e);var n=b(t),r=E(n).concat(he(n));return F(r,(function(t){a&&!ue.call(n,t)||se(e,t,n[t])})),e},ue=function(e){var t=v(e),n=J.call(this,t);return!(this===G&&l(Z,t)&&!l($,t))&&(!(n||!l(this,t)||!l(Z,t)||l(this,B)&&this[B][t])||n)},ce=function(e,t){var n=b(e),r=v(t);if(n!==G||!l(Z,r)||l($,r)){var i=K(n,r);return!i||!l(Z,r)||l(n,B)&&n[B][r]||(i.enumerable=!0),i}},le=function(e){var t=Q(b(e)),n=[];return F(t,(function(e){l(Z,e)||l(I,e)||n.push(e)})),n},he=function(e){var t=e===G,n=Q(t?$:b(e)),r=[];return F(n,(function(e){!l(Z,e)||t&&!l(G,e)||r.push(Z[e])})),r};if(u||(k((z=function(){if(this instanceof z)throw TypeError("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?y(arguments[0]):void 0,t=R(e),n=function(e){this===G&&n.call($,e),l(this,B)&&l(this[B],t)&&(this[B][t]=!1),ie(this,t,_(1,e))};return a&&re&&ie(G,t,{configurable:!0,set:n}),oe(t,e)}).prototype,"toString",(function(){return V(this).tag})),k(z,"withoutSetter",(function(e){return oe(R(e),e)})),T.f=ue,C.f=se,A.f=ce,S.f=M.f=le,O.f=he,P.f=function(e){return oe(N(e),e)},a&&(Y(z.prototype,"description",{configurable:!0,get:function(){return V(this).description}}),s||k(G,"propertyIsEnumerable",ue,{unsafe:!0}))),r({global:!0,wrap:!0,forced:!u,sham:!u},{Symbol:z}),F(E(te),(function(e){D(e)})),r({target:"Symbol",stat:!0,forced:!u},{for:function(e){var t=y(e);if(l(X,t))return X[t];var n=z(t);return X[t]=n,ee[n]=t,n},keyFor:function(e){if(!p(e))throw TypeError(e+" is not a symbol");if(l(ee,e))return ee[e]},useSetter:function(){re=!0},useSimple:function(){re=!1}}),r({target:"Object",stat:!0,forced:!u,sham:!a},{create:function(e,t){return void 0===t?w(e):ae(w(e),t)},defineProperty:se,defineProperties:ae,getOwnPropertyDescriptor:ce}),r({target:"Object",stat:!0,forced:!u},{getOwnPropertyNames:le,getOwnPropertySymbols:he}),r({target:"Object",stat:!0,forced:c((function(){O.f(1)}))},{getOwnPropertySymbols:function(e){return O.f(g(e))}}),W&&r({target:"JSON",stat:!0,forced:!u||c((function(){var e=z();return"[null]"!=W([e])||"{}"!=W({a:e})||"{}"!=W(Object(e))}))},{stringify:function(e,t,n){for(var r,i=[e],o=1;arguments.length>o;)i.push(arguments[o++]);if(r=t,(f(t)||void 0!==e)&&!p(e))return h(t)||(t=function(e,t){if(d(r)&&(t=r.call(this,e,t)),!p(t))return t}),i[1]=t,W.apply(null,i)}}),!z.prototype[H]){var de=z.prototype.valueOf;k(z.prototype,H,(function(){return de.apply(this,arguments)}))}U(z,"Symbol"),I[B]=!0},4747:function(e,t,n){var r=n(7854),i=n(8324),o=n(8509),s=n(8533),a=n(8880),u=function(e){if(e&&e.forEach!==s)try{a(e,"forEach",s)}catch(t){e.forEach=s}};for(var c in i)u(r[c]&&r[c].prototype);u(o)},3948:function(e,t,n){var r=n(7854),i=n(8324),o=n(8509),s=n(6992),a=n(8880),u=n(5112),c=u("iterator"),l=u("toStringTag"),h=s.values,d=function(e,t){if(e){if(e[c]!==h)try{a(e,c,h)}catch(t){e[c]=h}if(e[l]||a(e,l,t),i[t])for(var n in s)if(e[n]!==s[n])try{a(e,n,s[n])}catch(t){e[n]=s[n]}}};for(var f in i)d(r[f]&&r[f].prototype,f);d(o,"DOMTokenList")},1637:function(e,t,n){"use strict";n(6992);var r=n(2109),i=n(5005),o=n(590),s=n(1320),a=n(2248),u=n(8003),c=n(4994),l=n(9909),h=n(5787),d=n(614),f=n(6656),p=n(9974),m=n(648),g=n(9670),b=n(111),v=n(1340),y=n(30),_=n(9114),w=n(8554),E=n(1246),S=n(5112),M=i("fetch"),O=i("Request"),A=O&&O.prototype,C=i("Headers"),T=S("iterator"),k=l.set,x=l.getterFor("URLSearchParams"),j=l.getterFor("URLSearchParamsIterator"),I=/\+/g,R=Array(4),N=function(e){return R[e-1]||(R[e-1]=RegExp("((?:%[\\da-f]{2}){"+e+"})","gi"))},P=function(e){try{return decodeURIComponent(e)}catch(t){return e}},D=function(e){var t=e.replace(I," "),n=4;try{return decodeURIComponent(t)}catch(e){for(;n;)t=t.replace(N(n--),P);return t}},U=/[!'()~]|%20/g,L={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},F=function(e){return L[e]},B=function(e){return encodeURIComponent(e).replace(U,F)},H=function(e,t){if(t)for(var n,r,i=t.split("&"),o=0;o<i.length;)(n=i[o++]).length&&(r=n.split("="),e.push({key:D(r.shift()),value:D(r.join("="))}))},q=function(e){this.entries.length=0,H(this.entries,e)},V=function(e,t){if(e<t)throw TypeError("Not enough arguments")},G=c((function(e,t){k(this,{type:"URLSearchParamsIterator",iterator:w(x(e).entries),kind:t})}),"Iterator",(function(){var e=j(this),t=e.kind,n=e.iterator.next(),r=n.value;return n.done||(n.value="keys"===t?r.key:"values"===t?r.value:[r.key,r.value]),n})),z=function(){h(this,z,"URLSearchParams");var e,t,n,r,i,o,s,a,u,c=arguments.length>0?arguments[0]:void 0,l=this,d=[];if(k(l,{type:"URLSearchParams",entries:d,updateURL:function(){},updateSearchParams:q}),void 0!==c)if(b(c))if(e=E(c))for(n=(t=w(c,e)).next;!(r=n.call(t)).done;){if((s=(o=(i=w(g(r.value))).next).call(i)).done||(a=o.call(i)).done||!o.call(i).done)throw TypeError("Expected sequence with length 2");d.push({key:v(s.value),value:v(a.value)})}else for(u in c)f(c,u)&&d.push({key:u,value:v(c[u])});else H(d,"string"==typeof c?"?"===c.charAt(0)?c.slice(1):c:v(c))},W=z.prototype;if(a(W,{append:function(e,t){V(arguments.length,2);var n=x(this);n.entries.push({key:v(e),value:v(t)}),n.updateURL()},delete:function(e){V(arguments.length,1);for(var t=x(this),n=t.entries,r=v(e),i=0;i<n.length;)n[i].key===r?n.splice(i,1):i++;t.updateURL()},get:function(e){V(arguments.length,1);for(var t=x(this).entries,n=v(e),r=0;r<t.length;r++)if(t[r].key===n)return t[r].value;return null},getAll:function(e){V(arguments.length,1);for(var t=x(this).entries,n=v(e),r=[],i=0;i<t.length;i++)t[i].key===n&&r.push(t[i].value);return r},has:function(e){V(arguments.length,1);for(var t=x(this).entries,n=v(e),r=0;r<t.length;)if(t[r++].key===n)return!0;return!1},set:function(e,t){V(arguments.length,1);for(var n,r=x(this),i=r.entries,o=!1,s=v(e),a=v(t),u=0;u<i.length;u++)(n=i[u]).key===s&&(o?i.splice(u--,1):(o=!0,n.value=a));o||i.push({key:s,value:a}),r.updateURL()},sort:function(){var e,t,n,r=x(this),i=r.entries,o=i.slice();for(i.length=0,n=0;n<o.length;n++){for(e=o[n],t=0;t<n;t++)if(i[t].key>e.key){i.splice(t,0,e);break}t===n&&i.push(e)}r.updateURL()},forEach:function(e){for(var t,n=x(this).entries,r=p(e,arguments.length>1?arguments[1]:void 0,3),i=0;i<n.length;)r((t=n[i++]).value,t.key,this)},keys:function(){return new G(this,"keys")},values:function(){return new G(this,"values")},entries:function(){return new G(this,"entries")}},{enumerable:!0}),s(W,T,W.entries,{name:"entries"}),s(W,"toString",(function(){for(var e,t=x(this).entries,n=[],r=0;r<t.length;)e=t[r++],n.push(B(e.key)+"="+B(e.value));return n.join("&")}),{enumerable:!0}),u(z,"URLSearchParams"),r({global:!0,forced:!o},{URLSearchParams:z}),!o&&d(C)){var K=function(e){if(b(e)){var t,n=e.body;if("URLSearchParams"===m(n))return(t=e.headers?new C(e.headers):new C).has("content-type")||t.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),y(e,{body:_(0,String(n)),headers:_(0,t)})}return e};if(d(M)&&r({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return M(e,arguments.length>1?K(arguments[1]):{})}}),d(O)){var Y=function(e){return h(this,Y,"Request"),new O(e,arguments.length>1?K(arguments[1]):{})};A.constructor=Y,Y.prototype=A,r({global:!0,forced:!0},{Request:Y})}}e.exports={URLSearchParams:z,getState:x}},4671:function(e){var t;t=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=22)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i={debug:function(){},info:function(){},warn:function(){},error:function(){}},o=void 0,s=void 0;(t.Log=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.reset=function(){s=3,o=i},e.debug=function(){if(s>=4){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];o.debug.apply(o,Array.from(t))}},e.info=function(){if(s>=3){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];o.info.apply(o,Array.from(t))}},e.warn=function(){if(s>=2){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];o.warn.apply(o,Array.from(t))}},e.error=function(){if(s>=1){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];o.error.apply(o,Array.from(t))}},r(e,null,[{key:"NONE",get:function(){return 0}},{key:"ERROR",get:function(){return 1}},{key:"WARN",get:function(){return 2}},{key:"INFO",get:function(){return 3}},{key:"DEBUG",get:function(){return 4}},{key:"level",get:function(){return s},set:function(e){if(!(0<=e&&e<=4))throw new Error("Invalid log level");s=e}},{key:"logger",get:function(){return o},set:function(e){if(!e.debug&&e.info&&(e.debug=e.info),!(e.debug&&e.info&&e.warn&&e.error))throw new Error("Invalid logger");o=e}}]),e}()).reset()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i={setInterval:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t){return setInterval(e,t)})),clearInterval:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return clearInterval(e)}))},o=!1,s=null;t.Global=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e._testing=function(){o=!0},e.setXMLHttpRequest=function(e){s=e},r(e,null,[{key:"location",get:function(){if(!o)return location}},{key:"localStorage",get:function(){if(!o&&"undefined"!=typeof window)return localStorage}},{key:"sessionStorage",get:function(){if(!o&&"undefined"!=typeof window)return sessionStorage}},{key:"XMLHttpRequest",get:function(){if(!o&&"undefined"!=typeof window)return s||XMLHttpRequest}},{key:"timer",get:function(){if(!o)return i}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MetadataService=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0),o=n(7);function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=".well-known/openid-configuration";t.MetadataService=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.JsonService;if(s(this,e),!t)throw i.Log.error("MetadataService: No settings passed to MetadataService"),new Error("settings");this._settings=t,this._jsonService=new n(["application/jwk-set+json"])}return e.prototype.resetSigningKeys=function(){this._settings=this._settings||{},this._settings.signingKeys=void 0},e.prototype.getMetadata=function(){var e=this;return this._settings.metadata?(i.Log.debug("MetadataService.getMetadata: Returning metadata from settings"),Promise.resolve(this._settings.metadata)):this.metadataUrl?(i.Log.debug("MetadataService.getMetadata: getting metadata from",this.metadataUrl),this._jsonService.getJson(this.metadataUrl).then((function(t){i.Log.debug("MetadataService.getMetadata: json received");var n=e._settings.metadataSeed||{};return e._settings.metadata=Object.assign({},n,t),e._settings.metadata}))):(i.Log.error("MetadataService.getMetadata: No authority or metadataUrl configured on settings"),Promise.reject(new Error("No authority or metadataUrl configured on settings")))},e.prototype.getIssuer=function(){return this._getMetadataProperty("issuer")},e.prototype.getAuthorizationEndpoint=function(){return this._getMetadataProperty("authorization_endpoint")},e.prototype.getUserInfoEndpoint=function(){return this._getMetadataProperty("userinfo_endpoint")},e.prototype.getTokenEndpoint=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._getMetadataProperty("token_endpoint",e)},e.prototype.getCheckSessionIframe=function(){return this._getMetadataProperty("check_session_iframe",!0)},e.prototype.getEndSessionEndpoint=function(){return this._getMetadataProperty("end_session_endpoint",!0)},e.prototype.getRevocationEndpoint=function(){return this._getMetadataProperty("revocation_endpoint",!0)},e.prototype.getKeysEndpoint=function(){return this._getMetadataProperty("jwks_uri",!0)},e.prototype._getMetadataProperty=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return i.Log.debug("MetadataService.getMetadataProperty for: "+e),this.getMetadata().then((function(n){if(i.Log.debug("MetadataService.getMetadataProperty: metadata recieved"),void 0===n[e]){if(!0===t)return void i.Log.warn("MetadataService.getMetadataProperty: Metadata does not contain optional property "+e);throw i.Log.error("MetadataService.getMetadataProperty: Metadata does not contain property "+e),new Error("Metadata does not contain property "+e)}return n[e]}))},e.prototype.getSigningKeys=function(){var e=this;return this._settings.signingKeys?(i.Log.debug("MetadataService.getSigningKeys: Returning signingKeys from settings"),Promise.resolve(this._settings.signingKeys)):this._getMetadataProperty("jwks_uri").then((function(t){return i.Log.debug("MetadataService.getSigningKeys: jwks_uri received",t),e._jsonService.getJson(t).then((function(t){if(i.Log.debug("MetadataService.getSigningKeys: key set received",t),!t.keys)throw i.Log.error("MetadataService.getSigningKeys: Missing keys on keyset"),new Error("Missing keys on keyset");return e._settings.signingKeys=t.keys,e._settings.signingKeys}))}))},r(e,[{key:"metadataUrl",get:function(){return this._metadataUrl||(this._settings.metadataUrl?this._metadataUrl=this._settings.metadataUrl:(this._metadataUrl=this._settings.authority,this._metadataUrl&&this._metadataUrl.indexOf(a)<0&&("/"!==this._metadataUrl[this._metadataUrl.length-1]&&(this._metadataUrl+="/"),this._metadataUrl+=a))),this._metadataUrl}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UrlUtility=void 0;var r=n(0),i=n(1);t.UrlUtility=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.addQueryParam=function(e,t,n){return e.indexOf("?")<0&&(e+="?"),"?"!==e[e.length-1]&&(e+="&"),e+=encodeURIComponent(t),(e+="=")+encodeURIComponent(n)},e.parseUrlFragment=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.Global;"string"!=typeof e&&(e=n.location.href);var o=e.lastIndexOf(t);o>=0&&(e=e.substr(o+1)),"?"===t&&(o=e.indexOf("#"))>=0&&(e=e.substr(0,o));for(var s,a={},u=/([^&=]+)=([^&]*)/g,c=0;s=u.exec(e);)if(a[decodeURIComponent(s[1])]=decodeURIComponent(s[2].replace(/\+/g," ")),c++>50)return r.Log.error("UrlUtility.parseUrlFragment: response exceeded expected number of parameters",e),{error:"Response exceeded expected number of parameters"};for(var l in a)return a;return{}},e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JoseUtil=void 0;var r=n(26),i=function(e){return e&&e.__esModule?e:{default:e}}(n(33));t.JoseUtil=(0,i.default)({jws:r.jws,KeyUtil:r.KeyUtil,X509:r.X509,crypto:r.crypto,hextob64u:r.hextob64u,b64tohex:r.b64tohex,AllowedSigningAlgs:r.AllowedSigningAlgs})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OidcClientSettings=void 0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),s=n(23),a=n(6),u=n(24),c=n(2);function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var h=".well-known/openid-configuration",d="id_token",f="openid",p="client_secret_post";t.OidcClientSettings=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.authority,i=t.metadataUrl,o=t.metadata,h=t.signingKeys,m=t.metadataSeed,g=t.client_id,b=t.client_secret,v=t.response_type,y=void 0===v?d:v,_=t.scope,w=void 0===_?f:_,E=t.redirect_uri,S=t.post_logout_redirect_uri,M=t.client_authentication,O=void 0===M?p:M,A=t.prompt,C=t.display,T=t.max_age,k=t.ui_locales,x=t.acr_values,j=t.resource,I=t.response_mode,R=t.filterProtocolClaims,N=void 0===R||R,P=t.loadUserInfo,D=void 0===P||P,U=t.staleStateAge,L=void 0===U?900:U,F=t.clockSkew,B=void 0===F?300:F,H=t.clockService,q=void 0===H?new s.ClockService:H,V=t.userInfoJwtIssuer,G=void 0===V?"OP":V,z=t.mergeClaims,W=void 0!==z&&z,K=t.stateStore,Y=void 0===K?new a.WebStorageStateStore:K,Q=t.ResponseValidatorCtor,J=void 0===Q?u.ResponseValidator:Q,Z=t.MetadataServiceCtor,$=void 0===Z?c.MetadataService:Z,X=t.extraQueryParams,ee=void 0===X?{}:X,te=t.extraTokenParams,ne=void 0===te?{}:te;l(this,e),this._authority=n,this._metadataUrl=i,this._metadata=o,this._metadataSeed=m,this._signingKeys=h,this._client_id=g,this._client_secret=b,this._response_type=y,this._scope=w,this._redirect_uri=E,this._post_logout_redirect_uri=S,this._client_authentication=O,this._prompt=A,this._display=C,this._max_age=T,this._ui_locales=k,this._acr_values=x,this._resource=j,this._response_mode=I,this._filterProtocolClaims=!!N,this._loadUserInfo=!!D,this._staleStateAge=L,this._clockSkew=B,this._clockService=q,this._userInfoJwtIssuer=G,this._mergeClaims=!!W,this._stateStore=Y,this._validator=new J(this),this._metadataService=new $(this),this._extraQueryParams="object"===(void 0===ee?"undefined":r(ee))?ee:{},this._extraTokenParams="object"===(void 0===ne?"undefined":r(ne))?ne:{}}return e.prototype.getEpochTime=function(){return this._clockService.getEpochTime()},i(e,[{key:"client_id",get:function(){return this._client_id},set:function(e){if(this._client_id)throw o.Log.error("OidcClientSettings.set_client_id: client_id has already been assigned."),new Error("client_id has already been assigned.");this._client_id=e}},{key:"client_secret",get:function(){return this._client_secret}},{key:"response_type",get:function(){return this._response_type}},{key:"scope",get:function(){return this._scope}},{key:"redirect_uri",get:function(){return this._redirect_uri}},{key:"post_logout_redirect_uri",get:function(){return this._post_logout_redirect_uri}},{key:"client_authentication",get:function(){return this._client_authentication}},{key:"prompt",get:function(){return this._prompt}},{key:"display",get:function(){return this._display}},{key:"max_age",get:function(){return this._max_age}},{key:"ui_locales",get:function(){return this._ui_locales}},{key:"acr_values",get:function(){return this._acr_values}},{key:"resource",get:function(){return this._resource}},{key:"response_mode",get:function(){return this._response_mode}},{key:"authority",get:function(){return this._authority},set:function(e){if(this._authority)throw o.Log.error("OidcClientSettings.set_authority: authority has already been assigned."),new Error("authority has already been assigned.");this._authority=e}},{key:"metadataUrl",get:function(){return this._metadataUrl||(this._metadataUrl=this.authority,this._metadataUrl&&this._metadataUrl.indexOf(h)<0&&("/"!==this._metadataUrl[this._metadataUrl.length-1]&&(this._metadataUrl+="/"),this._metadataUrl+=h)),this._metadataUrl}},{key:"metadata",get:function(){return this._metadata},set:function(e){this._metadata=e}},{key:"metadataSeed",get:function(){return this._metadataSeed},set:function(e){this._metadataSeed=e}},{key:"signingKeys",get:function(){return this._signingKeys},set:function(e){this._signingKeys=e}},{key:"filterProtocolClaims",get:function(){return this._filterProtocolClaims}},{key:"loadUserInfo",get:function(){return this._loadUserInfo}},{key:"staleStateAge",get:function(){return this._staleStateAge}},{key:"clockSkew",get:function(){return this._clockSkew}},{key:"userInfoJwtIssuer",get:function(){return this._userInfoJwtIssuer}},{key:"mergeClaims",get:function(){return this._mergeClaims}},{key:"stateStore",get:function(){return this._stateStore}},{key:"validator",get:function(){return this._validator}},{key:"metadataService",get:function(){return this._metadataService}},{key:"extraQueryParams",get:function(){return this._extraQueryParams},set:function(e){"object"===(void 0===e?"undefined":r(e))?this._extraQueryParams=e:this._extraQueryParams={}}},{key:"extraTokenParams",get:function(){return this._extraTokenParams},set:function(e){"object"===(void 0===e?"undefined":r(e))?this._extraTokenParams=e:this._extraTokenParams={}}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebStorageStateStore=void 0;var r=n(0),i=n(1);function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.WebStorageStateStore=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.prefix,r=void 0===n?"oidc.":n,s=t.store,a=void 0===s?i.Global.localStorage:s;o(this,e),this._store=a,this._prefix=r}return e.prototype.set=function(e,t){return r.Log.debug("WebStorageStateStore.set",e),e=this._prefix+e,this._store.setItem(e,t),Promise.resolve()},e.prototype.get=function(e){r.Log.debug("WebStorageStateStore.get",e),e=this._prefix+e;var t=this._store.getItem(e);return Promise.resolve(t)},e.prototype.remove=function(e){r.Log.debug("WebStorageStateStore.remove",e),e=this._prefix+e;var t=this._store.getItem(e);return this._store.removeItem(e),Promise.resolve(t)},e.prototype.getAllKeys=function(){r.Log.debug("WebStorageStateStore.getAllKeys");for(var e=[],t=0;t<this._store.length;t++){var n=this._store.key(t);0===n.indexOf(this._prefix)&&e.push(n.substr(this._prefix.length))}return Promise.resolve(e)},e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JsonService=void 0;var r=n(0),i=n(1);function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.JsonService=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.Global.XMLHttpRequest,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;o(this,e),t&&Array.isArray(t)?this._contentTypes=t.slice():this._contentTypes=[],this._contentTypes.push("application/json"),r&&this._contentTypes.push("application/jwt"),this._XMLHttpRequest=n,this._jwtHandler=r}return e.prototype.getJson=function(e,t){var n=this;if(!e)throw r.Log.error("JsonService.getJson: No url passed"),new Error("url");return r.Log.debug("JsonService.getJson, url: ",e),new Promise((function(i,o){var s=new n._XMLHttpRequest;s.open("GET",e);var a=n._contentTypes,u=n._jwtHandler;s.onload=function(){if(r.Log.debug("JsonService.getJson: HTTP response received, status",s.status),200===s.status){var t=s.getResponseHeader("Content-Type");if(t){var n=a.find((function(e){if(t.startsWith(e))return!0}));if("application/jwt"==n)return void u(s).then(i,o);if(n)try{return void i(JSON.parse(s.responseText))}catch(e){return r.Log.error("JsonService.getJson: Error parsing JSON response",e.message),void o(e)}}o(Error("Invalid response Content-Type: "+t+", from URL: "+e))}else o(Error(s.statusText+" ("+s.status+")"))},s.onerror=function(){r.Log.error("JsonService.getJson: network error"),o(Error("Network Error"))},t&&(r.Log.debug("JsonService.getJson: token passed, setting Authorization header"),s.setRequestHeader("Authorization","Bearer "+t)),s.send()}))},e.prototype.postForm=function(e,t,n){var i=this;if(!e)throw r.Log.error("JsonService.postForm: No url passed"),new Error("url");return r.Log.debug("JsonService.postForm, url: ",e),new Promise((function(o,s){var a=new i._XMLHttpRequest;a.open("POST",e);var u=i._contentTypes;a.onload=function(){if(r.Log.debug("JsonService.postForm: HTTP response received, status",a.status),200!==a.status){if(400===a.status&&(n=a.getResponseHeader("Content-Type"))&&u.find((function(e){if(n.startsWith(e))return!0})))try{var t=JSON.parse(a.responseText);if(t&&t.error)return r.Log.error("JsonService.postForm: Error from server: ",t.error),void s(new Error(t.error))}catch(e){return r.Log.error("JsonService.postForm: Error parsing JSON response",e.message),void s(e)}s(Error(a.statusText+" ("+a.status+")"))}else{var n;if((n=a.getResponseHeader("Content-Type"))&&u.find((function(e){if(n.startsWith(e))return!0})))try{return void o(JSON.parse(a.responseText))}catch(e){return r.Log.error("JsonService.postForm: Error parsing JSON response",e.message),void s(e)}s(Error("Invalid response Content-Type: "+n+", from URL: "+e))}},a.onerror=function(){r.Log.error("JsonService.postForm: network error"),s(Error("Network Error"))};var c="";for(var l in t){var h=t[l];h&&(c.length>0&&(c+="&"),c+=encodeURIComponent(l),c+="=",c+=encodeURIComponent(h))}a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),void 0!==n&&a.setRequestHeader("Authorization","Basic "+btoa(n)),a.send(c)}))},e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SigninRequest=void 0;var r=n(0),i=n(3),o=n(13);t.SigninRequest=function(){function e(t){var n=t.url,s=t.client_id,a=t.redirect_uri,u=t.response_type,c=t.scope,l=t.authority,h=t.data,d=t.prompt,f=t.display,p=t.max_age,m=t.ui_locales,g=t.id_token_hint,b=t.login_hint,v=t.acr_values,y=t.resource,_=t.response_mode,w=t.request,E=t.request_uri,S=t.extraQueryParams,M=t.request_type,O=t.client_secret,A=t.extraTokenParams,C=t.skipUserInfo;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!n)throw r.Log.error("SigninRequest.ctor: No url passed"),new Error("url");if(!s)throw r.Log.error("SigninRequest.ctor: No client_id passed"),new Error("client_id");if(!a)throw r.Log.error("SigninRequest.ctor: No redirect_uri passed"),new Error("redirect_uri");if(!u)throw r.Log.error("SigninRequest.ctor: No response_type passed"),new Error("response_type");if(!c)throw r.Log.error("SigninRequest.ctor: No scope passed"),new Error("scope");if(!l)throw r.Log.error("SigninRequest.ctor: No authority passed"),new Error("authority");var T=e.isOidc(u),k=e.isCode(u);_||(_=e.isCode(u)?"query":null),this.state=new o.SigninState({nonce:T,data:h,client_id:s,authority:l,redirect_uri:a,code_verifier:k,request_type:M,response_mode:_,client_secret:O,scope:c,extraTokenParams:A,skipUserInfo:C}),n=i.UrlUtility.addQueryParam(n,"client_id",s),n=i.UrlUtility.addQueryParam(n,"redirect_uri",a),n=i.UrlUtility.addQueryParam(n,"response_type",u),n=i.UrlUtility.addQueryParam(n,"scope",c),n=i.UrlUtility.addQueryParam(n,"state",this.state.id),T&&(n=i.UrlUtility.addQueryParam(n,"nonce",this.state.nonce)),k&&(n=i.UrlUtility.addQueryParam(n,"code_challenge",this.state.code_challenge),n=i.UrlUtility.addQueryParam(n,"code_challenge_method","S256"));var x={prompt:d,display:f,max_age:p,ui_locales:m,id_token_hint:g,login_hint:b,acr_values:v,resource:y,request:w,request_uri:E,response_mode:_};for(var j in x)x[j]&&(n=i.UrlUtility.addQueryParam(n,j,x[j]));for(var I in S)n=i.UrlUtility.addQueryParam(n,I,S[I]);this.url=n}return e.isOidc=function(e){return!!e.split(/\s+/g).filter((function(e){return"id_token"===e}))[0]},e.isOAuth=function(e){return!!e.split(/\s+/g).filter((function(e){return"token"===e}))[0]},e.isCode=function(e){return!!e.split(/\s+/g).filter((function(e){return"code"===e}))[0]},e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.State=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0),o=function(e){return e&&e.__esModule?e:{default:e}}(n(14));function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.State=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.id,r=t.data,i=t.created,a=t.request_type;s(this,e),this._id=n||(0,o.default)(),this._data=r,this._created="number"==typeof i&&i>0?i:parseInt(Date.now()/1e3),this._request_type=a}return e.prototype.toStorageString=function(){return i.Log.debug("State.toStorageString"),JSON.stringify({id:this.id,data:this.data,created:this.created,request_type:this.request_type})},e.fromStorageString=function(t){return i.Log.debug("State.fromStorageString"),new e(JSON.parse(t))},e.clearStaleState=function(t,n){var r=Date.now()/1e3-n;return t.getAllKeys().then((function(n){i.Log.debug("State.clearStaleState: got keys",n);for(var o=[],s=function(s){var a=n[s];u=t.get(a).then((function(n){var o=!1;if(n)try{var s=e.fromStorageString(n);i.Log.debug("State.clearStaleState: got item from key: ",a,s.created),s.created<=r&&(o=!0)}catch(e){i.Log.error("State.clearStaleState: Error parsing state for key",a,e.message),o=!0}else i.Log.debug("State.clearStaleState: no item in storage for key: ",a),o=!0;if(o)return i.Log.debug("State.clearStaleState: removed item for key: ",a),t.remove(a)})),o.push(u)},a=0;a<n.length;a++){var u;s(a)}return i.Log.debug("State.clearStaleState: waiting on promise count:",o.length),Promise.all(o)}))},r(e,[{key:"id",get:function(){return this._id}},{key:"data",get:function(){return this._data}},{key:"created",get:function(){return this._created}},{key:"request_type",get:function(){return this._request_type}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OidcClient=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0),o=n(5),s=n(12),a=n(8),u=n(34),c=n(35),l=n(36),h=n(13),d=n(9);function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.OidcClient=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),t instanceof o.OidcClientSettings?this._settings=t:this._settings=new o.OidcClientSettings(t)}return e.prototype.createSigninRequest=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.response_type,r=t.scope,o=t.redirect_uri,s=t.data,u=t.state,c=t.prompt,l=t.display,h=t.max_age,d=t.ui_locales,f=t.id_token_hint,p=t.login_hint,m=t.acr_values,g=t.resource,b=t.request,v=t.request_uri,y=t.response_mode,_=t.extraQueryParams,w=t.extraTokenParams,E=t.request_type,S=t.skipUserInfo,M=arguments[1];i.Log.debug("OidcClient.createSigninRequest");var O=this._settings.client_id;n=n||this._settings.response_type,r=r||this._settings.scope,o=o||this._settings.redirect_uri,c=c||this._settings.prompt,l=l||this._settings.display,h=h||this._settings.max_age,d=d||this._settings.ui_locales,m=m||this._settings.acr_values,g=g||this._settings.resource,y=y||this._settings.response_mode,_=_||this._settings.extraQueryParams,w=w||this._settings.extraTokenParams;var A=this._settings.authority;return a.SigninRequest.isCode(n)&&"code"!==n?Promise.reject(new Error("OpenID Connect hybrid flow is not supported")):this._metadataService.getAuthorizationEndpoint().then((function(t){i.Log.debug("OidcClient.createSigninRequest: Received authorization endpoint",t);var C=new a.SigninRequest({url:t,client_id:O,redirect_uri:o,response_type:n,scope:r,data:s||u,authority:A,prompt:c,display:l,max_age:h,ui_locales:d,id_token_hint:f,login_hint:p,acr_values:m,resource:g,request:b,request_uri:v,extraQueryParams:_,extraTokenParams:w,request_type:E,response_mode:y,client_secret:e._settings.client_secret,skipUserInfo:S}),T=C.state;return(M=M||e._stateStore).set(T.id,T.toStorageString()).then((function(){return C}))}))},e.prototype.readSigninResponseState=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];i.Log.debug("OidcClient.readSigninResponseState");var r="query"===this._settings.response_mode||!this._settings.response_mode&&a.SigninRequest.isCode(this._settings.response_type),o=r?"?":"#",s=new u.SigninResponse(e,o);if(!s.state)return i.Log.error("OidcClient.readSigninResponseState: No state in response"),Promise.reject(new Error("No state in response"));t=t||this._stateStore;var c=n?t.remove.bind(t):t.get.bind(t);return c(s.state).then((function(e){if(!e)throw i.Log.error("OidcClient.readSigninResponseState: No matching state found in storage"),new Error("No matching state found in storage");return{state:h.SigninState.fromStorageString(e),response:s}}))},e.prototype.processSigninResponse=function(e,t){var n=this;return i.Log.debug("OidcClient.processSigninResponse"),this.readSigninResponseState(e,t,!0).then((function(e){var t=e.state,r=e.response;return i.Log.debug("OidcClient.processSigninResponse: Received state from storage; validating response"),n._validator.validateSigninResponse(t,r)}))},e.prototype.createSignoutRequest=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.id_token_hint,r=t.data,o=t.state,s=t.post_logout_redirect_uri,a=t.extraQueryParams,u=t.request_type,l=arguments[1];return i.Log.debug("OidcClient.createSignoutRequest"),s=s||this._settings.post_logout_redirect_uri,a=a||this._settings.extraQueryParams,this._metadataService.getEndSessionEndpoint().then((function(t){if(!t)throw i.Log.error("OidcClient.createSignoutRequest: No end session endpoint url returned"),new Error("no end session endpoint");i.Log.debug("OidcClient.createSignoutRequest: Received end session endpoint",t);var h=new c.SignoutRequest({url:t,id_token_hint:n,post_logout_redirect_uri:s,data:r||o,extraQueryParams:a,request_type:u}),d=h.state;return d&&(i.Log.debug("OidcClient.createSignoutRequest: Signout request has state to persist"),(l=l||e._stateStore).set(d.id,d.toStorageString())),h}))},e.prototype.readSignoutResponseState=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];i.Log.debug("OidcClient.readSignoutResponseState");var r=new l.SignoutResponse(e);if(!r.state)return i.Log.debug("OidcClient.readSignoutResponseState: No state in response"),r.error?(i.Log.warn("OidcClient.readSignoutResponseState: Response was error: ",r.error),Promise.reject(new s.ErrorResponse(r))):Promise.resolve({state:void 0,response:r});var o=r.state;t=t||this._stateStore;var a=n?t.remove.bind(t):t.get.bind(t);return a(o).then((function(e){if(!e)throw i.Log.error("OidcClient.readSignoutResponseState: No matching state found in storage"),new Error("No matching state found in storage");return{state:d.State.fromStorageString(e),response:r}}))},e.prototype.processSignoutResponse=function(e,t){var n=this;return i.Log.debug("OidcClient.processSignoutResponse"),this.readSignoutResponseState(e,t,!0).then((function(e){var t=e.state,r=e.response;return t?(i.Log.debug("OidcClient.processSignoutResponse: Received state from storage; validating response"),n._validator.validateSignoutResponse(t,r)):(i.Log.debug("OidcClient.processSignoutResponse: No state from storage; skipping validating response"),r)}))},e.prototype.clearStaleState=function(e){return i.Log.debug("OidcClient.clearStaleState"),e=e||this._stateStore,d.State.clearStaleState(e,this.settings.staleStateAge)},r(e,[{key:"_stateStore",get:function(){return this.settings.stateStore}},{key:"_validator",get:function(){return this.settings.validator}},{key:"_metadataService",get:function(){return this.settings.metadataService}},{key:"settings",get:function(){return this._settings}},{key:"metadataService",get:function(){return this._metadataService}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TokenClient=void 0;var r=n(7),i=n(2),o=n(0);function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.TokenClient=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.JsonService,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.MetadataService;if(s(this,e),!t)throw o.Log.error("TokenClient.ctor: No settings passed"),new Error("settings");this._settings=t,this._jsonService=new n,this._metadataService=new a(this._settings)}return e.prototype.exchangeCode=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(t=Object.assign({},t)).grant_type=t.grant_type||"authorization_code",t.client_id=t.client_id||this._settings.client_id,t.client_secret=t.client_secret||this._settings.client_secret,t.redirect_uri=t.redirect_uri||this._settings.redirect_uri;var n=void 0,r=t._client_authentication||this._settings._client_authentication;return delete t._client_authentication,t.code?t.redirect_uri?t.code_verifier?t.client_id?t.client_secret||"client_secret_basic"!=r?("client_secret_basic"==r&&(n=t.client_id+":"+t.client_secret,delete t.client_id,delete t.client_secret),this._metadataService.getTokenEndpoint(!1).then((function(r){return o.Log.debug("TokenClient.exchangeCode: Received token endpoint"),e._jsonService.postForm(r,t,n).then((function(e){return o.Log.debug("TokenClient.exchangeCode: response received"),e}))}))):(o.Log.error("TokenClient.exchangeCode: No client_secret passed"),Promise.reject(new Error("A client_secret is required"))):(o.Log.error("TokenClient.exchangeCode: No client_id passed"),Promise.reject(new Error("A client_id is required"))):(o.Log.error("TokenClient.exchangeCode: No code_verifier passed"),Promise.reject(new Error("A code_verifier is required"))):(o.Log.error("TokenClient.exchangeCode: No redirect_uri passed"),Promise.reject(new Error("A redirect_uri is required"))):(o.Log.error("TokenClient.exchangeCode: No code passed"),Promise.reject(new Error("A code is required")))},e.prototype.exchangeRefreshToken=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(t=Object.assign({},t)).grant_type=t.grant_type||"refresh_token",t.client_id=t.client_id||this._settings.client_id,t.client_secret=t.client_secret||this._settings.client_secret;var n=void 0,r=t._client_authentication||this._settings._client_authentication;return delete t._client_authentication,t.refresh_token?t.client_id?("client_secret_basic"==r&&(n=t.client_id+":"+t.client_secret,delete t.client_id,delete t.client_secret),this._metadataService.getTokenEndpoint(!1).then((function(r){return o.Log.debug("TokenClient.exchangeRefreshToken: Received token endpoint"),e._jsonService.postForm(r,t,n).then((function(e){return o.Log.debug("TokenClient.exchangeRefreshToken: response received"),e}))}))):(o.Log.error("TokenClient.exchangeRefreshToken: No client_id passed"),Promise.reject(new Error("A client_id is required"))):(o.Log.error("TokenClient.exchangeRefreshToken: No refresh_token passed"),Promise.reject(new Error("A refresh_token is required")))},e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorResponse=void 0;var r=n(0);function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}t.ErrorResponse=function(e){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=n.error,a=n.error_description,u=n.error_uri,c=n.state,l=n.session_state;if(i(this,t),!s)throw r.Log.error("No error passed to ErrorResponse"),new Error("error");var h=o(this,e.call(this,a||s));return h.name="ErrorResponse",h.error=s,h.error_description=a,h.error_uri=u,h.state=c,h.session_state=l,h}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(Error)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SigninState=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0),o=n(9),s=n(4),a=function(e){return e&&e.__esModule?e:{default:e}}(n(14));function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}t.SigninState=function(e){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.nonce,i=n.authority,o=n.client_id,l=n.redirect_uri,h=n.code_verifier,d=n.response_mode,f=n.client_secret,p=n.scope,m=n.extraTokenParams,g=n.skipUserInfo;u(this,t);var b=c(this,e.call(this,arguments[0]));if(!0===r?b._nonce=(0,a.default)():r&&(b._nonce=r),!0===h?b._code_verifier=(0,a.default)()+(0,a.default)()+(0,a.default)():h&&(b._code_verifier=h),b.code_verifier){var v=s.JoseUtil.hashString(b.code_verifier,"SHA256");b._code_challenge=s.JoseUtil.hexToBase64Url(v)}return b._redirect_uri=l,b._authority=i,b._client_id=o,b._response_mode=d,b._client_secret=f,b._scope=p,b._extraTokenParams=m,b._skipUserInfo=g,b}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.toStorageString=function(){return i.Log.debug("SigninState.toStorageString"),JSON.stringify({id:this.id,data:this.data,created:this.created,request_type:this.request_type,nonce:this.nonce,code_verifier:this.code_verifier,redirect_uri:this.redirect_uri,authority:this.authority,client_id:this.client_id,response_mode:this.response_mode,client_secret:this.client_secret,scope:this.scope,extraTokenParams:this.extraTokenParams,skipUserInfo:this.skipUserInfo})},t.fromStorageString=function(e){return i.Log.debug("SigninState.fromStorageString"),new t(JSON.parse(e))},r(t,[{key:"nonce",get:function(){return this._nonce}},{key:"authority",get:function(){return this._authority}},{key:"client_id",get:function(){return this._client_id}},{key:"redirect_uri",get:function(){return this._redirect_uri}},{key:"code_verifier",get:function(){return this._code_verifier}},{key:"code_challenge",get:function(){return this._code_challenge}},{key:"response_mode",get:function(){return this._response_mode}},{key:"client_secret",get:function(){return this._client_secret}},{key:"scope",get:function(){return this._scope}},{key:"extraTokenParams",get:function(){return this._extraTokenParams}},{key:"skipUserInfo",get:function(){return this._skipUserInfo}}]),t}(o.State)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return("undefined"!=r&&null!==r&&void 0!==r.getRandomValues?i:o)().replace(/-/g,"")};var r="undefined"!=typeof window?window.crypto||window.msCrypto:null;function i(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(function(e){return(e^r.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)}))}function o(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(function(e){return(e^16*Math.random()>>e/4).toString(16)}))}e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.User=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0);t.User=function(){function e(t){var n=t.id_token,r=t.session_state,i=t.access_token,o=t.refresh_token,s=t.token_type,a=t.scope,u=t.profile,c=t.expires_at,l=t.state;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id_token=n,this.session_state=r,this.access_token=i,this.refresh_token=o,this.token_type=s,this.scope=a,this.profile=u,this.expires_at=c,this.state=l}return e.prototype.toStorageString=function(){return i.Log.debug("User.toStorageString"),JSON.stringify({id_token:this.id_token,session_state:this.session_state,access_token:this.access_token,refresh_token:this.refresh_token,token_type:this.token_type,scope:this.scope,profile:this.profile,expires_at:this.expires_at})},e.fromStorageString=function(t){return i.Log.debug("User.fromStorageString"),new e(JSON.parse(t))},r(e,[{key:"expires_in",get:function(){if(this.expires_at){var e=parseInt(Date.now()/1e3);return this.expires_at-e}},set:function(e){var t=parseInt(e);if("number"==typeof t&&t>0){var n=parseInt(Date.now()/1e3);this.expires_at=n+t}}},{key:"expired",get:function(){var e=this.expires_in;if(void 0!==e)return e<=0}},{key:"scopes",get:function(){return(this.scope||"").split(" ")}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AccessTokenEvents=void 0;var r=n(0),i=n(46);function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.AccessTokenEvents=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.accessTokenExpiringNotificationTime,r=void 0===n?60:n,s=t.accessTokenExpiringTimer,a=void 0===s?new i.Timer("Access token expiring"):s,u=t.accessTokenExpiredTimer,c=void 0===u?new i.Timer("Access token expired"):u;o(this,e),this._accessTokenExpiringNotificationTime=r,this._accessTokenExpiring=a,this._accessTokenExpired=c}return e.prototype.load=function(e){if(e.access_token&&void 0!==e.expires_in){var t=e.expires_in;if(r.Log.debug("AccessTokenEvents.load: access token present, remaining duration:",t),t>0){var n=t-this._accessTokenExpiringNotificationTime;n<=0&&(n=1),r.Log.debug("AccessTokenEvents.load: registering expiring timer in:",n),this._accessTokenExpiring.init(n)}else r.Log.debug("AccessTokenEvents.load: canceling existing expiring timer becase we're past expiration."),this._accessTokenExpiring.cancel();var i=t+1;r.Log.debug("AccessTokenEvents.load: registering expired timer in:",i),this._accessTokenExpired.init(i)}else this._accessTokenExpiring.cancel(),this._accessTokenExpired.cancel()},e.prototype.unload=function(){r.Log.debug("AccessTokenEvents.unload: canceling existing access token timers"),this._accessTokenExpiring.cancel(),this._accessTokenExpired.cancel()},e.prototype.addAccessTokenExpiring=function(e){this._accessTokenExpiring.addHandler(e)},e.prototype.removeAccessTokenExpiring=function(e){this._accessTokenExpiring.removeHandler(e)},e.prototype.addAccessTokenExpired=function(e){this._accessTokenExpired.addHandler(e)},e.prototype.removeAccessTokenExpired=function(e){this._accessTokenExpired.removeHandler(e)},e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Event=void 0;var r=n(0);t.Event=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=t,this._callbacks=[]}return e.prototype.addHandler=function(e){this._callbacks.push(e)},e.prototype.removeHandler=function(e){var t=this._callbacks.findIndex((function(t){return t===e}));t>=0&&this._callbacks.splice(t,1)},e.prototype.raise=function(){r.Log.debug("Event: Raising event: "+this._name);for(var e=0;e<this._callbacks.length;e++){var t;(t=this._callbacks)[e].apply(t,arguments)}},e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SessionMonitor=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0),o=n(19),s=n(1);function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.SessionMonitor=function(){function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.CheckSessionIFrame,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s.Global.timer;if(a(this,e),!t)throw i.Log.error("SessionMonitor.ctor: No user manager passed to SessionMonitor"),new Error("userManager");this._userManager=t,this._CheckSessionIFrameCtor=r,this._timer=u,this._userManager.events.addUserLoaded(this._start.bind(this)),this._userManager.events.addUserUnloaded(this._stop.bind(this)),Promise.resolve(this._userManager.getUser().then((function(e){e?n._start(e):n._settings.monitorAnonymousSession&&n._userManager.querySessionStatus().then((function(e){var t={session_state:e.session_state};e.sub&&e.sid&&(t.profile={sub:e.sub,sid:e.sid}),n._start(t)})).catch((function(e){i.Log.error("SessionMonitor ctor: error from querySessionStatus:",e.message)}))})).catch((function(e){i.Log.error("SessionMonitor ctor: error from getUser:",e.message)})))}return e.prototype._start=function(e){var t=this,n=e.session_state;n&&(e.profile?(this._sub=e.profile.sub,this._sid=e.profile.sid,i.Log.debug("SessionMonitor._start: session_state:",n,", sub:",this._sub)):(this._sub=void 0,this._sid=void 0,i.Log.debug("SessionMonitor._start: session_state:",n,", anonymous user")),this._checkSessionIFrame?this._checkSessionIFrame.start(n):this._metadataService.getCheckSessionIframe().then((function(e){if(e){i.Log.debug("SessionMonitor._start: Initializing check session iframe");var r=t._client_id,o=t._checkSessionInterval,s=t._stopCheckSessionOnError;t._checkSessionIFrame=new t._CheckSessionIFrameCtor(t._callback.bind(t),r,e,o,s),t._checkSessionIFrame.load().then((function(){t._checkSessionIFrame.start(n)}))}else i.Log.warn("SessionMonitor._start: No check session iframe found in the metadata")})).catch((function(e){i.Log.error("SessionMonitor._start: Error from getCheckSessionIframe:",e.message)})))},e.prototype._stop=function(){var e=this;if(this._sub=void 0,this._sid=void 0,this._checkSessionIFrame&&(i.Log.debug("SessionMonitor._stop"),this._checkSessionIFrame.stop()),this._settings.monitorAnonymousSession)var t=this._timer.setInterval((function(){e._timer.clearInterval(t),e._userManager.querySessionStatus().then((function(t){var n={session_state:t.session_state};t.sub&&t.sid&&(n.profile={sub:t.sub,sid:t.sid}),e._start(n)})).catch((function(e){i.Log.error("SessionMonitor: error from querySessionStatus:",e.message)}))}),1e3)},e.prototype._callback=function(){var e=this;this._userManager.querySessionStatus().then((function(t){var n=!0;t?t.sub===e._sub?(n=!1,e._checkSessionIFrame.start(t.session_state),t.sid===e._sid?i.Log.debug("SessionMonitor._callback: Same sub still logged in at OP, restarting check session iframe; session_state:",t.session_state):(i.Log.debug("SessionMonitor._callback: Same sub still logged in at OP, session state has changed, restarting check session iframe; session_state:",t.session_state),e._userManager.events._raiseUserSessionChanged())):i.Log.debug("SessionMonitor._callback: Different subject signed into OP:",t.sub):i.Log.debug("SessionMonitor._callback: Subject no longer signed into OP"),n&&(e._sub?(i.Log.debug("SessionMonitor._callback: SessionMonitor._callback; raising signed out event"),e._userManager.events._raiseUserSignedOut()):(i.Log.debug("SessionMonitor._callback: SessionMonitor._callback; raising signed in event"),e._userManager.events._raiseUserSignedIn()))})).catch((function(t){e._sub&&(i.Log.debug("SessionMonitor._callback: Error calling queryCurrentSigninSession; raising signed out event",t.message),e._userManager.events._raiseUserSignedOut())}))},r(e,[{key:"_settings",get:function(){return this._userManager.settings}},{key:"_metadataService",get:function(){return this._userManager.metadataService}},{key:"_client_id",get:function(){return this._settings.client_id}},{key:"_checkSessionInterval",get:function(){return this._settings.checkSessionInterval}},{key:"_stopCheckSessionOnError",get:function(){return this._settings.stopCheckSessionOnError}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CheckSessionIFrame=void 0;var r=n(0);function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.CheckSessionIFrame=function(){function e(t,n,r,o){var s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];i(this,e),this._callback=t,this._client_id=n,this._url=r,this._interval=o||2e3,this._stopOnError=s;var a=r.indexOf("/",r.indexOf("//")+2);this._frame_origin=r.substr(0,a),this._frame=window.document.createElement("iframe"),this._frame.style.visibility="hidden",this._frame.style.position="absolute",this._frame.style.display="none",this._frame.width=0,this._frame.height=0,this._frame.src=r}return e.prototype.load=function(){var e=this;return new Promise((function(t){e._frame.onload=function(){t()},window.document.body.appendChild(e._frame),e._boundMessageEvent=e._message.bind(e),window.addEventListener("message",e._boundMessageEvent,!1)}))},e.prototype._message=function(e){e.origin===this._frame_origin&&e.source===this._frame.contentWindow&&("error"===e.data?(r.Log.error("CheckSessionIFrame: error message from check session op iframe"),this._stopOnError&&this.stop()):"changed"===e.data?(r.Log.debug("CheckSessionIFrame: changed message from check session op iframe"),this.stop(),this._callback()):r.Log.debug("CheckSessionIFrame: "+e.data+" message from check session op iframe"))},e.prototype.start=function(e){var t=this;if(this._session_state!==e){r.Log.debug("CheckSessionIFrame.start"),this.stop(),this._session_state=e;var n=function(){t._frame.contentWindow.postMessage(t._client_id+" "+t._session_state,t._frame_origin)};n(),this._timer=window.setInterval(n,this._interval)}},e.prototype.stop=function(){this._session_state=null,this._timer&&(r.Log.debug("CheckSessionIFrame.stop"),window.clearInterval(this._timer),this._timer=null)},e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TokenRevocationClient=void 0;var r=n(0),i=n(2),o=n(1);function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a="access_token",u="refresh_token";t.TokenRevocationClient=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.Global.XMLHttpRequest,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.MetadataService;if(s(this,e),!t)throw r.Log.error("TokenRevocationClient.ctor: No settings provided"),new Error("No settings provided.");this._settings=t,this._XMLHttpRequestCtor=n,this._metadataService=new a(this._settings)}return e.prototype.revoke=function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"access_token";if(!e)throw r.Log.error("TokenRevocationClient.revoke: No token provided"),new Error("No token provided.");if(i!==a&&i!=u)throw r.Log.error("TokenRevocationClient.revoke: Invalid token type"),new Error("Invalid token type.");return this._metadataService.getRevocationEndpoint().then((function(o){if(o){r.Log.debug("TokenRevocationClient.revoke: Revoking "+i);var s=n._settings.client_id,a=n._settings.client_secret;return n._revoke(o,s,a,e,i)}if(t)throw r.Log.error("TokenRevocationClient.revoke: Revocation not supported"),new Error("Revocation not supported")}))},e.prototype._revoke=function(e,t,n,i,o){var s=this;return new Promise((function(a,u){var c=new s._XMLHttpRequestCtor;c.open("POST",e),c.onload=function(){r.Log.debug("TokenRevocationClient.revoke: HTTP response received, status",c.status),200===c.status?a():u(Error(c.statusText+" ("+c.status+")"))},c.onerror=function(){r.Log.debug("TokenRevocationClient.revoke: Network Error."),u("Network Error")};var l="client_id="+encodeURIComponent(t);n&&(l+="&client_secret="+encodeURIComponent(n)),l+="&token_type_hint="+encodeURIComponent(o),l+="&token="+encodeURIComponent(i),c.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),c.send(l)}))},e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CordovaPopupWindow=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0);t.CordovaPopupWindow=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._promise=new Promise((function(e,t){n._resolve=e,n._reject=t})),this.features=t.popupWindowFeatures||"location=no,toolbar=no,zoom=no",this.target=t.popupWindowTarget||"_blank",this.redirect_uri=t.startUrl,i.Log.debug("CordovaPopupWindow.ctor: redirect_uri: "+this.redirect_uri)}return e.prototype._isInAppBrowserInstalled=function(e){return["cordova-plugin-inappbrowser","cordova-plugin-inappbrowser.inappbrowser","org.apache.cordova.inappbrowser"].some((function(t){return e.hasOwnProperty(t)}))},e.prototype.navigate=function(e){if(e&&e.url){if(!window.cordova)return this._error("cordova is undefined");var t=window.cordova.require("cordova/plugin_list").metadata;if(!1===this._isInAppBrowserInstalled(t))return this._error("InAppBrowser plugin not found");this._popup=cordova.InAppBrowser.open(e.url,this.target,this.features),this._popup?(i.Log.debug("CordovaPopupWindow.navigate: popup successfully created"),this._exitCallbackEvent=this._exitCallback.bind(this),this._loadStartCallbackEvent=this._loadStartCallback.bind(this),this._popup.addEventListener("exit",this._exitCallbackEvent,!1),this._popup.addEventListener("loadstart",this._loadStartCallbackEvent,!1)):this._error("Error opening popup window")}else this._error("No url provided");return this.promise},e.prototype._loadStartCallback=function(e){0===e.url.indexOf(this.redirect_uri)&&this._success({url:e.url})},e.prototype._exitCallback=function(e){this._error(e)},e.prototype._success=function(e){this._cleanup(),i.Log.debug("CordovaPopupWindow: Successful response from cordova popup window"),this._resolve(e)},e.prototype._error=function(e){this._cleanup(),i.Log.error(e),this._reject(new Error(e))},e.prototype.close=function(){this._cleanup()},e.prototype._cleanup=function(){this._popup&&(i.Log.debug("CordovaPopupWindow: cleaning up popup"),this._popup.removeEventListener("exit",this._exitCallbackEvent,!1),this._popup.removeEventListener("loadstart",this._loadStartCallbackEvent,!1),this._popup.close()),this._popup=null},r(e,[{key:"promise",get:function(){return this._promise}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n(10),o=n(5),s=n(6),a=n(37),u=n(38),c=n(16),l=n(2),h=n(48),d=n(49),f=n(19),p=n(20),m=n(18),g=n(1),b=n(15),v=n(50);t.default={Version:v.Version,Log:r.Log,OidcClient:i.OidcClient,OidcClientSettings:o.OidcClientSettings,WebStorageStateStore:s.WebStorageStateStore,InMemoryWebStorage:a.InMemoryWebStorage,UserManager:u.UserManager,AccessTokenEvents:c.AccessTokenEvents,MetadataService:l.MetadataService,CordovaPopupNavigator:h.CordovaPopupNavigator,CordovaIFrameNavigator:d.CordovaIFrameNavigator,CheckSessionIFrame:f.CheckSessionIFrame,TokenRevocationClient:p.TokenRevocationClient,SessionMonitor:m.SessionMonitor,Global:g.Global,User:b.User},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ClockService=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.prototype.getEpochTime=function(){return Promise.resolve(Date.now()/1e3|0)},e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ResponseValidator=void 0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=n(0),o=n(2),s=n(25),a=n(11),u=n(12),c=n(4);function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var h=["nonce","at_hash","iat","nbf","exp","aud","iss","c_hash"];t.ResponseValidator=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.MetadataService,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s.UserInfoService,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:c.JoseUtil,h=arguments.length>4&&void 0!==arguments[4]?arguments[4]:a.TokenClient;if(l(this,e),!t)throw i.Log.error("ResponseValidator.ctor: No settings passed to ResponseValidator"),new Error("settings");this._settings=t,this._metadataService=new n(this._settings),this._userInfoService=new r(this._settings),this._joseUtil=u,this._tokenClient=new h(this._settings)}return e.prototype.validateSigninResponse=function(e,t){var n=this;return i.Log.debug("ResponseValidator.validateSigninResponse"),this._processSigninParams(e,t).then((function(t){return i.Log.debug("ResponseValidator.validateSigninResponse: state processed"),n._validateTokens(e,t).then((function(t){return i.Log.debug("ResponseValidator.validateSigninResponse: tokens validated"),n._processClaims(e,t).then((function(e){return i.Log.debug("ResponseValidator.validateSigninResponse: claims processed"),e}))}))}))},e.prototype.validateSignoutResponse=function(e,t){return e.id!==t.state?(i.Log.error("ResponseValidator.validateSignoutResponse: State does not match"),Promise.reject(new Error("State does not match"))):(i.Log.debug("ResponseValidator.validateSignoutResponse: state validated"),t.state=e.data,t.error?(i.Log.warn("ResponseValidator.validateSignoutResponse: Response was error",t.error),Promise.reject(new u.ErrorResponse(t))):Promise.resolve(t))},e.prototype._processSigninParams=function(e,t){if(e.id!==t.state)return i.Log.error("ResponseValidator._processSigninParams: State does not match"),Promise.reject(new Error("State does not match"));if(!e.client_id)return i.Log.error("ResponseValidator._processSigninParams: No client_id on state"),Promise.reject(new Error("No client_id on state"));if(!e.authority)return i.Log.error("ResponseValidator._processSigninParams: No authority on state"),Promise.reject(new Error("No authority on state"));if(this._settings.authority){if(this._settings.authority&&this._settings.authority!==e.authority)return i.Log.error("ResponseValidator._processSigninParams: authority mismatch on settings vs. signin state"),Promise.reject(new Error("authority mismatch on settings vs. signin state"))}else this._settings.authority=e.authority;if(this._settings.client_id){if(this._settings.client_id&&this._settings.client_id!==e.client_id)return i.Log.error("ResponseValidator._processSigninParams: client_id mismatch on settings vs. signin state"),Promise.reject(new Error("client_id mismatch on settings vs. signin state"))}else this._settings.client_id=e.client_id;return i.Log.debug("ResponseValidator._processSigninParams: state validated"),t.state=e.data,t.error?(i.Log.warn("ResponseValidator._processSigninParams: Response was error",t.error),Promise.reject(new u.ErrorResponse(t))):e.nonce&&!t.id_token?(i.Log.error("ResponseValidator._processSigninParams: Expecting id_token in response"),Promise.reject(new Error("No id_token in response"))):!e.nonce&&t.id_token?(i.Log.error("ResponseValidator._processSigninParams: Not expecting id_token in response"),Promise.reject(new Error("Unexpected id_token in response"))):e.code_verifier&&!t.code?(i.Log.error("ResponseValidator._processSigninParams: Expecting code in response"),Promise.reject(new Error("No code in response"))):!e.code_verifier&&t.code?(i.Log.error("ResponseValidator._processSigninParams: Not expecting code in response"),Promise.reject(new Error("Unexpected code in response"))):(t.scope||(t.scope=e.scope),Promise.resolve(t))},e.prototype._processClaims=function(e,t){var n=this;if(t.isOpenIdConnect){if(i.Log.debug("ResponseValidator._processClaims: response is OIDC, processing claims"),t.profile=this._filterProtocolClaims(t.profile),!0!==e.skipUserInfo&&this._settings.loadUserInfo&&t.access_token)return i.Log.debug("ResponseValidator._processClaims: loading user info"),this._userInfoService.getClaims(t.access_token).then((function(e){return i.Log.debug("ResponseValidator._processClaims: user info claims received from user info endpoint"),e.sub!==t.profile.sub?(i.Log.error("ResponseValidator._processClaims: sub from user info endpoint does not match sub in id_token"),Promise.reject(new Error("sub from user info endpoint does not match sub in id_token"))):(t.profile=n._mergeClaims(t.profile,e),i.Log.debug("ResponseValidator._processClaims: user info claims received, updated profile:",t.profile),t)}));i.Log.debug("ResponseValidator._processClaims: not loading user info")}else i.Log.debug("ResponseValidator._processClaims: response is not OIDC, not processing claims");return Promise.resolve(t)},e.prototype._mergeClaims=function(e,t){var n=Object.assign({},e);for(var i in t){var o=t[i];Array.isArray(o)||(o=[o]);for(var s=0;s<o.length;s++){var a=o[s];n[i]?Array.isArray(n[i])?n[i].indexOf(a)<0&&n[i].push(a):n[i]!==a&&("object"===(void 0===a?"undefined":r(a))&&this._settings.mergeClaims?n[i]=this._mergeClaims(n[i],a):n[i]=[n[i],a]):n[i]=a}}return n},e.prototype._filterProtocolClaims=function(e){i.Log.debug("ResponseValidator._filterProtocolClaims, incoming claims:",e);var t=Object.assign({},e);return this._settings._filterProtocolClaims?(h.forEach((function(e){delete t[e]})),i.Log.debug("ResponseValidator._filterProtocolClaims: protocol claims filtered",t)):i.Log.debug("ResponseValidator._filterProtocolClaims: protocol claims not filtered"),t},e.prototype._validateTokens=function(e,t){return t.code?(i.Log.debug("ResponseValidator._validateTokens: Validating code"),this._processCode(e,t)):t.id_token?t.access_token?(i.Log.debug("ResponseValidator._validateTokens: Validating id_token and access_token"),this._validateIdTokenAndAccessToken(e,t)):(i.Log.debug("ResponseValidator._validateTokens: Validating id_token"),this._validateIdToken(e,t)):(i.Log.debug("ResponseValidator._validateTokens: No code to process or id_token to validate"),Promise.resolve(t))},e.prototype._processCode=function(e,t){var n=this,o={client_id:e.client_id,client_secret:e.client_secret,code:t.code,redirect_uri:e.redirect_uri,code_verifier:e.code_verifier};return e.extraTokenParams&&"object"===r(e.extraTokenParams)&&Object.assign(o,e.extraTokenParams),this._tokenClient.exchangeCode(o).then((function(r){for(var o in r)t[o]=r[o];return t.id_token?(i.Log.debug("ResponseValidator._processCode: token response successful, processing id_token"),n._validateIdTokenAttributes(e,t)):(i.Log.debug("ResponseValidator._processCode: token response successful, returning response"),t)}))},e.prototype._validateIdTokenAttributes=function(e,t){var n=this;return this._metadataService.getIssuer().then((function(r){var o=e.client_id,s=n._settings.clockSkew;return i.Log.debug("ResponseValidator._validateIdTokenAttributes: Validaing JWT attributes; using clock skew (in seconds) of: ",s),n._settings.getEpochTime().then((function(a){return n._joseUtil.validateJwtAttributes(t.id_token,r,o,s,a).then((function(n){return e.nonce&&e.nonce!==n.nonce?(i.Log.error("ResponseValidator._validateIdTokenAttributes: Invalid nonce in id_token"),Promise.reject(new Error("Invalid nonce in id_token"))):n.sub?(t.profile=n,t):(i.Log.error("ResponseValidator._validateIdTokenAttributes: No sub present in id_token"),Promise.reject(new Error("No sub present in id_token")))}))}))}))},e.prototype._validateIdTokenAndAccessToken=function(e,t){var n=this;return this._validateIdToken(e,t).then((function(e){return n._validateAccessToken(e)}))},e.prototype._getSigningKeyForJwt=function(e){var t=this;return this._metadataService.getSigningKeys().then((function(n){var r=e.header.kid;if(!n)return i.Log.error("ResponseValidator._validateIdToken: No signing keys from metadata"),Promise.reject(new Error("No signing keys from metadata"));i.Log.debug("ResponseValidator._validateIdToken: Received signing keys");var o=void 0;if(r)o=n.filter((function(e){return e.kid===r}))[0];else{if((n=t._filterByAlg(n,e.header.alg)).length>1)return i.Log.error("ResponseValidator._validateIdToken: No kid found in id_token and more than one key found in metadata"),Promise.reject(new Error("No kid found in id_token and more than one key found in metadata"));o=n[0]}return Promise.resolve(o)}))},e.prototype._getSigningKeyForJwtWithSingleRetry=function(e){var t=this;return this._getSigningKeyForJwt(e).then((function(n){return n?Promise.resolve(n):(t._metadataService.resetSigningKeys(),t._getSigningKeyForJwt(e))}))},e.prototype._validateIdToken=function(e,t){var n=this;if(!e.nonce)return i.Log.error("ResponseValidator._validateIdToken: No nonce on state"),Promise.reject(new Error("No nonce on state"));var r=this._joseUtil.parseJwt(t.id_token);return r&&r.header&&r.payload?e.nonce!==r.payload.nonce?(i.Log.error("ResponseValidator._validateIdToken: Invalid nonce in id_token"),Promise.reject(new Error("Invalid nonce in id_token"))):this._metadataService.getIssuer().then((function(o){return i.Log.debug("ResponseValidator._validateIdToken: Received issuer"),n._getSigningKeyForJwtWithSingleRetry(r).then((function(s){if(!s)return i.Log.error("ResponseValidator._validateIdToken: No key matching kid or alg found in signing keys"),Promise.reject(new Error("No key matching kid or alg found in signing keys"));var a=e.client_id,u=n._settings.clockSkew;return i.Log.debug("ResponseValidator._validateIdToken: Validaing JWT; using clock skew (in seconds) of: ",u),n._joseUtil.validateJwt(t.id_token,s,o,a,u).then((function(){return i.Log.debug("ResponseValidator._validateIdToken: JWT validation successful"),r.payload.sub?(t.profile=r.payload,t):(i.Log.error("ResponseValidator._validateIdToken: No sub present in id_token"),Promise.reject(new Error("No sub present in id_token")))}))}))})):(i.Log.error("ResponseValidator._validateIdToken: Failed to parse id_token",r),Promise.reject(new Error("Failed to parse id_token")))},e.prototype._filterByAlg=function(e,t){var n=null;if(t.startsWith("RS"))n="RSA";else if(t.startsWith("PS"))n="PS";else{if(!t.startsWith("ES"))return i.Log.debug("ResponseValidator._filterByAlg: alg not supported: ",t),[];n="EC"}return i.Log.debug("ResponseValidator._filterByAlg: Looking for keys that match kty: ",n),e=e.filter((function(e){return e.kty===n})),i.Log.debug("ResponseValidator._filterByAlg: Number of keys that match kty: ",n,e.length),e},e.prototype._validateAccessToken=function(e){if(!e.profile)return i.Log.error("ResponseValidator._validateAccessToken: No profile loaded from id_token"),Promise.reject(new Error("No profile loaded from id_token"));if(!e.profile.at_hash)return i.Log.error("ResponseValidator._validateAccessToken: No at_hash in id_token"),Promise.reject(new Error("No at_hash in id_token"));if(!e.id_token)return i.Log.error("ResponseValidator._validateAccessToken: No id_token"),Promise.reject(new Error("No id_token"));var t=this._joseUtil.parseJwt(e.id_token);if(!t||!t.header)return i.Log.error("ResponseValidator._validateAccessToken: Failed to parse id_token",t),Promise.reject(new Error("Failed to parse id_token"));var n=t.header.alg;if(!n||5!==n.length)return i.Log.error("ResponseValidator._validateAccessToken: Unsupported alg:",n),Promise.reject(new Error("Unsupported alg: "+n));var r=n.substr(2,3);if(!r)return i.Log.error("ResponseValidator._validateAccessToken: Unsupported alg:",n,r),Promise.reject(new Error("Unsupported alg: "+n));if(256!==(r=parseInt(r))&&384!==r&&512!==r)return i.Log.error("ResponseValidator._validateAccessToken: Unsupported alg:",n,r),Promise.reject(new Error("Unsupported alg: "+n));var o="sha"+r,s=this._joseUtil.hashString(e.access_token,o);if(!s)return i.Log.error("ResponseValidator._validateAccessToken: access_token hash failed:",o),Promise.reject(new Error("Failed to validate at_hash"));var a=s.substr(0,s.length/2),u=this._joseUtil.hexToBase64Url(a);return u!==e.profile.at_hash?(i.Log.error("ResponseValidator._validateAccessToken: Failed to validate at_hash",u,e.profile.at_hash),Promise.reject(new Error("Failed to validate at_hash"))):(i.Log.debug("ResponseValidator._validateAccessToken: success"),Promise.resolve(e))},e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UserInfoService=void 0;var r=n(7),i=n(2),o=n(0),s=n(4);function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.UserInfoService=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.JsonService,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.MetadataService,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:s.JoseUtil;if(a(this,e),!t)throw o.Log.error("UserInfoService.ctor: No settings passed"),new Error("settings");this._settings=t,this._jsonService=new n(void 0,void 0,this._getClaimsFromJwt.bind(this)),this._metadataService=new u(this._settings),this._joseUtil=c}return e.prototype.getClaims=function(e){var t=this;return e?this._metadataService.getUserInfoEndpoint().then((function(n){return o.Log.debug("UserInfoService.getClaims: received userinfo url",n),t._jsonService.getJson(n,e).then((function(e){return o.Log.debug("UserInfoService.getClaims: claims received",e),e}))})):(o.Log.error("UserInfoService.getClaims: No token passed"),Promise.reject(new Error("A token is required")))},e.prototype._getClaimsFromJwt=function e(t){var n=this;try{var r=this._joseUtil.parseJwt(t.responseText);if(!r||!r.header||!r.payload)return o.Log.error("UserInfoService._getClaimsFromJwt: Failed to parse JWT",r),Promise.reject(new Error("Failed to parse id_token"));var i=r.header.kid,s=void 0;switch(this._settings.userInfoJwtIssuer){case"OP":s=this._metadataService.getIssuer();break;case"ANY":s=Promise.resolve(r.payload.iss);break;default:s=Promise.resolve(this._settings.userInfoJwtIssuer)}return s.then((function(e){return o.Log.debug("UserInfoService._getClaimsFromJwt: Received issuer:"+e),n._metadataService.getSigningKeys().then((function(s){if(!s)return o.Log.error("UserInfoService._getClaimsFromJwt: No signing keys from metadata"),Promise.reject(new Error("No signing keys from metadata"));o.Log.debug("UserInfoService._getClaimsFromJwt: Received signing keys");var a=void 0;if(i)a=s.filter((function(e){return e.kid===i}))[0];else{if((s=n._filterByAlg(s,r.header.alg)).length>1)return o.Log.error("UserInfoService._getClaimsFromJwt: No kid found in id_token and more than one key found in metadata"),Promise.reject(new Error("No kid found in id_token and more than one key found in metadata"));a=s[0]}if(!a)return o.Log.error("UserInfoService._getClaimsFromJwt: No key matching kid or alg found in signing keys"),Promise.reject(new Error("No key matching kid or alg found in signing keys"));var u=n._settings.client_id,c=n._settings.clockSkew;return o.Log.debug("UserInfoService._getClaimsFromJwt: Validaing JWT; using clock skew (in seconds) of: ",c),n._joseUtil.validateJwt(t.responseText,a,e,u,c,void 0,!0).then((function(){return o.Log.debug("UserInfoService._getClaimsFromJwt: JWT validation successful"),r.payload}))}))}))}catch(e){return o.Log.error("UserInfoService._getClaimsFromJwt: Error parsing JWT response",e.message),void reject(e)}},e.prototype._filterByAlg=function(e,t){var n=null;if(t.startsWith("RS"))n="RSA";else if(t.startsWith("PS"))n="PS";else{if(!t.startsWith("ES"))return o.Log.debug("UserInfoService._filterByAlg: alg not supported: ",t),[];n="EC"}return o.Log.debug("UserInfoService._filterByAlg: Looking for keys that match kty: ",n),e=e.filter((function(e){return e.kty===n})),o.Log.debug("UserInfoService._filterByAlg: Number of keys that match kty: ",n,e.length),e},e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AllowedSigningAlgs=t.b64tohex=t.hextob64u=t.crypto=t.X509=t.KeyUtil=t.jws=void 0;var r=n(27);t.jws=r.jws,t.KeyUtil=r.KEYUTIL,t.X509=r.X509,t.crypto=r.crypto,t.hextob64u=r.hextob64u,t.b64tohex=r.b64tohex,t.AllowedSigningAlgs=["RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"]},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r={userAgent:!1},i={};
/*!
Copyright (c) 2011, Yahoo! Inc. All rights reserved.
Code licensed under the BSD License:
http://developer.yahoo.com/yui/license.html
version: 2.9.0
*/if(void 0===o)var o={};o.lang={extend:function(e,t,n){if(!t||!e)throw new Error("YAHOO.lang.extend failed, please check that all dependencies are included.");var i=function(){};if(i.prototype=t.prototype,e.prototype=new i,e.prototype.constructor=e,e.superclass=t.prototype,t.prototype.constructor==Object.prototype.constructor&&(t.prototype.constructor=t),n){var o;for(o in n)e.prototype[o]=n[o];var s=function(){},a=["toString","valueOf"];try{/MSIE/.test(r.userAgent)&&(s=function(e,t){for(o=0;o<a.length;o+=1){var n=a[o],r=t[n];"function"==typeof r&&r!=Object.prototype[n]&&(e[n]=r)}})}catch(e){}s(e.prototype,n)}}};
/*! CryptoJS v3.1.2 core-fix.js
 * code.google.com/p/crypto-js
 * (c) 2009-2013 by Jeff Mott. All rights reserved.
 * code.google.com/p/crypto-js/wiki/License
 * THIS IS FIX of 'core.js' to fix Hmac issue.
 * https://code.google.com/p/crypto-js/issues/detail?id=84
 * https://crypto-js.googlecode.com/svn-history/r667/branches/3.x/src/core.js
 */
var s,a,u,c,l,h,d,f,p,m,g,b=b||(s=Math,u=(a={}).lib={},c=u.Base=function(){function e(){}return{extend:function(t){e.prototype=this;var n=new e;return t&&n.mixIn(t),n.hasOwnProperty("init")||(n.init=function(){n.$super.init.apply(this,arguments)}),n.init.prototype=n,n.$super=this,n},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),l=u.WordArray=c.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||d).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes,i=e.sigBytes;if(this.clamp(),r%4)for(var o=0;o<i;o++){var s=n[o>>>2]>>>24-o%4*8&255;t[r+o>>>2]|=s<<24-(r+o)%4*8}else for(o=0;o<i;o+=4)t[r+o>>>2]=n[o>>>2];return this.sigBytes+=i,this},clamp:function(){var e=this.words,t=this.sigBytes;e[t>>>2]&=4294967295<<32-t%4*8,e.length=s.ceil(t/4)},clone:function(){var e=c.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],n=0;n<e;n+=4)t.push(4294967296*s.random()|0);return new l.init(t,e)}}),h=a.enc={},d=h.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++){var o=t[i>>>2]>>>24-i%4*8&255;r.push((o>>>4).toString(16)),r.push((15&o).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new l.init(n,t/2)}},f=h.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++){var o=t[i>>>2]>>>24-i%4*8&255;r.push(String.fromCharCode(o))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new l.init(n,t)}},p=h.Utf8={stringify:function(e){try{return decodeURIComponent(escape(f.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return f.parse(unescape(encodeURIComponent(e)))}},m=u.BufferedBlockAlgorithm=c.extend({reset:function(){this._data=new l.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=p.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(e){var t=this._data,n=t.words,r=t.sigBytes,i=this.blockSize,o=r/(4*i),a=(o=e?s.ceil(o):s.max((0|o)-this._minBufferSize,0))*i,u=s.min(4*a,r);if(a){for(var c=0;c<a;c+=i)this._doProcessBlock(n,c);var h=n.splice(0,a);t.sigBytes-=u}return new l.init(h,u)},clone:function(){var e=c.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),u.Hasher=m.extend({cfg:c.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){m.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new g.HMAC.init(e,n).finalize(t)}}}),g=a.algo={},a);!function(e){var t,n=(t=b).lib,r=n.Base,i=n.WordArray;(t=t.x64={}).Word=r.extend({init:function(e,t){this.high=e,this.low=t}}),t.WordArray=r.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:8*e.length},toX32:function(){for(var e=this.words,t=e.length,n=[],r=0;r<t;r++){var o=e[r];n.push(o.high),n.push(o.low)}return i.create(n,this.sigBytes)},clone:function(){for(var e=r.clone.call(this),t=e.words=this.words.slice(0),n=t.length,i=0;i<n;i++)t[i]=t[i].clone();return e}})}(),function(){var e=b,t=e.lib.WordArray;e.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,r=this._map;e.clamp(),e=[];for(var i=0;i<n;i+=3)for(var o=(t[i>>>2]>>>24-i%4*8&255)<<16|(t[i+1>>>2]>>>24-(i+1)%4*8&255)<<8|t[i+2>>>2]>>>24-(i+2)%4*8&255,s=0;4>s&&i+.75*s<n;s++)e.push(r.charAt(o>>>6*(3-s)&63));if(t=r.charAt(64))for(;e.length%4;)e.push(t);return e.join("")},parse:function(e){var n=e.length,r=this._map;(i=r.charAt(64))&&-1!=(i=e.indexOf(i))&&(n=i);for(var i=[],o=0,s=0;s<n;s++)if(s%4){var a=r.indexOf(e.charAt(s-1))<<s%4*2,u=r.indexOf(e.charAt(s))>>>6-s%4*2;i[o>>>2]|=(a|u)<<24-o%4*8,o++}return t.create(i,o)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(e){for(var t=b,n=(i=t.lib).WordArray,r=i.Hasher,i=t.algo,o=[],s=[],a=function(e){return 4294967296*(e-(0|e))|0},u=2,c=0;64>c;){var l;e:{l=u;for(var h=e.sqrt(l),d=2;d<=h;d++)if(!(l%d)){l=!1;break e}l=!0}l&&(8>c&&(o[c]=a(e.pow(u,.5))),s[c]=a(e.pow(u,1/3)),c++),u++}var f=[];i=i.SHA256=r.extend({_doReset:function(){this._hash=new n.init(o.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],i=n[1],o=n[2],a=n[3],u=n[4],c=n[5],l=n[6],h=n[7],d=0;64>d;d++){if(16>d)f[d]=0|e[t+d];else{var p=f[d-15],m=f[d-2];f[d]=((p<<25|p>>>7)^(p<<14|p>>>18)^p>>>3)+f[d-7]+((m<<15|m>>>17)^(m<<13|m>>>19)^m>>>10)+f[d-16]}p=h+((u<<26|u>>>6)^(u<<21|u>>>11)^(u<<7|u>>>25))+(u&c^~u&l)+s[d]+f[d],m=((r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22))+(r&i^r&o^i&o),h=l,l=c,c=u,u=a+p|0,a=o,o=i,i=r,r=p+m|0}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+o|0,n[3]=n[3]+a|0,n[4]=n[4]+u|0,n[5]=n[5]+c|0,n[6]=n[6]+l|0,n[7]=n[7]+h|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,i=8*t.sigBytes;return n[i>>>5]|=128<<24-i%32,n[14+(i+64>>>9<<4)]=e.floor(r/4294967296),n[15+(i+64>>>9<<4)]=r,t.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}}),t.SHA256=r._createHelper(i),t.HmacSHA256=r._createHmacHelper(i)}(Math),function(){function e(){return r.create.apply(r,arguments)}for(var t=b,n=t.lib.Hasher,r=(o=t.x64).Word,i=o.WordArray,o=t.algo,s=[e(1116352408,3609767458),e(1899447441,602891725),e(3049323471,3964484399),e(3921009573,2173295548),e(961987163,4081628472),e(1508970993,3053834265),e(2453635748,2937671579),e(2870763221,3664609560),e(3624381080,2734883394),e(310598401,1164996542),e(607225278,1323610764),e(1426881987,3590304994),e(1925078388,4068182383),e(2162078206,991336113),e(2614888103,633803317),e(3248222580,3479774868),e(3835390401,2666613458),e(4022224774,944711139),e(264347078,2341262773),e(604807628,2007800933),e(770255983,1495990901),e(1249150122,1856431235),e(1555081692,3175218132),e(1996064986,2198950837),e(2554220882,3999719339),e(2821834349,766784016),e(2952996808,2566594879),e(3210313671,3203337956),e(3336571891,1034457026),e(3584528711,2466948901),e(113926993,3758326383),e(338241895,168717936),e(666307205,1188179964),e(773529912,1546045734),e(1294757372,1522805485),e(1396182291,2643833823),e(1695183700,2343527390),e(1986661051,1014477480),e(2177026350,1206759142),e(2456956037,344077627),e(2730485921,1290863460),e(2820302411,3158454273),e(3259730800,3505952657),e(3345764771,106217008),e(3516065817,3606008344),e(3600352804,1432725776),e(4094571909,1467031594),e(275423344,851169720),e(430227734,3100823752),e(506948616,1363258195),e(659060556,3750685593),e(883997877,3785050280),e(958139571,3318307427),e(1322822218,3812723403),e(1537002063,2003034995),e(1747873779,3602036899),e(1955562222,1575990012),e(2024104815,1125592928),e(2227730452,2716904306),e(2361852424,442776044),e(2428436474,593698344),e(2756734187,3733110249),e(3204031479,2999351573),e(3329325298,3815920427),e(3391569614,3928383900),e(3515267271,566280711),e(3940187606,3454069534),e(4118630271,4000239992),e(116418474,1914138554),e(174292421,2731055270),e(289380356,3203993006),e(460393269,320620315),e(685471733,587496836),e(852142971,1086792851),e(1017036298,365543100),e(1126000580,2618297676),e(1288033470,3409855158),e(1501505948,4234509866),e(1607167915,987167468),e(1816402316,1246189591)],a=[],u=0;80>u;u++)a[u]=e();o=o.SHA512=n.extend({_doReset:function(){this._hash=new i.init([new r.init(1779033703,4089235720),new r.init(3144134277,2227873595),new r.init(1013904242,4271175723),new r.init(2773480762,1595750129),new r.init(1359893119,2917565137),new r.init(2600822924,725511199),new r.init(528734635,4215389547),new r.init(1541459225,327033209)])},_doProcessBlock:function(e,t){for(var n=(h=this._hash.words)[0],r=h[1],i=h[2],o=h[3],u=h[4],c=h[5],l=h[6],h=h[7],d=n.high,f=n.low,p=r.high,m=r.low,g=i.high,b=i.low,v=o.high,y=o.low,_=u.high,w=u.low,E=c.high,S=c.low,M=l.high,O=l.low,A=h.high,C=h.low,T=d,k=f,x=p,j=m,I=g,R=b,N=v,P=y,D=_,U=w,L=E,F=S,B=M,H=O,q=A,V=C,G=0;80>G;G++){var z=a[G];if(16>G)var W=z.high=0|e[t+2*G],K=z.low=0|e[t+2*G+1];else{W=((K=(W=a[G-15]).high)>>>1|(Y=W.low)<<31)^(K>>>8|Y<<24)^K>>>7;var Y=(Y>>>1|K<<31)^(Y>>>8|K<<24)^(Y>>>7|K<<25),Q=((K=(Q=a[G-2]).high)>>>19|(J=Q.low)<<13)^(K<<3|J>>>29)^K>>>6,J=(J>>>19|K<<13)^(J<<3|K>>>29)^(J>>>6|K<<26),Z=(K=a[G-7]).high,$=(X=a[G-16]).high,X=X.low;W=(W=(W=W+Z+((K=Y+K.low)>>>0<Y>>>0?1:0))+Q+((K+=J)>>>0<J>>>0?1:0))+$+((K+=X)>>>0<X>>>0?1:0),z.high=W,z.low=K}Z=D&L^~D&B,X=U&F^~U&H,z=T&x^T&I^x&I;var ee=k&j^k&R^j&R,te=(Y=(T>>>28|k<<4)^(T<<30|k>>>2)^(T<<25|k>>>7),Q=(k>>>28|T<<4)^(k<<30|T>>>2)^(k<<25|T>>>7),(J=s[G]).high),ne=J.low;$=q+((D>>>14|U<<18)^(D>>>18|U<<14)^(D<<23|U>>>9))+((J=V+((U>>>14|D<<18)^(U>>>18|D<<14)^(U<<23|D>>>9)))>>>0<V>>>0?1:0),q=B,V=H,B=L,H=F,L=D,F=U,D=N+($=($=($=$+Z+((J+=X)>>>0<X>>>0?1:0))+te+((J+=ne)>>>0<ne>>>0?1:0))+W+((J+=K)>>>0<K>>>0?1:0))+((U=P+J|0)>>>0<P>>>0?1:0)|0,N=I,P=R,I=x,R=j,x=T,j=k,T=$+(z=Y+z+((K=Q+ee)>>>0<Q>>>0?1:0))+((k=J+K|0)>>>0<J>>>0?1:0)|0}f=n.low=f+k,n.high=d+T+(f>>>0<k>>>0?1:0),m=r.low=m+j,r.high=p+x+(m>>>0<j>>>0?1:0),b=i.low=b+R,i.high=g+I+(b>>>0<R>>>0?1:0),y=o.low=y+P,o.high=v+N+(y>>>0<P>>>0?1:0),w=u.low=w+U,u.high=_+D+(w>>>0<U>>>0?1:0),S=c.low=S+F,c.high=E+L+(S>>>0<F>>>0?1:0),O=l.low=O+H,l.high=M+B+(O>>>0<H>>>0?1:0),C=h.low=C+V,h.high=A+q+(C>>>0<V>>>0?1:0)},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[30+(r+128>>>10<<5)]=Math.floor(n/4294967296),t[31+(r+128>>>10<<5)]=n,e.sigBytes=4*t.length,this._process(),this._hash.toX32()},clone:function(){var e=n.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32}),t.SHA512=n._createHelper(o),t.HmacSHA512=n._createHmacHelper(o)}(),function(){var e=b,t=(i=e.x64).Word,n=i.WordArray,r=(i=e.algo).SHA512,i=i.SHA384=r.extend({_doReset:function(){this._hash=new n.init([new t.init(3418070365,3238371032),new t.init(1654270250,914150663),new t.init(2438529370,812702999),new t.init(355462360,4144912697),new t.init(1731405415,4290775857),new t.init(2394180231,1750603025),new t.init(3675008525,1694076839),new t.init(1203062813,3204075428)])},_doFinalize:function(){var e=r._doFinalize.call(this);return e.sigBytes-=16,e}});e.SHA384=r._createHelper(i),e.HmacSHA384=r._createHmacHelper(i)}();
/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
 */
var v,y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function _(e){var t,n,r="";for(t=0;t+3<=e.length;t+=3)n=parseInt(e.substring(t,t+3),16),r+=y.charAt(n>>6)+y.charAt(63&n);for(t+1==e.length?(n=parseInt(e.substring(t,t+1),16),r+=y.charAt(n<<2)):t+2==e.length&&(n=parseInt(e.substring(t,t+2),16),r+=y.charAt(n>>2)+y.charAt((3&n)<<4));(3&r.length)>0;)r+="=";return r}function w(e){var t,n,r,i="",o=0;for(t=0;t<e.length&&"="!=e.charAt(t);++t)(r=y.indexOf(e.charAt(t)))<0||(0==o?(i+=T(r>>2),n=3&r,o=1):1==o?(i+=T(n<<2|r>>4),n=15&r,o=2):2==o?(i+=T(n),i+=T(r>>2),n=3&r,o=3):(i+=T(n<<2|r>>4),i+=T(15&r),o=0));return 1==o&&(i+=T(n<<2)),i}function E(e){var t,n=w(e),r=new Array;for(t=0;2*t<n.length;++t)r[t]=parseInt(n.substring(2*t,2*t+2),16);return r}function S(e,t,n){null!=e&&("number"==typeof e?this.fromNumber(e,t,n):null==t&&"string"!=typeof e?this.fromString(e,256):this.fromString(e,t))}function M(){return new S(null)}"Microsoft Internet Explorer"==r.appName?(S.prototype.am=function(e,t,n,r,i,o){for(var s=32767&t,a=t>>15;--o>=0;){var u=32767&this[e],c=this[e++]>>15,l=a*u+c*s;i=((u=s*u+((32767&l)<<15)+n[r]+(1073741823&i))>>>30)+(l>>>15)+a*c+(i>>>30),n[r++]=1073741823&u}return i},v=30):"Netscape"!=r.appName?(S.prototype.am=function(e,t,n,r,i,o){for(;--o>=0;){var s=t*this[e++]+n[r]+i;i=Math.floor(s/67108864),n[r++]=67108863&s}return i},v=26):(S.prototype.am=function(e,t,n,r,i,o){for(var s=16383&t,a=t>>14;--o>=0;){var u=16383&this[e],c=this[e++]>>14,l=a*u+c*s;i=((u=s*u+((16383&l)<<14)+n[r]+i)>>28)+(l>>14)+a*c,n[r++]=268435455&u}return i},v=28),S.prototype.DB=v,S.prototype.DM=(1<<v)-1,S.prototype.DV=1<<v,S.prototype.FV=Math.pow(2,52),S.prototype.F1=52-v,S.prototype.F2=2*v-52;var O,A,C=new Array;for(O="0".charCodeAt(0),A=0;A<=9;++A)C[O++]=A;for(O="a".charCodeAt(0),A=10;A<36;++A)C[O++]=A;for(O="A".charCodeAt(0),A=10;A<36;++A)C[O++]=A;function T(e){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(e)}function k(e,t){var n=C[e.charCodeAt(t)];return null==n?-1:n}function x(e){var t=M();return t.fromInt(e),t}function j(e){var t,n=1;return 0!=(t=e>>>16)&&(e=t,n+=16),0!=(t=e>>8)&&(e=t,n+=8),0!=(t=e>>4)&&(e=t,n+=4),0!=(t=e>>2)&&(e=t,n+=2),0!=(t=e>>1)&&(e=t,n+=1),n}function I(e){this.m=e}function R(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function N(e,t){return e&t}function P(e,t){return e|t}function D(e,t){return e^t}function U(e,t){return e&~t}function L(e){if(0==e)return-1;var t=0;return 0==(65535&e)&&(e>>=16,t+=16),0==(255&e)&&(e>>=8,t+=8),0==(15&e)&&(e>>=4,t+=4),0==(3&e)&&(e>>=2,t+=2),0==(1&e)&&++t,t}function F(e){for(var t=0;0!=e;)e&=e-1,++t;return t}function B(){}function H(e){return e}function q(e){this.r2=M(),this.q3=M(),S.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}I.prototype.convert=function(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e},I.prototype.revert=function(e){return e},I.prototype.reduce=function(e){e.divRemTo(this.m,null,e)},I.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},I.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},R.prototype.convert=function(e){var t=M();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(S.ZERO)>0&&this.m.subTo(t,t),t},R.prototype.revert=function(e){var t=M();return e.copyTo(t),this.reduce(t),t},R.prototype.reduce=function(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var n=32767&e[t],r=n*this.mpl+((n*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(e[n=t+this.m.t]+=this.m.am(0,r,e,t,0,this.m.t);e[n]>=e.DV;)e[n]-=e.DV,e[++n]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)},R.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},R.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},S.prototype.copyTo=function(e){for(var t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s},S.prototype.fromInt=function(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+this.DV:this.t=0},S.prototype.fromString=function(e,t){var n;if(16==t)n=4;else if(8==t)n=3;else if(256==t)n=8;else if(2==t)n=1;else if(32==t)n=5;else{if(4!=t)return void this.fromRadix(e,t);n=2}this.t=0,this.s=0;for(var r=e.length,i=!1,o=0;--r>=0;){var s=8==n?255&e[r]:k(e,r);s<0?"-"==e.charAt(r)&&(i=!0):(i=!1,0==o?this[this.t++]=s:o+n>this.DB?(this[this.t-1]|=(s&(1<<this.DB-o)-1)<<o,this[this.t++]=s>>this.DB-o):this[this.t-1]|=s<<o,(o+=n)>=this.DB&&(o-=this.DB))}8==n&&0!=(128&e[0])&&(this.s=-1,o>0&&(this[this.t-1]|=(1<<this.DB-o)-1<<o)),this.clamp(),i&&S.ZERO.subTo(this,this)},S.prototype.clamp=function(){for(var e=this.s&this.DM;this.t>0&&this[this.t-1]==e;)--this.t},S.prototype.dlShiftTo=function(e,t){var n;for(n=this.t-1;n>=0;--n)t[n+e]=this[n];for(n=e-1;n>=0;--n)t[n]=0;t.t=this.t+e,t.s=this.s},S.prototype.drShiftTo=function(e,t){for(var n=e;n<this.t;++n)t[n-e]=this[n];t.t=Math.max(this.t-e,0),t.s=this.s},S.prototype.lShiftTo=function(e,t){var n,r=e%this.DB,i=this.DB-r,o=(1<<i)-1,s=Math.floor(e/this.DB),a=this.s<<r&this.DM;for(n=this.t-1;n>=0;--n)t[n+s+1]=this[n]>>i|a,a=(this[n]&o)<<r;for(n=s-1;n>=0;--n)t[n]=0;t[s]=a,t.t=this.t+s+1,t.s=this.s,t.clamp()},S.prototype.rShiftTo=function(e,t){t.s=this.s;var n=Math.floor(e/this.DB);if(n>=this.t)t.t=0;else{var r=e%this.DB,i=this.DB-r,o=(1<<r)-1;t[0]=this[n]>>r;for(var s=n+1;s<this.t;++s)t[s-n-1]|=(this[s]&o)<<i,t[s-n]=this[s]>>r;r>0&&(t[this.t-n-1]|=(this.s&o)<<i),t.t=this.t-n,t.clamp()}},S.prototype.subTo=function(e,t){for(var n=0,r=0,i=Math.min(e.t,this.t);n<i;)r+=this[n]-e[n],t[n++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r-=e.s;n<this.t;)r+=this[n],t[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<e.t;)r-=e[n],t[n++]=r&this.DM,r>>=this.DB;r-=e.s}t.s=r<0?-1:0,r<-1?t[n++]=this.DV+r:r>0&&(t[n++]=r),t.t=n,t.clamp()},S.prototype.multiplyTo=function(e,t){var n=this.abs(),r=e.abs(),i=n.t;for(t.t=i+r.t;--i>=0;)t[i]=0;for(i=0;i<r.t;++i)t[i+n.t]=n.am(0,r[i],t,i,0,n.t);t.s=0,t.clamp(),this.s!=e.s&&S.ZERO.subTo(t,t)},S.prototype.squareTo=function(e){for(var t=this.abs(),n=e.t=2*t.t;--n>=0;)e[n]=0;for(n=0;n<t.t-1;++n){var r=t.am(n,t[n],e,2*n,0,1);(e[n+t.t]+=t.am(n+1,2*t[n],e,2*n+1,r,t.t-n-1))>=t.DV&&(e[n+t.t]-=t.DV,e[n+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(n,t[n],e,2*n,0,1)),e.s=0,e.clamp()},S.prototype.divRemTo=function(e,t,n){var r=e.abs();if(!(r.t<=0)){var i=this.abs();if(i.t<r.t)return null!=t&&t.fromInt(0),void(null!=n&&this.copyTo(n));null==n&&(n=M());var o=M(),s=this.s,a=e.s,u=this.DB-j(r[r.t-1]);u>0?(r.lShiftTo(u,o),i.lShiftTo(u,n)):(r.copyTo(o),i.copyTo(n));var c=o.t,l=o[c-1];if(0!=l){var h=l*(1<<this.F1)+(c>1?o[c-2]>>this.F2:0),d=this.FV/h,f=(1<<this.F1)/h,p=1<<this.F2,m=n.t,g=m-c,b=null==t?M():t;for(o.dlShiftTo(g,b),n.compareTo(b)>=0&&(n[n.t++]=1,n.subTo(b,n)),S.ONE.dlShiftTo(c,b),b.subTo(o,o);o.t<c;)o[o.t++]=0;for(;--g>=0;){var v=n[--m]==l?this.DM:Math.floor(n[m]*d+(n[m-1]+p)*f);if((n[m]+=o.am(0,v,n,g,0,c))<v)for(o.dlShiftTo(g,b),n.subTo(b,n);n[m]<--v;)n.subTo(b,n)}null!=t&&(n.drShiftTo(c,t),s!=a&&S.ZERO.subTo(t,t)),n.t=c,n.clamp(),u>0&&n.rShiftTo(u,n),s<0&&S.ZERO.subTo(n,n)}}},S.prototype.invDigit=function(){if(this.t<1)return 0;var e=this[0];if(0==(1&e))return 0;var t=3&e;return(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)>0?this.DV-t:-t},S.prototype.isEven=function(){return 0==(this.t>0?1&this[0]:this.s)},S.prototype.exp=function(e,t){if(e>4294967295||e<1)return S.ONE;var n=M(),r=M(),i=t.convert(this),o=j(e)-1;for(i.copyTo(n);--o>=0;)if(t.sqrTo(n,r),(e&1<<o)>0)t.mulTo(r,i,n);else{var s=n;n=r,r=s}return t.revert(n)},S.prototype.toString=function(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)return this.toRadix(e);t=2}var n,r=(1<<t)-1,i=!1,o="",s=this.t,a=this.DB-s*this.DB%t;if(s-- >0)for(a<this.DB&&(n=this[s]>>a)>0&&(i=!0,o=T(n));s>=0;)a<t?(n=(this[s]&(1<<a)-1)<<t-a,n|=this[--s]>>(a+=this.DB-t)):(n=this[s]>>(a-=t)&r,a<=0&&(a+=this.DB,--s)),n>0&&(i=!0),i&&(o+=T(n));return i?o:"0"},S.prototype.negate=function(){var e=M();return S.ZERO.subTo(this,e),e},S.prototype.abs=function(){return this.s<0?this.negate():this},S.prototype.compareTo=function(e){var t=this.s-e.s;if(0!=t)return t;var n=this.t;if(0!=(t=n-e.t))return this.s<0?-t:t;for(;--n>=0;)if(0!=(t=this[n]-e[n]))return t;return 0},S.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+j(this[this.t-1]^this.s&this.DM)},S.prototype.mod=function(e){var t=M();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(S.ZERO)>0&&e.subTo(t,t),t},S.prototype.modPowInt=function(e,t){var n;return n=e<256||t.isEven()?new I(t):new R(t),this.exp(e,n)},S.ZERO=x(0),S.ONE=x(1),B.prototype.convert=H,B.prototype.revert=H,B.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n)},B.prototype.sqrTo=function(e,t){e.squareTo(t)},q.prototype.convert=function(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=M();return e.copyTo(t),this.reduce(t),t},q.prototype.revert=function(e){return e},q.prototype.reduce=function(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)},q.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},q.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)};var V,G,z,W=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],K=(1<<26)/W[W.length-1];
/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
 */function Y(){this.i=0,this.j=0,this.S=new Array}
/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
 */
function Q(){!function(e){G[z++]^=255&e,G[z++]^=e>>8&255,G[z++]^=e>>16&255,G[z++]^=e>>24&255,z>=256&&(z-=256)}((new Date).getTime())}if(S.prototype.chunkSize=function(e){return Math.floor(Math.LN2*this.DB/Math.log(e))},S.prototype.toRadix=function(e){if(null==e&&(e=10),0==this.signum()||e<2||e>36)return"0";var t=this.chunkSize(e),n=Math.pow(e,t),r=x(n),i=M(),o=M(),s="";for(this.divRemTo(r,i,o);i.signum()>0;)s=(n+o.intValue()).toString(e).substr(1)+s,i.divRemTo(r,i,o);return o.intValue().toString(e)+s},S.prototype.fromRadix=function(e,t){this.fromInt(0),null==t&&(t=10);for(var n=this.chunkSize(t),r=Math.pow(t,n),i=!1,o=0,s=0,a=0;a<e.length;++a){var u=k(e,a);u<0?"-"==e.charAt(a)&&0==this.signum()&&(i=!0):(s=t*s+u,++o>=n&&(this.dMultiply(r),this.dAddOffset(s,0),o=0,s=0))}o>0&&(this.dMultiply(Math.pow(t,o)),this.dAddOffset(s,0)),i&&S.ZERO.subTo(this,this)},S.prototype.fromNumber=function(e,t,n){if("number"==typeof t)if(e<2)this.fromInt(1);else for(this.fromNumber(e,n),this.testBit(e-1)||this.bitwiseTo(S.ONE.shiftLeft(e-1),P,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(t);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(S.ONE.shiftLeft(e-1),this);else{var r=new Array,i=7&e;r.length=1+(e>>3),t.nextBytes(r),i>0?r[0]&=(1<<i)-1:r[0]=0,this.fromString(r,256)}},S.prototype.bitwiseTo=function(e,t,n){var r,i,o=Math.min(e.t,this.t);for(r=0;r<o;++r)n[r]=t(this[r],e[r]);if(e.t<this.t){for(i=e.s&this.DM,r=o;r<this.t;++r)n[r]=t(this[r],i);n.t=this.t}else{for(i=this.s&this.DM,r=o;r<e.t;++r)n[r]=t(i,e[r]);n.t=e.t}n.s=t(this.s,e.s),n.clamp()},S.prototype.changeBit=function(e,t){var n=S.ONE.shiftLeft(e);return this.bitwiseTo(n,t,n),n},S.prototype.addTo=function(e,t){for(var n=0,r=0,i=Math.min(e.t,this.t);n<i;)r+=this[n]+e[n],t[n++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r+=e.s;n<this.t;)r+=this[n],t[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<e.t;)r+=e[n],t[n++]=r&this.DM,r>>=this.DB;r+=e.s}t.s=r<0?-1:0,r>0?t[n++]=r:r<-1&&(t[n++]=this.DV+r),t.t=n,t.clamp()},S.prototype.dMultiply=function(e){this[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()},S.prototype.dAddOffset=function(e,t){if(0!=e){for(;this.t<=t;)this[this.t++]=0;for(this[t]+=e;this[t]>=this.DV;)this[t]-=this.DV,++t>=this.t&&(this[this.t++]=0),++this[t]}},S.prototype.multiplyLowerTo=function(e,t,n){var r,i=Math.min(this.t+e.t,t);for(n.s=0,n.t=i;i>0;)n[--i]=0;for(r=n.t-this.t;i<r;++i)n[i+this.t]=this.am(0,e[i],n,i,0,this.t);for(r=Math.min(e.t,t);i<r;++i)this.am(0,e[i],n,i,0,t-i);n.clamp()},S.prototype.multiplyUpperTo=function(e,t,n){--t;var r=n.t=this.t+e.t-t;for(n.s=0;--r>=0;)n[r]=0;for(r=Math.max(t-this.t,0);r<e.t;++r)n[this.t+r-t]=this.am(t-r,e[r],n,0,0,this.t+r-t);n.clamp(),n.drShiftTo(1,n)},S.prototype.modInt=function(e){if(e<=0)return 0;var t=this.DV%e,n=this.s<0?e-1:0;if(this.t>0)if(0==t)n=this[0]%e;else for(var r=this.t-1;r>=0;--r)n=(t*n+this[r])%e;return n},S.prototype.millerRabin=function(e){var t=this.subtract(S.ONE),n=t.getLowestSetBit();if(n<=0)return!1;var r=t.shiftRight(n);(e=e+1>>1)>W.length&&(e=W.length);for(var i=M(),o=0;o<e;++o){i.fromInt(W[Math.floor(Math.random()*W.length)]);var s=i.modPow(r,this);if(0!=s.compareTo(S.ONE)&&0!=s.compareTo(t)){for(var a=1;a++<n&&0!=s.compareTo(t);)if(0==(s=s.modPowInt(2,this)).compareTo(S.ONE))return!1;if(0!=s.compareTo(t))return!1}}return!0},S.prototype.clone=
/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
 */
function(){var e=M();return this.copyTo(e),e},S.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},S.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24},S.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16},S.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},S.prototype.toByteArray=function(){var e=this.t,t=new Array;t[0]=this.s;var n,r=this.DB-e*this.DB%8,i=0;if(e-- >0)for(r<this.DB&&(n=this[e]>>r)!=(this.s&this.DM)>>r&&(t[i++]=n|this.s<<this.DB-r);e>=0;)r<8?(n=(this[e]&(1<<r)-1)<<8-r,n|=this[--e]>>(r+=this.DB-8)):(n=this[e]>>(r-=8)&255,r<=0&&(r+=this.DB,--e)),0!=(128&n)&&(n|=-256),0==i&&(128&this.s)!=(128&n)&&++i,(i>0||n!=this.s)&&(t[i++]=n);return t},S.prototype.equals=function(e){return 0==this.compareTo(e)},S.prototype.min=function(e){return this.compareTo(e)<0?this:e},S.prototype.max=function(e){return this.compareTo(e)>0?this:e},S.prototype.and=function(e){var t=M();return this.bitwiseTo(e,N,t),t},S.prototype.or=function(e){var t=M();return this.bitwiseTo(e,P,t),t},S.prototype.xor=function(e){var t=M();return this.bitwiseTo(e,D,t),t},S.prototype.andNot=function(e){var t=M();return this.bitwiseTo(e,U,t),t},S.prototype.not=function(){for(var e=M(),t=0;t<this.t;++t)e[t]=this.DM&~this[t];return e.t=this.t,e.s=~this.s,e},S.prototype.shiftLeft=function(e){var t=M();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t},S.prototype.shiftRight=function(e){var t=M();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t},S.prototype.getLowestSetBit=function(){for(var e=0;e<this.t;++e)if(0!=this[e])return e*this.DB+L(this[e]);return this.s<0?this.t*this.DB:-1},S.prototype.bitCount=function(){for(var e=0,t=this.s&this.DM,n=0;n<this.t;++n)e+=F(this[n]^t);return e},S.prototype.testBit=function(e){var t=Math.floor(e/this.DB);return t>=this.t?0!=this.s:0!=(this[t]&1<<e%this.DB)},S.prototype.setBit=function(e){return this.changeBit(e,P)},S.prototype.clearBit=function(e){return this.changeBit(e,U)},S.prototype.flipBit=function(e){return this.changeBit(e,D)},S.prototype.add=function(e){var t=M();return this.addTo(e,t),t},S.prototype.subtract=function(e){var t=M();return this.subTo(e,t),t},S.prototype.multiply=function(e){var t=M();return this.multiplyTo(e,t),t},S.prototype.divide=function(e){var t=M();return this.divRemTo(e,t,null),t},S.prototype.remainder=function(e){var t=M();return this.divRemTo(e,null,t),t},S.prototype.divideAndRemainder=function(e){var t=M(),n=M();return this.divRemTo(e,t,n),new Array(t,n)},S.prototype.modPow=function(e,t){var n,r,i=e.bitLength(),o=x(1);if(i<=0)return o;n=i<18?1:i<48?3:i<144?4:i<768?5:6,r=i<8?new I(t):t.isEven()?new q(t):new R(t);var s=new Array,a=3,u=n-1,c=(1<<n)-1;if(s[1]=r.convert(this),n>1){var l=M();for(r.sqrTo(s[1],l);a<=c;)s[a]=M(),r.mulTo(l,s[a-2],s[a]),a+=2}var h,d,f=e.t-1,p=!0,m=M();for(i=j(e[f])-1;f>=0;){for(i>=u?h=e[f]>>i-u&c:(h=(e[f]&(1<<i+1)-1)<<u-i,f>0&&(h|=e[f-1]>>this.DB+i-u)),a=n;0==(1&h);)h>>=1,--a;if((i-=a)<0&&(i+=this.DB,--f),p)s[h].copyTo(o),p=!1;else{for(;a>1;)r.sqrTo(o,m),r.sqrTo(m,o),a-=2;a>0?r.sqrTo(o,m):(d=o,o=m,m=d),r.mulTo(m,s[h],o)}for(;f>=0&&0==(e[f]&1<<i);)r.sqrTo(o,m),d=o,o=m,m=d,--i<0&&(i=this.DB-1,--f)}return r.revert(o)},S.prototype.modInverse=function(e){var t=e.isEven();if(this.isEven()&&t||0==e.signum())return S.ZERO;for(var n=e.clone(),r=this.clone(),i=x(1),o=x(0),s=x(0),a=x(1);0!=n.signum();){for(;n.isEven();)n.rShiftTo(1,n),t?(i.isEven()&&o.isEven()||(i.addTo(this,i),o.subTo(e,o)),i.rShiftTo(1,i)):o.isEven()||o.subTo(e,o),o.rShiftTo(1,o);for(;r.isEven();)r.rShiftTo(1,r),t?(s.isEven()&&a.isEven()||(s.addTo(this,s),a.subTo(e,a)),s.rShiftTo(1,s)):a.isEven()||a.subTo(e,a),a.rShiftTo(1,a);n.compareTo(r)>=0?(n.subTo(r,n),t&&i.subTo(s,i),o.subTo(a,o)):(r.subTo(n,r),t&&s.subTo(i,s),a.subTo(o,a))}return 0!=r.compareTo(S.ONE)?S.ZERO:a.compareTo(e)>=0?a.subtract(e):a.signum()<0?(a.addTo(e,a),a.signum()<0?a.add(e):a):a},S.prototype.pow=function(e){return this.exp(e,new B)},S.prototype.gcd=function(e){var t=this.s<0?this.negate():this.clone(),n=e.s<0?e.negate():e.clone();if(t.compareTo(n)<0){var r=t;t=n,n=r}var i=t.getLowestSetBit(),o=n.getLowestSetBit();if(o<0)return t;for(i<o&&(o=i),o>0&&(t.rShiftTo(o,t),n.rShiftTo(o,n));t.signum()>0;)(i=t.getLowestSetBit())>0&&t.rShiftTo(i,t),(i=n.getLowestSetBit())>0&&n.rShiftTo(i,n),t.compareTo(n)>=0?(t.subTo(n,t),t.rShiftTo(1,t)):(n.subTo(t,n),n.rShiftTo(1,n));return o>0&&n.lShiftTo(o,n),n},S.prototype.isProbablePrime=function(e){var t,n=this.abs();if(1==n.t&&n[0]<=W[W.length-1]){for(t=0;t<W.length;++t)if(n[0]==W[t])return!0;return!1}if(n.isEven())return!1;for(t=1;t<W.length;){for(var r=W[t],i=t+1;i<W.length&&r<K;)r*=W[i++];for(r=n.modInt(r);t<i;)if(r%W[t++]==0)return!1}return n.millerRabin(e)},S.prototype.square=function(){var e=M();return this.squareTo(e),e},Y.prototype.init=function(e){var t,n,r;for(t=0;t<256;++t)this.S[t]=t;for(n=0,t=0;t<256;++t)n=n+this.S[t]+e[t%e.length]&255,r=this.S[t],this.S[t]=this.S[n],this.S[n]=r;this.i=0,this.j=0},Y.prototype.next=function(){var e;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,e=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=e,this.S[e+this.S[this.i]&255]},null==G){var J;if(G=new Array,z=0,void 0!==i&&(void 0!==i.crypto||void 0!==i.msCrypto)){var Z=i.crypto||i.msCrypto;if(Z.getRandomValues){var $=new Uint8Array(32);for(Z.getRandomValues($),J=0;J<32;++J)G[z++]=$[J]}else if("Netscape"==r.appName&&r.appVersion<"5"){var X=i.crypto.random(32);for(J=0;J<X.length;++J)G[z++]=255&X.charCodeAt(J)}}for(;z<256;)J=Math.floor(65536*Math.random()),G[z++]=J>>>8,G[z++]=255&J;z=0,Q()}function ee(){if(null==V){for(Q(),(V=new Y).init(G),z=0;z<G.length;++z)G[z]=0;z=0}return V.next()}function te(){}
/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
 */function ne(e,t){return new S(e,t)}function re(e,t,n){for(var r="",i=0;r.length<t;)r+=n(String.fromCharCode.apply(String,e.concat([(4278190080&i)>>24,(16711680&i)>>16,(65280&i)>>8,255&i]))),i+=1;return r}function ie(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}
/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
 */function oe(e,t){this.x=t,this.q=e}function se(e,t,n,r){this.curve=e,this.x=t,this.y=n,this.z=null==r?S.ONE:r,this.zinv=null}function ae(e,t,n){this.q=e,this.a=this.fromBigInteger(t),this.b=this.fromBigInteger(n),this.infinity=new se(this,null,null)}te.prototype.nextBytes=function(e){var t;for(t=0;t<e.length;++t)e[t]=ee()},ie.prototype.doPublic=function(e){return e.modPowInt(this.e,this.n)},ie.prototype.setPublic=function(e,t){if(this.isPublic=!0,this.isPrivate=!1,"string"!=typeof e)this.n=e,this.e=t;else{if(!(null!=e&&null!=t&&e.length>0&&t.length>0))throw"Invalid RSA public key";this.n=ne(e,16),this.e=parseInt(t,16)}},ie.prototype.encrypt=function(e){var t=function(e,t){if(t<e.length+11)throw"Message too long for RSA";for(var n=new Array,r=e.length-1;r>=0&&t>0;){var i=e.charCodeAt(r--);i<128?n[--t]=i:i>127&&i<2048?(n[--t]=63&i|128,n[--t]=i>>6|192):(n[--t]=63&i|128,n[--t]=i>>6&63|128,n[--t]=i>>12|224)}n[--t]=0;for(var o=new te,s=new Array;t>2;){for(s[0]=0;0==s[0];)o.nextBytes(s);n[--t]=s[0]}return n[--t]=2,n[--t]=0,new S(n)}(e,this.n.bitLength()+7>>3);if(null==t)return null;var n=this.doPublic(t);if(null==n)return null;var r=n.toString(16);return 0==(1&r.length)?r:"0"+r},ie.prototype.encryptOAEP=function(e,t,n){var r=function(e,t,n,r){var i=ce.crypto.MessageDigest,o=ce.crypto.Util,s=null;if(n||(n="sha1"),"string"==typeof n&&(s=i.getCanonicalAlgName(n),r=i.getHashLength(s),n=function(e){return Se(o.hashHex(Me(e),s))}),e.length+2*r+2>t)throw"Message too long for RSA";var a,u="";for(a=0;a<t-e.length-2*r-2;a+=1)u+="\0";var c=n("")+u+""+e,l=new Array(r);(new te).nextBytes(l);var h=re(l,c.length,n),d=[];for(a=0;a<c.length;a+=1)d[a]=c.charCodeAt(a)^h.charCodeAt(a);var f=re(d,l.length,n),p=[0];for(a=0;a<l.length;a+=1)p[a+1]=l[a]^f.charCodeAt(a);return new S(p.concat(d))}(e,this.n.bitLength()+7>>3,t,n);if(null==r)return null;var i=this.doPublic(r);if(null==i)return null;var o=i.toString(16);return 0==(1&o.length)?o:"0"+o},ie.prototype.type="RSA",oe.prototype.equals=function(e){return e==this||this.q.equals(e.q)&&this.x.equals(e.x)},oe.prototype.toBigInteger=function(){return this.x},oe.prototype.negate=function(){return new oe(this.q,this.x.negate().mod(this.q))},oe.prototype.add=function(e){return new oe(this.q,this.x.add(e.toBigInteger()).mod(this.q))},oe.prototype.subtract=function(e){return new oe(this.q,this.x.subtract(e.toBigInteger()).mod(this.q))},oe.prototype.multiply=function(e){return new oe(this.q,this.x.multiply(e.toBigInteger()).mod(this.q))},oe.prototype.square=function(){return new oe(this.q,this.x.square().mod(this.q))},oe.prototype.divide=function(e){return new oe(this.q,this.x.multiply(e.toBigInteger().modInverse(this.q)).mod(this.q))},se.prototype.getX=function(){return null==this.zinv&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.x.toBigInteger().multiply(this.zinv).mod(this.curve.q))},se.prototype.getY=function(){return null==this.zinv&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.y.toBigInteger().multiply(this.zinv).mod(this.curve.q))},se.prototype.equals=function(e){return e==this||(this.isInfinity()?e.isInfinity():e.isInfinity()?this.isInfinity():!!e.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(e.z)).mod(this.curve.q).equals(S.ZERO)&&e.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(e.z)).mod(this.curve.q).equals(S.ZERO))},se.prototype.isInfinity=function(){return null==this.x&&null==this.y||this.z.equals(S.ZERO)&&!this.y.toBigInteger().equals(S.ZERO)},se.prototype.negate=function(){return new se(this.curve,this.x,this.y.negate(),this.z)},se.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(e.z)).mod(this.curve.q),n=e.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(e.z)).mod(this.curve.q);if(S.ZERO.equals(n))return S.ZERO.equals(t)?this.twice():this.curve.getInfinity();var r=new S("3"),i=this.x.toBigInteger(),o=this.y.toBigInteger(),s=(e.x.toBigInteger(),e.y.toBigInteger(),n.square()),a=s.multiply(n),u=i.multiply(s),c=t.square().multiply(this.z),l=c.subtract(u.shiftLeft(1)).multiply(e.z).subtract(a).multiply(n).mod(this.curve.q),h=u.multiply(r).multiply(t).subtract(o.multiply(a)).subtract(c.multiply(t)).multiply(e.z).add(t.multiply(a)).mod(this.curve.q),d=a.multiply(this.z).multiply(e.z).mod(this.curve.q);return new se(this.curve,this.curve.fromBigInteger(l),this.curve.fromBigInteger(h),d)},se.prototype.twice=function(){if(this.isInfinity())return this;if(0==this.y.toBigInteger().signum())return this.curve.getInfinity();var e=new S("3"),t=this.x.toBigInteger(),n=this.y.toBigInteger(),r=n.multiply(this.z),i=r.multiply(n).mod(this.curve.q),o=this.curve.a.toBigInteger(),s=t.square().multiply(e);S.ZERO.equals(o)||(s=s.add(this.z.square().multiply(o)));var a=(s=s.mod(this.curve.q)).square().subtract(t.shiftLeft(3).multiply(i)).shiftLeft(1).multiply(r).mod(this.curve.q),u=s.multiply(e).multiply(t).subtract(i.shiftLeft(1)).shiftLeft(2).multiply(i).subtract(s.square().multiply(s)).mod(this.curve.q),c=r.square().multiply(r).shiftLeft(3).mod(this.curve.q);return new se(this.curve,this.curve.fromBigInteger(a),this.curve.fromBigInteger(u),c)},se.prototype.multiply=function(e){if(this.isInfinity())return this;if(0==e.signum())return this.curve.getInfinity();var t,n=e,r=n.multiply(new S("3")),i=this.negate(),o=this,s=this.curve.q.subtract(e),a=s.multiply(new S("3")),u=new se(this.curve,this.x,this.y),c=u.negate();for(t=r.bitLength()-2;t>0;--t){o=o.twice();var l=r.testBit(t);l!=n.testBit(t)&&(o=o.add(l?this:i))}for(t=a.bitLength()-2;t>0;--t){u=u.twice();var h=a.testBit(t);h!=s.testBit(t)&&(u=u.add(h?u:c))}return o},se.prototype.multiplyTwo=function(e,t,n){var r;r=e.bitLength()>n.bitLength()?e.bitLength()-1:n.bitLength()-1;for(var i=this.curve.getInfinity(),o=this.add(t);r>=0;)i=i.twice(),e.testBit(r)?i=n.testBit(r)?i.add(o):i.add(this):n.testBit(r)&&(i=i.add(t)),--r;return i},ae.prototype.getQ=function(){return this.q},ae.prototype.getA=function(){return this.a},ae.prototype.getB=function(){return this.b},ae.prototype.equals=function(e){return e==this||this.q.equals(e.q)&&this.a.equals(e.a)&&this.b.equals(e.b)},ae.prototype.getInfinity=function(){return this.infinity},ae.prototype.fromBigInteger=function(e){return new oe(this.q,e)},ae.prototype.decodePointHex=function(e){switch(parseInt(e.substr(0,2),16)){case 0:return this.infinity;case 2:case 3:return null;case 4:case 6:case 7:var t=(e.length-2)/2,n=e.substr(2,t),r=e.substr(t+2,t);return new se(this,this.fromBigInteger(new S(n,16)),this.fromBigInteger(new S(r,16)));default:return null}},
/*! (c) Stefan Thomas | https://github.com/bitcoinjs/bitcoinjs-lib
 */
oe.prototype.getByteLength=function(){return Math.floor((this.toBigInteger().bitLength()+7)/8)},se.prototype.getEncoded=function(e){var t=function(e,t){var n=e.toByteArrayUnsigned();if(t<n.length)n=n.slice(n.length-t);else for(;t>n.length;)n.unshift(0);return n},n=this.getX().toBigInteger(),r=this.getY().toBigInteger(),i=t(n,32);return e?r.isEven()?i.unshift(2):i.unshift(3):(i.unshift(4),i=i.concat(t(r,32))),i},se.decodeFrom=function(e,t){t[0];var n=t.length-1,r=t.slice(1,1+n/2),i=t.slice(1+n/2,1+n);r.unshift(0),i.unshift(0);var o=new S(r),s=new S(i);return new se(e,e.fromBigInteger(o),e.fromBigInteger(s))},se.decodeFromHex=function(e,t){t.substr(0,2);var n=t.length-2,r=t.substr(2,n/2),i=t.substr(2+n/2,n/2),o=new S(r,16),s=new S(i,16);return new se(e,e.fromBigInteger(o),e.fromBigInteger(s))},se.prototype.add2D=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;if(this.x.equals(e.x))return this.y.equals(e.y)?this.twice():this.curve.getInfinity();var t=e.x.subtract(this.x),n=e.y.subtract(this.y).divide(t),r=n.square().subtract(this.x).subtract(e.x),i=n.multiply(this.x.subtract(r)).subtract(this.y);return new se(this.curve,r,i)},se.prototype.twice2D=function(){if(this.isInfinity())return this;if(0==this.y.toBigInteger().signum())return this.curve.getInfinity();var e=this.curve.fromBigInteger(S.valueOf(2)),t=this.curve.fromBigInteger(S.valueOf(3)),n=this.x.square().multiply(t).add(this.curve.a).divide(this.y.multiply(e)),r=n.square().subtract(this.x.multiply(e)),i=n.multiply(this.x.subtract(r)).subtract(this.y);return new se(this.curve,r,i)},se.prototype.multiply2D=function(e){if(this.isInfinity())return this;if(0==e.signum())return this.curve.getInfinity();var t,n=e,r=n.multiply(new S("3")),i=this.negate(),o=this;for(t=r.bitLength()-2;t>0;--t){o=o.twice();var s=r.testBit(t);s!=n.testBit(t)&&(o=o.add2D(s?this:i))}return o},se.prototype.isOnCurve=function(){var e=this.getX().toBigInteger(),t=this.getY().toBigInteger(),n=this.curve.getA().toBigInteger(),r=this.curve.getB().toBigInteger(),i=this.curve.getQ(),o=t.multiply(t).mod(i),s=e.multiply(e).multiply(e).add(n.multiply(e)).add(r).mod(i);return o.equals(s)},se.prototype.toString=function(){return"("+this.getX().toBigInteger().toString()+","+this.getY().toBigInteger().toString()+")"},se.prototype.validate=function(){var e=this.curve.getQ();if(this.isInfinity())throw new Error("Point is at infinity.");var t=this.getX().toBigInteger(),n=this.getY().toBigInteger();if(t.compareTo(S.ONE)<0||t.compareTo(e.subtract(S.ONE))>0)throw new Error("x coordinate out of bounds");if(n.compareTo(S.ONE)<0||n.compareTo(e.subtract(S.ONE))>0)throw new Error("y coordinate out of bounds");if(!this.isOnCurve())throw new Error("Point is not on the curve.");if(this.multiply(e).isInfinity())throw new Error("Point is not a scalar multiple of G.");return!0};
/*! Mike Samuel (c) 2009 | code.google.com/p/json-sans-eval
 */
var ue=function(){var e=new RegExp('(?:false|true|null|[\\{\\}\\[\\]]|(?:-?\\b(?:0|[1-9][0-9]*)(?:\\.[0-9]+)?(?:[eE][+-]?[0-9]+)?\\b)|(?:"(?:[^\\0-\\x08\\x0a-\\x1f"\\\\]|\\\\(?:["/\\\\bfnrt]|u[0-9A-Fa-f]{4}))*"))',"g"),t=new RegExp("\\\\(?:([^u])|u(.{4}))","g"),r={'"':'"',"/":"/","\\":"\\",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"};function i(e,t,n){return t?r[t]:String.fromCharCode(parseInt(n,16))}var o=new String(""),s=Object.hasOwnProperty;return function(r,a){var u,c,l=r.match(e),h=l[0],d=!1;"{"===h?u={}:"["===h?u=[]:(u=[],d=!0);for(var f=[u],p=1-d,m=l.length;p<m;++p){var g;switch((h=l[p]).charCodeAt(0)){default:(g=f[0])[c||g.length]=+h,c=void 0;break;case 34:if(-1!==(h=h.substring(1,h.length-1)).indexOf("\\")&&(h=h.replace(t,i)),g=f[0],!c){if(!(g instanceof Array)){c=h||o;break}c=g.length}g[c]=h,c=void 0;break;case 91:g=f[0],f.unshift(g[c||g.length]=[]),c=void 0;break;case 93:f.shift();break;case 102:(g=f[0])[c||g.length]=!1,c=void 0;break;case 110:(g=f[0])[c||g.length]=null,c=void 0;break;case 116:(g=f[0])[c||g.length]=!0,c=void 0;break;case 123:g=f[0],f.unshift(g[c||g.length]={}),c=void 0;break;case 125:f.shift()}}if(d){if(1!==f.length)throw new Error;u=u[0]}else if(f.length)throw new Error;return a&&(u=function e(t,r){var i=t[r];if(i&&"object"===(void 0===i?"undefined":n(i))){var o=null;for(var u in i)if(s.call(i,u)&&i!==t){var c=e(i,u);void 0!==c?i[u]=c:(o||(o=[]),o.push(u))}if(o)for(var l=o.length;--l>=0;)delete i[o[l]]}return a.call(t,r,i)}({"":u},"")),u}}();void 0!==ce&&ce||(t.KJUR=ce={}),void 0!==ce.asn1&&ce.asn1||(ce.asn1={}),ce.asn1.ASN1Util=new function(){this.integerToByteHex=function(e){var t=e.toString(16);return t.length%2==1&&(t="0"+t),t},this.bigIntToMinTwosComplementsHex=function(e){var t=e.toString(16);if("-"!=t.substr(0,1))t.length%2==1?t="0"+t:t.match(/^[0-7]/)||(t="00"+t);else{var n=t.substr(1).length;n%2==1?n+=1:t.match(/^[0-7]/)||(n+=2);for(var r="",i=0;i<n;i++)r+="f";t=new S(r,16).xor(e).add(S.ONE).toString(16).replace(/^-/,"")}return t},this.getPEMStringFromHex=function(e,t){return Te(e,t)},this.newObject=function(e){var t=ce.asn1,n=t.ASN1Object,r=t.DERBoolean,i=t.DERInteger,o=t.DERBitString,s=t.DEROctetString,a=t.DERNull,u=t.DERObjectIdentifier,c=t.DEREnumerated,l=t.DERUTF8String,h=t.DERNumericString,d=t.DERPrintableString,f=t.DERTeletexString,p=t.DERIA5String,m=t.DERUTCTime,g=t.DERGeneralizedTime,b=t.DERVisibleString,v=t.DERBMPString,y=t.DERSequence,_=t.DERSet,w=t.DERTaggedObject,E=t.ASN1Util.newObject;if(e instanceof t.ASN1Object)return e;var S=Object.keys(e);if(1!=S.length)throw new Error("key of param shall be only one.");var M=S[0];if(-1==":asn1:bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:visstr:bmpstr:seq:set:tag:".indexOf(":"+M+":"))throw new Error("undefined key: "+M);if("bool"==M)return new r(e[M]);if("int"==M)return new i(e[M]);if("bitstr"==M)return new o(e[M]);if("octstr"==M)return new s(e[M]);if("null"==M)return new a(e[M]);if("oid"==M)return new u(e[M]);if("enum"==M)return new c(e[M]);if("utf8str"==M)return new l(e[M]);if("numstr"==M)return new h(e[M]);if("prnstr"==M)return new d(e[M]);if("telstr"==M)return new f(e[M]);if("ia5str"==M)return new p(e[M]);if("utctime"==M)return new m(e[M]);if("gentime"==M)return new g(e[M]);if("visstr"==M)return new b(e[M]);if("bmpstr"==M)return new v(e[M]);if("asn1"==M)return new n(e[M]);if("seq"==M){for(var O=e[M],A=[],C=0;C<O.length;C++){var T=E(O[C]);A.push(T)}return new y({array:A})}if("set"==M){for(O=e[M],A=[],C=0;C<O.length;C++)T=E(O[C]),A.push(T);return new _({array:A})}if("tag"==M){var k=e[M];if("[object Array]"===Object.prototype.toString.call(k)&&3==k.length){var x=E(k[2]);return new w({tag:k[0],explicit:k[1],obj:x})}return new w(k)}},this.jsonToASN1HEX=function(e){return this.newObject(e).getEncodedHex()}},ce.asn1.ASN1Util.oidHexToInt=function(e){for(var t="",n=parseInt(e.substr(0,2),16),r=(t=Math.floor(n/40)+"."+n%40,""),i=2;i<e.length;i+=2){var o=("00000000"+parseInt(e.substr(i,2),16).toString(2)).slice(-8);r+=o.substr(1,7),"0"==o.substr(0,1)&&(t=t+"."+new S(r,2).toString(10),r="")}return t},ce.asn1.ASN1Util.oidIntToHex=function(e){var t=function(e){var t=e.toString(16);return 1==t.length&&(t="0"+t),t},n=function(e){var n="",r=new S(e,10).toString(2),i=7-r.length%7;7==i&&(i=0);for(var o="",s=0;s<i;s++)o+="0";for(r=o+r,s=0;s<r.length-1;s+=7){var a=r.substr(s,7);s!=r.length-7&&(a="1"+a),n+=t(parseInt(a,2))}return n};if(!e.match(/^[0-9.]+$/))throw"malformed oid string: "+e;var r="",i=e.split("."),o=40*parseInt(i[0])+parseInt(i[1]);r+=t(o),i.splice(0,2);for(var s=0;s<i.length;s++)r+=n(i[s]);return r},ce.asn1.ASN1Object=function(e){this.params=null,this.getLengthHexFromValue=function(){if(void 0===this.hV||null==this.hV)throw new Error("this.hV is null or undefined");if(this.hV.length%2==1)throw new Error("value hex must be even length: n="+"".length+",v="+this.hV);var e=this.hV.length/2,t=e.toString(16);if(t.length%2==1&&(t="0"+t),e<128)return t;var n=t.length/2;if(n>15)throw"ASN.1 length too long to represent by 8x: n = "+e.toString(16);return(128+n).toString(16)+t},this.getEncodedHex=function(){return(null==this.hTLV||this.isModified)&&(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV},this.getValueHex=function(){return this.getEncodedHex(),this.hV},this.getFreshValueHex=function(){return""},this.setByParam=function(e){this.params=e},null!=e&&null!=e.tlv&&(this.hTLV=e.tlv,this.isModified=!1)},ce.asn1.DERAbstractString=function(e){ce.asn1.DERAbstractString.superclass.constructor.call(this),this.getString=function(){return this.s},this.setString=function(e){this.hTLV=null,this.isModified=!0,this.s=e,this.hV=we(this.s).toLowerCase()},this.setStringHex=function(e){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=e},this.getFreshValueHex=function(){return this.hV},void 0!==e&&("string"==typeof e?this.setString(e):void 0!==e.str?this.setString(e.str):void 0!==e.hex&&this.setStringHex(e.hex))},o.lang.extend(ce.asn1.DERAbstractString,ce.asn1.ASN1Object),ce.asn1.DERAbstractTime=function(e){ce.asn1.DERAbstractTime.superclass.constructor.call(this),this.localDateToUTC=function(e){var t=e.getTime()+6e4*e.getTimezoneOffset();return new Date(t)},this.formatDate=function(e,t,n){var r=this.zeroPadding,i=this.localDateToUTC(e),o=String(i.getFullYear());"utc"==t&&(o=o.substr(2,2));var s=o+r(String(i.getMonth()+1),2)+r(String(i.getDate()),2)+r(String(i.getHours()),2)+r(String(i.getMinutes()),2)+r(String(i.getSeconds()),2);if(!0===n){var a=i.getMilliseconds();if(0!=a){var u=r(String(a),3);s=s+"."+(u=u.replace(/[0]+$/,""))}}return s+"Z"},this.zeroPadding=function(e,t){return e.length>=t?e:new Array(t-e.length+1).join("0")+e},this.getString=function(){return this.s},this.setString=function(e){this.hTLV=null,this.isModified=!0,this.s=e,this.hV=ge(e)},this.setByDateValue=function(e,t,n,r,i,o){var s=new Date(Date.UTC(e,t-1,n,r,i,o,0));this.setByDate(s)},this.getFreshValueHex=function(){return this.hV}},o.lang.extend(ce.asn1.DERAbstractTime,ce.asn1.ASN1Object),ce.asn1.DERAbstractStructured=function(e){ce.asn1.DERAbstractString.superclass.constructor.call(this),this.setByASN1ObjectArray=function(e){this.hTLV=null,this.isModified=!0,this.asn1Array=e},this.appendASN1Object=function(e){this.hTLV=null,this.isModified=!0,this.asn1Array.push(e)},this.asn1Array=new Array,void 0!==e&&void 0!==e.array&&(this.asn1Array=e.array)},o.lang.extend(ce.asn1.DERAbstractStructured,ce.asn1.ASN1Object),ce.asn1.DERBoolean=function(e){ce.asn1.DERBoolean.superclass.constructor.call(this),this.hT="01",this.hTLV=0==e?"010100":"0101ff"},o.lang.extend(ce.asn1.DERBoolean,ce.asn1.ASN1Object),ce.asn1.DERInteger=function(e){ce.asn1.DERInteger.superclass.constructor.call(this),this.hT="02",this.setByBigInteger=function(e){this.hTLV=null,this.isModified=!0,this.hV=ce.asn1.ASN1Util.bigIntToMinTwosComplementsHex(e)},this.setByInteger=function(e){var t=new S(String(e),10);this.setByBigInteger(t)},this.setValueHex=function(e){this.hV=e},this.getFreshValueHex=function(){return this.hV},void 0!==e&&(void 0!==e.bigint?this.setByBigInteger(e.bigint):void 0!==e.int?this.setByInteger(e.int):"number"==typeof e?this.setByInteger(e):void 0!==e.hex&&this.setValueHex(e.hex))},o.lang.extend(ce.asn1.DERInteger,ce.asn1.ASN1Object),ce.asn1.DERBitString=function(e){if(void 0!==e&&void 0!==e.obj){var t=ce.asn1.ASN1Util.newObject(e.obj);e.hex="00"+t.getEncodedHex()}ce.asn1.DERBitString.superclass.constructor.call(this),this.hT="03",this.setHexValueIncludingUnusedBits=function(e){this.hTLV=null,this.isModified=!0,this.hV=e},this.setUnusedBitsAndHexValue=function(e,t){if(e<0||7<e)throw"unused bits shall be from 0 to 7: u = "+e;var n="0"+e;this.hTLV=null,this.isModified=!0,this.hV=n+t},this.setByBinaryString=function(e){var t=8-(e=e.replace(/0+$/,"")).length%8;8==t&&(t=0);for(var n=0;n<=t;n++)e+="0";var r="";for(n=0;n<e.length-1;n+=8){var i=e.substr(n,8),o=parseInt(i,2).toString(16);1==o.length&&(o="0"+o),r+=o}this.hTLV=null,this.isModified=!0,this.hV="0"+t+r},this.setByBooleanArray=function(e){for(var t="",n=0;n<e.length;n++)1==e[n]?t+="1":t+="0";this.setByBinaryString(t)},this.newFalseArray=function(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=!1;return t},this.getFreshValueHex=function(){return this.hV},void 0!==e&&("string"==typeof e&&e.toLowerCase().match(/^[0-9a-f]+$/)?this.setHexValueIncludingUnusedBits(e):void 0!==e.hex?this.setHexValueIncludingUnusedBits(e.hex):void 0!==e.bin?this.setByBinaryString(e.bin):void 0!==e.array&&this.setByBooleanArray(e.array))},o.lang.extend(ce.asn1.DERBitString,ce.asn1.ASN1Object),ce.asn1.DEROctetString=function(e){if(void 0!==e&&void 0!==e.obj){var t=ce.asn1.ASN1Util.newObject(e.obj);e.hex=t.getEncodedHex()}ce.asn1.DEROctetString.superclass.constructor.call(this,e),this.hT="04"},o.lang.extend(ce.asn1.DEROctetString,ce.asn1.DERAbstractString),ce.asn1.DERNull=function(){ce.asn1.DERNull.superclass.constructor.call(this),this.hT="05",this.hTLV="0500"},o.lang.extend(ce.asn1.DERNull,ce.asn1.ASN1Object),ce.asn1.DERObjectIdentifier=function(e){ce.asn1.DERObjectIdentifier.superclass.constructor.call(this),this.hT="06",this.setValueHex=function(e){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=e},this.setValueOidString=function(e){var t=function(e){var t=function(e){var t=e.toString(16);return 1==t.length&&(t="0"+t),t},n=function(e){var n="",r=parseInt(e,10).toString(2),i=7-r.length%7;7==i&&(i=0);for(var o="",s=0;s<i;s++)o+="0";for(r=o+r,s=0;s<r.length-1;s+=7){var a=r.substr(s,7);s!=r.length-7&&(a="1"+a),n+=t(parseInt(a,2))}return n};try{if(!e.match(/^[0-9.]+$/))return null;var r="",i=e.split("."),o=40*parseInt(i[0],10)+parseInt(i[1],10);r+=t(o),i.splice(0,2);for(var s=0;s<i.length;s++)r+=n(i[s]);return r}catch(e){return null}}(e);if(null==t)throw new Error("malformed oid string: "+e);this.hTLV=null,this.isModified=!0,this.s=null,this.hV=t},this.setValueName=function(e){var t=ce.asn1.x509.OID.name2oid(e);if(""===t)throw new Error("DERObjectIdentifier oidName undefined: "+e);this.setValueOidString(t)},this.setValueNameOrOid=function(e){e.match(/^[0-2].[0-9.]+$/)?this.setValueOidString(e):this.setValueName(e)},this.getFreshValueHex=function(){return this.hV},this.setByParam=function(e){"string"==typeof e?this.setValueNameOrOid(e):void 0!==e.oid?this.setValueNameOrOid(e.oid):void 0!==e.name?this.setValueNameOrOid(e.name):void 0!==e.hex&&this.setValueHex(e.hex)},void 0!==e&&this.setByParam(e)},o.lang.extend(ce.asn1.DERObjectIdentifier,ce.asn1.ASN1Object),ce.asn1.DEREnumerated=function(e){ce.asn1.DEREnumerated.superclass.constructor.call(this),this.hT="0a",this.setByBigInteger=function(e){this.hTLV=null,this.isModified=!0,this.hV=ce.asn1.ASN1Util.bigIntToMinTwosComplementsHex(e)},this.setByInteger=function(e){var t=new S(String(e),10);this.setByBigInteger(t)},this.setValueHex=function(e){this.hV=e},this.getFreshValueHex=function(){return this.hV},void 0!==e&&(void 0!==e.int?this.setByInteger(e.int):"number"==typeof e?this.setByInteger(e):void 0!==e.hex&&this.setValueHex(e.hex))},o.lang.extend(ce.asn1.DEREnumerated,ce.asn1.ASN1Object),ce.asn1.DERUTF8String=function(e){ce.asn1.DERUTF8String.superclass.constructor.call(this,e),this.hT="0c"},o.lang.extend(ce.asn1.DERUTF8String,ce.asn1.DERAbstractString),ce.asn1.DERNumericString=function(e){ce.asn1.DERNumericString.superclass.constructor.call(this,e),this.hT="12"},o.lang.extend(ce.asn1.DERNumericString,ce.asn1.DERAbstractString),ce.asn1.DERPrintableString=function(e){ce.asn1.DERPrintableString.superclass.constructor.call(this,e),this.hT="13"},o.lang.extend(ce.asn1.DERPrintableString,ce.asn1.DERAbstractString),ce.asn1.DERTeletexString=function(e){ce.asn1.DERTeletexString.superclass.constructor.call(this,e),this.hT="14"},o.lang.extend(ce.asn1.DERTeletexString,ce.asn1.DERAbstractString),ce.asn1.DERIA5String=function(e){ce.asn1.DERIA5String.superclass.constructor.call(this,e),this.hT="16"},o.lang.extend(ce.asn1.DERIA5String,ce.asn1.DERAbstractString),ce.asn1.DERVisibleString=function(e){ce.asn1.DERIA5String.superclass.constructor.call(this,e),this.hT="1a"},o.lang.extend(ce.asn1.DERVisibleString,ce.asn1.DERAbstractString),ce.asn1.DERBMPString=function(e){ce.asn1.DERBMPString.superclass.constructor.call(this,e),this.hT="1e"},o.lang.extend(ce.asn1.DERBMPString,ce.asn1.DERAbstractString),ce.asn1.DERUTCTime=function(e){ce.asn1.DERUTCTime.superclass.constructor.call(this,e),this.hT="17",this.setByDate=function(e){this.hTLV=null,this.isModified=!0,this.date=e,this.s=this.formatDate(this.date,"utc"),this.hV=ge(this.s)},this.getFreshValueHex=function(){return void 0===this.date&&void 0===this.s&&(this.date=new Date,this.s=this.formatDate(this.date,"utc"),this.hV=ge(this.s)),this.hV},void 0!==e&&(void 0!==e.str?this.setString(e.str):"string"==typeof e&&e.match(/^[0-9]{12}Z$/)?this.setString(e):void 0!==e.hex?this.setStringHex(e.hex):void 0!==e.date&&this.setByDate(e.date))},o.lang.extend(ce.asn1.DERUTCTime,ce.asn1.DERAbstractTime),ce.asn1.DERGeneralizedTime=function(e){ce.asn1.DERGeneralizedTime.superclass.constructor.call(this,e),this.hT="18",this.withMillis=!1,this.setByDate=function(e){this.hTLV=null,this.isModified=!0,this.date=e,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=ge(this.s)},this.getFreshValueHex=function(){return void 0===this.date&&void 0===this.s&&(this.date=new Date,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=ge(this.s)),this.hV},void 0!==e&&(void 0!==e.str?this.setString(e.str):"string"==typeof e&&e.match(/^[0-9]{14}Z$/)?this.setString(e):void 0!==e.hex?this.setStringHex(e.hex):void 0!==e.date&&this.setByDate(e.date),!0===e.millis&&(this.withMillis=!0))},o.lang.extend(ce.asn1.DERGeneralizedTime,ce.asn1.DERAbstractTime),ce.asn1.DERSequence=function(e){ce.asn1.DERSequence.superclass.constructor.call(this,e),this.hT="30",this.getFreshValueHex=function(){for(var e="",t=0;t<this.asn1Array.length;t++)e+=this.asn1Array[t].getEncodedHex();return this.hV=e,this.hV}},o.lang.extend(ce.asn1.DERSequence,ce.asn1.DERAbstractStructured),ce.asn1.DERSet=function(e){ce.asn1.DERSet.superclass.constructor.call(this,e),this.hT="31",this.sortFlag=!0,this.getFreshValueHex=function(){for(var e=new Array,t=0;t<this.asn1Array.length;t++){var n=this.asn1Array[t];e.push(n.getEncodedHex())}return 1==this.sortFlag&&e.sort(),this.hV=e.join(""),this.hV},void 0!==e&&void 0!==e.sortflag&&0==e.sortflag&&(this.sortFlag=!1)},o.lang.extend(ce.asn1.DERSet,ce.asn1.DERAbstractStructured),ce.asn1.DERTaggedObject=function(e){ce.asn1.DERTaggedObject.superclass.constructor.call(this);var t=ce.asn1;this.hT="a0",this.hV="",this.isExplicit=!0,this.asn1Object=null,this.setASN1Object=function(e,t,n){this.hT=t,this.isExplicit=e,this.asn1Object=n,this.isExplicit?(this.hV=this.asn1Object.getEncodedHex(),this.hTLV=null,this.isModified=!0):(this.hV=null,this.hTLV=n.getEncodedHex(),this.hTLV=this.hTLV.replace(/^../,t),this.isModified=!1)},this.getFreshValueHex=function(){return this.hV},this.setByParam=function(e){null!=e.tag&&(this.hT=e.tag),null!=e.explicit&&(this.isExplicit=e.explicit),null!=e.tage&&(this.hT=e.tage,this.isExplicit=!0),null!=e.tagi&&(this.hT=e.tagi,this.isExplicit=!1),null!=e.obj&&(e.obj instanceof t.ASN1Object?(this.asn1Object=e.obj,this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)):"object"==n(e.obj)&&(this.asn1Object=t.ASN1Util.newObject(e.obj),this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)))},null!=e&&this.setByParam(e)},o.lang.extend(ce.asn1.DERTaggedObject,ce.asn1.ASN1Object);var ce,le,he,de=new function(){};function fe(e){for(var t=new Array,n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}function pe(e){for(var t="",n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t}function me(e){for(var t="",n=0;n<e.length;n++){var r=e[n].toString(16);1==r.length&&(r="0"+r),t+=r}return t}function ge(e){return me(fe(e))}function be(e){return(e=(e=e.replace(/\=/g,"")).replace(/\+/g,"-")).replace(/\//g,"_")}function ve(e){return e.length%4==2?e+="==":e.length%4==3&&(e+="="),(e=e.replace(/-/g,"+")).replace(/_/g,"/")}function ye(e){return e.length%2==1&&(e="0"+e),be(_(e))}function _e(e){return w(ve(e))}function we(e){return Ie(Ue(e))}function Ee(e){return decodeURIComponent(Re(e))}function Se(e){for(var t="",n=0;n<e.length-1;n+=2)t+=String.fromCharCode(parseInt(e.substr(n,2),16));return t}function Me(e){for(var t="",n=0;n<e.length;n++)t+=("0"+e.charCodeAt(n).toString(16)).slice(-2);return t}function Oe(e){return _(e)}function Ae(e){var t=Oe(e).replace(/(.{64})/g,"$1\r\n");return t.replace(/\r\n$/,"")}function Ce(e){return w(e.replace(/[^0-9A-Za-z\/+=]*/g,""))}function Te(e,t){return"-----BEGIN "+t+"-----\r\n"+Ae(e)+"\r\n-----END "+t+"-----\r\n"}function ke(e,t){if(-1==e.indexOf("-----BEGIN "))throw"can't find PEM header: "+t;return Ce(e=void 0!==t?(e=e.replace(new RegExp("^[^]*-----BEGIN "+t+"-----"),"")).replace(new RegExp("-----END "+t+"-----[^]*$"),""):(e=e.replace(/^[^]*-----BEGIN [^-]+-----/,"")).replace(/-----END [^-]+-----[^]*$/,""))}function xe(e){var t,n,r,i,o,s,a,u,c,l,h;if(h=e.match(/^(\d{2}|\d{4})(\d\d)(\d\d)(\d\d)(\d\d)(\d\d)(|\.\d+)Z$/))return u=h[1],t=parseInt(u),2===u.length&&(50<=t&&t<100?t=1900+t:0<=t&&t<50&&(t=2e3+t)),n=parseInt(h[2])-1,r=parseInt(h[3]),i=parseInt(h[4]),o=parseInt(h[5]),s=parseInt(h[6]),a=0,""!==(c=h[7])&&(l=(c.substr(1)+"00").substr(0,3),a=parseInt(l)),Date.UTC(t,n,r,i,o,s,a);throw"unsupported zulu format: "+e}function je(e){return~~(xe(e)/1e3)}function Ie(e){return e.replace(/%/g,"")}function Re(e){return e.replace(/(..)/g,"%$1")}function Ne(e){var t="malformed IPv6 address";if(!e.match(/^[0-9A-Fa-f:]+$/))throw t;var n=(e=e.toLowerCase()).split(":").length-1;if(n<2)throw t;var r=":".repeat(7-n+2),i=(e=e.replace("::",r)).split(":");if(8!=i.length)throw t;for(var o=0;o<8;o++)i[o]=("0000"+i[o]).slice(-4);return i.join("")}function Pe(e){if(!e.match(/^[0-9A-Fa-f]{32}$/))throw"malformed IPv6 address octet";for(var t=(e=e.toLowerCase()).match(/.{1,4}/g),n=0;n<8;n++)t[n]=t[n].replace(/^0+/,""),""==t[n]&&(t[n]="0");var r=(e=":"+t.join(":")+":").match(/:(0:){2,}/g);if(null===r)return e.slice(1,-1);var i="";for(n=0;n<r.length;n++)r[n].length>i.length&&(i=r[n]);return(e=e.replace(i,"::")).slice(1,-1)}function De(e){var t="malformed hex value";if(!e.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/))throw t;if(8!=e.length)return 32==e.length?Pe(e):e;try{return parseInt(e.substr(0,2),16)+"."+parseInt(e.substr(2,2),16)+"."+parseInt(e.substr(4,2),16)+"."+parseInt(e.substr(6,2),16)}catch(e){throw t}}function Ue(e){for(var t=encodeURIComponent(e),n="",r=0;r<t.length;r++)"%"==t[r]?(n+=t.substr(r,3),r+=2):n=n+"%"+ge(t[r]);return n}function Le(e){return!(e.length%2!=0||!e.match(/^[0-9a-f]+$/)&&!e.match(/^[0-9A-F]+$/))}function Fe(e){return e.length%2==1?"0"+e:e.substr(0,1)>"7"?"00"+e:e}de.getLblen=function(e,t){if("8"!=e.substr(t+2,1))return 1;var n=parseInt(e.substr(t+3,1));return 0==n?-1:0<n&&n<10?n+1:-2},de.getL=function(e,t){var n=de.getLblen(e,t);return n<1?"":e.substr(t+2,2*n)},de.getVblen=function(e,t){var n;return""==(n=de.getL(e,t))?-1:("8"===n.substr(0,1)?new S(n.substr(2),16):new S(n,16)).intValue()},de.getVidx=function(e,t){var n=de.getLblen(e,t);return n<0?n:t+2*(n+1)},de.getV=function(e,t){var n=de.getVidx(e,t),r=de.getVblen(e,t);return e.substr(n,2*r)},de.getTLV=function(e,t){return e.substr(t,2)+de.getL(e,t)+de.getV(e,t)},de.getTLVblen=function(e,t){return 2+2*de.getLblen(e,t)+2*de.getVblen(e,t)},de.getNextSiblingIdx=function(e,t){return de.getVidx(e,t)+2*de.getVblen(e,t)},de.getChildIdx=function(e,t){var n,r,i,o=de,s=[];n=o.getVidx(e,t),r=2*o.getVblen(e,t),"03"==e.substr(t,2)&&(n+=2,r-=2),i=0;for(var a=n;i<=r;){var u=o.getTLVblen(e,a);if((i+=u)<=r&&s.push(a),a+=u,i>=r)break}return s},de.getNthChildIdx=function(e,t,n){return de.getChildIdx(e,t)[n]},de.getIdxbyList=function(e,t,n,r){var i,o,s=de;return 0==n.length?void 0!==r&&e.substr(t,2)!==r?-1:t:(i=n.shift())>=(o=s.getChildIdx(e,t)).length?-1:s.getIdxbyList(e,o[i],n,r)},de.getIdxbyListEx=function(e,t,n,r){var i,o,s=de;if(0==n.length)return void 0!==r&&e.substr(t,2)!==r?-1:t;i=n.shift(),o=s.getChildIdx(e,t);for(var a=0,u=0;u<o.length;u++){var c=e.substr(o[u],2);if("number"==typeof i&&!s.isContextTag(c)&&a==i||"string"==typeof i&&s.isContextTag(c,i))return s.getIdxbyListEx(e,o[u],n,r);s.isContextTag(c)||a++}return-1},de.getTLVbyList=function(e,t,n,r){var i=de,o=i.getIdxbyList(e,t,n,r);return-1==o||o>=e.length?null:i.getTLV(e,o)},de.getTLVbyListEx=function(e,t,n,r){var i=de,o=i.getIdxbyListEx(e,t,n,r);return-1==o?null:i.getTLV(e,o)},de.getVbyList=function(e,t,n,r,i){var o,s,a=de;return-1==(o=a.getIdxbyList(e,t,n,r))||o>=e.length?null:(s=a.getV(e,o),!0===i&&(s=s.substr(2)),s)},de.getVbyListEx=function(e,t,n,r,i){var o,s,a=de;return-1==(o=a.getIdxbyListEx(e,t,n,r))?null:(s=a.getV(e,o),"03"==e.substr(o,2)&&!1!==i&&(s=s.substr(2)),s)},de.getInt=function(e,t,n){null==n&&(n=-1);try{var r=e.substr(t,2);if("02"!=r&&"03"!=r)return n;var i=de.getV(e,t);return"02"==r?parseInt(i,16):function(e){try{var t=e.substr(0,2);if("00"==t)return parseInt(e.substr(2),16);var n=parseInt(t,16),r=e.substr(2),i=parseInt(r,16).toString(2);return"0"==i&&(i="00000000"),i=i.slice(0,0-n),parseInt(i,2)}catch(e){return-1}}(i)}catch(e){return n}},de.getOID=function(e,t,n){null==n&&(n=null);try{return"06"!=e.substr(t,2)?n:function(e){if(!Le(e))return null;try{var t=[],n=e.substr(0,2),r=parseInt(n,16);t[0]=new String(Math.floor(r/40)),t[1]=new String(r%40);for(var i=e.substr(2),o=[],s=0;s<i.length/2;s++)o.push(parseInt(i.substr(2*s,2),16));var a=[],u="";for(s=0;s<o.length;s++)128&o[s]?u+=Be((127&o[s]).toString(2),7):(u+=Be((127&o[s]).toString(2),7),a.push(new String(parseInt(u,2))),u="");var c=t.join(".");return a.length>0&&(c=c+"."+a.join(".")),c}catch(e){return null}}(de.getV(e,t))}catch(e){return n}},de.getOIDName=function(e,t,n){null==n&&(n=null);try{var r=de.getOID(e,t,n);if(r==n)return n;var i=ce.asn1.x509.OID.oid2name(r);return""==i?r:i}catch(e){return n}},de.getString=function(e,t,n){null==n&&(n=null);try{return Se(de.getV(e,t))}catch(e){return n}},de.hextooidstr=function(e){var t=function(e,t){return e.length>=t?e:new Array(t-e.length+1).join("0")+e},n=[],r=e.substr(0,2),i=parseInt(r,16);n[0]=new String(Math.floor(i/40)),n[1]=new String(i%40);for(var o=e.substr(2),s=[],a=0;a<o.length/2;a++)s.push(parseInt(o.substr(2*a,2),16));var u=[],c="";for(a=0;a<s.length;a++)128&s[a]?c+=t((127&s[a]).toString(2),7):(c+=t((127&s[a]).toString(2),7),u.push(new String(parseInt(c,2))),c="");var l=n.join(".");return u.length>0&&(l=l+"."+u.join(".")),l},de.dump=function(e,t,n,r){var i=de,o=i.getV,s=i.dump,a=i.getChildIdx,u=e;e instanceof ce.asn1.ASN1Object&&(u=e.getEncodedHex());var c=function(e,t){return e.length<=2*t?e:e.substr(0,t)+"..(total "+e.length/2+"bytes).."+e.substr(e.length-t,t)};void 0===t&&(t={ommit_long_octet:32}),void 0===n&&(n=0),void 0===r&&(r="");var l,h=t.ommit_long_octet;if("01"==(l=u.substr(n,2)))return"00"==(d=o(u,n))?r+"BOOLEAN FALSE\n":r+"BOOLEAN TRUE\n";if("02"==l)return r+"INTEGER "+c(d=o(u,n),h)+"\n";if("03"==l){var d=o(u,n);return i.isASN1HEX(d.substr(2))?(w=r+"BITSTRING, encapsulates\n")+s(d.substr(2),t,0,r+"  "):r+"BITSTRING "+c(d,h)+"\n"}if("04"==l)return d=o(u,n),i.isASN1HEX(d)?(w=r+"OCTETSTRING, encapsulates\n")+s(d,t,0,r+"  "):r+"OCTETSTRING "+c(d,h)+"\n";if("05"==l)return r+"NULL\n";if("06"==l){var f=o(u,n),p=ce.asn1.ASN1Util.oidHexToInt(f),m=ce.asn1.x509.OID.oid2name(p),g=p.replace(/\./g," ");return""!=m?r+"ObjectIdentifier "+m+" ("+g+")\n":r+"ObjectIdentifier ("+g+")\n"}if("0a"==l)return r+"ENUMERATED "+parseInt(o(u,n))+"\n";if("0c"==l)return r+"UTF8String '"+Ee(o(u,n))+"'\n";if("13"==l)return r+"PrintableString '"+Ee(o(u,n))+"'\n";if("14"==l)return r+"TeletexString '"+Ee(o(u,n))+"'\n";if("16"==l)return r+"IA5String '"+Ee(o(u,n))+"'\n";if("17"==l)return r+"UTCTime "+Ee(o(u,n))+"\n";if("18"==l)return r+"GeneralizedTime "+Ee(o(u,n))+"\n";if("1a"==l)return r+"VisualString '"+Ee(o(u,n))+"'\n";if("1e"==l)return r+"BMPString '"+Ee(o(u,n))+"'\n";if("30"==l){if("3000"==u.substr(n,4))return r+"SEQUENCE {}\n";w=r+"SEQUENCE\n";var b=t;if((2==(_=a(u,n)).length||3==_.length)&&"06"==u.substr(_[0],2)&&"04"==u.substr(_[_.length-1],2)){m=i.oidname(o(u,_[0]));var v=JSON.parse(JSON.stringify(t));v.x509ExtName=m,b=v}for(var y=0;y<_.length;y++)w+=s(u,b,_[y],r+"  ");return w}if("31"==l){w=r+"SET\n";var _=a(u,n);for(y=0;y<_.length;y++)w+=s(u,t,_[y],r+"  ");return w}if(0!=(128&(l=parseInt(l,16)))){var w,E=31&l;if(0!=(32&l)){for(w=r+"["+E+"]\n",_=a(u,n),y=0;y<_.length;y++)w+=s(u,t,_[y],r+"  ");return w}return d=o(u,n),de.isASN1HEX(d)?(w=r+"["+E+"]\n")+s(d,t,0,r+"  "):(("68747470"==d.substr(0,8)||"subjectAltName"===t.x509ExtName&&2==E)&&(d=Ee(d)),r+"["+E+"] "+d+"\n")}return r+"UNKNOWN("+l+") "+o(u,n)+"\n"},de.isContextTag=function(e,t){var n,r;e=e.toLowerCase();try{n=parseInt(e,16)}catch(e){return-1}if(void 0===t)return 128==(192&n);try{return null!=t.match(/^\[[0-9]+\]$/)&&!((r=parseInt(t.substr(1,t.length-1),10))>31)&&128==(192&n)&&(31&n)==r}catch(e){return!1}},de.isASN1HEX=function(e){var t=de;if(e.length%2==1)return!1;var n=t.getVblen(e,0),r=e.substr(0,2),i=t.getL(e,0);return e.length-r.length-i.length==2*n},de.checkStrictDER=function(e,t,n,r,i){var o=de;if(void 0===n){if("string"!=typeof e)throw new Error("not hex string");if(e=e.toLowerCase(),!ce.lang.String.isHex(e))throw new Error("not hex string");n=e.length,i=(r=e.length/2)<128?1:Math.ceil(r.toString(16))+1}if(o.getL(e,t).length>2*i)throw new Error("L of TLV too long: idx="+t);var s=o.getVblen(e,t);if(s>r)throw new Error("value of L too long than hex: idx="+t);var a=o.getTLV(e,t),u=a.length-2-o.getL(e,t).length;if(u!==2*s)throw new Error("V string length and L's value not the same:"+u+"/"+2*s);if(0===t&&e.length!=a.length)throw new Error("total length and TLV length unmatch:"+e.length+"!="+a.length);var c=e.substr(t,2);if("02"===c){var l=o.getVidx(e,t);if("00"==e.substr(l,2)&&e.charCodeAt(l+2)<56)throw new Error("not least zeros for DER INTEGER")}if(32&parseInt(c,16)){for(var h=o.getVblen(e,t),d=0,f=o.getChildIdx(e,t),p=0;p<f.length;p++)d+=o.getTLV(e,f[p]).length,o.checkStrictDER(e,f[p],n,r,i);if(2*h!=d)throw new Error("sum of children's TLV length and L unmatch: "+2*h+"!="+d)}},de.oidname=function(e){var t=ce.asn1;ce.lang.String.isHex(e)&&(e=t.ASN1Util.oidHexToInt(e));var n=t.x509.OID.oid2name(e);return""===n&&(n=e),n},void 0!==ce&&ce||(t.KJUR=ce={}),void 0!==ce.lang&&ce.lang||(ce.lang={}),ce.lang.String=function(){},"function"==typeof e?(t.utf8tob64u=le=function(t){return be(e.from(t,"utf8").toString("base64"))},t.b64utoutf8=he=function(t){return e.from(ve(t),"base64").toString("utf8")}):(t.utf8tob64u=le=function(e){return ye(Ie(Ue(e)))},t.b64utoutf8=he=function(e){return decodeURIComponent(Re(_e(e)))}),ce.lang.String.isInteger=function(e){return!!e.match(/^[0-9]+$/)||!!e.match(/^-[0-9]+$/)},ce.lang.String.isHex=function(e){return Le(e)},ce.lang.String.isBase64=function(e){return!(!(e=e.replace(/\s+/g,"")).match(/^[0-9A-Za-z+\/]+={0,3}$/)||e.length%4!=0)},ce.lang.String.isBase64URL=function(e){return!e.match(/[+/=]/)&&(e=ve(e),ce.lang.String.isBase64(e))},ce.lang.String.isIntegerArray=function(e){return!!(e=e.replace(/\s+/g,"")).match(/^\[[0-9,]+\]$/)},ce.lang.String.isPrintable=function(e){return null!==e.match(/^[0-9A-Za-z '()+,-./:=?]*$/)},ce.lang.String.isIA5=function(e){return null!==e.match(/^[\x20-\x21\x23-\x7f]*$/)},ce.lang.String.isMail=function(e){return null!==e.match(/^[A-Za-z0-9]{1}[A-Za-z0-9_.-]*@{1}[A-Za-z0-9_.-]{1,}\.[A-Za-z0-9]{1,}$/)};var Be=function(e,t,n){return null==n&&(n="0"),e.length>=t?e:new Array(t-e.length+1).join(n)+e};void 0!==ce&&ce||(t.KJUR=ce={}),void 0!==ce.crypto&&ce.crypto||(ce.crypto={}),ce.crypto.Util=new function(){this.DIGESTINFOHEAD={sha1:"3021300906052b0e03021a05000414",sha224:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",sha384:"3041300d060960864801650304020205000430",sha512:"3051300d060960864801650304020305000440",md2:"3020300c06082a864886f70d020205000410",md5:"3020300c06082a864886f70d020505000410",ripemd160:"3021300906052b2403020105000414"},this.DEFAULTPROVIDER={md5:"cryptojs",sha1:"cryptojs",sha224:"cryptojs",sha256:"cryptojs",sha384:"cryptojs",sha512:"cryptojs",ripemd160:"cryptojs",hmacmd5:"cryptojs",hmacsha1:"cryptojs",hmacsha224:"cryptojs",hmacsha256:"cryptojs",hmacsha384:"cryptojs",hmacsha512:"cryptojs",hmacripemd160:"cryptojs",MD5withRSA:"cryptojs/jsrsa",SHA1withRSA:"cryptojs/jsrsa",SHA224withRSA:"cryptojs/jsrsa",SHA256withRSA:"cryptojs/jsrsa",SHA384withRSA:"cryptojs/jsrsa",SHA512withRSA:"cryptojs/jsrsa",RIPEMD160withRSA:"cryptojs/jsrsa",MD5withECDSA:"cryptojs/jsrsa",SHA1withECDSA:"cryptojs/jsrsa",SHA224withECDSA:"cryptojs/jsrsa",SHA256withECDSA:"cryptojs/jsrsa",SHA384withECDSA:"cryptojs/jsrsa",SHA512withECDSA:"cryptojs/jsrsa",RIPEMD160withECDSA:"cryptojs/jsrsa",SHA1withDSA:"cryptojs/jsrsa",SHA224withDSA:"cryptojs/jsrsa",SHA256withDSA:"cryptojs/jsrsa",MD5withRSAandMGF1:"cryptojs/jsrsa",SHAwithRSAandMGF1:"cryptojs/jsrsa",SHA1withRSAandMGF1:"cryptojs/jsrsa",SHA224withRSAandMGF1:"cryptojs/jsrsa",SHA256withRSAandMGF1:"cryptojs/jsrsa",SHA384withRSAandMGF1:"cryptojs/jsrsa",SHA512withRSAandMGF1:"cryptojs/jsrsa",RIPEMD160withRSAandMGF1:"cryptojs/jsrsa"},this.CRYPTOJSMESSAGEDIGESTNAME={md5:b.algo.MD5,sha1:b.algo.SHA1,sha224:b.algo.SHA224,sha256:b.algo.SHA256,sha384:b.algo.SHA384,sha512:b.algo.SHA512,ripemd160:b.algo.RIPEMD160},this.getDigestInfoHex=function(e,t){if(void 0===this.DIGESTINFOHEAD[t])throw"alg not supported in Util.DIGESTINFOHEAD: "+t;return this.DIGESTINFOHEAD[t]+e},this.getPaddedDigestInfoHex=function(e,t,n){var r=this.getDigestInfoHex(e,t),i=n/4;if(r.length+22>i)throw"key is too short for SigAlg: keylen="+n+","+t;for(var o="0001",s="00"+r,a="",u=i-o.length-s.length,c=0;c<u;c+=2)a+="ff";return o+a+s},this.hashString=function(e,t){return new ce.crypto.MessageDigest({alg:t}).digestString(e)},this.hashHex=function(e,t){return new ce.crypto.MessageDigest({alg:t}).digestHex(e)},this.sha1=function(e){return this.hashString(e,"sha1")},this.sha256=function(e){return this.hashString(e,"sha256")},this.sha256Hex=function(e){return this.hashHex(e,"sha256")},this.sha512=function(e){return this.hashString(e,"sha512")},this.sha512Hex=function(e){return this.hashHex(e,"sha512")},this.isKey=function(e){return e instanceof ie||e instanceof ce.crypto.DSA||e instanceof ce.crypto.ECDSA}},ce.crypto.Util.md5=function(e){return new ce.crypto.MessageDigest({alg:"md5",prov:"cryptojs"}).digestString(e)},ce.crypto.Util.ripemd160=function(e){return new ce.crypto.MessageDigest({alg:"ripemd160",prov:"cryptojs"}).digestString(e)},ce.crypto.Util.SECURERANDOMGEN=new te,ce.crypto.Util.getRandomHexOfNbytes=function(e){var t=new Array(e);return ce.crypto.Util.SECURERANDOMGEN.nextBytes(t),me(t)},ce.crypto.Util.getRandomBigIntegerOfNbytes=function(e){return new S(ce.crypto.Util.getRandomHexOfNbytes(e),16)},ce.crypto.Util.getRandomHexOfNbits=function(e){var t=e%8,n=new Array((e-t)/8+1);return ce.crypto.Util.SECURERANDOMGEN.nextBytes(n),n[0]=(255<<t&255^255)&n[0],me(n)},ce.crypto.Util.getRandomBigIntegerOfNbits=function(e){return new S(ce.crypto.Util.getRandomHexOfNbits(e),16)},ce.crypto.Util.getRandomBigIntegerZeroToMax=function(e){for(var t=e.bitLength();;){var n=ce.crypto.Util.getRandomBigIntegerOfNbits(t);if(-1!=e.compareTo(n))return n}},ce.crypto.Util.getRandomBigIntegerMinToMax=function(e,t){var n=e.compareTo(t);if(1==n)throw"biMin is greater than biMax";if(0==n)return e;var r=t.subtract(e);return ce.crypto.Util.getRandomBigIntegerZeroToMax(r).add(e)},ce.crypto.MessageDigest=function(e){this.setAlgAndProvider=function(e,t){if(null!==(e=ce.crypto.MessageDigest.getCanonicalAlgName(e))&&void 0===t&&(t=ce.crypto.Util.DEFAULTPROVIDER[e]),-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(e)&&"cryptojs"==t){try{this.md=ce.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[e].create()}catch(t){throw"setAlgAndProvider hash alg set fail alg="+e+"/"+t}this.updateString=function(e){this.md.update(e)},this.updateHex=function(e){var t=b.enc.Hex.parse(e);this.md.update(t)},this.digest=function(){return this.md.finalize().toString(b.enc.Hex)},this.digestString=function(e){return this.updateString(e),this.digest()},this.digestHex=function(e){return this.updateHex(e),this.digest()}}if(-1!=":sha256:".indexOf(e)&&"sjcl"==t){try{this.md=new sjcl.hash.sha256}catch(t){throw"setAlgAndProvider hash alg set fail alg="+e+"/"+t}this.updateString=function(e){this.md.update(e)},this.updateHex=function(e){var t=sjcl.codec.hex.toBits(e);this.md.update(t)},this.digest=function(){var e=this.md.finalize();return sjcl.codec.hex.fromBits(e)},this.digestString=function(e){return this.updateString(e),this.digest()},this.digestHex=function(e){return this.updateHex(e),this.digest()}}},this.updateString=function(e){throw"updateString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.updateHex=function(e){throw"updateHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digest=function(){throw"digest() not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestString=function(e){throw"digestString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestHex=function(e){throw"digestHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},void 0!==e&&void 0!==e.alg&&(this.algName=e.alg,void 0===e.prov&&(this.provName=ce.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName))},ce.crypto.MessageDigest.getCanonicalAlgName=function(e){return"string"==typeof e&&(e=(e=e.toLowerCase()).replace(/-/,"")),e},ce.crypto.MessageDigest.getHashLength=function(e){var t=ce.crypto.MessageDigest,n=t.getCanonicalAlgName(e);if(void 0===t.HASHLENGTH[n])throw"not supported algorithm: "+e;return t.HASHLENGTH[n]},ce.crypto.MessageDigest.HASHLENGTH={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,ripemd160:20},ce.crypto.Mac=function(e){this.setAlgAndProvider=function(e,t){if(null==(e=e.toLowerCase())&&(e="hmacsha1"),"hmac"!=(e=e.toLowerCase()).substr(0,4))throw"setAlgAndProvider unsupported HMAC alg: "+e;void 0===t&&(t=ce.crypto.Util.DEFAULTPROVIDER[e]),this.algProv=e+"/"+t;var n=e.substr(4);if(-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(n)&&"cryptojs"==t){try{var r=ce.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[n];this.mac=b.algo.HMAC.create(r,this.pass)}catch(e){throw"setAlgAndProvider hash alg set fail hashAlg="+n+"/"+e}this.updateString=function(e){this.mac.update(e)},this.updateHex=function(e){var t=b.enc.Hex.parse(e);this.mac.update(t)},this.doFinal=function(){return this.mac.finalize().toString(b.enc.Hex)},this.doFinalString=function(e){return this.updateString(e),this.doFinal()},this.doFinalHex=function(e){return this.updateHex(e),this.doFinal()}}},this.updateString=function(e){throw"updateString(str) not supported for this alg/prov: "+this.algProv},this.updateHex=function(e){throw"updateHex(hex) not supported for this alg/prov: "+this.algProv},this.doFinal=function(){throw"digest() not supported for this alg/prov: "+this.algProv},this.doFinalString=function(e){throw"digestString(str) not supported for this alg/prov: "+this.algProv},this.doFinalHex=function(e){throw"digestHex(hex) not supported for this alg/prov: "+this.algProv},this.setPassword=function(e){if("string"==typeof e){var t=e;return e.length%2!=1&&e.match(/^[0-9A-Fa-f]+$/)||(t=Me(e)),void(this.pass=b.enc.Hex.parse(t))}if("object"!=(void 0===e?"undefined":n(e)))throw"KJUR.crypto.Mac unsupported password type: "+e;if(t=null,void 0!==e.hex){if(e.hex.length%2!=0||!e.hex.match(/^[0-9A-Fa-f]+$/))throw"Mac: wrong hex password: "+e.hex;t=e.hex}if(void 0!==e.utf8&&(t=we(e.utf8)),void 0!==e.rstr&&(t=Me(e.rstr)),void 0!==e.b64&&(t=w(e.b64)),void 0!==e.b64u&&(t=_e(e.b64u)),null==t)throw"KJUR.crypto.Mac unsupported password type: "+e;this.pass=b.enc.Hex.parse(t)},void 0!==e&&(void 0!==e.pass&&this.setPassword(e.pass),void 0!==e.alg&&(this.algName=e.alg,void 0===e.prov&&(this.provName=ce.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName)))},ce.crypto.Signature=function(e){var t=null;if(this._setAlgNames=function(){var e=this.algName.match(/^(.+)with(.+)$/);e&&(this.mdAlgName=e[1].toLowerCase(),this.pubkeyAlgName=e[2].toLowerCase(),"rsaandmgf1"==this.pubkeyAlgName&&"sha"==this.mdAlgName&&(this.mdAlgName="sha1"))},this._zeroPaddingOfSignature=function(e,t){for(var n="",r=t/4-e.length,i=0;i<r;i++)n+="0";return n+e},this.setAlgAndProvider=function(e,t){if(this._setAlgNames(),"cryptojs/jsrsa"!=t)throw new Error("provider not supported: "+t);if(-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(this.mdAlgName)){try{this.md=new ce.crypto.MessageDigest({alg:this.mdAlgName})}catch(e){throw new Error("setAlgAndProvider hash alg set fail alg="+this.mdAlgName+"/"+e)}this.init=function(e,t){var n=null;try{n=void 0===t?He.getKey(e):He.getKey(e,t)}catch(e){throw"init failed:"+e}if(!0===n.isPrivate)this.prvKey=n,this.state="SIGN";else{if(!0!==n.isPublic)throw"init failed.:"+n;this.pubKey=n,this.state="VERIFY"}},this.updateString=function(e){this.md.updateString(e)},this.updateHex=function(e){this.md.updateHex(e)},this.sign=function(){if(this.sHashHex=this.md.digest(),void 0===this.prvKey&&void 0!==this.ecprvhex&&void 0!==this.eccurvename&&void 0!==ce.crypto.ECDSA&&(this.prvKey=new ce.crypto.ECDSA({curve:this.eccurvename,prv:this.ecprvhex})),this.prvKey instanceof ie&&"rsaandmgf1"===this.pubkeyAlgName)this.hSign=this.prvKey.signWithMessageHashPSS(this.sHashHex,this.mdAlgName,this.pssSaltLen);else if(this.prvKey instanceof ie&&"rsa"===this.pubkeyAlgName)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex,this.mdAlgName);else if(this.prvKey instanceof ce.crypto.ECDSA)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex);else{if(!(this.prvKey instanceof ce.crypto.DSA))throw"Signature: unsupported private key alg: "+this.pubkeyAlgName;this.hSign=this.prvKey.signWithMessageHash(this.sHashHex)}return this.hSign},this.signString=function(e){return this.updateString(e),this.sign()},this.signHex=function(e){return this.updateHex(e),this.sign()},this.verify=function(e){if(this.sHashHex=this.md.digest(),void 0===this.pubKey&&void 0!==this.ecpubhex&&void 0!==this.eccurvename&&void 0!==ce.crypto.ECDSA&&(this.pubKey=new ce.crypto.ECDSA({curve:this.eccurvename,pub:this.ecpubhex})),this.pubKey instanceof ie&&"rsaandmgf1"===this.pubkeyAlgName)return this.pubKey.verifyWithMessageHashPSS(this.sHashHex,e,this.mdAlgName,this.pssSaltLen);if(this.pubKey instanceof ie&&"rsa"===this.pubkeyAlgName)return this.pubKey.verifyWithMessageHash(this.sHashHex,e);if(void 0!==ce.crypto.ECDSA&&this.pubKey instanceof ce.crypto.ECDSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,e);if(void 0!==ce.crypto.DSA&&this.pubKey instanceof ce.crypto.DSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,e);throw"Signature: unsupported public key alg: "+this.pubkeyAlgName}}},this.init=function(e,t){throw"init(key, pass) not supported for this alg:prov="+this.algProvName},this.updateString=function(e){throw"updateString(str) not supported for this alg:prov="+this.algProvName},this.updateHex=function(e){throw"updateHex(hex) not supported for this alg:prov="+this.algProvName},this.sign=function(){throw"sign() not supported for this alg:prov="+this.algProvName},this.signString=function(e){throw"digestString(str) not supported for this alg:prov="+this.algProvName},this.signHex=function(e){throw"digestHex(hex) not supported for this alg:prov="+this.algProvName},this.verify=function(e){throw"verify(hSigVal) not supported for this alg:prov="+this.algProvName},this.initParams=e,void 0!==e&&(void 0!==e.alg&&(this.algName=e.alg,void 0===e.prov?this.provName=ce.crypto.Util.DEFAULTPROVIDER[this.algName]:this.provName=e.prov,this.algProvName=this.algName+":"+this.provName,this.setAlgAndProvider(this.algName,this.provName),this._setAlgNames()),void 0!==e.psssaltlen&&(this.pssSaltLen=e.psssaltlen),void 0!==e.prvkeypem)){if(void 0!==e.prvkeypas)throw"both prvkeypem and prvkeypas parameters not supported";try{t=He.getKey(e.prvkeypem),this.init(t)}catch(e){throw"fatal error to load pem private key: "+e}}},ce.crypto.Cipher=function(e){},ce.crypto.Cipher.encrypt=function(e,t,n){if(t instanceof ie&&t.isPublic){var r=ce.crypto.Cipher.getAlgByKeyAndName(t,n);if("RSA"===r)return t.encrypt(e);if("RSAOAEP"===r)return t.encryptOAEP(e,"sha1");var i=r.match(/^RSAOAEP(\d+)$/);if(null!==i)return t.encryptOAEP(e,"sha"+i[1]);throw"Cipher.encrypt: unsupported algorithm for RSAKey: "+n}throw"Cipher.encrypt: unsupported key or algorithm"},ce.crypto.Cipher.decrypt=function(e,t,n){if(t instanceof ie&&t.isPrivate){var r=ce.crypto.Cipher.getAlgByKeyAndName(t,n);if("RSA"===r)return t.decrypt(e);if("RSAOAEP"===r)return t.decryptOAEP(e,"sha1");var i=r.match(/^RSAOAEP(\d+)$/);if(null!==i)return t.decryptOAEP(e,"sha"+i[1]);throw"Cipher.decrypt: unsupported algorithm for RSAKey: "+n}throw"Cipher.decrypt: unsupported key or algorithm"},ce.crypto.Cipher.getAlgByKeyAndName=function(e,t){if(e instanceof ie){if(-1!=":RSA:RSAOAEP:RSAOAEP224:RSAOAEP256:RSAOAEP384:RSAOAEP512:".indexOf(t))return t;if(null==t)return"RSA";throw"getAlgByKeyAndName: not supported algorithm name for RSAKey: "+t}throw"getAlgByKeyAndName: not supported algorithm name: "+t},ce.crypto.OID=new function(){this.oidhex2name={"2a864886f70d010101":"rsaEncryption","2a8648ce3d0201":"ecPublicKey","2a8648ce380401":"dsa","2a8648ce3d030107":"secp256r1","2b8104001f":"secp192k1","2b81040021":"secp224r1","2b8104000a":"secp256k1","2b81040023":"secp521r1","2b81040022":"secp384r1","2a8648ce380403":"SHA1withDSA","608648016503040301":"SHA224withDSA","608648016503040302":"SHA256withDSA"}},void 0!==ce&&ce||(t.KJUR=ce={}),void 0!==ce.crypto&&ce.crypto||(ce.crypto={}),ce.crypto.ECDSA=function(e){var t=Error,r=S,i=se,o=ce.crypto.ECDSA,s=ce.crypto.ECParameterDB,a=o.getName,u=de,c=u.getVbyListEx,l=u.isASN1HEX,h=new te;this.type="EC",this.isPrivate=!1,this.isPublic=!1,this.getBigRandom=function(e){return new r(e.bitLength(),h).mod(e.subtract(r.ONE)).add(r.ONE)},this.setNamedCurve=function(e){this.ecparams=s.getByName(e),this.prvKeyHex=null,this.pubKeyHex=null,this.curveName=e},this.setPrivateKeyHex=function(e){this.isPrivate=!0,this.prvKeyHex=e},this.setPublicKeyHex=function(e){this.isPublic=!0,this.pubKeyHex=e},this.getPublicKeyXYHex=function(){var e=this.pubKeyHex;if("04"!==e.substr(0,2))throw"this method supports uncompressed format(04) only";var t=this.ecparams.keylen/4;if(e.length!==2+2*t)throw"malformed public key hex length";var n={};return n.x=e.substr(2,t),n.y=e.substr(2+t),n},this.getShortNISTPCurveName=function(){var e=this.curveName;return"secp256r1"===e||"NIST P-256"===e||"P-256"===e||"prime256v1"===e?"P-256":"secp384r1"===e||"NIST P-384"===e||"P-384"===e?"P-384":null},this.generateKeyPairHex=function(){var e=this.ecparams.n,t=this.getBigRandom(e),n=this.ecparams.G.multiply(t),r=n.getX().toBigInteger(),i=n.getY().toBigInteger(),o=this.ecparams.keylen/4,s=("0000000000"+t.toString(16)).slice(-o),a="04"+("0000000000"+r.toString(16)).slice(-o)+("0000000000"+i.toString(16)).slice(-o);return this.setPrivateKeyHex(s),this.setPublicKeyHex(a),{ecprvhex:s,ecpubhex:a}},this.signWithMessageHash=function(e){return this.signHex(e,this.prvKeyHex)},this.signHex=function(e,t){var n=new r(t,16),i=this.ecparams.n,s=new r(e.substring(0,this.ecparams.keylen/4),16);do{var a=this.getBigRandom(i),u=this.ecparams.G.multiply(a).getX().toBigInteger().mod(i)}while(u.compareTo(r.ZERO)<=0);var c=a.modInverse(i).multiply(s.add(n.multiply(u))).mod(i);return o.biRSSigToASN1Sig(u,c)},this.sign=function(e,t){var n=t,i=this.ecparams.n,o=r.fromByteArrayUnsigned(e);do{var s=this.getBigRandom(i),a=this.ecparams.G.multiply(s).getX().toBigInteger().mod(i)}while(a.compareTo(S.ZERO)<=0);var u=s.modInverse(i).multiply(o.add(n.multiply(a))).mod(i);return this.serializeSig(a,u)},this.verifyWithMessageHash=function(e,t){return this.verifyHex(e,t,this.pubKeyHex)},this.verifyHex=function(e,t,n){try{var s,a,u=o.parseSigHex(t);s=u.r,a=u.s;var c=i.decodeFromHex(this.ecparams.curve,n),l=new r(e.substring(0,this.ecparams.keylen/4),16);return this.verifyRaw(l,s,a,c)}catch(e){return!1}},this.verify=function(e,t,o){var s,a,u;if(Bitcoin.Util.isArray(t)){var c=this.parseSig(t);s=c.r,a=c.s}else{if("object"!==(void 0===t?"undefined":n(t))||!t.r||!t.s)throw"Invalid value for signature";s=t.r,a=t.s}if(o instanceof se)u=o;else{if(!Bitcoin.Util.isArray(o))throw"Invalid format for pubkey value, must be byte array or ECPointFp";u=i.decodeFrom(this.ecparams.curve,o)}var l=r.fromByteArrayUnsigned(e);return this.verifyRaw(l,s,a,u)},this.verifyRaw=function(e,t,n,i){var o=this.ecparams.n,s=this.ecparams.G;if(t.compareTo(r.ONE)<0||t.compareTo(o)>=0)return!1;if(n.compareTo(r.ONE)<0||n.compareTo(o)>=0)return!1;var a=n.modInverse(o),u=e.multiply(a).mod(o),c=t.multiply(a).mod(o);return s.multiply(u).add(i.multiply(c)).getX().toBigInteger().mod(o).equals(t)},this.serializeSig=function(e,t){var n=e.toByteArraySigned(),r=t.toByteArraySigned(),i=[];return i.push(2),i.push(n.length),(i=i.concat(n)).push(2),i.push(r.length),(i=i.concat(r)).unshift(i.length),i.unshift(48),i},this.parseSig=function(e){var t;if(48!=e[0])throw new Error("Signature not a valid DERSequence");if(2!=e[t=2])throw new Error("First element in signature must be a DERInteger");var n=e.slice(t+2,t+2+e[t+1]);if(2!=e[t+=2+e[t+1]])throw new Error("Second element in signature must be a DERInteger");var i=e.slice(t+2,t+2+e[t+1]);return t+=2+e[t+1],{r:r.fromByteArrayUnsigned(n),s:r.fromByteArrayUnsigned(i)}},this.parseSigCompact=function(e){if(65!==e.length)throw"Signature has the wrong length";var t=e[0]-27;if(t<0||t>7)throw"Invalid signature type";var n=this.ecparams.n;return{r:r.fromByteArrayUnsigned(e.slice(1,33)).mod(n),s:r.fromByteArrayUnsigned(e.slice(33,65)).mod(n),i:t}},this.readPKCS5PrvKeyHex=function(e){if(!1===l(e))throw new Error("not ASN.1 hex string");var t,n,r;try{t=c(e,0,["[0]",0],"06"),n=c(e,0,[1],"04");try{r=c(e,0,["[1]",0],"03")}catch(e){}}catch(e){throw new Error("malformed PKCS#1/5 plain ECC private key")}if(this.curveName=a(t),void 0===this.curveName)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(r),this.setPrivateKeyHex(n),this.isPublic=!1},this.readPKCS8PrvKeyHex=function(e){if(!1===l(e))throw new t("not ASN.1 hex string");var n,r,i;try{c(e,0,[1,0],"06"),n=c(e,0,[1,1],"06"),r=c(e,0,[2,0,1],"04");try{i=c(e,0,[2,0,"[1]",0],"03")}catch(e){}}catch(e){throw new t("malformed PKCS#8 plain ECC private key")}if(this.curveName=a(n),void 0===this.curveName)throw new t("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(i),this.setPrivateKeyHex(r),this.isPublic=!1},this.readPKCS8PubKeyHex=function(e){if(!1===l(e))throw new t("not ASN.1 hex string");var n,r;try{c(e,0,[0,0],"06"),n=c(e,0,[0,1],"06"),r=c(e,0,[1],"03")}catch(e){throw new t("malformed PKCS#8 ECC public key")}if(this.curveName=a(n),null===this.curveName)throw new t("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(r)},this.readCertPubKeyHex=function(e,n){if(!1===l(e))throw new t("not ASN.1 hex string");var r,i;try{r=c(e,0,[0,5,0,1],"06"),i=c(e,0,[0,5,1],"03")}catch(e){throw new t("malformed X.509 certificate ECC public key")}if(this.curveName=a(r),null===this.curveName)throw new t("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(i)},void 0!==e&&void 0!==e.curve&&(this.curveName=e.curve),void 0===this.curveName&&(this.curveName="secp256r1"),this.setNamedCurve(this.curveName),void 0!==e&&(void 0!==e.prv&&this.setPrivateKeyHex(e.prv),void 0!==e.pub&&this.setPublicKeyHex(e.pub))},ce.crypto.ECDSA.parseSigHex=function(e){var t=ce.crypto.ECDSA.parseSigHexInHexRS(e);return{r:new S(t.r,16),s:new S(t.s,16)}},ce.crypto.ECDSA.parseSigHexInHexRS=function(e){var t=de,n=t.getChildIdx,r=t.getV;if(t.checkStrictDER(e,0),"30"!=e.substr(0,2))throw new Error("signature is not a ASN.1 sequence");var i=n(e,0);if(2!=i.length)throw new Error("signature shall have two elements");var o=i[0],s=i[1];if("02"!=e.substr(o,2))throw new Error("1st item not ASN.1 integer");if("02"!=e.substr(s,2))throw new Error("2nd item not ASN.1 integer");return{r:r(e,o),s:r(e,s)}},ce.crypto.ECDSA.asn1SigToConcatSig=function(e){var t=ce.crypto.ECDSA.parseSigHexInHexRS(e),n=t.r,r=t.s;if("00"==n.substr(0,2)&&n.length%32==2&&(n=n.substr(2)),"00"==r.substr(0,2)&&r.length%32==2&&(r=r.substr(2)),n.length%32==30&&(n="00"+n),r.length%32==30&&(r="00"+r),n.length%32!=0)throw"unknown ECDSA sig r length error";if(r.length%32!=0)throw"unknown ECDSA sig s length error";return n+r},ce.crypto.ECDSA.concatSigToASN1Sig=function(e){if(e.length/2*8%128!=0)throw"unknown ECDSA concatinated r-s sig  length error";var t=e.substr(0,e.length/2),n=e.substr(e.length/2);return ce.crypto.ECDSA.hexRSSigToASN1Sig(t,n)},ce.crypto.ECDSA.hexRSSigToASN1Sig=function(e,t){var n=new S(e,16),r=new S(t,16);return ce.crypto.ECDSA.biRSSigToASN1Sig(n,r)},ce.crypto.ECDSA.biRSSigToASN1Sig=function(e,t){var n=ce.asn1,r=new n.DERInteger({bigint:e}),i=new n.DERInteger({bigint:t});return new n.DERSequence({array:[r,i]}).getEncodedHex()},ce.crypto.ECDSA.getName=function(e){return"2b8104001f"===e?"secp192k1":"2a8648ce3d030107"===e?"secp256r1":"2b8104000a"===e?"secp256k1":"2b81040021"===e?"secp224r1":"2b81040022"===e?"secp384r1":-1!=="|secp256r1|NIST P-256|P-256|prime256v1|".indexOf(e)?"secp256r1":-1!=="|secp256k1|".indexOf(e)?"secp256k1":-1!=="|secp224r1|NIST P-224|P-224|".indexOf(e)?"secp224r1":-1!=="|secp384r1|NIST P-384|P-384|".indexOf(e)?"secp384r1":null},void 0!==ce&&ce||(t.KJUR=ce={}),void 0!==ce.crypto&&ce.crypto||(ce.crypto={}),ce.crypto.ECParameterDB=new function(){var e={},t={};function n(e){return new S(e,16)}this.getByName=function(n){var r=n;if(void 0!==t[r]&&(r=t[n]),void 0!==e[r])return e[r];throw"unregistered EC curve name: "+r},this.regist=function(r,i,o,s,a,u,c,l,h,d,f,p){e[r]={};var m=n(o),g=n(s),b=n(a),v=n(u),y=n(c),_=new ae(m,g,b),w=_.decodePointHex("04"+l+h);e[r].name=r,e[r].keylen=i,e[r].curve=_,e[r].G=w,e[r].n=v,e[r].h=y,e[r].oid=f,e[r].info=p;for(var E=0;E<d.length;E++)t[d[E]]=r}},ce.crypto.ECParameterDB.regist("secp128r1",128,"FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFC","E87579C11079F43DD824993C2CEE5ED3","FFFFFFFE0000000075A30D1B9038A115","1","161FF7528B899B2D0C28607CA52C5B86","CF5AC8395BAFEB13C02DA292DDED7A83",[],"","secp128r1 : SECG curve over a 128 bit prime field"),ce.crypto.ECParameterDB.regist("secp160k1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFAC73","0","7","0100000000000000000001B8FA16DFAB9ACA16B6B3","1","3B4C382CE37AA192A4019E763036F4F5DD4D7EBB","938CF935318FDCED6BC28286531733C3F03C4FEE",[],"","secp160k1 : SECG curve over a 160 bit prime field"),ce.crypto.ECParameterDB.regist("secp160r1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFC","1C97BEFC54BD7A8B65ACF89F81D4D4ADC565FA45","0100000000000000000001F4C8F927AED3CA752257","1","4A96B5688EF573284664698968C38BB913CBFC82","23A628553168947D59DCC912042351377AC5FB32",[],"","secp160r1 : SECG curve over a 160 bit prime field"),ce.crypto.ECParameterDB.regist("secp192k1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFEE37","0","3","FFFFFFFFFFFFFFFFFFFFFFFE26F2FC170F69466A74DEFD8D","1","DB4FF10EC057E9AE26B07D0280B7F4341DA5D1B1EAE06C7D","9B2F2F6D9C5628A7844163D015BE86344082AA88D95E2F9D",[]),ce.crypto.ECParameterDB.regist("secp192r1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFC","64210519E59C80E70FA7E9AB72243049FEB8DEECC146B9B1","FFFFFFFFFFFFFFFFFFFFFFFF99DEF836146BC9B1B4D22831","1","188DA80EB03090F67CBF20EB43A18800F4FF0AFD82FF1012","07192B95FFC8DA78631011ED6B24CDD573F977A11E794811",[]),ce.crypto.ECParameterDB.regist("secp224r1",224,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF000000000000000000000001","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFE","B4050A850C04B3ABF54132565044B0B7D7BFD8BA270B39432355FFB4","FFFFFFFFFFFFFFFFFFFFFFFFFFFF16A2E0B8F03E13DD29455C5C2A3D","1","B70E0CBD6BB4BF7F321390B94A03C1D356C21122343280D6115C1D21","BD376388B5F723FB4C22DFE6CD4375A05A07476444D5819985007E34",[]),ce.crypto.ECParameterDB.regist("secp256k1",256,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFC2F","0","7","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141","1","79BE667EF9DCBBAC55A06295CE870B07029BFCDB2DCE28D959F2815B16F81798","483ADA7726A3C4655DA4FBFC0E1108A8FD17B448A68554199C47D08FFB10D4B8",[]),ce.crypto.ECParameterDB.regist("secp256r1",256,"FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFC","5AC635D8AA3A93E7B3EBBD55769886BC651D06B0CC53B0F63BCE3C3E27D2604B","FFFFFFFF00000000FFFFFFFFFFFFFFFFBCE6FAADA7179E84F3B9CAC2FC632551","1","6B17D1F2E12C4247F8BCE6E563A440F277037D812DEB33A0F4A13945D898C296","4FE342E2FE1A7F9B8EE7EB4A7C0F9E162BCE33576B315ECECBB6406837BF51F5",["NIST P-256","P-256","prime256v1"]),ce.crypto.ECParameterDB.regist("secp384r1",384,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFC","B3312FA7E23EE7E4988E056BE3F82D19181D9C6EFE8141120314088F5013875AC656398D8A2ED19D2A85C8EDD3EC2AEF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC7634D81F4372DDF581A0DB248B0A77AECEC196ACCC52973","1","AA87CA22BE8B05378EB1C71EF320AD746E1D3B628BA79B9859F741E082542A385502F25DBF55296C3A545E3872760AB7","3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f",["NIST P-384","P-384"]),ce.crypto.ECParameterDB.regist("secp521r1",521,"1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC","051953EB9618E1C9A1F929A21A0B68540EEA2DA725B99B315F3B8B489918EF109E156193951EC7E937B1652C0BD3BB1BF073573DF883D2C34F1EF451FD46B503F00","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFA51868783BF2F966B7FCC0148F709A5D03BB5C9B8899C47AEBB6FB71E91386409","1","C6858E06B70404E9CD9E3ECB662395B4429C648139053FB521F828AF606B4D3DBAA14B5E77EFE75928FE1DC127A2FFA8DE3348B3C1856A429BF97E7E31C2E5BD66","011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650",["NIST P-521","P-521"]);var He=function(){var e=function(e,n,r){return t(b.AES,e,n,r)},t=function(e,t,n,r){var i=b.enc.Hex.parse(t),o=b.enc.Hex.parse(n),s=b.enc.Hex.parse(r),a={};a.key=o,a.iv=s,a.ciphertext=i;var u=e.decrypt(a,o,{iv:s});return b.enc.Hex.stringify(u)},n=function(e,t,n){return r(b.AES,e,t,n)},r=function(e,t,n,r){var i=b.enc.Hex.parse(t),o=b.enc.Hex.parse(n),s=b.enc.Hex.parse(r),a=e.encrypt(i,o,{iv:s}),u=b.enc.Hex.parse(a.toString());return b.enc.Base64.stringify(u)},i={"AES-256-CBC":{proc:e,eproc:n,keylen:32,ivlen:16},"AES-192-CBC":{proc:e,eproc:n,keylen:24,ivlen:16},"AES-128-CBC":{proc:e,eproc:n,keylen:16,ivlen:16},"DES-EDE3-CBC":{proc:function(e,n,r){return t(b.TripleDES,e,n,r)},eproc:function(e,t,n){return r(b.TripleDES,e,t,n)},keylen:24,ivlen:8},"DES-CBC":{proc:function(e,n,r){return t(b.DES,e,n,r)},eproc:function(e,t,n){return r(b.DES,e,t,n)},keylen:8,ivlen:8}},o=function(e){var t={},n=e.match(new RegExp("DEK-Info: ([^,]+),([0-9A-Fa-f]+)","m"));n&&(t.cipher=n[1],t.ivsalt=n[2]);var r=e.match(new RegExp("-----BEGIN ([A-Z]+) PRIVATE KEY-----"));r&&(t.type=r[1]);var i=-1,o=0;-1!=e.indexOf("\r\n\r\n")&&(i=e.indexOf("\r\n\r\n"),o=2),-1!=e.indexOf("\n\n")&&(i=e.indexOf("\n\n"),o=1);var s=e.indexOf("-----END");if(-1!=i&&-1!=s){var a=e.substring(i+2*o,s-o);a=a.replace(/\s+/g,""),t.data=a}return t},s=function(e,t,n){for(var r=n.substring(0,16),o=b.enc.Hex.parse(r),s=b.enc.Utf8.parse(t),a=i[e].keylen+i[e].ivlen,u="",c=null;;){var l=b.algo.MD5.create();if(null!=c&&l.update(c),l.update(s),l.update(o),c=l.finalize(),(u+=b.enc.Hex.stringify(c)).length>=2*a)break}var h={};return h.keyhex=u.substr(0,2*i[e].keylen),h.ivhex=u.substr(2*i[e].keylen,2*i[e].ivlen),h},a=function(e,t,n,r){var o=b.enc.Base64.parse(e),s=b.enc.Hex.stringify(o);return(0,i[t].proc)(s,n,r)};return{version:"1.0.0",parsePKCS5PEM:function(e){return o(e)},getKeyAndUnusedIvByPasscodeAndIvsalt:function(e,t,n){return s(e,t,n)},decryptKeyB64:function(e,t,n,r){return a(e,t,n,r)},getDecryptedKeyHex:function(e,t){var n=o(e),r=(n.type,n.cipher),i=n.ivsalt,u=n.data,c=s(r,t,i).keyhex;return a(u,r,c,i)},getEncryptedPKCS5PEMFromPrvKeyHex:function(e,t,n,r,o){var a="";if(void 0!==r&&null!=r||(r="AES-256-CBC"),void 0===i[r])throw"KEYUTIL unsupported algorithm: "+r;return void 0!==o&&null!=o||(o=function(e){var t=b.lib.WordArray.random(e);return b.enc.Hex.stringify(t)}(i[r].ivlen).toUpperCase()),a="-----BEGIN "+e+" PRIVATE KEY-----\r\n",a+="Proc-Type: 4,ENCRYPTED\r\n",a+="DEK-Info: "+r+","+o+"\r\n",a+="\r\n",(a+=function(e,t,n,r){return(0,i[t].eproc)(e,n,r)}(t,r,s(r,n,o).keyhex,o).replace(/(.{64})/g,"$1\r\n"))+"\r\n-----END "+e+" PRIVATE KEY-----\r\n"},parseHexOfEncryptedPKCS8:function(e){var t=de,n=t.getChildIdx,r=t.getV,i={},o=n(e,0);if(2!=o.length)throw"malformed format: SEQUENCE(0).items != 2: "+o.length;i.ciphertext=r(e,o[1]);var s=n(e,o[0]);if(2!=s.length)throw"malformed format: SEQUENCE(0.0).items != 2: "+s.length;if("2a864886f70d01050d"!=r(e,s[0]))throw"this only supports pkcs5PBES2";var a=n(e,s[1]);if(2!=s.length)throw"malformed format: SEQUENCE(0.0.1).items != 2: "+a.length;var u=n(e,a[1]);if(2!=u.length)throw"malformed format: SEQUENCE(0.0.1.1).items != 2: "+u.length;if("2a864886f70d0307"!=r(e,u[0]))throw"this only supports TripleDES";i.encryptionSchemeAlg="TripleDES",i.encryptionSchemeIV=r(e,u[1]);var c=n(e,a[0]);if(2!=c.length)throw"malformed format: SEQUENCE(0.0.1.0).items != 2: "+c.length;if("2a864886f70d01050c"!=r(e,c[0]))throw"this only supports pkcs5PBKDF2";var l=n(e,c[1]);if(l.length<2)throw"malformed format: SEQUENCE(0.0.1.0.1).items < 2: "+l.length;i.pbkdf2Salt=r(e,l[0]);var h=r(e,l[1]);try{i.pbkdf2Iter=parseInt(h,16)}catch(e){throw"malformed format pbkdf2Iter: "+h}return i},getPBKDF2KeyHexFromParam:function(e,t){var n=b.enc.Hex.parse(e.pbkdf2Salt),r=e.pbkdf2Iter,i=b.PBKDF2(t,n,{keySize:6,iterations:r});return b.enc.Hex.stringify(i)},_getPlainPKCS8HexFromEncryptedPKCS8PEM:function(e,t){var n=ke(e,"ENCRYPTED PRIVATE KEY"),r=this.parseHexOfEncryptedPKCS8(n),i=He.getPBKDF2KeyHexFromParam(r,t),o={};o.ciphertext=b.enc.Hex.parse(r.ciphertext);var s=b.enc.Hex.parse(i),a=b.enc.Hex.parse(r.encryptionSchemeIV),u=b.TripleDES.decrypt(o,s,{iv:a});return b.enc.Hex.stringify(u)},getKeyFromEncryptedPKCS8PEM:function(e,t){var n=this._getPlainPKCS8HexFromEncryptedPKCS8PEM(e,t);return this.getKeyFromPlainPrivatePKCS8Hex(n)},parsePlainPrivatePKCS8Hex:function(e){var t=de,n=t.getChildIdx,r=t.getV,i={algparam:null};if("30"!=e.substr(0,2))throw"malformed plain PKCS8 private key(code:001)";var o=n(e,0);if(3!=o.length)throw"malformed plain PKCS8 private key(code:002)";if("30"!=e.substr(o[1],2))throw"malformed PKCS8 private key(code:003)";var s=n(e,o[1]);if(2!=s.length)throw"malformed PKCS8 private key(code:004)";if("06"!=e.substr(s[0],2))throw"malformed PKCS8 private key(code:005)";if(i.algoid=r(e,s[0]),"06"==e.substr(s[1],2)&&(i.algparam=r(e,s[1])),"04"!=e.substr(o[2],2))throw"malformed PKCS8 private key(code:006)";return i.keyidx=t.getVidx(e,o[2]),i},getKeyFromPlainPrivatePKCS8PEM:function(e){var t=ke(e,"PRIVATE KEY");return this.getKeyFromPlainPrivatePKCS8Hex(t)},getKeyFromPlainPrivatePKCS8Hex:function(e){var t,n=this.parsePlainPrivatePKCS8Hex(e);if("2a864886f70d010101"==n.algoid)t=new ie;else if("2a8648ce380401"==n.algoid)t=new ce.crypto.DSA;else{if("2a8648ce3d0201"!=n.algoid)throw"unsupported private key algorithm";t=new ce.crypto.ECDSA}return t.readPKCS8PrvKeyHex(e),t},_getKeyFromPublicPKCS8Hex:function(e){var t,n=de.getVbyList(e,0,[0,0],"06");if("2a864886f70d010101"===n)t=new ie;else if("2a8648ce380401"===n)t=new ce.crypto.DSA;else{if("2a8648ce3d0201"!==n)throw"unsupported PKCS#8 public key hex";t=new ce.crypto.ECDSA}return t.readPKCS8PubKeyHex(e),t},parsePublicRawRSAKeyHex:function(e){var t=de,n=t.getChildIdx,r=t.getV,i={};if("30"!=e.substr(0,2))throw"malformed RSA key(code:001)";var o=n(e,0);if(2!=o.length)throw"malformed RSA key(code:002)";if("02"!=e.substr(o[0],2))throw"malformed RSA key(code:003)";if(i.n=r(e,o[0]),"02"!=e.substr(o[1],2))throw"malformed RSA key(code:004)";return i.e=r(e,o[1]),i},parsePublicPKCS8Hex:function(e){var t=de,n=t.getChildIdx,r=t.getV,i={algparam:null},o=n(e,0);if(2!=o.length)throw"outer DERSequence shall have 2 elements: "+o.length;var s=o[0];if("30"!=e.substr(s,2))throw"malformed PKCS8 public key(code:001)";var a=n(e,s);if(2!=a.length)throw"malformed PKCS8 public key(code:002)";if("06"!=e.substr(a[0],2))throw"malformed PKCS8 public key(code:003)";if(i.algoid=r(e,a[0]),"06"==e.substr(a[1],2)?i.algparam=r(e,a[1]):"30"==e.substr(a[1],2)&&(i.algparam={},i.algparam.p=t.getVbyList(e,a[1],[0],"02"),i.algparam.q=t.getVbyList(e,a[1],[1],"02"),i.algparam.g=t.getVbyList(e,a[1],[2],"02")),"03"!=e.substr(o[1],2))throw"malformed PKCS8 public key(code:004)";return i.key=r(e,o[1]).substr(2),i}}}();He.getKey=function(e,t,n){var r,i=(b=de).getChildIdx,o=(b.getV,b.getVbyList),s=ce.crypto,a=s.ECDSA,u=s.DSA,c=ie,l=ke,h=He;if(void 0!==c&&e instanceof c)return e;if(void 0!==a&&e instanceof a)return e;if(void 0!==u&&e instanceof u)return e;if(void 0!==e.curve&&void 0!==e.xy&&void 0===e.d)return new a({pub:e.xy,curve:e.curve});if(void 0!==e.curve&&void 0!==e.d)return new a({prv:e.d,curve:e.curve});if(void 0===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0===e.d)return(k=new c).setPublic(e.n,e.e),k;if(void 0===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0!==e.d&&void 0!==e.p&&void 0!==e.q&&void 0!==e.dp&&void 0!==e.dq&&void 0!==e.co&&void 0===e.qi)return(k=new c).setPrivateEx(e.n,e.e,e.d,e.p,e.q,e.dp,e.dq,e.co),k;if(void 0===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0!==e.d&&void 0===e.p)return(k=new c).setPrivate(e.n,e.e,e.d),k;if(void 0!==e.p&&void 0!==e.q&&void 0!==e.g&&void 0!==e.y&&void 0===e.x)return(k=new u).setPublic(e.p,e.q,e.g,e.y),k;if(void 0!==e.p&&void 0!==e.q&&void 0!==e.g&&void 0!==e.y&&void 0!==e.x)return(k=new u).setPrivate(e.p,e.q,e.g,e.y,e.x),k;if("RSA"===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0===e.d)return(k=new c).setPublic(_e(e.n),_e(e.e)),k;if("RSA"===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0!==e.d&&void 0!==e.p&&void 0!==e.q&&void 0!==e.dp&&void 0!==e.dq&&void 0!==e.qi)return(k=new c).setPrivateEx(_e(e.n),_e(e.e),_e(e.d),_e(e.p),_e(e.q),_e(e.dp),_e(e.dq),_e(e.qi)),k;if("RSA"===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0!==e.d)return(k=new c).setPrivate(_e(e.n),_e(e.e),_e(e.d)),k;if("EC"===e.kty&&void 0!==e.crv&&void 0!==e.x&&void 0!==e.y&&void 0===e.d){var d=(T=new a({curve:e.crv})).ecparams.keylen/4,f="04"+("0000000000"+_e(e.x)).slice(-d)+("0000000000"+_e(e.y)).slice(-d);return T.setPublicKeyHex(f),T}if("EC"===e.kty&&void 0!==e.crv&&void 0!==e.x&&void 0!==e.y&&void 0!==e.d){d=(T=new a({curve:e.crv})).ecparams.keylen/4,f="04"+("0000000000"+_e(e.x)).slice(-d)+("0000000000"+_e(e.y)).slice(-d);var p=("0000000000"+_e(e.d)).slice(-d);return T.setPublicKeyHex(f),T.setPrivateKeyHex(p),T}if("pkcs5prv"===n){var m,g=e,b=de;if(9===(m=i(g,0)).length)(k=new c).readPKCS5PrvKeyHex(g);else if(6===m.length)(k=new u).readPKCS5PrvKeyHex(g);else{if(!(m.length>2&&"04"===g.substr(m[1],2)))throw"unsupported PKCS#1/5 hexadecimal key";(k=new a).readPKCS5PrvKeyHex(g)}return k}if("pkcs8prv"===n)return h.getKeyFromPlainPrivatePKCS8Hex(e);if("pkcs8pub"===n)return h._getKeyFromPublicPKCS8Hex(e);if("x509pub"===n)return We.getPublicKeyFromCertHex(e);if(-1!=e.indexOf("-END CERTIFICATE-",0)||-1!=e.indexOf("-END X509 CERTIFICATE-",0)||-1!=e.indexOf("-END TRUSTED CERTIFICATE-",0))return We.getPublicKeyFromCertPEM(e);if(-1!=e.indexOf("-END PUBLIC KEY-")){var v=ke(e,"PUBLIC KEY");return h._getKeyFromPublicPKCS8Hex(v)}if(-1!=e.indexOf("-END RSA PRIVATE KEY-")&&-1==e.indexOf("4,ENCRYPTED")){var y=l(e,"RSA PRIVATE KEY");return h.getKey(y,null,"pkcs5prv")}if(-1!=e.indexOf("-END DSA PRIVATE KEY-")&&-1==e.indexOf("4,ENCRYPTED")){var _=o(r=l(e,"DSA PRIVATE KEY"),0,[1],"02"),w=o(r,0,[2],"02"),E=o(r,0,[3],"02"),M=o(r,0,[4],"02"),O=o(r,0,[5],"02");return(k=new u).setPrivate(new S(_,16),new S(w,16),new S(E,16),new S(M,16),new S(O,16)),k}if(-1!=e.indexOf("-END EC PRIVATE KEY-")&&-1==e.indexOf("4,ENCRYPTED"))return y=l(e,"EC PRIVATE KEY"),h.getKey(y,null,"pkcs5prv");if(-1!=e.indexOf("-END PRIVATE KEY-"))return h.getKeyFromPlainPrivatePKCS8PEM(e);if(-1!=e.indexOf("-END RSA PRIVATE KEY-")&&-1!=e.indexOf("4,ENCRYPTED")){var A=h.getDecryptedKeyHex(e,t),C=new ie;return C.readPKCS5PrvKeyHex(A),C}if(-1!=e.indexOf("-END EC PRIVATE KEY-")&&-1!=e.indexOf("4,ENCRYPTED")){var T,k=o(r=h.getDecryptedKeyHex(e,t),0,[1],"04"),x=o(r,0,[2,0],"06"),j=o(r,0,[3,0],"03").substr(2);if(void 0===ce.crypto.OID.oidhex2name[x])throw"undefined OID(hex) in KJUR.crypto.OID: "+x;return(T=new a({curve:ce.crypto.OID.oidhex2name[x]})).setPublicKeyHex(j),T.setPrivateKeyHex(k),T.isPublic=!1,T}if(-1!=e.indexOf("-END DSA PRIVATE KEY-")&&-1!=e.indexOf("4,ENCRYPTED"))return _=o(r=h.getDecryptedKeyHex(e,t),0,[1],"02"),w=o(r,0,[2],"02"),E=o(r,0,[3],"02"),M=o(r,0,[4],"02"),O=o(r,0,[5],"02"),(k=new u).setPrivate(new S(_,16),new S(w,16),new S(E,16),new S(M,16),new S(O,16)),k;if(-1!=e.indexOf("-END ENCRYPTED PRIVATE KEY-"))return h.getKeyFromEncryptedPKCS8PEM(e,t);throw new Error("not supported argument")},He.generateKeypair=function(e,t){if("RSA"==e){var n=t;(s=new ie).generate(n,"10001"),s.isPrivate=!0,s.isPublic=!0;var r=new ie,i=s.n.toString(16),o=s.e.toString(16);return r.setPublic(i,o),r.isPrivate=!1,r.isPublic=!0,(a={}).prvKeyObj=s,a.pubKeyObj=r,a}if("EC"==e){var s,a,u=t,c=new ce.crypto.ECDSA({curve:u}).generateKeyPairHex();return(s=new ce.crypto.ECDSA({curve:u})).setPublicKeyHex(c.ecpubhex),s.setPrivateKeyHex(c.ecprvhex),s.isPrivate=!0,s.isPublic=!1,(r=new ce.crypto.ECDSA({curve:u})).setPublicKeyHex(c.ecpubhex),r.isPrivate=!1,r.isPublic=!0,(a={}).prvKeyObj=s,a.pubKeyObj=r,a}throw"unknown algorithm: "+e},He.getPEM=function(e,t,n,r,i,o){var s=ce,a=s.asn1,u=a.DERObjectIdentifier,c=a.DERInteger,l=a.ASN1Util.newObject,h=a.x509.SubjectPublicKeyInfo,d=s.crypto,f=d.DSA,p=d.ECDSA,m=ie;function g(e){return l({seq:[{int:0},{int:{bigint:e.n}},{int:e.e},{int:{bigint:e.d}},{int:{bigint:e.p}},{int:{bigint:e.q}},{int:{bigint:e.dmp1}},{int:{bigint:e.dmq1}},{int:{bigint:e.coeff}}]})}function v(e){return l({seq:[{int:1},{octstr:{hex:e.prvKeyHex}},{tag:["a0",!0,{oid:{name:e.curveName}}]},{tag:["a1",!0,{bitstr:{hex:"00"+e.pubKeyHex}}]}]})}function y(e){return l({seq:[{int:0},{int:{bigint:e.p}},{int:{bigint:e.q}},{int:{bigint:e.g}},{int:{bigint:e.y}},{int:{bigint:e.x}}]})}if((void 0!==m&&e instanceof m||void 0!==f&&e instanceof f||void 0!==p&&e instanceof p)&&1==e.isPublic&&(void 0===t||"PKCS8PUB"==t))return Te(S=new h(e).getEncodedHex(),"PUBLIC KEY");if("PKCS1PRV"==t&&void 0!==m&&e instanceof m&&(void 0===n||null==n)&&1==e.isPrivate)return Te(S=g(e).getEncodedHex(),"RSA PRIVATE KEY");if("PKCS1PRV"==t&&void 0!==p&&e instanceof p&&(void 0===n||null==n)&&1==e.isPrivate){var _=new u({name:e.curveName}).getEncodedHex(),w=v(e).getEncodedHex(),E="";return(E+=Te(_,"EC PARAMETERS"))+Te(w,"EC PRIVATE KEY")}if("PKCS1PRV"==t&&void 0!==f&&e instanceof f&&(void 0===n||null==n)&&1==e.isPrivate)return Te(S=y(e).getEncodedHex(),"DSA PRIVATE KEY");if("PKCS5PRV"==t&&void 0!==m&&e instanceof m&&void 0!==n&&null!=n&&1==e.isPrivate){var S=g(e).getEncodedHex();return void 0===r&&(r="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("RSA",S,n,r,o)}if("PKCS5PRV"==t&&void 0!==p&&e instanceof p&&void 0!==n&&null!=n&&1==e.isPrivate)return S=v(e).getEncodedHex(),void 0===r&&(r="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("EC",S,n,r,o);if("PKCS5PRV"==t&&void 0!==f&&e instanceof f&&void 0!==n&&null!=n&&1==e.isPrivate)return S=y(e).getEncodedHex(),void 0===r&&(r="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("DSA",S,n,r,o);var M=function(e,t){var n=O(e,t);return new l({seq:[{seq:[{oid:{name:"pkcs5PBES2"}},{seq:[{seq:[{oid:{name:"pkcs5PBKDF2"}},{seq:[{octstr:{hex:n.pbkdf2Salt}},{int:n.pbkdf2Iter}]}]},{seq:[{oid:{name:"des-EDE3-CBC"}},{octstr:{hex:n.encryptionSchemeIV}}]}]}]},{octstr:{hex:n.ciphertext}}]}).getEncodedHex()},O=function(e,t){var n=b.lib.WordArray.random(8),r=b.lib.WordArray.random(8),i=b.PBKDF2(t,n,{keySize:6,iterations:100}),o=b.enc.Hex.parse(e),s=b.TripleDES.encrypt(o,i,{iv:r})+"",a={};return a.ciphertext=s,a.pbkdf2Salt=b.enc.Hex.stringify(n),a.pbkdf2Iter=100,a.encryptionSchemeAlg="DES-EDE3-CBC",a.encryptionSchemeIV=b.enc.Hex.stringify(r),a};if("PKCS8PRV"==t&&null!=m&&e instanceof m&&1==e.isPrivate){var A=g(e).getEncodedHex();return S=l({seq:[{int:0},{seq:[{oid:{name:"rsaEncryption"}},{null:!0}]},{octstr:{hex:A}}]}).getEncodedHex(),void 0===n||null==n?Te(S,"PRIVATE KEY"):Te(w=M(S,n),"ENCRYPTED PRIVATE KEY")}if("PKCS8PRV"==t&&void 0!==p&&e instanceof p&&1==e.isPrivate)return A=new l({seq:[{int:1},{octstr:{hex:e.prvKeyHex}},{tag:["a1",!0,{bitstr:{hex:"00"+e.pubKeyHex}}]}]}).getEncodedHex(),S=l({seq:[{int:0},{seq:[{oid:{name:"ecPublicKey"}},{oid:{name:e.curveName}}]},{octstr:{hex:A}}]}).getEncodedHex(),void 0===n||null==n?Te(S,"PRIVATE KEY"):Te(w=M(S,n),"ENCRYPTED PRIVATE KEY");if("PKCS8PRV"==t&&void 0!==f&&e instanceof f&&1==e.isPrivate)return A=new c({bigint:e.x}).getEncodedHex(),S=l({seq:[{int:0},{seq:[{oid:{name:"dsa"}},{seq:[{int:{bigint:e.p}},{int:{bigint:e.q}},{int:{bigint:e.g}}]}]},{octstr:{hex:A}}]}).getEncodedHex(),void 0===n||null==n?Te(S,"PRIVATE KEY"):Te(w=M(S,n),"ENCRYPTED PRIVATE KEY");throw new Error("unsupported object nor format")},He.getKeyFromCSRPEM=function(e){var t=ke(e,"CERTIFICATE REQUEST");return He.getKeyFromCSRHex(t)},He.getKeyFromCSRHex=function(e){var t=He.parseCSRHex(e);return He.getKey(t.p8pubkeyhex,null,"pkcs8pub")},He.parseCSRHex=function(e){var t=de,n=t.getChildIdx,r=t.getTLV,i={},o=e;if("30"!=o.substr(0,2))throw"malformed CSR(code:001)";var s=n(o,0);if(s.length<1)throw"malformed CSR(code:002)";if("30"!=o.substr(s[0],2))throw"malformed CSR(code:003)";var a=n(o,s[0]);if(a.length<3)throw"malformed CSR(code:004)";return i.p8pubkeyhex=r(o,a[2]),i},He.getKeyID=function(e){var t=He,n=de;"string"==typeof e&&-1!=e.indexOf("BEGIN ")&&(e=t.getKey(e));var r=ke(t.getPEM(e)),i=n.getIdxbyList(r,0,[1]),o=n.getV(r,i).substring(2);return ce.crypto.Util.hashHex(o,"sha1")},He.getJWKFromKey=function(e){var t={};if(e instanceof ie&&e.isPrivate)return t.kty="RSA",t.n=ye(e.n.toString(16)),t.e=ye(e.e.toString(16)),t.d=ye(e.d.toString(16)),t.p=ye(e.p.toString(16)),t.q=ye(e.q.toString(16)),t.dp=ye(e.dmp1.toString(16)),t.dq=ye(e.dmq1.toString(16)),t.qi=ye(e.coeff.toString(16)),t;if(e instanceof ie&&e.isPublic)return t.kty="RSA",t.n=ye(e.n.toString(16)),t.e=ye(e.e.toString(16)),t;if(e instanceof ce.crypto.ECDSA&&e.isPrivate){if("P-256"!==(r=e.getShortNISTPCurveName())&&"P-384"!==r)throw"unsupported curve name for JWT: "+r;var n=e.getPublicKeyXYHex();return t.kty="EC",t.crv=r,t.x=ye(n.x),t.y=ye(n.y),t.d=ye(e.prvKeyHex),t}if(e instanceof ce.crypto.ECDSA&&e.isPublic){var r;if("P-256"!==(r=e.getShortNISTPCurveName())&&"P-384"!==r)throw"unsupported curve name for JWT: "+r;return n=e.getPublicKeyXYHex(),t.kty="EC",t.crv=r,t.x=ye(n.x),t.y=ye(n.y),t}throw"not supported key object"},ie.getPosArrayOfChildrenFromHex=function(e){return de.getChildIdx(e,0)},ie.getHexValueArrayOfChildrenFromHex=function(e){var t,n=de.getV,r=n(e,(t=ie.getPosArrayOfChildrenFromHex(e))[0]),i=n(e,t[1]),o=n(e,t[2]),s=n(e,t[3]),a=n(e,t[4]),u=n(e,t[5]),c=n(e,t[6]),l=n(e,t[7]),h=n(e,t[8]);return(t=new Array).push(r,i,o,s,a,u,c,l,h),t},ie.prototype.readPrivateKeyFromPEMString=function(e){var t=ke(e),n=ie.getHexValueArrayOfChildrenFromHex(t);this.setPrivateEx(n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8])},ie.prototype.readPKCS5PrvKeyHex=function(e){var t=ie.getHexValueArrayOfChildrenFromHex(e);this.setPrivateEx(t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])},ie.prototype.readPKCS8PrvKeyHex=function(e){var t,n,r,i,o,s,a,u,c=de,l=c.getVbyListEx;if(!1===c.isASN1HEX(e))throw new Error("not ASN.1 hex string");try{t=l(e,0,[2,0,1],"02"),n=l(e,0,[2,0,2],"02"),r=l(e,0,[2,0,3],"02"),i=l(e,0,[2,0,4],"02"),o=l(e,0,[2,0,5],"02"),s=l(e,0,[2,0,6],"02"),a=l(e,0,[2,0,7],"02"),u=l(e,0,[2,0,8],"02")}catch(e){throw new Error("malformed PKCS#8 plain RSA private key")}this.setPrivateEx(t,n,r,i,o,s,a,u)},ie.prototype.readPKCS5PubKeyHex=function(e){var t=de,n=t.getV;if(!1===t.isASN1HEX(e))throw new Error("keyHex is not ASN.1 hex string");var r=t.getChildIdx(e,0);if(2!==r.length||"02"!==e.substr(r[0],2)||"02"!==e.substr(r[1],2))throw new Error("wrong hex for PKCS#5 public key");var i=n(e,r[0]),o=n(e,r[1]);this.setPublic(i,o)},ie.prototype.readPKCS8PubKeyHex=function(e){var t=de;if(!1===t.isASN1HEX(e))throw new Error("not ASN.1 hex string");if("06092a864886f70d010101"!==t.getTLVbyListEx(e,0,[0,0]))throw new Error("not PKCS8 RSA public key");var n=t.getTLVbyListEx(e,0,[1,0]);this.readPKCS5PubKeyHex(n)},ie.prototype.readCertPubKeyHex=function(e,t){var n,r;(n=new We).readCertHex(e),r=n.getPublicKeyHex(),this.readPKCS8PubKeyHex(r)};var qe=new RegExp("[^0-9a-f]","gi");function Ve(e,t){for(var n="",r=t/4-e.length,i=0;i<r;i++)n+="0";return n+e}function Ge(e,t,n){for(var r="",i=0;r.length<t;)r+=Se(n(Me(e+String.fromCharCode.apply(String,[(4278190080&i)>>24,(16711680&i)>>16,(65280&i)>>8,255&i])))),i+=1;return r}function ze(e){for(var t in ce.crypto.Util.DIGESTINFOHEAD){var n=ce.crypto.Util.DIGESTINFOHEAD[t],r=n.length;if(e.substring(0,r)==n)return[t,e.substring(r)]}return[]}function We(e){var t,n=de,r=n.getChildIdx,i=n.getV,o=n.getTLV,s=n.getVbyList,a=n.getVbyListEx,u=n.getTLVbyList,c=n.getTLVbyListEx,l=n.getIdxbyList,h=n.getIdxbyListEx,d=n.getVidx,f=n.oidname,p=n.hextooidstr,m=We,g=ke;try{t=ce.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV}catch(e){}this.HEX2STAG={"0c":"utf8",13:"prn",16:"ia5","1a":"vis","1e":"bmp"},this.hex=null,this.version=0,this.foffset=0,this.aExtInfo=null,this.getVersion=function(){return null===this.hex||0!==this.version?this.version:"a003020102"!==u(this.hex,0,[0,0])?(this.version=1,this.foffset=-1,1):(this.version=3,3)},this.getSerialNumberHex=function(){return a(this.hex,0,[0,0],"02")},this.getSignatureAlgorithmField=function(){var e=c(this.hex,0,[0,1]);return this.getAlgorithmIdentifierName(e)},this.getAlgorithmIdentifierName=function(e){for(var n in t)if(e===t[n])return n;return f(a(e,0,[0],"06"))},this.getIssuer=function(){return this.getX500Name(this.getIssuerHex())},this.getIssuerHex=function(){return u(this.hex,0,[0,3+this.foffset],"30")},this.getIssuerString=function(){return m.hex2dn(this.getIssuerHex())},this.getSubject=function(){return this.getX500Name(this.getSubjectHex())},this.getSubjectHex=function(){return u(this.hex,0,[0,5+this.foffset],"30")},this.getSubjectString=function(){return m.hex2dn(this.getSubjectHex())},this.getNotBefore=function(){var e=s(this.hex,0,[0,4+this.foffset,0]);return e=e.replace(/(..)/g,"%$1"),decodeURIComponent(e)},this.getNotAfter=function(){var e=s(this.hex,0,[0,4+this.foffset,1]);return e=e.replace(/(..)/g,"%$1"),decodeURIComponent(e)},this.getPublicKeyHex=function(){return n.getTLVbyList(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyIdx=function(){return l(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyContentIdx=function(){var e=this.getPublicKeyIdx();return l(this.hex,e,[1,0],"30")},this.getPublicKey=function(){return He.getKey(this.getPublicKeyHex(),null,"pkcs8pub")},this.getSignatureAlgorithmName=function(){var e=u(this.hex,0,[1],"30");return this.getAlgorithmIdentifierName(e)},this.getSignatureValueHex=function(){return s(this.hex,0,[2],"03",!0)},this.verifySignature=function(e){var t=this.getSignatureAlgorithmField(),n=this.getSignatureValueHex(),r=u(this.hex,0,[0],"30"),i=new ce.crypto.Signature({alg:t});return i.init(e),i.updateHex(r),i.verify(n)},this.parseExt=function(e){var t,o,a;if(void 0===e){if(a=this.hex,3!==this.version)return-1;t=l(a,0,[0,7,0],"30"),o=r(a,t)}else{a=ke(e);var u=l(a,0,[0,3,0,0],"06");if("2a864886f70d01090e"!=i(a,u))return void(this.aExtInfo=new Array);t=l(a,0,[0,3,0,1,0],"30"),o=r(a,t),this.hex=a}this.aExtInfo=new Array;for(var c=0;c<o.length;c++){var h={critical:!1},f=0;3===r(a,o[c]).length&&(h.critical=!0,f=1),h.oid=n.hextooidstr(s(a,o[c],[0],"06"));var p=l(a,o[c],[1+f]);h.vidx=d(a,p),this.aExtInfo.push(h)}},this.getExtInfo=function(e){var t=this.aExtInfo,n=e;if(e.match(/^[0-9.]+$/)||(n=ce.asn1.x509.OID.name2oid(e)),""!==n)for(var r=0;r<t.length;r++)if(t[r].oid===n)return t[r]},this.getExtBasicConstraints=function(e,t){if(void 0===e&&void 0===t){var n=this.getExtInfo("basicConstraints");if(void 0===n)return;e=o(this.hex,n.vidx),t=n.critical}var r={extname:"basicConstraints"};if(t&&(r.critical=!0),"3000"===e)return r;if("30030101ff"===e)return r.cA=!0,r;if("30060101ff02"===e.substr(0,12)){var s=i(e,10),a=parseInt(s,16);return r.cA=!0,r.pathLen=a,r}throw new Error("hExtV parse error: "+e)},this.getExtKeyUsage=function(e,t){if(void 0===e&&void 0===t){var n=this.getExtInfo("keyUsage");if(void 0===n)return;e=o(this.hex,n.vidx),t=n.critical}var r={extname:"keyUsage"};return t&&(r.critical=!0),r.names=this.getExtKeyUsageString(e).split(","),r},this.getExtKeyUsageBin=function(e){if(void 0===e){var t=this.getExtInfo("keyUsage");if(void 0===t)return"";e=o(this.hex,t.vidx)}if(8!=e.length&&10!=e.length)throw new Error("malformed key usage value: "+e);var n="000000000000000"+parseInt(e.substr(6),16).toString(2);return 8==e.length&&(n=n.slice(-8)),10==e.length&&(n=n.slice(-16)),""==(n=n.replace(/0+$/,""))&&(n="0"),n},this.getExtKeyUsageString=function(e){for(var t=this.getExtKeyUsageBin(e),n=new Array,r=0;r<t.length;r++)"1"==t.substr(r,1)&&n.push(We.KEYUSAGE_NAME[r]);return n.join(",")},this.getExtSubjectKeyIdentifier=function(e,t){if(void 0===e&&void 0===t){var n=this.getExtInfo("subjectKeyIdentifier");if(void 0===n)return;e=o(this.hex,n.vidx),t=n.critical}var r={extname:"subjectKeyIdentifier"};t&&(r.critical=!0);var s=i(e,0);return r.kid={hex:s},r},this.getExtAuthorityKeyIdentifier=function(e,t){if(void 0===e&&void 0===t){var n=this.getExtInfo("authorityKeyIdentifier");if(void 0===n)return;e=o(this.hex,n.vidx),t=n.critical}var s={extname:"authorityKeyIdentifier"};t&&(s.critical=!0);for(var a=r(e,0),u=0;u<a.length;u++){var c=e.substr(a[u],2);if("80"===c&&(s.kid={hex:i(e,a[u])}),"a1"===c){var l=o(e,a[u]),h=this.getGeneralNames(l);s.issuer=h[0].dn}"82"===c&&(s.sn={hex:i(e,a[u])})}return s},this.getExtExtKeyUsage=function(e,t){if(void 0===e&&void 0===t){var n=this.getExtInfo("extKeyUsage");if(void 0===n)return;e=o(this.hex,n.vidx),t=n.critical}var s={extname:"extKeyUsage",array:[]};t&&(s.critical=!0);for(var a=r(e,0),u=0;u<a.length;u++)s.array.push(f(i(e,a[u])));return s},this.getExtExtKeyUsageName=function(){var e=this.getExtInfo("extKeyUsage");if(void 0===e)return e;var t=new Array,n=o(this.hex,e.vidx);if(""===n)return t;for(var s=r(n,0),a=0;a<s.length;a++)t.push(f(i(n,s[a])));return t},this.getExtSubjectAltName=function(e,t){if(void 0===e&&void 0===t){var n=this.getExtInfo("subjectAltName");if(void 0===n)return;e=o(this.hex,n.vidx),t=n.critical}var r={extname:"subjectAltName",array:[]};return t&&(r.critical=!0),r.array=this.getGeneralNames(e),r},this.getExtIssuerAltName=function(e,t){if(void 0===e&&void 0===t){var n=this.getExtInfo("issuerAltName");if(void 0===n)return;e=o(this.hex,n.vidx),t=n.critical}var r={extname:"issuerAltName",array:[]};return t&&(r.critical=!0),r.array=this.getGeneralNames(e),r},this.getGeneralNames=function(e){for(var t=r(e,0),n=[],i=0;i<t.length;i++){var s=this.getGeneralName(o(e,t[i]));void 0!==s&&n.push(s)}return n},this.getGeneralName=function(e){var t=e.substr(0,2),n=i(e,0),r=Se(n);return"81"==t?{rfc822:r}:"82"==t?{dns:r}:"86"==t?{uri:r}:"87"==t?{ip:De(n)}:"a4"==t?{dn:this.getX500Name(n)}:void 0},this.getExtSubjectAltName2=function(){var e,t,n,s=this.getExtInfo("subjectAltName");if(void 0===s)return s;for(var a=new Array,u=o(this.hex,s.vidx),c=r(u,0),l=0;l<c.length;l++)n=u.substr(c[l],2),e=i(u,c[l]),"81"===n&&(t=Ee(e),a.push(["MAIL",t])),"82"===n&&(t=Ee(e),a.push(["DNS",t])),"84"===n&&(t=We.hex2dn(e,0),a.push(["DN",t])),"86"===n&&(t=Ee(e),a.push(["URI",t])),"87"===n&&(t=De(e),a.push(["IP",t]));return a},this.getExtCRLDistributionPoints=function(e,t){if(void 0===e&&void 0===t){var n=this.getExtInfo("cRLDistributionPoints");if(void 0===n)return;e=o(this.hex,n.vidx),t=n.critical}var i={extname:"cRLDistributionPoints",array:[]};t&&(i.critical=!0);for(var s=r(e,0),a=0;a<s.length;a++){var u=o(e,s[a]);i.array.push(this.getDistributionPoint(u))}return i},this.getDistributionPoint=function(e){for(var t={},n=r(e,0),i=0;i<n.length;i++){var s=e.substr(n[i],2),a=o(e,n[i]);"a0"==s&&(t.dpname=this.getDistributionPointName(a))}return t},this.getDistributionPointName=function(e){for(var t={},n=r(e,0),i=0;i<n.length;i++){var s=e.substr(n[i],2),a=o(e,n[i]);"a0"==s&&(t.full=this.getGeneralNames(a))}return t},this.getExtCRLDistributionPointsURI=function(){var e=this.getExtInfo("cRLDistributionPoints");if(void 0===e)return e;for(var t=new Array,n=r(this.hex,e.vidx),i=0;i<n.length;i++)try{var o=Ee(s(this.hex,n[i],[0,0,0],"86"));t.push(o)}catch(e){}return t},this.getExtAIAInfo=function(){var e=this.getExtInfo("authorityInfoAccess");if(void 0===e)return e;for(var t={ocsp:[],caissuer:[]},n=r(this.hex,e.vidx),i=0;i<n.length;i++){var o=s(this.hex,n[i],[0],"06"),a=s(this.hex,n[i],[1],"86");"2b06010505073001"===o&&t.ocsp.push(Ee(a)),"2b06010505073002"===o&&t.caissuer.push(Ee(a))}return t},this.getExtAuthorityInfoAccess=function(e,t){if(void 0===e&&void 0===t){var n=this.getExtInfo("authorityInfoAccess");if(void 0===n)return;e=o(this.hex,n.vidx),t=n.critical}var i={extname:"authorityInfoAccess",array:[]};t&&(i.critical=!0);for(var u=r(e,0),c=0;c<u.length;c++){var l=a(e,u[c],[0],"06"),h=Ee(s(e,u[c],[1],"86"));if("2b06010505073001"==l)i.array.push({ocsp:h});else{if("2b06010505073002"!=l)throw new Error("unknown method: "+l);i.array.push({caissuer:h})}}return i},this.getExtCertificatePolicies=function(e,t){if(void 0===e&&void 0===t){var n=this.getExtInfo("certificatePolicies");if(void 0===n)return;e=o(this.hex,n.vidx),t=n.critical}var i={extname:"certificatePolicies",array:[]};t&&(i.critical=!0);for(var s=r(e,0),a=0;a<s.length;a++){var u=o(e,s[a]),c=this.getPolicyInformation(u);i.array.push(c)}return i},this.getPolicyInformation=function(e){var t={},n=s(e,0,[0],"06");t.policyoid=f(n);var i=h(e,0,[1],"30");if(-1!=i){t.array=[];for(var a=r(e,i),u=0;u<a.length;u++){var c=o(e,a[u]),l=this.getPolicyQualifierInfo(c);t.array.push(l)}}return t},this.getPolicyQualifierInfo=function(e){var t={},n=s(e,0,[0],"06");if("2b06010505070201"===n){var r=a(e,0,[1],"16");t.cps=Se(r)}else if("2b06010505070202"===n){var i=u(e,0,[1],"30");t.unotice=this.getUserNotice(i)}return t},this.getUserNotice=function(e){for(var t={},n=r(e,0),i=0;i<n.length;i++){var s=o(e,n[i]);"30"!=s.substr(0,2)&&(t.exptext=this.getDisplayText(s))}return t},this.getDisplayText=function(e){var t={};return t.type={"0c":"utf8",16:"ia5","1a":"vis","1e":"bmp"}[e.substr(0,2)],t.str=Se(i(e,0)),t},this.getExtCRLNumber=function(e,t){var n={extname:"cRLNumber"};if(t&&(n.critical=!0),"02"==e.substr(0,2))return n.num={hex:i(e,0)},n;throw new Error("hExtV parse error: "+e)},this.getExtCRLReason=function(e,t){var n={extname:"cRLReason"};if(t&&(n.critical=!0),"0a"==e.substr(0,2))return n.code=parseInt(i(e,0),16),n;throw new Error("hExtV parse error: "+e)},this.getExtOcspNonce=function(e,t){var n={extname:"ocspNonce"};t&&(n.critical=!0);var r=i(e,0);return n.hex=r,n},this.getExtOcspNoCheck=function(e,t){var n={extname:"ocspNoCheck"};return t&&(n.critical=!0),n},this.getExtAdobeTimeStamp=function(e,t){if(void 0===e&&void 0===t){var n=this.getExtInfo("adobeTimeStamp");if(void 0===n)return;e=o(this.hex,n.vidx),t=n.critical}var i={extname:"adobeTimeStamp"};t&&(i.critical=!0);var s=r(e,0);if(s.length>1){var a=o(e,s[1]),u=this.getGeneralName(a);null!=u.uri&&(i.uri=u.uri)}if(s.length>2){var c=o(e,s[2]);"0101ff"==c&&(i.reqauth=!0),"010100"==c&&(i.reqauth=!1)}return i},this.getX500NameRule=function(e){for(var t=null,n=[],r=0;r<e.length;r++)for(var i=e[r],o=0;o<i.length;o++)n.push(i[o]);for(r=0;r<n.length;r++){var s=n[r],a=s.ds,u=s.value,c=s.type;if("prn"!=a&&"utf8"!=a&&"ia5"!=a)return"mixed";if("ia5"==a){if("CN"!=c)return"mixed";if(ce.lang.String.isMail(u))continue;return"mixed"}if("C"==c){if("prn"==a)continue;return"mixed"}if(null==t)t=a;else if(t!==a)return"mixed"}return null==t?"prn":t},this.getX500Name=function(e){var t=this.getX500NameArray(e);return{array:t,str:this.dnarraytostr(t)}},this.getX500NameArray=function(e){for(var t=[],n=r(e,0),i=0;i<n.length;i++)t.push(this.getRDN(o(e,n[i])));return t},this.getRDN=function(e){for(var t=[],n=r(e,0),i=0;i<n.length;i++)t.push(this.getAttrTypeAndValue(o(e,n[i])));return t},this.getAttrTypeAndValue=function(e){var t={type:null,value:null,ds:null},n=r(e,0),i=s(e,n[0],[],"06"),o=s(e,n[1],[]),a=ce.asn1.ASN1Util.oidHexToInt(i);return t.type=ce.asn1.x509.OID.oid2atype(a),t.value=Se(o),t.ds=this.HEX2STAG[e.substr(n[1],2)],t},this.readCertPEM=function(e){this.readCertHex(g(e))},this.readCertHex=function(e){this.hex=e,this.getVersion();try{l(this.hex,0,[0,7],"a3"),this.parseExt()}catch(e){}},this.getParam=function(){var e={};return e.version=this.getVersion(),e.serial={hex:this.getSerialNumberHex()},e.sigalg=this.getSignatureAlgorithmField(),e.issuer=this.getIssuer(),e.notbefore=this.getNotBefore(),e.notafter=this.getNotAfter(),e.subject=this.getSubject(),e.sbjpubkey=Te(this.getPublicKeyHex(),"PUBLIC KEY"),this.aExtInfo.length>0&&(e.ext=this.getExtParamArray()),e.sighex=this.getSignatureValueHex(),e},this.getExtParamArray=function(e){null==e&&-1!=h(this.hex,0,[0,"[3]"])&&(e=c(this.hex,0,[0,"[3]",0],"30"));for(var t=[],n=r(e,0),i=0;i<n.length;i++){var s=o(e,n[i]),a=this.getExtParam(s);null!=a&&t.push(a)}return t},this.getExtParam=function(e){var t=r(e,0).length;if(2!=t&&3!=t)throw new Error("wrong number elements in Extension: "+t+" "+e);var n=p(s(e,0,[0],"06")),i=!1;3==t&&"0101ff"==u(e,0,[1])&&(i=!0);var o=u(e,0,[t-1,0]),a=void 0;if("2.5.29.14"==n?a=this.getExtSubjectKeyIdentifier(o,i):"2.5.29.15"==n?a=this.getExtKeyUsage(o,i):"2.5.29.17"==n?a=this.getExtSubjectAltName(o,i):"2.5.29.18"==n?a=this.getExtIssuerAltName(o,i):"2.5.29.19"==n?a=this.getExtBasicConstraints(o,i):"2.5.29.31"==n?a=this.getExtCRLDistributionPoints(o,i):"2.5.29.32"==n?a=this.getExtCertificatePolicies(o,i):"2.5.29.35"==n?a=this.getExtAuthorityKeyIdentifier(o,i):"2.5.29.37"==n?a=this.getExtExtKeyUsage(o,i):"1.3.6.1.5.5.7.1.1"==n?a=this.getExtAuthorityInfoAccess(o,i):"2.5.29.20"==n?a=this.getExtCRLNumber(o,i):"2.5.29.21"==n?a=this.getExtCRLReason(o,i):"1.3.6.1.5.5.7.48.1.2"==n?a=this.getExtOcspNonce(o,i):"1.3.6.1.5.5.7.48.1.5"==n?a=this.getExtOcspNoCheck(o,i):"1.2.840.113583.1.1.9.1"==n&&(a=this.getExtAdobeTimeStamp(o,i)),null!=a)return a;var c={extname:n,extn:o};return i&&(c.critical=!0),c},this.findExt=function(e,t){for(var n=0;n<e.length;n++)if(e[n].extname==t)return e[n];return null},this.updateExtCDPFullURI=function(e,t){var n=this.findExt(e,"cRLDistributionPoints");if(null!=n&&null!=n.array)for(var r=n.array,i=0;i<r.length;i++)if(null!=r[i].dpname&&null!=r[i].dpname.full)for(var o=r[i].dpname.full,s=0;s<o.length;s++){var a=o[i];null!=a.uri&&(a.uri=t)}},this.updateExtAIAOCSP=function(e,t){var n=this.findExt(e,"authorityInfoAccess");if(null!=n&&null!=n.array)for(var r=n.array,i=0;i<r.length;i++)null!=r[i].ocsp&&(r[i].ocsp=t)},this.updateExtAIACAIssuer=function(e,t){var n=this.findExt(e,"authorityInfoAccess");if(null!=n&&null!=n.array)for(var r=n.array,i=0;i<r.length;i++)null!=r[i].caissuer&&(r[i].caissuer=t)},this.dnarraytostr=function(e){return"/"+e.map((function(e){return function(e){return e.map((function(e){return function(e){return e.type+"="+e.value}(e)})).join("+")}(e)})).join("/")},this.getInfo=function(){var e,t,n,r=function(e){return JSON.stringify(e.array).replace(/[\[\]\{\}\"]/g,"")},i=function(e){for(var t="",n=e.array,r=0;r<n.length;r++){var i=n[r];if(t+="    policy oid: "+i.policyoid+"\n",void 0!==i.array)for(var o=0;o<i.array.length;o++){var s=i.array[o];void 0!==s.cps&&(t+="    cps: "+s.cps+"\n")}}return t},o=function(e){for(var t="",n=e.array,r=0;r<n.length;r++){var i=n[r];try{void 0!==i.dpname.full[0].uri&&(t+="    "+i.dpname.full[0].uri+"\n")}catch(e){}try{void 0!==i.dname.full[0].dn.hex&&(t+="    "+We.hex2dn(i.dpname.full[0].dn.hex)+"\n")}catch(e){}}return t},s=function(e){for(var t="",n=e.array,r=0;r<n.length;r++){var i=n[r];void 0!==i.caissuer&&(t+="    caissuer: "+i.caissuer+"\n"),void 0!==i.ocsp&&(t+="    ocsp: "+i.ocsp+"\n")}return t};if(e="Basic Fields\n",e+="  serial number: "+this.getSerialNumberHex()+"\n",e+="  signature algorithm: "+this.getSignatureAlgorithmField()+"\n",e+="  issuer: "+this.getIssuerString()+"\n",e+="  notBefore: "+this.getNotBefore()+"\n",e+="  notAfter: "+this.getNotAfter()+"\n",e+="  subject: "+this.getSubjectString()+"\n",e+="  subject public key info: \n",e+="    key algorithm: "+(t=this.getPublicKey()).type+"\n","RSA"===t.type&&(e+="    n="+Fe(t.n.toString(16)).substr(0,16)+"...\n",e+="    e="+Fe(t.e.toString(16))+"\n"),null!=(n=this.aExtInfo)){e+="X509v3 Extensions:\n";for(var a=0;a<n.length;a++){var u=n[a],c=ce.asn1.x509.OID.oid2name(u.oid);""===c&&(c=u.oid);var l="";if(!0===u.critical&&(l="CRITICAL"),e+="  "+c+" "+l+":\n","basicConstraints"===c){var h=this.getExtBasicConstraints();void 0===h.cA?e+="    {}\n":(e+="    cA=true",void 0!==h.pathLen&&(e+=", pathLen="+h.pathLen),e+="\n")}else if("keyUsage"===c)e+="    "+this.getExtKeyUsageString()+"\n";else if("subjectKeyIdentifier"===c)e+="    "+this.getExtSubjectKeyIdentifier().kid.hex+"\n";else if("authorityKeyIdentifier"===c){var d=this.getExtAuthorityKeyIdentifier();void 0!==d.kid&&(e+="    kid="+d.kid.hex+"\n")}else"extKeyUsage"===c?e+="    "+this.getExtExtKeyUsage().array.join(", ")+"\n":"subjectAltName"===c?e+="    "+r(this.getExtSubjectAltName())+"\n":"cRLDistributionPoints"===c?e+=o(this.getExtCRLDistributionPoints()):"authorityInfoAccess"===c?e+=s(this.getExtAuthorityInfoAccess()):"certificatePolicies"===c&&(e+=i(this.getExtCertificatePolicies()))}}return(e+="signature algorithm: "+this.getSignatureAlgorithmName()+"\n")+"signature: "+this.getSignatureValueHex().substr(0,16)+"...\n"},"string"==typeof e&&(-1!=e.indexOf("-----BEGIN")?this.readCertPEM(e):ce.lang.String.isHex(e)&&this.readCertHex(e))}ie.prototype.sign=function(e,t){var n=function(e){return ce.crypto.Util.hashString(e,t)}(e);return this.signWithMessageHash(n,t)},ie.prototype.signWithMessageHash=function(e,t){var n=ne(ce.crypto.Util.getPaddedDigestInfoHex(e,t,this.n.bitLength()),16);return Ve(this.doPrivate(n).toString(16),this.n.bitLength())},ie.prototype.signPSS=function(e,t,n){var r=function(e){return ce.crypto.Util.hashHex(e,t)}(Me(e));return void 0===n&&(n=-1),this.signWithMessageHashPSS(r,t,n)},ie.prototype.signWithMessageHashPSS=function(e,t,n){var r,i=Se(e),o=i.length,s=this.n.bitLength()-1,a=Math.ceil(s/8),u=function(e){return ce.crypto.Util.hashHex(e,t)};if(-1===n||void 0===n)n=o;else if(-2===n)n=a-o-2;else if(n<-2)throw new Error("invalid salt length");if(a<o+n+2)throw new Error("data too long");var c="";n>0&&(c=new Array(n),(new te).nextBytes(c),c=String.fromCharCode.apply(String,c));var l=Se(u(Me("\0\0\0\0\0\0\0\0"+i+c))),h=[];for(r=0;r<a-n-o-2;r+=1)h[r]=0;var d=String.fromCharCode.apply(String,h)+""+c,f=Ge(l,d.length,u),p=[];for(r=0;r<d.length;r+=1)p[r]=d.charCodeAt(r)^f.charCodeAt(r);var m=65280>>8*a-s&255;for(p[0]&=~m,r=0;r<o;r++)p.push(l.charCodeAt(r));return p.push(188),Ve(this.doPrivate(new S(p)).toString(16),this.n.bitLength())},ie.prototype.verify=function(e,t){var n=ne(t=(t=t.replace(qe,"")).replace(/[ \n]+/g,""),16);if(n.bitLength()>this.n.bitLength())return 0;var r=ze(this.doPublic(n).toString(16).replace(/^1f+00/,""));if(0==r.length)return!1;var i=r[0];return r[1]==function(e){return ce.crypto.Util.hashString(e,i)}(e)},ie.prototype.verifyWithMessageHash=function(e,t){if(t.length!=Math.ceil(this.n.bitLength()/4))return!1;var n=ne(t,16);if(n.bitLength()>this.n.bitLength())return 0;var r=ze(this.doPublic(n).toString(16).replace(/^1f+00/,""));return 0!=r.length&&(r[0],r[1]==e)},ie.prototype.verifyPSS=function(e,t,n,r){var i=function(e){return ce.crypto.Util.hashHex(e,n)}(Me(e));return void 0===r&&(r=-1),this.verifyWithMessageHashPSS(i,t,n,r)},ie.prototype.verifyWithMessageHashPSS=function(e,t,n,r){if(t.length!=Math.ceil(this.n.bitLength()/4))return!1;var i,o=new S(t,16),s=function(e){return ce.crypto.Util.hashHex(e,n)},a=Se(e),u=a.length,c=this.n.bitLength()-1,l=Math.ceil(c/8);if(-1===r||void 0===r)r=u;else if(-2===r)r=l-u-2;else if(r<-2)throw new Error("invalid salt length");if(l<u+r+2)throw new Error("data too long");var h=this.doPublic(o).toByteArray();for(i=0;i<h.length;i+=1)h[i]&=255;for(;h.length<l;)h.unshift(0);if(188!==h[l-1])throw new Error("encoded message does not end in 0xbc");var d=(h=String.fromCharCode.apply(String,h)).substr(0,l-u-1),f=h.substr(d.length,u),p=65280>>8*l-c&255;if(0!=(d.charCodeAt(0)&p))throw new Error("bits beyond keysize not zero");var m=Ge(f,d.length,s),g=[];for(i=0;i<d.length;i+=1)g[i]=d.charCodeAt(i)^m.charCodeAt(i);g[0]&=~p;var b=l-u-r-2;for(i=0;i<b;i+=1)if(0!==g[i])throw new Error("leftmost octets not zero");if(1!==g[b])throw new Error("0x01 marker not found");return f===Se(s(Me("\0\0\0\0\0\0\0\0"+a+String.fromCharCode.apply(String,g.slice(-r)))))},ie.SALT_LEN_HLEN=-1,ie.SALT_LEN_MAX=-2,ie.SALT_LEN_RECOVER=-2,We.hex2dn=function(e,t){if(void 0===t&&(t=0),"30"!==e.substr(t,2))throw new Error("malformed DN");for(var n=new Array,r=de.getChildIdx(e,t),i=0;i<r.length;i++)n.push(We.hex2rdn(e,r[i]));return"/"+(n=n.map((function(e){return e.replace("/","\\/")}))).join("/")},We.hex2rdn=function(e,t){if(void 0===t&&(t=0),"31"!==e.substr(t,2))throw new Error("malformed RDN");for(var n=new Array,r=de.getChildIdx(e,t),i=0;i<r.length;i++)n.push(We.hex2attrTypeValue(e,r[i]));return(n=n.map((function(e){return e.replace("+","\\+")}))).join("+")},We.hex2attrTypeValue=function(e,t){var n=de,r=n.getV;if(void 0===t&&(t=0),"30"!==e.substr(t,2))throw new Error("malformed attribute type and value");var i=n.getChildIdx(e,t);2!==i.length||e.substr(i[0],2);var o=r(e,i[0]),s=ce.asn1.ASN1Util.oidHexToInt(o);return ce.asn1.x509.OID.oid2atype(s)+"="+Se(r(e,i[1]))},We.getPublicKeyFromCertHex=function(e){var t=new We;return t.readCertHex(e),t.getPublicKey()},We.getPublicKeyFromCertPEM=function(e){var t=new We;return t.readCertPEM(e),t.getPublicKey()},We.getPublicKeyInfoPropOfCertPEM=function(e){var t,n,r=de.getVbyList,i={algparam:null};return(t=new We).readCertPEM(e),n=t.getPublicKeyHex(),i.keyhex=r(n,0,[1],"03").substr(2),i.algoid=r(n,0,[0,0],"06"),"2a8648ce3d0201"===i.algoid&&(i.algparam=r(n,0,[0,1],"06")),i},We.KEYUSAGE_NAME=["digitalSignature","nonRepudiation","keyEncipherment","dataEncipherment","keyAgreement","keyCertSign","cRLSign","encipherOnly","decipherOnly"],void 0!==ce&&ce||(t.KJUR=ce={}),void 0!==ce.jws&&ce.jws||(ce.jws={}),ce.jws.JWS=function(){var e=ce.jws.JWS.isSafeJSONString;this.parseJWS=function(t,n){if(void 0===this.parsedJWS||!n&&void 0===this.parsedJWS.sigvalH){var r=t.match(/^([^.]+)\.([^.]+)\.([^.]+)$/);if(null==r)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";var i=r[1],o=r[2],s=r[3],a=i+"."+o;if(this.parsedJWS={},this.parsedJWS.headB64U=i,this.parsedJWS.payloadB64U=o,this.parsedJWS.sigvalB64U=s,this.parsedJWS.si=a,!n){var u=_e(s),c=ne(u,16);this.parsedJWS.sigvalH=u,this.parsedJWS.sigvalBI=c}var l=he(i),h=he(o);if(this.parsedJWS.headS=l,this.parsedJWS.payloadS=h,!e(l,this.parsedJWS,"headP"))throw"malformed JSON string for JWS Head: "+l}}},ce.jws.JWS.sign=function(e,t,r,i,o){var s,a,u,c=ce,l=c.jws.JWS,h=l.readSafeJSONString,d=l.isSafeJSONString,f=c.crypto,p=(f.ECDSA,f.Mac),m=f.Signature,g=JSON;if("string"!=typeof t&&"object"!=(void 0===t?"undefined":n(t)))throw"spHeader must be JSON string or object: "+t;if("object"==(void 0===t?"undefined":n(t))&&(a=t,s=g.stringify(a)),"string"==typeof t){if(!d(s=t))throw"JWS Head is not safe JSON string: "+s;a=h(s)}if(u=r,"object"==(void 0===r?"undefined":n(r))&&(u=g.stringify(r)),""!=e&&null!=e||void 0===a.alg||(e=a.alg),""!=e&&null!=e&&void 0===a.alg&&(a.alg=e,s=g.stringify(a)),e!==a.alg)throw"alg and sHeader.alg doesn't match: "+e+"!="+a.alg;var b=null;if(void 0===l.jwsalg2sigalg[e])throw"unsupported alg name: "+e;b=l.jwsalg2sigalg[e];var v=le(s)+"."+le(u),y="";if("Hmac"==b.substr(0,4)){if(void 0===i)throw"mac key shall be specified for HS* alg";var _=new p({alg:b,prov:"cryptojs",pass:i});_.updateString(v),y=_.doFinal()}else if(-1!=b.indexOf("withECDSA")){(E=new m({alg:b})).init(i,o),E.updateString(v);var w=E.sign();y=ce.crypto.ECDSA.asn1SigToConcatSig(w)}else{var E;"none"!=b&&((E=new m({alg:b})).init(i,o),E.updateString(v),y=E.sign())}return v+"."+ye(y)},ce.jws.JWS.verify=function(e,t,r){var i,o=ce,s=o.jws.JWS,a=s.readSafeJSONString,u=o.crypto,c=u.ECDSA,l=u.Mac,h=u.Signature;void 0!==n(ie)&&(i=ie);var d=e.split(".");if(3!==d.length)return!1;var f,p=d[0]+"."+d[1],m=_e(d[2]),g=a(he(d[0])),b=null;if(void 0===g.alg)throw"algorithm not specified in header";if(f=(b=g.alg).substr(0,2),null!=r&&"[object Array]"===Object.prototype.toString.call(r)&&r.length>0&&-1==(":"+r.join(":")+":").indexOf(":"+b+":"))throw"algorithm '"+b+"' not accepted in the list";if("none"!=b&&null===t)throw"key shall be specified to verify.";if("string"==typeof t&&-1!=t.indexOf("-----BEGIN ")&&(t=He.getKey(t)),!("RS"!=f&&"PS"!=f||t instanceof i))throw"key shall be a RSAKey obj for RS* and PS* algs";if("ES"==f&&!(t instanceof c))throw"key shall be a ECDSA obj for ES* algs";var v=null;if(void 0===s.jwsalg2sigalg[g.alg])throw"unsupported alg name: "+b;if("none"==(v=s.jwsalg2sigalg[b]))throw"not supported";if("Hmac"==v.substr(0,4)){if(void 0===t)throw"hexadecimal key shall be specified for HMAC";var y=new l({alg:v,pass:t});return y.updateString(p),m==y.doFinal()}if(-1!=v.indexOf("withECDSA")){var _,w=null;try{w=c.concatSigToASN1Sig(m)}catch(e){return!1}return(_=new h({alg:v})).init(t),_.updateString(p),_.verify(w)}return(_=new h({alg:v})).init(t),_.updateString(p),_.verify(m)},ce.jws.JWS.parse=function(e){var t,n,r,i=e.split("."),o={};if(2!=i.length&&3!=i.length)throw"malformed sJWS: wrong number of '.' splitted elements";return t=i[0],n=i[1],3==i.length&&(r=i[2]),o.headerObj=ce.jws.JWS.readSafeJSONString(he(t)),o.payloadObj=ce.jws.JWS.readSafeJSONString(he(n)),o.headerPP=JSON.stringify(o.headerObj,null,"  "),null==o.payloadObj?o.payloadPP=he(n):o.payloadPP=JSON.stringify(o.payloadObj,null,"  "),void 0!==r&&(o.sigHex=_e(r)),o},ce.jws.JWS.verifyJWT=function(e,t,r){var i=ce.jws,o=i.JWS,s=o.readSafeJSONString,a=o.inArray,u=o.includedArray,c=e.split("."),l=c[0],h=c[1],d=(_e(c[2]),s(he(l))),f=s(he(h));if(void 0===d.alg)return!1;if(void 0===r.alg)throw"acceptField.alg shall be specified";if(!a(d.alg,r.alg))return!1;if(void 0!==f.iss&&"object"===n(r.iss)&&!a(f.iss,r.iss))return!1;if(void 0!==f.sub&&"object"===n(r.sub)&&!a(f.sub,r.sub))return!1;if(void 0!==f.aud&&"object"===n(r.aud))if("string"==typeof f.aud){if(!a(f.aud,r.aud))return!1}else if("object"==n(f.aud)&&!u(f.aud,r.aud))return!1;var p=i.IntDate.getNow();return void 0!==r.verifyAt&&"number"==typeof r.verifyAt&&(p=r.verifyAt),void 0!==r.gracePeriod&&"number"==typeof r.gracePeriod||(r.gracePeriod=0),!(void 0!==f.exp&&"number"==typeof f.exp&&f.exp+r.gracePeriod<p||void 0!==f.nbf&&"number"==typeof f.nbf&&p<f.nbf-r.gracePeriod||void 0!==f.iat&&"number"==typeof f.iat&&p<f.iat-r.gracePeriod||void 0!==f.jti&&void 0!==r.jti&&f.jti!==r.jti||!o.verify(e,t,r.alg))},ce.jws.JWS.includedArray=function(e,t){var r=ce.jws.JWS.inArray;if(null===e)return!1;if("object"!==(void 0===e?"undefined":n(e)))return!1;if("number"!=typeof e.length)return!1;for(var i=0;i<e.length;i++)if(!r(e[i],t))return!1;return!0},ce.jws.JWS.inArray=function(e,t){if(null===t)return!1;if("object"!==(void 0===t?"undefined":n(t)))return!1;if("number"!=typeof t.length)return!1;for(var r=0;r<t.length;r++)if(t[r]==e)return!0;return!1},ce.jws.JWS.jwsalg2sigalg={HS256:"HmacSHA256",HS384:"HmacSHA384",HS512:"HmacSHA512",RS256:"SHA256withRSA",RS384:"SHA384withRSA",RS512:"SHA512withRSA",ES256:"SHA256withECDSA",ES384:"SHA384withECDSA",PS256:"SHA256withRSAandMGF1",PS384:"SHA384withRSAandMGF1",PS512:"SHA512withRSAandMGF1",none:"none"},ce.jws.JWS.isSafeJSONString=function(e,t,r){var i=null;try{return"object"!=(void 0===(i=ue(e))?"undefined":n(i))||i.constructor===Array?0:(t&&(t[r]=i),1)}catch(e){return 0}},ce.jws.JWS.readSafeJSONString=function(e){var t=null;try{return"object"!=(void 0===(t=ue(e))?"undefined":n(t))||t.constructor===Array?null:t}catch(e){return null}},ce.jws.JWS.getEncodedSignatureValueFromJWS=function(e){var t=e.match(/^[^.]+\.[^.]+\.([^.]+)$/);if(null==t)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";return t[1]},ce.jws.JWS.getJWKthumbprint=function(e){if("RSA"!==e.kty&&"EC"!==e.kty&&"oct"!==e.kty)throw"unsupported algorithm for JWK Thumprint";var t="{";if("RSA"===e.kty){if("string"!=typeof e.n||"string"!=typeof e.e)throw"wrong n and e value for RSA key";t+='"e":"'+e.e+'",',t+='"kty":"'+e.kty+'",',t+='"n":"'+e.n+'"}'}else if("EC"===e.kty){if("string"!=typeof e.crv||"string"!=typeof e.x||"string"!=typeof e.y)throw"wrong crv, x and y value for EC key";t+='"crv":"'+e.crv+'",',t+='"kty":"'+e.kty+'",',t+='"x":"'+e.x+'",',t+='"y":"'+e.y+'"}'}else if("oct"===e.kty){if("string"!=typeof e.k)throw"wrong k value for oct(symmetric) key";t+='"kty":"'+e.kty+'",',t+='"k":"'+e.k+'"}'}var n=Me(t);return ye(ce.crypto.Util.hashHex(n,"sha256"))},ce.jws.IntDate={},ce.jws.IntDate.get=function(e){var t=ce.jws.IntDate,n=t.getNow,r=t.getZulu;if("now"==e)return n();if("now + 1hour"==e)return n()+3600;if("now + 1day"==e)return n()+86400;if("now + 1month"==e)return n()+2592e3;if("now + 1year"==e)return n()+31536e3;if(e.match(/Z$/))return r(e);if(e.match(/^[0-9]+$/))return parseInt(e);throw"unsupported format: "+e},ce.jws.IntDate.getZulu=function(e){return je(e)},ce.jws.IntDate.getNow=function(){return~~(new Date/1e3)},ce.jws.IntDate.intDate2UTCString=function(e){return new Date(1e3*e).toUTCString()},ce.jws.IntDate.intDate2Zulu=function(e){var t=new Date(1e3*e);return("0000"+t.getUTCFullYear()).slice(-4)+("00"+(t.getUTCMonth()+1)).slice(-2)+("00"+t.getUTCDate()).slice(-2)+("00"+t.getUTCHours()).slice(-2)+("00"+t.getUTCMinutes()).slice(-2)+("00"+t.getUTCSeconds()).slice(-2)+"Z"},t.SecureRandom=te,t.rng_seed_time=Q,t.BigInteger=S,t.RSAKey=ie;var Ke=ce.crypto.EDSA;t.EDSA=Ke;var Ye=ce.crypto.DSA;t.DSA=Ye;var Qe=ce.crypto.Signature;t.Signature=Qe;var Je=ce.crypto.MessageDigest;t.MessageDigest=Je;var Ze=ce.crypto.Mac;t.Mac=Ze;var $e=ce.crypto.Cipher;t.Cipher=$e,t.KEYUTIL=He,t.ASN1HEX=de,t.X509=We,t.CryptoJS=b,t.b64tohex=w,t.b64toBA=E,t.stoBA=fe,t.BAtos=pe,t.BAtohex=me,t.stohex=ge,t.stob64=function(e){return _(ge(e))},t.stob64u=function(e){return be(_(ge(e)))},t.b64utos=function(e){return pe(E(ve(e)))},t.b64tob64u=be,t.b64utob64=ve,t.hex2b64=_,t.hextob64u=ye,t.b64utohex=_e,t.utf8tob64u=le,t.b64utoutf8=he,t.utf8tob64=function(e){return _(Ie(Ue(e)))},t.b64toutf8=function(e){return decodeURIComponent(Re(w(e)))},t.utf8tohex=we,t.hextoutf8=Ee,t.hextorstr=Se,t.rstrtohex=Me,t.hextob64=Oe,t.hextob64nl=Ae,t.b64nltohex=Ce,t.hextopem=Te,t.pemtohex=ke,t.hextoArrayBuffer=function(e){if(e.length%2!=0)throw"input is not even length";if(null==e.match(/^[0-9A-Fa-f]+$/))throw"input is not hexadecimal";for(var t=new ArrayBuffer(e.length/2),n=new DataView(t),r=0;r<e.length/2;r++)n.setUint8(r,parseInt(e.substr(2*r,2),16));return t},t.ArrayBuffertohex=function(e){for(var t="",n=new DataView(e),r=0;r<e.byteLength;r++)t+=("00"+n.getUint8(r).toString(16)).slice(-2);return t},t.zulutomsec=xe,t.zulutosec=je,t.zulutodate=function(e){return new Date(xe(e))},t.datetozulu=function(e,t,n){var r,i=e.getUTCFullYear();if(t){if(i<1950||2049<i)throw"not proper year for UTCTime: "+i;r=(""+i).slice(-2)}else r=("000"+i).slice(-4);if(r+=("0"+(e.getUTCMonth()+1)).slice(-2),r+=("0"+e.getUTCDate()).slice(-2),r+=("0"+e.getUTCHours()).slice(-2),r+=("0"+e.getUTCMinutes()).slice(-2),r+=("0"+e.getUTCSeconds()).slice(-2),n){var o=e.getUTCMilliseconds();0!==o&&(r+="."+(o=(o=("00"+o).slice(-3)).replace(/0+$/g,"")))}return r+"Z"},t.uricmptohex=Ie,t.hextouricmp=Re,t.ipv6tohex=Ne,t.hextoipv6=Pe,t.hextoip=De,t.iptohex=function(e){var t="malformed IP address";if(!(e=e.toLowerCase(e)).match(/^[0-9.]+$/)){if(e.match(/^[0-9a-f:]+$/)&&-1!==e.indexOf(":"))return Ne(e);throw t}var n=e.split(".");if(4!==n.length)throw t;var r="";try{for(var i=0;i<4;i++)r+=("0"+parseInt(n[i]).toString(16)).slice(-2);return r}catch(e){throw t}},t.encodeURIComponentAll=Ue,t.newline_toUnix=function(e){return e.replace(/\r\n/gm,"\n")},t.newline_toDos=function(e){return(e=e.replace(/\r\n/gm,"\n")).replace(/\n/gm,"\r\n")},t.hextoposhex=Fe,t.intarystrtohex=function(e){e=(e=(e=e.replace(/^\s*\[\s*/,"")).replace(/\s*\]\s*$/,"")).replace(/\s*/g,"");try{return e.split(/,/).map((function(e,t,n){var r=parseInt(e);if(r<0||255<r)throw"integer not in range 0-255";return("00"+r.toString(16)).slice(-2)})).join("")}catch(e){throw"malformed integer array string: "+e}},t.strdiffidx=function(e,t){var n=e.length;e.length>t.length&&(n=t.length);for(var r=0;r<n;r++)if(e.charCodeAt(r)!=t.charCodeAt(r))return r;return e.length!=t.length?n:-1},t.KJUR=ce;var Xe=ce.crypto;t.crypto=Xe;var et=ce.asn1;t.asn1=et;var tt=ce.jws;t.jws=tt;var nt=ce.lang;t.lang=nt}).call(this,n(28).Buffer)},function(e,t,n){"use strict";(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var r=n(30),i=n(31),o=n(32);function s(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(e,t){if(s()<t)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=u.prototype:(null===e&&(e=new u(t)),e.length=t),e}function u(e,t,n){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return h(this,e)}return c(this,e,t,n)}function c(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),u.TYPED_ARRAY_SUPPORT?(e=t).__proto__=u.prototype:e=d(e,t),e}(e,t,n,r):"string"==typeof t?function(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!u.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|p(t,n),i=(e=a(e,r)).write(t,n);return i!==r&&(e=e.slice(0,i)),e}(e,t,n):function(e,t){if(u.isBuffer(t)){var n=0|f(t.length);return 0===(e=a(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||function(e){return e!=e}(t.length)?a(e,0):d(e,t);if("Buffer"===t.type&&o(t.data))return d(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function h(e,t){if(l(t),e=a(e,t<0?0:0|f(t)),!u.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function d(e,t){var n=t.length<0?0:0|f(t.length);e=a(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function f(e){if(e>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|e}function p(e,t){if(u.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return H(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return q(e).length;default:if(r)return H(e).length;t=(""+t).toLowerCase(),r=!0}}function m(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return x(this,t,n);case"utf8":case"utf-8":return A(this,t,n);case"ascii":return T(this,t,n);case"latin1":case"binary":return k(this,t,n);case"base64":return O(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function g(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function b(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=u.from(t,r)),u.isBuffer(t))return 0===t.length?-1:v(e,t,n,r,i);if("number"==typeof t)return t&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):v(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function v(e,t,n,r,i){var o,s=1,a=e.length,u=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;s=2,a/=2,u/=2,n/=2}function c(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(i){var l=-1;for(o=n;o<a;o++)if(c(e,o)===c(t,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===u)return l*s}else-1!==l&&(o-=o-l),l=-1}else for(n+u>a&&(n=a-u),o=n;o>=0;o--){for(var h=!0,d=0;d<u;d++)if(c(e,o+d)!==c(t,d)){h=!1;break}if(h)return o}return-1}function y(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var s=0;s<r;++s){var a=parseInt(t.substr(2*s,2),16);if(isNaN(a))return s;e[n+s]=a}return s}function _(e,t,n,r){return V(H(t,e.length-n),e,n,r)}function w(e,t,n,r){return V(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function E(e,t,n,r){return w(e,t,n,r)}function S(e,t,n,r){return V(q(t),e,n,r)}function M(e,t,n,r){return V(function(e,t){for(var n,r,i,o=[],s=0;s<e.length&&!((t-=2)<0);++s)r=(n=e.charCodeAt(s))>>8,i=n%256,o.push(i),o.push(r);return o}(t,e.length-n),e,n,r)}function O(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function A(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o,s,a,u,c=e[i],l=null,h=c>239?4:c>223?3:c>191?2:1;if(i+h<=n)switch(h){case 1:c<128&&(l=c);break;case 2:128==(192&(o=e[i+1]))&&(u=(31&c)<<6|63&o)>127&&(l=u);break;case 3:o=e[i+1],s=e[i+2],128==(192&o)&&128==(192&s)&&(u=(15&c)<<12|(63&o)<<6|63&s)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:o=e[i+1],s=e[i+2],a=e[i+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&(u=(15&c)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&u<1114112&&(l=u)}null===l?(l=65533,h=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),i+=h}return function(e){var t=e.length;if(t<=C)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=C));return n}(r)}t.Buffer=u,t.SlowBuffer=function(e){return+e!=e&&(e=0),u.alloc(+e)},t.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=s(),u.poolSize=8192,u._augment=function(e){return e.__proto__=u.prototype,e},u.from=function(e,t,n){return c(null,e,t,n)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(e,t,n){return function(e,t,n,r){return l(t),t<=0?a(e,t):void 0!==n?"string"==typeof r?a(e,t).fill(n,r):a(e,t).fill(n):a(e,t)}(null,e,t,n)},u.allocUnsafe=function(e){return h(null,e)},u.allocUnsafeSlow=function(e){return h(null,e)},u.isBuffer=function(e){return!(null==e||!e._isBuffer)},u.compare=function(e,t){if(!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!o(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=u.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var s=e[n];if(!u.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,i),i+=s.length}return r},u.byteLength=p,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)g(this,t,t+1);return this},u.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},u.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},u.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?A(this,0,e):m.apply(this,arguments)},u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},u.prototype.compare=function(e,t,n,r,i){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(r>>>=0),s=(n>>>=0)-(t>>>=0),a=Math.min(o,s),c=this.slice(r,i),l=e.slice(t,n),h=0;h<a;++h)if(c[h]!==l[h]){o=c[h],s=l[h];break}return o<s?-1:s<o?1:0},u.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},u.prototype.indexOf=function(e,t,n){return b(this,e,t,n,!0)},u.prototype.lastIndexOf=function(e,t,n){return b(this,e,t,n,!1)},u.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return y(this,e,t,n);case"utf8":case"utf-8":return _(this,e,t,n);case"ascii":return w(this,e,t,n);case"latin1":case"binary":return E(this,e,t,n);case"base64":return S(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var C=4096;function T(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function k(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function x(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=B(e[o]);return i}function j(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function I(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function R(e,t,n,r,i,o){if(!u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function N(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);i<o;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function P(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);i<o;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function D(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function U(e,t,n,r,o){return o||D(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function L(e,t,n,r,o){return o||D(e,0,n,8),i.write(e,t,n,r,52,8),n+8}u.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),u.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=u.prototype;else{var i=t-e;n=new u(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+e]}return n},u.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||I(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},u.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||I(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},u.prototype.readUInt8=function(e,t){return t||I(e,1,this.length),this[e]},u.prototype.readUInt16LE=function(e,t){return t||I(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUInt16BE=function(e,t){return t||I(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUInt32LE=function(e,t){return t||I(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUInt32BE=function(e,t){return t||I(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||I(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},u.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||I(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},u.prototype.readInt8=function(e,t){return t||I(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,t){t||I(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(e,t){t||I(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(e,t){return t||I(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return t||I(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readFloatLE=function(e,t){return t||I(e,4,this.length),i.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return t||I(e,4,this.length),i.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return t||I(e,8,this.length),i.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return t||I(e,8,this.length),i.read(this,e,!1,52,8)},u.prototype.writeUIntLE=function(e,t,n,r){e=+e,t|=0,n|=0,r||R(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},u.prototype.writeUIntBE=function(e,t,n,r){e=+e,t|=0,n|=0,r||R(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},u.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,1,255,0),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},u.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):N(this,e,t,!0),t+2},u.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):N(this,e,t,!1),t+2},u.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):P(this,e,t,!0),t+4},u.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):P(this,e,t,!1),t+4},u.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);R(this,e,t,n,i-1,-i)}var o=0,s=1,a=0;for(this[t]=255&e;++o<n&&(s*=256);)e<0&&0===a&&0!==this[t+o-1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+n},u.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);R(this,e,t,n,i-1,-i)}var o=n-1,s=1,a=0;for(this[t+o]=255&e;--o>=0&&(s*=256);)e<0&&0===a&&0!==this[t+o+1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+n},u.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,1,127,-128),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):N(this,e,t,!0),t+2},u.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):N(this,e,t,!1),t+2},u.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):P(this,e,t,!0),t+4},u.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):P(this,e,t,!1),t+4},u.prototype.writeFloatLE=function(e,t,n){return U(this,e,t,!0,n)},u.prototype.writeFloatBE=function(e,t,n){return U(this,e,t,!1,n)},u.prototype.writeDoubleLE=function(e,t,n){return L(this,e,t,!0,n)},u.prototype.writeDoubleBE=function(e,t,n){return L(this,e,t,!1,n)},u.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,o=r-n;if(this===e&&n<t&&t<r)for(i=o-1;i>=0;--i)e[i+t]=this[i+n];else if(o<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},u.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!u.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{var s=u.isBuffer(e)?e:H(new u(e,r).toString()),a=s.length;for(o=0;o<n-t;++o)this[o+t]=s[o%a]}return this};var F=/[^+\/0-9A-Za-z-_]/g;function B(e){return e<16?"0"+e.toString(16):e.toString(16)}function H(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],s=0;s<r;++s){if((n=e.charCodeAt(s))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function q(e){return r.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(F,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function V(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}}).call(this,n(29))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";t.byteLength=function(e){var t=c(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,r=c(e),s=r[0],a=r[1],u=new o(function(e,t,n){return 3*(t+n)/4-n}(0,s,a)),l=0,h=a>0?s-4:s;for(n=0;n<h;n+=4)t=i[e.charCodeAt(n)]<<18|i[e.charCodeAt(n+1)]<<12|i[e.charCodeAt(n+2)]<<6|i[e.charCodeAt(n+3)],u[l++]=t>>16&255,u[l++]=t>>8&255,u[l++]=255&t;return 2===a&&(t=i[e.charCodeAt(n)]<<2|i[e.charCodeAt(n+1)]>>4,u[l++]=255&t),1===a&&(t=i[e.charCodeAt(n)]<<10|i[e.charCodeAt(n+1)]<<4|i[e.charCodeAt(n+2)]>>2,u[l++]=t>>8&255,u[l++]=255&t),u},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,o=[],s=16383,a=0,u=n-i;a<u;a+=s)o.push(l(e,a,a+s>u?u:a+s));return 1===i?(t=e[n-1],o.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],o.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"=")),o.join("")};for(var r=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,u=s.length;a<u;++a)r[a]=s[a],i[s.charCodeAt(a)]=a;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function l(e,t,n){for(var i,o,s=[],a=t;a<n;a+=3)i=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),s.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return s.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(e,t){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
t.read=function(e,t,n,r,i){var o,s,a=8*i-r-1,u=(1<<a)-1,c=u>>1,l=-7,h=n?i-1:0,d=n?-1:1,f=e[t+h];for(h+=d,o=f&(1<<-l)-1,f>>=-l,l+=a;l>0;o=256*o+e[t+h],h+=d,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=r;l>0;s=256*s+e[t+h],h+=d,l-=8);if(0===o)o=1-c;else{if(o===u)return s?NaN:1/0*(f?-1:1);s+=Math.pow(2,r),o-=c}return(f?-1:1)*s*Math.pow(2,o-r)},t.write=function(e,t,n,r,i,o){var s,a,u,c=8*o-i-1,l=(1<<c)-1,h=l>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:o-1,p=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=l):(s=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-s))<1&&(s--,u*=2),(t+=s+h>=1?d/u:d*Math.pow(2,1-h))*u>=2&&(s++,u/=2),s+h>=l?(a=0,s=l):s+h>=1?(a=(t*u-1)*Math.pow(2,i),s+=h):(a=t*Math.pow(2,h-1)*Math.pow(2,i),s=0));i>=8;e[n+f]=255&a,f+=p,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;e[n+f]=255&s,f+=p,s/=256,c-=8);e[n+f-p]|=128*m}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.jws,n=e.KeyUtil,i=e.X509,o=e.crypto,s=e.hextob64u,a=e.b64tohex,u=e.AllowedSigningAlgs;return function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.parseJwt=function e(n){r.Log.debug("JoseUtil.parseJwt");try{var i=t.JWS.parse(n);return{header:i.headerObj,payload:i.payloadObj}}catch(e){r.Log.error(e)}},e.validateJwt=function(t,o,s,u,c,l,h){r.Log.debug("JoseUtil.validateJwt");try{if("RSA"===o.kty)if(o.e&&o.n)o=n.getKey(o);else{if(!o.x5c||!o.x5c.length)return r.Log.error("JoseUtil.validateJwt: RSA key missing key material",o),Promise.reject(new Error("RSA key missing key material"));var d=a(o.x5c[0]);o=i.getPublicKeyFromCertHex(d)}else{if("EC"!==o.kty)return r.Log.error("JoseUtil.validateJwt: Unsupported key type",o&&o.kty),Promise.reject(new Error(o.kty));if(!(o.crv&&o.x&&o.y))return r.Log.error("JoseUtil.validateJwt: EC key missing key material",o),Promise.reject(new Error("EC key missing key material"));o=n.getKey(o)}return e._validateJwt(t,o,s,u,c,l,h)}catch(e){return r.Log.error(e&&e.message||e),Promise.reject("JWT validation failed")}},e.validateJwtAttributes=function(t,n,i,o,s,a){o||(o=0),s||(s=parseInt(Date.now()/1e3));var u=e.parseJwt(t).payload;if(!u.iss)return r.Log.error("JoseUtil._validateJwt: issuer was not provided"),Promise.reject(new Error("issuer was not provided"));if(u.iss!==n)return r.Log.error("JoseUtil._validateJwt: Invalid issuer in token",u.iss),Promise.reject(new Error("Invalid issuer in token: "+u.iss));if(!u.aud)return r.Log.error("JoseUtil._validateJwt: aud was not provided"),Promise.reject(new Error("aud was not provided"));if(!(u.aud===i||Array.isArray(u.aud)&&u.aud.indexOf(i)>=0))return r.Log.error("JoseUtil._validateJwt: Invalid audience in token",u.aud),Promise.reject(new Error("Invalid audience in token: "+u.aud));if(u.azp&&u.azp!==i)return r.Log.error("JoseUtil._validateJwt: Invalid azp in token",u.azp),Promise.reject(new Error("Invalid azp in token: "+u.azp));if(!a){var c=s+o,l=s-o;if(!u.iat)return r.Log.error("JoseUtil._validateJwt: iat was not provided"),Promise.reject(new Error("iat was not provided"));if(c<u.iat)return r.Log.error("JoseUtil._validateJwt: iat is in the future",u.iat),Promise.reject(new Error("iat is in the future: "+u.iat));if(u.nbf&&c<u.nbf)return r.Log.error("JoseUtil._validateJwt: nbf is in the future",u.nbf),Promise.reject(new Error("nbf is in the future: "+u.nbf));if(!u.exp)return r.Log.error("JoseUtil._validateJwt: exp was not provided"),Promise.reject(new Error("exp was not provided"));if(u.exp<l)return r.Log.error("JoseUtil._validateJwt: exp is in the past",u.exp),Promise.reject(new Error("exp is in the past:"+u.exp))}return Promise.resolve(u)},e._validateJwt=function(n,i,o,s,a,c,l){return e.validateJwtAttributes(n,o,s,a,c,l).then((function(e){try{return t.JWS.verify(n,i,u)?e:(r.Log.error("JoseUtil._validateJwt: signature validation failed"),Promise.reject(new Error("signature validation failed")))}catch(e){return r.Log.error(e&&e.message||e),Promise.reject(new Error("signature validation failed"))}}))},e.hashString=function e(t,n){try{return o.Util.hashString(t,n)}catch(e){r.Log.error(e)}},e.hexToBase64Url=function e(t){try{return s(t)}catch(e){r.Log.error(e)}},e}()};var r=n(0);e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SigninResponse=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(3);function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.SigninResponse=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#";o(this,e);var r=i.UrlUtility.parseUrlFragment(t,n);this.error=r.error,this.error_description=r.error_description,this.error_uri=r.error_uri,this.code=r.code,this.state=r.state,this.id_token=r.id_token,this.session_state=r.session_state,this.access_token=r.access_token,this.token_type=r.token_type,this.scope=r.scope,this.profile=void 0,this.expires_in=r.expires_in}return r(e,[{key:"expires_in",get:function(){if(this.expires_at){var e=parseInt(Date.now()/1e3);return this.expires_at-e}},set:function(e){var t=parseInt(e);if("number"==typeof t&&t>0){var n=parseInt(Date.now()/1e3);this.expires_at=n+t}}},{key:"expired",get:function(){var e=this.expires_in;if(void 0!==e)return e<=0}},{key:"scopes",get:function(){return(this.scope||"").split(" ")}},{key:"isOpenIdConnect",get:function(){return this.scopes.indexOf("openid")>=0||!!this.id_token}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SignoutRequest=void 0;var r=n(0),i=n(3),o=n(9);t.SignoutRequest=function e(t){var n=t.url,s=t.id_token_hint,a=t.post_logout_redirect_uri,u=t.data,c=t.extraQueryParams,l=t.request_type;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!n)throw r.Log.error("SignoutRequest.ctor: No url passed"),new Error("url");for(var h in s&&(n=i.UrlUtility.addQueryParam(n,"id_token_hint",s)),a&&(n=i.UrlUtility.addQueryParam(n,"post_logout_redirect_uri",a),u&&(this.state=new o.State({data:u,request_type:l}),n=i.UrlUtility.addQueryParam(n,"state",this.state.id))),c)n=i.UrlUtility.addQueryParam(n,h,c[h]);this.url=n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SignoutResponse=void 0;var r=n(3);t.SignoutResponse=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=r.UrlUtility.parseUrlFragment(t,"?");this.error=n.error,this.error_description=n.error_description,this.error_uri=n.error_uri,this.state=n.state}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InMemoryWebStorage=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0);t.InMemoryWebStorage=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._data={}}return e.prototype.getItem=function(e){return i.Log.debug("InMemoryWebStorage.getItem",e),this._data[e]},e.prototype.setItem=function(e,t){i.Log.debug("InMemoryWebStorage.setItem",e),this._data[e]=t},e.prototype.removeItem=function(e){i.Log.debug("InMemoryWebStorage.removeItem",e),delete this._data[e]},e.prototype.key=function(e){return Object.getOwnPropertyNames(this._data)[e]},r(e,[{key:"length",get:function(){return Object.getOwnPropertyNames(this._data).length}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UserManager=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0),o=n(10),s=n(39),a=n(15),u=n(45),c=n(47),l=n(18),h=n(8),d=n(20),f=n(11),p=n(4);function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}t.UserManager=function(e){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c.SilentRenewService,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l.SessionMonitor,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:d.TokenRevocationClient,h=arguments.length>4&&void 0!==arguments[4]?arguments[4]:f.TokenClient,b=arguments.length>5&&void 0!==arguments[5]?arguments[5]:p.JoseUtil;m(this,t),n instanceof s.UserManagerSettings||(n=new s.UserManagerSettings(n));var v=g(this,e.call(this,n));return v._events=new u.UserManagerEvents(n),v._silentRenewService=new r(v),v.settings.automaticSilentRenew&&(i.Log.debug("UserManager.ctor: automaticSilentRenew is configured, setting up silent renew"),v.startSilentRenew()),v.settings.monitorSession&&(i.Log.debug("UserManager.ctor: monitorSession is configured, setting up session monitor"),v._sessionMonitor=new o(v)),v._tokenRevocationClient=new a(v._settings),v._tokenClient=new h(v._settings),v._joseUtil=b,v}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.getUser=function(){var e=this;return this._loadUser().then((function(t){return t?(i.Log.info("UserManager.getUser: user loaded"),e._events.load(t,!1),t):(i.Log.info("UserManager.getUser: user not found in storage"),null)}))},t.prototype.removeUser=function(){var e=this;return this.storeUser(null).then((function(){i.Log.info("UserManager.removeUser: user removed from storage"),e._events.unload()}))},t.prototype.signinRedirect=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(e=Object.assign({},e)).request_type="si:r";var t={useReplaceToNavigate:e.useReplaceToNavigate};return this._signinStart(e,this._redirectNavigator,t).then((function(){i.Log.info("UserManager.signinRedirect: successful")}))},t.prototype.signinRedirectCallback=function(e){return this._signinEnd(e||this._redirectNavigator.url).then((function(e){return e.profile&&e.profile.sub?i.Log.info("UserManager.signinRedirectCallback: successful, signed in sub: ",e.profile.sub):i.Log.info("UserManager.signinRedirectCallback: no sub"),e}))},t.prototype.signinPopup=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(e=Object.assign({},e)).request_type="si:p";var t=e.redirect_uri||this.settings.popup_redirect_uri||this.settings.redirect_uri;return t?(e.redirect_uri=t,e.display="popup",this._signin(e,this._popupNavigator,{startUrl:t,popupWindowFeatures:e.popupWindowFeatures||this.settings.popupWindowFeatures,popupWindowTarget:e.popupWindowTarget||this.settings.popupWindowTarget}).then((function(e){return e&&(e.profile&&e.profile.sub?i.Log.info("UserManager.signinPopup: signinPopup successful, signed in sub: ",e.profile.sub):i.Log.info("UserManager.signinPopup: no sub")),e}))):(i.Log.error("UserManager.signinPopup: No popup_redirect_uri or redirect_uri configured"),Promise.reject(new Error("No popup_redirect_uri or redirect_uri configured")))},t.prototype.signinPopupCallback=function(e){return this._signinCallback(e,this._popupNavigator).then((function(e){return e&&(e.profile&&e.profile.sub?i.Log.info("UserManager.signinPopupCallback: successful, signed in sub: ",e.profile.sub):i.Log.info("UserManager.signinPopupCallback: no sub")),e})).catch((function(e){i.Log.error(e.message)}))},t.prototype.signinSilent=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t=Object.assign({},t),this._loadUser().then((function(n){return n&&n.refresh_token?(t.refresh_token=n.refresh_token,e._useRefreshToken(t)):(t.request_type="si:s",t.id_token_hint=t.id_token_hint||e.settings.includeIdTokenInSilentRenew&&n&&n.id_token,n&&e._settings.validateSubOnSilentRenew&&(i.Log.debug("UserManager.signinSilent, subject prior to silent renew: ",n.profile.sub),t.current_sub=n.profile.sub),e._signinSilentIframe(t))}))},t.prototype._useRefreshToken=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._tokenClient.exchangeRefreshToken(t).then((function(t){return t?t.access_token?e._loadUser().then((function(n){if(n){var r=Promise.resolve();return t.id_token&&(r=e._validateIdTokenFromTokenRefreshToken(n.profile,t.id_token)),r.then((function(){return i.Log.debug("UserManager._useRefreshToken: refresh token response success"),n.id_token=t.id_token||n.id_token,n.access_token=t.access_token,n.refresh_token=t.refresh_token||n.refresh_token,n.expires_in=t.expires_in,e.storeUser(n).then((function(){return e._events.load(n),n}))}))}return null})):(i.Log.error("UserManager._useRefreshToken: No access token returned from token endpoint"),Promise.reject("No access token returned from token endpoint")):(i.Log.error("UserManager._useRefreshToken: No response returned from token endpoint"),Promise.reject("No response returned from token endpoint"))}))},t.prototype._validateIdTokenFromTokenRefreshToken=function(e,t){var n=this;return this._metadataService.getIssuer().then((function(r){return n.settings.getEpochTime().then((function(o){return n._joseUtil.validateJwtAttributes(t,r,n._settings.client_id,n._settings.clockSkew,o).then((function(t){return t?t.sub!==e.sub?(i.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: sub in id_token does not match current sub"),Promise.reject(new Error("sub in id_token does not match current sub"))):t.auth_time&&t.auth_time!==e.auth_time?(i.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: auth_time in id_token does not match original auth_time"),Promise.reject(new Error("auth_time in id_token does not match original auth_time"))):t.azp&&t.azp!==e.azp?(i.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: azp in id_token does not match original azp"),Promise.reject(new Error("azp in id_token does not match original azp"))):!t.azp&&e.azp?(i.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: azp not in id_token, but present in original id_token"),Promise.reject(new Error("azp not in id_token, but present in original id_token"))):void 0:(i.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: Failed to validate id_token"),Promise.reject(new Error("Failed to validate id_token")))}))}))}))},t.prototype._signinSilentIframe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.redirect_uri||this.settings.silent_redirect_uri||this.settings.redirect_uri;return t?(e.redirect_uri=t,e.prompt=e.prompt||"none",this._signin(e,this._iframeNavigator,{startUrl:t,silentRequestTimeout:e.silentRequestTimeout||this.settings.silentRequestTimeout}).then((function(e){return e&&(e.profile&&e.profile.sub?i.Log.info("UserManager.signinSilent: successful, signed in sub: ",e.profile.sub):i.Log.info("UserManager.signinSilent: no sub")),e}))):(i.Log.error("UserManager.signinSilent: No silent_redirect_uri configured"),Promise.reject(new Error("No silent_redirect_uri configured")))},t.prototype.signinSilentCallback=function(e){return this._signinCallback(e,this._iframeNavigator).then((function(e){return e&&(e.profile&&e.profile.sub?i.Log.info("UserManager.signinSilentCallback: successful, signed in sub: ",e.profile.sub):i.Log.info("UserManager.signinSilentCallback: no sub")),e}))},t.prototype.signinCallback=function(e){var t=this;return this.readSigninResponseState(e).then((function(n){var r=n.state;return n.response,"si:r"===r.request_type?t.signinRedirectCallback(e):"si:p"===r.request_type?t.signinPopupCallback(e):"si:s"===r.request_type?t.signinSilentCallback(e):Promise.reject(new Error("invalid response_type in state"))}))},t.prototype.signoutCallback=function(e,t){var n=this;return this.readSignoutResponseState(e).then((function(r){var i=r.state,o=r.response;return i?"so:r"===i.request_type?n.signoutRedirectCallback(e):"so:p"===i.request_type?n.signoutPopupCallback(e,t):Promise.reject(new Error("invalid response_type in state")):o}))},t.prototype.querySessionStatus=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(t=Object.assign({},t)).request_type="si:s";var n=t.redirect_uri||this.settings.silent_redirect_uri||this.settings.redirect_uri;return n?(t.redirect_uri=n,t.prompt="none",t.response_type=t.response_type||this.settings.query_status_response_type,t.scope=t.scope||"openid",t.skipUserInfo=!0,this._signinStart(t,this._iframeNavigator,{startUrl:n,silentRequestTimeout:t.silentRequestTimeout||this.settings.silentRequestTimeout}).then((function(t){return e.processSigninResponse(t.url).then((function(e){if(i.Log.debug("UserManager.querySessionStatus: got signin response"),e.session_state&&e.profile.sub)return i.Log.info("UserManager.querySessionStatus: querySessionStatus success for sub: ",e.profile.sub),{session_state:e.session_state,sub:e.profile.sub,sid:e.profile.sid};i.Log.info("querySessionStatus successful, user not authenticated")})).catch((function(t){if(t.session_state&&e.settings.monitorAnonymousSession&&("login_required"==t.message||"consent_required"==t.message||"interaction_required"==t.message||"account_selection_required"==t.message))return i.Log.info("UserManager.querySessionStatus: querySessionStatus success for anonymous user"),{session_state:t.session_state};throw t}))}))):(i.Log.error("UserManager.querySessionStatus: No silent_redirect_uri configured"),Promise.reject(new Error("No silent_redirect_uri configured")))},t.prototype._signin=function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._signinStart(e,t,r).then((function(t){return n._signinEnd(t.url,e)}))},t.prototype._signinStart=function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t.prepare(r).then((function(t){return i.Log.debug("UserManager._signinStart: got navigator window handle"),n.createSigninRequest(e).then((function(e){return i.Log.debug("UserManager._signinStart: got signin request"),r.url=e.url,r.id=e.state.id,t.navigate(r)})).catch((function(e){throw t.close&&(i.Log.debug("UserManager._signinStart: Error after preparing navigator, closing navigator window"),t.close()),e}))}))},t.prototype._signinEnd=function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.processSigninResponse(e).then((function(e){i.Log.debug("UserManager._signinEnd: got signin response");var r=new a.User(e);if(n.current_sub){if(n.current_sub!==r.profile.sub)return i.Log.debug("UserManager._signinEnd: current user does not match user returned from signin. sub from signin: ",r.profile.sub),Promise.reject(new Error("login_required"));i.Log.debug("UserManager._signinEnd: current user matches user returned from signin")}return t.storeUser(r).then((function(){return i.Log.debug("UserManager._signinEnd: user stored"),t._events.load(r),r}))}))},t.prototype._signinCallback=function(e,t){i.Log.debug("UserManager._signinCallback");var n="query"===this._settings.response_mode||!this._settings.response_mode&&h.SigninRequest.isCode(this._settings.response_type)?"?":"#";return t.callback(e,void 0,n)},t.prototype.signoutRedirect=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(e=Object.assign({},e)).request_type="so:r";var t=e.post_logout_redirect_uri||this.settings.post_logout_redirect_uri;t&&(e.post_logout_redirect_uri=t);var n={useReplaceToNavigate:e.useReplaceToNavigate};return this._signoutStart(e,this._redirectNavigator,n).then((function(){i.Log.info("UserManager.signoutRedirect: successful")}))},t.prototype.signoutRedirectCallback=function(e){return this._signoutEnd(e||this._redirectNavigator.url).then((function(e){return i.Log.info("UserManager.signoutRedirectCallback: successful"),e}))},t.prototype.signoutPopup=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(e=Object.assign({},e)).request_type="so:p";var t=e.post_logout_redirect_uri||this.settings.popup_post_logout_redirect_uri||this.settings.post_logout_redirect_uri;return e.post_logout_redirect_uri=t,e.display="popup",e.post_logout_redirect_uri&&(e.state=e.state||{}),this._signout(e,this._popupNavigator,{startUrl:t,popupWindowFeatures:e.popupWindowFeatures||this.settings.popupWindowFeatures,popupWindowTarget:e.popupWindowTarget||this.settings.popupWindowTarget}).then((function(){i.Log.info("UserManager.signoutPopup: successful")}))},t.prototype.signoutPopupCallback=function(e,t){return void 0===t&&"boolean"==typeof e&&(t=e,e=null),this._popupNavigator.callback(e,t,"?").then((function(){i.Log.info("UserManager.signoutPopupCallback: successful")}))},t.prototype._signout=function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._signoutStart(e,t,r).then((function(e){return n._signoutEnd(e.url)}))},t.prototype._signoutStart=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this,n=arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.prepare(r).then((function(n){return i.Log.debug("UserManager._signoutStart: got navigator window handle"),t._loadUser().then((function(o){return i.Log.debug("UserManager._signoutStart: loaded current user from storage"),(t._settings.revokeAccessTokenOnSignout?t._revokeInternal(o):Promise.resolve()).then((function(){var s=e.id_token_hint||o&&o.id_token;return s&&(i.Log.debug("UserManager._signoutStart: Setting id_token into signout request"),e.id_token_hint=s),t.removeUser().then((function(){return i.Log.debug("UserManager._signoutStart: user removed, creating signout request"),t.createSignoutRequest(e).then((function(e){return i.Log.debug("UserManager._signoutStart: got signout request"),r.url=e.url,e.state&&(r.id=e.state.id),n.navigate(r)}))}))}))})).catch((function(e){throw n.close&&(i.Log.debug("UserManager._signoutStart: Error after preparing navigator, closing navigator window"),n.close()),e}))}))},t.prototype._signoutEnd=function(e){return this.processSignoutResponse(e).then((function(e){return i.Log.debug("UserManager._signoutEnd: got signout response"),e}))},t.prototype.revokeAccessToken=function(){var e=this;return this._loadUser().then((function(t){return e._revokeInternal(t,!0).then((function(n){if(n)return i.Log.debug("UserManager.revokeAccessToken: removing token properties from user and re-storing"),t.access_token=null,t.refresh_token=null,t.expires_at=null,t.token_type=null,e.storeUser(t).then((function(){i.Log.debug("UserManager.revokeAccessToken: user stored"),e._events.load(t)}))}))})).then((function(){i.Log.info("UserManager.revokeAccessToken: access token revoked successfully")}))},t.prototype._revokeInternal=function(e,t){var n=this;if(e){var r=e.access_token,o=e.refresh_token;return this._revokeAccessTokenInternal(r,t).then((function(e){return n._revokeRefreshTokenInternal(o,t).then((function(t){return e||t||i.Log.debug("UserManager.revokeAccessToken: no need to revoke due to no token(s), or JWT format"),e||t}))}))}return Promise.resolve(!1)},t.prototype._revokeAccessTokenInternal=function(e,t){return!e||e.indexOf(".")>=0?Promise.resolve(!1):this._tokenRevocationClient.revoke(e,t).then((function(){return!0}))},t.prototype._revokeRefreshTokenInternal=function(e,t){return e?this._tokenRevocationClient.revoke(e,t,"refresh_token").then((function(){return!0})):Promise.resolve(!1)},t.prototype.startSilentRenew=function(){this._silentRenewService.start()},t.prototype.stopSilentRenew=function(){this._silentRenewService.stop()},t.prototype._loadUser=function(){return this._userStore.get(this._userStoreKey).then((function(e){return e?(i.Log.debug("UserManager._loadUser: user storageString loaded"),a.User.fromStorageString(e)):(i.Log.debug("UserManager._loadUser: no user storageString"),null)}))},t.prototype.storeUser=function(e){if(e){i.Log.debug("UserManager.storeUser: storing user");var t=e.toStorageString();return this._userStore.set(this._userStoreKey,t)}return i.Log.debug("storeUser.storeUser: removing user"),this._userStore.remove(this._userStoreKey)},r(t,[{key:"_redirectNavigator",get:function(){return this.settings.redirectNavigator}},{key:"_popupNavigator",get:function(){return this.settings.popupNavigator}},{key:"_iframeNavigator",get:function(){return this.settings.iframeNavigator}},{key:"_userStore",get:function(){return this.settings.userStore}},{key:"events",get:function(){return this._events}},{key:"_userStoreKey",get:function(){return"user:"+this.settings.authority+":"+this.settings.client_id}}]),t}(o.OidcClient)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UserManagerSettings=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=(n(0),n(5)),o=n(40),s=n(41),a=n(43),u=n(6),c=n(1),l=n(8);function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}t.UserManagerSettings=function(e){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.popup_redirect_uri,i=n.popup_post_logout_redirect_uri,f=n.popupWindowFeatures,p=n.popupWindowTarget,m=n.silent_redirect_uri,g=n.silentRequestTimeout,b=n.automaticSilentRenew,v=void 0!==b&&b,y=n.validateSubOnSilentRenew,_=void 0!==y&&y,w=n.includeIdTokenInSilentRenew,E=void 0===w||w,S=n.monitorSession,M=void 0===S||S,O=n.monitorAnonymousSession,A=void 0!==O&&O,C=n.checkSessionInterval,T=void 0===C?2e3:C,k=n.stopCheckSessionOnError,x=void 0===k||k,j=n.query_status_response_type,I=n.revokeAccessTokenOnSignout,R=void 0!==I&&I,N=n.accessTokenExpiringNotificationTime,P=void 0===N?60:N,D=n.redirectNavigator,U=void 0===D?new o.RedirectNavigator:D,L=n.popupNavigator,F=void 0===L?new s.PopupNavigator:L,B=n.iframeNavigator,H=void 0===B?new a.IFrameNavigator:B,q=n.userStore,V=void 0===q?new u.WebStorageStateStore({store:c.Global.sessionStorage}):q;h(this,t);var G=d(this,e.call(this,arguments[0]));return G._popup_redirect_uri=r,G._popup_post_logout_redirect_uri=i,G._popupWindowFeatures=f,G._popupWindowTarget=p,G._silent_redirect_uri=m,G._silentRequestTimeout=g,G._automaticSilentRenew=v,G._validateSubOnSilentRenew=_,G._includeIdTokenInSilentRenew=E,G._accessTokenExpiringNotificationTime=P,G._monitorSession=M,G._monitorAnonymousSession=A,G._checkSessionInterval=T,G._stopCheckSessionOnError=x,j?G._query_status_response_type=j:arguments[0]&&arguments[0].response_type?G._query_status_response_type=l.SigninRequest.isOidc(arguments[0].response_type)?"id_token":"code":G._query_status_response_type="id_token",G._revokeAccessTokenOnSignout=R,G._redirectNavigator=U,G._popupNavigator=F,G._iframeNavigator=H,G._userStore=V,G}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"popup_redirect_uri",get:function(){return this._popup_redirect_uri}},{key:"popup_post_logout_redirect_uri",get:function(){return this._popup_post_logout_redirect_uri}},{key:"popupWindowFeatures",get:function(){return this._popupWindowFeatures}},{key:"popupWindowTarget",get:function(){return this._popupWindowTarget}},{key:"silent_redirect_uri",get:function(){return this._silent_redirect_uri}},{key:"silentRequestTimeout",get:function(){return this._silentRequestTimeout}},{key:"automaticSilentRenew",get:function(){return this._automaticSilentRenew}},{key:"validateSubOnSilentRenew",get:function(){return this._validateSubOnSilentRenew}},{key:"includeIdTokenInSilentRenew",get:function(){return this._includeIdTokenInSilentRenew}},{key:"accessTokenExpiringNotificationTime",get:function(){return this._accessTokenExpiringNotificationTime}},{key:"monitorSession",get:function(){return this._monitorSession}},{key:"monitorAnonymousSession",get:function(){return this._monitorAnonymousSession}},{key:"checkSessionInterval",get:function(){return this._checkSessionInterval}},{key:"stopCheckSessionOnError",get:function(){return this._stopCheckSessionOnError}},{key:"query_status_response_type",get:function(){return this._query_status_response_type}},{key:"revokeAccessTokenOnSignout",get:function(){return this._revokeAccessTokenOnSignout}},{key:"redirectNavigator",get:function(){return this._redirectNavigator}},{key:"popupNavigator",get:function(){return this._popupNavigator}},{key:"iframeNavigator",get:function(){return this._iframeNavigator}},{key:"userStore",get:function(){return this._userStore}}]),t}(i.OidcClientSettings)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RedirectNavigator=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0);t.RedirectNavigator=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.prototype.prepare=function(){return Promise.resolve(this)},e.prototype.navigate=function(e){return e&&e.url?(e.useReplaceToNavigate?window.location.replace(e.url):window.location=e.url,Promise.resolve()):(i.Log.error("RedirectNavigator.navigate: No url provided"),Promise.reject(new Error("No url provided")))},r(e,[{key:"url",get:function(){return window.location.href}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PopupNavigator=void 0;var r=n(0),i=n(42);t.PopupNavigator=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.prototype.prepare=function(e){var t=new i.PopupWindow(e);return Promise.resolve(t)},e.prototype.callback=function e(t,n,o){r.Log.debug("PopupNavigator.callback");try{return i.PopupWindow.notifyOpener(t,n,o),Promise.resolve()}catch(e){return Promise.reject(e)}},e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PopupWindow=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0),o=n(3);t.PopupWindow=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._promise=new Promise((function(e,t){n._resolve=e,n._reject=t}));var r=t.popupWindowTarget||"_blank",o=t.popupWindowFeatures||"location=no,toolbar=no,width=500,height=500,left=100,top=100;";this._popup=window.open("",r,o),this._popup&&(i.Log.debug("PopupWindow.ctor: popup successfully created"),this._checkForPopupClosedTimer=window.setInterval(this._checkForPopupClosed.bind(this),500))}return e.prototype.navigate=function(e){return this._popup?e&&e.url?(i.Log.debug("PopupWindow.navigate: Setting URL in popup"),this._id=e.id,this._id&&(window["popupCallback_"+e.id]=this._callback.bind(this)),this._popup.focus(),this._popup.window.location=e.url):(this._error("PopupWindow.navigate: no url provided"),this._error("No url provided")):this._error("PopupWindow.navigate: Error opening popup window"),this.promise},e.prototype._success=function(e){i.Log.debug("PopupWindow.callback: Successful response from popup window"),this._cleanup(),this._resolve(e)},e.prototype._error=function(e){i.Log.error("PopupWindow.error: ",e),this._cleanup(),this._reject(new Error(e))},e.prototype.close=function(){this._cleanup(!1)},e.prototype._cleanup=function(e){i.Log.debug("PopupWindow.cleanup"),window.clearInterval(this._checkForPopupClosedTimer),this._checkForPopupClosedTimer=null,delete window["popupCallback_"+this._id],this._popup&&!e&&this._popup.close(),this._popup=null},e.prototype._checkForPopupClosed=function(){this._popup&&!this._popup.closed||this._error("Popup window closed")},e.prototype._callback=function(e,t){this._cleanup(t),e?(i.Log.debug("PopupWindow.callback success"),this._success({url:e})):(i.Log.debug("PopupWindow.callback: Invalid response from popup"),this._error("Invalid response from popup"))},e.notifyOpener=function(e,t,n){if(window.opener){if(e=e||window.location.href){var r=o.UrlUtility.parseUrlFragment(e,n);if(r.state){var s="popupCallback_"+r.state,a=window.opener[s];a?(i.Log.debug("PopupWindow.notifyOpener: passing url message to opener"),a(e,t)):i.Log.warn("PopupWindow.notifyOpener: no matching callback found on opener")}else i.Log.warn("PopupWindow.notifyOpener: no state found in response url")}}else i.Log.warn("PopupWindow.notifyOpener: no window.opener. Can't complete notification.")},r(e,[{key:"promise",get:function(){return this._promise}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IFrameNavigator=void 0;var r=n(0),i=n(44);t.IFrameNavigator=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.prototype.prepare=function(e){var t=new i.IFrameWindow(e);return Promise.resolve(t)},e.prototype.callback=function e(t){r.Log.debug("IFrameNavigator.callback");try{return i.IFrameWindow.notifyParent(t),Promise.resolve()}catch(e){return Promise.reject(e)}},e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IFrameWindow=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0);t.IFrameWindow=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._promise=new Promise((function(e,t){n._resolve=e,n._reject=t})),this._boundMessageEvent=this._message.bind(this),window.addEventListener("message",this._boundMessageEvent,!1),this._frame=window.document.createElement("iframe"),this._frame.style.visibility="hidden",this._frame.style.position="absolute",this._frame.width=0,this._frame.height=0,window.document.body.appendChild(this._frame)}return e.prototype.navigate=function(e){if(e&&e.url){var t=e.silentRequestTimeout||1e4;i.Log.debug("IFrameWindow.navigate: Using timeout of:",t),this._timer=window.setTimeout(this._timeout.bind(this),t),this._frame.src=e.url}else this._error("No url provided");return this.promise},e.prototype._success=function(e){this._cleanup(),i.Log.debug("IFrameWindow: Successful response from frame window"),this._resolve(e)},e.prototype._error=function(e){this._cleanup(),i.Log.error(e),this._reject(new Error(e))},e.prototype.close=function(){this._cleanup()},e.prototype._cleanup=function(){this._frame&&(i.Log.debug("IFrameWindow: cleanup"),window.removeEventListener("message",this._boundMessageEvent,!1),window.clearTimeout(this._timer),window.document.body.removeChild(this._frame),this._timer=null,this._frame=null,this._boundMessageEvent=null)},e.prototype._timeout=function(){i.Log.debug("IFrameWindow.timeout"),this._error("Frame window timed out")},e.prototype._message=function(e){if(i.Log.debug("IFrameWindow.message"),this._timer&&e.origin===this._origin&&e.source===this._frame.contentWindow&&"string"==typeof e.data&&(e.data.startsWith("http://")||e.data.startsWith("https://"))){var t=e.data;t?this._success({url:t}):this._error("Invalid response from frame")}},e.notifyParent=function(e){i.Log.debug("IFrameWindow.notifyParent"),(e=e||window.location.href)&&(i.Log.debug("IFrameWindow.notifyParent: posting url message to parent"),window.parent.postMessage(e,location.protocol+"//"+location.host))},r(e,[{key:"promise",get:function(){return this._promise}},{key:"_origin",get:function(){return location.protocol+"//"+location.host}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UserManagerEvents=void 0;var r=n(0),i=n(16),o=n(17);t.UserManagerEvents=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return r._userLoaded=new o.Event("User loaded"),r._userUnloaded=new o.Event("User unloaded"),r._silentRenewError=new o.Event("Silent renew error"),r._userSignedIn=new o.Event("User signed in"),r._userSignedOut=new o.Event("User signed out"),r._userSessionChanged=new o.Event("User session changed"),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.load=function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];r.Log.debug("UserManagerEvents.load"),e.prototype.load.call(this,t),n&&this._userLoaded.raise(t)},t.prototype.unload=function(){r.Log.debug("UserManagerEvents.unload"),e.prototype.unload.call(this),this._userUnloaded.raise()},t.prototype.addUserLoaded=function(e){this._userLoaded.addHandler(e)},t.prototype.removeUserLoaded=function(e){this._userLoaded.removeHandler(e)},t.prototype.addUserUnloaded=function(e){this._userUnloaded.addHandler(e)},t.prototype.removeUserUnloaded=function(e){this._userUnloaded.removeHandler(e)},t.prototype.addSilentRenewError=function(e){this._silentRenewError.addHandler(e)},t.prototype.removeSilentRenewError=function(e){this._silentRenewError.removeHandler(e)},t.prototype._raiseSilentRenewError=function(e){r.Log.debug("UserManagerEvents._raiseSilentRenewError",e.message),this._silentRenewError.raise(e)},t.prototype.addUserSignedIn=function(e){this._userSignedIn.addHandler(e)},t.prototype.removeUserSignedIn=function(e){this._userSignedIn.removeHandler(e)},t.prototype._raiseUserSignedIn=function(){r.Log.debug("UserManagerEvents._raiseUserSignedIn"),this._userSignedIn.raise()},t.prototype.addUserSignedOut=function(e){this._userSignedOut.addHandler(e)},t.prototype.removeUserSignedOut=function(e){this._userSignedOut.removeHandler(e)},t.prototype._raiseUserSignedOut=function(){r.Log.debug("UserManagerEvents._raiseUserSignedOut"),this._userSignedOut.raise()},t.prototype.addUserSessionChanged=function(e){this._userSessionChanged.addHandler(e)},t.prototype.removeUserSessionChanged=function(e){this._userSessionChanged.removeHandler(e)},t.prototype._raiseUserSessionChanged=function(){r.Log.debug("UserManagerEvents._raiseUserSessionChanged"),this._userSessionChanged.raise()},t}(i.AccessTokenEvents)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Timer=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0),o=n(1),s=n(17);function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}t.Timer=function(e){function t(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.Global.timer,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;a(this,t);var s=u(this,e.call(this,n));return s._timer=r,s._nowFunc=i||function(){return Date.now()/1e3},s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.init=function(e){e<=0&&(e=1),e=parseInt(e);var t=this.now+e;if(this.expiration===t&&this._timerHandle)i.Log.debug("Timer.init timer "+this._name+" skipping initialization since already initialized for expiration:",this.expiration);else{this.cancel(),i.Log.debug("Timer.init timer "+this._name+" for duration:",e),this._expiration=t;var n=5;e<n&&(n=e),this._timerHandle=this._timer.setInterval(this._callback.bind(this),1e3*n)}},t.prototype.cancel=function(){this._timerHandle&&(i.Log.debug("Timer.cancel: ",this._name),this._timer.clearInterval(this._timerHandle),this._timerHandle=null)},t.prototype._callback=function(){var t=this._expiration-this.now;i.Log.debug("Timer.callback; "+this._name+" timer expires in:",t),this._expiration<=this.now&&(this.cancel(),e.prototype.raise.call(this))},r(t,[{key:"now",get:function(){return parseInt(this._nowFunc())}},{key:"expiration",get:function(){return this._expiration}}]),t}(s.Event)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SilentRenewService=void 0;var r=n(0);t.SilentRenewService=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._userManager=t}return e.prototype.start=function(){this._callback||(this._callback=this._tokenExpiring.bind(this),this._userManager.events.addAccessTokenExpiring(this._callback),this._userManager.getUser().then((function(e){})).catch((function(e){r.Log.error("SilentRenewService.start: Error from getUser:",e.message)})))},e.prototype.stop=function(){this._callback&&(this._userManager.events.removeAccessTokenExpiring(this._callback),delete this._callback)},e.prototype._tokenExpiring=function(){var e=this;this._userManager.signinSilent().then((function(e){r.Log.debug("SilentRenewService._tokenExpiring: Silent token renewal successful")}),(function(t){r.Log.error("SilentRenewService._tokenExpiring: Error from signinSilent:",t.message),e._userManager.events._raiseSilentRenewError(t)}))},e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CordovaPopupNavigator=void 0;var r=n(21);t.CordovaPopupNavigator=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.prototype.prepare=function(e){var t=new r.CordovaPopupWindow(e);return Promise.resolve(t)},e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CordovaIFrameNavigator=void 0;var r=n(21);t.CordovaIFrameNavigator=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.prototype.prepare=function(e){e.popupWindowFeatures="hidden=yes";var t=new r.CordovaPopupWindow(e);return Promise.resolve(t)},e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Version="1.11.5"}])},e.exports=t()},5666:function(e){var t=function(e){"use strict";var t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",s=r.toStringTag||"@@toStringTag";function a(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{a({},"")}catch(e){a=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var i=t&&t.prototype instanceof h?t:h,o=Object.create(i.prototype),s=new S(r||[]);return o._invoke=function(e,t,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return{value:void 0,done:!0}}for(n.method=i,n.arg=o;;){var s=n.delegate;if(s){var a=_(s,n);if(a){if(a===l)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=c(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,s),o}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var l={};function h(){}function d(){}function f(){}var p={};a(p,i,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(M([])));g&&g!==t&&n.call(g,i)&&(p=g);var b=f.prototype=h.prototype=Object.create(p);function v(e){["next","throw","return"].forEach((function(t){a(e,t,(function(e){return this._invoke(t,e)}))}))}function y(e,t){var r;this._invoke=function(i,o){function s(){return new t((function(r,s){!function r(i,o,s,a){var u=c(e[i],e,o);if("throw"!==u.type){var l=u.arg,h=l.value;return h&&"object"==typeof h&&n.call(h,"__await")?t.resolve(h.__await).then((function(e){r("next",e,s,a)}),(function(e){r("throw",e,s,a)})):t.resolve(h).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,a)}))}a(u.arg)}(i,o,r,s)}))}return r=r?r.then(s,s):s()}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=c(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,l;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function M(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:O}}function O(){return{value:void 0,done:!0}}return d.prototype=f,a(b,"constructor",f),a(f,"constructor",d),d.displayName=a(f,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,a(e,s,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},v(y.prototype),a(y.prototype,o,(function(){return this})),e.AsyncIterator=y,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var s=new y(u(t,n,r,i),o);return e.isGeneratorFunction(n)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},v(b),a(b,s,"Generator"),a(b,i,(function(){return this})),a(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=M,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return s.type="throw",s.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],s=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var a=n.call(o,"catchLoc"),u=n.call(o,"finallyLoc");if(a&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=e,s.arg=t,o?(this.method="next",this.next=o.finallyLoc,l):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;E(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:M(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,n),o.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};return function(){"use strict";function e(e,t,n,r,i,o,s){try{var a=e[o](s),u=a.value}catch(e){return void n(e)}a.done?t(u):Promise.resolve(u).then(r,i)}function t(t){return function(){var n=this,r=arguments;return new Promise((function(i,o){var s=t.apply(n,r);function a(t){e(s,i,o,a,u,"next",t)}function u(t){e(s,i,o,a,u,"throw",t)}a(void 0)}))}}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.r(r),n.d(r,{authController:function(){return C}}),n(7941),n(2526),n(7327),n(5003),n(9337);var s=n(7757),a=n.n(s),u=(n(4747),n(1539),n(8674),n(6699),n(2023),n(6755),n(4916),n(5306),n(9714),n(2222),n(6992),n(8783),n(3948),n(1637),n(1249),n(3123),n(4671)),c=n.n(u);function l(e){this.message=e}l.prototype=new Error,l.prototype.name="InvalidCharacterError";var h="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new l("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,r,i=0,o=0,s="";r=t.charAt(o++);~r&&(n=i%4?64*n+r:r,i++%4)?s+=String.fromCharCode(255&n>>(-2*i&6)):0)r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(r);return s};function d(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return function(e){return decodeURIComponent(h(e).replace(/(.)/g,(function(e,t){var n=t.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n})))}(t)}catch(e){return h(t)}}function f(e){this.message=e}f.prototype=new Error,f.prototype.name="InvalidTokenError";var p=function(e,t){if("string"!=typeof e)throw new f("Invalid token specified");var n=!0===(t=t||{}).header?0:1;try{return JSON.parse(d(e.split(".")[n]))}catch(e){throw new f("Invalid token specified: "+e.message)}},m=function(){return(new Date).getTime()},g=function(e){window.localStorage.setItem("auth.lastActiveTime",null!=e?e:m())},b=function(e){var t=m()-window.localStorage.getItem("auth.lastActiveTime");return console.log("Milliseconds since last active ->",t),t<1e3*e};function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],s=!0,a=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);s=!0);}catch(e){a=!0,i=e}finally{try{s||null==n.return||n.return()}finally{if(a)throw i}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?w(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n(7042),n(8309),n(1038),n(1817),n(2165);var E=function(e){e&&0!==e.length||(e=["RX_AUTH","id_token","ChatSessionToken"]);var t,n=_(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;document.cookie="".concat(r,"=;expires=Thu, 01 Jan 1970 00:00:00 UTC;path=/;")}}catch(e){n.e(e)}finally{n.f()}},S="urn:rxrole:rxadmin",M="urn:rxrole:bu";function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var C=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o(this,"legacyStatePrefix","ls_"),o(this,"legacyStatePrefixLength",3),o(this,"lastTokenRenewKey","auth.lastTokenRenew"),o(this,"keepAlive",!1),o(this,"defaultActivityEvents",["click","mousemove","keypress"]),o(this,"defaultInactiveTimeoutInSeconds",600),o(this,"isInitialised",!1),this.mgr=null}var n,r,s,u,l,h,d,f,v,w,O;return n=e,(r=[{key:"initialize",value:function(e){var t,n;this.isInitialised?console.log("AuthController initialised..."):(console.log("Initialising authController..."),this.userManagerSettings={authority:e.authority,client_id:e.clientId,redirect_uri:e.redirectUri,post_logout_redirect_uri:e.postLogoutRedirectUri,response_type:"code",scope:"openid profile offline_access roles",filterProtocolClaims:!0,loadUserInfo:!0,monitorSession:!1,userStore:new(c().WebStorageStateStore)({store:window.localStorage})},this.activityEvents=null!==(t=e.activityEvents)&&void 0!==t?t:this.defaultActivityEvents,this.inactiveTimeoutInSeconds=null!==(n=e.inactiveTimeoutInSeconds)&&void 0!==n?n:this.defaultInactiveTimeoutInSeconds,this.mgr=new(c().UserManager)(this.userManagerSettings),this.initialiseActivityMonitoring(),this.accessTokenRenewedHandlers=[],this.accessTokenExpiredHandlers=[],this.isInitialised=!0,this.eventEditionId=e.eventEditionId,this.locale=e.locale,window.localStorage.getItem(this.lastTokenRenewKey)||window.localStorage.setItem(this.lastTokenRenewKey,0))}},{key:"setKeepAlive",value:function(e){this.keepAlive=e}},{key:"initialiseActivityMonitoring",value:function(){var e=this;g(),this.activityEvents.forEach((function(e){return document.addEventListener(e,(function(){g()}))})),this.mgr.events.addAccessTokenExpiring((function(){e.accessTokenExpiringEventHandler(e)})),this.mgr.events.addAccessTokenExpired((function(){e.accessTokenExpiredEventHandler(e)}))}},{key:"addAccessTokenRenewedHandler",value:function(e){this.accessTokenRenewedHandlers.push(e)}},{key:"addAccessTokenExpiredHandler",value:function(e){this.accessTokenExpiredHandlers.push(e)}},{key:"raiseAccessTokenRenewedEvent",value:function(e){this.accessTokenRenewedHandlers.forEach((function(t){return t(e)}))}},{key:"retry",value:function(e,t){for(var n=e();t-- >0;)n=n.catch((function(){return new Promise((function(e){return setTimeout(e,100)})).then(e)}));return n}},{key:"accessTokenExpiredEventHandler",value:function(){console.log("token expired"),this.accessTokenExpiredHandlers.forEach((function(e){return e()}))}},{key:"accessTokenExpiringEventHandler",value:function(e){if(e.keepAlive&&(console.log("KeepAlive has been enabled"),g()),console.log("Access token expiring..."),b(e.inactiveTimeoutInSeconds)){var t=window.localStorage.getItem(e.lastTokenRenewKey);return m()-t<3e3?(console.log("Token has been renewed less than 3 seconds ago. Skipping renewal"),void e.getToken().then((function(t){return e.raiseAccessTokenRenewedEvent(t)}))):(window.localStorage.setItem(e.lastTokenRenewKey,m()),console.log("Renewing access token..."),e.retry((function(){return e.mgr.signinSilent()}),3).then((function(t){console.log("accessTokenExpiringEventHandler access token renewed successfully"),e.setIdTokenCookie(t),e.raiseAccessTokenRenewedEvent(t.access_token)})).catch((function(e){console.error("accessTokenExpiringEventHandler signinSilent() exception",e)})))}}},{key:"login",value:(O=t(a().mark((function e(t){var n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.mgr){e.next=2;break}throw new Error("authorization manager has not been initialized");case 2:if(t){e.next=4;break}throw new Error("invalid redirectUri");case 4:return e.next=6,this.mgr.getUser();case 6:if((n=e.sent)&&!n.expired){e.next=12;break}return r=A(A(A({},{state:t}),""!==this.eventEditionId&&{acr_values:"event_edition_id:".concat(this.eventEditionId)}),""!==this.locale&&{ui_locales:this.locale}),e.next=11,this.mgr.signinRedirect(r).then((function(){console.log("signinRedirect done")})).catch((function(e){throw console.log(e),new Error("signinRedirect failed ".concat(e))}));case 11:return e.abrupt("return",!1);case 12:return e.abrupt("return",!0);case 13:case"end":return e.stop()}}),e,this)}))),function(e){return O.apply(this,arguments)})},{key:"getToken",value:(w=t(a().mark((function e(){var t,n=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.mgr){e.next=2;break}throw new Error("authorization manager has not been initialized");case 2:return e.next=4,this.retry((function(){return n.mgr.getUser()}),3);case 4:if(t=e.sent){e.next=9;break}throw new Error("No logged in user found");case 9:if(!t.expired){e.next=11;break}throw new Error("Access token has expired");case 11:return e.abrupt("return",t.access_token);case 12:case"end":return e.stop()}}),e,this)}))),function(){return w.apply(this,arguments)})},{key:"getClaim",value:(v=t(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.getToken().then((function(e){var n=p(e);return n?n[t]:null})).catch((function(e){return null})));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return v.apply(this,arguments)})},{key:"claimHasValue",value:(f=t(a().mark((function e(t,n){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getClaim(t);case 2:if(r=e.sent){e.next=5;break}return e.abrupt("return",!1);case 5:if(!Array.isArray(r)||r.includes(n)){e.next=9;break}return e.abrupt("return",!1);case 9:if(!("string"==typeof r||r instanceof String)||r===n){e.next=11;break}return e.abrupt("return",!1);case 11:return e.abrupt("return",!0);case 12:case"end":return e.stop()}}),e,this)}))),function(e,t){return f.apply(this,arguments)})},{key:"hasClaim",value:(d=t(a().mark((function e(t,n,r){var i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.getToken();case 3:if(e.sent){e.next=6;break}return e.abrupt("return",!0);case 6:e.next=11;break;case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",!0);case 11:if(!t){e.next=22;break}return e.next=14,this.claimHasValue("role",S);case 14:if(e.t1=e.sent,e.t1){e.next=19;break}return e.next=18,this.claimHasValue("role",M);case 18:e.t1=e.sent;case 19:if(!e.t1){e.next=22;break}return e.abrupt("return",!0);case 22:return e.next=24,this.claimHasValue(n,r);case 24:return i=e.sent,e.abrupt("return",i);case 26:case"end":return e.stop()}}),e,this,[[0,8]])}))),function(e,t,n){return d.apply(this,arguments)})},{key:"handleCallback",value:(h=t(a().mark((function e(t){var n,r=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=5;break}if(n=this.parseQueryString(t),this.cleanupStorage(),!n.code){e.next=5;break}return e.abrupt("return",this.mgr.signinRedirectCallback(t).then((function(e){r.setIdTokenCookie(e),window.location.href=e.state})).catch((function(e){return console.error(">>> ERROR "+JSON.stringify(e)),Promise.reject(e)})));case 5:return e.abrupt("return",Promise.reject("Invalid query string"));case 6:case"end":return e.stop()}}),e,this)}))),function(e){return h.apply(this,arguments)})},{key:"cleanupStorage",value:function(){for(var e=Date.now()/1e3,t=0;t<localStorage.length;t++){var n=localStorage.key(t);n.startsWith("oidc.")&&!n.startsWith("oidc.user:")&&e-JSON.parse(localStorage.getItem(n)).created>86400&&localStorage.removeItem(n)}}},{key:"logout",value:(l=t(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("IN LOGOUT"),e.next=3,this.mgr.getUser();case 3:if(!e.sent){e.next=10;break}return E(this.cookieNames),e.next=8,this.mgr.signoutRedirect({state:t}).then((function(){console.log("signoutRedirect done")})).catch((function(e){throw console.log(e),new Error("signoutRedirect failed ".concat(e))}));case 8:e.next=12;break;case 10:console.log("IN LOGOUT no user"),this.legacyLogout(t);case 12:case"end":return e.stop()}}),e,this)}))),function(e){return l.apply(this,arguments)})},{key:"legacyLogout",value:function(e){var t=([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(function(e){return(e^16*Math.random()>>e/4).toString(16)}));window.localStorage.setItem(t,e);var n=function(e){var t,n=_(document.cookie.split("; "));try{for(n.s();!(t=n.n()).done;){var r=y(t.value.split("="),2),i=r[0],o=r[1];if(i===e)return o}}catch(e){n.e(e)}finally{n.f()}return null}("id_token");E(this.cookieNames),console.log("IN LEGACY LOGOUT"),window.location.href="".concat(this.userManagerSettings.authority,"/connect/endsession?id_token_hint=").concat(n,"&post_logout_redirect_uri=").concat(this.userManagerSettings.post_logout_redirect_uri,"&state=").concat(this.legacyStatePrefix).concat(t)}},{key:"handleLogoutCallback",value:(u=t(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=new URLSearchParams(t)).get("state").startsWith(this.legacyStatePrefix)){e.next=5;break}return e.abrupt("return",this.legacyHandleLogoutCallback(n.get("state").substr(this.legacyStatePrefixLength)));case 5:return e.abrupt("return",this.mgr.signoutRedirectCallback(t).then((function(e){return window.location.href=e.state})));case 6:case"end":return e.stop()}}),e,this)}))),function(e){return u.apply(this,arguments)})},{key:"legacyHandleLogoutCallback",value:function(e){var t=window.localStorage.getItem(e);window.localStorage.removeItem(e),window.location.href=t}},{key:"setIdTokenCookie",value:function(e){var t,n,r;t="id_token",n=e.id_token,r=new Date(1e3*e.expires_at+6e4).toUTCString(),document.cookie="".concat(t,"=").concat(n,";expires=").concat(r,";path=/;")}},{key:"parseQueryString",value:function(e){if(""==e)return{};var t=e.split("&").map((function(e){return e.split("=")})),n={};return t.forEach((function(e){return n[e[0]]=e[1]})),n}}])&&i(n.prototype,r),s&&i(n,s),e}())}(),r}()},e.exports=r()},function(e,t,n){var r=n(8).Buffer,i=n(57).Transform,o=n(38).StringDecoder;function s(e){i.call(this),this.hashMode="string"==typeof e,this.hashMode?this[e]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}n(7)(s,i),s.prototype.update=function(e,t,n){"string"==typeof e&&(e=r.from(e,t));var i=this._update(e);return this.hashMode?this:(n&&(i=this._toString(i,n)),i)},s.prototype.setAutoPadding=function(){},s.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},s.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},s.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},s.prototype._transform=function(e,t,n){var r;try{this.hashMode?this._update(e):this.push(this._update(e))}catch(e){r=e}finally{n(r)}},s.prototype._flush=function(e){var t;try{this.push(this.__final())}catch(e){t=e}e(t)},s.prototype._finalOrDigest=function(e){var t=this.__final()||r.alloc(0);return e&&(t=this._toString(t,e,!0)),t},s.prototype._toString=function(e,t,n){if(this._decoder||(this._decoder=new o(t),this._encoding=t),this._encoding!==t)throw new Error("can't switch encodings");var r=this._decoder.write(e);return n&&(r+=this._decoder.end()),r},e.exports=s},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";var r,i=n(11),o=n(15),s=n(26),a=n(3),u=function(e,t){var n,r,i,o,s,a;return{channelUrl:e.url,lastMessage:null==e||null===(n=e.lastMessage)||void 0===n?void 0:n.message,lastMessageSentBy:null==e||null===(r=e.lastMessage)||void 0===r||null===(i=r._sender)||void 0===i?void 0:i.userId,timeStamp:(a=function(e){var t=e.getHours(),n=e.getMinutes(),r=t>=12?"PM":"AM";return(t=(t%=12)||12)+":"+(n=n<10?"0"+n:n)+" "+r},{displayString:function(e){if(!e)return"";var t="",n=new Date(e),r=(new Date).setHours(0,0,0,0),i=new Date(Date.now()-864e5).setHours(0,0,0,0),o=new Date(e).setHours(0,0,0,0);return t=o===r?a(n):o===i?"yesterday":n.toDateString().slice(4,10),t},formatAMPM:a}).displayString(null==e||null===(o=e.lastMessage)||void 0===o?void 0:o.createdAt),userId:null===(s=e.members.filter((function(e){return e.userId!==t}))[0])||void 0===s?void 0:s.userId,hasUnreadMessages:e.unreadMessageCount>0}},c=n(12),l=n(13),h=function(){var e=Object(o.a)(Object(i.a)().mark((function e(t,n,r){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.hasNext&&t.next().then((function(e){var i=e.map((function(e){return u(e,n)}));i=i.filter((function(e){return void 0!==e.userId&&""!==e.lastMessage})),r===a.a.LOAD_CHAT_HISTORY_CHANNELS?window.chatterUiDispatcher.dispatch(a.b.loadChatHistoryChannels(i)):window.chatterUiDispatcher.dispatch(a.b.loadPreviousChatHistoryChannels(i)),window.chatterUiDispatcher.dispatch(a.b.hasMoreChatHistoryChannels(t.hasNext))})).catch((function(e){l.a.logError("error fetching history channels",e),window.chatterUiDispatcher.dispatch(a.b.setChatError(c.a.GENERIC_ERROR))}));case 1:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();t.a={getChatHistoryChannels:function(e){r=s.a.getInstance().groupChannel.createMyGroupChannelListQuery({limit:15,includeEmpty:!1,order:"latest_last_message",memberStateFilter:"joined_only"}),h(r,e,a.a.LOAD_CHAT_HISTORY_CHANNELS)},getPreviousChatHistoryChannels:function(e){h(r,e,a.a.LOAD_PREVIOUS_CHAT_HISTORY_CHANNELS)}}},function(e,t,n){"use strict";var r,i="object"==typeof Reflect?Reflect:null,o=i&&"function"==typeof i.apply?i.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};r=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var s=Number.isNaN||function(e){return e!=e};function a(){a.init.call(this)}e.exports=a,e.exports.once=function(e,t){return new Promise((function(n,r){function i(n){e.removeListener(t,o),r(n)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",i),n([].slice.call(arguments))}b(e,t,o,{once:!0}),"error"!==t&&function(e,t,n){"function"==typeof e.on&&b(e,"error",t,n)}(e,i,{once:!0})}))},a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var u=10;function c(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function l(e){return void 0===e._maxListeners?a.defaultMaxListeners:e._maxListeners}function h(e,t,n,r){var i,o,s,a;if(c(n),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),s=o[t]),void 0===s)s=o[t]=n,++e._eventsCount;else if("function"==typeof s?s=o[t]=r?[n,s]:[s,n]:r?s.unshift(n):s.push(n),(i=l(e))>0&&s.length>i&&!s.warned){s.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=s.length,a=u,console&&console.warn&&console.warn(a)}return e}function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function f(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=d.bind(r);return i.listener=n,r.wrapFn=i,i}function p(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):g(i,i.length)}function m(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function g(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function b(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function i(o){r.once&&e.removeEventListener(t,i),n(o)}))}}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");u=e}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},a.prototype.getMaxListeners=function(){return l(this)},a.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var u=i[e];if(void 0===u)return!1;if("function"==typeof u)o(u,this,t);else{var c=u.length,l=g(u,c);for(n=0;n<c;++n)o(l[n],this,t)}return!0},a.prototype.addListener=function(e,t){return h(this,e,t,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(e,t){return h(this,e,t,!0)},a.prototype.once=function(e,t){return c(t),this.on(e,f(this,e,t)),this},a.prototype.prependOnceListener=function(e,t){return c(t),this.prependListener(e,f(this,e,t)),this},a.prototype.removeListener=function(e,t){var n,r,i,o,s;if(c(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){s=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,s||t)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},a.prototype.listeners=function(e){return p(this,e,!0)},a.prototype.rawListeners=function(e){return p(this,e,!1)},a.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):m.call(e,t)},a.prototype.listenerCount=m,a.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},function(e,t,n){"use strict";var r=n(58),i=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};e.exports=h;var o=Object.create(n(50));o.inherits=n(7);var s=n(102),a=n(73);o.inherits(h,s);for(var u=i(a.prototype),c=0;c<u.length;c++){var l=u[c];h.prototype[l]||(h.prototype[l]=a.prototype[l])}function h(e){if(!(this instanceof h))return new h(e);s.call(this,e),a.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",d)}function d(){this.allowHalfOpen||this._writableState.ended||r.nextTick(f,this)}function f(e){e.end()}Object.defineProperty(h.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(h.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),h.prototype._destroy=function(e,t){this.push(null),this.end(),r.nextTick(t,e)}},function(e,t,n){"use strict";var r=n(193).Buffer,i=r.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(r.isEncoding===i||!i(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=u,this.end=c,t=4;break;case"utf8":this.fillLast=a,t=4;break;case"base64":this.text=l,this.end=h,t=3;break;default:return this.write=d,void(this.end=f)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(t)}function s(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function a(e){var t=this.lastTotal-this.lastNeed,n=function(e,t,n){if(128!=(192&t[0]))return e.lastNeed=0,"�";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"�";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"�"}}(this,e);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function u(e,t){if((e.length-t)%2==0){var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function c(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function l(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function h(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function d(e){return e.toString(this.encoding)}function f(e){return e&&e.length?this.write(e):""}t.StringDecoder=o,o.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},o.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�":t},o.prototype.text=function(e,t){var n=function(e,t,n){var r=t.length-1;if(r<n)return 0;var i=s(t[r]);if(i>=0)return i>0&&(e.lastNeed=i-1),i;if(--r<n||-2===i)return 0;if((i=s(t[r]))>=0)return i>0&&(e.lastNeed=i-2),i;if(--r<n||-2===i)return 0;if((i=s(t[r]))>=0)return i>0&&(2===i?i=0:e.lastNeed=i-3),i;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)},o.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(e,t){this.pollId=0,this.messageId=0,this.pollId=t.poll.id,this.messageId=t.poll.message_id,this._iid=e,this._payload=t}},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";var r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[];for(var r in t)n.push(encodeURIComponent(r)+"="+encodeURIComponent(t[r]));if(0===n.length)return e;var i=n.join("&");return"".concat(e,"?").concat(i)},i=n(167),o=n(20),s=n(10),a="GET",u="POST",c="PUT",l="DELETE",h=function(e){return o.a.getAuthHeader().then((function(t){var n=o.a.getClientIdHeader();return Object.assign({Accept:"application/json"},t,n,e)}))},d=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return h(r).then((function(r){return i.a.fetch(e,{method:t,headers:r,body:n})}))},f=function(e){return e.status>=s.f.BadRequest},p=function(e){return e.json().then((function(t){return{status:e.status,body:t}}))},m=function(e){return e.json().then((function(t){return{status:e.status,body:t.data,errors:t.errors}}))},g=function(e){return f(e)?Promise.reject(e):e},b=function(e){return(t=e).status>=s.f.BadRequest||t.errors&&t.errors.length>0?Promise.reject(e):e;var t},v=function(e){return f(e)?p(e).then(g):e.headers&&e.headers.get("Location")?{status:e.status,location:e.headers.get("Location")}:{status:e.status}},y=function(e){return function(t,n,i){var o={"Content-Type":"application/json"};return function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},s=r(t,i);return d(s,e,n,o).then(v)}(e,t,JSON.stringify(n),i,o)}};t.a={get:function(e,t){var n=r(e,t);return d(n,a).then(p).then(g)},put:y(c),post:y(u),delete:function(e,t){var n=r(e,t);return d(n,l).then(v)},graphqlRequest:function(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i={"Content-Type":"application/json"},o=JSON.stringify({query:t,variables:n});return h(i,r).then((function(t){return fetch("".concat(e,"graphql/"),{method:u,headers:t,body:o})})).then(m).then(b)},shouldReject:f}},function(e,t,n){"use strict";var r,i,o=n(11),s=n(15),a=n(26),u=n(12),c=n(13),l={openChannel:(i=Object(s.a)(Object(o.a)().mark((function e(t,n){var i,s,h;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l.clearChannel(),i=a.a.getInstance(),s={isDistinct:!0,operatorUserIds:[t],invitedUserIds:[n]},e.next=5,i.groupChannel.createChannel(s).then((function(e){return e&&e.joinedMemberCount>1?{channel:r=e,errorCode:h}:(h=u.a.USER_NOT_ACTIVATE_ERROR,e.delete().then((function(e){})).catch((function(e){c.a.logError(" error deleting channel :",e)})),{channel:r,errorCode:h})})).catch((function(e){return h=u.a.GENERIC_ERROR,c.a.logError(" error creating channel :",e),{channel:r,errorCode:h}}));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)}))),function(e,t){return i.apply(this,arguments)}),getChannel:function(){return r},clearChannel:function(){return r=void 0}};t.a=l},function(e,t,n){"use strict";(function(t,r){var i=n(8).Buffer,o=t.crypto||t.msCrypto;o&&o.getRandomValues?e.exports=function(e,t){if(e>4294967295)throw new RangeError("requested too many random bytes");var n=i.allocUnsafe(e);if(e>0)if(e>65536)for(var s=0;s<e;s+=65536)o.getRandomValues(n.slice(s,s+65536));else o.getRandomValues(n);if("function"==typeof t)return r.nextTick((function(){t(null,n)}));return n}:e.exports=function(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}}).call(this,n(19),n(16))},function(e,t,n){"use strict";var r={};function i(e,t,n){n||(n=Error);var i=function(e){var n,r;function i(n,r,i){return e.call(this,function(e,n,r){return"string"==typeof t?t:t(e,n,r)}(n,r,i))||this}return r=e,(n=i).prototype=Object.create(r.prototype),n.prototype.constructor=n,n.__proto__=r,i}(n);i.prototype.name=n.name,i.prototype.code=e,r[e]=i}function o(e,t){if(Array.isArray(e)){var n=e.length;return e=e.map((function(e){return String(e)})),n>2?"one of ".concat(t," ").concat(e.slice(0,n-1).join(", "),", or ")+e[n-1]:2===n?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}i("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError),i("ERR_INVALID_ARG_TYPE",(function(e,t,n){var r,i,s,a;if("string"==typeof t&&(i="not ",t.substr(!s||s<0?0:+s,i.length)===i)?(r="must not be",t=t.replace(/^not /,"")):r="must be",function(e,t,n){return(void 0===n||n>e.length)&&(n=e.length),e.substring(n-t.length,n)===t}(e," argument"))a="The ".concat(e," ").concat(r," ").concat(o(t,"type"));else{var u=function(e,t,n){return"number"!=typeof n&&(n=0),!(n+t.length>e.length)&&-1!==e.indexOf(t,n)}(e,".")?"property":"argument";a='The "'.concat(e,'" ').concat(u," ").concat(r," ").concat(o(t,"type"))}return a+=". Received type ".concat(typeof n)}),TypeError),i("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),i("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"})),i("ERR_STREAM_PREMATURE_CLOSE","Premature close"),i("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"})),i("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),i("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),i("ERR_STREAM_WRITE_AFTER_END","write after end"),i("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),i("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError),i("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),e.exports.codes=r},function(e,t,n){"use strict";(function(t){var r=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};e.exports=c;var i=n(108),o=n(112);n(7)(c,i);for(var s=r(o.prototype),a=0;a<s.length;a++){var u=s[a];c.prototype[u]||(c.prototype[u]=o.prototype[u])}function c(e){if(!(this instanceof c))return new c(e);i.call(this,e),o.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",l)))}function l(){this._writableState.ended||t.nextTick(h,this)}function h(e){e.end()}Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(c.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(c.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(c.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})}).call(this,n(16))},function(e,t,n){var r=n(8).Buffer;function i(e,t){this._block=r.alloc(e),this._finalSize=t,this._blockSize=e,this._len=0}i.prototype.update=function(e,t){"string"==typeof e&&(t=t||"utf8",e=r.from(e,t));for(var n=this._block,i=this._blockSize,o=e.length,s=this._len,a=0;a<o;){for(var u=s%i,c=Math.min(o-a,i-u),l=0;l<c;l++)n[u+l]=e[a+l];a+=c,(s+=c)%i==0&&this._update(n)}return this._len+=o,this},i.prototype.digest=function(e){var t=this._len%this._blockSize;this._block[t]=128,this._block.fill(0,t+1),t>=this._finalSize&&(this._update(this._block),this._block.fill(0));var n=8*this._len;if(n<=4294967295)this._block.writeUInt32BE(n,this._blockSize-4);else{var r=(4294967295&n)>>>0,i=(n-r)/4294967296;this._block.writeUInt32BE(i,this._blockSize-8),this._block.writeUInt32BE(r,this._blockSize-4)}this._update(this._block);var o=this._hash();return e?o.toString(e):o},i.prototype._update=function(){throw new Error("_update must be implemented by subclass")},e.exports=i},function(e,t,n){"use strict";var r={};function i(e,t,n){n||(n=Error);var i=function(e){var n,r;function i(n,r,i){return e.call(this,function(e,n,r){return"string"==typeof t?t:t(e,n,r)}(n,r,i))||this}return r=e,(n=i).prototype=Object.create(r.prototype),n.prototype.constructor=n,n.__proto__=r,i}(n);i.prototype.name=n.name,i.prototype.code=e,r[e]=i}function o(e,t){if(Array.isArray(e)){var n=e.length;return e=e.map((function(e){return String(e)})),n>2?"one of ".concat(t," ").concat(e.slice(0,n-1).join(", "),", or ")+e[n-1]:2===n?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}i("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError),i("ERR_INVALID_ARG_TYPE",(function(e,t,n){var r,i,s,a;if("string"==typeof t&&(i="not ",t.substr(!s||s<0?0:+s,i.length)===i)?(r="must not be",t=t.replace(/^not /,"")):r="must be",function(e,t,n){return(void 0===n||n>e.length)&&(n=e.length),e.substring(n-t.length,n)===t}(e," argument"))a="The ".concat(e," ").concat(r," ").concat(o(t,"type"));else{var u=function(e,t,n){return"number"!=typeof n&&(n=0),!(n+t.length>e.length)&&-1!==e.indexOf(t,n)}(e,".")?"property":"argument";a='The "'.concat(e,'" ').concat(u," ").concat(r," ").concat(o(t,"type"))}return a+=". Received type ".concat(typeof n)}),TypeError),i("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),i("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"})),i("ERR_STREAM_PREMATURE_CLOSE","Premature close"),i("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"})),i("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),i("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),i("ERR_STREAM_WRITE_AFTER_END","write after end"),i("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),i("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError),i("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),e.exports.codes=r},function(e,t,n){"use strict";(function(t){var r=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};e.exports=c;var i=n(134),o=n(138);n(7)(c,i);for(var s=r(o.prototype),a=0;a<s.length;a++){var u=s[a];c.prototype[u]||(c.prototype[u]=o.prototype[u])}function c(e){if(!(this instanceof c))return new c(e);i.call(this,e),o.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",l)))}function l(){this._writableState.ended||t.nextTick(h,this)}function h(e){e.end()}Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(c.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(c.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(c.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})}).call(this,n(16))},function(e,t,n){"use strict";n.d(t,"b",(function(){return i.E})),n.d(t,"a",(function(){return o.t})),n.d(t,"c",(function(){return ge}));var r,i=n(0),o=n(1),s=(n(39),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.name="poll",t}return Object(i.A)(t,e),t.prototype.init=function(t,n){var r=n.sdkState,o=n.dispatcher,s=n.sessionManager,a=n.requestQueue,u=n.logger,c=n.onlineDetector,l=n.cacheContext;e.prototype.init.call(this,t,{sdkState:r,dispatcher:o,sessionManager:s,requestQueue:a,logger:u,onlineDetector:c,cacheContext:l}),this._manager=new i.M(t,{sdkState:r,dispatcher:o,sessionManager:s,requestQueue:a,logger:u,onlineDetector:c,cacheContext:l})},t.prototype.create=function(e){return Object(i.Gb)(this,void 0,void 0,(function(){var t;return Object(i.Rb)(this,(function(n){return t=Object(i.Vb)(Object(i.Vb)({},i.W),e),Object(i.hc)(Object(i.X)(t)).throw(i.fc.invalidParameters),[2,this._manager.create(t)]}))}))},t.prototype.get=function(e){return Object(i.Gb)(this,void 0,void 0,(function(){var t;return Object(i.Rb)(this,(function(n){return t=Object(i.Vb)(Object(i.Vb)({},i.Y),e),Object(i.hc)(Object(i.Z)(t)).throw(i.fc.invalidParameters),[2,this._manager.get(t)]}))}))},t.prototype.getOption=function(e){return Object(i.Gb)(this,void 0,void 0,(function(){var t;return Object(i.Rb)(this,(function(n){return t=Object(i.Vb)(Object(i.Vb)({},i.ab),e),Object(i.hc)(Object(i.bb)(t)).throw(i.fc.invalidParameters),[2,this._manager.getOption(t)]}))}))},t.prototype.buildPollFromSerializedData=function(e){return this._manager.buildPollFromSerializedData(e)},t}(i.V)),a=n(6),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.A)(t,e),t}(i.cb),c=function(e){this.key=e.key,this.url=e.url},l=function(e){this.id=e.id,this.name=e.name,this.url=e.url,this.emojis=e.emojis?e.emojis.map((function(e){return new c(e)})):[]},h=function(e){this.emojiHash=e.emoji_hash||"",this.emojiCategories=e.emoji_categories?e.emoji_categories.map((function(e){return new l(e)})):[]},d={profileImage:void 0,profileUrl:void 0,nickname:void 0},f=function(e){return{v2:e.commitSchema([{collectionName:o.o,keyName:o.A,index:[Object(a.k)(a.c.LATEST_LAST_MESSAGE),Object(a.k)(a.c.CHRONOLOGICAL),Object(a.k)(a.c.CHANNEL_NAME_ALPHABETICAL)]},{collectionName:o.jb,keyName:o.kb,index:[Object(o.ob)(o.n.CHANNEL_LATEST),Object(o.ob)(o.n.NEWEST_CHILD_MESSAGE)]},{collectionName:o.lb,keyName:o.mb,index:[Object(o.ob)(o.n.CHANNEL_LATEST),Object(o.ob)(o.n.NEWEST_CHILD_MESSAGE)]},{collectionName:o.nb,keyName:o.pb}]),v3:e.commitSchema([{collectionName:o.qb,keyName:o.rb,index:[["-lastMessageUpdatedAt","-createdAt","syncIndex"]]}])}},p=function(e,t){return function(n,r){switch(n){case 1:e.clear().then((function(){t.clear().then((function(){f(e).v2.then((function(){return r()})).catch((function(e){return r(e)}))})).catch((function(e){return r(e)}))})).catch((function(e){return r(e)}));break;case 2:f(e).v3.then((function(){return r()})).catch((function(e){return r(e)}));break;default:r()}}},m=function(){return"undefined"!=typeof document?document.visibilityState:"visible"},g=function(e){function t(t){var n=t.getVisibilityState,r=void 0===n?m:n,i=t.initialState,o=void 0===i?"visible":i,s=t.isEnabled,a=void 0===s||s,u=t.pauseCheckDelay,c=void 0===u?3e4:u,l=e.call(this)||this;return l._pauseCheckDelay=3e4,l._currentState="visible",l._getVisibilityState=r,l._pauseCheckDelay=c,l._currentState=o,l._isEnabled=a,l._boundToggleState=l._toggleState.bind(l),l}return Object(i.A)(t,e),Object.defineProperty(t.prototype,"currentState",{get:function(){return this._currentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isAvailable",{get:function(){return"undefined"!=typeof window&&!!window.addEventListener&&!!window.removeEventListener},enumerable:!1,configurable:!0}),t.prototype._toggleState=function(){var e=this,t=this._getVisibilityState();"hidden"!==t?"hidden"===this._currentState&&(this._pauseDelayTimer&&(clearTimeout(this._pauseDelayTimer),this._pauseDelayTimer=void 0),this.dispatch("resume")):"hidden"!==this._currentState&&(this._pauseDelayTimer=setTimeout((function(){e._pauseDelayTimer=void 0,e.dispatch("pause")}),this._pauseCheckDelay)),this._currentState=t},t.prototype.start=function(){this._isEnabled&&this.isAvailable&&(this._boundToggleState=this._toggleState.bind(this),window.addEventListener("visibilitychange",this._boundToggleState,{capture:!0}))},t.prototype.stop=function(){this._isEnabled&&this.isAvailable&&this._boundToggleState&&window.removeEventListener("visibilitychange",this._boundToggleState,{capture:!0})},t}(i.e),b=function(){function e(e){var t=e.logger,n=e.connectionDelegate,r=void 0===n?null:n,i=this;this._onlineWorker=function(){var e;return null===(e=i.connectionDelegate)||void 0===e?void 0:e.reconnect()},this._offlineWorker=function(){var e;return null===(e=i.connectionDelegate)||void 0===e?void 0:e.disconnect()},this.unsubscribes=[],this._onlineListener=function(e){if(i.isAvailableOnWeb)return window.addEventListener("online",e),function(){return window.removeEventListener("online",e,!1)}},this._offlineListener=function(e){if(i.isAvailableOnWeb)return window.addEventListener("offline",e),function(){return window.removeEventListener("offline",e,!1)}},this.logger=t,r&&(this.connectionDelegate=r)}return Object.defineProperty(e.prototype,"isAvailableOnWeb",{get:function(){return"undefined"!=typeof window&&!!window.addEventListener&&"ononline"in window&&"onoffline"in window&&"undefined"!=typeof navigator&&void 0!==navigator.onLine},enumerable:!1,configurable:!0}),e.prototype.setOnlineListener=function(e){Boolean(e)&&"function"==typeof e&&(this._onlineListener=e)},e.prototype.setOfflineListener=function(e){Boolean(e)&&"function"==typeof e&&(this._offlineListener=e)},e.prototype.start=function(){this.unsubscribes=[this._onlineListener(this._onlineWorker),this._offlineListener(this._offlineWorker)]},e.prototype.stop=function(){var e=this;this.unsubscribes.forEach((function(t){try{null==t||t()}catch(t){e.logger.warn(t.message)}})),this.unsubscribes=[]},e.prototype.isOnline=function(){return Object(i.Gb)(this,void 0,void 0,(function(){return Object(i.Rb)(this,(function(e){return this.isAvailableOnWeb?[2,navigator.onLine]:[2,new Promise((function(e){fetch("https://www.google.com",{method:i.a.GET,mode:"no-cors"}).then((function(){return e(!0)})).catch((function(){return e(!1)}))}))]}))}))},e}(),v=function(e){function t(t){var n=t.userId,r=t.nickname,o=t.profileUrl,s=t.profileImage,a=t.preferredLanguages,u=e.call(this)||this;return u.method=i.a.PUT,u.path="".concat(i.Sb,"/").concat(encodeURIComponent(n)),u.params=Object(i.Tb)(Object(i.jc)({nickname:r,profile_url:o,profile_file:s,preferred_languages:a})),u}return Object(i.A)(t,e),t}(i.Ub),y=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.user=new i.u(t,Object(i.Vb)({},n)),r}return Object(i.A)(t,e),t}(i.Wb),_=function(e){function t(t){var n=t.userId,r=t.token,o=e.call(this)||this;return o.method=i.a.POST,o.path="".concat(i.Sb,"/").concat(encodeURIComponent(n),"/push/apns"),o.params={apns_device_token:r,always_push:!0},o}return Object(i.A)(t,e),t}(i.Ub);r=i.Wb,Object(i.A)((function(e,t){var n=r.call(this,e,t)||this;return n.token=t.token,n.type=t.type?i.p[t.type.toLowerCase()]:i.p.UNKNOWN,n.user=new i.u(e,t.user),n}),r);var w=function(e){function t(t){var n=t.userId,r=t.token,o=e.call(this)||this;return o.method=i.a.POST,o.path="".concat(i.Sb,"/").concat(encodeURIComponent(n),"/push/gcm"),o.params={gcm_reg_token:r,always_push:!0},o}return Object(i.A)(t,e),t}(i.Ub);!function(e){Object(i.A)((function(t,n){var r=e.call(this,t,n)||this;return r.token=n.token,r.type=n.type?i.p[n.type.toLowerCase()]:i.p.UNKNOWN,r.user=new i.u(t,n.user),r}),e)}(i.Wb);var E=function(e){function t(t){var n=t.userId,r=t.token,o=e.call(this)||this;return o.method=i.a.DELETE,o.path="".concat(i.Sb,"/").concat(encodeURIComponent(n),"/push/apns/").concat(encodeURIComponent(r)),o}return Object(i.A)(t,e),t}(i.Ub);!function(e){Object(i.A)((function(t,n){var r=e.call(this,t,n)||this;return r.token=n.token,r.user=new i.u(t,n.user),r.lastDeletedAt=n.device_token_last_deleted_at,r}),e)}(i.Wb);var S=function(e){function t(t){var n=t.userId,r=t.token,o=e.call(this)||this;return o.method=i.a.DELETE,o.path="".concat(i.Sb,"/").concat(encodeURIComponent(n),"/push/gcm/").concat(encodeURIComponent(r)),o}return Object(i.A)(t,e),t}(i.Ub);!function(e){Object(i.A)((function(t,n){var r=e.call(this,t,n)||this;return r.token=n.token,r.user=new i.u(t,n.user),r.lastDeletedAt=n.device_token_last_deleted_at,r}),e)}(i.Wb);var M=function(e){function t(t){var n=t.userId,r=e.call(this)||this;return r.method=i.a.DELETE,r.path="".concat(i.Sb,"/").concat(encodeURIComponent(n),"/push/apns"),r}return Object(i.A)(t,e),t}(i.Ub);!function(e){Object(i.A)((function(t,n){var r=e.call(this,t,n)||this;return r.type=n.type?i.p[n.type.toLowerCase()]:i.p.UNKNOWN,r.user=new i.u(t,n.user),r.lastDeletedAt=n.device_token_last_deleted_at,r}),e)}(i.Wb);var O=function(e){function t(t){var n=t.userId,r=e.call(this)||this;return r.method=i.a.DELETE,r.path="".concat(i.Sb,"/").concat(encodeURIComponent(n),"/push/gcm"),r}return Object(i.A)(t,e),t}(i.Ub);!function(e){Object(i.A)((function(t,n){var r=e.call(this,t,n)||this;return r.type=n.type?i.p[n.type.toLowerCase()]:i.p.UNKNOWN,r.user=new i.u(t,n.user),r.lastDeletedAt=n.device_token_last_deleted_at,r}),e)}(i.Wb);var A=function(e){function t(t){var n=t.userId,r=t.type,o=t.token,s=t.ts,a=e.call(this)||this;return a.method=i.a.GET,a.path="".concat(i.Sb,"/").concat(encodeURIComponent(n),"/push/").concat(encodeURIComponent(r),"/device_tokens"),a.params={created_ts:s,token:o},a}return Object(i.A)(t,e),t}(i.Ub),C=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.pushTokens={type:n.type?i.p[n.type.toLowerCase()]:i.p.UNKNOWN,deviceTokens:n.device_tokens,hasMore:n.has_more,token:n.token},r}return Object(i.A)(t,e),t}(i.Wb),T=function(e){function t(t){var n=t.userId,r=e.call(this)||this;return r.method=i.a.GET,r.path="".concat(i.Sb,"/").concat(encodeURIComponent(n),"/channel_invitation_preference"),r}return Object(i.A)(t,e),t}(i.Ub),k=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.autoAccept=n.auto_accept,r}return Object(i.A)(t,e),t}(i.Wb),x=function(e){function t(t){var n=t.userId,r=t.willAutoAccept,o=e.call(this)||this;return o.method=i.a.PUT,o.path="".concat(i.Sb,"/").concat(encodeURIComponent(n),"/channel_invitation_preference"),o.params={auto_accept:r},o}return Object(i.A)(t,e),t}(i.Ub),j=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.autoAccept=n.auto_accept,r}return Object(i.A)(t,e),t}(i.Wb),I=function(e){function t(t){var n=t.userId,r=e.call(this)||this;return r.method=i.a.GET,r.path="".concat(i.Sb,"/").concat(encodeURIComponent(n),"/push_preference"),r}return Object(i.A)(t,e),t}(i.Ub),R=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.preference={doNotDisturbOn:n.do_not_disturb,startHour:n.start_hour,startMin:n.start_min,endHour:n.end_hour,endMin:n.end_min,timezone:n.timezone},r}return Object(i.A)(t,e),t}(i.Wb),N=function(e){function t(t){var n=t.userId,r=t.doNotDisturbOn,o=t.startHour,s=t.startMin,a=t.endHour,u=t.endMin,c=t.timezone,l=e.call(this)||this;return l.method=i.a.PUT,l.path="".concat(i.Sb,"/").concat(encodeURIComponent(n),"/push_preference"),l.params={do_not_disturb:r,start_hour:o,start_min:s,end_hour:a,end_min:u,timezone:c},l}return Object(i.A)(t,e),t}(i.Ub),P=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.preference={doNotDisturbOn:n.do_not_disturb,startHour:n.start_hour,startMin:n.start_min,endHour:n.end_hour,endMin:n.end_min,timezone:n.timezone},r}return Object(i.A)(t,e),t}(i.Wb),D=function(e){function t(t){var n=t.userId,r=e.call(this)||this;return r.method=i.a.GET,r.path="".concat(i.Sb,"/").concat(encodeURIComponent(n),"/push_preference"),r}return Object(i.A)(t,e),t}(i.Ub),U=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.snoozePeriod={isSnoozeOn:n.snooze_enabled},"number"==typeof n.snooze_start_ts&&(r.snoozePeriod.startTs=n.snooze_start_ts),"number"==typeof n.snooze_end_ts&&(r.snoozePeriod.endTs=n.snooze_end_ts),r}return Object(i.A)(t,e),t}(i.Wb),L=function(e){function t(t){var n=t.userId,r=t.snoozeOn,o=t.startTs,s=t.endTs,a=e.call(this)||this;return a.method=i.a.PUT,a.path="".concat(i.Sb,"/").concat(encodeURIComponent(n),"/push_preference"),a.params={snooze_enabled:r,snooze_start_ts:o,snooze_end_ts:s},a}return Object(i.A)(t,e),t}(i.Ub),F=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.snoozePeriod={isSnoozeOn:n.snooze_enabled},"number"==typeof n.snooze_start_ts&&(r.snoozePeriod.startTs=n.snooze_start_ts),"number"==typeof n.snooze_end_ts&&(r.snoozePeriod.endTs=n.snooze_end_ts),r}return Object(i.A)(t,e),t}(i.Wb),B=function(e){function t(t){var n=t.userId,r=t.blockedUserId,o=e.call(this)||this;return o.method=i.a.POST,o.path="".concat(i.Sb,"/").concat(encodeURIComponent(n),"/block"),o.params={target_id:r},o}return Object(i.A)(t,e),t}(i.Ub);!function(e){Object(i.A)((function(t,n){var r=e.call(this,t,n)||this;return r.user=new i.u(t,n),r}),e)}(i.Wb);var H=function(e){function t(t){var n=t.userId,r=t.unblockedUserId,o=e.call(this)||this;return o.method=i.a.DELETE,o.path="".concat(i.Sb,"/").concat(encodeURIComponent(n),"/block/").concat(encodeURIComponent(r)),o}return Object(i.A)(t,e),t}(i.Ub);!function(e){Object(i.A)((function(){return null!==e&&e.apply(this,arguments)||this}),e)}(i.Wb);var q=function(e){function t(t){var n=t.userId,r=e.call(this)||this;return r.method=i.a.GET,r.path="".concat(i.Sb,"/").concat(encodeURIComponent(n),"/push_preference"),r}return Object(i.A)(t,e),t}(i.Ub),V=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.pushTriggerOption=n.push_trigger_option,r}return Object(i.A)(t,e),t}(i.Wb),G=function(e){function t(t){var n=t.userId,r=t.pushTriggerOption,o=e.call(this)||this;return o.method=i.a.PUT,o.path="".concat(i.Sb,"/").concat(encodeURIComponent(n),"/push_preference"),o.params={push_trigger_option:r},o}return Object(i.A)(t,e),t}(i.Ub),z=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.pushTriggerOption=n.push_trigger_option,r}return Object(i.A)(t,e),t}(i.Wb),W=function(e){function t(t){var n=t.userId,r=e.call(this)||this;return r.method=i.a.GET,r.path="".concat(i.Sb,"/").concat(encodeURIComponent(n),"/push/template"),r}return Object(i.A)(t,e),t}(i.Ub),K=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.name=n.name,r}return Object(i.A)(t,e),t}(i.Wb),Y=function(e){function t(t){var n=t.userId,r=t.templateName,o=e.call(this)||this;return o.method=i.a.PUT,o.path="".concat(i.Sb,"/").concat(encodeURIComponent(n),"/push/template"),o.params={name:r},o}return Object(i.A)(t,e),t}(i.Ub),Q=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.name=n.name,r}return Object(i.A)(t,e),t}(i.Wb),J=function(e){function t(t){var n=t.userId,r=t.token,o=e.call(this)||this;return o.method=i.a.GET,o.path="".concat(i.Sb,"/").concat(encodeURIComponent(n),"/friends/changelogs"),o.params={token:r},o}return Object(i.A)(t,e),t}(i.Ub),Z=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.changelogs={addedUsers:n.added.map((function(e){return new i.u(t,e)})),updatedUsers:n.updated.map((function(e){return new i.u(t,e)})),deletedUserIds:n.deleted,hasMore:n.has_more,token:n.next},r}return Object(i.A)(t,e),t}(i.Wb),$=function(e){function t(t){var n=t.userId,r=t.discoveries,o=e.call(this)||this;return o.method=i.a.PUT,o.path="".concat(i.Sb,"/").concat(encodeURIComponent(n),"/friend_discoveries"),o.params={friend_discoveries:r.map((function(e){return{friend_discovery_key:e.friendDiscoveryKey,friend_name:e.friendName}}))},o}return Object(i.A)(t,e),t}(i.Ub),X=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.friendDiscoveryRequestId=n.friend_discovery_request_id,r}return Object(i.A)(t,e),t}(i.Wb),ee=function(e){function t(t){var n=t.userId,r=t.discoveryKeys,o=e.call(this)||this;return o.method=i.a.DELETE,o.path="".concat(i.Sb,"/").concat(encodeURIComponent(n),"/friend_discoveries"),o.params={friend_discovery_keys:r},o}return Object(i.A)(t,e),t}(i.Ub);!function(e){Object(i.A)((function(){return null!==e&&e.apply(this,arguments)||this}),e)}(i.Wb);var te=function(e){function t(t){var n=t.userId,r=t.userIds,o=e.call(this)||this;return o.method=i.a.POST,o.path="".concat(i.Sb,"/").concat(encodeURIComponent(n),"/friends"),o.params={user_ids:r},o}return Object(i.A)(t,e),t}(i.Ub),ne=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.users=n.users.map((function(e){return new i.u(t,e)})),r}return Object(i.A)(t,e),t}(i.Wb),re=function(e){function t(t){var n=t.userId,r=t.userIds,o=e.call(this)||this;return o.method=i.a.DELETE,o.path="".concat(i.Sb,"/").concat(encodeURIComponent(n),"/friends"),o.params={user_ids:r},o}return Object(i.A)(t,e),t}(i.Ub);!function(e){Object(i.A)((function(){return null!==e&&e.apply(this,arguments)||this}),e)}(i.Wb);var ie=function(e){function t(t){var n=t.userId,r=e.call(this)||this;return r.method=i.a.GET,r.path="".concat(i.Sb,"/").concat(n,"/allow_friend_discovery"),r.params={},r}return Object(i.A)(t,e),t}(i.Ub),oe=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.allowFriendDiscovery=n.allow_friend_discovery,r}return Object(i.A)(t,e),t}(i.Wb),se=function(e){function t(t){var n=t.userId,r=t.allowFriendDiscovery,o=e.call(this)||this;return o.method=i.a.PUT,o.path="".concat(i.Sb,"/").concat(n,"/allow_friend_discovery"),o.params={allow_friend_discovery:r},o}return Object(i.A)(t,e),t}(i.Ub);!function(e){Object(i.A)((function(){return null!==e&&e.apply(this,arguments)||this}),e)}(i.Wb);var ae,ue=function(e){function t(){var t=e.call(this)||this;return t.method=i.a.GET,t.path=i.Yb,t}return Object(i.A)(t,e),t}(i.Ub),ce=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.emojiContainer=new h(n),r}return Object(i.A)(t,e),t}(i.Wb),le=function(e){function t(t){var n=t.categoryId,r=e.call(this)||this;return r.method=i.a.GET,r.path="".concat(i.Yb,"/").concat(n),r}return Object(i.A)(t,e),t}(i.Ub),he=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.emojiCategory=new l(n),r}return Object(i.A)(t,e),t}(i.Wb),de=function(e){function t(t){var n=t.key,r=e.call(this)||this;return r.method=i.a.GET,r.path="".concat(i.Zb,"/").concat(n),r}return Object(i.A)(t,e),t}(i.Ub),fe=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.emoji=new c(n),r}return Object(i.A)(t,e),t}(i.Wb),pe=function(e){function t(){var t=e.call(this)||this;return t.method=i.a.GET,t.path="".concat(i.ac),t}return Object(i.A)(t,e),t}(i.Ub),me=function(e){function t(t,n){var r,i=this,o=null!=n?n:{};return(i=e.call(this,t,n)||this).uikitConfiguration={string:JSON.stringify(o),json:o},i.updatedAt=null!==(r=null==n?void 0:n.updated_at)&&void 0!==r?r:0,i}return Object(i.A)(t,e),t}(i.Wb),ge=function(){function e(e,t,n){var r=this;this._storeInitialized=!1,this._iid=e,this.options=t;var o=i.v.of(e),s=o.sdkState,c=o.cacheContext,l=o.dispatcher,h=o.sessionManager,d=o.requestQueue,f=o.logger,p=o.userEventHandlers,m=o.appStateToggleEnabled;this._onlineDetector=new b({logger:f,connectionDelegate:{reconnect:function(){var t=i.v.of(e),n=t.sdkState,r=t.connectionManager,o=t.sessionManager;o.session.hasSession?"foreground"===n.appState&&r.resetAndReconnect():r.connect(o.session.authToken),l.dispatch(new u)},disconnect:function(){i.v.of(e).connectionManager.disconnect()}}});var v=new a.a(e,{localCacheEnabled:c.localCacheEnabled,dispatcher:l,sdkState:s,logger:f});n.forEach((function(t){t.init(e,{sdkState:s,cacheContext:c,dispatcher:l,sessionManager:h,requestQueue:d,logger:f,onlineDetector:r._onlineDetector}),r[t.name]=t})),this._appStateChangeDetector=new g({isEnabled:m}),this._appStateChangeDetector.on("resume",(function(){f.debug("the page resumes from freeze"),r.setForegroundState()})).on("pause",(function(){f.debug("the page freezes"),r.setBackgroundState()})),l.on((function(t){var n;if(t instanceof i.nc)t.stateType===i.oc.CONNECTED&&v.processNonAutoResendRegisteredPendingMessages();else if(t instanceof i.w){if("USEV"===t.code){var o=t.as(a.g).event;if(o.category===a.h.FRIEND_DISCOVERED){var u=a.i.getDataAsFriendDiscoveredEvent(e,o).friendDiscoveries;Object(i.b)((function(){return Object(i.Gb)(r,void 0,void 0,(function(){return Object(i.Rb)(this,(function(e){return[2,p.forEach((function(e){e.onFriendsDiscovered&&e.onFriendsDiscovered(u)}))]}))}))}))}}}else if(t instanceof i.d){var l=i.v.of(r._iid).subscribedUnreadMessageCount,h=!1,d=t.ts;if("number"==typeof d&&d>l.ts){if(l.all!==t.all&&(h=!0),l.all=t.all>=0?t.all:0,t.customTypes)for(var m in t.customTypes)l.customTypes[m]!==t.customTypes[m]&&(h=!0),l.customTypes[m]=t.customTypes[m];h=h&&l.ts>0,l.ts=d}h&&Object(i.b)((function(){return Object(i.Gb)(r,void 0,void 0,(function(){return Object(i.Rb)(this,(function(e){return[2,p.forEach((function(e){e.onTotalUnreadMessageCountChanged&&e.onTotalUnreadMessageCountChanged({groupChannelCount:l.all,feedChannelCount:l.feed,customTypeUnreadCount:l.customTypes}),e.onTotalUnreadMessageCountUpdated&&e.onTotalUnreadMessageCountUpdated(l.all,l.customTypes)}))]}))}))}))}else t instanceof i.f?(c.preference.set(r._getUserProfileCacheKey(s.userId),i.g.payloadify(t.userProfile)),(null===(n=t.userProfile.appInfo.notificationInfo)||void 0===n?void 0:n.isEnabled)&&c.preference.set(Object(i.h)(r.appId),{value:!0})):t instanceof i.i&&t.error&&t.error.isSessionInvalidatedError&&(f.debug("session revoked."),r.disconnect())}))}return e.init=function(t){var n=t.appId,r=t.appVersion,a=t.modules,u=void 0===a?[]:a,c=t.options,l=void 0===c?new i.s:c,h=t.debugMode,d=void 0!==h&&h,f=t.customApiHost,p=t.customWebSocketHost,m=t.newInstance,g=void 0!==m&&m,b=t.logLevel,v=t.localCacheEnabled,y=void 0!==v&&v,_=t.localCacheConfig,w=void 0===_?new i.l:_,E=t.localCacheEncryption,S=t.useAsyncStorageStore,M=void 0===S?null:S,O=t.appStateToggleEnabled,A=void 0===O||O;if(!ae||g){var C="su-".concat(Object(i.bc)()),T=null!=E?E:{encrypt:function(e){return e},decrypt:function(e){return e}},k=new o.sb({encryption:T});d||(k=Object(i.cc)()?M?new o.b({AsyncStorage:M,encryption:T}):new o.sb({encryption:T}):new o.j({encryption:T})),new i.v(C,{appId:n,appVersion:r,options:l,apiHost:null!=f?f:"https://api-".concat(n,".sendbird.com"),websocketHost:null!=p?p:"wss://ws-".concat(n,".sendbird.com"),store:k,encryption:T,logLevel:b,localCacheEnabled:y,localCacheConfig:w,debugMode:d,appStateToggleEnabled:A});var x=[new o.tb,new s],j=new e(C,l,Object(i.dc)(Object(i.dc)([],Object(i.ec)(u),!1),Object(i.ec)(x),!1));return ae||(ae=j),j}return ae},Object.defineProperty(e,"instance",{get:function(){return ae},enumerable:!1,configurable:!0}),Object.defineProperty(e,"version",{get:function(){return i.kc},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"appId",{get:function(){return i.v.of(this._iid).sdkState.appId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"appInfo",{get:function(){var e=i.v.of(this._iid).appInfo;return null!=e?e:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"appVersion",{get:function(){var e;return null!==(e=i.v.of(this._iid).sdkState.appVersion)&&void 0!==e?e:""},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"debugMode",{get:function(){return!!i.v.of(this._iid).debugMode},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"logLevel",{get:function(){return i.v.of(this._iid).logger.level},set:function(e){i.v.of(this._iid).logger.level=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isCacheEnabled",{get:function(){return i.v.of(this._iid).cacheContext.localCacheEnabled},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"localCacheConfig",{get:function(){var e=i.v.of(this._iid).cacheContext;return e.localCacheEnabled?e.localCacheConfig:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ekey",{get:function(){return i.v.of(this._iid).sessionManager.ekey},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentUser",{get:function(){var e;return null!==(e=i.v.of(this._iid).sessionManager.currentUser)&&void 0!==e?e:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"connectionState",{get:function(){var e=i.v.of(this._iid).connectionManager;return e.isConnected?i.c.OPEN:e.isConnecting?i.c.CONNECTING:i.c.CLOSED},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastConnectedAt",{get:function(){var e=i.v.of(this._iid),t=e.connectedAt;return e.connectionManager.isConnected?t:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fcmPushToken",{get:function(){var e;return null!==(e=this._fcmPushToken)&&void 0!==e?e:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"apnsPushToken",{get:function(){var e;return null!==(e=this._apnsPushToken)&&void 0!==e?e:null},enumerable:!1,configurable:!0}),e.prototype._getNestDBVersion=function(){return 3},e.prototype._getCurrentPreferenceVersion=function(){return 1},e.prototype._getPreferenceCacheKey=function(e){return"sendbird@".concat(this.appId,"/").concat(e,".pref")},e.prototype._getUserProfileCacheKey=function(e){return"sendbird@".concat(this.appId,"/").concat(e,".profile")},e.prototype.getMemoryStoreForDebugging=function(){var e=i.v.of(this._iid),t=e.debugMode,n=e.cacheContext;if(t)return n.store instanceof o.sb?n.store:null;throw i.fc.debugModeRequired},e.prototype.addExtension=function(e,t){var n=i.v.of(this._iid).sdkState;["sb_uikit","sb_syncmanager","device-os-platform"].indexOf(e)>-1&&n.extensions&&(n.extensions[e]=t)},e.prototype.addSendbirdExtensions=function(e,t,n){var r,o,s=i.v.of(this._iid),a=s.logger,u=s.sdkState,c=new RegExp(i.j);if(0===e.length)return a.debug("sb.addSendbirdExtensions() has failed because the given sendbirdExtensions is empty."),!1;if(e.find((function(e){return!c.test(e.version)})))return a.debug("sb.addSendbirdExtensions() has failed because the given version did not satisfy the SemVer specification."),!1;if(n)try{for(var l=Object(i.gc)(Object.entries(n)),h=l.next();!h.done;h=l.next()){var d=Object(i.ec)(h.value,2),f=d[0],p=d[1];if(/&|=/.test(f)||/&|=/.test(p))return a.debug("sb.addSendbirdExtensions() has failed because the given customData includes at least one invalid character: = or &."),!1}}catch(e){r={error:e}}finally{try{h&&!h.done&&(o=l.return)&&o.call(l)}finally{if(r)throw r.error}}return u.sendbirdRuntimeEnvironment={sendbirdExtensions:e,deviceOS:t,customData:n},!0},e.prototype.setOnlineListener=function(e){this._onlineDetector.setOnlineListener(e)},e.prototype.setOfflineListener=function(e){this._onlineDetector.setOfflineListener(e)},e.prototype._safeInitializeStore=function(e){return Object(i.Gb)(this,void 0,void 0,(function(){var t;return Object(i.Rb)(this,(function(n){switch(n.label){case 0:t=i.v.of(this._iid).cacheContext,n.label=1;case 1:return n.trys.push([1,3,,5]),[4,t.store.init(e)];case 2:return n.sent(),this._storeInitialized=!0,[3,5];case 3:return n.sent(),t.replaceStore(new o.sb),[4,this._safeInitializeStore(e)];case 4:return n.sent(),[3,5];case 5:return[2]}}))}))},e.prototype.initializeCache=function(e){return Object(i.Gb)(this,void 0,void 0,(function(){var t,n,r,s,u,c,l,h;return Object(i.Rb)(this,(function(d){switch(d.label){case 0:if(t=i.v.of(this._iid),n=t.sdkState,r=t.cacheContext,s=t.dispatcher,u=t.logger,n.userId&&n.userId===e)return[3,9];if(c="sendbird@".concat(n.appId,"/").concat(e,".db"),!r.localCacheEnabled)return[3,7];d.label=1;case 1:return d.trys.push([1,4,,6]),r.nestdb&&r.nestdb.state!==o.zb.CLOSED&&r.nestdb.name===c?[3,3]:((l=r.nestdb=new o.wb({name:"sendbird@".concat(n.appId,"/").concat(e,".db"),version:this._getNestDBVersion(),store:r.store})).on("upgrade",p(l,r.store)),l.on("storeReplaced",(function(e){r.replaceStore(e),r.localCacheEnabled=!1,l.on("upgrade",p(l,r.store))})),[4,l.open()]);case 2:d.sent(),this._storeInitialized=!0,s.dispatch(new a.b(this._iid,{userId:e})),d.label=3;case 3:return n.userId=e,[3,6];case 4:return h=d.sent(),u.warn("Nest DB Open Failed. ",h),[4,this._safeInitializeStore(c)];case 5:throw d.sent(),n.userId=e,i.fc.databaseError;case 6:return[3,9];case 7:return[4,this._safeInitializeStore(c)];case 8:d.sent(),n.userId=e,d.label=9;case 9:return[2]}}))}))},e.prototype.getCacheDataSize=function(){return Object(i.Gb)(this,void 0,void 0,(function(){var e;return Object(i.Rb)(this,(function(t){switch(t.label){case 0:return(e=i.v.of(this._iid).cacheContext).localCacheEnabled&&e.nestdb?[4,e.nestdb.estimateUsage()]:[3,2];case 1:return[2,t.sent()];case 2:return[2,0]}}))}))},e.prototype.clearCachedData=function(){return Object(i.Gb)(this,void 0,void 0,(function(){var e;return Object(i.Rb)(this,(function(t){switch(t.label){case 0:return(e=i.v.of(this._iid).cacheContext).localCacheEnabled&&e.nestdb?[4,e.nestdb.clear()]:[3,2];case 1:t.sent(),t.label=2;case 2:return this._storeInitialized?[4,e.preference.clear()]:[3,4];case 3:t.sent(),t.label=4;case 4:return[2]}}))}))},e.prototype.clearCachedMessages=function(e){return Object(i.Gb)(this,void 0,void 0,(function(){var t,n,r=this;return Object(i.Rb)(this,(function(s){switch(s.label){case 0:return Object(i.hc)(Object(i.k)("string",e)).throw(i.fc.invalidParameters),t=o.xb.of(this._iid),n=o.yb.of(this._iid),t&&n?[4,Promise.all(e.map((function(e){return Object(i.Gb)(r,void 0,void 0,(function(){return Object(i.Rb)(this,(function(r){switch(r.label){case 0:return[4,t.removeMessagesOfChannel(e)];case 1:return r.sent(),[4,n.removeMessagesOfChannel(e)];case 2:return r.sent(),[2]}}))}))})))]:[3,2];case 1:s.sent(),s.label=2;case 2:return[2]}}))}))},e.prototype._ready=function(e,t,n){return void 0===n&&(n={}),Object(i.Gb)(this,void 0,void 0,(function(){var r,o,s,u,c,l,h,d;return Object(i.Rb)(this,(function(f){switch(f.label){case 0:return Object(i.hc)(Object(i.B)("string",e)&&Object(i.B)("string",t,!0)).throw(i.fc.invalidParameters),r=i.v.of(this._iid),o=r.sdkState,s=r.cacheContext,u=r.connectionManager,c=r.statLogCollector,l=n.errorForOtherUser,o.userId?[3,2]:[4,u.logout()];case 1:case 3:return f.sent(),[3,5];case 2:return o.userId===e?[3,5]:l?[3,4]:[4,u.logout()];case 4:throw l;case 5:return f.trys.push([5,7,,8]),[4,this.initializeCache(e)];case 6:return f.sent(),i.v.of(this._iid).dispatcher.dispatch(new a.e),[3,8];case 7:return f.sent(),h=i.v.of(this._iid).logger,s.localCacheEnabled=!1,h.warn("Cache initialization failed - cache is not available."),[3,8];case 8:return[4,s.preference.init(this._getPreferenceCacheKey(e),this._getCurrentPreferenceVersion())];case 9:return f.sent(),[4,s.preference.get(this._getUserProfileCacheKey(e))];case 10:return(d=f.sent())&&new i.g(this._iid,d).apply(),[4,c.init("sendbird@".concat(o.appId,"/").concat(e,".statlog"))];case 11:return f.sent(),[2]}}))}))},e.prototype.authenticateFeed=function(e,t){return Object(i.Gb)(this,void 0,void 0,(function(){var n,r,o;return Object(i.Rb)(this,(function(s){switch(s.label){case 0:return n=i.v.of(this._iid),r=n.sessionManager,o=n.connectionManager,[4,this._ready(e,t,{errorForOtherUser:o.isConnected?i.fc.alreadyConnectedAsAnotherUser:void 0})];case 1:return s.sent(),r.session.hasLessServiceScopeThan([i.m.FEED])?[4,r.authenticateFeed(e,t)]:[3,3];case 2:s.sent(),s.label=3;case 3:return[2,this.currentUser]}}))}))},e.prototype.connect=function(e,t){return Object(i.Gb)(this,void 0,void 0,(function(){return Object(i.Rb)(this,(function(n){switch(n.label){case 0:return[4,this._ready(e,t)];case 1:n.sent(),n.label=2;case 2:return n.trys.push([2,,4,5]),[4,i.v.of(this._iid).connectionManager.connect(t)];case 3:return n.sent(),[3,5];case 4:return this._onlineDetector.start(),this._appStateChangeDetector.start(),[7];case 5:return[2,this.currentUser]}}))}))},e.prototype.reconnect=function(){var e=i.v.of(this._iid),t=e.connectionManager,n=e.sdkState,r=e.sessionManager.session.hasSession;return r&&(this._appStateChangeDetector.start(),this._onlineDetector.start(),t.resetAndReconnect().then((function(){n.appState="foreground"})).catch((function(){}))),r},e.prototype.disconnect=function(){return Object(i.Gb)(this,void 0,void 0,(function(){var e,t,n;return Object(i.Rb)(this,(function(r){switch(r.label){case 0:return e=i.v.of(this._iid),t=e.connectionManager,n=e.requestQueue,e.sessionManager,this._appStateChangeDetector.stop(),this._onlineDetector.stop(),n.cancelAll(),[4,t.logout()];case 1:return r.sent(),[4,this.clearCachedData()];case 2:return r.sent(),[2]}}))}))},e.prototype.disconnectWebSocket=function(){return Object(i.Gb)(this,void 0,void 0,(function(){var e,t,n;return Object(i.Rb)(this,(function(r){switch(r.label){case 0:return e=i.v.of(this._iid),t=e.connectionManager,n=e.requestQueue,this._appStateChangeDetector.stop(),this._onlineDetector.stop(),n.cancelAll(),[4,t.disconnectWebSocket()];case 1:return r.sent(),[2]}}))}))},e.prototype.setBackgroundState=function(){var e=i.v.of(this._iid),t=e.connectionManager,n=e.sdkState,r=e.logger;"foreground"===n.appState&&(n.appState="background",r.debug("going background state"),t.background())},e.prototype.setForegroundState=function(){var e=i.v.of(this._iid),t=e.connectionManager,n=e.sdkState,r=e.dispatcher,o=e.logger;"background"===n.appState&&(n.appState="foreground",o.debug("going foreground state"),t.resetAndReconnect(),r.dispatch(new u))},e.prototype.setSessionHandler=function(e){Object(i.hc)(e instanceof o.r).throw(i.fc.invalidParameters),i.v.of(this._iid).sessionManager.handler=e},e.prototype.addUserEventHandler=function(e,t){Object(i.hc)(Object(i.B)("string",e)&&t instanceof o.t).throw(i.fc.invalidParameters),i.v.of(this._iid).userEventHandlers.set(e,t)},e.prototype.removeUserEventHandler=function(e){i.v.of(this._iid).userEventHandlers.delete(e)},e.prototype.removeAllUserEventHandler=function(){i.v.of(this._iid).userEventHandlers.clear()},e.prototype.addConnectionHandler=function(e,t){Object(i.hc)(Object(i.B)("string",e)&&t instanceof o.d).throw(i.fc.invalidParameters),i.v.of(this._iid).connectionHandlers.set(e,t)},e.prototype.removeConnectionHandler=function(e){i.v.of(this._iid).connectionHandlers.delete(e)},e.prototype.removeAllConnectionHandler=function(){i.v.of(this._iid).connectionHandlers.clear()},e.prototype.createApplicationUserListQuery=function(e){return void 0===e&&(e={}),new o.ub(this._iid,e)},e.prototype.createBlockedUserListQuery=function(e){return void 0===e&&(e={}),new o.c(this._iid,e)},e.prototype.createFriendListQuery=function(e){return void 0===e&&(e={}),new o.g(this._iid,e)},e.prototype.createMessageSearchQuery=function(e){return new o.vb(this._iid,e)},e.prototype.createPollListQuery=function(e){return new i.ic(this._iid,Object(i.Vb)({},e))},e.prototype.createPollVoterListQuery=function(e){return new i.lc(this._iid,Object(i.Vb)({},e))},e.prototype.buildUserFromSerializedData=function(e){var t=Object(i.mc)(e);return new i.u(this._iid,i.u.payloadify(t))},e.prototype.updateCurrentUserInfo=function(e){return void 0===e&&(e={}),Object(i.Gb)(this,void 0,void 0,(function(){var t,n,r,o,s,a,u;return Object(i.Rb)(this,(function(c){switch(c.label){case 0:return t=Object(i.Vb)(Object(i.Vb)({},d),e),Object(i.hc)(function(e){return Object(i.Xb)(e.profileImage,!0)&&Object(i.B)("string",e.profileUrl,!0)&&Object(i.B)("string",e.nickname,!0)}(t)).throw(i.fc.invalidParameters),this.currentUser?(n=i.v.of(this._iid),r=n.sdkState,o=n.requestQueue,s=new v(Object(i.Vb)({userId:r.userId},t)),[4,o.send(s)]):[3,2];case 1:return a=c.sent(),u=a.as(y).user,this.currentUser&&(t.nickname&&(this.currentUser.nickname=u.nickname),(t.profileUrl||t.profileImage)&&(this.currentUser.plainProfileUrl=u.profileUrl)),[2,u];case 2:throw i.fc.connectionRequired}}))}))},e.prototype.updateCurrentUserInfoWithPreferredLanguages=function(e){return Object(i.Gb)(this,void 0,void 0,(function(){var t,n,r,o,s,a;return Object(i.Rb)(this,(function(u){switch(u.label){case 0:return Object(i.hc)(Object(i.k)("string",e)).throw(i.fc.invalidParameters),this.currentUser?(t=i.v.of(this._iid),n=t.sdkState,r=t.requestQueue,o=new v({userId:n.userId,preferredLanguages:e}),[4,r.send(o)]):[3,2];case 1:return s=u.sent(),a=s.as(y).user,this.currentUser&&(this.currentUser.preferredLanguages=a.preferredLanguages),[2,a];case 2:throw i.fc.connectionRequired}}))}))},e.prototype.registerFCMPushTokenForCurrentUser=function(e){return Object(i.Gb)(this,void 0,void 0,(function(){var t,n,r,o,s,a=this;return Object(i.Rb)(this,(function(u){switch(u.label){case 0:if(Object(i.hc)(Object(i.B)("string",e)).throw(i.fc.invalidParameters),!this.currentUser)return[3,6];u.label=1;case 1:return u.trys.push([1,4,,5]),t=i.v.of(this._iid),n=t.sessionManager,r=t.sdkState,o=t.requestQueue,n.hasDeviceToken(i.p.FCM,e)?[2,i.n.SUCCESS]:(s=new w({userId:r.userId,token:e}),[4,o.send(s)]);case 2:return u.sent(),[4,Object(i.o)((function(){return Object(i.Gb)(a,void 0,void 0,(function(){return Object(i.Rb)(this,(function(t){switch(t.label){case 0:return n.setDeviceToken(i.p.FCM,e),[4,n.saveDeviceToken()];case 1:return t.sent(),[2]}}))}))}))];case 3:return u.sent(),this._fcmPushToken="",[2,i.n.SUCCESS];case 4:return u.sent(),[2,i.n.ERROR];case 5:return[3,7];case 6:return this._fcmPushToken=e,[2,i.n.PENDING];case 7:return[2]}}))}))},e.prototype.unregisterFCMPushTokenForCurrentUser=function(e){return Object(i.Gb)(this,void 0,void 0,(function(){var t,n,r,o,s,a,u=this;return Object(i.Rb)(this,(function(c){switch(c.label){case 0:if(Object(i.hc)(Object(i.B)("string",e)).throw(i.fc.invalidParameters),!this.currentUser)return[3,6];c.label=1;case 1:return c.trys.push([1,4,,5]),t=i.v.of(this._iid),n=t.sessionManager,r=t.sdkState,o=t.requestQueue,s=new S({userId:r.userId,token:e}),[4,o.send(s)];case 2:return a=c.sent().lastDeletedAt,[4,Object(i.o)((function(){return Object(i.Gb)(u,void 0,void 0,(function(){return Object(i.Rb)(this,(function(t){switch(t.label){case 0:return n.unsetDeviceToken(i.p.FCM,e),n.setDeviceTokenDeletedAt(a),[4,n.saveDeviceToken()];case 1:return t.sent(),[2]}}))}))}))];case 3:return c.sent(),this._fcmPushToken="",[2,i.n.SUCCESS];case 4:return c.sent(),[2,i.n.ERROR];case 5:return[3,7];case 6:return this._fcmPushToken=e,[2,i.n.PENDING];case 7:return[2]}}))}))},e.prototype.unregisterFCMPushTokenAllForCurrentUser=function(){return Object(i.Gb)(this,void 0,void 0,(function(){var e,t,n,r,o,s,a=this;return Object(i.Rb)(this,(function(u){switch(u.label){case 0:return this.currentUser?(e=i.v.of(this._iid),t=e.sessionManager,n=e.sdkState,r=e.requestQueue,o=new O({userId:n.userId}),[4,r.send(o)]):[3,3];case 1:return s=u.sent().lastDeletedAt,[4,Object(i.o)((function(){return Object(i.Gb)(a,void 0,void 0,(function(){return Object(i.Rb)(this,(function(e){switch(e.label){case 0:return t.unsetDeviceTokens(i.p.FCM),t.setDeviceTokenDeletedAt(s),[4,t.saveDeviceToken()];case 1:return e.sent(),[2]}}))}))}))];case 2:u.sent(),u.label=3;case 3:return[2]}}))}))},e.prototype.registerAPNSPushTokenForCurrentUser=function(e){return Object(i.Gb)(this,void 0,void 0,(function(){var t,n,r,o,s,a=this;return Object(i.Rb)(this,(function(u){switch(u.label){case 0:if(Object(i.hc)(Object(i.B)("string",e)).throw(i.fc.invalidParameters),!this.currentUser)return[3,6];u.label=1;case 1:return u.trys.push([1,4,,5]),t=i.v.of(this._iid),n=t.sessionManager,r=t.sdkState,o=t.requestQueue,n.hasDeviceToken(i.p.APNS,e)?[2,i.n.SUCCESS]:(s=new _({userId:r.userId,token:e}),[4,o.send(s)]);case 2:return u.sent(),[4,Object(i.o)((function(){return Object(i.Gb)(a,void 0,void 0,(function(){return Object(i.Rb)(this,(function(t){switch(t.label){case 0:return n.setDeviceToken(i.p.APNS,e),[4,n.saveDeviceToken()];case 1:return t.sent(),[2]}}))}))}))];case 3:return u.sent(),this._apnsPushToken="",[2,i.n.SUCCESS];case 4:return u.sent(),[2,i.n.ERROR];case 5:return[3,7];case 6:return this._apnsPushToken=e,[2,i.n.PENDING];case 7:return[2]}}))}))},e.prototype.unregisterAPNSPushTokenForCurrentUser=function(e){return Object(i.Gb)(this,void 0,void 0,(function(){var t,n,r,o,s,a,u=this;return Object(i.Rb)(this,(function(c){switch(c.label){case 0:if(Object(i.hc)(Object(i.B)("string",e)).throw(i.fc.invalidParameters),!this.currentUser)return[3,6];c.label=1;case 1:return c.trys.push([1,4,,5]),t=i.v.of(this._iid),n=t.sessionManager,r=t.sdkState,o=t.requestQueue,s=new E({userId:r.userId,token:e}),[4,o.send(s)];case 2:return a=c.sent().lastDeletedAt,[4,Object(i.o)((function(){return Object(i.Gb)(u,void 0,void 0,(function(){return Object(i.Rb)(this,(function(t){switch(t.label){case 0:return n.unsetDeviceToken(i.p.APNS,e),n.setDeviceTokenDeletedAt(a),[4,n.saveDeviceToken()];case 1:return t.sent(),[2]}}))}))}))];case 3:return c.sent(),this._apnsPushToken="",[2,i.n.SUCCESS];case 4:return c.sent(),[2,i.n.ERROR];case 5:return[3,7];case 6:return this._apnsPushToken=e,[2,i.n.PENDING];case 7:return[2]}}))}))},e.prototype.unregisterAPNSPushTokenAllForCurrentUser=function(){return Object(i.Gb)(this,void 0,void 0,(function(){var e,t,n,r,o,s,a=this;return Object(i.Rb)(this,(function(u){switch(u.label){case 0:return this.currentUser?(e=i.v.of(this._iid),t=e.sessionManager,n=e.sdkState,r=e.requestQueue,o=new M({userId:n.userId}),[4,r.send(o)]):[3,3];case 1:return s=u.sent().lastDeletedAt,[4,Object(i.o)((function(){return Object(i.Gb)(a,void 0,void 0,(function(){return Object(i.Rb)(this,(function(e){switch(e.label){case 0:return t.unsetDeviceTokens(i.p.APNS),t.setDeviceTokenDeletedAt(s),[4,t.saveDeviceToken()];case 1:return e.sent(),[2]}}))}))}))];case 2:u.sent(),u.label=3;case 3:return[2]}}))}))},e.prototype.getChannelInvitationPreference=function(){return Object(i.Gb)(this,void 0,void 0,(function(){var e,t,n,r;return Object(i.Rb)(this,(function(o){switch(o.label){case 0:return e=i.v.of(this._iid),t=e.sdkState,n=e.requestQueue,r=new T({userId:t.userId}),[4,n.send(r)];case 1:return[2,{autoAccept:o.sent().as(k).autoAccept}]}}))}))},e.prototype.setChannelInvitationPreference=function(e){return Object(i.Gb)(this,void 0,void 0,(function(){var t,n,r,o;return Object(i.Rb)(this,(function(s){switch(s.label){case 0:return Object(i.hc)(Object(i.B)("boolean",e)).throw(i.fc.invalidParameters),t=i.v.of(this._iid),n=t.sdkState,r=t.requestQueue,o=new x({userId:n.userId,willAutoAccept:e}),[4,r.send(o)];case 1:return[2,{autoAccept:s.sent().as(j).autoAccept}]}}))}))},e.prototype.getDoNotDisturb=function(){return Object(i.Gb)(this,void 0,void 0,(function(){var e,t,n,r;return Object(i.Rb)(this,(function(o){switch(o.label){case 0:return e=i.v.of(this._iid),t=e.sdkState,n=e.requestQueue,r=new I({userId:t.userId}),[4,n.send(r)];case 1:return[2,o.sent().as(R).preference]}}))}))},e.prototype.setDoNotDisturb=function(e,t,n,r,o,s){return void 0===t&&(t=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===o&&(o=0),void 0===s&&(s=""),Object(i.Gb)(this,void 0,void 0,(function(){var a,u,c,l;return Object(i.Rb)(this,(function(h){switch(h.label){case 0:return Object(i.hc)(Object(i.B)("boolean",e)&&Object(i.B)("number",t)&&Object(i.B)("number",n)&&Object(i.B)("number",r)&&Object(i.B)("number",o)&&Object(i.B)("string",s)).throw(i.fc.invalidParameters),a=i.v.of(this._iid),u=a.sdkState,c=a.requestQueue,l=new N({userId:u.userId,doNotDisturbOn:e,startHour:t,startMin:n,endHour:r,endMin:o,timezone:s}),[4,c.send(l)];case 1:return[2,h.sent().as(P).preference]}}))}))},e.prototype.getSnoozePeriod=function(){return Object(i.Gb)(this,void 0,void 0,(function(){var e,t,n,r;return Object(i.Rb)(this,(function(o){switch(o.label){case 0:return e=i.v.of(this._iid),t=e.sdkState,n=e.requestQueue,r=new D({userId:t.userId}),[4,n.send(r)];case 1:return[2,o.sent().as(U).snoozePeriod]}}))}))},e.prototype.setSnoozePeriod=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=0),Object(i.Gb)(this,void 0,void 0,(function(){var r,o,s,a;return Object(i.Rb)(this,(function(u){switch(u.label){case 0:return Object(i.hc)(Object(i.B)("boolean",e)&&Object(i.B)("number",t)&&Object(i.B)("number",n)).throw(i.fc.invalidParameters),r=i.v.of(this._iid),o=r.sdkState,s=r.requestQueue,a=new L({userId:o.userId,snoozeOn:e,startTs:t,endTs:n}),[4,s.send(a)];case 1:return[2,u.sent().as(F).snoozePeriod]}}))}))},e.prototype.getMyPushTokensByToken=function(e,t){return Object(i.Gb)(this,void 0,void 0,(function(){var n,r,o,s,a,u,c,l,h,d,f,p;return Object(i.Rb)(this,(function(m){switch(m.label){case 0:return Object(i.hc)(Object(i.B)("string",e)&&Object(i.q)(i.p,t)).throw(i.fc.invalidParameters),n=i.v.of(this._iid),r=n.sdkState,o=n.requestQueue,s=n.sessionManager,a=new A({userId:r.userId,type:t,token:e}),[4,o.send(a)];case 1:u=m.sent(),c=u.as(C).pushTokens;try{for(l=Object(i.gc)(c.deviceTokens),h=l.next();!h.done;h=l.next())d=h.value,s.setDeviceToken(c.type,d)}catch(e){f={error:e}}finally{try{h&&!h.done&&(p=l.return)&&p.call(l)}finally{if(f)throw f.error}}return[4,s.saveDeviceToken()];case 2:return m.sent(),[2,c]}}))}))},e.prototype.getPushTriggerOption=function(){return Object(i.Gb)(this,void 0,void 0,(function(){var e,t,n,r;return Object(i.Rb)(this,(function(o){switch(o.label){case 0:return e=i.v.of(this._iid),t=e.sdkState,n=e.requestQueue,r=new q({userId:t.userId}),[4,n.send(r)];case 1:return[2,o.sent().as(V).pushTriggerOption]}}))}))},e.prototype.setPushTriggerOption=function(e){return Object(i.Gb)(this,void 0,void 0,(function(){var t,n,r,o;return Object(i.Rb)(this,(function(s){switch(s.label){case 0:return Object(i.hc)(Object(i.q)(i.r,e)).throw(i.fc.invalidParameters),t=i.v.of(this._iid),n=t.sdkState,r=t.requestQueue,o=new G({userId:n.userId,pushTriggerOption:e}),[4,r.send(o)];case 1:return[2,s.sent().as(z).pushTriggerOption]}}))}))},e.prototype.getPushTemplate=function(){return Object(i.Gb)(this,void 0,void 0,(function(){var e,t,n,r;return Object(i.Rb)(this,(function(o){switch(o.label){case 0:return e=i.v.of(this._iid),t=e.sdkState,n=e.requestQueue,r=new W({userId:t.userId}),[4,n.send(r)];case 1:return[2,o.sent().as(K).name]}}))}))},e.prototype.setPushTemplate=function(e){return Object(i.Gb)(this,void 0,void 0,(function(){var t,n,r,o;return Object(i.Rb)(this,(function(s){switch(s.label){case 0:return Object(i.hc)(Object(i.q)(i.t,e)).throw(i.fc.invalidParameters),t=i.v.of(this._iid),n=t.sdkState,r=t.requestQueue,o=new Y({userId:n.userId,templateName:e}),[4,r.send(o)];case 1:return[2,s.sent().as(Q).name]}}))}))},e.prototype.blockUser=function(e){return Object(i.Gb)(this,void 0,void 0,(function(){var t,n,r,o;return Object(i.Rb)(this,(function(s){switch(s.label){case 0:return Object(i.hc)(e instanceof i.u||Object(i.B)("string",e)).throw(i.fc.invalidParameters),t=i.v.of(this._iid),n=t.sdkState,r=t.requestQueue,o=new B({userId:n.userId,blockedUserId:e instanceof i.u?e.userId:e}),[4,r.send(o)];case 1:return s.sent(),[2]}}))}))},e.prototype.blockUserWithUserId=function(e){return Object(i.Gb)(this,void 0,void 0,(function(){return Object(i.Rb)(this,(function(t){return[2,this.blockUser(e)]}))}))},e.prototype.unblockUser=function(e){return Object(i.Gb)(this,void 0,void 0,(function(){var t,n,r,o;return Object(i.Rb)(this,(function(s){switch(s.label){case 0:return Object(i.hc)(e instanceof i.u||Object(i.B)("string",e)).throw(i.fc.invalidParameters),t=i.v.of(this._iid),n=t.sdkState,r=t.requestQueue,o=new H({userId:n.userId,unblockedUserId:e instanceof i.u?e.userId:e}),[4,r.send(o)];case 1:return s.sent(),[2]}}))}))},e.prototype.unblockUserWithUserId=function(e){return Object(i.Gb)(this,void 0,void 0,(function(){return Object(i.Rb)(this,(function(t){return[2,this.unblockUser(e)]}))}))},e.prototype.getFriendChangeLogsByToken=function(e){return Object(i.Gb)(this,void 0,void 0,(function(){var t,n,r,o;return Object(i.Rb)(this,(function(s){switch(s.label){case 0:return Object(i.hc)(Object(i.B)("string",e)).throw(i.fc.invalidParameters),t=i.v.of(this._iid),n=t.sdkState,r=t.requestQueue,o=new J({userId:n.userId,token:e}),[4,r.send(o)];case 1:return[2,s.sent().as(Z).changelogs]}}))}))},e.prototype.getAllowFriendDiscovery=function(){return Object(i.Gb)(this,void 0,void 0,(function(){var e,t,n,r;return Object(i.Rb)(this,(function(o){switch(o.label){case 0:return e=i.v.of(this._iid),t=e.sdkState,n=e.requestQueue,r=new ie({userId:t.userId}),[4,n.send(r)];case 1:return[2,o.sent().as(oe).allowFriendDiscovery]}}))}))},e.prototype.setAllowFriendDiscovery=function(e){return Object(i.Gb)(this,void 0,void 0,(function(){var t,n,r,o;return Object(i.Rb)(this,(function(s){switch(s.label){case 0:return Object(i.hc)(Object(i.B)("boolean",e)).throw(i.fc.invalidParameters),t=i.v.of(this._iid),n=t.sdkState,r=t.requestQueue,o=new se({userId:n.userId,allowFriendDiscovery:e}),[4,r.send(o)];case 1:return s.sent(),[2,e]}}))}))},e.prototype.uploadFriendDiscoveries=function(e){return Object(i.Gb)(this,void 0,void 0,(function(){var t,n,r,o;return Object(i.Rb)(this,(function(s){switch(s.label){case 0:return t=i.v.of(this._iid),n=t.sdkState,r=t.requestQueue,o=new $({userId:n.userId,discoveries:e}),[4,r.send(o)];case 1:return[2,s.sent().as(X).friendDiscoveryRequestId]}}))}))},e.prototype.deleteFriendDiscovery=function(e){return Object(i.Gb)(this,void 0,void 0,(function(){return Object(i.Rb)(this,(function(t){return[2,this.deleteFriendDiscoveries([e])]}))}))},e.prototype.deleteFriendDiscoveries=function(e){return Object(i.Gb)(this,void 0,void 0,(function(){var t,n,r,o;return Object(i.Rb)(this,(function(s){switch(s.label){case 0:return Object(i.hc)(Object(i.k)("string",e)).throw(i.fc.invalidParameters),t=i.v.of(this._iid),n=t.sdkState,r=t.requestQueue,o=new ee({userId:n.userId,discoveryKeys:e}),[4,r.send(o)];case 1:return s.sent(),[2]}}))}))},e.prototype.addFriends=function(e){return Object(i.Gb)(this,void 0,void 0,(function(){var t,n,r,o;return Object(i.Rb)(this,(function(s){switch(s.label){case 0:return Object(i.hc)(Object(i.k)("string",e)).throw(i.fc.invalidParameters),t=i.v.of(this._iid),n=t.sdkState,r=t.requestQueue,o=new te({userId:n.userId,userIds:e}),[4,r.send(o)];case 1:return[2,s.sent().as(ne).users]}}))}))},e.prototype.deleteFriend=function(e){return Object(i.Gb)(this,void 0,void 0,(function(){return Object(i.Rb)(this,(function(t){return[2,this.deleteFriends([e])]}))}))},e.prototype.deleteFriends=function(e){return Object(i.Gb)(this,void 0,void 0,(function(){var t,n,r,o;return Object(i.Rb)(this,(function(s){switch(s.label){case 0:return Object(i.hc)(Object(i.k)("string",e)).throw(i.fc.invalidParameters),t=i.v.of(this._iid),n=t.sdkState,r=t.requestQueue,o=new re({userId:n.userId,userIds:e}),[4,r.send(o)];case 1:return s.sent(),[2]}}))}))},e.prototype.getAllEmoji=function(){return Object(i.Gb)(this,void 0,void 0,(function(){var e,t;return Object(i.Rb)(this,(function(n){switch(n.label){case 0:return e=i.v.of(this._iid).requestQueue,t=new ue,[4,e.send(t)];case 1:return[2,n.sent().as(ce).emojiContainer]}}))}))},e.prototype.getEmojiCategory=function(e){return Object(i.Gb)(this,void 0,void 0,(function(){var t,n;return Object(i.Rb)(this,(function(r){switch(r.label){case 0:return t=i.v.of(this._iid).requestQueue,n=new le({categoryId:e}),[4,t.send(n)];case 1:return[2,r.sent().as(he).emojiCategory]}}))}))},e.prototype.getEmoji=function(e){return Object(i.Gb)(this,void 0,void 0,(function(){var t,n;return Object(i.Rb)(this,(function(r){switch(r.label){case 0:return t=i.v.of(this._iid).requestQueue,n=new de({key:e}),[4,t.send(n)];case 1:return[2,r.sent().as(fe).emoji]}}))}))},e.prototype.getUIKitConfiguration=function(){return Object(i.Gb)(this,void 0,void 0,(function(){var e,t,n;return Object(i.Rb)(this,(function(r){switch(r.label){case 0:return e=i.v.of(this._iid),Object(i.hc)(e.hasExtension("sb_uikit")).throw(i.fc.notSupportedError),t=e.requestQueue,n=new pe,[4,t.send(n)];case 1:return[2,r.sent().as(me).uikitConfiguration]}}))}))},e}()},function(e,t,n){(function(e){function n(e){return Object.prototype.toString.call(e)}t.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===n(e)},t.isBoolean=function(e){return"boolean"==typeof e},t.isNull=function(e){return null===e},t.isNullOrUndefined=function(e){return null==e},t.isNumber=function(e){return"number"==typeof e},t.isString=function(e){return"string"==typeof e},t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=function(e){return void 0===e},t.isRegExp=function(e){return"[object RegExp]"===n(e)},t.isObject=function(e){return"object"==typeof e&&null!==e},t.isDate=function(e){return"[object Date]"===n(e)},t.isError=function(e){return"[object Error]"===n(e)||e instanceof Error},t.isFunction=function(e){return"function"==typeof e},t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=e.isBuffer}).call(this,n(17).Buffer)},function(e,t,n){"use strict";var r=n(7),i=n(75),o=n(77),s=n(78),a=n(33);function u(e){a.call(this,"digest"),this._hash=e}r(u,a),u.prototype._update=function(e){this._hash.update(e)},u.prototype._final=function(){return this._hash.digest()},e.exports=function(e){return"md5"===(e=e.toLowerCase())?new i:"rmd160"===e||"ripemd160"===e?new o:new u(s(e))}},function(e,t,n){(function(t){e.exports=function(e,n){for(var r=Math.min(e.length,n.length),i=new t(r),o=0;o<r;++o)i[o]=e[o]^n[o];return i}}).call(this,n(17).Buffer)},function(e,t,n){"use strict";var r=n(27),i=n(24);function o(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}t.BlockHash=o,o.prototype.update=function(e,t){if(e=r.toArray(e,t),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){var n=(e=this.pending).length%this._delta8;this.pending=e.slice(e.length-n,e.length),0===this.pending.length&&(this.pending=null),e=r.join32(e,0,e.length-n,this.endian);for(var i=0;i<e.length;i+=this._delta32)this._update(e,i,i+this._delta32)}return this},o.prototype.digest=function(e){return this.update(this._pad()),i(null===this.pending),this._digest(e)},o.prototype._pad=function(){var e=this.pendingTotal,t=this._delta8,n=t-(e+this.padLength)%t,r=new Array(n+this.padLength);r[0]=128;for(var i=1;i<n;i++)r[i]=0;if(e<<=3,"big"===this.endian){for(var o=8;o<this.padLength;o++)r[i++]=0;r[i++]=0,r[i++]=0,r[i++]=0,r[i++]=0,r[i++]=e>>>24&255,r[i++]=e>>>16&255,r[i++]=e>>>8&255,r[i++]=255&e}else for(r[i++]=255&e,r[i++]=e>>>8&255,r[i++]=e>>>16&255,r[i++]=e>>>24&255,r[i++]=0,r[i++]=0,r[i++]=0,r[i++]=0,o=8;o<this.padLength;o++)r[i++]=0;return r}},function(e,t,n){"use strict";const r=n(7),i=n(91).Reporter,o=n(89).Buffer;function s(e,t){i.call(this,t),o.isBuffer(e)?(this.base=e,this.offset=0,this.length=e.length):this.error("Input not Buffer")}function a(e,t){if(Array.isArray(e))this.length=0,this.value=e.map((function(e){return a.isEncoderBuffer(e)||(e=new a(e,t)),this.length+=e.length,e}),this);else if("number"==typeof e){if(!(0<=e&&e<=255))return t.error("non-byte EncoderBuffer value");this.value=e,this.length=1}else if("string"==typeof e)this.value=e,this.length=o.byteLength(e);else{if(!o.isBuffer(e))return t.error("Unsupported type: "+typeof e);this.value=e,this.length=e.length}}r(s,i),t.DecoderBuffer=s,s.isDecoderBuffer=function(e){if(e instanceof s)return!0;return"object"==typeof e&&o.isBuffer(e.base)&&"DecoderBuffer"===e.constructor.name&&"number"==typeof e.offset&&"number"==typeof e.length&&"function"==typeof e.save&&"function"==typeof e.restore&&"function"==typeof e.isEmpty&&"function"==typeof e.readUInt8&&"function"==typeof e.skip&&"function"==typeof e.raw},s.prototype.save=function(){return{offset:this.offset,reporter:i.prototype.save.call(this)}},s.prototype.restore=function(e){const t=new s(this.base);return t.offset=e.offset,t.length=this.offset,this.offset=e.offset,i.prototype.restore.call(this,e.reporter),t},s.prototype.isEmpty=function(){return this.offset===this.length},s.prototype.readUInt8=function(e){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(e||"DecoderBuffer overrun")},s.prototype.skip=function(e,t){if(!(this.offset+e<=this.length))return this.error(t||"DecoderBuffer overrun");const n=new s(this.base);return n._reporterState=this._reporterState,n.offset=this.offset,n.length=this.offset+e,this.offset+=e,n},s.prototype.raw=function(e){return this.base.slice(e?e.offset:this.offset,this.length)},t.EncoderBuffer=a,a.isEncoderBuffer=function(e){if(e instanceof a)return!0;return"object"==typeof e&&"EncoderBuffer"===e.constructor.name&&"number"==typeof e.length&&"function"==typeof e.join},a.prototype.join=function(e,t){return e||(e=o.alloc(this.length)),t||(t=0),0===this.length||(Array.isArray(this.value)?this.value.forEach((function(n){n.join(e,t),t+=n.length})):("number"==typeof this.value?e[t]=this.value:"string"==typeof this.value?e.write(this.value,t):o.isBuffer(this.value)&&this.value.copy(e,t),t+=this.length)),e}},function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.r(t),n.d(t,"__DO_NOT_USE__ActionTypes",(function(){return o})),n.d(t,"applyMiddleware",(function(){return g})),n.d(t,"bindActionCreators",(function(){return h})),n.d(t,"combineReducers",(function(){return c})),n.d(t,"compose",(function(){return m})),n.d(t,"createStore",(function(){return a}));var r=n(97),i=function(){return Math.random().toString(36).substring(7).split("").join(".")},o={INIT:"@@redux/INIT"+i(),REPLACE:"@@redux/REPLACE"+i(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+i()}};function s(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function a(e,t,n){var i;if("function"==typeof t&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error("It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function.");if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error("Expected the enhancer to be a function.");return n(a)(e,t)}if("function"!=typeof e)throw new Error("Expected the reducer to be a function.");var u=e,c=t,l=[],h=l,d=!1;function f(){h===l&&(h=l.slice())}function p(){if(d)throw new Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return c}function m(e){if("function"!=typeof e)throw new Error("Expected the listener to be a function.");if(d)throw new Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api-reference/store#subscribelistener for more details.");var t=!0;return f(),h.push(e),function(){if(t){if(d)throw new Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api-reference/store#subscribelistener for more details.");t=!1,f();var n=h.indexOf(e);h.splice(n,1),l=null}}}function g(e){if(!s(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(d)throw new Error("Reducers may not dispatch actions.");try{d=!0,c=u(c,e)}finally{d=!1}for(var t=l=h,n=0;n<t.length;n++){(0,t[n])()}return e}function b(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");u=e,g({type:o.REPLACE})}function v(){var e,t=m;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new TypeError("Expected the observer to be an object.");function n(){e.next&&e.next(p())}return n(),{unsubscribe:t(n)}}})[r.a]=function(){return this},e}return g({type:o.INIT}),(i={dispatch:g,subscribe:m,getState:p,replaceReducer:b})[r.a]=v,i}function u(e,t){var n=t&&t.type;return"Given "+(n&&'action "'+String(n)+'"'||"an action")+', reducer "'+e+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}function c(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];0,"function"==typeof e[i]&&(n[i]=e[i])}var s,a=Object.keys(n);try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if(void 0===n(void 0,{type:o.INIT}))throw new Error('Reducer "'+t+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if(void 0===n(void 0,{type:o.PROBE_UNKNOWN_ACTION()}))throw new Error('Reducer "'+t+"\" returned undefined when probed with a random type. Don't try to handle "+o.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')}))}(n)}catch(e){s=e}return function(e,t){if(void 0===e&&(e={}),s)throw s;for(var r=!1,i={},o=0;o<a.length;o++){var c=a[o],l=n[c],h=e[c],d=l(h,t);if(void 0===d){var f=u(c,t);throw new Error(f)}i[c]=d,r=r||d!==h}return(r=r||a.length!==Object.keys(e).length)?i:e}}function l(e,t){return function(){return t(e.apply(this,arguments))}}function h(e,t){if("function"==typeof e)return l(e,t);if("object"!=typeof e||null===e)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===e?"null":typeof e)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');var n={};for(var r in e){var i=e[r];"function"==typeof i&&(n[r]=l(i,t))}return n}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(n,!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function g(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),r=function(){throw new Error("Dispatching while constructing your middleware is not allowed. Other middleware would not be applied to this dispatch.")},i={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},o=t.map((function(e){return e(i)}));return p({},n,{dispatch:r=m.apply(void 0,o)(n.dispatch)})}}}},function(e,t,n){e.exports=i;var r=n(36).EventEmitter;function i(){r.call(this)}n(7)(i,r),i.Readable=n(71),i.Writable=n(195),i.Duplex=n(196),i.Transform=n(197),i.PassThrough=n(198),i.Stream=i,i.prototype.pipe=function(e,t){var n=this;function i(t){e.writable&&!1===e.write(t)&&n.pause&&n.pause()}function o(){n.readable&&n.resume&&n.resume()}n.on("data",i),e.on("drain",o),e._isStdio||t&&!1===t.end||(n.on("end",a),n.on("close",u));var s=!1;function a(){s||(s=!0,e.end())}function u(){s||(s=!0,"function"==typeof e.destroy&&e.destroy())}function c(e){if(l(),0===r.listenerCount(this,"error"))throw e}function l(){n.removeListener("data",i),e.removeListener("drain",o),n.removeListener("end",a),n.removeListener("close",u),n.removeListener("error",c),e.removeListener("error",c),n.removeListener("end",l),n.removeListener("close",l),e.removeListener("close",l)}return n.on("error",c),e.on("error",c),n.on("end",l),n.on("close",l),e.on("close",l),e.emit("pipe",n),e}},function(e,t,n){"use strict";(function(t){void 0===t||!t.version||0===t.version.indexOf("v0.")||0===t.version.indexOf("v1.")&&0!==t.version.indexOf("v1.8.")?e.exports={nextTick:function(e,n,r,i){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var o,s,a=arguments.length;switch(a){case 0:case 1:return t.nextTick(e);case 2:return t.nextTick((function(){e.call(null,n)}));case 3:return t.nextTick((function(){e.call(null,n,r)}));case 4:return t.nextTick((function(){e.call(null,n,r,i)}));default:for(o=new Array(a-1),s=0;s<o.length;)o[s++]=arguments[s];return t.nextTick((function(){e.apply(null,o)}))}}}:e.exports=t}).call(this,n(16))},function(e,t,n){(function(e){var r=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++)n[t[r]]=Object.getOwnPropertyDescriptor(e,t[r]);return n},i=/%[sdj%]/g;t.format=function(e){if(!b(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(a(arguments[n]));return t.join(" ")}n=1;for(var r=arguments,o=r.length,s=String(e).replace(i,(function(e){if("%%"===e)return"%";if(n>=o)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return e}})),u=r[n];n<o;u=r[++n])m(u)||!_(u)?s+=" "+u:s+=" "+a(u);return s},t.deprecate=function(n,r){if(void 0!==e&&!0===e.noDeprecation)return n;if(void 0===e)return function(){return t.deprecate(n,r).apply(this,arguments)};var i=!1;return function(){if(!i){if(e.throwDeprecation)throw new Error(r);e.traceDeprecation?console.trace(r):console.error(r),i=!0}return n.apply(this,arguments)}};var o,s={};function a(e,n){var r={seen:[],stylize:c};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),p(n)?r.showHidden=n:n&&t._extend(r,n),v(r.showHidden)&&(r.showHidden=!1),v(r.depth)&&(r.depth=2),v(r.colors)&&(r.colors=!1),v(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=u),l(r,e,r.depth)}function u(e,t){var n=a.styles[t];return n?"["+a.colors[n][0]+"m"+e+"["+a.colors[n][1]+"m":e}function c(e,t){return e}function l(e,n,r){if(e.customInspect&&n&&S(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(r,e);return b(i)||(i=l(e,i,r)),i}var o=function(e,t){if(v(t))return e.stylize("undefined","undefined");if(b(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}if(g(t))return e.stylize(""+t,"number");if(p(t))return e.stylize(""+t,"boolean");if(m(t))return e.stylize("null","null")}(e,n);if(o)return o;var s=Object.keys(n),a=function(e){var t={};return e.forEach((function(e,n){t[e]=!0})),t}(s);if(e.showHidden&&(s=Object.getOwnPropertyNames(n)),E(n)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return h(n);if(0===s.length){if(S(n)){var u=n.name?": "+n.name:"";return e.stylize("[Function"+u+"]","special")}if(y(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(w(n))return e.stylize(Date.prototype.toString.call(n),"date");if(E(n))return h(n)}var c,_="",M=!1,O=["{","}"];(f(n)&&(M=!0,O=["[","]"]),S(n))&&(_=" [Function"+(n.name?": "+n.name:"")+"]");return y(n)&&(_=" "+RegExp.prototype.toString.call(n)),w(n)&&(_=" "+Date.prototype.toUTCString.call(n)),E(n)&&(_=" "+h(n)),0!==s.length||M&&0!=n.length?r<0?y(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special"):(e.seen.push(n),c=M?function(e,t,n,r,i){for(var o=[],s=0,a=t.length;s<a;++s)T(t,String(s))?o.push(d(e,t,n,r,String(s),!0)):o.push("");return i.forEach((function(i){i.match(/^\d+$/)||o.push(d(e,t,n,r,i,!0))})),o}(e,n,r,a,s):s.map((function(t){return d(e,n,r,a,t,M)})),e.seen.pop(),function(e,t,n){if(e.reduce((function(e,t){return t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1];return n[0]+t+" "+e.join(", ")+" "+n[1]}(c,_,O)):O[0]+_+O[1]}function h(e){return"["+Error.prototype.toString.call(e)+"]"}function d(e,t,n,r,i,o){var s,a,u;if((u=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?a=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(a=e.stylize("[Setter]","special")),T(r,i)||(s="["+i+"]"),a||(e.seen.indexOf(u.value)<0?(a=m(n)?l(e,u.value,null):l(e,u.value,n-1)).indexOf("\n")>-1&&(a=o?a.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+a.split("\n").map((function(e){return"   "+e})).join("\n")):a=e.stylize("[Circular]","special")),v(s)){if(o&&i.match(/^\d+$/))return a;(s=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+a}function f(e){return Array.isArray(e)}function p(e){return"boolean"==typeof e}function m(e){return null===e}function g(e){return"number"==typeof e}function b(e){return"string"==typeof e}function v(e){return void 0===e}function y(e){return _(e)&&"[object RegExp]"===M(e)}function _(e){return"object"==typeof e&&null!==e}function w(e){return _(e)&&"[object Date]"===M(e)}function E(e){return _(e)&&("[object Error]"===M(e)||e instanceof Error)}function S(e){return"function"==typeof e}function M(e){return Object.prototype.toString.call(e)}function O(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(n){if(v(o)&&(o=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).NODE_DEBUG||""),n=n.toUpperCase(),!s[n])if(new RegExp("\\b"+n+"\\b","i").test(o)){var r=e.pid;s[n]=function(){var e=t.format.apply(t,arguments);console.error("%s %d: %s",n,r,e)}}else s[n]=function(){};return s[n]},t.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=f,t.isBoolean=p,t.isNull=m,t.isNullOrUndefined=function(e){return null==e},t.isNumber=g,t.isString=b,t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=v,t.isRegExp=y,t.isObject=_,t.isDate=w,t.isError=E,t.isFunction=S,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=n(199);var A=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function C(){var e=new Date,t=[O(e.getHours()),O(e.getMinutes()),O(e.getSeconds())].join(":");return[e.getDate(),A[e.getMonth()],t].join(" ")}function T(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){console.log("%s - %s",C(),t.format.apply(t,arguments))},t.inherits=n(200),t._extend=function(e,t){if(!t||!_(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e};var k="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function x(e,t){if(!e){var n=new Error("Promise was rejected with a falsy value");n.reason=e,e=n}return t(e)}t.promisify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(k&&e[k]){var t;if("function"!=typeof(t=e[k]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,k,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,n,r=new Promise((function(e,r){t=e,n=r})),i=[],o=0;o<arguments.length;o++)i.push(arguments[o]);i.push((function(e,r){e?n(e):t(r)}));try{e.apply(this,i)}catch(e){n(e)}return r}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),k&&Object.defineProperty(t,k,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,r(e))},t.promisify.custom=k,t.callbackify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');function n(){for(var n=[],r=0;r<arguments.length;r++)n.push(arguments[r]);var i=n.pop();if("function"!=typeof i)throw new TypeError("The last argument must be of type Function");var o=this,s=function(){return i.apply(o,arguments)};t.apply(this,n).then((function(t){e.nextTick(s,null,t)}),(function(t){e.nextTick(x,t,s)}))}return Object.setPrototypeOf(n,Object.getPrototypeOf(t)),Object.defineProperties(n,r(t)),n}}).call(this,n(16))},function(e,t,n){var r=n(8).Buffer;function i(e){r.isBuffer(e)||(e=r.from(e));for(var t=e.length/4|0,n=new Array(t),i=0;i<t;i++)n[i]=e.readUInt32BE(4*i);return n}function o(e){for(;0<e.length;e++)e[0]=0}function s(e,t,n,r,i){for(var o,s,a,u,c=n[0],l=n[1],h=n[2],d=n[3],f=e[0]^t[0],p=e[1]^t[1],m=e[2]^t[2],g=e[3]^t[3],b=4,v=1;v<i;v++)o=c[f>>>24]^l[p>>>16&255]^h[m>>>8&255]^d[255&g]^t[b++],s=c[p>>>24]^l[m>>>16&255]^h[g>>>8&255]^d[255&f]^t[b++],a=c[m>>>24]^l[g>>>16&255]^h[f>>>8&255]^d[255&p]^t[b++],u=c[g>>>24]^l[f>>>16&255]^h[p>>>8&255]^d[255&m]^t[b++],f=o,p=s,m=a,g=u;return o=(r[f>>>24]<<24|r[p>>>16&255]<<16|r[m>>>8&255]<<8|r[255&g])^t[b++],s=(r[p>>>24]<<24|r[m>>>16&255]<<16|r[g>>>8&255]<<8|r[255&f])^t[b++],a=(r[m>>>24]<<24|r[g>>>16&255]<<16|r[f>>>8&255]<<8|r[255&p])^t[b++],u=(r[g>>>24]<<24|r[f>>>16&255]<<16|r[p>>>8&255]<<8|r[255&m])^t[b++],[o>>>=0,s>>>=0,a>>>=0,u>>>=0]}var a=[0,1,2,4,8,16,32,64,128,27,54],u=function(){for(var e=new Array(256),t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;for(var n=[],r=[],i=[[],[],[],[]],o=[[],[],[],[]],s=0,a=0,u=0;u<256;++u){var c=a^a<<1^a<<2^a<<3^a<<4;c=c>>>8^255&c^99,n[s]=c,r[c]=s;var l=e[s],h=e[l],d=e[h],f=257*e[c]^16843008*c;i[0][s]=f<<24|f>>>8,i[1][s]=f<<16|f>>>16,i[2][s]=f<<8|f>>>24,i[3][s]=f,f=16843009*d^65537*h^257*l^16843008*s,o[0][c]=f<<24|f>>>8,o[1][c]=f<<16|f>>>16,o[2][c]=f<<8|f>>>24,o[3][c]=f,0===s?s=a=1:(s=l^e[e[e[d^l]]],a^=e[e[a]])}return{SBOX:n,INV_SBOX:r,SUB_MIX:i,INV_SUB_MIX:o}}();function c(e){this._key=i(e),this._reset()}c.blockSize=16,c.keySize=32,c.prototype.blockSize=c.blockSize,c.prototype.keySize=c.keySize,c.prototype._reset=function(){for(var e=this._key,t=e.length,n=t+6,r=4*(n+1),i=[],o=0;o<t;o++)i[o]=e[o];for(o=t;o<r;o++){var s=i[o-1];o%t==0?(s=s<<8|s>>>24,s=u.SBOX[s>>>24]<<24|u.SBOX[s>>>16&255]<<16|u.SBOX[s>>>8&255]<<8|u.SBOX[255&s],s^=a[o/t|0]<<24):t>6&&o%t==4&&(s=u.SBOX[s>>>24]<<24|u.SBOX[s>>>16&255]<<16|u.SBOX[s>>>8&255]<<8|u.SBOX[255&s]),i[o]=i[o-t]^s}for(var c=[],l=0;l<r;l++){var h=r-l,d=i[h-(l%4?0:4)];c[l]=l<4||h<=4?d:u.INV_SUB_MIX[0][u.SBOX[d>>>24]]^u.INV_SUB_MIX[1][u.SBOX[d>>>16&255]]^u.INV_SUB_MIX[2][u.SBOX[d>>>8&255]]^u.INV_SUB_MIX[3][u.SBOX[255&d]]}this._nRounds=n,this._keySchedule=i,this._invKeySchedule=c},c.prototype.encryptBlockRaw=function(e){return s(e=i(e),this._keySchedule,u.SUB_MIX,u.SBOX,this._nRounds)},c.prototype.encryptBlock=function(e){var t=this.encryptBlockRaw(e),n=r.allocUnsafe(16);return n.writeUInt32BE(t[0],0),n.writeUInt32BE(t[1],4),n.writeUInt32BE(t[2],8),n.writeUInt32BE(t[3],12),n},c.prototype.decryptBlock=function(e){var t=(e=i(e))[1];e[1]=e[3],e[3]=t;var n=s(e,this._invKeySchedule,u.INV_SUB_MIX,u.INV_SBOX,this._nRounds),o=r.allocUnsafe(16);return o.writeUInt32BE(n[0],0),o.writeUInt32BE(n[3],4),o.writeUInt32BE(n[2],8),o.writeUInt32BE(n[1],12),o},c.prototype.scrub=function(){o(this._keySchedule),o(this._invKeySchedule),o(this._key)},e.exports.AES=c},function(e,t,n){var r=n(8).Buffer,i=n(75);e.exports=function(e,t,n,o){if(r.isBuffer(e)||(e=r.from(e,"binary")),t&&(r.isBuffer(t)||(t=r.from(t,"binary")),8!==t.length))throw new RangeError("salt should be Buffer with 8 byte length");for(var s=n/8,a=r.alloc(s),u=r.alloc(o||0),c=r.alloc(0);s>0||o>0;){var l=new i;l.update(c),l.update(e),t&&l.update(t),c=l.digest();var h=0;if(s>0){var d=a.length-s;h=Math.min(s,c.length),c.copy(a,d,0,h),s-=h}if(h<c.length&&o>0){var f=u.length-o,p=Math.min(o,c.length-h);c.copy(u,f,h,h+p),o-=p}}return c.fill(0),{key:a,iv:u}}},function(e,t,n){"use strict";var r=n(30),i=n(25),o=i.getNAF,s=i.getJSF,a=i.assert;function u(e,t){this.type=e,this.p=new r(t.p,16),this.red=t.prime?r.red(t.prime):r.mont(this.p),this.zero=new r(0).toRed(this.red),this.one=new r(1).toRed(this.red),this.two=new r(2).toRed(this.red),this.n=t.n&&new r(t.n,16),this.g=t.g&&this.pointFromJSON(t.g,t.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var n=this.n&&this.p.div(this.n);!n||n.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function c(e,t){this.curve=e,this.type=t,this.precomputed=null}e.exports=u,u.prototype.point=function(){throw new Error("Not implemented")},u.prototype.validate=function(){throw new Error("Not implemented")},u.prototype._fixedNafMul=function(e,t){a(e.precomputed);var n=e._getDoubles(),r=o(t,1,this._bitLength),i=(1<<n.step+1)-(n.step%2==0?2:1);i/=3;var s,u,c=[];for(s=0;s<r.length;s+=n.step){u=0;for(var l=s+n.step-1;l>=s;l--)u=(u<<1)+r[l];c.push(u)}for(var h=this.jpoint(null,null,null),d=this.jpoint(null,null,null),f=i;f>0;f--){for(s=0;s<c.length;s++)(u=c[s])===f?d=d.mixedAdd(n.points[s]):u===-f&&(d=d.mixedAdd(n.points[s].neg()));h=h.add(d)}return h.toP()},u.prototype._wnafMul=function(e,t){var n=4,r=e._getNAFPoints(n);n=r.wnd;for(var i=r.points,s=o(t,n,this._bitLength),u=this.jpoint(null,null,null),c=s.length-1;c>=0;c--){for(var l=0;c>=0&&0===s[c];c--)l++;if(c>=0&&l++,u=u.dblp(l),c<0)break;var h=s[c];a(0!==h),u="affine"===e.type?h>0?u.mixedAdd(i[h-1>>1]):u.mixedAdd(i[-h-1>>1].neg()):h>0?u.add(i[h-1>>1]):u.add(i[-h-1>>1].neg())}return"affine"===e.type?u.toP():u},u.prototype._wnafMulAdd=function(e,t,n,r,i){var a,u,c,l=this._wnafT1,h=this._wnafT2,d=this._wnafT3,f=0;for(a=0;a<r;a++){var p=(c=t[a])._getNAFPoints(e);l[a]=p.wnd,h[a]=p.points}for(a=r-1;a>=1;a-=2){var m=a-1,g=a;if(1===l[m]&&1===l[g]){var b=[t[m],null,null,t[g]];0===t[m].y.cmp(t[g].y)?(b[1]=t[m].add(t[g]),b[2]=t[m].toJ().mixedAdd(t[g].neg())):0===t[m].y.cmp(t[g].y.redNeg())?(b[1]=t[m].toJ().mixedAdd(t[g]),b[2]=t[m].add(t[g].neg())):(b[1]=t[m].toJ().mixedAdd(t[g]),b[2]=t[m].toJ().mixedAdd(t[g].neg()));var v=[-3,-1,-5,-7,0,7,5,1,3],y=s(n[m],n[g]);for(f=Math.max(y[0].length,f),d[m]=new Array(f),d[g]=new Array(f),u=0;u<f;u++){var _=0|y[0][u],w=0|y[1][u];d[m][u]=v[3*(_+1)+(w+1)],d[g][u]=0,h[m]=b}}else d[m]=o(n[m],l[m],this._bitLength),d[g]=o(n[g],l[g],this._bitLength),f=Math.max(d[m].length,f),f=Math.max(d[g].length,f)}var E=this.jpoint(null,null,null),S=this._wnafT4;for(a=f;a>=0;a--){for(var M=0;a>=0;){var O=!0;for(u=0;u<r;u++)S[u]=0|d[u][a],0!==S[u]&&(O=!1);if(!O)break;M++,a--}if(a>=0&&M++,E=E.dblp(M),a<0)break;for(u=0;u<r;u++){var A=S[u];0!==A&&(A>0?c=h[u][A-1>>1]:A<0&&(c=h[u][-A-1>>1].neg()),E="affine"===c.type?E.mixedAdd(c):E.add(c))}}for(a=0;a<r;a++)h[a]=null;return i?E:E.toP()},u.BasePoint=c,c.prototype.eq=function(){throw new Error("Not implemented")},c.prototype.validate=function(){return this.curve.validate(this)},u.prototype.decodePoint=function(e,t){e=i.toArray(e,t);var n=this.p.byteLength();if((4===e[0]||6===e[0]||7===e[0])&&e.length-1==2*n)return 6===e[0]?a(e[e.length-1]%2==0):7===e[0]&&a(e[e.length-1]%2==1),this.point(e.slice(1,1+n),e.slice(1+n,1+2*n));if((2===e[0]||3===e[0])&&e.length-1===n)return this.pointFromX(e.slice(1,1+n),3===e[0]);throw new Error("Unknown point format")},c.prototype.encodeCompressed=function(e){return this.encode(e,!0)},c.prototype._encode=function(e){var t=this.curve.p.byteLength(),n=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(n):[4].concat(n,this.getY().toArray("be",t))},c.prototype.encode=function(e,t){return i.encode(this._encode(t),e)},c.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this},c.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return!!t&&t.points.length>=Math.ceil((e.bitLength()+1)/t.step)},c.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var n=[this],r=this,i=0;i<t;i+=e){for(var o=0;o<e;o++)r=r.dbl();n.push(r)}return{step:e,points:n}},c.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],n=(1<<e)-1,r=1===n?null:this.dbl(),i=1;i<n;i++)t[i]=t[i-1].add(r);return{wnd:e,points:t}},c.prototype._getBeta=function(){return null},c.prototype.dblp=function(e){for(var t=this,n=0;n<e;n++)t=t.dbl();return t}},function(e,t,n){var r=n(270),i=n(278),o=n(279),s=n(80),a=n(119),u=n(8).Buffer;function c(e){var t;"object"!=typeof e||u.isBuffer(e)||(t=e.passphrase,e=e.key),"string"==typeof e&&(e=u.from(e));var n,c,l=o(e,t),h=l.tag,d=l.data;switch(h){case"CERTIFICATE":c=r.certificate.decode(d,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(c||(c=r.PublicKey.decode(d,"der")),n=c.algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return r.RSAPublicKey.decode(c.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return c.subjectPrivateKey=c.subjectPublicKey,{type:"ec",data:c};case"1.2.840.10040.4.1":return c.algorithm.params.pub_key=r.DSAparam.decode(c.subjectPublicKey.data,"der"),{type:"dsa",data:c.algorithm.params};default:throw new Error("unknown key id "+n)}case"ENCRYPTED PRIVATE KEY":d=function(e,t){var n=e.algorithm.decrypt.kde.kdeparams.salt,r=parseInt(e.algorithm.decrypt.kde.kdeparams.iters.toString(),10),o=i[e.algorithm.decrypt.cipher.algo.join(".")],c=e.algorithm.decrypt.cipher.iv,l=e.subjectPrivateKey,h=parseInt(o.split("-")[1],10)/8,d=a.pbkdf2Sync(t,n,r,h,"sha1"),f=s.createDecipheriv(o,d,c),p=[];return p.push(f.update(l)),p.push(f.final()),u.concat(p)}(d=r.EncryptedPrivateKey.decode(d,"der"),t);case"PRIVATE KEY":switch(n=(c=r.PrivateKey.decode(d,"der")).algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return r.RSAPrivateKey.decode(c.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:c.algorithm.curve,privateKey:r.ECPrivateKey.decode(c.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return c.algorithm.params.priv_key=r.DSAparam.decode(c.subjectPrivateKey,"der"),{type:"dsa",params:c.algorithm.params};default:throw new Error("unknown key id "+n)}case"RSA PUBLIC KEY":return r.RSAPublicKey.decode(d,"der");case"RSA PRIVATE KEY":return r.RSAPrivateKey.decode(d,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:r.DSAPrivateKey.decode(d,"der")};case"EC PRIVATE KEY":return{curve:(d=r.ECPrivateKey.decode(d,"der")).parameters.value,privateKey:d.privateKey};default:throw new Error("unknown key type "+h)}}e.exports=c,c.signature=r.signature},function(e,t){var n=function(e,t){Error.call(this,e),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="JsonWebTokenError",this.message=e,t&&(this.inner=t)};(n.prototype=Object.create(Error.prototype)).constructor=n,e.exports=n},function(e,t,n){"use strict";!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE){0;try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}}(),e.exports=n(175)},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(55);function i(e,t){if(e){if("string"==typeof e)return Object(r.a)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Object(r.a)(e,t):void 0}}},function(e,t,n){e.exports={decode:n(99),verify:n(292),sign:n(295),JsonWebTokenError:n(64),NotBeforeError:n(156),TokenExpiredError:n(157)}},function(e,t,n){"use strict";var r=n(26),i=n(13),o=n(3),s=n(49);t.a={getConnectionStatus:function(e){r.a.getInstance().createApplicationUserListQuery({userIdsFilter:e}).next().then((function(e){Array.isArray(e)&&e.length&&e.forEach((function(e){window.chatterUiDispatcher.dispatch(o.b.setUserConnectionStatus({userId:e.userId,isOnline:e.connectionStatus===s.b.ONLINE}))}))})).catch((function(e){i.a.logWarning("error getting the user list query :",e)}))}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return Qt})),n.d(t,"b",(function(){return Xt}));var r,i,o=n(0),s=n(1),a=n(6),u=n(5);(i=r||(r={})).NONE="none",i.JOINED="joined",i.INVITED="invited",i.LEFT="left";var c,l,h,d,f,p,m,g,b=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.state=null,i.role=null,i.isMuted=!1,i.isBlockedByMe=!1,i.isBlockingMe=!1,i.state=Object(o.q)(r,n.state)?n.state:null,i.role=Object(o.q)(o.D,n.role)?n.role:null,"boolean"==typeof n.is_muted&&(i.isMuted=n.is_muted),"boolean"==typeof n.is_blocked_by_me&&(i.isBlockedByMe=n.is_blocked_by_me),"boolean"==typeof n.is_blocking_me&&(i.isBlockingMe=n.is_blocking_me),i}return Object(o.A)(t,e),t.payloadify=function(t){return Object(o.Tb)(Object(o.jc)(Object(o.Vb)(Object(o.Vb)({},e.payloadify.call(this,t)),{state:t.state,role:t.role,is_muted:t.isMuted,is_blocked_by_me:t.isBlockedByMe,is_blocking_me:t.isBlockingMe})))},t}(s.Bb),v=function(e){function t(t,n){var r,i,s=this;return(s=e.call(this,t)||this).channelUrl=null!==(r=n.channel_url)&&void 0!==r?r:"",s.channelType=null!==(i=n.channel_type)&&void 0!==i?i:o.y.GROUP,s.reader=new o.u(s._iid,n.user),s.readAt=n.ts,s}return Object(o.A)(t,e),t}(o.G);!function(e){e.ALL="all",e.PUBLIC="public",e.PRIVATE="private"}(c||(c={})),function(e){e.ALL="all",e.JOINED="joined_only",e.INVITED="invited_only",e.INVITED_BY_FRIEND="invited_by_friend",e.INVITED_BY_NON_FRIEND="invited_by_non_friend"}(l||(l={})),function(e){e.ALL="all",e.SUPER="super",e.NON_SUPER="nonsuper",e.BROADCAST_ONLY="broadcast_only",e.EXCLUSIVE_ONLY="exclusive_only"}(h||(h={})),function(e){e.ALL="all",e.UNREAD_MESSAGE="unread_message"}(d||(d={})),function(e){e.ALL="all",e.UNHIDDEN="unhidden_only",e.HIDDEN="hidden_only",e.HIDDEN_ALLOW_AUTO_UNHIDE="hidden_allow_auto_unhide",e.HIDDEN_PREVENT_AUTO_UNHIDE="hidden_prevent_auto_unhide"}(f||(f={})),function(e){e.ALL="all",e.OPERATOR="operator",e.NONOPERATOR="nonoperator"}(p||(p={})),function(e){e.AND="AND",e.OR="OR"}(m||(m={})),function(e){e.MEMBER_NICKNAME="member_nickname",e.CHANNEL_NAME="channel_name"}(g||(g={}));var y,_=function(){function e(){this._searchFilter=null,this._userIdsFilter=null,this.includeEmpty=!1,this.nicknameContainsFilter=null,this.nicknameStartsWithFilter=null,this.nicknameExactMatchFilter=null,this.channelNameContainsFilter="",this.myMemberStateFilter=l.ALL,this.customTypesFilter=null,this.channelUrlsFilter=null,this.superChannelFilter=h.ALL,this.publicChannelFilter=c.ALL,this.customTypeStartsWithFilter=null,this.unreadChannelFilter=d.ALL,this.hiddenChannelFilter=f.UNHIDDEN,this.includeFrozen=!0}return e.prototype._isFriend=function(e){return!(!e||!e.friendDiscoveryKey&&!e.friendName)},Object.defineProperty(e.prototype,"searchFilter",{get:function(){return this._searchFilter},enumerable:!1,configurable:!0}),e.prototype.setSearchFilter=function(e,t){Array.isArray(e)&&0!==e.length&&"string"==typeof t&&t&&(this._searchFilter={query:t,fields:e})},Object.defineProperty(e.prototype,"userIdsFilter",{get:function(){return this._userIdsFilter},enumerable:!1,configurable:!0}),e.prototype.setUserIdsFilter=function(e,t,n){void 0===n&&(n=m.AND),this._userIdsFilter={userIds:e,includeMode:t,queryType:n}},e.prototype.clone=function(){var t,n=new e;this.searchFilter&&n.setSearchFilter(this.searchFilter.fields,null!==(t=this.searchFilter.query)&&void 0!==t?t:void 0),this.userIdsFilter&&n.setUserIdsFilter(this.userIdsFilter.userIds,this.userIdsFilter.includeMode,this.userIdsFilter.queryType);var r=JSON.parse(JSON.stringify(this));return Object.keys(r).forEach((function(e){n[e]=r[e]})),n},e.prototype.match=function(e,t){if(this._searchFilter){var n=this._searchFilter,r=n.query,i=n.fields;if(r&&i&&i.length>0&&!i.some((function(t){switch(t){case g.CHANNEL_NAME:return e.name.toLowerCase().includes(r.toLowerCase());case g.MEMBER_NICKNAME:return e.members.some((function(e){return e.nickname.toLowerCase().includes(r.toLowerCase())}));default:return!0}})))return!1}if(this._userIdsFilter){var s=this._userIdsFilter,a=s.userIds,u=s.includeMode,p=s.queryType,b=e.members.map((function(e){return e.userId}));if(u){if(a.length>0)switch(p){case m.AND:if(a.some((function(e){return!b.includes(e)})))return!1;break;case m.OR:if(a.every((function(e){return!b.includes(e)})))return!1}}else{if(a.includes(t)||a.push(t),e.members.length>a.length)return!1;if(!Object(o.Hb)(a,b))return!1}}if(!this.includeEmpty&&!e.lastMessage)return!1;if(!this.includeFrozen&&e.isFrozen)return!1;if(this.customTypesFilter&&this.customTypesFilter.length>0&&!this.customTypesFilter.includes(e.customType))return!1;if(this.customTypeStartsWithFilter&&!new RegExp("^".concat(this.customTypeStartsWithFilter)).test(e.customType))return!1;if(this.channelNameContainsFilter&&!e.name.toLowerCase().includes(this.channelNameContainsFilter.toLowerCase()))return!1;if(this.nicknameContainsFilter){var v=this.nicknameContainsFilter.toLowerCase();if(!e.members.some((function(e){return e.userId!==t&&e.nickname.toLowerCase().includes(v)})))return!1}if(this.nicknameStartsWithFilter){var y=this.nicknameStartsWithFilter.toLowerCase();if(!e.members.some((function(e){return e.userId!==t&&e.nickname.toLowerCase().startsWith(y)})))return!1}if(this.nicknameExactMatchFilter){var _=this.nicknameExactMatchFilter.toLowerCase();if(!e.members.some((function(e){return e.userId!==t&&e.nickname.toLowerCase()!=_})))return!1}if(this.channelUrlsFilter&&this.channelUrlsFilter.length>0&&!this.channelUrlsFilter.includes(e.url))return!1;if(this.myMemberStateFilter)switch(this.myMemberStateFilter){case l.JOINED:if("joined"!==e.myMemberState)return!1;break;case l.INVITED:if("invited"!==e.myMemberState)return!1;break;case l.INVITED_BY_FRIEND:if("invited"!==e.myMemberState||!this._isFriend(e.inviter))return!1;break;case l.INVITED_BY_NON_FRIEND:if("invited"!==e.myMemberState||this._isFriend(e.inviter))return!1}if(this.hiddenChannelFilter)switch(this.hiddenChannelFilter){case f.UNHIDDEN:if(e.isHidden||"unhidden"!==e.hiddenState)return!1;break;case f.HIDDEN:if(!e.isHidden)return!1;break;case f.HIDDEN_ALLOW_AUTO_UNHIDE:if(!e.isHidden||"hidden_allow_auto_unhide"!==e.hiddenState)return!1;break;case f.HIDDEN_PREVENT_AUTO_UNHIDE:if(!e.isHidden||"hidden_prevent_auto_unhide"!==e.hiddenState)return!1}if(this.unreadChannelFilter&&this.unreadChannelFilter===d.UNREAD_MESSAGE&&0===e.unreadMessageCount)return!1;if(this.publicChannelFilter)switch(this.publicChannelFilter){case c.PUBLIC:if(!e.isPublic)return!1;break;case c.PRIVATE:if(e.isPublic)return!1}if(this.superChannelFilter)switch(this.superChannelFilter){case h.SUPER:if(!e.isSuper)return!1;break;case h.NON_SUPER:if(e.isSuper)return!1}return!(this.createdAfter&&e.createdAt<this.createdAfter||this.createdBefore&&e.createdAt>this.createdBefore)},e}(),w=function(e){function t(t,n){var r=n.sdkState,i=n.cacheContext,o=e.call(this,t)||this;return o._channels=new Map,o._sdkState=r,o._cacheContext=i,o}return Object(o.A)(t,e),Object.defineProperty(t.prototype,"collection",{get:function(){var e=this._cacheContext.nestdb;return Object(o.hc)(!!e).throw(o.fc.databaseError),e.collection(s.o)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"localCacheEnabled",{get:function(){return this._cacheContext.localCacheEnabled&&!!this.collection},enumerable:!1,configurable:!0}),t.prototype._serialize=function(e,t){return void 0===t&&(t=0),Object(o.Vb)(Object(o.Vb)({},e.serialize()),{lastMessageUpdatedAt:e.lastMessage?e.lastMessage.createdAt:0,syncIndex:t})},t.prototype._deserialize=function(e){return xe.of(this._iid).buildGroupChannelFromSerializedData(e)},Object.defineProperty(t.prototype,"channels",{get:function(){return Object(o.dc)([],Object(o.ec)(this._channels.values()),!1)},enumerable:!1,configurable:!0}),t.prototype.isCachedInMemory=function(e){return this._channels.has(e)},t.prototype.filterOffsetChanged=function(e){var t=this;return e.filter((function(e){if(t._channels.has(e.url))return t._channels.get(e.url).messageOffsetTimestamp<e.messageOffsetTimestamp}))},t.prototype.get=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){var t,n;return Object(o.Rb)(this,(function(r){switch(r.label){case 0:return this._channels.has(e)?[3,3]:this.localCacheEnabled?[4,this.collection.getByKey(e)]:[3,2];case 1:if(t=r.sent())return n=this._deserialize(t),this._channels.set(e,n),[2,n];r.label=2;case 2:return[2,void 0];case 3:return[2,this._channels.get(e)]}}))}))},t.prototype.fetch=function(e){var t=e.token,n=e.limit,r=void 0===n?s.e:n,i=e.backward,u=void 0!==i&&i,c=e.filter,l=void 0===c?new _:c,h=e.order,d=void 0===h?a.c.LATEST_LAST_MESSAGE:h,f=e.borderlineChannelUrl;return Object(o.Gb)(this,void 0,void 0,(function(){var e,n,i,s,c=this;return Object(o.Rb)(this,(function(o){switch(o.label){case 0:return this.localCacheEnabled?(e=Object(a.k)(d),n={where:function(e){if(t)switch(d){case a.c.CHANNEL_NAME_ALPHABETICAL:if(!u&&e.name.localeCompare(t)<0||u&&e.name.localeCompare(t)>0)return!1;if(f&&f===e.url)return!1;break;case a.c.CHRONOLOGICAL:if(!u&&e.createdAt>t||u&&e.createdAt<t)return!1;if(f&&f===e.url)return!1;break;case a.c.LATEST_LAST_MESSAGE:if(!u&&e.lastMessageUpdatedAt>t||u&&e.lastMessageUpdatedAt<t)return!1;if(f&&f===e.url)return!1}return l.match(c._deserialize(e),c._sdkState.userId)},index:e,backward:u},[4,this.collection.query(n)]):[3,3];case 1:return[4,o.sent().fetch({limit:r})];case 2:return i=o.sent(),(s=i.map((function(e){return c._deserialize(e)}))).forEach((function(e){c._channels.has(e.url)||c._channels.set(e.url,e)})),[2,s];case 3:return[2,[]]}}))}))},t.prototype.upsert=function(e,t){return Object(o.Gb)(this,void 0,void 0,(function(){var n,r,i,s=this;return Object(o.Rb)(this,(function(o){switch(o.label){case 0:if(n=[],e.forEach((function(e){if(s._channels.has(e.url)){var r=s._channels.get(e.url);r._pinnedMessagesUpdatedAt<e._pinnedMessagesUpdatedAt&&(r._pinnedMessagesUpdatedAt=e._pinnedMessagesUpdatedAt),e.cachedMetaData&&t&&(r._updateCachedMetaData(e.cachedMetaData,t),Object.assign(e,{_cachedMetaData:void 0})),r._update(e),n.push(r)}else s._channels.set(e.url,e),n.push(e)})),!this.localCacheEnabled)return[3,2];for(i in r=[],n)r.push(this._serialize(n[i],parseInt(i)));return[4,this.collection.upsertMany(r)];case 1:o.sent(),o.label=2;case 2:return[2,n]}}))}))},t.prototype.remove=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){var t,n,r,i,s,a;return Object(o.Rb)(this,(function(u){switch(u.label){case 0:u.trys.push([0,5,6,7]),t=Object(o.gc)(e),n=t.next(),u.label=1;case 1:return n.done?[3,4]:(r=n.value,this._channels.delete(r),this.localCacheEnabled?[4,this.collection.remove(r)]:[3,3]);case 2:u.sent(),u.label=3;case 3:return n=t.next(),[3,1];case 4:return[3,7];case 5:return i=u.sent(),s={error:i},[3,7];case 6:try{n&&!n.done&&(a=t.return)&&a.call(t)}finally{if(s)throw s.error}return[7];case 7:return[2]}}))}))},t.prototype.clear=function(){return Object(o.Gb)(this,void 0,void 0,(function(){return Object(o.Rb)(this,(function(e){switch(e.label){case 0:return this.clearMemoryCache(),this.localCacheEnabled?[4,this.collection.clear()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},t.prototype.clearMemoryCache=function(){this._channels.clear()},t.prototype._setBlockStateOfAllChannels=function(e,t,n){return Object(o.Gb)(this,void 0,void 0,(function(){var r,i,s,a,u,c,l,h,d,f,p,m,g,b,v,y,_,w,E;return Object(o.Rb)(this,(function(S){switch(S.label){case 0:if(r=[],e===this._sdkState.userId)try{for(i=Object(o.gc)(this._channels.values()),s=i.next();!s.done;s=i.next()){h=s.value;try{for(b=void 0,a=Object(o.gc)(h.members),u=a.next();!u.done;u=a.next())if((p=u.value).userId===t){p.isBlockedByMe=n,r.push(h);break}}catch(e){b={error:e}}finally{try{u&&!u.done&&(v=a.return)&&v.call(a)}finally{if(b)throw b.error}}}}catch(e){m={error:e}}finally{try{s&&!s.done&&(g=i.return)&&g.call(i)}finally{if(m)throw m.error}}else if(t===this._sdkState.userId)try{for(c=Object(o.gc)(this._channels.values()),l=c.next();!l.done;l=c.next()){h=l.value;try{for(w=void 0,d=Object(o.gc)(h.members),f=d.next();!f.done;f=d.next())if((p=f.value).userId===e){p.isBlockingMe=n,r.push(h);break}}catch(e){w={error:e}}finally{try{f&&!f.done&&(E=d.return)&&E.call(d)}finally{if(w)throw w.error}}}}catch(e){y={error:e}}finally{try{l&&!l.done&&(_=c.return)&&_.call(c)}finally{if(y)throw y.error}}return r.length>0?[4,this.upsert(r)]:[3,2];case 1:S.sent(),S.label=2;case 2:return[2]}}))}))},t.prototype.block=function(e,t){return Object(o.Gb)(this,void 0,void 0,(function(){return Object(o.Rb)(this,(function(n){switch(n.label){case 0:return[4,this._setBlockStateOfAllChannels(e,t,!0)];case 1:return n.sent(),[2]}}))}))},t.prototype.unblock=function(e,t){return Object(o.Gb)(this,void 0,void 0,(function(){return Object(o.Rb)(this,(function(n){switch(n.label){case 0:return[4,this._setBlockStateOfAllChannels(e,t,!1)];case 1:return n.sent(),[2]}}))}))},t.prototype.markAsRead=function(e,t){return void 0===t&&(t=Object(o.dc)([],Object(o.ec)(this._channels.keys()),!1)),Object(o.Gb)(this,void 0,void 0,(function(){var n,r,i,s,a,u,c,l;return Object(o.Rb)(this,(function(h){switch(h.label){case 0:n=[],h.label=1;case 1:h.trys.push([1,6,7,8]),r=Object(o.gc)(t),i=r.next(),h.label=2;case 2:return i.done?[3,5]:(s=i.value,[4,this.get(s)]);case 3:(null==(a=h.sent())?void 0:a._updateUnreadMemberState(this._sdkState.userId,e))&&(a._updateUnreadCount(0,0),n.push(a)),h.label=4;case 4:return i=r.next(),[3,2];case 5:return[3,8];case 6:return u=h.sent(),c={error:u},[3,8];case 7:try{i&&!i.done&&(l=r.return)&&l.call(r)}finally{if(c)throw c.error}return[7];case 8:return n.length>0?[4,this.upsert(n)]:[3,10];case 9:h.sent(),h.label=10;case 10:return[2]}}))}))},t}(o.G),E={invitedUserIds:void 0,channelUrl:void 0,coverUrl:void 0,coverImage:void 0,isDistinct:void 0,isSuper:void 0,isBroadcast:void 0,isExclusive:void 0,isPublic:void 0,isDiscoverable:void 0,isStrict:void 0,isEphemeral:void 0,accessCode:void 0,name:void 0,data:void 0,customType:void 0,operatorUserIds:void 0,messageSurvivalSeconds:void 0},S=function(e){return Object(o.k)("string",e.invitedUserIds,!0)&&Object(o.B)("string",e.channelUrl,!0)&&Object(o.B)("string",e.coverUrl,!0)&&(Object(o.Xb)(e.coverImage)||Object(o.B)("string",e.coverImage,!0))&&Object(o.B)("boolean",e.isDistinct,!0)&&Object(o.B)("boolean",e.isSuper,!0)&&Object(o.B)("boolean",e.isBroadcast,!0)&&Object(o.B)("boolean",e.isExclusive,!0)&&Object(o.B)("boolean",e.isPublic,!0)&&Object(o.B)("boolean",e.isStrict,!0)&&Object(o.B)("boolean",e.isDiscoverable,!0)&&Object(o.B)("boolean",e.isEphemeral,!0)&&Object(o.B)("string",e.accessCode,!0)&&Object(o.B)("string",e.name,!0)&&Object(o.B)("string",e.data,!0)&&Object(o.B)("string",e.customType,!0)&&Object(o.k)("string",e.operatorUserIds,!0)&&Object(o.B)("number",e.messageSurvivalSeconds,!0)},M={customTypes:void 0,includeEmpty:!1,includeFrozen:!0,includeChatNotification:!1},O=function(e){return Object(o.k)("string",e.customTypes,!0)&&Object(o.B)("boolean",e.includeEmpty)&&Object(o.B)("boolean",e.includeFrozen)&&Object(o.B)("boolean",e.includeChatNotification)},A={myMemberStateFilter:l.ALL},C=function(e){return Object(o.q)(l,e.myMemberStateFilter)};!function(e){e.GROUP_CHANNEL_UNREAD_MENTION_COUNT="group_channel_unread_mention_count",e.NONSUPER_UNREAD_MENTION_COUNT="non_super_group_channel_unread_mention_count",e.SUPER_UNREAD_MENTION_COUNT="super_group_channel_unread_mention_count",e.GROUP_CHANNEL_UNREAD_MESSAGE_COUNT="group_channel_unread_message_count",e.NONSUPER_UNREAD_MESSAGE_COUNT="non_super_group_channel_unread_message_count",e.SUPER_UNREAD_MESSAGE_COUNT="super_group_channel_unread_message_count",e.GROUP_CHANNEL_INVITATION_COUNT="group_channel_invitation_count",e.NONSUPER_INVITATION_COUNT="non_super_group_channel_invitation_count",e.SUPER_INVITATION_COUNT="super_group_channel_invitation_count"}(y||(y={}));var T,k={keys:[]},x={channelCustomTypesFilter:void 0,superChannelFilter:h.ALL},j={channelUrl:void 0,scheduledStatus:void 0,messageTypeFilter:o.lb.ALL},I=(Object(o.Vb)({},o.x),function(e){return e.startsWith("EVENT_")||e===o.x.SYNC_CHANNEL_CHANGELOGS||e===o.x.REFRESH_CHANNEL}),R=function(e){function t(t){var n=t.channels,r=t.source,i=t.isWebSocketEventComing,o=void 0!==i&&i,s=t.data,a=void 0===s?null:s,u=t.ts,c=e.call(this)||this;return c.channels=n,c.source=r,c.isWebSocketEventComing=o,c.data=a,c.ts=u,c}return Object(o.A)(t,e),t}(o.cb),N=function(e){function t(t){var n=t.channelUrls,r=t.source,i=t.isWebSocketEventComing,o=void 0!==i&&i,s=e.call(this)||this;return s.channelUrls=n,s.source=r,s.isWebSocketEventComing=o,s}return Object(o.A)(t,e),t}(o.cb),P=function(){function e(e){var t=e.groupChannelCache,n=e.messageCache,r=e.unsentMessageCache,i=e.dispatcher,s=this;this._observers=new Map,i.on((function(e){return Object(o.Gb)(s,void 0,void 0,(function(){var i,s,u,c,l,h,d,f,p,m,g,b,v,y,_=this;return Object(o.Rb)(this,(function(w){switch(w.label){case 0:if(!(e instanceof R))return[3,10];i=e.channels,g=e.source,b=e.isWebSocketEventComing,s=e.data,u=i.filter((function(e){return e instanceof Ut})),c=t.filterOffsetChanged(u),w.label=1;case 1:w.trys.push([1,6,7,8]),l=Object(o.gc)(c),h=l.next(),w.label=2;case 2:return h.done?[3,5]:(d=h.value,[4,n.removeUnderOffset(d.url,d.messageOffsetTimestamp)]);case 3:w.sent(),w.label=4;case 4:return h=l.next(),[3,2];case 5:return[3,8];case 6:return f=w.sent(),v={error:f},[3,8];case 7:try{h&&!h.done&&(y=l.return)&&y.call(l)}finally{if(v)throw v.error}return[7];case 8:return[4,t.upsert(u,e.ts)];case 9:return p=w.sent(),b||this._broadcastUpdateEvent(p,g,s),[3,15];case 10:return e instanceof N?(m=e.channelUrls,g=e.source,b=e.isWebSocketEventComing,[4,t.remove(m)]):[3,13];case 11:return w.sent(),[4,Object(o.o)((function(){return Object(o.Gb)(_,void 0,void 0,(function(){var e,t,i,s,a,u;return Object(o.Rb)(this,(function(c){switch(c.label){case 0:c.trys.push([0,6,7,8]),e=Object(o.gc)(m),t=e.next(),c.label=1;case 1:return t.done?[3,5]:(i=t.value,[4,n.removeMessagesOfChannel(i)]);case 2:return c.sent(),[4,r.removeMessagesOfChannel(i)];case 3:c.sent(),c.label=4;case 4:return t=e.next(),[3,1];case 5:return[3,8];case 6:return s=c.sent(),a={error:s},[3,8];case 7:try{t&&!t.done&&(u=e.return)&&u.call(e)}finally{if(a)throw a.error}return[7];case 8:return[2]}}))}))}))];case 12:return w.sent(),b||this._broadcastRemoveEvent(m,g),[3,15];case 13:return e instanceof a.b?[4,t.fetch({token:Number.MAX_SAFE_INTEGER,limit:Number.MAX_SAFE_INTEGER})]:[3,15];case 14:w.sent(),w.label=15;case 15:return[2]}}))}))}))}return e.prototype._broadcastUpdateEvent=function(e,t,n){var r,i;try{for(var s=Object(o.gc)(this._observers.values()),a=s.next();!a.done;a=s.next()){var u=a.value;u.onUpdate&&u.onUpdate(e,t,n)}}catch(e){r={error:e}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}},e.prototype._broadcastRemoveEvent=function(e,t){var n,r;try{for(var i=Object(o.gc)(this._observers.values()),s=i.next();!s.done;s=i.next()){var a=s.value;a.onRemove&&a.onRemove(e,t)}}catch(e){n={error:e}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}},e.prototype.subscribe=function(e,t){this._observers.set(e,t)},e.prototype.unsubscribe=function(e){this._observers.delete(e)},e.prototype.unsubscribeAll=function(){this._observers.clear()},e}(),D=function(e){function t(t){var n=t.userId,r=t.ts,i=t.token,s=t.filter,a=t.includeChatNotification,u=void 0!==a&&a,c=e.call(this)||this,l=Object(o.Vb)(Object(o.Vb)({},M),s),h=l.customTypes,d=l.includeEmpty,f=l.includeFrozen;return c.method=o.a.GET,c.path="".concat(o.Sb,"/").concat(encodeURIComponent(n),"/my_group_channels/changelogs"),c.params=Object(o.Tb)(Object(o.jc)({show_delivery_receipt:!0,show_member:!0,show_read_receipt:!0,change_ts:r||null,token:i,custom_types:h,show_empty:d,show_frozen:f,include_chat_notification:u})),c}return Object(o.A)(t,e),t}(o.Ub),U=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.updatedChannels=n.updated.map((function(e){return new Ut(t,Object.assign(e,{ts:n.ts}))})),r.deletedChannelUrls=n.deleted,r.hasMore=n.has_more,r.token=n.next,r.ts=n.ts,r}return Object(o.A)(t,e),t}(o.Wb),L=function(e){function t(t){var n=t.channelUrl,r=t.isInternalCall,i=e.call(this)||this;return i.method=o.a.GET,i.path="".concat(r?o.Ib:o.vb,"/").concat(encodeURIComponent(n)),i.params={show_member:!0,show_read_receipt:!0,show_delivery_receipt:!0},i}return Object(o.A)(t,e),t}(o.Ub),F=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.channel=new Ut(t,n),r}return Object(o.A)(t,e),t}(o.Wb),B={includeEmpty:!1,includeFrozen:!0,includeMetaData:!0,includeChatNotification:!1,channelUrlsFilter:void 0,customTypesFilter:void 0,customTypeStartsWithFilter:void 0,nicknameContainsFilter:void 0,nicknameStartsWithFilter:void 0,nicknameExactMatchFilter:void 0,channelNameContainsFilter:void 0,myMemberStateFilter:l.ALL,unreadChannelFilter:d.ALL,superChannelFilter:h.ALL,publicChannelFilter:c.ALL,hiddenChannelFilter:f.ALL,userIdsFilter:{userIds:[],includeMode:!0,queryType:m.AND},searchFilter:{query:void 0,fields:[]},metadataKey:void 0,metadataValues:void 0,metadataOrderKeyFilter:void 0,metadataValueStartsWith:void 0,order:a.c.LATEST_LAST_MESSAGE,createdAfter:void 0,createdBefore:void 0},H=function(e){function t(t){var n=this,r=t.userId,i=t.token,s=t.limit,a=t.order,u=t.includeEmpty,c=t.myMemberStateFilter,l=t.superChannelFilter,h=t.publicChannelFilter,d=t.unreadChannelFilter,f=t.nicknameContainsFilter,p=t.nicknameStartsWithFilter,m=t.nicknameExactMatchFilter,g=t.channelNameContainsFilter,b=t.channelUrlsFilter,v=t.customTypesFilter,y=t.customTypeStartsWithFilter,_=t.hiddenChannelFilter,w=t.metadataOrderKeyFilter,E=t.metadataKey,S=t.metadataValues,M=t.metadataValueStartsWith,O=t.includeFrozen,A=t.includeMetaData,C=t.searchFilter,T=t.userIdsFilter,k=t.includeChatNotification,x=void 0!==k&&k,j=t.createdAfter,I=t.createdBefore;return(n=e.call(this)||this).method=o.a.GET,n.path="".concat(o.Sb,"/").concat(encodeURIComponent(r),"/my_group_channels"),n.params=Object(o.Tb)({token:i,limit:s,order:null!=a?a:B.order,show_member:!0,show_read_receipt:!0,show_delivery_receipt:!0,show_empty:null!=u?u:B.includeEmpty,member_state_filter:null!=c?c:B.myMemberStateFilter,super_mode:null!=l?l:B.superChannelFilter,public_mode:null!=h?h:B.publicChannelFilter,unread_filter:null!=d?d:B.unreadChannelFilter,members_nickname_contains:f,members_nickname_startswith:p,members_nickname:m,name_contains:g,channel_urls:b,custom_types:v,custom_type_startswith:y,hidden_mode:_,metadata_order_key:w,metadata_key:E,metadata_values:S,metadata_value_startswith:M,show_frozen:O,show_metadata:A,include_chat_notification:x,created_after:j,created_before:I}),C&&C.query&&C.fields&&(n.params.search_query=C.query,n.params.search_fields=C.fields),T&&T.userIds&&T.userIds.length>0&&(T.includeMode?(n.params.members_include_in=T.userIds,n.params.query_type=T.queryType.toUpperCase()):n.params.members_exactly_in=T.userIds),n}return Object(o.A)(t,e),t}(o.Ub),q=function(e){function t(t,n){var r=e.call(this,t,n)||this;r.channels=[];var i=n.next,o=n.channels,s=n.ts;return r.token=i,o&&o.length>0&&(r.channels=o.map((function(e){return e.ts=s,new Ut(t,e)}))),r.ts=null!=s?s:0,r}return Object(o.A)(t,e),t}(o.Wb),V=function(e){function t(t){var n=t.userId,r=t.filter,i=e.call(this)||this,s=r.myMemberStateFilter;return i.method=o.a.GET,i.path="".concat(o.Sb,"/").concat(encodeURIComponent(n),"/group_channel_count"),i.params={state:null!=s?s:l.ALL},i}return Object(o.A)(t,e),t}(o.Ub),G=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.groupChannelCount=n.group_channel_count,r}return Object(o.A)(t,e),t}(o.Wb),z=function(e){function t(t){var n=t.userId,r=t.filter,i=e.call(this)||this,s=r.keys;return i.method=o.a.GET,i.path="".concat(o.Sb,"/").concat(encodeURIComponent(n),"/unread_item_count"),i.params=Object(o.Tb)({item_keys:s}),i}return Object(o.A)(t,e),t}(o.Ub),W=function(e){function t(t,n){var r=e.call(this,t,n)||this;return"number"==typeof n[y.GROUP_CHANNEL_UNREAD_MENTION_COUNT]&&(r.groupChannelUnreadMentionCount=n[y.GROUP_CHANNEL_UNREAD_MENTION_COUNT]),"number"==typeof n[y.GROUP_CHANNEL_UNREAD_MESSAGE_COUNT]&&(r.groupChannelUnreadMessageCount=n[y.GROUP_CHANNEL_UNREAD_MESSAGE_COUNT]),"number"==typeof n[y.GROUP_CHANNEL_INVITATION_COUNT]&&(r.groupChannelInvitationCount=n[y.GROUP_CHANNEL_INVITATION_COUNT]),"number"==typeof n[y.SUPER_UNREAD_MENTION_COUNT]&&(r.superGroupChannelUnreadMentionCount=n[y.SUPER_UNREAD_MENTION_COUNT]),"number"==typeof n[y.SUPER_UNREAD_MESSAGE_COUNT]&&(r.superGroupChannelUnreadMessageCount=n[y.SUPER_UNREAD_MESSAGE_COUNT]),"number"==typeof n[y.SUPER_INVITATION_COUNT]&&(r.superGroupChannelInvitationCount=n[y.SUPER_INVITATION_COUNT]),"number"==typeof n[y.NONSUPER_UNREAD_MENTION_COUNT]&&(r.nonSuperGroupChannelUnreadMentionCount=n[y.NONSUPER_UNREAD_MENTION_COUNT]),"number"==typeof n[y.NONSUPER_UNREAD_MESSAGE_COUNT]&&(r.nonSuperGroupChannelUnreadMessageCount=n[y.NONSUPER_UNREAD_MESSAGE_COUNT]),"number"==typeof n[y.NONSUPER_INVITATION_COUNT]&&(r.nonSuperGroupChannelInvitationCount=n[y.NONSUPER_INVITATION_COUNT]),r}return Object(o.A)(t,e),t}(o.Wb),K=function(e){function t(t){var n=t.userId,r=e.call(this)||this;return r.method=o.a.GET,r.path="".concat(o.Sb,"/").concat(encodeURIComponent(n),"/unread_channel_count"),r}return Object(o.A)(t,e),t}(o.Ub),Y=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.unreadCount=n.unread_count,r}return Object(o.A)(t,e),t}(o.Wb),Q=function(e){function t(t){var n=t.userId,r=t.filter,i=t.includeFeedChannel,s=void 0!==i&&i,a=e.call(this)||this,u=r.channelCustomTypesFilter,c=r.superChannelFilter;return a.method=o.a.GET,a.path="".concat(o.Sb,"/").concat(encodeURIComponent(n),"/unread_message_count"),a.params={super_mode:null!=c?c:h.ALL,custom_types:u,include_feed_channel:s},a}return Object(o.A)(t,e),t}(o.Ub),J=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.unreadCount=n.unread_count,r.unreadFeedCount=n.unread_feed_count,r}return Object(o.A)(t,e),t}(o.Wb),Z=function(e){function t(t){var n=t.channelUrl,r=t.scheduledStatus,i=t.messageTypeFilter,s=e.call(this)||this;return s.method=o.a.GET,s.path="".concat(o.fb,"/count"),s.params={channel_url:n,status:X(r)},i&&(s.params.message_type=i),s}return Object(o.A)(t,e),t}(o.Ub),$=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.count=n.count,r}return Object(o.A)(t,e),t}(o.Wb),X=function(e){if(!e)return[];var t=[];return e.forEach((function(e){switch(e){case s.h.PENDING:t.push(s.i.PENDING);break;case s.h.SENT:t.push(s.i.IN_QUEUE),t.push(s.i.SENT);break;case s.h.CANCELED:t.push(s.i.CANCELED);break;case s.h.FAILED:t.push(s.i.FAILED)}})),t},ee=function(e){function t(t){var n=this,r=t.userId,i=t.channelUrl,s=t.coverUrl,a=t.coverImage,u=t.isDistinct,c=t.isSuper,l=t.isBroadcast,h=t.isPublic,d=t.isExclusive,f=t.isDiscoverable,p=t.isStrict,m=t.isEphemeral,g=t.accessCode,b=t.name,v=t.data,y=t.customType,_=t.messageSurvivalSeconds,w=t.invitedUserIds,E=t.operatorUserIds;return(n=e.call(this)||this).method=o.a.POST,n.path=o.vb,n.params=Object(o.Tb)({user_ids:Object(o.dc)([r],Object(o.ec)(null!=w?w:[]),!1).filter((function(e,t,n){return t===n.indexOf(e)})),channel_url:i,cover_url:s,cover_file:a,is_distinct:u,is_super:c,is_broadcast:l,is_exclusive:d,is_public:h,is_discoverable:f,strict:p,is_ephemeral:m,access_code:g,name:b,data:v,custom_type:y,operator_ids:E,message_survival_seconds:_}),n}return Object(o.A)(t,e),t}(o.Ub),te=function(e){function t(t,n){var r,i=this;return(i=e.call(this,t,n)||this).channel=new Ut(t,n),i.isCreated=null===(r=n.is_created)||void 0===r||r,i}return Object(o.A)(t,e),t}(o.Wb),ne=function(e){function t(t){var n=t.userId,r=t.channelUrls,i=e.call(this)||this;return i.method=o.a.PUT,i.path="".concat(o.Sb,"/").concat(encodeURIComponent(n),"/mark_as_read_all"),i.params={channel_urls:r},i}return Object(o.A)(t,e),t}(o.Ub);T=o.Wb,Object(o.A)((function(){return null!==T&&T.apply(this,arguments)||this}),T);var re=function(e){function t(t){var n=this,r=t.channelUrl,i=t.userId,s=t.accessCode;return(n=e.call(this)||this).method=o.a.PUT,n.path="".concat(o.vb,"/").concat(encodeURIComponent(r),"/join"),n.params={user_id:i,access_code:s},n}return Object(o.A)(t,e),t}(o.Ub),ie=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.channel=new Ut(t,n),r}return Object(o.A)(t,e),t}(o.Wb),oe=function(e){function t(t,n,r){var i=e.call(this,t,n,r)||this,o=r.data,s=o.member_count,a=void 0===s?0:s,u=o.joined_member_count,c=void 0===u?0:u,l=o.users,h=void 0===l?null:l;return i.memberCount=a,i.joinedMemberCount=c,i.members=Array.isArray(h)?h.map((function(e){return new b(t,e)})):[new b(t,r.data)],i}return Object(o.A)(t,e),t}(u.c),se=function(e){function t(t){var n=this,r=t.channelUrl,i=t.userId,s=t.shouldRemoveOperatorStatus;return(n=e.call(this)||this).method=o.a.PUT,n.path="".concat(o.vb,"/").concat(encodeURIComponent(r),"/leave"),n.params={user_id:i,should_remove_operator_status:s},n}return Object(o.A)(t,e),t}(o.Ub);!function(e){Object(o.A)((function(t,n){return e.call(this,t,n)||this}),e)}(o.Wb);var ae=function(e){function t(t,n,r){var i=e.call(this,t,n,r)||this,o=r.data,s=o.member_count,a=void 0===s?0:s,u=o.joined_member_count,c=void 0===u?0:u;return i.memberCount=a,i.joinedMemberCount=c,i.member=new b(i._iid,r.data),i}return Object(o.A)(t,e),t}(u.c),ue=function(e){function t(t){var n=this,r=t.channelUrl,i=t.userIds;return(n=e.call(this)||this).method=o.a.POST,n.path="".concat(o.vb,"/").concat(encodeURIComponent(r),"/invite"),n.params={user_ids:i},n}return Object(o.A)(t,e),t}(o.Ub),ce=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.channel=new Ut(t,n),r}return Object(o.A)(t,e),t}(o.Wb),le=function(e){function t(t,n,r){var i=e.call(this,t,n,r)||this;i.inviter=null;var s=r.data,a=s.member_count,u=void 0===a?0:a,c=s.joined_member_count,l=void 0===c?0:c,h=s.inviter,d=s.invitees,f=void 0===d?[]:d;return i.memberCount=u,i.joinedMemberCount=l,h&&Object.keys(h).length>0&&(i.inviter=new o.u(t,h)),i.invitees=f.map((function(e){return new b(t,e)})),i}return Object(o.A)(t,e),t}(u.c),he=function(e){function t(t){var n=this,r=t.channelUrl,i=t.userId;return(n=e.call(this)||this).method=o.a.PUT,n.path="".concat(o.vb,"/").concat(encodeURIComponent(r),"/decline"),n.params={user_id:i},n}return Object(o.A)(t,e),t}(o.Ub);!function(e){Object(o.A)((function(t,n){var i=e.call(this,t,n)||this;return i.channel=new Ut(t,n),i.channel.myMemberState=r.NONE,i}),e)}(o.Wb);var de=function(e){function t(t,n,r){var i=e.call(this,t,n,r)||this,s=r.data,a=s.member_count,u=s.joined_member_count,c=s.inviter,l=s.invitee;return i.memberCount=null!=a?a:0,i.joinedMemberCount=null!=u?u:0,i.inviter=new o.u(t,c),i.invitee=new b(t,l),i}return Object(o.A)(t,e),t}(u.c),fe={hidePreviousMessages:!1,allowAutoUnhide:!0},pe=function(e){function t(t){var n=this,r=t.channelUrl,i=t.userId,s=t.hidePreviousMessages,a=t.allowAutoUnhide;return(n=e.call(this)||this).method=o.a.PUT,n.path="".concat(o.vb,"/").concat(encodeURIComponent(r),"/hide"),n.params={user_id:i,hide_previous_messages:null!=s?s:fe.hidePreviousMessages,allow_auto_unhide:null!=a?a:fe.allowAutoUnhide},n}return Object(o.A)(t,e),t}(o.Ub),me=function(e){function t(t,n){var r=e.call(this,t,n)||this,i=n.ts_message_offset;return r.messageOffsetTimestamp=i,r}return Object(o.A)(t,e),t}(o.Wb),ge=function(e){function t(t,n,r){var i,o,s,a=this;return(a=e.call(this,t,"SYEV",r)||this).allowAutoUnhide=null,a.hidePreviousMessages=null,a.messageOffsetTimestamp=null,r.data&&(a.allowAutoUnhide=null!==(i=r.data.allow_auto_unhide)&&void 0!==i?i:null,a.hidePreviousMessages=null!==(o=r.data.hide_previous_messages)&&void 0!==o?o:null),a.messageOffsetTimestamp=null!==(s=r.ts_message_offset)&&void 0!==s?s:null,a}return Object(o.A)(t,e),t}(o.w),be=function(e){function t(t){var n=t.channelUrl,r=t.time;return e.call(this,{code:"TPST",ackRequired:!1,payload:{channel_url:n,time:r}})||this}return Object(o.A)(t,e),t}(o.ob),ve=function(e){function t(t,n,r){var i=e.call(this,t,"SYEV",r)||this;return i.user=new o.u(t,r.data),i}return Object(o.A)(t,e),t}(o.w),ye=function(e){function t(t){var n=t.channelUrl,r=t.time;return e.call(this,{code:"TPEN",ackRequired:!1,payload:{channel_url:n,time:r}})||this}return Object(o.A)(t,e),t}(o.ob),_e=function(e){function t(t,n,r){var i=e.call(this,t,"SYEV",r)||this;return i.user=new o.u(t,r.data),i}return Object(o.A)(t,e),t}(o.w),we=function(e){function t(t){var n=t.channelUrl,r=t.messageId;return e.call(this,{code:"MACK",ackRequired:!1,payload:{channel_url:n,msg_id:r}})||this}return Object(o.A)(t,e),t}(o.ob),Ee=function(e){function t(t,n){var r,i,o,s,u,p,g,b,v,y,_,w,E,S,M,O,A,C,T,k,x,j,I,R=this;return(R=e.call(this,t,n)||this).includeEmpty=!1,R.includeFrozen=!0,R.includeMetaData=!0,R.includeChatNotification=!1,R.channelUrlsFilter=null,R.customTypesFilter=null,R.customTypeStartsWithFilter=null,R.nicknameContainsFilter=null,R.nicknameStartsWithFilter=null,R.nicknameExactMatchFilter=null,R.channelNameContainsFilter="",R.myMemberStateFilter=l.ALL,R.unreadChannelFilter=d.ALL,R.superChannelFilter=h.ALL,R.publicChannelFilter=c.ALL,R.hiddenChannelFilter=f.UNHIDDEN,R.searchFilter={fields:[],query:null},R.userIdsFilter={userIds:[],includeMode:!0,queryType:m.AND},R.metadataKey=null,R.metadataValues=null,R.metadataOrderKeyFilter=null,R.metadataValueStartsWith=null,R.order=a.c.LATEST_LAST_MESSAGE,R.includeEmpty=null!==(r=n.includeEmpty)&&void 0!==r&&r,R.includeFrozen=null===(i=n.includeFrozen)||void 0===i||i,R.includeMetaData=null===(o=n.includeMetaData)||void 0===o||o,R.includeChatNotification=null!==(s=n.includeChatNotification)&&void 0!==s&&s,R.channelUrlsFilter=null!==(u=n.channelUrlsFilter)&&void 0!==u?u:null,R.customTypesFilter=null!==(p=n.customTypesFilter)&&void 0!==p?p:null,R.customTypeStartsWithFilter=null!==(g=n.customTypeStartsWithFilter)&&void 0!==g?g:"",R.nicknameContainsFilter=null!==(b=n.nicknameContainsFilter)&&void 0!==b?b:null,R.nicknameStartsWithFilter=null!==(v=n.nicknameStartsWithFilter)&&void 0!==v?v:null,R.nicknameExactMatchFilter=null!==(y=n.nicknameExactMatchFilter)&&void 0!==y?y:null,R.channelNameContainsFilter=null!==(_=n.channelNameContainsFilter)&&void 0!==_?_:"",R.myMemberStateFilter=null!==(w=n.myMemberStateFilter)&&void 0!==w?w:l.ALL,R.unreadChannelFilter=null!==(E=n.unreadChannelFilter)&&void 0!==E?E:d.ALL,R.superChannelFilter=null!==(S=n.superChannelFilter)&&void 0!==S?S:h.ALL,R.publicChannelFilter=null!==(M=n.publicChannelFilter)&&void 0!==M?M:c.ALL,R.hiddenChannelFilter=null!==(O=n.hiddenChannelFilter)&&void 0!==O?O:f.UNHIDDEN,R.searchFilter=null!==(A=n.searchFilter)&&void 0!==A?A:{fields:[],query:null},R.userIdsFilter=null!==(C=n.userIdsFilter)&&void 0!==C?C:{userIds:[],includeMode:!0,queryType:m.AND},R.metadataKey=null!==(T=n.metadataKey)&&void 0!==T?T:null,R.metadataValues=null!==(k=n.metadataValues)&&void 0!==k?k:null,R.metadataOrderKeyFilter=null!==(x=n.metadataOrderKeyFilter)&&void 0!==x?x:null,R.metadataValueStartsWith=null!==(j=n.metadataValueStartsWith)&&void 0!==j?j:null,R.order=null!==(I=n.order)&&void 0!==I?I:a.c.LATEST_LAST_MESSAGE,n.createdAfter&&(R.createdAfter=n.createdAfter),n.createdBefore&&(R.createdBefore=n.createdBefore),R}return Object(o.A)(t,e),t.prototype._validate=function(){return e.prototype._validate.call(this)&&Object(o.B)("boolean",this.includeEmpty)&&Object(o.B)("boolean",this.includeFrozen)&&Object(o.B)("boolean",this.includeMetaData)&&Object(o.B)("string",this.channelNameContainsFilter)&&Object(o.k)("string",this.channelUrlsFilter,!0)&&Object(o.k)("string",this.customTypesFilter,!0)&&Object(o.B)("string",this.customTypeStartsWithFilter)&&Object(o.B)("string",this.nicknameContainsFilter,!0)&&Object(o.B)("string",this.nicknameStartsWithFilter,!0)&&Object(o.B)("string",this.nicknameExactMatchFilter,!0)&&Object(o.q)(l,this.myMemberStateFilter)&&Object(o.q)(h,this.superChannelFilter)&&Object(o.q)(c,this.publicChannelFilter)&&Object(o.q)(d,this.unreadChannelFilter)&&Object(o.q)(f,this.hiddenChannelFilter)&&Object(o.k)(g,this.searchFilter.fields)&&Object(o.B)("string",this.searchFilter.query,!0)&&Object(o.k)("string",this.userIdsFilter.userIds)&&Object(o.B)("boolean",this.userIdsFilter.includeMode)&&Object(o.q)(m,this.userIdsFilter.queryType)&&Object(o.q)(a.c,this.order)&&Object(o.B)("string",this.metadataOrderKeyFilter,!0)&&Object(o.B)("string",this.metadataKey,!0)&&Object(o.k)("string",this.metadataValues,!0)&&Object(o.B)("string",this.metadataValueStartsWith,!0)&&Object(o.Jb)(this.createdAfter,!0)&&Object(o.Jb)(this.createdBefore,!0)},t.prototype.serialize=function(){return Object(o.hb)(this)},t.prototype.next=function(){return Object(o.Gb)(this,void 0,void 0,(function(){var e,t,n;return Object(o.Rb)(this,(function(r){switch(r.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,[4,xe.of(this._iid).getMyGroupChannels(this._token,Object(o.jc)(Object(o.Vb)({},this)),this.limit)]):[3,2]:[3,5];case 1:return e=r.sent(),t=e.channels,n=e.token,this._token=n,this._hasNext=!!n,this._isLoading=!1,[2,t];case 2:return[2,[]];case 3:throw o.fc.queryInProgress;case 4:return[3,6];case 5:throw o.fc.invalidParameters;case 6:return[2]}}))}))},t}(o.N),Se=function(e){function t(t,n,r){var i,a=this;return(a=e.call(this,t,"SYEV",r)||this).pinnedMessageIds=[],a.latestPinnedMessage=null,a.ts=0,r.data&&(a.pinnedMessageIds=null!==(i=r.data.pinned_message_ids)&&void 0!==i?i:[],a.latestPinnedMessage=r.data.latest_pinned_message?Object(s.f)(t,Object(o.Vb)({},r.data.latest_pinned_message)):null),a.ts=r.ts,a}return Object(o.A)(t,e),t}(o.w),Me=function(e){function t(t){var n=t.channelUrl;return e.call(this,{code:"READ",ackRequired:!0,payload:{channel_url:n}})||this}return Object(o.A)(t,e),t}(o.ob),Oe=function(e){function t(t,n,r){var i=e.call(this,t,"READ",r)||this;return i.readStatus=new v(t,r),i}return Object(o.A)(t,e),t}(o.w),Ae=function(e){function t(t){var n=t.channelUrl,r=t.userId,i=e.call(this)||this;return(i=e.call(this)||this).method=o.a.PUT,i.path="".concat(o.vb,"/").concat(encodeURIComponent(n),"/messages/mark_as_delivered"),i.params=Object(o.Tb)({userId:r}),i}return Object(o.A)(t,e),t}(o.Ub);!function(e){Object(o.A)((function(){return null!==e&&e.apply(this,arguments)||this}),e)}(o.Wb);var Ce,Te=function(e){function t(t,n,r){var i=e.call(this,t,"DLVR",r)||this;return i.channelUrl=r.channel_url,i.deliveredStateUpdate=r.updated,i}return Object(o.A)(t,e),t}(o.w),ke={},xe=function(e){function t(t,n){var r,i=this;return(i=e.call(this,t,Object(o.Vb)(Object(o.Vb)({},n),{channelType:o.y.GROUP}))||this)._leftChannels=new Map,i._disableMack=!1,i._markAsReadAllLastSentAt=0,i._disableMack=null!==(r=n.disableMack)&&void 0!==r&&r,i._groupChannelHandlers=new Map,i._groupChannelCache=new w(i._iid,{sdkState:n.sdkState,cacheContext:n.cacheContext}),i._groupChannelBroadcast=new P({dispatcher:n.dispatcher,groupChannelCache:i._groupChannelCache,messageCache:s.xb.of(i._iid),unsentMessageCache:s.yb.of(i._iid)}),setInterval((function(){var e,t,n=function(e){e.invalidateTypingStatus()&&(i._dispatcher.dispatch(new R({channels:[e],source:o.x.EVENT_CHANNEL_TYPING_STATUS_UPDATE})),i._groupChannelHandlers.forEach((function(t){t.onTypingStatusUpdated&&t.onTypingStatusUpdated(e)})))};try{for(var r=Object(o.gc)(i._groupChannelCache.channels),s=r.next();!s.done;s=r.next())n(s.value)}catch(t){e={error:t}}finally{try{s&&!s.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}}),1e3),i._dispatcher.on((function(e){e instanceof o.w?i._handleEvent(e):e instanceof a.j?Object(o.Gb)(i,void 0,void 0,(function(){var t,n;return Object(o.Rb)(this,(function(r){switch(r.label){case 0:return t=e.message,[4,this.getChannel(t.channelUrl,!0)];case 1:return n=r.sent(),t instanceof s.k?n._autoResendUserMessage(t):t instanceof s.l&&n._autoResendFileMessage(t),[2]}}))})):e instanceof a.e&&i.reduceDBSize()})),ke[t]||(ke[t]=i),i}return Object(o.A)(t,e),t.of=function(e){return ke[e]||(ke[e]=new t(e,o.v.of(e))),ke[e]},t.clear=function(e){ke[e]&&delete ke[e]},Object.defineProperty(t.prototype,"handlers",{get:function(){return Object(o.dc)([],Object(o.ec)(this._groupChannelHandlers.values()),!1)},enumerable:!1,configurable:!0}),t.prototype.buildGroupChannelFromSerializedData=function(e){var t=Object(o.mc)(e);return new Ut(this._iid,Ut.payloadify(t))},t.prototype.buildGroupChannelListQueryFromSerializedData=function(e){var t=Object(o.mc)(e);return new Ee(this._iid,t)},t.prototype.buildMemberFromSerializedData=function(e){var t=Object(o.mc)(e);return new b(this._iid,b.payloadify(t))},t.prototype.getChannelFromCache=function(e){var t;return Object(o.Gb)(this,void 0,void 0,(function(){return Object(o.Rb)(this,(function(n){switch(n.label){case 0:return[4,this._groupChannelCache.get(e)];case 1:return[2,null!==(t=n.sent())&&void 0!==t?t:null]}}))}))},t.prototype.getChannelsFromCache=function(e,t,n,r,i){return Object(o.Gb)(this,void 0,void 0,(function(){return Object(o.Rb)(this,(function(o){switch(o.label){case 0:return[4,this._groupChannelCache.fetch({token:e,filter:t,order:n,limit:r,borderlineChannelUrl:i})];case 1:return[2,o.sent()]}}))}))},t.prototype.upsertChannelsToCache=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){return Object(o.Rb)(this,(function(t){switch(t.label){case 0:return[4,this._groupChannelCache.upsert(e)];case 1:return[2,t.sent()]}}))}))},t.prototype.removeChannelsFromCache=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){return Object(o.Rb)(this,(function(t){switch(t.label){case 0:return[4,this._groupChannelCache.remove(e)];case 1:return t.sent(),[2]}}))}))},t.prototype.clearChannelsFromCache=function(){return Object(o.Gb)(this,void 0,void 0,(function(){return Object(o.Rb)(this,(function(e){switch(e.label){case 0:return[4,this._groupChannelCache.clear()];case 1:return e.sent(),[2]}}))}))},t.prototype.reduceDBSize=function(){return Object(o.Gb)(this,void 0,void 0,(function(){var e,t,n,r,i,a,u,c,l,h,d,f,p,m,g;return Object(o.Rb)(this,(function(b){switch(b.label){case 0:return e=s.xb.of(this._iid),t=o.v.of(this._iid).cacheContext,n=t.localCacheConfig,r=t.nestdb,t.localCacheEnabled&&r&&r.state==s.zb.OPENED?(i=1024*n.maxSize*1024,[4,r.estimateUsage()]):[2];case 1:if((a=b.sent())<i)return[2];u=[],c=this._groupChannelCache.channels,l={},p=0,b.label=2;case 2:return p<c.length?[4,this.getMessagesFromCache(c[p].url,0,"prev",new s.Cb)]:[3,5];case 3:h=b.sent(),l[c[p].url]=JSON.stringify(h).length,d=new o.z({channel:c[p],cachedMessageCount:h.length}),u.push(d),b.label=4;case 4:return p++,[3,2];case 5:f=u.sort(n.clearOrderComparator),p=0,b.label=6;case 6:return p<f.length?[4,e.removeMessagesOfChannel(f[p].channel.url)]:[3,10];case 7:return b.sent(),[4,e._getGroupChannelPreferenceSize(f[p].channel.url)];case 8:if(m=b.sent(),g=l[f[p].channel.url]+m,(a-=g)<i)return[3,10];b.label=9;case 9:return p++,[3,6];case 10:return[2]}}))}))},t.prototype._handleEvent=function(e){var t;return Object(o.Gb)(this,void 0,void 0,(function(){var n,i,c,l,h,d,f,p,m,g,b,v,y,_,w,E,S,M,O,A,C,T,k,x,j,I,P,D,U,L,F,B,H,q,V,G,z,W,K,Y,Q,J,Z,$,X,ee,te,ne,re,ie,se,ue,ce,he,fe,pe,me,be,ye,Ee,Me,Ae,Ce,ke,xe,je,Ie,Re,Ne,Pe,De,Ue,Le,Fe,Be,He,qe,Ve,Ge,ze,We,Ke,Ye,Qe,Je,Ze,$e,Xe,et,tt,nt,rt,it,ot,st,at,ut,ct,lt,ht,dt,ft,pt,mt,gt,bt,vt,yt,_t,wt,Et,St,Mt,Ot,At,Ct,Tt,kt,xt,It,Rt,Nt,Pt,Dt,Ut,Lt,Ft,Bt,Ht,qt,Vt,Gt,zt,Wt,Kt,Yt,Qt,Jt,Zt=this;return Object(o.Rb)(this,(function($t){switch($t.label){case 0:switch($t.trys.push([0,80,,81]),e.code){case"MESG":case"FILE":case"ADMM":case"BRDM":return[3,1];case"MEDI":case"FEDI":case"AEDI":return[3,4];case"DELM":return[3,7];case"READ":return[3,10];case"DLVR":return[3,13];case"MRCT":return[3,15];case"MTHD":return[3,19];case"MCNT":return[3,23];case"PEDI":return[3,32];case"VOTE":return[3,35];case"SYEV":return[3,38];case"USEV":return[3,78]}return[3,79];case 1:return p=null,"MESG"===e.code?p=e.as(s.D):"FILE"===e.code?p=e.as(s.E):"ADMM"!==e.code&&"BRDM"!=e.code||(p=e.as(u.a)),p?(n=p.message,i=p.isMentioned,c=p.forceUpdateLastMessage,n.channelType!==o.y.GROUP?[3,3]:(this._disableMack||Object(o.o)((function(){return Object(o.Gb)(Zt,void 0,void 0,(function(){var e;return Object(o.Rb)(this,(function(t){return e=new we(n),this._requestQueue.send(e),[2]}))}))})),j=this._groupChannelCache.isCachedInMemory(n.channelUrl),v=n instanceof s.a&&n.sender.userId===this._sdkState.userId,[4,this.getChannel(n.channelUrl,!0)])):[3,3];case 2:if((l=$t.sent()).hiddenState===jt.HIDDEN_ALLOW_AUTO_UNHIDE&&(l.hiddenState=jt.UNHIDDEN),n instanceof s.a){h=o.v.of(this._iid).useMemberInfoInMessage;try{for(d=Object(o.gc)(l.members),f=d.next();!f.done;f=d.next())if((nt=f.value).userId===n.sender.userId){h||(n.sender.nickname=nt.nickname,n.sender.plainProfileUrl=nt.plainProfileUrl,n.sender.metaData=nt.metaData,n.sender.isBlockedByMe=nt.isBlockedByMe);break}}catch(e){Ht={error:e}}finally{try{f&&!f.done&&(qt=d.return)&&qt.call(d)}finally{if(Ht)throw Ht.error}}!h&&i&&(null===(t=n.mentionedUsers)||void 0===t||t.forEach((function(e){var t,n;try{for(var r=Object(o.gc)(l.members),i=r.next();!i.done;i=r.next()){var s=i.value;if(e.userId===s.userId){e.nickname=s.nickname,e.plainProfileUrl=s.plainProfileUrl,e.metaData=s.metaData;break}}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}}))),v&&(w=this._sessionManager.currentUser)&&(w.nickname=n.sender.nickname,w.plainProfileUrl=n.sender.plainProfileUrl,w.metaData=n.sender.metaData)}n.silent&&!v||(l.isEphemeral||j)&&((!l.lastMessage||l.lastMessage.createdAt<n.createdAt)&&(l.lastMessage=n),v||l._updateUnreadCount(l.unreadMessageCount+1,l.unreadMentionCount+(i?1:0))),c&&(!l.lastMessage||l.lastMessage.createdAt<n.createdAt)&&(l.lastMessage=n),this._dispatcher.dispatch(new R({channels:[l],source:o.x.EVENT_MESSAGE_RECEIVED})),n.silent&&!v||Object(o.b)((function(){return Object(o.Gb)(Zt,void 0,void 0,(function(){var e,t,n,r,i;return Object(o.Rb)(this,(function(s){try{for(e=Object(o.gc)(this._groupChannelHandlers.values()),t=e.next();!t.done;t=e.next())(n=t.value).onChannelChanged&&n.onChannelChanged(l)}catch(e){r={error:e}}finally{try{t&&!t.done&&(i=e.return)&&i.call(e)}finally{if(r)throw r.error}}return[2]}))}))})),this._dispatcher.dispatch(new o.I({messages:[n],source:o.x.EVENT_MESSAGE_RECEIVED})),Object(o.b)((function(){return Object(o.Gb)(Zt,void 0,void 0,(function(){var e,t,r,s,a;return Object(o.Rb)(this,(function(u){try{for(e=Object(o.gc)(this._groupChannelHandlers.values()),t=e.next();!t.done;t=e.next())(r=t.value).onMessageReceived&&r.onMessageReceived(l,n),i&&r.onMentionReceived&&r.onMentionReceived(l,n)}catch(e){s={error:e}}finally{try{t&&!t.done&&(a=e.return)&&a.call(e)}finally{if(s)throw s.error}}return[2]}))}))})),$t.label=3;case 3:return[3,79];case 4:return p=null,"MEDI"===e.code?p=e.as(s.B):"FEDI"===e.code?p=e.as(s.C):"AEDI"===e.code&&(p=e.as(u.i)),p?(m=p.message,g=p.mentionCountChange,m.channelType!==o.y.GROUP?[3,6]:(j=this._groupChannelCache.isCachedInMemory(m.channelUrl),[4,this.getChannel(m.channelUrl,!0)])):[3,6];case 5:b=$t.sent(),v=m instanceof s.a&&m.sender.userId===this._sdkState.userId,y=!1,v?(_=m.sender,(w=this._sessionManager.currentUser)&&(w.nickname=_.nickname,w.plainProfileUrl=_.plainProfileUrl,w.metaData=_.metaData)):b.isReadMessage(m)||0!==g&&!m.silent&&j&&(b._updateUnreadCount(b.unreadMessageCount,b.unreadMentionCount+g),y=!0),!b.lastMessage||b.lastMessage.createdAt<m.createdAt?(b.lastMessage=m,y=!0):b.lastMessage.isIdentical(m)&&(j?b.lastMessage.updatedAt<m.updatedAt&&(b.lastMessage=m,y=!0):y=!0),E=!1,b.lastPinnedMessage&&b.lastPinnedMessage.messageId===m.messageId&&(b.lastPinnedMessage=m,y=!0,E=!0),y&&(this._dispatcher.dispatch(new R({channels:[b],source:E?o.x.EVENT_PINNED_MESSAGE_UPDATED:o.x.EVENT_MESSAGE_UPDATED})),m.silent&&!v||Object(o.b)((function(){return Object(o.Gb)(Zt,void 0,void 0,(function(){var e,t,n,r,i;return Object(o.Rb)(this,(function(s){try{for(e=Object(o.gc)(this._groupChannelHandlers.values()),t=e.next();!t.done;t=e.next())(n=t.value).onChannelChanged&&n.onChannelChanged(b)}catch(e){r={error:e}}finally{try{t&&!t.done&&(i=e.return)&&i.call(e)}finally{if(r)throw r.error}}return[2]}))}))})),E&&Object(o.b)((function(){return Object(o.Gb)(Zt,void 0,void 0,(function(){var e,t,n,r,i;return Object(o.Rb)(this,(function(s){try{for(e=Object(o.gc)(this._groupChannelHandlers.values()),t=e.next();!t.done;t=e.next())(n=t.value).onPinnedMessageUpdated&&n.onPinnedMessageUpdated(b)}catch(e){r={error:e}}finally{try{t&&!t.done&&(i=e.return)&&i.call(e)}finally{if(r)throw r.error}}return[2]}))}))}))),this._dispatcher.dispatch(new o.I({messages:[m],source:o.x.EVENT_MESSAGE_UPDATED})),Object(o.b)((function(){return Object(o.Gb)(Zt,void 0,void 0,(function(){var e,t,n,r,i;return Object(o.Rb)(this,(function(s){try{for(e=Object(o.gc)(this._groupChannelHandlers.values()),t=e.next();!t.done;t=e.next())(n=t.value).onMessageUpdated&&n.onMessageUpdated(b,m),0!==g&&n.onMentionReceived&&n.onMentionReceived(b,m)}catch(e){r={error:e}}finally{try{t&&!t.done&&(i=e.return)&&i.call(e)}finally{if(r)throw r.error}}return[2]}))}))})),$t.label=6;case 6:return[3,79];case 7:return S=e.as(s.z),ne=S.channelUrl,re=S.channelType,M=S.messageId,re!==o.y.GROUP?[3,9]:[4,this.getChannel(ne,!0)];case 8:O=$t.sent(),this._dispatcher.dispatch(new o.T({messageIds:[M],source:o.x.EVENT_MESSAGE_DELETED})),Object(o.b)((function(){return Object(o.Gb)(Zt,void 0,void 0,(function(){var e,t,n,r,i;return Object(o.Rb)(this,(function(s){try{for(e=Object(o.gc)(this._groupChannelHandlers.values()),t=e.next();!t.done;t=e.next())(n=t.value).onMessageDeleted&&n.onMessageDeleted(O,M)}catch(e){r={error:e}}finally{try{t&&!t.done&&(i=e.return)&&i.call(e)}finally{if(r)throw r.error}}return[2]}))}))})),$t.label=9;case 9:return[3,79];case 10:return(A=e.as(Oe).readStatus).channelType!==o.y.GROUP?[3,12]:(j=this._groupChannelCache.isCachedInMemory(A.channelUrl),[4,this.getChannel(A.channelUrl,!0)]);case 11:C=$t.sent(),j&&C._updateUnreadMemberState(A.reader.userId,A.readAt),A.reader.userId===this._sdkState.userId?j?(C.unreadMessageCount>0||C.unreadMentionCount>0)&&(C._updateUnreadCount(0,0),this._dispatcher.dispatch(new R({channels:[C],source:o.x.EVENT_CHANNEL_READ})),Object(o.b)((function(){return Object(o.Gb)(Zt,void 0,void 0,(function(){var e,t,n,r,i;return Object(o.Rb)(this,(function(s){try{for(e=Object(o.gc)(this._groupChannelHandlers.values()),t=e.next();!t.done;t=e.next())(n=t.value).onChannelChanged&&n.onChannelChanged(C)}catch(e){r={error:e}}finally{try{t&&!t.done&&(i=e.return)&&i.call(e)}finally{if(r)throw r.error}}return[2]}))}))}))):0!==C.unreadMessageCount&&0!==C.unreadMentionCount||(this._dispatcher.dispatch(new R({channels:[C],source:o.x.EVENT_CHANNEL_READ})),Object(o.b)((function(){return Object(o.Gb)(Zt,void 0,void 0,(function(){var e,t,n,r,i;return Object(o.Rb)(this,(function(s){try{for(e=Object(o.gc)(this._groupChannelHandlers.values()),t=e.next();!t.done;t=e.next())(n=t.value).onChannelChanged&&n.onChannelChanged(C)}catch(e){r={error:e}}finally{try{t&&!t.done&&(i=e.return)&&i.call(e)}finally{if(r)throw r.error}}return[2]}))}))}))):(this._dispatcher.dispatch(new R({channels:[C],source:o.x.EVENT_CHANNEL_READ})),Object(o.b)((function(){return Object(o.Gb)(Zt,void 0,void 0,(function(){var e,t,n,r,i;return Object(o.Rb)(this,(function(s){try{for(e=Object(o.gc)(this._groupChannelHandlers.values()),t=e.next();!t.done;t=e.next())(n=t.value).onUnreadMemberStatusUpdated&&n.onUnreadMemberStatusUpdated(C)}catch(e){r={error:e}}finally{try{t&&!t.done&&(i=e.return)&&i.call(e)}finally{if(r)throw r.error}}return[2]}))}))}))),$t.label=12;case 12:return[3,79];case 13:return T=e.as(Te),ne=T.channelUrl,k=T.deliveredStateUpdate,x=void 0===k?{}:k,j=this._groupChannelCache.isCachedInMemory(ne),[4,this.getChannel(ne,!0)];case 14:if(I=$t.sent(),j)for(P in x)I._updateUndeliveredMemberState(P,x[P]);return Object.keys(x).some((function(e){return e!==Zt._sdkState.userId}))&&(this._dispatcher.dispatch(new R({channels:[I],source:o.x.EVENT_CHANNEL_DELIVERED})),Object(o.b)((function(){return Object(o.Gb)(Zt,void 0,void 0,(function(){var e,t,n,r,i;return Object(o.Rb)(this,(function(s){try{for(e=Object(o.gc)(this._groupChannelHandlers.values()),t=e.next();!t.done;t=e.next())(n=t.value).onUndeliveredMemberStatusUpdated&&n.onUndeliveredMemberStatusUpdated(I)}catch(e){r={error:e}}finally{try{t&&!t.done&&(i=e.return)&&i.call(e)}finally{if(r)throw r.error}}return[2]}))}))}))),[3,79];case 15:return D=e.as(u.g),ne=D.channelUrl,re=D.channelType,U=D.event,re!==o.y.GROUP?[3,18]:[4,this.getChannel(ne,!0)];case 16:return L=$t.sent(),[4,this.getMessageFromCache(U.messageId)];case 17:(H=$t.sent())&&(H.applyReactionEvent(U),this._dispatcher.dispatch(new o.I({messages:[H],source:o.x.EVENT_MESSAGE_REACTION_UPDATED}))),Object(o.b)((function(){return Object(o.Gb)(Zt,void 0,void 0,(function(){var e,t,n,r,i;return Object(o.Rb)(this,(function(s){try{for(e=Object(o.gc)(this._groupChannelHandlers.values()),t=e.next();!t.done;t=e.next())(n=t.value).onReactionUpdated&&n.onReactionUpdated(L,U)}catch(e){r={error:e}}finally{try{t&&!t.done&&(i=e.return)&&i.call(e)}finally{if(r)throw r.error}}return[2]}))}))})),$t.label=18;case 18:return[3,79];case 19:return(F=e.as(u.l).event).channelType!==o.y.GROUP?[3,22]:[4,this.getChannel(F.channelUrl,!0)];case 20:return B=$t.sent(),[4,this.getMessageFromCache(F.targetMessageId)];case 21:(H=$t.sent())&&(H.applyThreadInfoUpdateEvent(F),this._dispatcher.dispatch(new o.I({messages:[H],source:o.x.EVENT_MESSAGE_THREADINFO_UPDATED}))),Object(o.b)((function(){return Object(o.Gb)(Zt,void 0,void 0,(function(){var e,t,n,r,i;return Object(o.Rb)(this,(function(s){try{for(e=Object(o.gc)(this._groupChannelHandlers.values()),t=e.next();!t.done;t=e.next())(n=t.value).onThreadInfoUpdated&&n.onThreadInfoUpdated(B,F)}catch(e){r={error:e}}finally{try{t&&!t.done&&(i=e.return)&&i.call(e)}finally{if(r)throw r.error}}return[2]}))}))})),$t.label=22;case 22:return[3,79];case 23:q=e.as(u.d).groupChannelMemberCounts,V=[],$t.label=24;case 24:$t.trys.push([24,29,30,31]),G=Object(o.gc)(q),z=G.next(),$t.label=25;case 25:return z.done?[3,28]:(W=z.value,ne=W.channelUrl,Ge=W.memberCount,ze=W.joinedMemberCount,K=W.updatedAt,[4,this.getChannelFromCache(ne)]);case 26:(Y=$t.sent())&&Y._setLatestMemberCount(Ge,ze,K)&&V.push(Y),$t.label=27;case 27:return z=G.next(),[3,25];case 28:return[3,31];case 29:return Q=$t.sent(),Vt={error:Q},[3,31];case 30:try{z&&!z.done&&(Gt=G.return)&&Gt.call(G)}finally{if(Vt)throw Vt.error}return[7];case 31:return V.length>0&&(this._dispatcher.dispatch(new R({channels:V,source:o.x.EVENT_CHANNEL_MEMBER_COUNT_UPDATED})),Object(o.b)((function(){return Object(o.Gb)(Zt,void 0,void 0,(function(){var e,t,n,r,i;return Object(o.Rb)(this,(function(s){try{for(e=Object(o.gc)(this._groupChannelHandlers.values()),t=e.next();!t.done;t=e.next())(n=t.value).onChannelMemberCountChanged&&n.onChannelMemberCountChanged(V)}catch(e){r={error:e}}finally{try{t&&!t.done&&(i=e.return)&&i.call(e)}finally{if(r)throw r.error}}return[2]}))}))}))),[3,79];case 32:return J=e.as(u.f),Z=J.event,$=J.status,ne=J.channelUrl,re=J.channelType,ne&&re===o.y.GROUP?[4,this.getChannel(ne,!0)]:[3,34];case 33:X=$t.sent(),this._dispatcher.dispatch(new o.Q({event:Z,source:o.x.EVENT_POLL_UPDATED})),Object(o.b)($===o.Kb?function(){return Object(o.Gb)(Zt,void 0,void 0,(function(){var e,t,n,r,i;return Object(o.Rb)(this,(function(s){try{for(e=Object(o.gc)(this._groupChannelHandlers.values()),t=e.next();!t.done;t=e.next())(n=t.value).onPollDeleted&&n.onPollDeleted(X,Z.pollId)}catch(e){r={error:e}}finally{try{t&&!t.done&&(i=e.return)&&i.call(e)}finally{if(r)throw r.error}}return[2]}))}))}:function(){return Object(o.Gb)(Zt,void 0,void 0,(function(){var e,t,n,r,i;return Object(o.Rb)(this,(function(s){try{for(e=Object(o.gc)(this._groupChannelHandlers.values()),t=e.next();!t.done;t=e.next())(n=t.value).onPollUpdated&&n.onPollUpdated(X,Z)}catch(e){r={error:e}}finally{try{t&&!t.done&&(i=e.return)&&i.call(e)}finally{if(r)throw r.error}}return[2]}))}))}),$t.label=34;case 34:return[3,79];case 35:return ee=e.as(s.y),te=ee.event,ne=ee.channelUrl,re=ee.channelType,ne&&re===o.y.GROUP?[4,this.getChannel(ne,!0)]:[3,37];case 36:ie=$t.sent(),this._dispatcher.dispatch(new o.L({event:te,source:o.x.EVENT_POLL_VOTED})),Object(o.b)((function(){return Object(o.Gb)(Zt,void 0,void 0,(function(){var e,t,n,r,i;return Object(o.Rb)(this,(function(s){try{for(e=Object(o.gc)(this._groupChannelHandlers.values()),t=e.next();!t.done;t=e.next())(n=t.value).onPollVoted&&n.onPollVoted(ie,te)}catch(e){r={error:e}}finally{try{t&&!t.done&&(i=e.return)&&i.call(e)}finally{if(r)throw r.error}}return[2]}))}))})),$t.label=37;case 37:return[3,79];case 38:if(!(se=e.as(u.c).event).isGroupChannelEvent)return[3,77];switch(se.category){case u.k.CHANNEL_JOIN:return[3,39];case u.k.CHANNEL_LEAVE:return[3,41];case u.k.CHANNEL_OPERATOR_UPDATE:return[3,45];case u.k.CHANNEL_INVITE:return[3,47];case u.k.CHANNEL_DECLINE_INVITE:return[3,49];case u.k.TYPING_START:case u.k.TYPING_END:return[3,51];case u.k.USER_CHANNEL_MUTE:case u.k.USER_CHANNEL_UNMUTE:return[3,53];case u.k.USER_CHANNEL_BAN:return[3,55];case u.k.USER_CHANNEL_UNBAN:return[3,59];case u.k.CHANNEL_FREEZE:case u.k.CHANNEL_UNFREEZE:return[3,61];case u.k.CHANNEL_HIDE:return[3,63];case u.k.CHANNEL_UNHIDE:return[3,65];case u.k.CHANNEL_DELETED:return[3,67];case u.k.CHANNEL_PROP_CHANGED:return[3,69];case u.k.CHANNEL_META_DATA_CHANGED:return[3,71];case u.k.CHANNEL_META_COUNTERS_CHANGED:return[3,73];case u.k.PINNED_MESSAGE_CHANGED:return[3,75]}return[3,77];case 39:return[4,this.getChannel(se.channelUrl,!0)];case 40:return ue=$t.sent(),ce=e.as(oe),he=ce.memberCount,fe=ce.joinedMemberCount,pe=ce.members,me=!1,pe.forEach((function(e){ue.isExclusive||ue.isSuper||ue.isBroadcast?me=me||ue._setLatestMemberCount(he,fe,se.ts):(e.state=r.JOINED,ue.addMember(e,se.ts),Zt._updateJoinedMemberCount(ue)),e.userId===Zt._sdkState.userId&&(ue.myMemberState=r.JOINED)})),this._dispatcher.dispatch(new R({channels:[ue],source:o.x.EVENT_CHANNEL_JOINED})),Object(o.b)((function(){return Object(o.Gb)(Zt,void 0,void 0,(function(){return Object(o.Rb)(this,(function(e){return this._groupChannelHandlers.forEach((function(e){var t,n;try{for(var r=Object(o.gc)(pe),i=r.next();!i.done;i=r.next()){var s=i.value;e.onUserJoined&&e.onUserJoined(ue,s)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}ue.isBroadcast&&me&&e.onChannelMemberCountChanged&&e.onChannelMemberCountChanged([ue])})),[2]}))}))})),[3,77];case 41:return(rt=this._leftChannels.get(se.channelUrl))?(ye=rt.channel,[3,44]):[3,42];case 42:return[4,this.getChannel(se.channelUrl,!0)];case 43:ye=$t.sent(),$t.label=44;case 44:return be=ye,Ee=e.as(ae),Ge=Ee.memberCount,ze=Ee.joinedMemberCount,Me=Ee.member,Ae=!1,Ce=o.v.of(this._iid).appInfo,be.isExclusive||be.isSuper||be.isBroadcast?Ae=be._setLatestMemberCount(Ge,ze,se.ts):((null==Ce?void 0:Ce.enabledChannelMemberShipHistory)?((ke=be.members.find((function(e){return e.userId===ke.userId})))&&(ke.state=r.LEFT),be.memberCount=Ge):be.removeMember(Me),this._updateJoinedMemberCount(be)),Me.userId===this._sdkState.userId?(be.myMemberState=r.NONE,be.invitedAt=0,be.joinedAt=0,be._updateUnreadCount(0,0),be.isPublic?this._dispatcher.dispatch(new R({channels:[be],source:o.x.EVENT_CHANNEL_LEFT})):(this._markAsLeave(be),this._dispatcher.dispatch(new N({channelUrls:[be.url],source:o.x.EVENT_CHANNEL_LEFT})))):this._dispatcher.dispatch(new R({channels:[be],source:o.x.EVENT_CHANNEL_LEFT})),Object(o.b)((function(){return Object(o.Gb)(Zt,void 0,void 0,(function(){return Object(o.Rb)(this,(function(e){return this._groupChannelHandlers.forEach((function(e){e.onUserLeft&&e.onUserLeft(be,Me),be.isBroadcast&&Ae&&e.onChannelMemberCountChanged&&e.onChannelMemberCountChanged([be])})),[2]}))}))})),[3,77];case 45:return[4,this.getChannel(se.channelUrl,!0)];case 46:xe=$t.sent(),je=e.as(u.e).operators,Ie=je.map((function(e){return e.userId}));try{for(Re=Object(o.gc)(xe.members),Ne=Re.next();!Ne.done;Ne=Re.next())(nt=Ne.value).role=Ie.includes(nt.userId)?o.D.OPERATOR:o.D.NONE}catch(e){zt={error:e}}finally{try{Ne&&!Ne.done&&(Wt=Re.return)&&Wt.call(Re)}finally{if(zt)throw zt.error}}return xe.myRole=Ie.includes(this._sdkState.userId)?o.D.OPERATOR:o.D.NONE,this._dispatcher.dispatch(new R({channels:[xe],source:o.x.EVENT_CHANNEL_OPERATOR_UPDATED})),Object(o.b)((function(){return Object(o.Gb)(Zt,void 0,void 0,(function(){return Object(o.Rb)(this,(function(e){return this._groupChannelHandlers.forEach((function(e){e.onOperatorUpdated&&e.onOperatorUpdated(xe,je)})),[2]}))}))})),[3,77];case 47:return[4,this.getChannel(se.channelUrl,!0)];case 48:Pe=$t.sent(),De=e.as(le),Ge=De.memberCount,ze=De.joinedMemberCount,Ue=De.inviter,(Le=De.invitees).forEach((function(e){return e.state=r.INVITED}));try{for(Fe=Object(o.gc)(Le),Be=Fe.next();!Be.done;Be=Fe.next())He=Be.value,Pe.isExclusive||Pe.isSuper||Pe.isBroadcast?Pe._setLatestMemberCount(Ge,ze,se.ts):Pe.addMember(He,se.ts),this._sdkState.userId===He.userId&&(Pe.hiddenState=jt.UNHIDDEN,Pe.myMemberState!==r.JOINED&&(Pe.myMemberState=r.INVITED),Pe.invitedAt=se.ts)}catch(e){Kt={error:e}}finally{try{Be&&!Be.done&&(Yt=Fe.return)&&Yt.call(Fe)}finally{if(Kt)throw Kt.error}}return this._dispatcher.dispatch(new R({channels:[Pe],source:o.x.EVENT_CHANNEL_INVITED})),Object(o.b)((function(){return Object(o.Gb)(Zt,void 0,void 0,(function(){return Object(o.Rb)(this,(function(e){return this._groupChannelHandlers.forEach((function(e){e.onUserReceivedInvitation&&e.onUserReceivedInvitation(Pe,Ue,Le)})),[2]}))}))})),[3,77];case 49:return[4,this.getChannel(se.channelUrl,!0)];case 50:return qe=$t.sent(),Ve=e.as(de),Ge=Ve.memberCount,ze=Ve.joinedMemberCount,We=Ve.inviter,Ke=Ve.invitee,qe.isExclusive||qe.isSuper||qe.isBroadcast?qe._setLatestMemberCount(Ge,ze,se.ts):qe.removeMember(Ke),this._sdkState.userId===Ke.userId?(qe.invitedAt=0,qe.myMemberState=r.NONE,qe.isPublic?this._dispatcher.dispatch(new R({channels:[qe],source:o.x.EVENT_CHANNEL_DECLINED_INVITE})):this._dispatcher.dispatch(new N({channelUrls:[qe.url],source:o.x.EVENT_CHANNEL_DECLINED_INVITE}))):this._dispatcher.dispatch(new R({channels:[qe],source:o.x.EVENT_CHANNEL_DECLINED_INVITE})),Object(o.b)((function(){return Object(o.Gb)(Zt,void 0,void 0,(function(){return Object(o.Rb)(this,(function(e){return this._groupChannelHandlers.forEach((function(e){e.onUserDeclinedInvitation&&e.onUserDeclinedInvitation(qe,We,Ke)})),[2]}))}))})),[3,77];case 51:return[4,this.getChannel(se.channelUrl,!0)];case 52:return Ye=$t.sent(),Qe=se.category===u.k.TYPING_START,Je=e.as(Qe?ve:_e).user,Ye._updateTypingStatus(Je,Qe?se.ts:0),this._dispatcher.dispatch(new R({channels:[Ye],source:o.x.EVENT_CHANNEL_TYPING_STATUS_UPDATE})),Object(o.b)((function(){return Object(o.Gb)(Zt,void 0,void 0,(function(){return Object(o.Rb)(this,(function(e){return this._groupChannelHandlers.forEach((function(e){e.onTypingStatusUpdated&&e.onTypingStatusUpdated(Ye)})),[2]}))}))})),[3,77];case 53:return[4,this.getChannel(se.channelUrl,!0)];case 54:Ze=$t.sent(),$e=se.category===u.k.USER_CHANNEL_MUTE,(Xe=e.as($e?s.w:s.x).user).userId===this._sdkState.userId&&(Ze.myMutedState=$e?o.C.MUTED:o.C.UNMUTED,Ze._myMutedRemainingTime=Xe.restrictionInfo.remainingDuration);try{for(et=Object(o.gc)(Ze.members),tt=et.next();!tt.done;tt=et.next())if((nt=tt.value).userId===Xe.userId){nt.isMuted=$e;break}}catch(e){Qt={error:e}}finally{try{tt&&!tt.done&&(Jt=et.return)&&Jt.call(et)}finally{if(Qt)throw Qt.error}}return this._dispatcher.dispatch(new R({channels:[Ze],source:$e?o.x.EVENT_CHANNEL_MUTED:o.x.EVENT_CHANNEL_UNMUTED,data:Xe.userId})),Object(o.b)((function(){return Object(o.Gb)(Zt,void 0,void 0,(function(){return Object(o.Rb)(this,(function(e){return this._groupChannelHandlers.forEach((function(e){$e?e.onUserMuted&&e.onUserMuted(Ze,Xe):e.onUserUnmuted&&e.onUserUnmuted(Ze,Xe)})),[2]}))}))})),[3,77];case 55:return(rt=this._leftChannels.get(se.channelUrl))?(ot=rt.channel,[3,58]):[3,56];case 56:return[4,this.getChannel(se.channelUrl,!0)];case 57:ot=$t.sent(),$t.label=58;case 58:return it=ot,this._markAsLeave(it),(st=e.as(s.v).user).userId===this._sdkState.userId&&this._dispatcher.dispatch(new N({channelUrls:[it.url],source:o.x.EVENT_CHANNEL_BANNED})),Object(o.b)((function(){return Object(o.Gb)(Zt,void 0,void 0,(function(){return Object(o.Rb)(this,(function(e){return this._groupChannelHandlers.forEach((function(e){e.onUserBanned&&e.onUserBanned(it,st)})),[2]}))}))})),[3,77];case 59:return[4,this.getChannel(se.channelUrl,!0)];case 60:return at=$t.sent(),(ut=e.as(s.u).user).userId===this._sdkState.userId&&this._dispatcher.dispatch(new N({channelUrls:[at.url],source:o.x.EVENT_CHANNEL_UNBANNED})),Object(o.b)((function(){return Object(o.Gb)(Zt,void 0,void 0,(function(){return Object(o.Rb)(this,(function(e){return this._groupChannelHandlers.forEach((function(e){e.onUserUnbanned&&e.onUserUnbanned(at,ut)})),[2]}))}))})),[3,77];case 61:return[4,this.getChannel(se.channelUrl,!0)];case 62:return ct=$t.sent(),lt=e.as(s.s).freeze,ct.isFrozen=lt,this._dispatcher.dispatch(new R({channels:[ct],source:lt?o.x.EVENT_CHANNEL_FROZEN:o.x.EVENT_CHANNEL_UNFROZEN})),Object(o.b)((function(){return Object(o.Gb)(Zt,void 0,void 0,(function(){return Object(o.Rb)(this,(function(e){return this._groupChannelHandlers.forEach((function(e){lt?e.onChannelFrozen&&e.onChannelFrozen(ct):e.onChannelUnfrozen&&e.onChannelUnfrozen(ct)})),[2]}))}))})),[3,77];case 63:return[4,this.getChannel(se.channelUrl,!0)];case 64:return ht=$t.sent(),dt=e.as(ge),ft=dt.allowAutoUnhide,pt=dt.hidePreviousMessages,mt=dt.messageOffsetTimestamp,null!==ft&&(ht.hiddenState=ft?jt.HIDDEN_ALLOW_AUTO_UNHIDE:jt.HIDDEN_PREVENT_AUTO_UNHIDE),null!==pt&&pt&&ht._updateUnreadCount(0,0),null!==mt&&(ht.messageOffsetTimestamp=mt),this._dispatcher.dispatch(new R({channels:[ht],source:o.x.EVENT_CHANNEL_HIDDEN})),Object(o.b)((function(){return Object(o.Gb)(Zt,void 0,void 0,(function(){return Object(o.Rb)(this,(function(e){return this._groupChannelHandlers.forEach((function(e){e.onChannelHidden&&e.onChannelHidden(ht)})),[2]}))}))})),[3,77];case 65:return[4,this.getChannel(se.channelUrl,!0)];case 66:return(gt=$t.sent()).hiddenState=jt.UNHIDDEN,this._dispatcher.dispatch(new R({channels:[gt],source:o.x.EVENT_CHANNEL_UNHIDDEN})),Object(o.b)((function(){return Object(o.Gb)(Zt,void 0,void 0,(function(){return Object(o.Rb)(this,(function(e){return this._groupChannelHandlers.forEach((function(e){e.onChannelChanged&&e.onChannelChanged(gt)})),[2]}))}))})),[3,77];case 67:return[4,this.getChannel(se.channelUrl,!0)];case 68:return bt=$t.sent(),this._dispatcher.dispatch(new N({channelUrls:[se.channelUrl],source:o.x.EVENT_CHANNEL_DELETED})),Object(o.b)((function(){return Object(o.Gb)(Zt,void 0,void 0,(function(){return Object(o.Rb)(this,(function(e){return this._groupChannelHandlers.forEach((function(e){e.onChannelDeleted&&e.onChannelDeleted(bt.url,bt.channelType)})),[2]}))}))})),[3,77];case 69:return[4,this.getChannelWithoutCache(se.channelUrl,!0)];case 70:return vt=$t.sent(),this._dispatcher.dispatch(new R({channels:[vt],source:o.x.EVENT_CHANNEL_UPDATED})),Object(o.b)((function(){return Object(o.Gb)(Zt,void 0,void 0,(function(){return Object(o.Rb)(this,(function(e){return this._groupChannelHandlers.forEach((function(e){e.onChannelChanged&&e.onChannelChanged(vt)})),[2]}))}))})),[3,77];case 71:return[4,this.getChannel(se.channelUrl,!0)];case 72:return yt=$t.sent(),_t=e.as(s.q),wt=_t.created,Et=_t.updated,St=_t.deleted,wt&&(yt._upsertCachedMetaData(wt,se.ts),this._dispatcher.dispatch(new R({channels:[yt],source:o.x.EVENT_CHANNEL_METADATA_CREATED}))),Et&&(yt._upsertCachedMetaData(Et,se.ts),this._dispatcher.dispatch(new R({channels:[yt],source:o.x.EVENT_CHANNEL_METADATA_UPDATED}))),St&&(yt._removeFromCachedMetaData(St,se.ts),this._dispatcher.dispatch(new R({channels:[yt],source:o.x.EVENT_CHANNEL_METADATA_DELETED}))),Object(o.b)((function(){return Object(o.Gb)(Zt,void 0,void 0,(function(){return Object(o.Rb)(this,(function(e){return this._groupChannelHandlers.forEach((function(e){wt&&e.onMetaDataCreated&&e.onMetaDataCreated(yt,wt),Et&&e.onMetaDataUpdated&&e.onMetaDataUpdated(yt,Et),St&&e.onMetaDataDeleted&&e.onMetaDataDeleted(yt,St)})),[2]}))}))})),[3,77];case 73:return[4,this.getChannel(se.channelUrl,!0)];case 74:return Mt=$t.sent(),Ot=e.as(s.m),At=Ot.created,Ct=Ot.updated,Tt=Ot.deleted,At&&this._dispatcher.dispatch(new R({channels:[Mt],source:o.x.EVENT_CHANNEL_METACOUNTER_CREATED})),Ct&&this._dispatcher.dispatch(new R({channels:[Mt],source:o.x.EVENT_CHANNEL_METACOUNTER_UPDATED})),Tt&&this._dispatcher.dispatch(new R({channels:[Mt],source:o.x.EVENT_CHANNEL_METACOUNTER_DELETED})),Object(o.b)((function(){return Object(o.Gb)(Zt,void 0,void 0,(function(){return Object(o.Rb)(this,(function(e){return this._groupChannelHandlers.forEach((function(e){At&&e.onMetaCounterCreated&&e.onMetaCounterCreated(Mt,At),Ct&&e.onMetaCounterUpdated&&e.onMetaCounterUpdated(Mt,Ct),Tt&&e.onMetaCounterDeleted&&e.onMetaCounterDeleted(Mt,Tt)})),[2]}))}))})),[3,77];case 75:return[4,this.getChannel(se.channelUrl,!0)];case 76:return kt=$t.sent(),xt=e.as(Se),It=xt.pinnedMessageIds,Rt=xt.latestPinnedMessage,(Nt=xt.ts)>kt._pinnedMessagesUpdatedAt&&(kt.pinnedMessageIds=It,kt.lastPinnedMessage=Rt,kt._pinnedMessagesUpdatedAt=Nt,this._dispatcher.dispatch(new R({channels:[kt],source:o.x.EVENT_PINNED_MESSAGE_UPDATED})),Object(o.b)((function(){return Object(o.Gb)(Zt,void 0,void 0,(function(){var e,t,n,r,i;return Object(o.Rb)(this,(function(s){try{for(e=Object(o.gc)(this._groupChannelHandlers.values()),t=e.next();!t.done;t=e.next())(n=t.value).onChannelChanged&&n.onChannelChanged(kt)}catch(e){r={error:e}}finally{try{t&&!t.done&&(i=e.return)&&i.call(e)}finally{if(r)throw r.error}}return[2]}))}))})),Object(o.b)((function(){return Object(o.Gb)(Zt,void 0,void 0,(function(){return Object(o.Rb)(this,(function(e){return this._groupChannelHandlers.forEach((function(e){e.onPinnedMessageUpdated&&e.onPinnedMessageUpdated(kt)})),[2]}))}))}))),[3,77];case 77:return[3,79];case 78:switch((Pt=e.as(a.g).event).category){case a.h.USER_BLOCK:Dt=a.i.getDataAsUserBlockEvent(this._iid,Pt),Lt=Dt.blocker,Ft=Dt.blockee,this._groupChannelCache.block(Lt.userId,Ft.userId);break;case a.h.USER_UNBLOCK:Ut=a.i.getDataAsUserBlockEvent(this._iid,Pt),Lt=Ut.blocker,Ft=Ut.blockee,this._groupChannelCache.unblock(Lt.userId,Ft.userId)}return[3,79];case 79:return[3,81];case 80:if(Bt=$t.sent(),Object(o.J)(Bt))throw Bt;return[3,81];case 81:return[2]}}))}))},t.prototype._markAsLeave=function(e){var t,n=this,r=null!==(t=this._leftChannels.get(e.url))&&void 0!==t?t:{channel:e,ref:0};r.ref++,this._leftChannels.set(e.url,r),setTimeout((function(){r.ref--,0===r.ref&&n._leftChannels.delete(e.url)}),1e4)},t.prototype.addHandler=function(e,t){this._groupChannelHandlers.set(e,t)},t.prototype.removeHandler=function(e){this._groupChannelHandlers.delete(e)},t.prototype.clearHandler=function(){this._groupChannelHandlers.clear()},t.prototype.subscribeChannelEvent=function(e,t){this._groupChannelBroadcast.subscribe(e,t)},t.prototype.unsubscribeChannelEvent=function(e){this._groupChannelBroadcast.unsubscribe(e)},t.prototype._updateJoinedMemberCount=function(e){e.joinedMemberCount=e.members.filter((function(e){return e.state===r.JOINED})).length},t.prototype.getChannel=function(e,t){return void 0===t&&(t=!1),Object(o.Gb)(this,void 0,void 0,(function(){var n;return Object(o.Rb)(this,(function(r){switch(r.label){case 0:Object(o.hc)(Object(o.B)("string",e)).throw(o.fc.invalidParameters),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.getChannelFromCache(e)];case 2:return(n=r.sent())?[2,n]:[3,4];case 3:return r.sent(),[3,4];case 4:return[4,this.getChannelWithoutCache(e,t)];case 5:return[2,r.sent()]}}))}))},t.prototype.getChannelWithoutCache=function(e,t){return void 0===t&&(t=!1),Object(o.Gb)(this,void 0,void 0,(function(){var n,r,i,s,a;return Object(o.Rb)(this,(function(u){switch(u.label){case 0:return Object(o.hc)(Object(o.B)("string",e)).throw(o.fc.invalidParameters),n=new L({channelUrl:e,isInternalCall:t}),[4,this._requestQueue.send(n)];case 1:switch(r=u.sent(),i=r.as(F).channel,s=i.unreadMessageCount,a=i.unreadMentionCount,i.myCountPreference){case xt.UNREAD_MESSAGE_COUNT_ONLY:a=0;break;case xt.UNREAD_MENTION_COUNT_ONLY:s=0;break;case xt.OFF:s=0,a=0}return i._updateUnreadCount(s,a),[4,this.upsertChannelsToCache([i])];case 2:return[2,u.sent()[0]]}}))}))},t.prototype.refreshChannel=function(e,t,n){return void 0===t&&(t=!0),void 0===n&&(n=o.x.REFRESH_CHANNEL),Object(o.Gb)(this,void 0,void 0,(function(){var i,s,a,u,c;return Object(o.Rb)(this,(function(l){switch(l.label){case 0:return l.trys.push([0,5,,6]),i=new L({channelUrl:e,isInternalCall:t}),[4,this._requestQueue.send(i)];case 1:return s=l.sent(),(a=s.as(F).channel).myMemberState!==r.NONE?[3,2]:(this._dispatcher.dispatch(new N({channelUrls:[a.url],source:n})),[3,4]);case 2:return[4,this.upsertChannelsToCache([a])];case 3:u=l.sent(),this._dispatcher.dispatch(new R({channels:u,source:n})),l.label=4;case 4:return[3,6];case 5:return(c=l.sent()).code!==o.rb.NON_AUTHORIZED&&c.code!==o.rb.NOT_FOUND_IN_DATABASE||this._dispatcher.dispatch(new N({channelUrls:[e],source:n})),[3,6];case 6:return[2]}}))}))},t.prototype.getMyGroupChannels=function(e,t,n,r){return void 0===r&&(r=o.x.REQUEST_CHANNEL),Object(o.Gb)(this,void 0,void 0,(function(){var i,s,a,u,c;return Object(o.Rb)(this,(function(l){switch(l.label){case 0:return t.createdAfter&&(t.createdAfter=Math.floor(t.createdAfter/1e3)),t.createdBefore&&(t.createdBefore=Math.floor(t.createdBefore/1e3)),i=new H(Object(o.Vb)(Object(o.Vb)({},t),{userId:this._sdkState.userId,token:e,limit:n})),[4,this._requestQueue.send(i)];case 1:return s=l.sent(),a=s.as(q),u=a.channels,c=a.token,this._dispatcher.dispatch(new R({channels:u,source:r})),[2,{channels:u,token:c}]}}))}))},t.prototype.getMyGroupChannelChangeLogs=function(e,t,n){return void 0===n&&(n=o.x.REQUEST_CHANNEL_CHANGELOGS),Object(o.Gb)(this,void 0,void 0,(function(){var r,i,s,a,u,c,l,h;return Object(o.Rb)(this,(function(d){switch(d.label){case 0:return r=Object(o.Vb)(Object(o.Vb)({},M),t),Object(o.hc)((Object(o.B)("string",e)||Object(o.B)("number",e))&&O(r)).throw(o.fc.invalidParameters),i=new D(Object(o.jc)({userId:this._sdkState.userId,ts:"number"==typeof e?e:null,token:"string"==typeof e?e:null,filter:r})),[4,this._requestQueue.send(i)];case 1:return s=d.sent(),a=s.as(U),u=a.updatedChannels,c=a.deletedChannelUrls,l=a.hasMore,h=a.ts,u.length>0&&this._dispatcher.dispatch(new R({channels:u,source:n,ts:h})),c.length>0&&this._dispatcher.dispatch(new N({channelUrls:c,source:n})),[2,{updatedChannels:u,deletedChannelUrls:c,hasMore:l,token:a.token}]}}))}))},t.prototype.getGroupChannelCount=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){var t,n;return Object(o.Rb)(this,(function(r){switch(r.label){case 0:return t=Object(o.Vb)(Object(o.Vb)({},A),e),Object(o.hc)(C(t)).throw(o.fc.invalidParameters),n=new V({userId:this._sdkState.userId,filter:t}),[4,this._requestQueue.send(n)];case 1:return[2,r.sent().as(G).groupChannelCount]}}))}))},t.prototype.getUnreadItemCount=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){var t,n,r,i,s,a,u,c,l,h,d,f,p,m,g,b;return Object(o.Rb)(this,(function(v){switch(v.label){case 0:return t=Object(o.Vb)(Object(o.Vb)({},k),e),Object(o.hc)(function(e){return Object(o.k)(y,e.keys)}(t)).throw(o.fc.invalidParameters),n=o.v.of(this._iid),r=n.sdkState,i=n.requestQueue,s=new z({userId:r.userId,filter:t}),[4,i.send(s)];case 1:return a=v.sent(),u=a.as(W),c=u.groupChannelUnreadMentionCount,l=u.groupChannelUnreadMessageCount,h=u.groupChannelInvitationCount,d=u.superGroupChannelUnreadMentionCount,f=u.superGroupChannelUnreadMessageCount,p=u.superGroupChannelInvitationCount,m=u.nonSuperGroupChannelUnreadMentionCount,g=u.nonSuperGroupChannelUnreadMessageCount,b=u.nonSuperGroupChannelInvitationCount,[2,Object(o.Tb)({groupChannelUnreadMentionCount:c,groupChannelUnreadMessageCount:l,groupChannelInvitationCount:h,superGroupChannelUnreadMentionCount:d,superGroupChannelUnreadMessageCount:f,superGroupChannelInvitationCount:p,nonSuperGroupChannelUnreadMentionCount:m,nonSuperGroupChannelUnreadMessageCount:g,nonSuperGroupChannelInvitationCount:b})]}}))}))},t.prototype.getTotalUnreadChannelCount=function(){return Object(o.Gb)(this,void 0,void 0,(function(){var e,t,n,r;return Object(o.Rb)(this,(function(i){switch(i.label){case 0:return e=o.v.of(this._iid),t=e.sdkState,n=e.requestQueue,r=new K({userId:t.userId}),[4,n.send(r)];case 1:return[2,i.sent().as(Y).unreadCount]}}))}))},t.prototype.getTotalUnreadMessageCount=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){var t,n,r,i,s;return Object(o.Rb)(this,(function(a){switch(a.label){case 0:return t=Object(o.Vb)(Object(o.Vb)({},x),e),Object(o.hc)(function(e){return Object(o.k)("string",e.channelCustomTypesFilter,!0)&&Object(o.q)(h,e.superChannelFilter)}(t)).throw(o.fc.invalidParameters),n=o.v.of(this._iid),r=n.sdkState,i=n.requestQueue,s=new Q({userId:r.userId,filter:t}),[4,i.send(s)];case 1:return[2,a.sent().as(J).unreadCount]}}))}))},t.prototype.getTotalScheduledMessageCount=function(e){return void 0===e&&(e={}),Object(o.Gb)(this,void 0,void 0,(function(){var t,n,r;return Object(o.Rb)(this,(function(i){switch(i.label){case 0:return t=Object(o.Vb)(Object(o.Vb)({},j),e),Object(o.hc)(function(e){return Object(o.B)("string",e.channelUrl,!0)&&Object(o.k)(s.h,e.scheduledStatus,!0)&&Object(o.q)(o.lb,e.messageTypeFilter)}(t)).throw(o.fc.invalidParameters),n=o.v.of(this._iid).requestQueue,r=new Z(t),[4,n.send(r)];case 1:return[2,i.sent().as($).count]}}))}))},t.prototype.getSubscribedTotalUnreadMessageCount=function(){var e=o.v.of(this._iid).subscribedUnreadMessageCount;return e.all>=0?e.all:0},t.prototype.getSubscribedCustomTypeTotalUnreadMessageCount=function(){var e=0,t=o.v.of(this._iid).subscribedUnreadMessageCount;for(var n in t.customTypes)e+=t.customTypes[n];return e},t.prototype.getSubscribedCustomTypeUnreadMessageCount=function(e){var t;return null!==(t=o.v.of(this._iid).subscribedUnreadMessageCount.customTypes[e])&&void 0!==t?t:0},t.prototype.createChannel=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){var t,n,r,i;return Object(o.Rb)(this,(function(s){switch(s.label){case 0:return t=Object(o.Vb)(Object(o.Vb)({},E),e),Object(o.hc)(S(t)).throw(o.fc.invalidParameters),t.isPublic||(t.accessCode=void 0),n=new ee(Object(o.Vb)({userId:this._sdkState.userId},t)),[4,this._requestQueue.send(n)];case 1:return r=s.sent(),i=r.as(te).channel,[4,this.upsertChannelsToCache([i])];case 2:return s.sent(),[2,i]}}))}))},t.prototype.markAsReadAll=function(){return Object(o.Gb)(this,void 0,void 0,(function(){var e,t,n,r,i,s,a,u;return Object(o.Rb)(this,(function(c){switch(c.label){case 0:return e=Date.now(),Object(o.hc)(e-this._markAsReadAllLastSentAt>=1e3).throw(o.fc.markAsReadAllRateLimitExceeded),this._markAsReadAllLastSentAt=e,t=new ne({userId:this._sdkState.userId}),[4,this._requestQueue.send(t)];case 1:c.sent(),n=this._groupChannelCache.channels;try{for(r=Object(o.gc)(n),i=r.next();!i.done;i=r.next())(s=i.value)._updateUnreadMemberState(this._sdkState.userId,e),s._updateUnreadCount(0,0)}catch(e){a={error:e}}finally{try{i&&!i.done&&(u=r.return)&&u.call(r)}finally{if(a)throw a.error}}return n.length>0?[4,this.upsertChannelsToCache(n)]:[3,3];case 2:c.sent(),c.label=3;case 3:return[2]}}))}))},t.prototype.markAsReadWithChannelUrls=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){var t,n,r,i,s,a,u,c,l;return Object(o.Rb)(this,(function(h){switch(h.label){case 0:return t=Date.now(),Object(o.hc)(Object(o.k)("string",e)&&t-this._markAsReadAllLastSentAt>=1e3).throw(o.fc.markAsReadAllRateLimitExceeded),this._markAsReadAllLastSentAt=t,n=new ne({userId:this._sdkState.userId,channelUrls:e}),[4,this._requestQueue.send(n)];case 1:h.sent(),r=this._groupChannelCache.channels,i=[];try{for(s=Object(o.gc)(r),a=s.next();!a.done;a=s.next())u=a.value,e.includes(u.url)&&(u._updateUnreadMemberState(this._sdkState.userId,t),u._updateUnreadCount(0,0),i.push(u))}catch(e){c={error:e}}finally{try{a&&!a.done&&(l=s.return)&&l.call(s)}finally{if(c)throw c.error}}return i.length>0?[4,this.upsertChannelsToCache(i)]:[3,3];case 2:h.sent(),h.label=3;case 3:return[2]}}))}))},t.prototype.markAsDelivered=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){return Object(o.Rb)(this,(function(t){switch(t.label){case 0:return[4,this.getChannel(e)];case 1:return[4,t.sent().markAsDelivered()];case 2:return t.sent(),[2]}}))}))},t}(u.j);!function(e){e[e.IDLE=0]="IDLE",e[e.RUNNING=1]="RUNNING",e[e.END=2]="END"}(Ce||(Ce={}));var je,Ie=function(e){function t(t,n,r,i){var o=e.call(this)||this;return o._state=Ce.IDLE,o._retryCount=0,o._retryLimit=3,o.priority=0,o._worker=n,o}return Object(o.A)(t,e),Object.defineProperty(t.prototype,"isIdle",{get:function(){return this._state===Ce.IDLE},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRunning",{get:function(){return this._state===Ce.RUNNING},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isDone",{get:function(){return this._state===Ce.END},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"retryCount",{get:function(){return this._retryCount},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"retryLimit",{get:function(){return this._retryLimit},enumerable:!1,configurable:!0}),t.prototype._run=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){var t,n;return Object(o.Rb)(this,(function(r){switch(r.label){case 0:if(!this.isRunning)return[3,4];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this._worker(e)];case 2:return t=r.sent(),this._retryCount=0,this.dispatch("progress",t),t.hasNext?this._run(t.nextToken):this.end(),[3,4];case 3:return n=r.sent(),this.dispatch("error",n),this._retryCount<this._retryLimit?(this._retryCount++,this._run(e)):this.stop(),[3,4];case 4:return[2]}}))}))},t.prototype.start=function(e){this.isIdle&&(this._state=Ce.RUNNING,this._run(e))},t.prototype.stop=function(){this._state=Ce.IDLE,this.dispatch("stop")},t.prototype.end=function(){this._state=Ce.END,this.dispatch("end")},t}(o.e),Re={},Ne=function(){function e(e){var t=e._iid,n=e.channel,r=e.limit,i=void 0===r?100:r,a=this;this.ref=0,this._iid=t,this._channel=n,this._limit=i,this._prevSyncLoopCount=0,this._nextSyncLoopCount=0;var c,l,h=o.v.of(this._iid),d=h.sdkState,f=h.cacheContext,p=h.dispatcher,m=h.logger,g=h.statLogCollector;this._metadataKey=(c=d.userId,l=n.url,"sendbird:".concat(c,"@groupchannel/").concat(l,"/message/sync.meta"));var b=function(e,t){return"sendbird:".concat(e,"@groupchannel/").concat(t,"/message/sync")}(d.userId,n.url);this._prevSync=new Ie(b,(function(e){return Object(o.Gb)(a,void 0,void 0,(function(){var t,r,i,a,c,l,h,d,p,b,v,y;return Object(o.Rb)(this,(function(_){switch(_.label){case 0:return t={hasNext:!0,nextToken:0},this._prevSyncLoopCount++,[4,this.loadMetadata(e)];case 1:if(_.sent(),m.debug("message background prev sync from",null===(l=this._metadata)||void 0===l?void 0:l.range.top),null===(h=this._metadata)||void 0===h?void 0:h.previousComplete)return[3,10];_.label=2;case 2:return _.trys.push([2,5,8,9]),[4,s.F.of(this._iid).getMessagesByTimestamp(this._channel.url,this._channel.channelType,(null===(p=null===(d=this._metadata)||void 0===d?void 0:d.range)||void 0===p?void 0:p.top)?this._metadata.range.top:e,{prevResultSize:this._limit,nextResultSize:0,replyType:o.ub.ALL,includeReactions:!0,includeMetaArray:!0,includeParentMessageInfo:!0,includeThreadInfo:!0},o.x.SYNC_MESSAGE_BACKGROUND)];case 3:return(r=_.sent()).length>0&&(i=r.map((function(e){return e.createdAt})),(null===(b=this._metadata)||void 0===b?void 0:(c=b.range).intersect.apply(c,Object(o.dc)([],Object(o.ec)(i),!1)))?this.extendRange(r):this._metadata={range:new u.h({top:Math.min.apply(Math,Object(o.dc)([],Object(o.ec)(i),!1)),bottom:Math.max.apply(Math,Object(o.dc)([],Object(o.ec)(i),!1))}),previousComplete:!1}),t.hasNext=r.length>=this._limit&&this._prevSyncLoopCount<1,this._metadata&&(t.nextToken=this._metadata.range.top,this._metadata.previousComplete=r.length<this._limit),m.debug("message background prev sync progress",t),[4,this.saveMetadata()];case 4:return _.sent(),[3,9];case 5:return a=_.sent(),m.debug("message background prev sync error",a),a instanceof o.fc&&a.isInvalidTokenError?[4,this.clearMetadata()]:[3,7];case 6:_.sent(),_.label=7;case 7:throw a;case 8:return g.put(new o.Lb({type:o.eb.FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:n.url,measured_on:"back_sync",event:"cache_fetch",max_db_size:null!==(y=null===(v=f.localCacheConfig)||void 0===v?void 0:v.maxSize)&&void 0!==y?y:0,use_local_cache:f.localCacheEnabled}})),[7];case 9:return[3,11];case 10:t.hasNext=!1,_.label=11;case 11:return[2,t]}}))}))})),this._nextSync=new Ie(b,(function(e){return Object(o.Gb)(a,void 0,void 0,(function(){var t,r,i,a,c,l,h,d,p,b,v;return Object(o.Rb)(this,(function(y){switch(y.label){case 0:return t={hasNext:!0,nextToken:0},this._nextSyncLoopCount++,[4,this.loadMetadata(e)];case 1:y.sent(),m.debug("message background next sync from",null===(l=this._metadata)||void 0===l?void 0:l.range.bottom),y.label=2;case 2:return y.trys.push([2,5,6,7]),[4,s.F.of(this._iid).getMessagesByTimestamp(this._channel.url,this._channel.channelType,(null===(d=null===(h=this._metadata)||void 0===h?void 0:h.range)||void 0===d?void 0:d.bottom)?this._metadata.range.bottom:e,{prevResultSize:0,nextResultSize:this._limit,replyType:o.ub.ALL,includeReactions:!0,includeMetaArray:!0,includeParentMessageInfo:!0,includeThreadInfo:!0},o.x.SYNC_MESSAGE_BACKGROUND)];case 3:return(r=y.sent()).length>0&&(i=r.map((function(e){return e.createdAt})),(null===(p=this._metadata)||void 0===p?void 0:(c=p.range).intersect.apply(c,Object(o.dc)([],Object(o.ec)(i),!1)))?this.extendRange(r):this._metadata={range:new u.h({top:Math.min.apply(Math,Object(o.dc)([],Object(o.ec)(i),!1)),bottom:Math.max.apply(Math,Object(o.dc)([],Object(o.ec)(i),!1))}),previousComplete:!1}),t.hasNext=r.length>=this._limit&&this._nextSyncLoopCount<1,this._metadata&&(t.nextToken=this._metadata.range.bottom),m.debug("message background next sync progress",t),[4,this.saveMetadata()];case 4:return y.sent(),[3,7];case 5:throw a=y.sent(),m.debug("message background next sync error",a),a;case 6:return g.put(new o.Lb({type:o.eb.FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:n.url,measured_on:"back_sync",event:"cache_fetch",max_db_size:null!==(v=null===(b=f.localCacheConfig)||void 0===b?void 0:b.maxSize)&&void 0!==v?v:0,use_local_cache:f.localCacheEnabled}})),[7];case 7:return[2,t]}}))}))})),this._connectionEventContext=p.on((function(e){e instanceof o.nc&&(e.stateType===o.oc.CONNECTED?a.resume():a.pause())}))}return e.of=function(t,n){return Re[t]||(Re[t]={}),Re[t][n.url]||(Re[t][n.url]=new e({_iid:t,channel:n})),Re[t][n.url].ref++,Re[t][n.url]},e.clear=function(e,t){Re[e]&&Re[e][t]&&(Re[e][t].close(),delete Re[e])},Object.defineProperty(e.prototype,"range",{get:function(){var e,t;return null!==(t=null===(e=this._metadata)||void 0===e?void 0:e.range)&&void 0!==t?t:new u.h({})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"previousComplete",{get:function(){var e;return!!(null===(e=this._metadata)||void 0===e?void 0:e.previousComplete)},enumerable:!1,configurable:!0}),e.prototype.isWrappingMessages=function(e){var t;return null===(t=this.range)||void 0===t?void 0:t.includes.apply(t,Object(o.dc)([],Object(o.ec)(e.map((function(e){return e.createdAt}))),!1))},e.prototype.extendRange=function(e){var t;this._metadata&&(t=this._metadata.range).extends.apply(t,Object(o.dc)([],Object(o.ec)(e.map((function(e){return e.createdAt}))),!1))},e.prototype.loadMetadata=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){var t;return Object(o.Rb)(this,(function(n){switch(n.label){case 0:return this._metadata?[3,2]:[4,o.v.of(this._iid).cacheContext.preference.get(this._metadataKey)];case 1:(t=n.sent())?t.range.bottom<e?this._metadata={range:new u.h({}),previousComplete:!1}:this._metadata={range:new u.h(t.range),previousComplete:t.previousComplete}:this._metadata={range:new u.h({}),previousComplete:!1},n.label=2;case 2:return[2,this._metadata]}}))}))},e.prototype.saveMetadata=function(){return Object(o.Gb)(this,void 0,void 0,(function(){return Object(o.Rb)(this,(function(e){switch(e.label){case 0:return this._metadata?[4,o.v.of(this._iid).cacheContext.preference.set(this._metadataKey,this._metadata)]:[3,2];case 1:return e.sent(),[2,!0];case 2:return[2,!1]}}))}))},e.prototype.clearMetadata=function(){return Object(o.Gb)(this,void 0,void 0,(function(){return Object(o.Rb)(this,(function(e){switch(e.label){case 0:return[4,o.v.of(this._iid).cacheContext.preference.remove(this._metadataKey)];case 1:return e.sent(),this._metadata=void 0,[2]}}))}))},e.prototype.resume=function(e){var t,n,r,i;void 0===e&&(e=Date.now());var s=o.v.of(this._iid),a=s.logger;s.connectionManager.isConnected&&(a.debug("message background sync resume()"),this._prevSyncLoopCount=this._nextSyncLoopCount=0,this._metadata&&this._metadata.previousComplete||this._prevSync.start(null!==(n=null===(t=this._metadata)||void 0===t?void 0:t.range.top)&&void 0!==n?n:e),this._nextSync.start(null!==(i=null===(r=this._metadata)||void 0===r?void 0:r.range.bottom)&&void 0!==i?i:e))},e.prototype.pause=function(){o.v.of(this._iid).logger.debug("message background sync stop()"),this._prevSync.stop(),this._nextSync.stop()},e.prototype.close=function(){this.ref--,this.ref<=0&&(this.ref=0,this.pause(),this._connectionEventContext.close(),delete Re[this._iid][this._channel.url])},e}(),Pe={},De=function(){function e(e){var t=e._iid,n=e.channel,r=this;this.ref=0,this._iid=t,this._channel=n;var i,a,u=o.v.of(this._iid),c=u.logger,l=u.sdkState,h=u.dispatcher;this._metadataKey=(i=l.userId,a=n.url,"sendbird:".concat(i,"@groupchannel/").concat(a,"/message/changelogs.meta"));var d=function(e,t){return"sendbird:".concat(e,"@groupchannel/").concat(t,"/message/changelogs")}(l.userId,this._channel.url);this._sync=new Ie(d,(function(){return Object(o.Gb)(r,void 0,void 0,(function(){var e,t,n,r,i,a,u,l;return Object(o.Rb)(this,(function(h){switch(h.label){case 0:return e={hasNext:!0,nextToken:0},[4,this.loadMetadata()];case 1:h.sent(),c.debug("message changelog sync from",null===(l=this._metadata)||void 0===l?void 0:l.token),h.label=2;case 2:return h.trys.push([2,5,,8]),[4,s.F.of(this._iid).getMessageChangelogs(this._channel.url,this._channel.channelType,this._metadata.token,{replyType:o.ub.ALL,includeReactions:!0,includeThreadInfo:!0,includeMetaArray:!0,includeParentMessageInfo:!0},o.x.SYNC_MESSAGE_CHANGELOGS)];case 3:return t=h.sent(),n=t.updatedMessages,r=t.deletedMessageIds,i=t.hasMore,a=t.token,e.hasNext=i,e.nextToken=a,(n.length>0||r.length>0)&&this._metadata&&(this._metadata.token=a),c.debug("message changelog sync progress",e),[4,this.saveMetadata()];case 4:return h.sent(),[3,8];case 5:return u=h.sent(),c.debug("message changelog sync error",u),u instanceof o.fc&&u.isInvalidTokenError?[4,this.clearMetadata()]:[3,7];case 6:h.sent(),h.label=7;case 7:throw u;case 8:return[2,e]}}))}))})),this._connectionEventContext=h.on((function(e){e instanceof o.nc&&(e.stateType===o.oc.CONNECTED?r.resume():r.pause())}))}return e.of=function(t,n){return Pe[t]||(Pe[t]={}),Pe[t][n.url]||(Pe[t][n.url]=new e({_iid:t,channel:n})),Pe[t][n.url].ref++,Pe[t][n.url]},e.clear=function(e,t){Pe[e]&&Pe[e][t]&&(Pe[e][t].close(),delete Pe[e])},e.prototype.loadMetadata=function(){return Object(o.Gb)(this,void 0,void 0,(function(){var e,t,n,r;return Object(o.Rb)(this,(function(i){switch(i.label){case 0:return this._metadata?[3,2]:(e=o.v.of(this._iid),t=e.cacheContext,n=e.firstConnectedAt,[4,t.preference.get(this._metadataKey)]);case 1:r=i.sent(),this._metadata={token:r?r.token:n},i.label=2;case 2:return[2,this._metadata]}}))}))},e.prototype.saveMetadata=function(){return Object(o.Gb)(this,void 0,void 0,(function(){return Object(o.Rb)(this,(function(e){switch(e.label){case 0:return this._metadata?[4,o.v.of(this._iid).cacheContext.preference.set(this._metadataKey,this._metadata)]:[3,2];case 1:return e.sent(),[2,!0];case 2:return[2,!1]}}))}))},e.prototype.clearMetadata=function(){return Object(o.Gb)(this,void 0,void 0,(function(){return Object(o.Rb)(this,(function(e){switch(e.label){case 0:return[4,o.v.of(this._iid).cacheContext.preference.remove(this._metadataKey)];case 1:return e.sent(),this._metadata=void 0,[2]}}))}))},e.prototype.resume=function(){var e=o.v.of(this._iid),t=e.logger;e.connectionManager.isConnected&&(t.debug("message changelog sync resume()"),this._sync.start(0))},e.prototype.pause=function(){var e=o.v.of(this._iid),t=e.logger;e.connectionManager,t.debug("message changelog sync pause()"),this._sync.stop()},e.prototype.close=function(){this.ref--,this.ref<=0&&(this.ref=0,this.pause(),this._connectionEventContext.close(),delete Pe[this._iid][this._channel.url])},e}(),Ue={},Le=function(){function e(e){var t=e._iid,n=e.channel,r=e.hasPollMessage,i=this;this.ref=0,this._iid=t,this._channel=n;var s,a,u=o.v.of(this._iid),c=u.logger,l=u.sdkState,h=u.dispatcher;this._metadataKey=(s=l.userId,a=n.url,"sendbird:".concat(s,"@groupchannel/").concat(a,"/poll/changelogs.meta"));var d=function(e,t){return"sendbird:".concat(e,"@groupchannel/").concat(t,"/poll/changelogs")}(l.userId,this._channel.url);this._sync=new Ie(d,(function(){return Object(o.Gb)(i,void 0,void 0,(function(){var e,t,n,i,s,a,u,l;return Object(o.Rb)(this,(function(h){switch(h.label){case 0:return e={hasNext:!0,nextToken:0},[4,this.loadMetadata()];case 1:return h.sent(),c.debug("poll changelog sync from",null===(l=this._metadata)||void 0===l?void 0:l.token),(t=!this._metadata||!this._metadata.token)?[4,r()]:[3,3];case 2:t=!h.sent(),h.label=3;case 3:if(t)return[2,{hasNext:!1,nextToken:0}];this._metadata||(n=o.v.of(this._iid).firstConnectedAt,this._metadata={token:n}),h.label=4;case 4:return h.trys.push([4,7,,10]),[4,o.M.of(this._iid).getPollChangeLogs(this._channel.url,this._channel.channelType,this._metadata.token)];case 5:return i=h.sent(),s=i.hasMore,a=i.token,e.hasNext=s,e.nextToken=a,this._metadata.token=a,c.debug("poll changelog sync progress",e),[4,this.saveMetadata()];case 6:return h.sent(),[3,10];case 7:return u=h.sent(),c.debug("poll changelog sync error",u),u instanceof o.fc&&u.isInvalidTokenError?[4,this.clearMetadata()]:[3,9];case 8:h.sent(),h.label=9;case 9:throw u;case 10:return[2,e]}}))}))})),this._connectionEventContext=h.on((function(e){e instanceof o.nc&&(e.stateType===o.oc.CONNECTED?i.resume():i.pause())}))}return e.of=function(t,n,r){return Ue[t]||(Ue[t]={}),Ue[t][n.url]||(Ue[t][n.url]=new e({_iid:t,channel:n,hasPollMessage:r})),Ue[t][n.url].ref++,Ue[t][n.url]},e.prototype.loadMetadata=function(){return Object(o.Gb)(this,void 0,void 0,(function(){var e;return Object(o.Rb)(this,(function(t){switch(t.label){case 0:return this._metadata?[3,2]:[4,o.v.of(this._iid).cacheContext.preference.get(this._metadataKey)];case 1:e=t.sent(),this._metadata=e?{token:e.token}:void 0,t.label=2;case 2:return[2]}}))}))},e.prototype.saveMetadata=function(){return Object(o.Gb)(this,void 0,void 0,(function(){return Object(o.Rb)(this,(function(e){switch(e.label){case 0:return this._metadata?[4,o.v.of(this._iid).cacheContext.preference.set(this._metadataKey,this._metadata)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},e.prototype.clearMetadata=function(){return Object(o.Gb)(this,void 0,void 0,(function(){return Object(o.Rb)(this,(function(e){switch(e.label){case 0:return[4,o.v.of(this._iid).cacheContext.preference.remove(this._metadataKey)];case 1:return e.sent(),this._metadata=void 0,[2]}}))}))},e.prototype.resume=function(){o.v.of(this._iid).logger.debug("poll changelog sync resume()"),this._sync.start(0)},e.prototype.pause=function(){o.v.of(this._iid).logger.debug("poll changelog sync pause()"),this._sync.stop()},e.prototype.close=function(){this.ref--,this.ref<=0&&(this.ref=0,this.pause(),this._connectionEventContext.close(),delete Ue[this._iid][this._channel.url])},e}(),Fe=function(e,t){return t instanceof s.a?e.findIndex((function(e){return e instanceof s.a&&t.isIdentical(e)})):e.findIndex((function(e){return e.isIdentical(t)}))},Be=function(e,t){return e.findIndex((function(e){return e.messageId===t}))},He=function(e,t){if(e.length>0){for(var n=0,r=e.length-1,i=Math.floor((n+r)/2);n<r;){var o=e[i].createdAt-t.createdAt;if(o>0)r=i,i=Math.floor((n+r)/2);else{if(!(o<0))return i;n=i+1,i=Math.floor((n+r)/2)}}return e[i].createdAt>t.createdAt?i:i+1}return e.length},qe=function(e){function t(t){var n=t.channels,r=t.source,i=t.isWebSocketEventComing,o=void 0!==i&&i,s=t.data,a=void 0===s?null:s,u=e.call(this)||this;return u.channels=n,u.source=r,u.isWebSocketEventComing=o,u.data=a,u}return Object(o.A)(t,e),t}(o.cb),Ve=(function(e){function t(t){var n=t.channelUrls,r=t.source,i=t.isWebSocketEventComing,o=void 0!==i&&i,s=e.call(this)||this;return s.channelUrls=n,s.source=r,s.isWebSocketEventComing=o,s}Object(o.A)(t,e)}(o.cb),function(e){function t(t){var n,r,i,s,a,u,c,l,h,d,f=this;return(f=e.call(this)||this).method=o.a.GET,f.path="".concat(Object(o.pb)(t.channelType),"/").concat(t.channelUrl,"/messages_gap"),f.params=Object(o.Tb)({prev_start_ts:t.prevStart,prev_end_ts:t.prevEnd,prev_cache_count:t.prevCount,next_start_ts:t.nextStart,next_end_ts:t.nextEnd,next_cache_count:t.nextCount,huge_gap_threshold:null!==(n=t.threshold)&&void 0!==n?n:null,reverse:!0,custom_types:null!==(r=t.customTypes)&&void 0!==r?r:["*"],message_type:null!==(i=t.messageType)&&void 0!==i?i:null,include_reply_type:null!==(s=t.replyType)&&void 0!==s?s:o.ub.NONE,include_reactions:null===(a=t.includeReactions)||void 0===a||a,include_meta_array:null===(u=t.includeMetaArray)||void 0===u||u,include_thread_info:null===(c=t.includeThreadInfo)||void 0===c||c,include_parent_message_info:null===(l=t.includeParentMessageInfo)||void 0===l||l,with_sorted_meta_array:null===(h=t.includeMetaArray)||void 0===h||h,show_subchannel_messages_only:null!==(d=t.showSubchannelMessagesOnly)&&void 0!==d&&d,include_poll_details:!0,checking_continuous_messages:t.checkingContinuousMessages}),f}return Object(o.A)(t,e),t}(o.Ub)),Ge=function(e){function t(t,n){var r,i,o,a,u,c,l=this;return(l=e.call(this,t,n)||this).isHugeGap=n.is_huge_gap,l.prevMessages=(null!==(r=n.prev_messages)&&void 0!==r?r:[]).map((function(e){return Object(s.f)(t,e)})),l.prevHasMore=null!==(i=n.prev_hasmore)&&void 0!==i&&i,l.isContinuousPrevMessages=null!==(o=n.is_continuous_prev_messages)&&void 0!==o&&o,l.nextMessages=(null!==(a=n.next_messages)&&void 0!==a?a:[]).map((function(e){return Object(s.f)(t,e)})),l.nextHasmore=null!==(u=n.next_hasmore)&&void 0!==u&&u,l.isContinuousNextMessages=null!==(c=n.is_continuous_next_messages)&&void 0!==c&&c,l}return Object(o.A)(t,e),t}(o.Wb),ze=function(e){this.source=e},We=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.A)(t,e),t}(ze),Ke=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.A)(t,e),t}(ze),Ye=function(e){this.source=e},Qe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.A)(t,e),t}(Ye),Je=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.A)(t,e),t}(Ye),Ze={includeMetaArray:!0,includeReactions:!0,includeThreadInfo:!0,includeParentMessageInfo:!0};!function(e){e.CACHE_AND_REPLACE_BY_API="cache_and_replace_by_api"}(je||(je={}));var $e,Xe,et,tt=function(){function e(){this._onCacheResult=o.wb,this._onApiResult=o.wb}return e.prototype._invokeResponse=function(e,t,n){var r=this;Object(o.b)((function(){return Object(o.Gb)(r,void 0,void 0,(function(){return Object(o.Rb)(this,(function(r){switch(e){case"local":this._onCacheResult(t,n);break;case"remote":this._onApiResult(t,n)}return[2]}))}))}))},e.prototype.onCacheResult=function(e){return this._onCacheResult=e,this},e.prototype.onApiResult=function(e){return this._onApiResult=e,this},e}(),nt=function(e){function t(t,n){return e.call(this,t,Object(o.Vb)(Object(o.Vb)({},n),{channelManager:xe.of(t)}))||this}return Object(o.A)(t,e),t.prototype.setMessageCollectionHandler=function(e){this._setBaseMessageCollectionHandler(e)},t.prototype._activate=function(){return Object(o.Gb)(this,void 0,void 0,(function(){var t;return Object(o.Rb)(this,(function(n){switch(n.label){case 0:return[4,e.prototype._activate.call(this)];case 1:return n.sent(),[4,this.channel.getMyMutedInfo()];case 2:return(t=n.sent()).isMuted&&-1!==t.remainingDuration&&this._startCheckMyMutedTimer(t.remainingDuration),[2]}}))}))},t}(function(){function e(e,t){var n=t.filter,r=t.startingPoint,i=t.limit,a=t.channel,c=t.channelManager,l=t.disableBackgroundSync,h=void 0!==l&&l,d=this;this._messages=[],this._unsentMessages=[],this._iid=e,this._key="mc-".concat(Object(o.bc)()),this._isDisposed=!1,this.filter=null!=n?n:new s.Cb,this._channel=a,this._syncRange=new u.h({}),this._hasPrevious=!0,this._hasNext=!0,this._startingPoint="number"==typeof r?r:Date.now()+6e5,this._limit=i||s.G,this._channelManager=c,this._channelManager.subscribeChannelEvent(this._key,{onUpdate:function(e,t,n){var r=e.findIndex((function(e){return e.isIdentical(d.channel)}));r>=0&&(d._replaceChannelOfCollection(e[r]),d.channel._runIfHandleableWithGroupChannel((function(e){switch(t){case o.x.EVENT_CHANNEL_UPDATED:var r=!1;for(var i in d._messages)if(d._messages[i].createdAt>=e.messageOffsetTimestamp){r=!0;var s=parseInt(i);if(s>0){var a=d._messages.splice(0,s);d._removeMessagesFromView(a.map((function(e){return e.messageId})),o.x.EVENT_MESSAGE_OFFSET_UPDATED)}break}!r&&d._messages.length>0&&d._removeMessagesFromView(d._messages.map((function(e){return e.messageId})),o.x.EVENT_MESSAGE_OFFSET_UPDATED);break;case o.x.EVENT_CHANNEL_UNMUTED:var u=o.v.of(d._iid).sdkState,c=n;u.userId===c&&d._clearCheckMyMutedTimer();break;case o.x.EVENT_CHANNEL_MUTED:u=o.v.of(d._iid).sdkState;var l=n;u.userId===l&&-1!==e._myMutedRemainingTime&&d._startCheckMyMutedTimer(e._myMutedRemainingTime);break;case o.x.EVENT_CHANNEL_LEFT:e.isPublic&&d._clearCheckMyMutedTimer()}Object(o.b)((function(){return Object(o.Gb)(d,void 0,void 0,(function(){var e,n;return Object(o.Rb)(this,(function(r){return e=this._createChannelEventContext(t),I(t)&&(null===(n=this._handler)||void 0===n?void 0:n.onChannelUpdated)&&this._handler.onChannelUpdated(e,this.channel),[2]}))}))}))})))},onRemove:function(e,t){e.indexOf(d.channel.url)>=0&&(d._clearCheckMyMutedTimer(),Object(o.b)((function(){return Object(o.Gb)(d,void 0,void 0,(function(){var e,n;return Object(o.Rb)(this,(function(r){return e=this._createChannelEventContext(t),(null===(n=this._handler)||void 0===n?void 0:n.onChannelDeleted)&&this._handler.onChannelDeleted(e,this.channel.url),[2]}))}))})))}}),this._channelManager.subscribeMessageEvent(this._key,{onUpdate:function(e,t){var n,r,i=[],s=[];try{for(var a=Object(o.gc)(e),u=a.next();!u.done;u=a.next()){var c=u.value;c.channelUrl===d._channel.url&&(d.filter.match(c)?i.push(c):s.push(c.messageId))}}catch(e){n={error:e}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}if(Object(o.Mb)(t)){if(i.length>0)switch(t){case o.x.LOCAL_MESSAGE_CANCELED:case o.x.LOCAL_MESSAGE_RESEND_STARTED:case o.x.EVENT_MESSAGE_SENT_FAILED:case o.x.EVENT_MESSAGE_SENT_SUCCESS:case o.x.EVENT_MESSAGE_UPDATED:case o.x.EVENT_MESSAGE_THREADINFO_UPDATED:case o.x.EVENT_MESSAGE_REACTION_UPDATED:case o.x.SYNC_MESSAGE_CHANGELOGS:d._updateMessagesToView(i,t);break;case o.x.EVENT_MESSAGE_SENT_PENDING:d._addMessagesToView(i,t);break;case o.x.EVENT_MESSAGE_RECEIVED:d.hasNext||d._addMessagesToView(i,t);break;case o.x.SYNC_MESSAGE_FILL:d._addMessagesToView(i,t)}s.length>0&&d._removeMessagesFromView(s,t)}},onRemove:function(e,t){d._removeMessagesFromView(e,t)},onRemoveUnsent:function(e,t){d._removeUnsentMessageFromView(e,t)},onPollChangeLogUpdate:function(e,t){d._updatePollsToView(e,t)},onPollUpdate:function(e,t){d._applyPollUpdateEventToView(e,t)},onPollVote:function(e,t){d._applyPollVoteEventToView(e,t)}});var f=o.v.of(this._iid),p=f.cacheContext,m=f.dispatcher;this._channel._updateMessageCollectionLastAccessedAt();var g=this._createChannelUpdateEventCommand(o.x.CHANNEL_LASTACCESSEDAT_UPDATED);g&&m.dispatch(g),!h&&this._shouldStartBackgroundSync()&&(this._backgroundSync=Ne.of(this._iid,this._channel),this._backgroundSync.resume(this._startingPoint)),this._changelogSync=De.of(this._iid,this._channel),this._changelogSync.resume(),this._pollChangelogSync=Le.of(this._iid,this._channel,this._hasPollMessage.bind(this)),this._pollChangelogSync.resume(),this._prevFill=new Ie(this._key,(function(e){return Object(o.Gb)(d,void 0,void 0,(function(){var t,n,r,i,s,a,u;return Object(o.Rb)(this,(function(c){switch(c.label){case 0:return[4,this._getRemoteMessages(e,{prevLimit:this._limit,source:o.x.SYNC_MESSAGE_FILL,checkingContinuousMessages:p.localCacheEnabled})];case 1:return t=c.sent(),n=t.messages,r=t.isContinuousMessages,n.length>0?(i=Math.min.apply(Math,Object(o.dc)([],Object(o.ec)(n.map((function(e){return e.createdAt}))),!1)),this._syncRange.extends(i),r&&(null===(s=this._backgroundSync)||void 0===s||s.range.extends(i)),[2,{hasNext:n.length>=this._limit&&this.viewTop<i,nextToken:this._syncRange.top}]):(b.put(new o.Lb({type:o.eb.FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:this.channel.url,measured_on:"gap_check",event:"cache_fetch",max_db_size:null!==(u=null===(a=p.localCacheConfig)||void 0===a?void 0:a.maxSize)&&void 0!==u?u:0,use_local_cache:p.localCacheEnabled}})),[2,{hasNext:!1,nextToken:0}])}}))}))})),this._nextFill=new Ie(this._key,(function(e){return Object(o.Gb)(d,void 0,void 0,(function(){var t,n,r,i,s,a,u;return Object(o.Rb)(this,(function(c){switch(c.label){case 0:return[4,this._getRemoteMessages(e,{nextLimit:this._limit,source:o.x.SYNC_MESSAGE_FILL,checkingContinuousMessages:p.localCacheEnabled})];case 1:return t=c.sent(),n=t.messages,r=t.isContinuousMessages,n.length>0?(i=Math.max.apply(Math,Object(o.dc)([],Object(o.ec)(n.map((function(e){return e.createdAt}))),!1)),this._syncRange.extends(i),r&&(null===(s=this._backgroundSync)||void 0===s||s.range.extends(i)),[2,{hasNext:!(n.length>=this._limit&&this._hasNext)||this.viewBottom>i,nextToken:this._syncRange.bottom}]):(b.put(new o.Lb({type:o.eb.FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:this.channel.url,measured_on:"gap_check",event:"cache_fetch",max_db_size:null!==(u=null===(a=p.localCacheConfig)||void 0===a?void 0:a.maxSize)&&void 0!==u?u:0,use_local_cache:p.localCacheEnabled}})),[2,{hasNext:!1,nextToken:0}])}}))}))})),this._connectionEventContext=m.on((function(e){if(e instanceof o.nc)switch(e.stateType){case o.oc.CONNECTED:Object(o.o)((function(){return Object(o.Gb)(d,void 0,void 0,(function(){return Object(o.Rb)(this,(function(e){return this._activate(),[2]}))}))}));break;case o.oc.LOGOUT:d.dispose();break;default:d._clearCheckMyMutedTimer(),d._prevFill.stop(),d._nextFill.stop()}}));var b=o.v.of(this._iid).statLogCollector;b.put(new o.db({type:o.eb.FEATURE_LOCALCACHE,data:{use_local_cache:p.localCacheEnabled,collection_interface:{message:!0}}}))}return Object.defineProperty(e.prototype,"channel",{get:function(){return this._channel},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"succeededMessages",{get:function(){return Object(o.dc)([],Object(o.ec)(this._messages),!1)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"failedMessages",{get:function(){return this._unsentMessages.filter((function(e){return e.sendingStatus===o.jb.FAILED}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pendingMessages",{get:function(){return this._unsentMessages.filter((function(e){return e.sendingStatus===o.jb.PENDING}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasPrevious",{get:function(){return this._hasPrevious},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasNext",{get:function(){return this._hasNext},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"viewTop",{get:function(){return Math.min.apply(Math,Object(o.dc)(Object(o.dc)([],Object(o.ec)(this._messages.map((function(e){return e.createdAt}))),!1),[Number.MAX_SAFE_INTEGER],!1))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"viewBottom",{get:function(){return Math.max.apply(Math,Object(o.dc)(Object(o.dc)([],Object(o.ec)(this._messages.map((function(e){return e.createdAt}))),!1),[0],!1))},enumerable:!1,configurable:!0}),e.prototype._activate=function(){return Object(o.Gb)(this,void 0,void 0,(function(){return Object(o.Rb)(this,(function(e){switch(e.label){case 0:return o.v.of(this._iid).logger.debug("check huge gap"),this._checkHugeGap(),[4,this._refreshChannel(o.x.SYNC_CHANNEL_CHANGELOGS)];case 1:return e.sent(),[2]}}))}))},e.prototype._replaceChannelOfCollection=function(e){this._channel.isGroupChannel()?this._channel=e:this._channel.isFeedChannel()&&(this._channel._groupChannel=e._groupChannel)},e.prototype._shouldStartBackgroundSync=function(){var e=o.v.of(this._iid).cacheContext;return this.channel.isGroupChannel()?e.localCacheEnabled&&!this.channel.isSuper:e.localCacheEnabled},e.prototype._createChannelEventContext=function(e){switch(!0){case this.channel.isGroupChannel():return new We(e);case this.channel.isFeedChannel():return new Ke(e);default:throw new o.fc({code:o.rb.WRONG_CHANNEL_TYPE,message:"Wrong channel type"})}},e.prototype._createMessageEventContext=function(e){switch(!0){case this.channel.isGroupChannel():return new Qe(e);case this.channel.isFeedChannel():return new Je(e);default:throw new o.fc({code:o.rb.WRONG_CHANNEL_TYPE,message:"Wrong channel type"})}},e.prototype._createChannelUpdateEventCommand=function(e){switch(!0){case this.channel.isGroupChannel():return new R({channels:[this._channel],source:e});case this.channel.isFeedChannel():return new qe({channels:[this._channel],source:e});default:return null}},e.prototype._setBaseMessageCollectionHandler=function(e){this._handler=e},e.prototype._filterUnderOffsetMessage=function(e){return e},e.prototype._addMessagesToView=function(e,t){var n,r,i=this,a=this._filterUnderOffsetMessage(e),u=[],c=[];try{for(var l=Object(o.gc)(a),h=l.next();!h.done;h=l.next()){var d=h.value;if(t===o.x.SYNC_MESSAGE_FILL)if(d.messageId>0){if((g=Fe(this._messages,d))<0){Fe(this._unsentMessages,d)<0&&u.push(d);var f=He(this._messages,d);this._messages.splice(f,0,d)}}else d instanceof s.a&&(g=Fe(this._unsentMessages,d))<0&&Fe(this._messages,d)<0&&(this._unsentMessages.push(d),u.push(d));else if(d.messageId>0){if((g=Fe(this._messages,d))<0){var p=Fe(this._unsentMessages,d);p<0?u.push(d):(this._unsentMessages.splice(p,1),c.push(d)),f=He(this._messages,d),this._messages.splice(f,0,d)}else c.push(d),this._messages[g]=d;if(d.updatedAt>0){var m=this._updateChildMessagesInView(d);c.push.apply(c,Object(o.dc)([],Object(o.ec)(m),!1))}}else if(d instanceof s.a){var g;(g=Fe(this._unsentMessages,d))<0?Fe(this._messages,d)<0&&(this._unsentMessages.push(d),u.push(d)):(c.push(d),this._unsentMessages[g]=d)}}}catch(e){n={error:e}}finally{try{h&&!h.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}Object(o.Mb)(t)&&Object(o.b)((function(){return Object(o.Gb)(i,void 0,void 0,(function(){var e,n,r,i,s;return Object(o.Rb)(this,(function(o){return e=this._createMessageEventContext(t),u.length>0&&(null===(r=null===(n=this._handler)||void 0===n?void 0:n.onMessagesAdded)||void 0===r||r.call(n,e,this.channel,u)),c.length>0&&(null===(s=null===(i=this._handler)||void 0===i?void 0:i.onMessagesUpdated)||void 0===s||s.call(i,e,this.channel,c)),[2]}))}))}))},e.prototype._updateChildMessagesInView=function(e){var t=[];return this._messages.forEach((function(n){n.parentMessageId===e.messageId&&n.applyParentMessage(e)&&t.push(n)})),t},e.prototype._updatePollsToView=function(e,t){var n,r,i=this,s=[];try{for(var a=Object(o.gc)(e),u=a.next();!u.done;u=a.next()){var c=u.value,l=Be(this._messages,c.messageId);if(l>=0){var h=this._messages[l];h&&h.applyPoll(c),s.push(h)}}}catch(e){n={error:e}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}return s.length>0&&Object(o.Mb)(t)&&Object(o.b)((function(){return Object(o.Gb)(i,void 0,void 0,(function(){var e,n,r;return Object(o.Rb)(this,(function(i){return e=this._createMessageEventContext(t),s.length>0&&(null===(r=(n=this._handler).onMessagesUpdated)||void 0===r||r.call(n,e,this.channel,s)),[2]}))}))})),s},e.prototype._applyPollUpdateEventToView=function(e,t){var n=this,r=Be(this._messages,e.messageId);if(r>=0){var i=this._messages[r];i&&i.isUserMessage()&&i.poll&&i.poll.applyPollUpdateEvent(e)&&Object(o.Mb)(t)&&Object(o.b)((function(){return Object(o.Gb)(n,void 0,void 0,(function(){var e,n,r;return Object(o.Rb)(this,(function(o){return e=this._createMessageEventContext(t),null===(r=null===(n=this._handler)||void 0===n?void 0:n.onMessagesUpdated)||void 0===r||r.call(n,e,this.channel,[i]),[2]}))}))}))}},e.prototype._applyPollVoteEventToView=function(e,t){var n=this,r=Be(this._messages,e.messageId);if(r>=0){var i=this._messages[r];i&&i.isUserMessage()&&i.poll&&i.poll.applyPollVoteEvent(e)&&Object(o.Mb)(t)&&Object(o.b)((function(){return Object(o.Gb)(n,void 0,void 0,(function(){var e,n,r;return Object(o.Rb)(this,(function(o){return e=this._createMessageEventContext(t),null===(r=null===(n=this._handler)||void 0===n?void 0:n.onMessagesUpdated)||void 0===r||r.call(n,e,this.channel,[i]),[2]}))}))}))}},e.prototype._updateMessagesToView=function(e,t){var n,r,i=this,a=[],u=[],c=[];try{for(var l=Object(o.gc)(e),h=l.next();!h.done;h=l.next()){var d,f=h.value;if(f.messageId>0)if((d=Fe(this._messages,f))>=0)u.push(f),this._messages[d]=f;else{var p=Fe(this._unsentMessages,f);if(p>=0){var m=this._unsentMessages.splice(p,1);if(this.hasNext&&m.length>0)c.push(m[0]);else{u.push(f);var g=He(this._messages,f);this._messages.splice(g,0,f)}}else{var b=this._messages.map((function(e){return e.createdAt}));(f.createdAt<Math.min.apply(Math,Object(o.dc)([],Object(o.ec)(b),!1))&&!this._hasPrevious||f.createdAt>Math.max.apply(Math,Object(o.dc)([],Object(o.ec)(b),!1))&&!this._hasNext)&&a.push(f)}}else f instanceof s.a&&(d=Fe(this._unsentMessages,f))>=0&&(u.push(f),this._unsentMessages[d]=f)}}catch(e){n={error:e}}finally{try{h&&!h.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}return Object(o.Mb)(t)&&Object(o.b)((function(){return Object(o.Gb)(i,void 0,void 0,(function(){var e,n,r,i,s;return Object(o.Rb)(this,(function(o){return e=this._createMessageEventContext(t),u.length>0?null===(r=null===(n=this._handler)||void 0===n?void 0:n.onMessagesUpdated)||void 0===r||r.call(n,e,this.channel,u):c.length>0?null===(s=null===(i=this._handler)||void 0===i?void 0:i.onMessagesDeleted)||void 0===s||s.call(i,e,this.channel,[],c):a.length>0&&this._addMessagesToView(a,t),[2]}))}))})),u},e.prototype._removeMessagesFromView=function(e,t){var n,r,i=this,s=[],a=[],u=function(e){var t=c._messages.findIndex((function(t){return t.messageId===e}));if(t>=0){var n=c._messages[t];s.push(n.messageId),a.push(n),c._messages.splice(t,1)}},c=this;try{for(var l=Object(o.gc)(e),h=l.next();!h.done;h=l.next())u(h.value)}catch(e){n={error:e}}finally{try{h&&!h.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}return Object(o.Mb)(t)&&a.length>0&&Object(o.b)((function(){return Object(o.Gb)(i,void 0,void 0,(function(){var e,n,r;return Object(o.Rb)(this,(function(i){return e=this._createMessageEventContext(t),null===(r=null===(n=this._handler)||void 0===n?void 0:n.onMessagesDeleted)||void 0===r||r.call(n,e,this.channel,s,a),[2]}))}))})),s},e.prototype._removeUnsentMessageFromView=function(e,t){var n=this._unsentMessages.findIndex((function(t){return t.reqId===e}));n>=0&&this._unsentMessages.splice(n,1)},e.prototype._getLocalMessages=function(e,t){var n=t.prevLimit,r=void 0===n?0:n,i=t.nextLimit,s=void 0===i?0:i,a=t.inclusive,u=void 0===a||a;return Object(o.Gb)(this,void 0,void 0,(function(){var t,n,i,a,c;return Object(o.Rb)(this,(function(l){switch(l.label){case 0:return t=[],u?[4,this._channelManager.getExactlyMatchingMessagesForTokenFromCache(this._channel.url,e,this.filter)]:[3,2];case 1:t=l.sent(),l.label=2;case 2:return r>0?[4,this._channelManager.getMessagesFromCache(this._channel.url,e,"prev",this.filter,r,!1)]:[3,4];case 3:return i=l.sent(),[3,5];case 4:i=[],l.label=5;case 5:return n=i,s>0?[4,this._channelManager.getMessagesFromCache(this._channel.url,e,"next",this.filter,s,!1)]:[3,7];case 6:return c=l.sent(),[3,8];case 7:c=[],l.label=8;case 8:return a=c,[2,Object(o.dc)(Object(o.dc)(Object(o.dc)([],Object(o.ec)(t),!1),Object(o.ec)(n),!1),Object(o.ec)(a),!1).sort((function(e,t){return t.createdAt-e.createdAt}))]}}))}))},e.prototype._getRemoteMessages=function(e,t){var n=t.prevLimit,r=void 0===n?0:n,i=t.nextLimit,a=void 0===i?0:i,u=t.source,c=void 0===u?o.x.REQUEST_MESSAGE:u,l=t.reverse,h=void 0!==l&&l,d=t.checkingContinuousMessages,f=void 0!==d&&d;return Object(o.Gb)(this,void 0,void 0,(function(){var t,n;return Object(o.Rb)(this,(function(i){switch(i.label){case 0:return t=s.F.of(this._iid),r>0||a>0?[4,t._getMessagesByTimestampForCollection(this._channel.url,this._channel.channelType,e,Object(o.jc)(Object(o.Vb)(Object(o.Vb)(Object(o.Vb)({},this.filter),Ze),{isInclusive:!0,reverse:h,prevResultSize:r,nextResultSize:a})),c,f)]:[3,2];case 1:return n=i.sent(),[3,3];case 2:n={messages:[],isContinuousMessages:!1},i.label=3;case 3:return[2,n]}}))}))},e.prototype._checkHugeGap=function(){var e,t,n,r,i;return Object(o.Gb)(this,void 0,void 0,(function(){var s,a,u,c,l,h,d,f,p,m,g,b,v,y,_,w,E,S,M,O,A,C,T,k=this;return Object(o.Rb)(this,(function(x){switch(x.label){case 0:return s=o.v.of(this._iid),a=s.dispatcher,u=s.requestQueue,c=s.cacheContext,l=s.statLogCollector,this._messages.length>0?(h=this._syncRange.top,d=this.viewTop,f=this._syncRange.bottom,p=this.hasNext?this.viewBottom:Number.MAX_SAFE_INTEGER,[4,this._channelManager.getCachedMessageCountBetween(this._channel.url,this.filter,d,h)]):[3,7];case 1:return m=x.sent(),[4,this._channelManager.getCachedMessageCountBetween(this._channel.url,this.filter,f,p)];case 2:g=x.sent(),x.label=3;case 3:return x.trys.push([3,,5,6]),[4,Object(o.Nb)((function(){return Object(o.Gb)(k,void 0,void 0,(function(){var e,t,n,r,i,s,l,b,v,y,_,w,E,S,M,O,A,C=this;return Object(o.Rb)(this,(function(T){switch(T.label){case 0:return e=new Ve(Object(o.Vb)(Object(o.Vb)({channelUrl:this._channel.url,channelType:this._channel.channelType,prevStart:d,prevEnd:h,prevCount:m,nextStart:f,nextEnd:p,nextCount:g,checkingContinuousMessages:c.localCacheEnabled},this.filter),Ze)),[4,u.send(e)];case 1:return t=T.sent(),n=t.as(Ge),r=n.isHugeGap,i=n.prevMessages,s=void 0===i?[]:i,l=n.prevHasMore,b=n.isContinuousPrevMessages,v=n.nextMessages,y=void 0===v?[]:v,_=n.nextHasmore,w=n.isContinuousNextMessages,r?Object(o.b)((function(){return Object(o.Gb)(C,void 0,void 0,(function(){var e;return Object(o.Rb)(this,(function(t){return(null===(e=this._handler)||void 0===e?void 0:e.onHugeGapDetected)&&this._handler.onHugeGapDetected(),[2]}))}))})):(E=this.viewTop,S=this.viewBottom,M=Math.min.apply(Math,Object(o.dc)([Number.MAX_SAFE_INTEGER,E],Object(o.ec)(s.map((function(e){return e.createdAt}))),!1)),O=Math.max.apply(Math,Object(o.dc)([0,S],Object(o.ec)(y.map((function(e){return e.createdAt}))),!1)),a.dispatch(new o.I({messages:s,source:o.x.SYNC_MESSAGE_FILL})),a.dispatch(new o.I({messages:y,source:o.x.SYNC_MESSAGE_FILL})),this._syncRange.extends(M,O),(b||w)&&(null===(A=this._backgroundSync)||void 0===A||A.range.extends(M,O)),l&&this._prevFill.start(M),_&&this._nextFill.start(O)),[2]}}))}))}),1)];case 4:return x.sent(),[3,6];case 5:return l.put(new o.Lb({type:o.eb.FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:this.channel.url,measured_on:"gap_check",event:"cache_fetch",max_db_size:null!==(t=null===(e=c.localCacheConfig)||void 0===e?void 0:e.maxSize)&&void 0!==t?t:0,use_local_cache:c.localCacheEnabled}})),[7];case 6:return[3,12];case 7:b=Math.floor(this._limit/2),v=Date.now(),x.label=8;case 8:return x.trys.push([8,10,11,12]),[4,this._getRemoteMessages(v,{prevLimit:b,nextLimit:b,source:o.x.SYNC_MESSAGE_FILL,checkingContinuousMessages:c.localCacheEnabled})];case 9:if(y=x.sent(),_=y.messages,w=y.isContinuousMessages,_.length>0){for(E=_.map((function(e){return e.createdAt})),S=0,M=0,O=0;O<E.length;O++)(A=E[O])<=v?S++:A>=v&&M++;this._hasPrevious=S>=b,this._hasNext=M>=b,(T=this._syncRange).extends.apply(T,Object(o.dc)([],Object(o.ec)(E),!1)),w&&(null===(n=this._backgroundSync)||void 0===n||n.range.extends(this._syncRange.top,this._syncRange.bottom)),this._addMessagesToView(_,o.x.SYNC_MESSAGE_FILL)}else this._hasPrevious=!1,this._hasNext=!1;return[3,12];case 10:return(C=x.sent())instanceof o.fc&&C.code===o.rb.NOT_FOUND_IN_DATABASE&&(this._hasPrevious=!1,this._hasNext=!1),[3,12];case 11:return l.put(new o.Lb({type:o.eb.FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:this.channel.url,measured_on:"gap_check",event:"cache_fetch",max_db_size:null!==(i=null===(r=c.localCacheConfig)||void 0===r?void 0:r.maxSize)&&void 0!==i?i:0,use_local_cache:c.localCacheEnabled}})),[7];case 12:return[2]}}))}))},e.prototype._loadUnsentMessages=function(){return Object(o.Gb)(this,void 0,void 0,(function(){var e;return Object(o.Rb)(this,(function(t){switch(t.label){case 0:return e=this,[4,this._channelManager.getUnsentMessagesFromCache(this._channel.url,this.filter)];case 1:return e._unsentMessages=t.sent(),[2]}}))}))},e.prototype._hasPollMessage=function(){return Object(o.Gb)(this,void 0,void 0,(function(){return Object(o.Rb)(this,(function(e){switch(e.label){case 0:return[4,this._channelManager.getPollMessagesFromCache(this._channel.url,Date.now()+6e5,this.filter,1)];case 1:return e.sent().length>0?[2,!0]:[2,!1]}}))}))},e.prototype._refreshChannel=function(e){this._channelManager.refreshChannel(this.channel.url,!0,e)},e.prototype._startCheckMyMutedTimer=function(e){var t=this;this._clearCheckMyMutedTimer(),this._checkMyMutedStateTimer=setTimeout((function(){return Object(o.Gb)(t,void 0,void 0,(function(){var e,t,n=this;return Object(o.Rb)(this,(function(r){switch(r.label){case 0:this._checkMyMutedStateTimer=void 0,e=!0,r.label=1;case 1:return r.trys.push([1,3,4,5]),[4,this._channel.getMyMutedInfo()];case 2:return t=r.sent(),e=!t.isMuted,[3,5];case 3:return r.sent(),e=!0,[3,5];case 4:return e&&this.channel._runIfHandleableWithGroupChannel((function(e){var t,r;e.myMutedState=o.C.UNMUTED;var i=n._createChannelEventContext(o.x.EVENT_CHANNEL_UNMUTED);null===(r=null===(t=n._handler)||void 0===t?void 0:t.onChannelUpdated)||void 0===r||r.call(t,i,n.channel)})),[7];case 5:return[2]}}))}))}),e+1e3)},e.prototype._clearCheckMyMutedTimer=function(){this._checkMyMutedStateTimer&&(clearTimeout(this._checkMyMutedStateTimer),this._checkMyMutedStateTimer=void 0)},e.prototype.initialize=function(e){var t=this,n=new tt;this._messages=[],this._unsentMessages=[],this._syncRange=new u.h({}),this._hasNext=!0,this._hasPrevious=!0,this._refreshChannel(o.x.REFRESH_CHANNEL),Object(o.o)((function(){return Object(o.Gb)(t,void 0,void 0,(function(){var e;return Object(o.Rb)(this,(function(t){switch(t.label){case 0:return[4,this.channel.getMyMutedInfo()];case 1:return(e=t.sent()).isMuted&&-1!==e.remainingDuration&&this._startCheckMyMutedTimer(e.remainingDuration),[2]}}))}))}));var r=o.v.of(this._iid),i=r.cacheContext,s=r.statLogCollector,a=Math.floor(this._limit/2);return e===je.CACHE_AND_REPLACE_BY_API&&this._getLocalMessages(this._startingPoint,{prevLimit:a,nextLimit:a}).then((function(e){return Object(o.Gb)(t,void 0,void 0,(function(){var t;return Object(o.Rb)(this,(function(r){switch(r.label){case 0:return t=this._filterUnderOffsetMessage(e),this._addMessagesToView(t,o.x.REQUEST_MESSAGE),[4,this._loadUnsentMessages()];case 1:return r.sent(),n._invokeResponse("local",null,t),[2]}}))}))})).catch((function(e){if(Object(o.J)(e))throw e;n._invokeResponse("local",e,null)})).finally((function(){var r=o.v.of(t._iid).cacheContext;t._getRemoteMessages(t._startingPoint,{prevLimit:a,nextLimit:a,reverse:!0,checkingContinuousMessages:r.localCacheEnabled}).then((function(i){var u,c,l,h,d,f,p=i.messages,m=i.isContinuousMessages,g=t._filterUnderOffsetMessage(p),b=!0;if(t._messages.length===g.length){var v=t._messages.map((function(e){return e.messageId}));for(var y in g)if(!v.includes(g[y].messageId)){b=!1;break}}else b=!1;if(t._messages=[],g.length>0){var _=g.map((function(e){return e.createdAt})),w=0,E=0;for(y=0;y<_.length;y++){var S=_[y];S<t._startingPoint?w++:S>t._startingPoint&&E++}t._hasPrevious=w>=a,t._hasNext=E>=a,(u=t._syncRange).extends.apply(u,Object(o.dc)([],Object(o.ec)(g.map((function(e){return e.createdAt}))),!1)),m&&(null===(c=t._backgroundSync)||void 0===c||c.range.extends(t._syncRange.top,t._syncRange.bottom)),t._addMessagesToView(g,o.x.REQUEST_MESSAGE)}else t._hasPrevious=!1,t._hasNext=!1;s.put(new o.Lb({type:o.eb.FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:t.channel.url,starting_point:t._startingPoint,measured_on:"initial_load",event:b?"cache_hit":"cache_miss",max_db_size:null!==(h=null===(l=r.localCacheConfig)||void 0===l?void 0:l.maxSize)&&void 0!==h?h:0,message_init_policy:e,use_local_cache:r.localCacheEnabled,collection_id:t._key}})),s.put(new o.Lb({type:o.eb.FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:t.channel.url,starting_point:t._startingPoint,measured_on:"initial_load",event:"cache_fetch",max_db_size:null!==(f=null===(d=r.localCacheConfig)||void 0===d?void 0:d.maxSize)&&void 0!==f?f:0,message_init_policy:e,use_local_cache:r.localCacheEnabled,collection_id:t._key}})),n._invokeResponse("remote",null,g)})).catch((function(e){if(Object(o.J)(e))throw e;n._invokeResponse("remote",e,null)}))})),s.put(new o.db({type:o.eb.FEATURE_LOCALCACHE,data:{use_local_cache:i.localCacheEnabled,collection_interface:{message_init_policy:e}}})),n},e.prototype.loadPrevious=function(){var e,t,n;return Object(o.Gb)(this,void 0,void 0,(function(){var r,i,s,a,u,c,l,h=this;return Object(o.Rb)(this,(function(d){switch(d.label){case 0:if(this._isDisposed)throw new o.fc({code:o.rb.COLLECTION_DISPOSED,message:"Collection has been disposed."});return this._hasPrevious?(r=Math.floor(this._limit/2),i=this.viewTop,s=[],[4,Object(o.o)((function(){return Object(o.Gb)(h,void 0,void 0,(function(){var e;return Object(o.Rb)(this,(function(t){switch(t.label){case 0:return e=this._filterUnderOffsetMessage,[4,this._getLocalMessages(i,{prevLimit:r,inclusive:!1})];case 1:return s=e.apply(this,[t.sent()]),[2]}}))}))}))]):[2,[]];case 1:return d.sent(),a=s.length>=r,u=o.v.of(this._iid),c=u.cacheContext,(l=u.statLogCollector).put(new o.Lb({type:o.eb.FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:this.channel.url,starting_point:this._startingPoint,measured_on:"load_prev",event:a?"cache_hit":"cache_miss",max_db_size:null!==(t=null===(e=c.localCacheConfig)||void 0===e?void 0:e.maxSize)&&void 0!==t?t:0,use_local_cache:c.localCacheEnabled,collection_id:this._key}})),a&&(null===(n=this._backgroundSync)||void 0===n?void 0:n.isWrappingMessages(s))?[3,3]:[4,Object(o.o)((function(){return Object(o.Gb)(h,void 0,void 0,(function(){var e,t,n,a,u,c,h,d=this;return Object(o.Rb)(this,(function(f){switch(f.label){case 0:return e=o.v.of(this._iid).cacheContext,[4,this._getRemoteMessages(i,{prevLimit:r,reverse:!0,checkingContinuousMessages:e.localCacheEnabled})];case 1:return t=f.sent(),s=(s=this._filterUnderOffsetMessage(t.messages)).filter((function(e){return Fe(d._messages,e)<0})),this._hasPrevious=s.length>=r,s.length>0&&((n=this._syncRange).extends.apply(n,Object(o.dc)([],Object(o.ec)(s.map((function(e){return e.createdAt}))),!1)),(null===(a=this._backgroundSync)||void 0===a?void 0:a.range.overlap(this._syncRange))&&t.isContinuousMessages&&(null===(u=this._backgroundSync)||void 0===u||u.range.extends(this._syncRange.top))),l.put(new o.Lb({type:o.eb.FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:this.channel.url,starting_point:this._startingPoint,measured_on:"load_prev",event:"cache_fetch",max_db_size:null!==(h=null===(c=e.localCacheConfig)||void 0===c?void 0:c.maxSize)&&void 0!==h?h:0,use_local_cache:e.localCacheEnabled,collection_id:this._key}})),[2]}}))}))}))];case 2:return d.sent(),this._addMessagesToView(s,o.x.REQUEST_MESSAGE),[3,4];case 3:this._hasPrevious=s.length>=r,s.length>0&&this._addMessagesToView(s,o.x.REQUEST_MESSAGE),d.label=4;case 4:return[2,s]}}))}))},e.prototype.loadNext=function(){var e,t,n;return Object(o.Gb)(this,void 0,void 0,(function(){var r,i,s,a,u,c,l,h=this;return Object(o.Rb)(this,(function(d){switch(d.label){case 0:if(this._isDisposed)throw new o.fc({code:o.rb.COLLECTION_DISPOSED,message:"Collection has been disposed."});return this._hasNext?(r=Math.floor(this._limit/2),i=this.viewBottom,s=[],[4,Object(o.o)((function(){return Object(o.Gb)(h,void 0,void 0,(function(){var e;return Object(o.Rb)(this,(function(t){switch(t.label){case 0:return e=this._filterUnderOffsetMessage,[4,this._getLocalMessages(i,{nextLimit:r,inclusive:!1})];case 1:return s=e.apply(this,[t.sent()]),[2]}}))}))}))]):[2,[]];case 1:return d.sent(),a=s.length>=r,u=o.v.of(this._iid),c=u.cacheContext,(l=u.statLogCollector).put(new o.Lb({type:o.eb.FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:this.channel.url,starting_point:this._startingPoint,measured_on:"load_next",event:a?"cache_hit":"cache_miss",max_db_size:null!==(t=null===(e=c.localCacheConfig)||void 0===e?void 0:e.maxSize)&&void 0!==t?t:0,use_local_cache:c.localCacheEnabled,collection_id:this._key}})),a&&(null===(n=this._backgroundSync)||void 0===n?void 0:n.isWrappingMessages(s))?[3,3]:[4,Object(o.o)((function(){return Object(o.Gb)(h,void 0,void 0,(function(){var e,t,n,a,u,c,h,d=this;return Object(o.Rb)(this,(function(f){switch(f.label){case 0:return e=o.v.of(this._iid).cacheContext,[4,this._getRemoteMessages(i,{nextLimit:r,reverse:!0,checkingContinuousMessages:e.localCacheEnabled})];case 1:return t=f.sent(),s=(s=this._filterUnderOffsetMessage(t.messages)).filter((function(e){return Fe(d._messages,e)<0})),this._hasNext=s.length>=r,s.length>0&&((n=this._syncRange).extends.apply(n,Object(o.dc)([],Object(o.ec)(s.map((function(e){return e.createdAt}))),!1)),(null===(a=this._backgroundSync)||void 0===a?void 0:a.range.overlap(this._syncRange))&&t.isContinuousMessages&&(null===(u=this._backgroundSync)||void 0===u||u.range.extends(this._syncRange.bottom))),l.put(new o.Lb({type:o.eb.FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:this.channel.url,starting_point:this._startingPoint,measured_on:"load_next",event:"cache_fetch",max_db_size:null!==(h=null===(c=e.localCacheConfig)||void 0===c?void 0:c.maxSize)&&void 0!==h?h:0,use_local_cache:e.localCacheEnabled,collection_id:this._key}})),[2]}}))}))}))];case 2:return d.sent(),this._addMessagesToView(s,o.x.REQUEST_MESSAGE),[3,4];case 3:this._hasNext=s.length>=r,s.length>0&&this._addMessagesToView(s,o.x.REQUEST_MESSAGE),d.label=4;case 4:return[2,s]}}))}))},e.prototype.removeFailedMessage=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){var t;return Object(o.Rb)(this,(function(n){switch(n.label){case 0:if(this._isDisposed)throw new o.fc({code:o.rb.COLLECTION_DISPOSED,message:"Collection has been disposed."});return[4,this._channelManager.removeFailedMessageFromCache(e)];case 1:return n.sent(),(t=this._unsentMessages.findIndex((function(t){return t.reqId===e})))>-1&&this._unsentMessages.splice(t,1),[2]}}))}))},e.prototype.dispose=function(){var e,t,n,i=this;if(!this._isDisposed){this._isDisposed=!0;var s=o.v.of(this._iid),a=s.cacheContext,u=s.dispatcher;this._messages=[],this._clearCheckMyMutedTimer(),this._channel._runIfHandleableWithGroupChannel((function(e){if(e.myMemberState!==r.NONE){i._channel._updateMessageCollectionLastAccessedAt();var t=i._createChannelUpdateEventCommand(o.x.CHANNEL_LASTACCESSEDAT_UPDATED);t&&u.dispatch(t)}})),a.localCacheEnabled&&(this._prevFill.stop(),this._nextFill.stop()),null===(e=this._backgroundSync)||void 0===e||e.close(),null===(t=this._changelogSync)||void 0===t||t.close(),null===(n=this._pollChangelogSync)||void 0===n||n.close(),this._channelManager.unsubscribeChannelEvent(this._key),this._channelManager.unsubscribeMessageEvent(this._key),this._connectionEventContext&&this._connectionEventContext.close()}},e}()),rt={coverUrl:void 0,coverImage:void 0,isDistinct:void 0,isPublic:void 0,isDiscoverable:void 0,accessCode:void 0,name:void 0,data:void 0,customType:void 0,operatorUserIds:void 0,messageSurvivalSeconds:void 0},it=function(e){function t(t){var n=this,r=t.channelUrl,i=t.token,s=t.limit,a=t.order,u=t.mutedMemberFilter,c=t.memberStateFilter,l=t.nicknameStartsWithFilter,h=t.operatorFilter;return(n=e.call(this)||this).method=o.a.GET,n.path="".concat(o.vb,"/").concat(encodeURIComponent(r),"/members"),n.params={token:i,limit:s,order:a,muted_member_filter:u,member_state_filter:c,nickname_startswith:l,operator_filter:h,show_member_is_muted:!0,show_read_receipt:!0,show_delivery_receipt:!0},n}return Object(o.A)(t,e),t}(o.Ub),ot=function(e){function t(t,n){var r=e.call(this,t,n)||this;r.members=[];var i=n.next,o=n.members;return r.token=i,o&&o.length>0&&(r.members=o.map((function(e){return new b(t,e)}))),r}return Object(o.A)(t,e),t}(o.Wb);!function(e){e.ALL="all",e.MUTED="muted",e.UNMUTED="unmuted"}($e||($e={})),function(e){e.MEMBER_NICKNAME_ALPHABETICAL="member_nickname_alphabetical",e.OPERATOR_THEN_MEMBER_ALPHABETICAL="operator_then_member_alphabetical"}(Xe||(Xe={})),function(e){e.ALL="all",e.JOINED="joined_only",e.INVITED="invited_only",e.INVITED_BY_FRIEND="invited_by_friend",e.INVITED_BY_NON_FRIEND="invited_by_non_friend"}(et||(et={}));var st=function(e){function t(t,n,r){var i,s,a,u,c=this;return(c=e.call(this,t,n,o.y.GROUP,r)||this).mutedMemberFilter=$e.ALL,c.memberStateFilter=et.ALL,c.nicknameStartsWithFilter=null,c.operatorFilter=p.ALL,c.order=Xe.MEMBER_NICKNAME_ALPHABETICAL,c.mutedMemberFilter=null!==(i=r.mutedMemberFilter)&&void 0!==i?i:$e.ALL,c.memberStateFilter=null!==(s=r.memberStateFilter)&&void 0!==s?s:et.ALL,c.nicknameStartsWithFilter=null!==(a=r.nicknameStartsWithFilter)&&void 0!==a?a:null,c.order=null!==(u=r.order)&&void 0!==u?u:Xe.MEMBER_NICKNAME_ALPHABETICAL,c}return Object(o.A)(t,e),t.prototype._validate=function(){return e.prototype._validate.call(this)&&Object(o.q)($e,this.mutedMemberFilter)&&Object(o.q)(et,this.memberStateFilter)&&(Object(o.B)("string",this.nicknameStartsWithFilter)||null===this.nicknameStartsWithFilter)&&Object(o.q)(p,this.operatorFilter)&&Object(o.q)(Xe,this.order)},t.prototype.next=function(){return Object(o.Gb)(this,void 0,void 0,(function(){var e,t,n,r,i,s;return Object(o.Rb)(this,(function(a){switch(a.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,e=o.v.of(this._iid).requestQueue,t=new it(Object(o.jc)(Object(o.Vb)(Object(o.Vb)({},this),{token:this._token}))),[4,e.send(t)]):[3,2]:[3,5];case 1:return n=a.sent(),r=n.as(ot),i=r.members,s=r.token,this._token=s,this._hasNext=!!s,this._isLoading=!1,[2,i];case 2:return[2,[]];case 3:throw o.fc.queryInProgress;case 4:return[3,6];case 5:throw o.fc.invalidParameters;case 6:return[2]}}))}))},t}(o.xb),at=function(e){function t(t){var n=this,r=t.channelUrl,i=t.userId,s=t.accessCode;return(n=e.call(this)||this).method=o.a.PUT,n.path="".concat(o.vb,"/").concat(encodeURIComponent(r),"/accept"),n.params={user_id:i,access_code:s},n}return Object(o.A)(t,e),t}(o.Ub),ut=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.channel=new Ut(t,n),i.channel.myMemberState=r.JOINED,i}return Object(o.A)(t,e),t}(o.Wb),ct=function(e){function t(t){var n=this,r=t.channelUrl,i=t.isDistinct,s=t.isPublic,a=t.isDiscoverable,u=t.coverUrl,c=t.coverImage,l=t.accessCode,h=t.name,d=t.data,f=t.customType,p=t.operatorUserIds,m=t.messageSurvivalSeconds;return(n=e.call(this)||this).method=o.a.PUT,n.path="".concat(o.vb,"/").concat(encodeURIComponent(r)),n.params=Object(o.Tb)({is_distinct:i,is_public:s,is_discoverable:a,name:h,data:d,custom_type:f,cover_url:u,cover_file:c,access_code:l,operator_ids:p,message_survival_seconds:m}),n}return Object(o.A)(t,e),t}(o.Ub),lt=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.channel=new Ut(t,n),r}return Object(o.A)(t,e),t}(o.Wb),ht=function(e){function t(t){var n=this,r=t.channelUrl;return(n=e.call(this)||this).method=o.a.DELETE,n.path="".concat(o.vb,"/").concat(encodeURIComponent(r)),n}return Object(o.A)(t,e),t}(o.Ub);!function(e){Object(o.A)((function(t,n){return e.call(this,t,n)||this}),e)}(o.Wb);var dt=function(e){function t(t){var n=this,r=t.channelUrl;return(n=e.call(this)||this).method=o.a.DELETE,n.path="".concat(o.vb,"/").concat(encodeURIComponent(r),"/hide"),n}return Object(o.A)(t,e),t}(o.Ub);!function(e){Object(o.A)((function(){return null!==e&&e.apply(this,arguments)||this}),e)}(o.Wb);var ft=function(e){function t(t){var n=t.userId,r=t.channelUrl,i=t.countPreference,s=e.call(this)||this;return s.method=o.a.PUT,s.path="".concat(o.Sb,"/").concat(encodeURIComponent(n),"/count_preference/").concat(encodeURIComponent(r)),s.params={count_preference:i},s}return Object(o.A)(t,e),t}(o.Ub),pt=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.countPreference=n.count_preference,r}return Object(o.A)(t,e),t}(o.Wb),mt=function(e){function t(t){var n=this,r=t.channelUrl;return(n=e.call(this)||this).method=o.a.PUT,n.path="".concat(o.vb,"/").concat(encodeURIComponent(r),"/reset_user_history"),n}return Object(o.A)(t,e),t}(o.Ub),gt=function(e){function t(t,n){var r=e.call(this,t,n)||this,i=n.ts_message_offset;return r.messageOffsetTimestamp=i,r}return Object(o.A)(t,e),t}(o.Wb),bt=Object(o.Vb)(Object(o.Vb)({},s.H),{scheduledAt:void 0,file:void 0,fileUrl:void 0,fileName:void 0,mimeType:void 0,fileSize:void 0,thumbnailSizes:void 0,requireAuth:!1}),vt=Object(o.Vb)(Object(o.Vb)({},s.J),{scheduledAt:void 0}),yt=function(e){function t(t){var n,r=this;r=e.call(this)||this;var i=[];t.mentionType===o.ib.USERS&&(t.mentionedUserIds?i=t.mentionedUserIds:t.mentionedUsers&&(i=t.mentionedUsers.map((function(e){return e.userId}))));var a=t.channelType,u=t.channelUrl,c=t.scheduledMessageId;return r.method=o.a.PUT,r.path="".concat(Object(o.pb)(a),"/").concat(encodeURIComponent(u),"/scheduled_messages/").concat(encodeURIComponent(c)),r.params=Object(o.Tb)(Object(o.jc)({req_id:t.reqId,scheduled_at:t.scheduledAt,message_type:o.Bb.FILE,url:t.fileUrl,file_name:t.fileName,file_size:t.fileSize,file_type:t.mimeType,thumbnails:t.thumbnailSizes?t.thumbnailSizes.map((function(e){return s.L.payloadify(e)})):[],custom_type:t.customType,data:t.data,require_auth:t.requireAuth,mention_type:t.mentionType,mentioned_user_ids:i,sorted_metaarray:null===(n=t.metaArrays)||void 0===n?void 0:n.map((function(e){return s.M.payloadify(e)})),apple_critical_alert_options:t.appleCriticalAlertOptions?s.N.payloadify(t.appleCriticalAlertOptions):null,push_option:t.pushNotificationDeliveryOption})),r}return Object(o.A)(t,e),t}(o.Ub),_t=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.message=new s.l(t,n),r}return Object(o.A)(t,e),t}(o.Wb),wt=function(e){function t(t){var n,r=this;r=e.call(this)||this;var i=[];t.mentionType===o.ib.USERS&&(t.mentionedUserIds?i=t.mentionedUserIds:t.mentionedUsers&&(i=t.mentionedUsers.map((function(e){return e.userId}))));var a=t.channelType,u=t.channelUrl,c=t.scheduledMessageId;return r.method=o.a.PUT,r.path="".concat(Object(o.pb)(a),"/").concat(encodeURIComponent(u),"/scheduled_messages/").concat(encodeURIComponent(c)),r.params=Object(o.Tb)(Object(o.jc)({req_id:t.reqId,scheduled_at:t.scheduledAt,message_type:o.Bb.USER,message:t.message,custom_type:t.customType,data:t.data,mention_type:t.mentionType,mentioned_user_ids:i,sorted_metaarray:null===(n=t.metaArrays)||void 0===n?void 0:n.map((function(e){return s.M.payloadify(e)})),apple_critical_alert_options:t.appleCriticalAlertOptions?s.N.payloadify(t.appleCriticalAlertOptions):null,target_langs:t.translationTargetLanguages,push_option:t.pushNotificationDeliveryOption})),r}return Object(o.A)(t,e),t}(o.Ub);!function(e){Object(o.A)((function(t,n){var r=e.call(this,t,n)||this;return r.message=new s.k(t,n),r}),e)}(o.Wb);var Et=function(e){function t(t){var n=e.call(this)||this,r=t.channelType,i=t.channelUrl,s=t.scheduledMessageId;return n.method=o.a.DELETE,n.path="".concat(Object(o.pb)(r),"/").concat(encodeURIComponent(i),"/scheduled_messages/").concat(encodeURIComponent(s)),n}return Object(o.A)(t,e),t}(o.Ub),St=function(e){function t(t){var n=e.call(this)||this,r=t.channelType,i=t.channelUrl,s=t.scheduledMessageId;return n.method=o.a.POST,n.path="".concat(Object(o.pb)(r),"/").concat(encodeURIComponent(i),"/scheduled_messages/").concat(encodeURIComponent(s),"/send_now"),n}return Object(o.A)(t,e),t}(o.Ub),Mt=function(e){function t(t){var n=t.userId,r=t.channelUrl,i=t.pushTriggerOption,s=e.call(this)||this;return s.method=o.a.PUT,s.path="".concat(o.Sb,"/").concat(encodeURIComponent(n),"/push_preference/").concat(encodeURIComponent(r)),s.params={push_trigger_option:i},s}return Object(o.A)(t,e),t}(o.Ub),Ot=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.pushTriggerOption=n.push_trigger_option,r.enabled=n.enable,r}return Object(o.A)(t,e),t}(o.Wb),At=function(e){function t(t){var n=t.userId,r=t.channelUrl,i=e.call(this)||this;return i.method=o.a.GET,i.path="".concat(o.Sb,"/").concat(encodeURIComponent(n),"/push_preference/").concat(encodeURIComponent(r)),i}return Object(o.A)(t,e),t}(o.Ub),Ct=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.pushTriggerOption=n.push_trigger_option,r.enabled=n.enable,r}return Object(o.A)(t,e),t}(o.Wb),Tt=function(e){function t(t){var n=t.channelType,r=t.channelUrl,i=t.messageId,s=e.call(this)||this;return s.method=o.a.POST,s.path="".concat(Object(o.pb)(n),"/").concat(encodeURIComponent(r),"/messages/").concat(i,"/pin"),s}return Object(o.A)(t,e),t}(o.Ub);!function(e){Object(o.A)((function(t,n){return e.call(this,t,n)||this}),e)}(o.Wb);var kt=function(e){function t(t){var n=t.channelType,r=t.channelUrl,i=t.messageId,s=e.call(this)||this;return s.method=o.a.DELETE,s.path="".concat(Object(o.pb)(n),"/").concat(encodeURIComponent(r),"/messages/").concat(i,"/pin"),s}return Object(o.A)(t,e),t}(o.Ub);!function(e){Object(o.A)((function(t,n){return e.call(this,t,n)||this}),e)}(o.Wb);var xt,jt,It=function(e){function t(t,n){var r=e.call(this,t)||this;return r.message=null,r.message=Object(s.f)(t,n.message),r}return Object(o.A)(t,e),t}(o.G),Rt=function(e){function t(t){var n=this,r=t.channelType,i=t.channelUrl,s=t.limit,a=t.token,u=t.includeReactions,c=t.includeMetaArray,l=t.includeParentMessageInfo,h=t.includeThreadInfo,d=t.includePollDetails;return(n=e.call(this)||this).method=o.a.GET,n.path="".concat(Object(o.pb)(r),"/").concat(encodeURIComponent(i),"/pinned_messages"),n.params=Object(o.Tb)({limit:s,token:a,include_reactions:u,with_sorted_meta_array:c,include_thread_info:h,include_parent_message_info:l,include_poll_details:d}),n}return Object(o.A)(t,e),t}(o.Ub),Nt=function(e){function t(t,n){var r=e.call(this,t,n)||this,i=n.pinned_messages,o=n.has_more,s=n.next;return r.pinnedMessages=i.map((function(e){return new It(t,e)})),r.hasMore=o,r.token=s,r}return Object(o.A)(t,e),t}(o.Wb),Pt=function(e){function t(t,n,r,i){var o=e.call(this,t,n,r,i)||this;return o.includeMetaArray=i.includeMetaArray,o.includeReactions=i.includeReactions,o.includeParentMessageInfo=i.includeParentMessageInfo,o.includeThreadInfo=i.includeThreadInfo,o.includePollDetails=i.includePollDetails,o}return Object(o.A)(t,e),t.prototype._validate=function(){return e.prototype._validate.call(this)&&Object(o.B)("boolean",this.includeMetaArray,!0)&&Object(o.B)("boolean",this.includeReactions,!0)&&Object(o.B)("boolean",this.includeParentMessageInfo,!0)&&Object(o.B)("boolean",this.includeThreadInfo,!0)&&Object(o.B)("boolean",this.includePollDetails,!0)},t.prototype.next=function(){return Object(o.Gb)(this,void 0,void 0,(function(){var e,t,n,r,i,s,a;return Object(o.Rb)(this,(function(u){switch(u.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,e=o.v.of(this._iid).requestQueue,t=new Rt(Object(o.Vb)(Object(o.Vb)({},this),{token:this._token})),[4,e.send(t)]):[3,2]:[3,5];case 1:return n=u.sent(),r=n.as(Nt),i=r.pinnedMessages,s=r.hasMore,a=r.token,this._token=a,this._hasNext=!!s,this._isLoading=!1,[2,i];case 2:return[2,[]];case 3:throw o.fc.queryInProgress;case 4:return[3,6];case 5:throw o.fc.invalidParameters;case 6:return[2]}}))}))},t}(o.xb);!function(e){e.ALL="all",e.UNREAD_MESSAGE_COUNT_ONLY="unread_message_count_only",e.UNREAD_MENTION_COUNT_ONLY="unread_mention_count_only",e.OFF="off"}(xt||(xt={})),function(e){e.UNHIDDEN="unhidden",e.HIDDEN_ALLOW_AUTO_UNHIDE="hidden_allow_auto_unhide",e.HIDDEN_PREVENT_AUTO_UNHIDE="hidden_prevent_auto_unhide"}(jt||(jt={}));var Dt,Ut=function(e){function t(t,n){var i,a,u,c,l,h,d,f,p,m,g,v,y,_,w,E,S,M,O,A,C=this;return(C=e.call(this,t,n)||this)._unreadMemberStateMap=new Map,C._undeliveredMemberStateMap=new Map,C._typingStatus=new Map,C._lastMemberCountUpdated=0,C._typingStarted=0,C._typingEnded=0,C.isDistinct=!1,C.isSuper=!1,C.isBroadcast=!1,C.isExclusive=!1,C.isPublic=!1,C.isDiscoverable=!0,C.isChatNotification=!1,C.isAccessCodeRequired=!1,C.isPushEnabled=!1,C.unreadMessageCount=0,C.unreadMentionCount=0,C.members=[],C.memberCount=0,C.joinedMemberCount=0,C.hiddenState=jt.UNHIDDEN,C.lastMessage=null,C.messageOffsetTimestamp=0,C.messageSurvivalSeconds=-1,C.myMemberState=r.NONE,C.myRole=o.D.NONE,C.myMutedState=o.C.UNMUTED,C.myLastRead=0,C.myCountPreference=xt.ALL,C.myPushTriggerOption=o.r.DEFAULT,C.inviter=null,C.invitedAt=0,C.joinedAt=0,C.pinnedMessageIds=[],C.lastPinnedMessage=null,C._pinnedMessagesUpdatedAt=0,C._myMutedRemainingTime=-1,C.channelType=o.y.GROUP,C.isDistinct=null!==(a=n.is_distinct)&&void 0!==a&&a,C.isSuper=null!==(u=n.is_super)&&void 0!==u&&u,C.isBroadcast=null!==(c=n.is_broadcast)&&void 0!==c&&c,C.isExclusive=null!==(l=n.is_exclusive)&&void 0!==l&&l,C.isPublic=null!==(h=n.is_public)&&void 0!==h&&h,C.isDiscoverable=null!==(d=n.is_discoverable)&&void 0!==d?d:C.isPublic,C.isChatNotification=null!==(f=n.is_chat_notification)&&void 0!==f&&f,C.isAccessCodeRequired=null!==(p=n.is_access_code_required)&&void 0!==p&&p,C.isPushEnabled=null!==(m=n.is_push_enabled)&&void 0!==m&&m,Array.isArray(n.members)&&(i=C.members).push.apply(i,Object(o.dc)([],Object(o.ec)(n.members.map((function(e){return new b(C._iid,e)}))),!1)),C.memberCount=null!==(g=n.member_count)&&void 0!==g?g:0,C.joinedMemberCount=null!==(v=n.joined_member_count)&&void 0!==v?v:0,C.hiddenState=Object(o.q)(jt,n.hidden_state)?n.hidden_state:jt.UNHIDDEN,C.messageOffsetTimestamp=null!==(y=n.ts_message_offset)&&void 0!==y?y:0,C.messageSurvivalSeconds=null!==(_=n.message_survival_seconds)&&void 0!==_?_:-1,C.lastMessage=n.last_message?Object(s.f)(C._iid,Object(o.Vb)({channel_type:C.channelType},n.last_message)):null,n.read_receipt&&Object.keys(n.read_receipt).forEach((function(e){Object(o.B)("number",n.read_receipt[e])&&C._updateUnreadMemberState(e,n.read_receipt[e])})),n.delivery_receipt&&Object.keys(n.delivery_receipt).forEach((function(e){Object(o.B)("number",n.delivery_receipt[e])&&C._updateUndeliveredMemberState(e,n.delivery_receipt[e])})),C.myMemberState=Object(o.q)(r,n.member_state)?n.member_state:r.NONE,C.myRole=Object(o.q)(o.D,n.my_role)?n.my_role:o.D.NONE,Object(o.q)(o.C,n.is_muted)?C.myMutedState=n.is_muted:Object(o.B)("boolean",n.is_muted)?C.myMutedState=n.is_muted?o.C.MUTED:o.C.UNMUTED:C.myMutedState=o.C.UNMUTED,C.myCountPreference=Object(o.q)(xt,n.count_preference)?n.count_preference:xt.ALL,C.myPushTriggerOption=Object(o.q)(o.r,n.push_trigger_option)?n.push_trigger_option:o.r.ALL,C.myLastRead=null!==(w=n.user_last_read)&&void 0!==w?w:0,C.inviter=n.inviter?new o.u(C._iid,n.inviter):null,C.invitedAt=null!==(E=n.invited_at)&&void 0!==E?E:0,C.joinedAt=null!==(S=n.joined_ts)&&void 0!==S?S:0,C._updateUnreadCount(null!==(M=n.unread_message_count)&&void 0!==M?M:0,null!==(O=n.unread_mention_count)&&void 0!==O?O:0),C.pinnedMessageIds=null!==(A=n.pinned_message_ids)&&void 0!==A?A:[],C.lastPinnedMessage=n.latest_pinned_message?Object(s.f)(C._iid,Object(o.Vb)({channel_type:C.channelType},n.latest_pinned_message)):null,C}return Object(o.A)(t,e),Object.defineProperty(t.prototype,"isHidden",{get:function(){return this.hiddenState!==jt.UNHIDDEN},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isTyping",{get:function(){return this._typingStatus.size>0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cachedUnreadMemberState",{get:function(){var e,t,n={};try{for(var r=Object(o.gc)(this._unreadMemberStateMap),i=r.next();!i.done;i=r.next()){var s=Object(o.ec)(i.value,2),a=s[0],u=s[1];n[a]=u}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cachedUndeliveredMemberState",{get:function(){var e,t,n={};try{for(var r=Object(o.gc)(this._undeliveredMemberStateMap),i=r.next();!i.done;i=r.next()){var s=Object(o.ec)(i.value,2),a=s[0],u=s[1];n[a]=u}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n},enumerable:!1,configurable:!0}),t.payloadify=function(t){return Object(o.Tb)(Object(o.jc)(Object(o.Vb)(Object(o.Vb)({},e.payloadify.call(this,t)),{is_access_code_required:t.isAccessCodeRequired,is_distinct:t.isDistinct,is_super:t.isSuper,is_broadcast:t.isBroadcast,is_exclusive:t.isExclusive,is_public:t.isPublic,is_discoverable:t.isDiscoverable,is_muted:t.myMutedState,is_push_enabled:t.isPushEnabled,unread_message_count:t.unreadMessageCount,unread_mention_count:t.unreadMentionCount,push_trigger_option:t.myPushTriggerOption,count_preference:t.myCountPreference,hidden_state:t.hiddenState,member_count:t.memberCount,joined_member_count:t.joinedMemberCount,member_state:t.myMemberState,my_role:t.myRole,user_last_read:t.myLastRead,ts_message_offset:t.messageOffsetTimestamp,message_survival_seconds:t.messageSurvivalSeconds,read_receipt:t.cachedUnreadMemberState,delivery_receipt:t.cachedUndeliveredMemberState,members:t.members.map((function(e){return b.payloadify(e)})),last_message:t.lastMessage?Object(s.O)(t.lastMessage):null,inviter:t.inviter?o.u.payloadify(t.inviter):null,invited_at:t.invitedAt,joined_ts:t.joinedAt,pinned_message_ids:t.pinnedMessageIds,latest_pinned_message:t.lastPinnedMessage?Object(s.O)(t.lastPinnedMessage):null})))},t.prototype._shouldUpdateLastMessageWith=function(e){return!(e instanceof s.a&&e.parentMessageId>0&&!e.replyToChannel)&&(!this.lastMessage||this.lastMessage.createdAt<e.createdAt||this.lastMessage.createdAt===e.createdAt&&this.lastMessage.messageId===e.messageId&&this.lastMessage.updatedAt<e.updatedAt)},t.prototype._tryUpdateLastMessageAndCallEvents=function(e,t){var n=o.v.of(this._iid).dispatcher,r=xe.of(this._iid);e._shouldUpdateLastMessageWith(t)&&(e.lastMessage=t),r.handlers.map((function(t){t.onChannelChanged&&t.onChannelChanged(e)})),n.dispatch(new R({channels:[e],source:o.x.EVENT_MESSAGE_SENT}))},t.prototype._updateUnreadCount=function(e,t){if("number"==typeof e&&e>=0)if(this.myCountPreference===xt.ALL||this.myCountPreference===xt.UNREAD_MESSAGE_COUNT_ONLY)if(this.isExclusive||this.isSuper||this.isBroadcast){var n=o.v.of(this._iid).maxSuperGroupChannelUnreadCount;this.unreadMessageCount=n&&e>=n?n:e}else this.unreadMessageCount=e;else this.unreadMessageCount=0;else this.unreadMessageCount=0;"number"==typeof t&&t>=0&&(this.myCountPreference===xt.ALL||this.myCountPreference===xt.UNREAD_MENTION_COUNT_ONLY)?this.unreadMentionCount=t:this.unreadMentionCount=0},t.prototype._updateUnreadMemberState=function(e,t){var n=this._unreadMemberStateMap.get(e);return(!n||n<t)&&(this._unreadMemberStateMap.set(e,t),o.v.of(this._iid).sdkState.userId===e&&(this.myLastRead=t),!0)},t.prototype._updateUndeliveredMemberState=function(e,t){var n=this._undeliveredMemberStateMap.get(e);return(!n||n<t)&&(this._undeliveredMemberStateMap.set(e,t),!0)},t.prototype._updateTypingStatus=function(e,t){void 0===t&&(t=(new Date).getTime()),t>0?this._typingStatus.set(e.userId,{user:e,ts:t}):this._typingStatus.delete(e.userId)},t.prototype._clearTypingStatus=function(){this._typingStatus.clear(),this._typingStarted=0,this._typingEnded=0},t.prototype._setLatestMemberCount=function(e,t,n){var r=!1;return n>=this._lastMemberCountUpdated&&(this._lastMemberCountUpdated=n,r=e!==this.memberCount||t!==this.joinedMemberCount,this.memberCount=e,this.joinedMemberCount=t),r},t.prototype.isReadMessage=function(e){var t=o.v.of(this._iid).sdkState,n=this._unreadMemberStateMap.get(t.userId);return!!n&&n>=e.createdAt},t.prototype.serialize=function(){var e=this;return Object(o.hb)(this,(function(t){t.cachedUnreadMemberState=e.cachedUnreadMemberState,t.cachedUndeliveredMemberState=e.cachedUndeliveredMemberState}))},t.prototype.createMessageCollection=function(e){return void 0===e&&(e={}),new nt(this._iid,Object(o.Vb)(Object(o.Vb)({},e),{channel:this}))},t.prototype.createMemberListQuery=function(e){return void 0===e&&(e={}),new st(this._iid,this.url,e)},t.prototype.createPinnedMessageListQuery=function(e){return void 0===e&&(e={}),new Pt(this._iid,this.url,this.channelType,e)},t.prototype.addMember=function(e,t){if(void 0===t&&(t=0),!this.isExclusive&&!this.isSuper&&!this.isBroadcast){var n=this.members.findIndex((function(t){return t.userId===e.userId}));if(n>-1){var i=this.members[n];i.state===r.JOINED&&(e.state=i.state),this.members.splice(n,1),this.memberCount--}this.members.push(e),this.memberCount++,this._updateUnreadMemberState(e.userId,t),this._updateUndeliveredMemberState(e.userId,t)}},t.prototype.removeMember=function(e){if(!this.isExclusive&&!this.isSuper&&!this.isBroadcast){var t=e instanceof b?e.userId:e,n=this.members.findIndex((function(e){return e.userId===t}));if(n>-1)return this.members.splice(n,1),this.memberCount--,!0}return!1},t.prototype.getUnreadMemberCount=function(e){var t,n;if(e instanceof s.a&&!this.isExclusive&&!this.isSuper&&!this.isBroadcast){var i=o.v.of(this._iid).sdkState,a=e.createdAt,u=0;try{for(var c=Object(o.gc)(this.members),l=c.next();!l.done;l=c.next()){var h=l.value;i.userId!==h.userId&&h.state===r.JOINED&&e.sender.userId!==h.userId&&(this.cachedUnreadMemberState[h.userId]||0)<a&&u++}}catch(e){t={error:e}}finally{try{l&&!l.done&&(n=c.return)&&n.call(c)}finally{if(t)throw t.error}}return u}return 0},t.prototype.getUndeliveredMemberCount=function(e){var t,n;if(e instanceof s.a&&!this.isExclusive&&!this.isSuper&&!this.isBroadcast){var i=o.v.of(this._iid).sdkState,a=e.createdAt,u=0;try{for(var c=Object(o.gc)(this.members),l=c.next();!l.done;l=c.next()){var h=l.value;i.userId!==h.userId&&h.state===r.JOINED&&e.sender.userId!==h.userId&&(this.cachedUndeliveredMemberState[h.userId]||0)<a&&u++}}catch(e){t={error:e}}finally{try{l&&!l.done&&(n=c.return)&&n.call(c)}finally{if(t)throw t.error}}return u}return 0},t.prototype.getReadMembers=function(e,t){var n=this;void 0===t&&(t=!1);var r=o.v.of(this._iid).sdkState;if(!r.userId||this.isExclusive||this.isSuper||this.isBroadcast)return[];var i=e instanceof s.a?e.sender:null,a=[];return this.members.forEach((function(o){if(t||o.userId!==r.userId&&o.userId!==(null==i?void 0:i.userId)){var s=n._unreadMemberStateMap.get(o.userId);s&&s>=e.createdAt&&a.push(o)}})),a},t.prototype.getUnreadMembers=function(e,t){var n=this;void 0===t&&(t=!1);var r=o.v.of(this._iid).sdkState;if(!r.userId||this.isExclusive||this.isSuper||this.isBroadcast)return[];var i=e instanceof s.a?e.sender:null,a=[];return this.members.forEach((function(o){if(t||o.userId!==r.userId&&o.userId!==(null==i?void 0:i.userId)){var s=n._unreadMemberStateMap.get(o.userId);s&&s<e.createdAt&&a.push(o)}})),a},t.prototype.getReadStatus=function(e){var t=this;void 0===e&&(e=!1);var n=o.v.of(this._iid).sdkState;if(!n.userId||this.isExclusive||this.isSuper||this.isBroadcast)return null;var r={};return this.members.forEach((function(i){if(e||i.userId!==n.userId){var o=t._unreadMemberStateMap.get(i.userId);r[i.userId]=new v(t._iid,{channel_url:t.url,channel_type:t.channelType,user:b.payloadify(i),ts:null!=o?o:0})}})),r},t.prototype.getTypingUsers=function(){var e=[];return this._typingStatus.forEach((function(t){var n=t.user;e.push(n)})),e},t.prototype.invalidateTypingStatus=function(){var e=this,t=o.v.of(this._iid).typingIndicatorInvalidateTime,n=Date.now(),r=!1;return this._typingStatus.forEach((function(i,o){var s=i.ts;n-s>=t&&(e._typingStatus.delete(o),r=!0)})),r},t.prototype.refresh=function(){return Object(o.Gb)(this,void 0,void 0,(function(){return Object(o.Rb)(this,(function(e){return[2,this._refresh()]}))}))},t.prototype._refresh=function(e){return void 0===e&&(e=!1),Object(o.Gb)(this,void 0,void 0,(function(){var t,n,r,i,s,a;return Object(o.Rb)(this,(function(u){switch(u.label){case 0:return t=o.v.of(this._iid),n=t.requestQueue,r=t.dispatcher,i=new L({channelUrl:this.url}),[4,n.send(i)];case 1:return s=u.sent(),a=s.as(F).channel,this._update(a),e&&r.dispatch(new R({channels:[a],source:o.x.REQUEST_CHANNEL})),[2,this]}}))}))},t.prototype.freeze=function(){return Object(o.Gb)(this,void 0,void 0,(function(){return Object(o.Rb)(this,(function(t){switch(t.label){case 0:return[4,e.prototype.freeze.call(this)];case 1:return t.sent(),o.v.of(this._iid).dispatcher.dispatch(new R({channels:[this],source:o.x.EVENT_CHANNEL_FROZEN,isWebSocketEventComing:!0})),[2]}}))}))},t.prototype.unfreeze=function(){return Object(o.Gb)(this,void 0,void 0,(function(){return Object(o.Rb)(this,(function(t){switch(t.label){case 0:return[4,e.prototype.unfreeze.call(this)];case 1:return t.sent(),o.v.of(this._iid).dispatcher.dispatch(new R({channels:[this],source:o.x.EVENT_CHANNEL_UNFROZEN,isWebSocketEventComing:!0})),[2]}}))}))},t.prototype.updateChannel=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){var t,n,r,i,s,a,u;return Object(o.Rb)(this,(function(c){switch(c.label){case 0:return t=Object(o.Vb)(Object(o.Vb)({},rt),e),Object(o.hc)(function(e){return Object(o.B)("string",e.coverUrl,!0)&&(Object(o.Xb)(e.coverImage)||Object(o.B)("string",e.coverImage,!0))&&Object(o.B)("boolean",e.isDistinct,!0)&&Object(o.B)("boolean",e.isPublic,!0)&&Object(o.B)("boolean",e.isDiscoverable,!0)&&Object(o.B)("string",e.accessCode,!0)&&Object(o.B)("string",e.name,!0)&&Object(o.B)("string",e.data,!0)&&Object(o.B)("string",e.customType,!0)&&Object(o.k)("string",e.operatorUserIds,!0)&&Object(o.B)("number",e.messageSurvivalSeconds,!0)}(t)).throw(o.fc.invalidParameters),n=o.v.of(this._iid),r=n.dispatcher,i=n.requestQueue,s=new ct(Object(o.Vb)({channelUrl:this.url},t)),[4,i.send(s)];case 1:return a=c.sent(),u=a.as(lt).channel,this._update(u),r.dispatch(new R({channels:[u],source:o.x.EVENT_CHANNEL_UPDATED,isWebSocketEventComing:!0})),[2,this]}}))}))},t.prototype.invite=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){return Object(o.Rb)(this,(function(t){return Object(o.hc)(e.every((function(e){return e instanceof o.u}))).throw(o.fc.invalidParameters),[2,this.inviteWithUserIds(e.map((function(e){return e.userId})))]}))}))},t.prototype.inviteWithUserIds=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){var t,n,r,i,s,a;return Object(o.Rb)(this,(function(u){switch(u.label){case 0:return Object(o.hc)(Object(o.k)("string",e)).throw(o.fc.invalidParameters),t=o.v.of(this._iid),n=t.dispatcher,r=t.requestQueue,i=new ue({channelUrl:this.url,userIds:e}),[4,r.send(i)];case 1:return s=u.sent(),a=s.as(ce).channel,this._update(a),n.dispatch(new R({channels:[a],source:o.x.EVENT_CHANNEL_INVITED,isWebSocketEventComing:!0})),[2,this]}}))}))},t.prototype.join=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){var t,n,i,s,a,u,c;return Object(o.Rb)(this,(function(l){switch(l.label){case 0:return Object(o.hc)(Object(o.B)("string",e,!0)).throw(o.fc.invalidParameters),t=o.v.of(this._iid),n=t.dispatcher,i=t.sdkState,s=t.requestQueue,a=new re({channelUrl:this.url,userId:i.userId,accessCode:e}),[4,s.send(a)];case 1:return u=l.sent(),(c=u.as(ie).channel).myMemberState=this.myMemberState=r.JOINED,this._update(c),n.dispatch(new R({channels:[c],source:o.x.EVENT_CHANNEL_JOINED,isWebSocketEventComing:!0})),[2,this]}}))}))},t.prototype.leave=function(e){return void 0===e&&(e=!1),Object(o.Gb)(this,void 0,void 0,(function(){var t,n,i,s;return Object(o.Rb)(this,(function(a){switch(a.label){case 0:return t=o.v.of(this._iid),n=t.sdkState,i=t.requestQueue,s=new se({channelUrl:this.url,userId:n.userId,shouldRemoveOperatorStatus:e}),[4,i.send(s)];case 1:return a.sent(),this.myMemberState=r.NONE,[2]}}))}))},t.prototype.acceptInvitation=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){var t,n,i,s,a,u,c;return Object(o.Rb)(this,(function(l){switch(l.label){case 0:return Object(o.hc)(Object(o.B)("string",e,!0)).throw(o.fc.invalidParameters),t=o.v.of(this._iid),n=t.dispatcher,i=t.sdkState,s=t.requestQueue,a=new at({channelUrl:this.url,userId:i.userId,accessCode:e}),[4,s.send(a)];case 1:return u=l.sent(),(c=u.as(ut).channel).myMemberState=this.myMemberState=r.JOINED,this._update(c),n.dispatch(new R({channels:[c],source:o.x.EVENT_CHANNEL_ACCEPTED_INVITE,isWebSocketEventComing:!0})),[2,this]}}))}))},t.prototype.declineInvitation=function(){return Object(o.Gb)(this,void 0,void 0,(function(){var e,t,n,i;return Object(o.Rb)(this,(function(s){switch(s.label){case 0:return e=o.v.of(this._iid),t=e.sdkState,n=e.requestQueue,i=new he({channelUrl:this.url,userId:t.userId}),[4,n.send(i)];case 1:return s.sent(),this.myMemberState=r.NONE,[2,this]}}))}))},t.prototype.sendUserMessage=function(t){var n=this,r=new s.ab,i=o.v.of(this._iid).dispatcher,u=a.a.of(this._iid);return e.prototype.sendUserMessage.call(this,t).onPending((function(e){u.completeCurrentAndProcessNextAutoResend(e),r._trigger(e)})).onFailed((function(e,t){t&&u.completeCurrentAndProcessNextAutoResend(t),r._triggerFailed(e,t)})).onSucceeded((function(e){n.hiddenState===jt.HIDDEN_ALLOW_AUTO_UNHIDE&&(n.hiddenState=jt.UNHIDDEN),u.completeCurrentAndProcessNextAutoResend(e),n._shouldUpdateLastMessageWith(e)&&(n.lastMessage=e),xe.of(n._iid).handlers.map((function(e){e.onChannelChanged&&e.onChannelChanged(n)})),i.dispatch(new R({channels:[n],source:o.x.EVENT_MESSAGE_SENT})),r._trigger(e)})),r},t.prototype.updateUserMessage=function(t,n){return Object(o.Gb)(this,void 0,void 0,(function(){var r,i,s,a,u=this;return Object(o.Rb)(this,(function(c){switch(c.label){case 0:return r=o.v.of(this._iid).dispatcher,[4,e.prototype.updateUserMessage.call(this,t,n)];case 1:return i=c.sent(),s=!1,!i.silent&&this._shouldUpdateLastMessageWith(i)&&(this.lastMessage=i,s=!0),a=!1,this.lastPinnedMessage&&this.lastPinnedMessage.messageId===i.messageId&&(this.lastPinnedMessage=i,s=!0,a=!0),s&&(xe.of(this._iid).handlers.map((function(e){e.onChannelChanged&&e.onChannelChanged(u)})),r.dispatch(new R({channels:[this],source:a?o.x.EVENT_PINNED_MESSAGE_UPDATED:o.x.EVENT_MESSAGE_UPDATED}))),a&&xe.of(this._iid).handlers.map((function(e){e.onPinnedMessageUpdated&&e.onPinnedMessageUpdated(u)})),r.dispatch(new o.I({messages:[i],source:o.x.EVENT_MESSAGE_UPDATED})),[2,i]}}))}))},t.prototype._autoResendUserMessage=function(t){var n=this,r=new s.ab,i=o.v.of(this._iid).dispatcher,u=a.a.of(this._iid);return e.prototype._autoResendUserMessage.call(this,t).onPending((function(e){u.completeCurrentAndProcessNextAutoResend(e),r._trigger(e)})).onFailed((function(e,t){u.completeCurrentAndProcessNextAutoResend(t),r._triggerFailed(e,t)})).onSucceeded((function(e){var t=xe.of(n._iid);u.completeCurrentAndProcessNextAutoResend(e),n._shouldUpdateLastMessageWith(e)&&(n.lastMessage=e),t.handlers.map((function(e){e.onChannelChanged&&e.onChannelChanged(n)})),i.dispatch(new R({channels:[n],source:o.x.EVENT_MESSAGE_SENT})),r._trigger(e)})),r},t.prototype.sendFileMessage=function(t){var n=this,r=new s.ab,i=o.v.of(this._iid).dispatcher,u=a.a.of(this._iid);return e.prototype.sendFileMessage.call(this,t).onPending((function(e){u.completeCurrentAndProcessNextAutoResend(e),r._trigger(e)})).onFailed((function(e,t){t&&u.completeCurrentAndProcessNextAutoResend(t),r._triggerFailed(e,t)})).onSucceeded((function(e){var t=xe.of(n._iid);u.completeCurrentAndProcessNextAutoResend(e),n._shouldUpdateLastMessageWith(e)&&(n.lastMessage=e),t.handlers.map((function(e){e.onChannelChanged&&e.onChannelChanged(n)})),i.dispatch(new R({channels:[n],source:o.x.EVENT_MESSAGE_SENT})),r._trigger(e)})),r},t.prototype.sendMultipleFilesMessage=function(t){var n=this,r=new s.P,i=o.v.of(this._iid).dispatcher;return e.prototype.sendMultipleFilesMessage.call(this,t).onPending((function(e){r._trigger(e)})).onFailed((function(e,t){r._triggerFailed(e,t)})).onSucceeded((function(e){var t=xe.of(n._iid);n._shouldUpdateLastMessageWith(e)&&(n.lastMessage=e),t.handlers.map((function(e){e.onChannelChanged&&e.onChannelChanged(n)})),i.dispatch(new R({channels:[n],source:o.x.EVENT_MESSAGE_SENT})),r._trigger(e)})).onFileUploaded((function(e,t,n,i){r._triggerOnFileUploaded(e,t,n,i)})),r},t.prototype.updateFileMessage=function(t,n){return Object(o.Gb)(this,void 0,void 0,(function(){var r,i,s,a,u=this;return Object(o.Rb)(this,(function(c){switch(c.label){case 0:return r=o.v.of(this._iid).dispatcher,[4,e.prototype.updateFileMessage.call(this,t,n)];case 1:return i=c.sent(),s=!1,!i.silent&&this._shouldUpdateLastMessageWith(i)&&(this.lastMessage=i,s=!0),a=!1,this.lastPinnedMessage&&this.lastPinnedMessage.messageId===i.messageId&&(this.lastPinnedMessage=i,s=!0,a=!0),s&&(xe.of(this._iid).handlers.map((function(e){e.onChannelChanged&&e.onChannelChanged(u)})),r.dispatch(new R({channels:[this],source:a?o.x.EVENT_PINNED_MESSAGE_UPDATED:o.x.EVENT_MESSAGE_UPDATED}))),a&&xe.of(this._iid).handlers.map((function(e){e.onPinnedMessageUpdated&&e.onPinnedMessageUpdated(u)})),r.dispatch(new o.I({messages:[i],source:o.x.EVENT_MESSAGE_UPDATED})),[2,i]}}))}))},t.prototype._autoResendFileMessage=function(t){var n=this,r=new s.ab,i=o.v.of(this._iid).dispatcher,u=a.a.of(this._iid);return e.prototype._autoResendFileMessage.call(this,t).onPending((function(e){u.completeCurrentAndProcessNextAutoResend(e),r._trigger(e)})).onFailed((function(e,t){u.completeCurrentAndProcessNextAutoResend(t),r._triggerFailed(e,t)})).onSucceeded((function(e){var t=xe.of(n._iid);u.completeCurrentAndProcessNextAutoResend(e),n._shouldUpdateLastMessageWith(e)&&(n.lastMessage=e),t.handlers.map((function(e){e.onChannelChanged&&e.onChannelChanged(n)})),i.dispatch(new R({channels:[n],source:o.x.EVENT_MESSAGE_SENT})),r._trigger(e)})),r},t.prototype.deleteMessage=function(t){return Object(o.Gb)(this,void 0,void 0,(function(){return Object(o.Rb)(this,(function(n){switch(n.label){case 0:return[4,e.prototype.deleteMessage.call(this,t)];case 1:return n.sent(),0===t.messageId&&t instanceof s.a&&o.v.of(this._iid).dispatcher.dispatch(new o.S({reqId:t.reqId,source:o.x.EVENT_MESSAGE_DELETED})),[2]}}))}))},t.prototype.hide=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){var t,n,r,i,s,a,u,c;return Object(o.Rb)(this,(function(l){switch(l.label){case 0:return t=Object(o.Vb)(Object(o.Vb)({},fe),e),Object(o.hc)(function(e){return Object(o.B)("boolean",e.hidePreviousMessages,!0)&&Object(o.B)("boolean",e.allowAutoUnhide,!0)}(t)).throw(o.fc.invalidParameters),n=o.v.of(this._iid),r=n.dispatcher,i=n.sdkState,s=n.requestQueue,a=new pe(Object(o.Vb)({channelUrl:this.url,userId:i.userId},t)),[4,s.send(a)];case 1:return u=l.sent(),c=u.as(me).messageOffsetTimestamp,this.hiddenState=t.allowAutoUnhide?jt.HIDDEN_ALLOW_AUTO_UNHIDE:jt.HIDDEN_PREVENT_AUTO_UNHIDE,t.hidePreviousMessages&&this._updateUnreadCount(0,0),c&&(this.messageOffsetTimestamp=c),r.dispatch(new R({channels:[this],source:o.x.EVENT_CHANNEL_HIDDEN,isWebSocketEventComing:!0})),[2,this]}}))}))},t.prototype.unhide=function(){return Object(o.Gb)(this,void 0,void 0,(function(){var e,t,n,r;return Object(o.Rb)(this,(function(i){switch(i.label){case 0:return e=o.v.of(this._iid),t=e.dispatcher,n=e.requestQueue,r=new dt({channelUrl:this.url}),[4,n.send(r)];case 1:return i.sent(),this.hiddenState=jt.UNHIDDEN,t.dispatch(new R({channels:[this],source:o.x.EVENT_CHANNEL_UNHIDDEN,isWebSocketEventComing:!0})),[2,this]}}))}))},t.prototype.delete=function(){return Object(o.Gb)(this,void 0,void 0,(function(){var e,t;return Object(o.Rb)(this,(function(n){switch(n.label){case 0:return e=o.v.of(this._iid).requestQueue,t=new ht({channelUrl:this.url}),[4,e.send(t)];case 1:return n.sent(),[2]}}))}))},t.prototype.markAsRead=function(){return Object(o.Gb)(this,void 0,void 0,(function(){var e,t,n,r,i,s,a,u=this;return Object(o.Rb)(this,(function(c){switch(c.label){case 0:return e=o.v.of(this._iid),t=e.sdkState,n=e.dispatcher,r=e.requestQueue,i=new Me({channelUrl:this.url}),[4,r.send(i)];case 1:return s=c.sent(),a=s.as(Oe).readStatus,this._updateUnreadMemberState(t.userId,a.readAt),(this.unreadMessageCount>0||this.unreadMentionCount>0)&&(this._updateUnreadCount(0,0),xe.of(this._iid).handlers.map((function(e){e.onChannelChanged&&e.onChannelChanged(u)}))),n.dispatch(new R({channels:[this],source:o.x.EVENT_CHANNEL_READ})),[2]}}))}))},t.prototype.markAsDelivered=function(){return Object(o.Gb)(this,void 0,void 0,(function(){var e,t,n,r;return Object(o.Rb)(this,(function(i){switch(i.label){case 0:return e=o.v.of(this._iid),t=e.sdkState,n=e.requestQueue,r=new Ae({channelUrl:this.url,userId:t.userId}),[4,n.send(r)];case 1:return i.sent(),[2]}}))}))},t.prototype.startTyping=function(){return Object(o.Gb)(this,void 0,void 0,(function(){var e,t,n,r,i;return Object(o.Rb)(this,(function(s){return e=o.v.of(this._iid),t=e.requestQueue,n=e.typingIndicatorThrottle,(r=(new Date).getTime())-this._typingStarted>=n&&(this._typingStarted=r,this._typingEnded=0,i=new be({channelUrl:this.url,time:this._typingStarted}),t.send(i)),[2]}))}))},t.prototype.endTyping=function(){return Object(o.Gb)(this,void 0,void 0,(function(){var e,t,n,r,i;return Object(o.Rb)(this,(function(s){return e=o.v.of(this._iid),t=e.requestQueue,n=e.typingIndicatorThrottle,(r=(new Date).getTime())-this._typingEnded>=n&&(this._typingStarted=0,this._typingEnded=r,i=new ye({channelUrl:this.url,time:this._typingStarted}),t.send(i)),[2]}))}))},t.prototype.createScheduledUserMessage=function(e){e=Object(o.Vb)(Object(o.Vb)({},s.Q),e),Object(o.hc)(Object(s.R)(e)).throw(o.fc.invalidParameters);var t=new s.ab;return this._createScheduledUserMessage(e,t),t},t.prototype.updateScheduledUserMessage=function(e,t){return Object(o.Gb)(this,void 0,void 0,(function(){var n,r,i;return Object(o.Rb)(this,(function(a){switch(a.label){case 0:return n=Object(o.Vb)(Object(o.Vb)({},vt),t),Object(o.hc)(function(e){return Object(s.K)(e)&&Object(o.B)("number",e.scheduledAt,!0)}(n)).throw(o.fc.invalidParameters),r=o.v.of(this._iid).requestQueue,i=new wt(Object(o.Vb)({reqId:this._generateRequestId(),scheduledMessageId:e,channelType:this.channelType,channelUrl:this.url},n)),[4,r.send(i)];case 1:return[2,a.sent().as(s.bb).message]}}))}))},t.prototype.createScheduledFileMessage=function(e){var t=this;e=Object(o.Vb)(Object(o.Vb)({},s.S),e),Object(o.hc)(Object(s.T)(e)).throw(o.fc.invalidParameters);var n=Date.now(),r=this._generateRequestId(),i=new s.ab;return Object(o.sb)(s.cb).then((function(){var s=t._createPendingScheduledFileMessage(e,r,n);Object(o.b)((function(){return Object(o.Gb)(t,void 0,void 0,(function(){return Object(o.Rb)(this,(function(e){return[2,i._trigger(s)]}))}))}))})),Object(o.Xb)(e.file)?this._uploadFileAndUpdateParams(e).then((function(){return t._createScheduledFileMessage(e,i,r,n)})):this._createScheduledFileMessage(e,i,r,n),i},t.prototype.updateScheduledFileMessage=function(e,t){return Object(o.Gb)(this,void 0,void 0,(function(){var n,r;return Object(o.Rb)(this,(function(i){switch(i.label){case 0:return n=Object(o.Vb)(Object(o.Vb)({},bt),t),Object(o.hc)(function(e){return Object(s.I)(e)&&Object(o.B)("number",e.scheduledAt,!0)&&(Object(o.Xb)(e.file)||Object(o.B)("string",e.fileUrl))&&Object(o.B)("string",e.fileName,!0)&&Object(o.B)("string",e.mimeType,!0)&&Object(o.B)("number",e.fileSize,!0)&&(null===e.thumbnailSizes||void 0===e.thumbnailSizes||e.thumbnailSizes.every((function(e){return Object(o.B)("object",e)&&e.maxWidth>0&&e.maxHeight>0})))}(n)).throw(o.fc.invalidParameters),Object(o.Xb)(n.file)?[4,this._uploadFileAndUpdateParams(n)]:[3,2];case 1:i.sent(),i.label=2;case 2:return r=new yt(Object(o.Vb)({reqId:this._generateRequestId(),scheduledMessageId:e,channelType:this.channelType,channelUrl:this.url},n)),[4,o.v.of(this._iid).requestQueue.send(r)];case 3:return[2,i.sent().as(_t).message]}}))}))},t.prototype.cancelScheduledMessage=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){var t;return Object(o.Rb)(this,(function(n){switch(n.label){case 0:return t=new Et({scheduledMessageId:e,channelType:this.channelType,channelUrl:this.url}),[4,o.v.of(this._iid).requestQueue.send(t)];case 1:return n.sent(),[2]}}))}))},t.prototype.sendScheduledMessageNow=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){var t;return Object(o.Rb)(this,(function(n){switch(n.label){case 0:return t=new St({scheduledMessageId:e,channelType:this.channelType,channelUrl:this.url}),[4,o.v.of(this._iid).requestQueue.send(t)];case 1:return n.sent(),[2]}}))}))},t.prototype.getMyPushTriggerOption=function(){return Object(o.Gb)(this,void 0,void 0,(function(){var e,t,n,r,i,s;return Object(o.Rb)(this,(function(a){switch(a.label){case 0:return e=o.v.of(this._iid),t=e.sdkState,n=e.requestQueue,r=new At({userId:t.userId,channelUrl:this.url}),[4,n.send(r)];case 1:return i=a.sent(),s=i.as(Ct).pushTriggerOption,this.myPushTriggerOption=s,[2,s]}}))}))},t.prototype.setMyPushTriggerOption=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){var t,n,r,i,s,a,u;return Object(o.Rb)(this,(function(c){switch(c.label){case 0:return Object(o.hc)(Object(o.q)(o.r,e)).throw(o.fc.invalidParameters),t=o.v.of(this._iid),n=t.dispatcher,r=t.sdkState,i=t.requestQueue,s=new Mt({userId:r.userId,channelUrl:this.url,pushTriggerOption:e}),[4,i.send(s)];case 1:return a=c.sent(),u=a.as(Ot).pushTriggerOption,this.myPushTriggerOption=u,n.dispatch(new R({channels:[this],source:o.x.EVENT_CHANNEL_UPDATED,isWebSocketEventComing:!0})),[2,u]}}))}))},t.prototype.setMyCountPreference=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){var t,n,r,i,s,a,u;return Object(o.Rb)(this,(function(c){switch(c.label){case 0:return Object(o.hc)(Object(o.q)(xt,e)).throw(o.fc.invalidParameters),t=o.v.of(this._iid),n=t.dispatcher,r=t.sdkState,i=t.requestQueue,s=new ft({channelUrl:this.url,userId:r.userId,countPreference:e}),[4,i.send(s)];case 1:return a=c.sent(),u=a.as(pt).countPreference,this.myCountPreference=u,this._updateUnreadCount(this.unreadMessageCount,this.unreadMentionCount),n.dispatch(new R({channels:[this],source:o.x.EVENT_CHANNEL_UPDATED,isWebSocketEventComing:!0})),[2,u]}}))}))},t.prototype.resetMyHistory=function(){return Object(o.Gb)(this,void 0,void 0,(function(){var e,t,n,r,i,s;return Object(o.Rb)(this,(function(a){switch(a.label){case 0:return e=o.v.of(this._iid),t=e.dispatcher,n=e.requestQueue,r=new mt({channelUrl:this.url}),[4,n.send(r)];case 1:return i=a.sent(),s=i.as(gt).messageOffsetTimestamp,this.messageOffsetTimestamp=s,this.lastMessage&&this.lastMessage.createdAt<s&&(this.lastMessage=null),t.dispatch(new R({channels:[this],source:o.x.EVENT_CHANNEL_RESET_HISTORY,isWebSocketEventComing:!0})),[2,this]}}))}))},t.prototype.pinMessage=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){var t,n;return Object(o.Rb)(this,(function(r){switch(r.label){case 0:return Object(o.hc)(Object(o.B)("number",e)&&e>0).throw(o.fc.invalidParameters),t=o.v.of(this._iid).requestQueue,n=new Tt({channelType:this.channelType,channelUrl:this.url,messageId:e}),[4,t.send(n)];case 1:return r.sent(),[2]}}))}))},t.prototype.unpinMessage=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){var t,n;return Object(o.Rb)(this,(function(r){switch(r.label){case 0:return Object(o.hc)(Object(o.B)("number",e)&&e>0).throw(o.fc.invalidParameters),t=o.v.of(this._iid).requestQueue,n=new kt({channelType:this.channelType,channelUrl:this.url,messageId:e}),[4,t.send(n)];case 1:return r.sent(),[2]}}))}))},t.prototype._uploadFileAndUpdateParams=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){var t,n,r,i,a,u,c,l,h,d,f;return Object(o.Rb)(this,(function(p){switch(p.label){case 0:return Object(o.Xb)(e.file)?(t=o.v.of(this._iid).requestQueue,n=new s.eb({file:e.file,channelUrl:this.url,thumbnailSizes:e.thumbnailSizes,requestId:this._generateRequestId()}),[4,t.send(n)]):[3,2];case 1:r=p.sent(),i=r.as(s.db),a=i.url,u=i.fileSize,c=void 0===u?e.fileSize:u,l=i.thumbnailSizes,h=void 0===l?e.thumbnailSizes:l,d=i.requireAuth,f=void 0!==d&&d,e.fileUrl=a,e.fileSize=c,e.thumbnailSizes=h,e.requireAuth=f,p.label=2;case 2:return[2]}}))}))},t.prototype.resendMessage=function(e,t){var n,r=this;if(Object(o.hc)(e instanceof s.a&&!e.scheduledInfo&&e.isResendable).throw(o.fc.invalidParameters),e.isUserMessage()){var i=null!==(n=e.messageParams)&&void 0!==n?n:Object(s.U)(e),a=new s.ab;return this._sendUserMessage(i,s.V.RESEND,e.reqId).onPending((function(e){a._trigger(e)})).onFailed((function(e,t){a._triggerFailed(e,t)})).onSucceeded((function(e){r._tryUpdateLastMessageAndCallEvents(r,e),a._trigger(e)})),a}if(e.isFileMessage()){var u=this._validateFailedFileMessageHasFile(e,t);Object(o.hc)(u).throw(o.fc.invalidParameters),i=Object(s.W)(e,t);var c=new s.ab;return this._sendFileMessage(i,s.V.RESEND,e.reqId).onPending((function(e){c._trigger(e)})).onFailed((function(e,t){c._triggerFailed(e,t)})).onSucceeded((function(e){r._tryUpdateLastMessageAndCallEvents(r,e),c._trigger(e)})),c}if(e.isMultipleFilesMessage()){i=e.messageParams;var l=new s.P;return this._sendMultipleFilesMessage(i,s.V.RESEND,e.reqId).onPending((function(e){l._trigger(e)})).onFailed((function(e,t){l._triggerFailed(e,t)})).onSucceeded((function(e){r._tryUpdateLastMessageAndCallEvents(r,e),l._trigger(e)})).onFileUploaded((function(e,t,n,r){l._triggerOnFileUploaded(e,t,n,r)})),l}},t.prototype.copyMessage=function(e,t){var n=this;if(Object(o.hc)(e instanceof s.Ab&&t instanceof s.a&&t.sendingStatus===o.jb.SUCCEEDED&&this.url===t.channelUrl&&!t.scheduledInfo).throw(o.fc.invalidParameters),t.isUserMessage()){Object(o.hc)(!t.poll).throw(o.fc.notSupportedError);var r=Object(s.X)(t),i=new s.ab;return e._sendUserMessage(r).onPending((function(e){i._trigger(e)})).onFailed((function(e,t){i._triggerFailed(e,t)})).onSucceeded((function(t){e.isGroupChannel()&&n._tryUpdateLastMessageAndCallEvents(e,t),i._trigger(t)})),i}if(t.isFileMessage()){r=Object(s.Y)(t);var a=new s.ab;return e._sendFileMessage(r).onPending((function(e){a._trigger(e)})).onFailed((function(e,t){a._triggerFailed(e,t)})).onSucceeded((function(t){e.isGroupChannel()&&n._tryUpdateLastMessageAndCallEvents(e,t),a._trigger(t)})),a}if(t.isMultipleFilesMessage()){if(e.isGroupChannel()){r=Object(s.Z)(t);var u=new s.P;return e._sendMultipleFilesMessage(r,s.V.COPY).onPending((function(e){u._trigger(e)})).onFailed((function(e,t){u._triggerFailed(e,t)})).onSucceeded((function(t){n._tryUpdateLastMessageAndCallEvents(e,t),u._trigger(t)})).onFileUploaded((function(e,t,n,r){u._triggerOnFileUploaded(e,t,n,r)})),u}throw o.fc.channelTypeNotSupportedError}},t}(s.Ab),Lt=(n(39),{}),Ft=function(){function e(e){var t=e._iid,n=e.limit,r=void 0===n?100:n,i=this;this.ref=0,this._iid=t,this._limit=r;var s,u=o.v.of(this._iid),c=u.sdkState,l=u.dispatcher,h=u.logger,d=u.cacheContext;this._metadataKey=(s=c.userId,"sendbird:".concat(s,"@groupchannel/sync.meta"));var f=function(e){return"sendbird:".concat(e,"@groupchannel/sync")}(c.userId);this._sync=new Ie(f,(function(){return Object(o.Gb)(i,void 0,void 0,(function(){var e,t,n,r,i,s,u,l,f,p,m,g;return Object(o.Rb)(this,(function(b){switch(b.label){case 0:return e={hasNext:!0,nextToken:""},[4,this.loadMetadata()];case 1:if(b.sent(),h.debug("channel background sync from",null===(f=this._metadata)||void 0===f?void 0:f.token),null===(p=this._metadata)||void 0===p?void 0:p.completed)return[3,13];b.label=2;case 2:if(b.trys.push([2,9,,12]),(t={includeEmpty:!0,order:a.c.CHRONOLOGICAL}).order!==a.c.LATEST_LAST_MESSAGE)return[3,6];b.label=3;case 3:return b.trys.push([3,5,,6]),[4,d.preference.get(Object(o.h)(c.appId))];case 4:return n=b.sent(),t.includeChatNotification=Boolean(n),[3,6];case 5:return b.sent(),t.includeChatNotification=!1,[3,6];case 6:return[4,xe.of(this._iid).getMyGroupChannels(null!==(g=null===(m=this._metadata)||void 0===m?void 0:m.token)&&void 0!==g?g:"",t,this._limit,o.x.SYNC_CHANNEL_BACKGROUND)];case 7:return r=b.sent(),i=r.channels,s=r.token,e.hasNext=i.length>=this._limit&&!!s,e.nextToken=s,this._metadata&&(this._metadata.token=s,(l=this._metadata.range).extends.apply(l,Object(o.dc)([],Object(o.ec)(i.map((function(e){return e.createdAt}))),!1)),this._metadata.completed=!e.hasNext),h.debug("channel background sync progress",e),[4,this.saveMetadata()];case 8:return b.sent(),[3,12];case 9:return u=b.sent(),h.debug("channel background sync error",u),u instanceof o.fc&&u.isInvalidTokenError?[4,this.clearMetaData()]:[3,11];case 10:b.sent(),b.label=11;case 11:throw u;case 12:return[3,14];case 13:e.hasNext=!1,e.nextToken="",b.label=14;case 14:return[2,e]}}))}))})),this._connectionEventContext=l.on((function(e){e instanceof o.nc&&(e.stateType===o.oc.CONNECTED?i.resume():i.pause())}))}return e.of=function(t){return Lt[t]||(Lt[t]=new e({_iid:t})),Lt[t].ref++,Lt[t]},e.clear=function(e){Lt[e]&&(Lt[e].close(),delete Lt[e])},Object.defineProperty(e.prototype,"range",{get:function(){var e,t;return null!==(t=null===(e=this._metadata)||void 0===e?void 0:e.range)&&void 0!==t?t:new u.h({})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"completed",{get:function(){var e;return!!(null===(e=this._metadata)||void 0===e?void 0:e.completed)},enumerable:!1,configurable:!0}),e.prototype.loadMetadata=function(){return Object(o.Gb)(this,void 0,void 0,(function(){var e;return Object(o.Rb)(this,(function(t){switch(t.label){case 0:return this._metadata?[3,2]:[4,o.v.of(this._iid).cacheContext.preference.get(this._metadataKey)];case 1:e=t.sent(),this._metadata={token:e?e.token:"",range:new u.h(e?e.range:{top:Number.MAX_SAFE_INTEGER,bottom:0}),completed:!!e&&e.completed},t.label=2;case 2:return[2,this._metadata]}}))}))},e.prototype.saveMetadata=function(){return Object(o.Gb)(this,void 0,void 0,(function(){return Object(o.Rb)(this,(function(e){switch(e.label){case 0:return this._metadata?[4,o.v.of(this._iid).cacheContext.preference.set(this._metadataKey,this._metadata)]:[3,2];case 1:return e.sent(),[2,!0];case 2:return[2,!1]}}))}))},e.prototype.clearMetaData=function(){return Object(o.Gb)(this,void 0,void 0,(function(){return Object(o.Rb)(this,(function(e){switch(e.label){case 0:return[4,o.v.of(this._iid).cacheContext.preference.remove(this._metadataKey)];case 1:return e.sent(),this._metadata=void 0,[2]}}))}))},e.prototype.resume=function(){var e,t,n=o.v.of(this._iid),r=n.logger;n.connectionManager.isConnected&&(r.debug("channel background sync resume()"),this._sync.start(null!==(t=null===(e=this._metadata)||void 0===e?void 0:e.token)&&void 0!==t?t:""))},e.prototype.pause=function(){o.v.of(this._iid).logger.debug("channel background sync stop()"),this._sync.stop()},e.prototype.close=function(){this.ref--,this.ref<=0&&(this.ref=0,this.pause(),this._connectionEventContext.close(),delete Lt[this._iid])},e}(),Bt={},Ht=function(){function e(e){var t=e._iid,n=this;this.ref=0,this._iid=t;var r,i=o.v.of(this._iid),s=i.logger,a=i.sdkState,u=i.dispatcher,c=i.cacheContext;this._metadataKey=(r=a.userId,"sendbird:".concat(r,"@groupchannel/changelogs.meta"));var l=function(e){return"sendbird:".concat(e,"@groupchannel/changelogs")}(a.userId);this._sync=new Ie(l,(function(){return Object(o.Gb)(n,void 0,void 0,(function(){var e,t,n,r,i,u,l,h,d,f;return Object(o.Rb)(this,(function(p){switch(p.label){case 0:return e={hasNext:!0,nextToken:0},[4,this.loadMetadata()];case 1:p.sent(),s.debug("channel changelog sync from",null===(h=this._metadata)||void 0===h?void 0:h.token),p.label=2;case 2:p.trys.push([2,9,,12]),t={includeEmpty:!0},p.label=3;case 3:return p.trys.push([3,5,,6]),[4,c.preference.get(Object(o.h)(a.appId))];case 4:return n=p.sent(),t.includeChatNotification=Boolean(n),[3,6];case 5:return p.sent(),t.includeChatNotification=!1,[3,6];case 6:return[4,xe.of(this._iid).getMyGroupChannelChangeLogs(null!==(f=null===(d=this._metadata)||void 0===d?void 0:d.token)&&void 0!==f?f:"",t,o.x.SYNC_CHANNEL_CHANGELOGS)];case 7:return r=p.sent(),i=r.hasMore,u=r.token,e.hasNext=i,e.nextToken=u,this._metadata&&(this._metadata.token=u),s.debug("channel changelog sync progress",e),[4,this.saveMetadata()];case 8:return p.sent(),[3,12];case 9:return l=p.sent(),s.debug("channel changelog sync error",l),l instanceof o.fc&&l.isInvalidTokenError?[4,this.clearMetadata()]:[3,11];case 10:p.sent(),p.label=11;case 11:throw l;case 12:return[2,e]}}))}))})),this._connectionEventContext=u.on((function(e){e instanceof o.nc&&(e.stateType===o.oc.CONNECTED?n.resume():n.pause())}))}return e.of=function(t){return Bt[t]||(Bt[t]=new e({_iid:t})),Bt[t].ref++,Bt[t]},e.clear=function(e){Bt[e]&&(Bt[e].close(),delete Bt[e])},e.prototype.loadMetadata=function(){return Object(o.Gb)(this,void 0,void 0,(function(){var e,t,n,r;return Object(o.Rb)(this,(function(i){switch(i.label){case 0:return this._metadata?[3,2]:(e=o.v.of(this._iid),t=e.cacheContext,n=e.firstConnectedAt,[4,t.preference.get(this._metadataKey)]);case 1:r=i.sent(),this._metadata={token:r?r.token:n},i.label=2;case 2:return[2,this._metadata]}}))}))},e.prototype.saveMetadata=function(){return Object(o.Gb)(this,void 0,void 0,(function(){return Object(o.Rb)(this,(function(e){switch(e.label){case 0:return this._metadata?[4,o.v.of(this._iid).cacheContext.preference.set(this._metadataKey,this._metadata)]:[3,2];case 1:return e.sent(),[2,!0];case 2:return[2,!1]}}))}))},e.prototype.clearMetadata=function(){return Object(o.Gb)(this,void 0,void 0,(function(){return Object(o.Rb)(this,(function(e){switch(e.label){case 0:return[4,o.v.of(this._iid).cacheContext.preference.remove(this._metadataKey)];case 1:return e.sent(),this._metadata=void 0,[2]}}))}))},e.prototype.resume=function(){o.v.of(this._iid).connectionManager.isConnected&&this._sync.start(0)},e.prototype.pause=function(){this._sync.stop()},e.prototype.close=function(){this.ref--,this.ref<=0&&(this.ref=0,this.pause(),this._connectionEventContext.close(),delete Bt[this._iid])},e}(),qt=function(e,t){return e.findIndex((function(e){return e.isIdentical(t)}))},Vt=function(e,t,n){if(e.length>0){for(var r=qt(e,t),i=0,o=e.length-1,s=Math.floor((i+o)/2);i<o;){var a=Gt(e[s],t,n);if(a>0)o=s,s=Math.floor((i+o)/2);else{if(!(a<0))return{place:s,oldPosition:r};i=s+1,s=Math.floor((i+o)/2)}}return{place:Gt(e[s],t,n)>=0?s:s+1,oldPosition:r}}return{place:e.length,oldPosition:-1}},Gt=function(e,t,n){switch(n){case a.c.LATEST_LAST_MESSAGE:return e.lastMessage&&t.lastMessage?t.lastMessage.createdAt-e.lastMessage.createdAt:e.lastMessage?-1:t.lastMessage?1:t.createdAt-e.createdAt;case a.c.CHRONOLOGICAL:return t.createdAt-e.createdAt;case a.c.CHANNEL_NAME_ALPHABETICAL:var r=e.name.localeCompare(t.name);return 0===r?e.createdAt-t.createdAt:r;default:return 0}},zt=function(){function e(e,t){var n=t.filter,r=t.order,i=t.limit,u=this;this.channels=[],this._iid=e,this._key="gcc-".concat(Object(o.bc)()),this._isDisposed=!1,this._isGetRemoteChannelsSucceeded=!0,this.filter=null!=n?n:new _,this.order=null!=r?r:a.c.LATEST_LAST_MESSAGE,this._hasMore=!0,this._token="",this._limit=null!=i?i:s.e;var c=o.v.of(this._iid),l=c.sdkState,h=c.cacheContext,d=c.dispatcher;h.localCacheEnabled&&(this._backgroundSync=Ft.of(e),this._backgroundSync.resume()),this._changelogSync=Ht.of(e),this._changelogSync.resume(),xe.of(this._iid).subscribeChannelEvent(this._key,{onUpdate:function(e,t){if(I(t)){var n=e.filter((function(e){return u.filter.match(e,l.userId)})),r=e.filter((function(e){return!u.filter.match(e,l.userId)})).map((function(e){return e.url}));n.length>0&&u._addChannelsToView(n,t),r.length>0&&u._removeChannelsFromView(r,t)}},onRemove:function(e,t){u._removeChannelsFromView(e,t)}}),o.v.of(this._iid).statLogCollector.put(new o.db({type:o.eb.FEATURE_LOCALCACHE,data:{use_local_cache:h.localCacheEnabled,collection_interface:{group_channel:!0}}})),d.on((function(e){e instanceof o.nc&&(e.stateType===o.oc.CONNECTED?u._isGetRemoteChannelsSucceeded||Object(o.Gb)(u,void 0,void 0,(function(){return Object(o.Rb)(this,(function(e){switch(e.label){case 0:return[4,this._revokeLoadMore()];case 1:return e.sent(),[2]}}))})):e.stateType===o.oc.LOGOUT&&u.dispose())}))}return Object.defineProperty(e.prototype,"hasMore",{get:function(){return!this._isDisposed&&this._hasMore},enumerable:!1,configurable:!0}),e.prototype.setGroupChannelCollectionHandler=function(e){this._handler=e},e.prototype._addChannelsToView=function(e,t,n){var r,i,s,a,u=this;void 0===n&&(n=!1);var c=[],l=[],h=[];try{for(var d=Object(o.gc)(e),f=d.next();!f.done;f=d.next()){var p=f.value,m=qt(this.channels,p);m>=0&&this.channels.splice(m,1);var g=Vt(this.channels,p,this.order).place;if(m<0)g===this.channels.length?!n&&this._hasMore||(c.push(p),this.channels.push(p)):(c.push(p),this.channels.splice(g,0,p));else switch(t){case o.x.EVENT_CHANNEL_UPDATED:case o.x.EVENT_MESSAGE_RECEIVED:case o.x.SYNC_CHANNEL_CHANGELOGS:case o.x.EVENT_MESSAGE_SENT:g!==m&&this._hasMore&&g===this.channels.length?h.push(p):(this.channels.splice(g,0,p),l.push(p));break;default:this.channels.splice(g,0,p),l.push(p)}}}catch(e){r={error:e}}finally{try{f&&!f.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}if(h.length>0)try{for(var b=Object(o.gc)(h),v=b.next();!v.done;v=b.next()){p=v.value;var y=qt(this.channels,p);-1!==y&&this.channels.splice(y,1)}}catch(e){s={error:e}}finally{try{v&&!v.done&&(a=b.return)&&a.call(b)}finally{if(s)throw s.error}}I(t)&&Object(o.b)((function(){return Object(o.Gb)(u,void 0,void 0,(function(){var e,n,r,i;return Object(o.Rb)(this,(function(o){return e=new We(t),c.length>0&&(null===(n=this._handler)||void 0===n?void 0:n.onChannelsAdded)&&this._handler.onChannelsAdded(e,c),l.length>0&&(null===(r=this._handler)||void 0===r?void 0:r.onChannelsUpdated)&&this._handler.onChannelsUpdated(e,l),h.length>0&&(null===(i=this._handler)||void 0===i?void 0:i.onChannelsDeleted)&&this._handler.onChannelsDeleted(e,h.map((function(e){return e.url}))),[2]}))}))}))},e.prototype._removeChannelsFromView=function(e,t){var n,r,i=this,s=[],a=function(e){var t=u.channels.findIndex((function(t){return t.url===e}));t>=0&&(s.push(u.channels[t].url),u.channels.splice(t,1))},u=this;try{for(var c=Object(o.gc)(e),l=c.next();!l.done;l=c.next())a(l.value)}catch(e){n={error:e}}finally{try{l&&!l.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}return I(t)&&s.length>0&&Object(o.b)((function(){return Object(o.Gb)(i,void 0,void 0,(function(){var e,n;return Object(o.Rb)(this,(function(r){return e=new We(t),(null===(n=this._handler)||void 0===n?void 0:n.onChannelsDeleted)&&this._handler.onChannelsDeleted(e,s),[2]}))}))})),s},e.prototype._getLocalChannels=function(){return Object(o.Gb)(this,void 0,void 0,(function(){var e,t;return Object(o.Rb)(this,(function(n){switch(n.label){case 0:return e=xe.of(this._iid),t=this.channels.length>0?function(e,t){var n,r,i,o;switch(t){case a.c.LATEST_LAST_MESSAGE:return null!==(r=null===(n=e.lastMessage)||void 0===n?void 0:n.createdAt)&&void 0!==r?r:e.createdAt;case a.c.CHRONOLOGICAL:return e.createdAt;case a.c.CHANNEL_NAME_ALPHABETICAL:return e.name;default:return null!==(o=null===(i=e.lastMessage)||void 0===i?void 0:i.createdAt)&&void 0!==o?o:e.createdAt}}(this.channels[this.channels.length-1],this.order):null,[4,e.getChannelsFromCache(t,this.filter,this.order,this._limit,t?this.channels[this.channels.length-1].url:void 0)];case 1:return[2,n.sent()]}}))}))},e.prototype._getRemoteChannels=function(){return Object(o.Gb)(this,void 0,void 0,(function(){var e,t,n;return Object(o.Rb)(this,(function(r){switch(r.label){case 0:return[4,xe.of(this._iid).getMyGroupChannels(this._token,Object(o.jc)(Object(o.Vb)(Object(o.Vb)({},this.filter),{order:this.order})),this._limit)];case 1:return e=r.sent(),t=e.channels,n=e.token,this._token=n,this._hasMore=!!n,[2,t]}}))}))},e.prototype._revokeLoadMore=function(){return Object(o.Gb)(this,void 0,void 0,(function(){var e;return Object(o.Rb)(this,(function(t){switch(t.label){case 0:if(this._isDisposed)return[2];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this._getRemoteChannels()];case 2:return e=t.sent(),this._isGetRemoteChannelsSucceeded=!0,this._addChannelsToView(e,o.x.REQUEST_CHANNEL,!0),[3,4];case 3:return t.sent(),this._isGetRemoteChannelsSucceeded=!1,[3,4];case 4:return[2]}}))}))},e.prototype.loadMore=function(){return Object(o.Gb)(this,void 0,void 0,(function(){var e,t,n,r,i=this;return Object(o.Rb)(this,(function(s){switch(s.label){case 0:if(this._isDisposed)throw new o.fc({code:o.rb.COLLECTION_DISPOSED,message:"Collection has been disposed."});return this._hasMore?(e=o.v.of(this._iid),t=e.cacheContext,n=e.connectionManager,r=[],!t.localCacheEnabled||n.isConnected&&!this._backgroundSync.completed?[3,2]:[4,Object(o.o)((function(){return Object(o.Gb)(i,void 0,void 0,(function(){return Object(o.Rb)(this,(function(e){switch(e.label){case 0:return[4,this._getLocalChannels()];case 1:return r=e.sent(),[2]}}))}))}))]):[3,6];case 1:return s.sent(),this._hasMore=r.length>=this._limit,[3,5];case 2:return s.trys.push([2,4,,5]),[4,this._getRemoteChannels()];case 3:return r=s.sent(),this._isGetRemoteChannelsSucceeded=!0,[3,5];case 4:return s.sent(),this._isGetRemoteChannelsSucceeded=!1,[3,5];case 5:return this._addChannelsToView(r,o.x.REQUEST_CHANNEL,!0),[2,r];case 6:return[2,[]]}}))}))},e.prototype.dispose=function(){var e,t;this._isDisposed||(this._isDisposed=!0,this.channels.length>0&&this.channels.splice(0,this.channels.length),null===(e=this._backgroundSync)||void 0===e||e.close(),null===(t=this._changelogSync)||void 0===t||t.close(),xe.of(this._iid).unsubscribeChannelEvent(this._key))},e}(),Wt=function(e){function t(t){var n=this,r=t.token,i=t.limit,s=t.order,a=t.includeEmpty,u=t.membershipFilter,l=t.channelNameContainsFilter,h=t.channelUrlsFilter,d=t.customTypesFilter,f=t.customTypeStartsWithFilter,p=t.superChannelFilter,m=t.metadataOrderKeyFilter,g=t.metadataKey,b=t.metadataValues,v=t.metadataValueStartsWith,y=t.includeFrozen,_=t.includeMetaData;return(n=e.call(this)||this).method=o.a.GET,n.path=o.vb,n.params=Object(o.Tb)(Object(o.jc)({token:r,limit:i,order:s,show_member:!0,show_read_receipt:!0,show_delivery_receipt:!0,show_empty:a,public_mode:c.PUBLIC,public_membership_mode:u,name_contains:l,channel_urls:h,custom_types:d,custom_type_startswith:f,super_mode:p,metadata_order_key:m,metadata_key:g,metadata_values:b,metadata_value_startswith:v,show_frozen:y,show_metadata:_})),n}return Object(o.A)(t,e),t}(o.Ub),Kt=function(e){function t(t,n){var r=e.call(this,t,n)||this;r.channels=[];var i=n.next,o=n.channels,s=n.ts;return r.token=i,o&&o.length>0&&(r.channels=o.map((function(e){return e.ts=s,new Ut(t,e)}))),r.ts="number"==typeof s?s:0,r}return Object(o.A)(t,e),t}(o.Wb);!function(e){e.ALL="all",e.JOINED="joined"}(Dt||(Dt={}));var Yt=function(e){function t(t,n){var r,i,o,s,u,c,l,d,f,p,m,g,b,v,y=this;return(y=e.call(this,t,n)||this).includeEmpty=!1,y.includeFrozen=!0,y.includeMetaData=!0,y.channelUrlsFilter=null,y.customTypesFilter=null,y.customTypeStartsWithFilter=null,y.channelNameContainsFilter=null,y.membershipFilter=Dt.ALL,y.superChannelFilter=h.ALL,y.metadataKey=null,y.metadataValues=null,y.metadataOrderKeyFilter=null,y.metadataValueStartsWith=null,y.order=a.d.CHRONOLOGICAL,y.includeEmpty=null!==(r=n.includeEmpty)&&void 0!==r&&r,y.includeFrozen=null===(i=n.includeFrozen)||void 0===i||i,y.includeMetaData=null===(o=n.includeMetaData)||void 0===o||o,y.channelUrlsFilter=null!==(s=n.channelUrlsFilter)&&void 0!==s?s:null,y.customTypesFilter=null!==(u=n.customTypesFilter)&&void 0!==u?u:null,y.customTypeStartsWithFilter=null!==(c=n.customTypeStartsWithFilter)&&void 0!==c?c:null,y.channelNameContainsFilter=null!==(l=n.channelNameContainsFilter)&&void 0!==l?l:null,y.membershipFilter=null!==(d=n.membershipFilter)&&void 0!==d?d:Dt.ALL,y.superChannelFilter=null!==(f=n.superChannelFilter)&&void 0!==f?f:h.ALL,y.metadataKey=null!==(p=n.metadataKey)&&void 0!==p?p:null,y.metadataValues=null!==(m=n.metadataValues)&&void 0!==m?m:null,y.metadataOrderKeyFilter=null!==(g=n.metadataOrderKeyFilter)&&void 0!==g?g:null,y.metadataValueStartsWith=null!==(b=n.metadataValueStartsWith)&&void 0!==b?b:null,y.order=null!==(v=n.order)&&void 0!==v?v:a.d.CHRONOLOGICAL,y}return Object(o.A)(t,e),t.prototype._validate=function(){return e.prototype._validate.call(this)&&Object(o.B)("boolean",this.includeEmpty)&&Object(o.B)("boolean",this.includeFrozen)&&Object(o.B)("boolean",this.includeMetaData)&&Object(o.B)("string",this.channelNameContainsFilter,!0)&&Object(o.k)("string",this.channelUrlsFilter,!0)&&Object(o.k)("string",this.customTypesFilter,!0)&&Object(o.B)("string",this.customTypeStartsWithFilter,!0)&&Object(o.q)(Dt,this.membershipFilter)&&Object(o.q)(h,this.superChannelFilter)&&Object(o.q)(a.d,this.order)&&Object(o.B)("string",this.metadataOrderKeyFilter,!0)&&Object(o.B)("string",this.metadataKey,!0)&&Object(o.k)("string",this.metadataValues,!0)&&Object(o.B)("string",this.metadataValueStartsWith,!0)},t.prototype.next=function(){return Object(o.Gb)(this,void 0,void 0,(function(){var e,t,n,r,i,s,a,u;return Object(o.Rb)(this,(function(c){switch(c.label){case 0:return this._validate()?this._isLoading?[3,3]:(e=[],this._hasNext?(this._isLoading=!0,t=o.v.of(this._iid),n=t.requestQueue,t.dispatcher,r=new Wt(Object(o.jc)(Object(o.Vb)(Object(o.Vb)({},this),{token:this._token}))),[4,n.send(r)]):[3,2]):[3,5];case 1:return i=c.sent(),s=i.as(Kt),a=s.channels,u=s.token,this._token=u,this._hasNext=!!u,this._isLoading=!1,[2,a];case 2:return[2,e];case 3:throw o.fc.queryInProgress;case 4:return[3,6];case 5:throw o.fc.invalidParameters;case 6:return[2]}}))}))},t}(o.N),Qt=function(e){function t(t){void 0===t&&(t={});var n=e.call(this)||this;return Object.keys(t).forEach((function(e){n.hasOwnProperty(e)&&(n[e]=t[e])})),n}return Object(o.A)(t,e),t}(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onUserJoined=o.wb,t.onUserLeft=o.wb,t.onUserReceivedInvitation=o.wb,t.onUserDeclinedInvitation=o.wb,t.onChannelHidden=o.wb,t.onUnreadMemberStatusUpdated=o.wb,t.onUndeliveredMemberStatusUpdated=o.wb,t.onTypingStatusUpdated=o.wb,t.onPollUpdated=o.wb,t.onPollVoted=o.wb,t.onPollDeleted=o.wb,t.onPinnedMessageUpdated=o.wb,t}return Object(o.A)(t,e),t}(u.b)),Jt=function(e){function t(t){var n=this,r=t.token,i=t.limit,s=t.order,a=t.reverse,u=t.channelUrl,c=t.messageTypeFilter,l=t.scheduledStatus;return(n=e.call(this)||this).method=o.a.GET,n.path="".concat(o.fb),n.params=Object(o.Tb)(Object(o.jc)({token:r,limit:i,reverse:a,channel_url:u,order:s,message_type:c,status:l})),n}return Object(o.A)(t,e),t}(o.Ub),Zt=function(e){function t(t,n){var r=e.call(this,t,n)||this;r.scheduledMessages=[];var i=n.next,o=n.scheduled_messages;return r.token=i,r.scheduledMessages=o.map((function(e){return Object(s.f)(t,e)})),r}return Object(o.A)(t,e),t}(o.Wb),$t=function(e){function t(t,n){var r,i,s,a,u,c=this;return(c=e.call(this,t,n)||this).channelUrl=null,c.order=null,c.reverse=!1,c.scheduledStatus=null,c.messageTypeFilter=o.lb.ALL,c.channelUrl=null!==(r=n.channelUrl)&&void 0!==r?r:null,c.order=null!==(i=n.order)&&void 0!==i?i:null,c.reverse=null!==(s=n.reverse)&&void 0!==s&&s,c.scheduledStatus=null!==(a=n.scheduledStatus)&&void 0!==a?a:null,c.messageTypeFilter=null!==(u=n.messageTypeFilter)&&void 0!==u?u:o.lb.ALL,c}return Object(o.A)(t,e),t.prototype._validate=function(){return e.prototype._validate.call(this)&&Object(o.B)("string",this.channelUrl,!0)&&(Object(o.q)(a.f,this.order)||null===this.order)&&Object(o.B)("boolean",this.reverse)&&(Object(o.k)(s.h,this.scheduledStatus)||null===this.scheduledStatus)&&Object(o.q)(o.lb,this.messageTypeFilter)},t.prototype.next=function(){return Object(o.Gb)(this,void 0,void 0,(function(){var e,t,n,r,i,s;return Object(o.Rb)(this,(function(a){switch(a.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,e=o.v.of(this._iid).requestQueue,t=new Jt(Object(o.jc)(Object(o.Vb)(Object(o.Vb)({},this),{token:this._token}))),[4,e.send(t)]):[3,2]:[3,5];case 1:return n=a.sent(),r=n.as(Zt),i=r.scheduledMessages,s=r.token,this._token=s,this._hasNext=!!s,this._isLoading=!1,[2,i];case 2:return[2,[]];case 3:throw o.fc.queryInProgress;case 4:return[3,6];case 5:throw o.fc.invalidParameters;case 6:return[2]}}))}))},t}(o.N),Xt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.name="groupChannel",t}return Object(o.A)(t,e),t.prototype.init=function(t,n){var r=n.sdkState,i=n.dispatcher,o=n.sessionManager,s=n.requestQueue,a=n.logger,u=n.onlineDetector,c=n.cacheContext;e.prototype.init.call(this,t,{sdkState:r,dispatcher:i,sessionManager:o,requestQueue:s,logger:a,onlineDetector:u,cacheContext:c}),this._manager=new xe(t,{sdkState:r,cacheContext:c,dispatcher:i,sessionManager:o,requestQueue:s,logger:a})},t.prototype.createGroupChannelCollection=function(e){return void 0===e&&(e={}),new zt(this._iid,e)},t.prototype.createMyGroupChannelListQuery=function(e){return void 0===e&&(e={}),new Ee(this._iid,e)},t.prototype.createPublicGroupChannelListQuery=function(e){return void 0===e&&(e={}),new Yt(this._iid,e)},t.prototype.createScheduledMessageListQuery=function(e){return void 0===e&&(e={}),new $t(this._iid,e)},t.prototype.addGroupChannelHandler=function(e,t){Object(o.hc)(Object(o.B)("string",e)&&t instanceof Qt).throw(o.fc.invalidParameters),this._manager.addHandler(e,t)},t.prototype.removeGroupChannelHandler=function(e){Object(o.hc)(Object(o.B)("string",e)).throw(o.fc.invalidParameters),this._manager.removeHandler(e)},t.prototype.removeAllGroupChannelHandlers=function(){this._manager.clearHandler()},t.prototype.buildGroupChannelFromSerializedData=function(e){return this._manager.buildGroupChannelFromSerializedData(e)},t.prototype.buildGroupChannelListQueryFromSerializedData=function(e){return this._manager.buildGroupChannelListQueryFromSerializedData(e)},t.prototype.buildMemberFromSerializedData=function(e){return this._manager.buildMemberFromSerializedData(e)},t.prototype.getChannel=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){return Object(o.Rb)(this,(function(t){return Object(o.hc)(Object(o.B)("string",e)).throw(o.fc.invalidParameters),[2,this._manager.getChannel(e)]}))}))},t.prototype.getChannelWithoutCache=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){return Object(o.Rb)(this,(function(t){return Object(o.hc)(Object(o.B)("string",e)).throw(o.fc.invalidParameters),[2,this._manager.getChannelWithoutCache(e)]}))}))},t.prototype.getMyGroupChannelChangeLogsByToken=function(e,t){return void 0===t&&(t={}),Object(o.Gb)(this,void 0,void 0,(function(){var n;return Object(o.Rb)(this,(function(r){switch(r.label){case 0:return n=Object(o.Vb)(Object(o.Vb)({},M),t),Object(o.hc)(Object(o.B)("string",e)&&O(n)).throw(o.fc.invalidParameters),[4,this._manager.getMyGroupChannelChangeLogs(e,n)];case 1:return[2,r.sent()]}}))}))},t.prototype.getMyGroupChannelChangeLogsByTimestamp=function(e,t){return void 0===t&&(t={}),Object(o.Gb)(this,void 0,void 0,(function(){var n;return Object(o.Rb)(this,(function(r){switch(r.label){case 0:return n=Object(o.Vb)(Object(o.Vb)({},M),t),Object(o.hc)(Object(o.B)("number",e)&&O(n)).throw(o.fc.invalidParameters),[4,this._manager.getMyGroupChannelChangeLogs(e,n)];case 1:return[2,r.sent()]}}))}))},t.prototype.getGroupChannelCount=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){var t;return Object(o.Rb)(this,(function(n){return t=Object(o.Vb)(Object(o.Vb)({},A),e),Object(o.hc)(C(t)).throw(o.fc.invalidParameters),[2,this._manager.getGroupChannelCount(t)]}))}))},t.prototype.getUnreadItemCount=function(e){return void 0===e&&(e={}),Object(o.Gb)(this,void 0,void 0,(function(){return Object(o.Rb)(this,(function(t){switch(t.label){case 0:return[4,this._manager.getUnreadItemCount(e)];case 1:return[2,t.sent()]}}))}))},t.prototype.getTotalUnreadChannelCount=function(){return Object(o.Gb)(this,void 0,void 0,(function(){return Object(o.Rb)(this,(function(e){switch(e.label){case 0:return[4,this._manager.getTotalUnreadChannelCount()];case 1:return[2,e.sent()]}}))}))},t.prototype.getTotalUnreadMessageCount=function(e){return void 0===e&&(e={}),Object(o.Gb)(this,void 0,void 0,(function(){return Object(o.Rb)(this,(function(t){switch(t.label){case 0:return[4,this._manager.getTotalUnreadMessageCount(e)];case 1:return[2,t.sent()]}}))}))},t.prototype.getTotalScheduledMessageCount=function(e){return void 0===e&&(e={}),Object(o.Gb)(this,void 0,void 0,(function(){return Object(o.Rb)(this,(function(t){switch(t.label){case 0:return[4,this._manager.getTotalScheduledMessageCount(e)];case 1:return[2,t.sent()]}}))}))},t.prototype.getSubscribedTotalUnreadMessageCount=function(){return this._manager.getSubscribedTotalUnreadMessageCount()},t.prototype.getSubscribedCustomTypeTotalUnreadMessageCount=function(){return this._manager.getSubscribedCustomTypeTotalUnreadMessageCount()},t.prototype.getSubscribedCustomTypeUnreadMessageCount=function(e){return this._manager.getSubscribedCustomTypeUnreadMessageCount(e)},t.prototype.createChannel=function(e){return void 0===e&&(e={}),Object(o.Gb)(this,void 0,void 0,(function(){var t;return Object(o.Rb)(this,(function(n){return t=Object(o.Vb)(Object(o.Vb)({},E),e),Object(o.hc)(S(t)).throw(o.fc.invalidParameters),[2,this._manager.createChannel(t)]}))}))},t.prototype.createDistinctChannelIfNotExist=function(e){return void 0===e&&(e={}),Object(o.Gb)(this,void 0,void 0,(function(){var t;return Object(o.Rb)(this,(function(n){return t=Object(o.Vb)(Object(o.Vb)({},E),e),Object(o.hc)(S(t)).throw(o.fc.invalidParameters),t&&(t.isDistinct=!0),[2,this.createChannel(t)]}))}))},t.prototype.createChannelWithUserIds=function(e,t,n,r,i,s){return void 0===t&&(t=!1),void 0===i&&(i=""),void 0===s&&(s=""),Object(o.Gb)(this,void 0,void 0,(function(){var a;return Object(o.Rb)(this,(function(u){return a=Object(o.Vb)(Object(o.Vb)({},E),{invitedUserIds:e,isDistinct:t,name:n,data:i,customType:s}),"string"==typeof r?a.coverUrl=r:a.coverImage=r,[2,this.createChannel(a)]}))}))},t.prototype.markAsReadAll=function(){return Object(o.Gb)(this,void 0,void 0,(function(){return Object(o.Rb)(this,(function(e){return this._manager.markAsReadAll(),[2]}))}))},t.prototype.markAsReadWithChannelUrls=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){return Object(o.Rb)(this,(function(t){return Object(o.hc)(Object(o.k)("string",e)).throw(o.fc.invalidParameters),this._manager.markAsReadWithChannelUrls(e),[2]}))}))},t.prototype.markAsDelivered=function(e){return Object(o.Gb)(this,void 0,void 0,(function(){return Object(o.Rb)(this,(function(t){switch(t.label){case 0:return Object(o.hc)(Object(o.B)("string",e)).throw(o.fc.invalidParameters),[4,this.getChannel(e)];case 1:return[4,t.sent().markAsDelivered()];case 2:return t.sent(),[2]}}))}))},t}(o.V)},function(e,t,n){var r=n(187),i=n(291);t.ALGORITHMS=["HS256","HS384","HS512","RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"],t.sign=r.sign,t.verify=i.verify,t.decode=i.decode,t.isValid=i.isValid,t.createSign=function(e){return new r(e)},t.createVerify=function(e){return new i(e)}},function(e,t,n){(t=e.exports=n(102)).Stream=t,t.Readable=t,t.Writable=n(73),t.Duplex=n(37),t.Transform=n(105),t.PassThrough=n(194)},function(e,t,n){var r=n(17),i=r.Buffer;function o(e,t){for(var n in e)t[n]=e[n]}function s(e,t,n){return i(e,t,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=r:(o(r,t),t.Buffer=s),o(i,s),s.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,n)},s.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=i(e);return void 0!==t?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},s.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},s.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}},function(e,t,n){"use strict";(function(t,r,i){var o=n(58);function s(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var r=e.entry;e.entry=null;for(;r;){var i=r.callback;t.pendingcb--,i(n),r=r.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}(t,e)}}e.exports=v;var a,u=!t.browser&&["v0.10","v0.9."].indexOf(t.version.slice(0,5))>-1?r:o.nextTick;v.WritableState=b;var c=Object.create(n(50));c.inherits=n(7);var l={deprecate:n(74)},h=n(103),d=n(72).Buffer,f=i.Uint8Array||function(){};var p,m=n(104);function g(){}function b(e,t){a=a||n(37),e=e||{};var r=t instanceof a;this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var i=e.highWaterMark,c=e.writableHighWaterMark,l=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r&&(c||0===c)?c:l,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var h=!1===e.decodeStrings;this.decodeStrings=!h,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,r=n.sync,i=n.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),t)!function(e,t,n,r,i){--t.pendingcb,n?(o.nextTick(i,r),o.nextTick(M,e,t),e._writableState.errorEmitted=!0,e.emit("error",r)):(i(r),e._writableState.errorEmitted=!0,e.emit("error",r),M(e,t))}(e,n,r,t,i);else{var s=E(n);s||n.corked||n.bufferProcessing||!n.bufferedRequest||w(e,n),r?u(_,e,n,s,i):_(e,n,s,i)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new s(this)}function v(e){if(a=a||n(37),!(p.call(v,this)||this instanceof a))return new v(e);this._writableState=new b(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),h.call(this)}function y(e,t,n,r,i,o,s){t.writelen=r,t.writecb=s,t.writing=!0,t.sync=!0,n?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function _(e,t,n,r){n||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,r(),M(e,t)}function w(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,i=new Array(r),o=t.corkedRequestsFree;o.entry=n;for(var a=0,u=!0;n;)i[a]=n,n.isBuf||(u=!1),n=n.next,a+=1;i.allBuffers=u,y(e,t,!0,t.length,i,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new s(t),t.bufferedRequestCount=0}else{for(;n;){var c=n.chunk,l=n.encoding,h=n.callback;if(y(e,t,!1,t.objectMode?1:c.length,c,l,h),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function E(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function S(e,t){e._final((function(n){t.pendingcb--,n&&e.emit("error",n),t.prefinished=!0,e.emit("prefinish"),M(e,t)}))}function M(e,t){var n=E(t);return n&&(!function(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,o.nextTick(S,e,t)):(t.prefinished=!0,e.emit("prefinish")))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),n}c.inherits(v,h),b.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(b.prototype,"buffer",{get:l.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(p=Function.prototype[Symbol.hasInstance],Object.defineProperty(v,Symbol.hasInstance,{value:function(e){return!!p.call(this,e)||this===v&&(e&&e._writableState instanceof b)}})):p=function(e){return e instanceof this},v.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},v.prototype.write=function(e,t,n){var r,i=this._writableState,s=!1,a=!i.objectMode&&(r=e,d.isBuffer(r)||r instanceof f);return a&&!d.isBuffer(e)&&(e=function(e){return d.from(e)}(e)),"function"==typeof t&&(n=t,t=null),a?t="buffer":t||(t=i.defaultEncoding),"function"!=typeof n&&(n=g),i.ended?function(e,t){var n=new Error("write after end");e.emit("error",n),o.nextTick(t,n)}(this,n):(a||function(e,t,n,r){var i=!0,s=!1;return null===n?s=new TypeError("May not write null values to stream"):"string"==typeof n||void 0===n||t.objectMode||(s=new TypeError("Invalid non-string/buffer chunk")),s&&(e.emit("error",s),o.nextTick(r,s),i=!1),i}(this,i,e,n))&&(i.pendingcb++,s=function(e,t,n,r,i,o){if(!n){var s=function(e,t,n){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=d.from(t,n));return t}(t,r,i);r!==s&&(n=!0,i="buffer",r=s)}var a=t.objectMode?1:r.length;t.length+=a;var u=t.length<t.highWaterMark;u||(t.needDrain=!0);if(t.writing||t.corked){var c=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:o,next:null},c?c.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else y(e,t,!1,a,r,i,o);return u}(this,i,a,e,t,n)),s},v.prototype.cork=function(){this._writableState.corked++},v.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||w(this,e))},v.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(v.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),v.prototype._write=function(e,t,n){n(new Error("_write() is not implemented"))},v.prototype._writev=null,v.prototype.end=function(e,t,n){var r=this._writableState;"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||function(e,t,n){t.ending=!0,M(e,t),n&&(t.finished?o.nextTick(n):e.once("finish",n));t.ended=!0,e.writable=!1}(this,r,n)},Object.defineProperty(v.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),v.prototype.destroy=m.destroy,v.prototype._undestroy=m.undestroy,v.prototype._destroy=function(e,t){this.end(),t(e)}}).call(this,n(16),n(98).setImmediate,n(19))},function(e,t,n){(function(t){function n(e){try{if(!t.localStorage)return!1}catch(e){return!1}var n=t.localStorage[e];return null!=n&&"true"===String(n).toLowerCase()}e.exports=function(e,t){if(n("noDeprecation"))return e;var r=!1;return function(){if(!r){if(n("throwDeprecation"))throw new Error(t);n("traceDeprecation")?console.trace(t):console.warn(t),r=!0}return e.apply(this,arguments)}}}).call(this,n(19))},function(e,t,n){"use strict";var r=n(7),i=n(107),o=n(8).Buffer,s=new Array(16);function a(){i.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}function u(e,t){return e<<t|e>>>32-t}function c(e,t,n,r,i,o,s){return u(e+(t&n|~t&r)+i+o|0,s)+t|0}function l(e,t,n,r,i,o,s){return u(e+(t&r|n&~r)+i+o|0,s)+t|0}function h(e,t,n,r,i,o,s){return u(e+(t^n^r)+i+o|0,s)+t|0}function d(e,t,n,r,i,o,s){return u(e+(n^(t|~r))+i+o|0,s)+t|0}r(a,i),a.prototype._update=function(){for(var e=s,t=0;t<16;++t)e[t]=this._block.readInt32LE(4*t);var n=this._a,r=this._b,i=this._c,o=this._d;n=c(n,r,i,o,e[0],3614090360,7),o=c(o,n,r,i,e[1],3905402710,12),i=c(i,o,n,r,e[2],606105819,17),r=c(r,i,o,n,e[3],3250441966,22),n=c(n,r,i,o,e[4],4118548399,7),o=c(o,n,r,i,e[5],1200080426,12),i=c(i,o,n,r,e[6],2821735955,17),r=c(r,i,o,n,e[7],4249261313,22),n=c(n,r,i,o,e[8],1770035416,7),o=c(o,n,r,i,e[9],2336552879,12),i=c(i,o,n,r,e[10],4294925233,17),r=c(r,i,o,n,e[11],2304563134,22),n=c(n,r,i,o,e[12],1804603682,7),o=c(o,n,r,i,e[13],4254626195,12),i=c(i,o,n,r,e[14],2792965006,17),n=l(n,r=c(r,i,o,n,e[15],1236535329,22),i,o,e[1],4129170786,5),o=l(o,n,r,i,e[6],3225465664,9),i=l(i,o,n,r,e[11],643717713,14),r=l(r,i,o,n,e[0],3921069994,20),n=l(n,r,i,o,e[5],3593408605,5),o=l(o,n,r,i,e[10],38016083,9),i=l(i,o,n,r,e[15],3634488961,14),r=l(r,i,o,n,e[4],3889429448,20),n=l(n,r,i,o,e[9],568446438,5),o=l(o,n,r,i,e[14],3275163606,9),i=l(i,o,n,r,e[3],4107603335,14),r=l(r,i,o,n,e[8],1163531501,20),n=l(n,r,i,o,e[13],2850285829,5),o=l(o,n,r,i,e[2],4243563512,9),i=l(i,o,n,r,e[7],1735328473,14),n=h(n,r=l(r,i,o,n,e[12],2368359562,20),i,o,e[5],4294588738,4),o=h(o,n,r,i,e[8],2272392833,11),i=h(i,o,n,r,e[11],1839030562,16),r=h(r,i,o,n,e[14],4259657740,23),n=h(n,r,i,o,e[1],2763975236,4),o=h(o,n,r,i,e[4],1272893353,11),i=h(i,o,n,r,e[7],4139469664,16),r=h(r,i,o,n,e[10],3200236656,23),n=h(n,r,i,o,e[13],681279174,4),o=h(o,n,r,i,e[0],3936430074,11),i=h(i,o,n,r,e[3],3572445317,16),r=h(r,i,o,n,e[6],76029189,23),n=h(n,r,i,o,e[9],3654602809,4),o=h(o,n,r,i,e[12],3873151461,11),i=h(i,o,n,r,e[15],530742520,16),n=d(n,r=h(r,i,o,n,e[2],3299628645,23),i,o,e[0],4096336452,6),o=d(o,n,r,i,e[7],1126891415,10),i=d(i,o,n,r,e[14],2878612391,15),r=d(r,i,o,n,e[5],4237533241,21),n=d(n,r,i,o,e[12],1700485571,6),o=d(o,n,r,i,e[3],2399980690,10),i=d(i,o,n,r,e[10],4293915773,15),r=d(r,i,o,n,e[1],2240044497,21),n=d(n,r,i,o,e[8],1873313359,6),o=d(o,n,r,i,e[15],4264355552,10),i=d(i,o,n,r,e[6],2734768916,15),r=d(r,i,o,n,e[13],1309151649,21),n=d(n,r,i,o,e[4],4149444226,6),o=d(o,n,r,i,e[11],3174756917,10),i=d(i,o,n,r,e[2],718787259,15),r=d(r,i,o,n,e[9],3951481745,21),this._a=this._a+n|0,this._b=this._b+r|0,this._c=this._c+i|0,this._d=this._d+o|0},a.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var e=o.allocUnsafe(16);return e.writeInt32LE(this._a,0),e.writeInt32LE(this._b,4),e.writeInt32LE(this._c,8),e.writeInt32LE(this._d,12),e},e.exports=a},function(e,t,n){"use strict";var r=n(44).codes.ERR_STREAM_PREMATURE_CLOSE;function i(){}e.exports=function e(t,n,o){if("function"==typeof n)return e(t,null,n);n||(n={}),o=function(e){var t=!1;return function(){if(!t){t=!0;for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r)}}}(o||i);var s=n.readable||!1!==n.readable&&t.readable,a=n.writable||!1!==n.writable&&t.writable,u=function(){t.writable||l()},c=t._writableState&&t._writableState.finished,l=function(){a=!1,c=!0,s||o.call(t)},h=t._readableState&&t._readableState.endEmitted,d=function(){s=!1,h=!0,a||o.call(t)},f=function(e){o.call(t,e)},p=function(){var e;return s&&!h?(t._readableState&&t._readableState.ended||(e=new r),o.call(t,e)):a&&!c?(t._writableState&&t._writableState.ended||(e=new r),o.call(t,e)):void 0},m=function(){t.req.on("finish",l)};return!function(e){return e.setHeader&&"function"==typeof e.abort}(t)?a&&!t._writableState&&(t.on("end",u),t.on("close",u)):(t.on("complete",l),t.on("abort",p),t.req?m():t.on("request",m)),t.on("end",d),t.on("finish",l),!1!==n.error&&t.on("error",f),t.on("close",p),function(){t.removeListener("complete",l),t.removeListener("abort",p),t.removeListener("request",m),t.req&&t.req.removeListener("finish",l),t.removeListener("end",u),t.removeListener("close",u),t.removeListener("finish",l),t.removeListener("end",d),t.removeListener("error",f),t.removeListener("close",p)}}},function(e,t,n){"use strict";var r=n(17).Buffer,i=n(7),o=n(107),s=new Array(16),a=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],u=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],c=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],l=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],h=[0,1518500249,1859775393,2400959708,2840853838],d=[1352829926,1548603684,1836072691,2053994217,0];function f(){o.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}function p(e,t){return e<<t|e>>>32-t}function m(e,t,n,r,i,o,s,a){return p(e+(t^n^r)+o+s|0,a)+i|0}function g(e,t,n,r,i,o,s,a){return p(e+(t&n|~t&r)+o+s|0,a)+i|0}function b(e,t,n,r,i,o,s,a){return p(e+((t|~n)^r)+o+s|0,a)+i|0}function v(e,t,n,r,i,o,s,a){return p(e+(t&r|n&~r)+o+s|0,a)+i|0}function y(e,t,n,r,i,o,s,a){return p(e+(t^(n|~r))+o+s|0,a)+i|0}i(f,o),f.prototype._update=function(){for(var e=s,t=0;t<16;++t)e[t]=this._block.readInt32LE(4*t);for(var n=0|this._a,r=0|this._b,i=0|this._c,o=0|this._d,f=0|this._e,_=0|this._a,w=0|this._b,E=0|this._c,S=0|this._d,M=0|this._e,O=0;O<80;O+=1){var A,C;O<16?(A=m(n,r,i,o,f,e[a[O]],h[0],c[O]),C=y(_,w,E,S,M,e[u[O]],d[0],l[O])):O<32?(A=g(n,r,i,o,f,e[a[O]],h[1],c[O]),C=v(_,w,E,S,M,e[u[O]],d[1],l[O])):O<48?(A=b(n,r,i,o,f,e[a[O]],h[2],c[O]),C=b(_,w,E,S,M,e[u[O]],d[2],l[O])):O<64?(A=v(n,r,i,o,f,e[a[O]],h[3],c[O]),C=g(_,w,E,S,M,e[u[O]],d[3],l[O])):(A=y(n,r,i,o,f,e[a[O]],h[4],c[O]),C=m(_,w,E,S,M,e[u[O]],d[4],l[O])),n=f,f=o,o=p(i,10),i=r,r=A,_=M,M=S,S=p(E,10),E=w,w=C}var T=this._b+i+S|0;this._b=this._c+o+M|0,this._c=this._d+f+_|0,this._d=this._e+n+w|0,this._e=this._a+r+E|0,this._a=T},f.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var e=r.alloc?r.alloc(20):new r(20);return e.writeInt32LE(this._a,0),e.writeInt32LE(this._b,4),e.writeInt32LE(this._c,8),e.writeInt32LE(this._d,12),e.writeInt32LE(this._e,16),e},e.exports=f},function(e,t,n){(t=e.exports=function(e){e=e.toLowerCase();var n=t[e];if(!n)throw new Error(e+" is not supported (we accept pull requests)");return new n}).sha=n(211),t.sha1=n(212),t.sha224=n(213),t.sha256=n(114),t.sha384=n(214),t.sha512=n(115)},function(e,t,n){"use strict";var r=n(24);function i(e){this.options=e,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0}e.exports=i,i.prototype._init=function(){},i.prototype.update=function(e){return 0===e.length?[]:"decrypt"===this.type?this._updateDecrypt(e):this._updateEncrypt(e)},i.prototype._buffer=function(e,t){for(var n=Math.min(this.buffer.length-this.bufferOff,e.length-t),r=0;r<n;r++)this.buffer[this.bufferOff+r]=e[t+r];return this.bufferOff+=n,n},i.prototype._flushBuffer=function(e,t){return this._update(this.buffer,0,e,t),this.bufferOff=0,this.blockSize},i.prototype._updateEncrypt=function(e){var t=0,n=0,r=(this.bufferOff+e.length)/this.blockSize|0,i=new Array(r*this.blockSize);0!==this.bufferOff&&(t+=this._buffer(e,t),this.bufferOff===this.buffer.length&&(n+=this._flushBuffer(i,n)));for(var o=e.length-(e.length-t)%this.blockSize;t<o;t+=this.blockSize)this._update(e,t,i,n),n+=this.blockSize;for(;t<e.length;t++,this.bufferOff++)this.buffer[this.bufferOff]=e[t];return i},i.prototype._updateDecrypt=function(e){for(var t=0,n=0,r=Math.ceil((this.bufferOff+e.length)/this.blockSize)-1,i=new Array(r*this.blockSize);r>0;r--)t+=this._buffer(e,t),n+=this._flushBuffer(i,n);return t+=this._buffer(e,t),i},i.prototype.final=function(e){var t,n;return e&&(t=this.update(e)),n="encrypt"===this.type?this._finalEncrypt():this._finalDecrypt(),t?t.concat(n):n},i.prototype._pad=function(e,t){if(0===t)return!1;for(;t<e.length;)e[t++]=0;return!0},i.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var e=new Array(this.blockSize);return this._update(this.buffer,0,e,0),e},i.prototype._unpad=function(e){return e},i.prototype._finalDecrypt=function(){r.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var e=new Array(this.blockSize);return this._flushBuffer(e,0),this._unpad(e)}},function(e,t,n){var r=n(223),i=n(231),o=n(128);t.createCipher=t.Cipher=r.createCipher,t.createCipheriv=t.Cipheriv=r.createCipheriv,t.createDecipher=t.Decipher=i.createDecipher,t.createDecipheriv=t.Decipheriv=i.createDecipheriv,t.listCiphers=t.getCiphers=function(){return Object.keys(o)}},function(e,t,n){var r={ECB:n(224),CBC:n(225),CFB:n(226),CFB8:n(227),CFB1:n(228),OFB:n(229),CTR:n(126),GCM:n(126)},i=n(128);for(var o in i)i[o].module=r[i[o].mode];e.exports=i},function(e,t,n){var r;function i(e){this.rand=e}if(e.exports=function(e){return r||(r=new i(null)),r.generate(e)},e.exports.Rand=i,i.prototype.generate=function(e){return this._rand(e)},i.prototype._rand=function(e){if(this.rand.getBytes)return this.rand.getBytes(e);for(var t=new Uint8Array(e),n=0;n<t.length;n++)t[n]=this.rand.getByte();return t},"object"==typeof self)self.crypto&&self.crypto.getRandomValues?i.prototype._rand=function(e){var t=new Uint8Array(e);return self.crypto.getRandomValues(t),t}:self.msCrypto&&self.msCrypto.getRandomValues?i.prototype._rand=function(e){var t=new Uint8Array(e);return self.msCrypto.getRandomValues(t),t}:"object"==typeof window&&(i.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var o=n(237);if("function"!=typeof o.randomBytes)throw new Error("Not supported");i.prototype._rand=function(e){return o.randomBytes(e)}}catch(e){}},function(e,t,n){"use strict";var r=n(47).codes.ERR_STREAM_PREMATURE_CLOSE;function i(){}e.exports=function e(t,n,o){if("function"==typeof n)return e(t,null,n);n||(n={}),o=function(e){var t=!1;return function(){if(!t){t=!0;for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r)}}}(o||i);var s=n.readable||!1!==n.readable&&t.readable,a=n.writable||!1!==n.writable&&t.writable,u=function(){t.writable||l()},c=t._writableState&&t._writableState.finished,l=function(){a=!1,c=!0,s||o.call(t)},h=t._readableState&&t._readableState.endEmitted,d=function(){s=!1,h=!0,a||o.call(t)},f=function(e){o.call(t,e)},p=function(){var e;return s&&!h?(t._readableState&&t._readableState.ended||(e=new r),o.call(t,e)):a&&!c?(t._writableState&&t._writableState.ended||(e=new r),o.call(t,e)):void 0},m=function(){t.req.on("finish",l)};return!function(e){return e.setHeader&&"function"==typeof e.abort}(t)?a&&!t._writableState&&(t.on("end",u),t.on("close",u)):(t.on("complete",l),t.on("abort",p),t.req?m():t.on("request",m)),t.on("end",d),t.on("finish",l),!1!==n.error&&t.on("error",f),t.on("close",p),function(){t.removeListener("complete",l),t.removeListener("abort",p),t.removeListener("request",m),t.req&&t.req.removeListener("finish",l),t.removeListener("end",u),t.removeListener("close",u),t.removeListener("finish",l),t.removeListener("end",d),t.removeListener("error",f),t.removeListener("close",p)}}},function(e,t,n){(function(t){var r=n(85),i=n(43);function o(e){var t,n=e.modulus.byteLength();do{t=new r(i(n))}while(t.cmp(e.modulus)>=0||!t.umod(e.prime1)||!t.umod(e.prime2));return t}function s(e,n){var i=function(e){var t=o(e);return{blinder:t.toRed(r.mont(e.modulus)).redPow(new r(e.publicExponent)).fromRed(),unblinder:t.invm(e.modulus)}}(n),s=n.modulus.byteLength(),a=new r(e).mul(i.blinder).umod(n.modulus),u=a.toRed(r.mont(n.prime1)),c=a.toRed(r.mont(n.prime2)),l=n.coefficient,h=n.prime1,d=n.prime2,f=u.redPow(n.exponent1).fromRed(),p=c.redPow(n.exponent2).fromRed(),m=f.isub(p).imul(l).umod(h).imul(d);return p.iadd(m).imul(i.unblinder).umod(n.modulus).toArrayLike(t,"be",s)}s.getr=o,e.exports=s}).call(this,n(17).Buffer)},function(e,t,n){(function(e){!function(e,t){"use strict";function r(e,t){if(!e)throw new Error(t||"Assertion failed")}function i(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}function o(e,t,n){if(o.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(n=t,t=10),this._init(e||0,t||10,n||"be"))}var s;"object"==typeof e?e.exports=o:t.BN=o,o.BN=o,o.wordSize=26;try{s="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:n(250).Buffer}catch(e){}function a(e,t){var n=e.charCodeAt(t);return n>=48&&n<=57?n-48:n>=65&&n<=70?n-55:n>=97&&n<=102?n-87:void r(!1,"Invalid character in "+e)}function u(e,t,n){var r=a(e,n);return n-1>=t&&(r|=a(e,n-1)<<4),r}function c(e,t,n,i){for(var o=0,s=0,a=Math.min(e.length,n),u=t;u<a;u++){var c=e.charCodeAt(u)-48;o*=i,s=c>=49?c-49+10:c>=17?c-17+10:c,r(c>=0&&s<i,"Invalid character"),o+=s}return o}function l(e,t){e.words=t.words,e.length=t.length,e.negative=t.negative,e.red=t.red}if(o.isBN=function(e){return e instanceof o||null!==e&&"object"==typeof e&&e.constructor.wordSize===o.wordSize&&Array.isArray(e.words)},o.max=function(e,t){return e.cmp(t)>0?e:t},o.min=function(e,t){return e.cmp(t)<0?e:t},o.prototype._init=function(e,t,n){if("number"==typeof e)return this._initNumber(e,t,n);if("object"==typeof e)return this._initArray(e,t,n);"hex"===t&&(t=16),r(t===(0|t)&&t>=2&&t<=36);var i=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<e.length&&(16===t?this._parseHex(e,i,n):(this._parseBase(e,t,i),"le"===n&&this._initArray(this.toArray(),t,n)))},o.prototype._initNumber=function(e,t,n){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(r(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===n&&this._initArray(this.toArray(),t,n)},o.prototype._initArray=function(e,t,n){if(r("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var o,s,a=0;if("be"===n)for(i=e.length-1,o=0;i>=0;i-=3)s=e[i]|e[i-1]<<8|e[i-2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);else if("le"===n)for(i=0,o=0;i<e.length;i+=3)s=e[i]|e[i+1]<<8|e[i+2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);return this._strip()},o.prototype._parseHex=function(e,t,n){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var i,o=0,s=0;if("be"===n)for(r=e.length-1;r>=t;r-=2)i=u(e,t,r)<<o,this.words[s]|=67108863&i,o>=18?(o-=18,s+=1,this.words[s]|=i>>>26):o+=8;else for(r=(e.length-t)%2==0?t+1:t;r<e.length;r+=2)i=u(e,t,r)<<o,this.words[s]|=67108863&i,o>=18?(o-=18,s+=1,this.words[s]|=i>>>26):o+=8;this._strip()},o.prototype._parseBase=function(e,t,n){this.words=[0],this.length=1;for(var r=0,i=1;i<=67108863;i*=t)r++;r--,i=i/t|0;for(var o=e.length-n,s=o%r,a=Math.min(o,o-s)+n,u=0,l=n;l<a;l+=r)u=c(e,l,l+r,t),this.imuln(i),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==s){var h=1;for(u=c(e,l,e.length,t),l=0;l<s;l++)h*=t;this.imuln(h),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this._strip()},o.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},o.prototype._move=function(e){l(e,this)},o.prototype.clone=function(){var e=new o(null);return this.copy(e),e},o.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},o.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!=typeof Symbol&&"function"==typeof Symbol.for)try{o.prototype[Symbol.for("nodejs.util.inspect.custom")]=h}catch(e){o.prototype.inspect=h}else o.prototype.inspect=h;function h(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var d=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],f=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],p=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];o.prototype.toString=function(e,t){var n;if(t=0|t||1,16===(e=e||10)||"hex"===e){n="";for(var i=0,o=0,s=0;s<this.length;s++){var a=this.words[s],u=(16777215&(a<<i|o)).toString(16);o=a>>>24-i&16777215,(i+=2)>=26&&(i-=26,s--),n=0!==o||s!==this.length-1?d[6-u.length]+u+n:u+n}for(0!==o&&(n=o.toString(16)+n);n.length%t!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}if(e===(0|e)&&e>=2&&e<=36){var c=f[e],l=p[e];n="";var h=this.clone();for(h.negative=0;!h.isZero();){var m=h.modrn(l).toString(e);n=(h=h.idivn(l)).isZero()?m+n:d[c-m.length]+m+n}for(this.isZero()&&(n="0"+n);n.length%t!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}r(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},o.prototype.toJSON=function(){return this.toString(16,2)},s&&(o.prototype.toBuffer=function(e,t){return this.toArrayLike(s,e,t)}),o.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)};function m(e,t,n){n.negative=t.negative^e.negative;var r=e.length+t.length|0;n.length=r,r=r-1|0;var i=0|e.words[0],o=0|t.words[0],s=i*o,a=67108863&s,u=s/67108864|0;n.words[0]=a;for(var c=1;c<r;c++){for(var l=u>>>26,h=67108863&u,d=Math.min(c,t.length-1),f=Math.max(0,c-e.length+1);f<=d;f++){var p=c-f|0;l+=(s=(i=0|e.words[p])*(o=0|t.words[f])+h)/67108864|0,h=67108863&s}n.words[c]=0|h,u=0|l}return 0!==u?n.words[c]=0|u:n.length--,n._strip()}o.prototype.toArrayLike=function(e,t,n){this._strip();var i=this.byteLength(),o=n||Math.max(1,i);r(i<=o,"byte array longer than desired length"),r(o>0,"Requested array length <= 0");var s=function(e,t){return e.allocUnsafe?e.allocUnsafe(t):new e(t)}(e,o);return this["_toArrayLike"+("le"===t?"LE":"BE")](s,i),s},o.prototype._toArrayLikeLE=function(e,t){for(var n=0,r=0,i=0,o=0;i<this.length;i++){var s=this.words[i]<<o|r;e[n++]=255&s,n<e.length&&(e[n++]=s>>8&255),n<e.length&&(e[n++]=s>>16&255),6===o?(n<e.length&&(e[n++]=s>>24&255),r=0,o=0):(r=s>>>24,o+=2)}if(n<e.length)for(e[n++]=r;n<e.length;)e[n++]=0},o.prototype._toArrayLikeBE=function(e,t){for(var n=e.length-1,r=0,i=0,o=0;i<this.length;i++){var s=this.words[i]<<o|r;e[n--]=255&s,n>=0&&(e[n--]=s>>8&255),n>=0&&(e[n--]=s>>16&255),6===o?(n>=0&&(e[n--]=s>>24&255),r=0,o=0):(r=s>>>24,o+=2)}if(n>=0)for(e[n--]=r;n>=0;)e[n--]=0},Math.clz32?o.prototype._countBits=function(e){return 32-Math.clz32(e)}:o.prototype._countBits=function(e){var t=e,n=0;return t>=4096&&(n+=13,t>>>=13),t>=64&&(n+=7,t>>>=7),t>=8&&(n+=4,t>>>=4),t>=2&&(n+=2,t>>>=2),n+t},o.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,n=0;return 0==(8191&t)&&(n+=13,t>>>=13),0==(127&t)&&(n+=7,t>>>=7),0==(15&t)&&(n+=4,t>>>=4),0==(3&t)&&(n+=2,t>>>=2),0==(1&t)&&n++,n},o.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var n=this._zeroBits(this.words[t]);if(e+=n,26!==n)break}return e},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},o.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this._strip()},o.prototype.ior=function(e){return r(0==(this.negative|e.negative)),this.iuor(e)},o.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},o.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},o.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var n=0;n<t.length;n++)this.words[n]=this.words[n]&e.words[n];return this.length=t.length,this._strip()},o.prototype.iand=function(e){return r(0==(this.negative|e.negative)),this.iuand(e)},o.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},o.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},o.prototype.iuxor=function(e){var t,n;this.length>e.length?(t=this,n=e):(t=e,n=this);for(var r=0;r<n.length;r++)this.words[r]=t.words[r]^n.words[r];if(this!==t)for(;r<t.length;r++)this.words[r]=t.words[r];return this.length=t.length,this._strip()},o.prototype.ixor=function(e){return r(0==(this.negative|e.negative)),this.iuxor(e)},o.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},o.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},o.prototype.inotn=function(e){r("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),n=e%26;this._expand(t),n>0&&t--;for(var i=0;i<t;i++)this.words[i]=67108863&~this.words[i];return n>0&&(this.words[i]=~this.words[i]&67108863>>26-n),this._strip()},o.prototype.notn=function(e){return this.clone().inotn(e)},o.prototype.setn=function(e,t){r("number"==typeof e&&e>=0);var n=e/26|0,i=e%26;return this._expand(n+1),this.words[n]=t?this.words[n]|1<<i:this.words[n]&~(1<<i),this._strip()},o.prototype.iadd=function(e){var t,n,r;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(n=this,r=e):(n=e,r=this);for(var i=0,o=0;o<r.length;o++)t=(0|n.words[o])+(0|r.words[o])+i,this.words[o]=67108863&t,i=t>>>26;for(;0!==i&&o<n.length;o++)t=(0|n.words[o])+i,this.words[o]=67108863&t,i=t>>>26;if(this.length=n.length,0!==i)this.words[this.length]=i,this.length++;else if(n!==this)for(;o<n.length;o++)this.words[o]=n.words[o];return this},o.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},o.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var n,r,i=this.cmp(e);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(n=this,r=e):(n=e,r=this);for(var o=0,s=0;s<r.length;s++)o=(t=(0|n.words[s])-(0|r.words[s])+o)>>26,this.words[s]=67108863&t;for(;0!==o&&s<n.length;s++)o=(t=(0|n.words[s])+o)>>26,this.words[s]=67108863&t;if(0===o&&s<n.length&&n!==this)for(;s<n.length;s++)this.words[s]=n.words[s];return this.length=Math.max(this.length,s),n!==this&&(this.negative=1),this._strip()},o.prototype.sub=function(e){return this.clone().isub(e)};var g=function(e,t,n){var r,i,o,s=e.words,a=t.words,u=n.words,c=0,l=0|s[0],h=8191&l,d=l>>>13,f=0|s[1],p=8191&f,m=f>>>13,g=0|s[2],b=8191&g,v=g>>>13,y=0|s[3],_=8191&y,w=y>>>13,E=0|s[4],S=8191&E,M=E>>>13,O=0|s[5],A=8191&O,C=O>>>13,T=0|s[6],k=8191&T,x=T>>>13,j=0|s[7],I=8191&j,R=j>>>13,N=0|s[8],P=8191&N,D=N>>>13,U=0|s[9],L=8191&U,F=U>>>13,B=0|a[0],H=8191&B,q=B>>>13,V=0|a[1],G=8191&V,z=V>>>13,W=0|a[2],K=8191&W,Y=W>>>13,Q=0|a[3],J=8191&Q,Z=Q>>>13,$=0|a[4],X=8191&$,ee=$>>>13,te=0|a[5],ne=8191&te,re=te>>>13,ie=0|a[6],oe=8191&ie,se=ie>>>13,ae=0|a[7],ue=8191&ae,ce=ae>>>13,le=0|a[8],he=8191&le,de=le>>>13,fe=0|a[9],pe=8191&fe,me=fe>>>13;n.negative=e.negative^t.negative,n.length=19;var ge=(c+(r=Math.imul(h,H))|0)+((8191&(i=(i=Math.imul(h,q))+Math.imul(d,H)|0))<<13)|0;c=((o=Math.imul(d,q))+(i>>>13)|0)+(ge>>>26)|0,ge&=67108863,r=Math.imul(p,H),i=(i=Math.imul(p,q))+Math.imul(m,H)|0,o=Math.imul(m,q);var be=(c+(r=r+Math.imul(h,G)|0)|0)+((8191&(i=(i=i+Math.imul(h,z)|0)+Math.imul(d,G)|0))<<13)|0;c=((o=o+Math.imul(d,z)|0)+(i>>>13)|0)+(be>>>26)|0,be&=67108863,r=Math.imul(b,H),i=(i=Math.imul(b,q))+Math.imul(v,H)|0,o=Math.imul(v,q),r=r+Math.imul(p,G)|0,i=(i=i+Math.imul(p,z)|0)+Math.imul(m,G)|0,o=o+Math.imul(m,z)|0;var ve=(c+(r=r+Math.imul(h,K)|0)|0)+((8191&(i=(i=i+Math.imul(h,Y)|0)+Math.imul(d,K)|0))<<13)|0;c=((o=o+Math.imul(d,Y)|0)+(i>>>13)|0)+(ve>>>26)|0,ve&=67108863,r=Math.imul(_,H),i=(i=Math.imul(_,q))+Math.imul(w,H)|0,o=Math.imul(w,q),r=r+Math.imul(b,G)|0,i=(i=i+Math.imul(b,z)|0)+Math.imul(v,G)|0,o=o+Math.imul(v,z)|0,r=r+Math.imul(p,K)|0,i=(i=i+Math.imul(p,Y)|0)+Math.imul(m,K)|0,o=o+Math.imul(m,Y)|0;var ye=(c+(r=r+Math.imul(h,J)|0)|0)+((8191&(i=(i=i+Math.imul(h,Z)|0)+Math.imul(d,J)|0))<<13)|0;c=((o=o+Math.imul(d,Z)|0)+(i>>>13)|0)+(ye>>>26)|0,ye&=67108863,r=Math.imul(S,H),i=(i=Math.imul(S,q))+Math.imul(M,H)|0,o=Math.imul(M,q),r=r+Math.imul(_,G)|0,i=(i=i+Math.imul(_,z)|0)+Math.imul(w,G)|0,o=o+Math.imul(w,z)|0,r=r+Math.imul(b,K)|0,i=(i=i+Math.imul(b,Y)|0)+Math.imul(v,K)|0,o=o+Math.imul(v,Y)|0,r=r+Math.imul(p,J)|0,i=(i=i+Math.imul(p,Z)|0)+Math.imul(m,J)|0,o=o+Math.imul(m,Z)|0;var _e=(c+(r=r+Math.imul(h,X)|0)|0)+((8191&(i=(i=i+Math.imul(h,ee)|0)+Math.imul(d,X)|0))<<13)|0;c=((o=o+Math.imul(d,ee)|0)+(i>>>13)|0)+(_e>>>26)|0,_e&=67108863,r=Math.imul(A,H),i=(i=Math.imul(A,q))+Math.imul(C,H)|0,o=Math.imul(C,q),r=r+Math.imul(S,G)|0,i=(i=i+Math.imul(S,z)|0)+Math.imul(M,G)|0,o=o+Math.imul(M,z)|0,r=r+Math.imul(_,K)|0,i=(i=i+Math.imul(_,Y)|0)+Math.imul(w,K)|0,o=o+Math.imul(w,Y)|0,r=r+Math.imul(b,J)|0,i=(i=i+Math.imul(b,Z)|0)+Math.imul(v,J)|0,o=o+Math.imul(v,Z)|0,r=r+Math.imul(p,X)|0,i=(i=i+Math.imul(p,ee)|0)+Math.imul(m,X)|0,o=o+Math.imul(m,ee)|0;var we=(c+(r=r+Math.imul(h,ne)|0)|0)+((8191&(i=(i=i+Math.imul(h,re)|0)+Math.imul(d,ne)|0))<<13)|0;c=((o=o+Math.imul(d,re)|0)+(i>>>13)|0)+(we>>>26)|0,we&=67108863,r=Math.imul(k,H),i=(i=Math.imul(k,q))+Math.imul(x,H)|0,o=Math.imul(x,q),r=r+Math.imul(A,G)|0,i=(i=i+Math.imul(A,z)|0)+Math.imul(C,G)|0,o=o+Math.imul(C,z)|0,r=r+Math.imul(S,K)|0,i=(i=i+Math.imul(S,Y)|0)+Math.imul(M,K)|0,o=o+Math.imul(M,Y)|0,r=r+Math.imul(_,J)|0,i=(i=i+Math.imul(_,Z)|0)+Math.imul(w,J)|0,o=o+Math.imul(w,Z)|0,r=r+Math.imul(b,X)|0,i=(i=i+Math.imul(b,ee)|0)+Math.imul(v,X)|0,o=o+Math.imul(v,ee)|0,r=r+Math.imul(p,ne)|0,i=(i=i+Math.imul(p,re)|0)+Math.imul(m,ne)|0,o=o+Math.imul(m,re)|0;var Ee=(c+(r=r+Math.imul(h,oe)|0)|0)+((8191&(i=(i=i+Math.imul(h,se)|0)+Math.imul(d,oe)|0))<<13)|0;c=((o=o+Math.imul(d,se)|0)+(i>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,r=Math.imul(I,H),i=(i=Math.imul(I,q))+Math.imul(R,H)|0,o=Math.imul(R,q),r=r+Math.imul(k,G)|0,i=(i=i+Math.imul(k,z)|0)+Math.imul(x,G)|0,o=o+Math.imul(x,z)|0,r=r+Math.imul(A,K)|0,i=(i=i+Math.imul(A,Y)|0)+Math.imul(C,K)|0,o=o+Math.imul(C,Y)|0,r=r+Math.imul(S,J)|0,i=(i=i+Math.imul(S,Z)|0)+Math.imul(M,J)|0,o=o+Math.imul(M,Z)|0,r=r+Math.imul(_,X)|0,i=(i=i+Math.imul(_,ee)|0)+Math.imul(w,X)|0,o=o+Math.imul(w,ee)|0,r=r+Math.imul(b,ne)|0,i=(i=i+Math.imul(b,re)|0)+Math.imul(v,ne)|0,o=o+Math.imul(v,re)|0,r=r+Math.imul(p,oe)|0,i=(i=i+Math.imul(p,se)|0)+Math.imul(m,oe)|0,o=o+Math.imul(m,se)|0;var Se=(c+(r=r+Math.imul(h,ue)|0)|0)+((8191&(i=(i=i+Math.imul(h,ce)|0)+Math.imul(d,ue)|0))<<13)|0;c=((o=o+Math.imul(d,ce)|0)+(i>>>13)|0)+(Se>>>26)|0,Se&=67108863,r=Math.imul(P,H),i=(i=Math.imul(P,q))+Math.imul(D,H)|0,o=Math.imul(D,q),r=r+Math.imul(I,G)|0,i=(i=i+Math.imul(I,z)|0)+Math.imul(R,G)|0,o=o+Math.imul(R,z)|0,r=r+Math.imul(k,K)|0,i=(i=i+Math.imul(k,Y)|0)+Math.imul(x,K)|0,o=o+Math.imul(x,Y)|0,r=r+Math.imul(A,J)|0,i=(i=i+Math.imul(A,Z)|0)+Math.imul(C,J)|0,o=o+Math.imul(C,Z)|0,r=r+Math.imul(S,X)|0,i=(i=i+Math.imul(S,ee)|0)+Math.imul(M,X)|0,o=o+Math.imul(M,ee)|0,r=r+Math.imul(_,ne)|0,i=(i=i+Math.imul(_,re)|0)+Math.imul(w,ne)|0,o=o+Math.imul(w,re)|0,r=r+Math.imul(b,oe)|0,i=(i=i+Math.imul(b,se)|0)+Math.imul(v,oe)|0,o=o+Math.imul(v,se)|0,r=r+Math.imul(p,ue)|0,i=(i=i+Math.imul(p,ce)|0)+Math.imul(m,ue)|0,o=o+Math.imul(m,ce)|0;var Me=(c+(r=r+Math.imul(h,he)|0)|0)+((8191&(i=(i=i+Math.imul(h,de)|0)+Math.imul(d,he)|0))<<13)|0;c=((o=o+Math.imul(d,de)|0)+(i>>>13)|0)+(Me>>>26)|0,Me&=67108863,r=Math.imul(L,H),i=(i=Math.imul(L,q))+Math.imul(F,H)|0,o=Math.imul(F,q),r=r+Math.imul(P,G)|0,i=(i=i+Math.imul(P,z)|0)+Math.imul(D,G)|0,o=o+Math.imul(D,z)|0,r=r+Math.imul(I,K)|0,i=(i=i+Math.imul(I,Y)|0)+Math.imul(R,K)|0,o=o+Math.imul(R,Y)|0,r=r+Math.imul(k,J)|0,i=(i=i+Math.imul(k,Z)|0)+Math.imul(x,J)|0,o=o+Math.imul(x,Z)|0,r=r+Math.imul(A,X)|0,i=(i=i+Math.imul(A,ee)|0)+Math.imul(C,X)|0,o=o+Math.imul(C,ee)|0,r=r+Math.imul(S,ne)|0,i=(i=i+Math.imul(S,re)|0)+Math.imul(M,ne)|0,o=o+Math.imul(M,re)|0,r=r+Math.imul(_,oe)|0,i=(i=i+Math.imul(_,se)|0)+Math.imul(w,oe)|0,o=o+Math.imul(w,se)|0,r=r+Math.imul(b,ue)|0,i=(i=i+Math.imul(b,ce)|0)+Math.imul(v,ue)|0,o=o+Math.imul(v,ce)|0,r=r+Math.imul(p,he)|0,i=(i=i+Math.imul(p,de)|0)+Math.imul(m,he)|0,o=o+Math.imul(m,de)|0;var Oe=(c+(r=r+Math.imul(h,pe)|0)|0)+((8191&(i=(i=i+Math.imul(h,me)|0)+Math.imul(d,pe)|0))<<13)|0;c=((o=o+Math.imul(d,me)|0)+(i>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,r=Math.imul(L,G),i=(i=Math.imul(L,z))+Math.imul(F,G)|0,o=Math.imul(F,z),r=r+Math.imul(P,K)|0,i=(i=i+Math.imul(P,Y)|0)+Math.imul(D,K)|0,o=o+Math.imul(D,Y)|0,r=r+Math.imul(I,J)|0,i=(i=i+Math.imul(I,Z)|0)+Math.imul(R,J)|0,o=o+Math.imul(R,Z)|0,r=r+Math.imul(k,X)|0,i=(i=i+Math.imul(k,ee)|0)+Math.imul(x,X)|0,o=o+Math.imul(x,ee)|0,r=r+Math.imul(A,ne)|0,i=(i=i+Math.imul(A,re)|0)+Math.imul(C,ne)|0,o=o+Math.imul(C,re)|0,r=r+Math.imul(S,oe)|0,i=(i=i+Math.imul(S,se)|0)+Math.imul(M,oe)|0,o=o+Math.imul(M,se)|0,r=r+Math.imul(_,ue)|0,i=(i=i+Math.imul(_,ce)|0)+Math.imul(w,ue)|0,o=o+Math.imul(w,ce)|0,r=r+Math.imul(b,he)|0,i=(i=i+Math.imul(b,de)|0)+Math.imul(v,he)|0,o=o+Math.imul(v,de)|0;var Ae=(c+(r=r+Math.imul(p,pe)|0)|0)+((8191&(i=(i=i+Math.imul(p,me)|0)+Math.imul(m,pe)|0))<<13)|0;c=((o=o+Math.imul(m,me)|0)+(i>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,r=Math.imul(L,K),i=(i=Math.imul(L,Y))+Math.imul(F,K)|0,o=Math.imul(F,Y),r=r+Math.imul(P,J)|0,i=(i=i+Math.imul(P,Z)|0)+Math.imul(D,J)|0,o=o+Math.imul(D,Z)|0,r=r+Math.imul(I,X)|0,i=(i=i+Math.imul(I,ee)|0)+Math.imul(R,X)|0,o=o+Math.imul(R,ee)|0,r=r+Math.imul(k,ne)|0,i=(i=i+Math.imul(k,re)|0)+Math.imul(x,ne)|0,o=o+Math.imul(x,re)|0,r=r+Math.imul(A,oe)|0,i=(i=i+Math.imul(A,se)|0)+Math.imul(C,oe)|0,o=o+Math.imul(C,se)|0,r=r+Math.imul(S,ue)|0,i=(i=i+Math.imul(S,ce)|0)+Math.imul(M,ue)|0,o=o+Math.imul(M,ce)|0,r=r+Math.imul(_,he)|0,i=(i=i+Math.imul(_,de)|0)+Math.imul(w,he)|0,o=o+Math.imul(w,de)|0;var Ce=(c+(r=r+Math.imul(b,pe)|0)|0)+((8191&(i=(i=i+Math.imul(b,me)|0)+Math.imul(v,pe)|0))<<13)|0;c=((o=o+Math.imul(v,me)|0)+(i>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,r=Math.imul(L,J),i=(i=Math.imul(L,Z))+Math.imul(F,J)|0,o=Math.imul(F,Z),r=r+Math.imul(P,X)|0,i=(i=i+Math.imul(P,ee)|0)+Math.imul(D,X)|0,o=o+Math.imul(D,ee)|0,r=r+Math.imul(I,ne)|0,i=(i=i+Math.imul(I,re)|0)+Math.imul(R,ne)|0,o=o+Math.imul(R,re)|0,r=r+Math.imul(k,oe)|0,i=(i=i+Math.imul(k,se)|0)+Math.imul(x,oe)|0,o=o+Math.imul(x,se)|0,r=r+Math.imul(A,ue)|0,i=(i=i+Math.imul(A,ce)|0)+Math.imul(C,ue)|0,o=o+Math.imul(C,ce)|0,r=r+Math.imul(S,he)|0,i=(i=i+Math.imul(S,de)|0)+Math.imul(M,he)|0,o=o+Math.imul(M,de)|0;var Te=(c+(r=r+Math.imul(_,pe)|0)|0)+((8191&(i=(i=i+Math.imul(_,me)|0)+Math.imul(w,pe)|0))<<13)|0;c=((o=o+Math.imul(w,me)|0)+(i>>>13)|0)+(Te>>>26)|0,Te&=67108863,r=Math.imul(L,X),i=(i=Math.imul(L,ee))+Math.imul(F,X)|0,o=Math.imul(F,ee),r=r+Math.imul(P,ne)|0,i=(i=i+Math.imul(P,re)|0)+Math.imul(D,ne)|0,o=o+Math.imul(D,re)|0,r=r+Math.imul(I,oe)|0,i=(i=i+Math.imul(I,se)|0)+Math.imul(R,oe)|0,o=o+Math.imul(R,se)|0,r=r+Math.imul(k,ue)|0,i=(i=i+Math.imul(k,ce)|0)+Math.imul(x,ue)|0,o=o+Math.imul(x,ce)|0,r=r+Math.imul(A,he)|0,i=(i=i+Math.imul(A,de)|0)+Math.imul(C,he)|0,o=o+Math.imul(C,de)|0;var ke=(c+(r=r+Math.imul(S,pe)|0)|0)+((8191&(i=(i=i+Math.imul(S,me)|0)+Math.imul(M,pe)|0))<<13)|0;c=((o=o+Math.imul(M,me)|0)+(i>>>13)|0)+(ke>>>26)|0,ke&=67108863,r=Math.imul(L,ne),i=(i=Math.imul(L,re))+Math.imul(F,ne)|0,o=Math.imul(F,re),r=r+Math.imul(P,oe)|0,i=(i=i+Math.imul(P,se)|0)+Math.imul(D,oe)|0,o=o+Math.imul(D,se)|0,r=r+Math.imul(I,ue)|0,i=(i=i+Math.imul(I,ce)|0)+Math.imul(R,ue)|0,o=o+Math.imul(R,ce)|0,r=r+Math.imul(k,he)|0,i=(i=i+Math.imul(k,de)|0)+Math.imul(x,he)|0,o=o+Math.imul(x,de)|0;var xe=(c+(r=r+Math.imul(A,pe)|0)|0)+((8191&(i=(i=i+Math.imul(A,me)|0)+Math.imul(C,pe)|0))<<13)|0;c=((o=o+Math.imul(C,me)|0)+(i>>>13)|0)+(xe>>>26)|0,xe&=67108863,r=Math.imul(L,oe),i=(i=Math.imul(L,se))+Math.imul(F,oe)|0,o=Math.imul(F,se),r=r+Math.imul(P,ue)|0,i=(i=i+Math.imul(P,ce)|0)+Math.imul(D,ue)|0,o=o+Math.imul(D,ce)|0,r=r+Math.imul(I,he)|0,i=(i=i+Math.imul(I,de)|0)+Math.imul(R,he)|0,o=o+Math.imul(R,de)|0;var je=(c+(r=r+Math.imul(k,pe)|0)|0)+((8191&(i=(i=i+Math.imul(k,me)|0)+Math.imul(x,pe)|0))<<13)|0;c=((o=o+Math.imul(x,me)|0)+(i>>>13)|0)+(je>>>26)|0,je&=67108863,r=Math.imul(L,ue),i=(i=Math.imul(L,ce))+Math.imul(F,ue)|0,o=Math.imul(F,ce),r=r+Math.imul(P,he)|0,i=(i=i+Math.imul(P,de)|0)+Math.imul(D,he)|0,o=o+Math.imul(D,de)|0;var Ie=(c+(r=r+Math.imul(I,pe)|0)|0)+((8191&(i=(i=i+Math.imul(I,me)|0)+Math.imul(R,pe)|0))<<13)|0;c=((o=o+Math.imul(R,me)|0)+(i>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,r=Math.imul(L,he),i=(i=Math.imul(L,de))+Math.imul(F,he)|0,o=Math.imul(F,de);var Re=(c+(r=r+Math.imul(P,pe)|0)|0)+((8191&(i=(i=i+Math.imul(P,me)|0)+Math.imul(D,pe)|0))<<13)|0;c=((o=o+Math.imul(D,me)|0)+(i>>>13)|0)+(Re>>>26)|0,Re&=67108863;var Ne=(c+(r=Math.imul(L,pe))|0)+((8191&(i=(i=Math.imul(L,me))+Math.imul(F,pe)|0))<<13)|0;return c=((o=Math.imul(F,me))+(i>>>13)|0)+(Ne>>>26)|0,Ne&=67108863,u[0]=ge,u[1]=be,u[2]=ve,u[3]=ye,u[4]=_e,u[5]=we,u[6]=Ee,u[7]=Se,u[8]=Me,u[9]=Oe,u[10]=Ae,u[11]=Ce,u[12]=Te,u[13]=ke,u[14]=xe,u[15]=je,u[16]=Ie,u[17]=Re,u[18]=Ne,0!==c&&(u[19]=c,n.length++),n};function b(e,t,n){n.negative=t.negative^e.negative,n.length=e.length+t.length;for(var r=0,i=0,o=0;o<n.length-1;o++){var s=i;i=0;for(var a=67108863&r,u=Math.min(o,t.length-1),c=Math.max(0,o-e.length+1);c<=u;c++){var l=o-c,h=(0|e.words[l])*(0|t.words[c]),d=67108863&h;a=67108863&(d=d+a|0),i+=(s=(s=s+(h/67108864|0)|0)+(d>>>26)|0)>>>26,s&=67108863}n.words[o]=a,r=s,s=i}return 0!==r?n.words[o]=r:n.length--,n._strip()}function v(e,t,n){return b(e,t,n)}function y(e,t){this.x=e,this.y=t}Math.imul||(g=m),o.prototype.mulTo=function(e,t){var n=this.length+e.length;return 10===this.length&&10===e.length?g(this,e,t):n<63?m(this,e,t):n<1024?b(this,e,t):v(this,e,t)},y.prototype.makeRBT=function(e){for(var t=new Array(e),n=o.prototype._countBits(e)-1,r=0;r<e;r++)t[r]=this.revBin(r,n,e);return t},y.prototype.revBin=function(e,t,n){if(0===e||e===n-1)return e;for(var r=0,i=0;i<t;i++)r|=(1&e)<<t-i-1,e>>=1;return r},y.prototype.permute=function(e,t,n,r,i,o){for(var s=0;s<o;s++)r[s]=t[e[s]],i[s]=n[e[s]]},y.prototype.transform=function(e,t,n,r,i,o){this.permute(o,e,t,n,r,i);for(var s=1;s<i;s<<=1)for(var a=s<<1,u=Math.cos(2*Math.PI/a),c=Math.sin(2*Math.PI/a),l=0;l<i;l+=a)for(var h=u,d=c,f=0;f<s;f++){var p=n[l+f],m=r[l+f],g=n[l+f+s],b=r[l+f+s],v=h*g-d*b;b=h*b+d*g,g=v,n[l+f]=p+g,r[l+f]=m+b,n[l+f+s]=p-g,r[l+f+s]=m-b,f!==a&&(v=u*h-c*d,d=u*d+c*h,h=v)}},y.prototype.guessLen13b=function(e,t){var n=1|Math.max(t,e),r=1&n,i=0;for(n=n/2|0;n;n>>>=1)i++;return 1<<i+1+r},y.prototype.conjugate=function(e,t,n){if(!(n<=1))for(var r=0;r<n/2;r++){var i=e[r];e[r]=e[n-r-1],e[n-r-1]=i,i=t[r],t[r]=-t[n-r-1],t[n-r-1]=-i}},y.prototype.normalize13b=function(e,t){for(var n=0,r=0;r<t/2;r++){var i=8192*Math.round(e[2*r+1]/t)+Math.round(e[2*r]/t)+n;e[r]=67108863&i,n=i<67108864?0:i/67108864|0}return e},y.prototype.convert13b=function(e,t,n,i){for(var o=0,s=0;s<t;s++)o+=0|e[s],n[2*s]=8191&o,o>>>=13,n[2*s+1]=8191&o,o>>>=13;for(s=2*t;s<i;++s)n[s]=0;r(0===o),r(0==(-8192&o))},y.prototype.stub=function(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=0;return t},y.prototype.mulp=function(e,t,n){var r=2*this.guessLen13b(e.length,t.length),i=this.makeRBT(r),o=this.stub(r),s=new Array(r),a=new Array(r),u=new Array(r),c=new Array(r),l=new Array(r),h=new Array(r),d=n.words;d.length=r,this.convert13b(e.words,e.length,s,r),this.convert13b(t.words,t.length,c,r),this.transform(s,o,a,u,r,i),this.transform(c,o,l,h,r,i);for(var f=0;f<r;f++){var p=a[f]*l[f]-u[f]*h[f];u[f]=a[f]*h[f]+u[f]*l[f],a[f]=p}return this.conjugate(a,u,r),this.transform(a,u,d,o,r,i),this.conjugate(d,o,r),this.normalize13b(d,r),n.negative=e.negative^t.negative,n.length=e.length+t.length,n._strip()},o.prototype.mul=function(e){var t=new o(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},o.prototype.mulf=function(e){var t=new o(null);return t.words=new Array(this.length+e.length),v(this,e,t)},o.prototype.imul=function(e){return this.clone().mulTo(e,this)},o.prototype.imuln=function(e){var t=e<0;t&&(e=-e),r("number"==typeof e),r(e<67108864);for(var n=0,i=0;i<this.length;i++){var o=(0|this.words[i])*e,s=(67108863&o)+(67108863&n);n>>=26,n+=o/67108864|0,n+=s>>>26,this.words[i]=67108863&s}return 0!==n&&(this.words[i]=n,this.length++),t?this.ineg():this},o.prototype.muln=function(e){return this.clone().imuln(e)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),n=0;n<t.length;n++){var r=n/26|0,i=n%26;t[n]=e.words[r]>>>i&1}return t}(e);if(0===t.length)return new o(1);for(var n=this,r=0;r<t.length&&0===t[r];r++,n=n.sqr());if(++r<t.length)for(var i=n.sqr();r<t.length;r++,i=i.sqr())0!==t[r]&&(n=n.mul(i));return n},o.prototype.iushln=function(e){r("number"==typeof e&&e>=0);var t,n=e%26,i=(e-n)/26,o=67108863>>>26-n<<26-n;if(0!==n){var s=0;for(t=0;t<this.length;t++){var a=this.words[t]&o,u=(0|this.words[t])-a<<n;this.words[t]=u|s,s=a>>>26-n}s&&(this.words[t]=s,this.length++)}if(0!==i){for(t=this.length-1;t>=0;t--)this.words[t+i]=this.words[t];for(t=0;t<i;t++)this.words[t]=0;this.length+=i}return this._strip()},o.prototype.ishln=function(e){return r(0===this.negative),this.iushln(e)},o.prototype.iushrn=function(e,t,n){var i;r("number"==typeof e&&e>=0),i=t?(t-t%26)/26:0;var o=e%26,s=Math.min((e-o)/26,this.length),a=67108863^67108863>>>o<<o,u=n;if(i-=s,i=Math.max(0,i),u){for(var c=0;c<s;c++)u.words[c]=this.words[c];u.length=s}if(0===s);else if(this.length>s)for(this.length-=s,c=0;c<this.length;c++)this.words[c]=this.words[c+s];else this.words[0]=0,this.length=1;var l=0;for(c=this.length-1;c>=0&&(0!==l||c>=i);c--){var h=0|this.words[c];this.words[c]=l<<26-o|h>>>o,l=h&a}return u&&0!==l&&(u.words[u.length++]=l),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},o.prototype.ishrn=function(e,t,n){return r(0===this.negative),this.iushrn(e,t,n)},o.prototype.shln=function(e){return this.clone().ishln(e)},o.prototype.ushln=function(e){return this.clone().iushln(e)},o.prototype.shrn=function(e){return this.clone().ishrn(e)},o.prototype.ushrn=function(e){return this.clone().iushrn(e)},o.prototype.testn=function(e){r("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26,i=1<<t;return!(this.length<=n)&&!!(this.words[n]&i)},o.prototype.imaskn=function(e){r("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26;if(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=n)return this;if(0!==t&&n++,this.length=Math.min(n,this.length),0!==t){var i=67108863^67108863>>>t<<t;this.words[this.length-1]&=i}return this._strip()},o.prototype.maskn=function(e){return this.clone().imaskn(e)},o.prototype.iaddn=function(e){return r("number"==typeof e),r(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<=e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},o.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},o.prototype.isubn=function(e){if(r("number"==typeof e),r(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this._strip()},o.prototype.addn=function(e){return this.clone().iaddn(e)},o.prototype.subn=function(e){return this.clone().isubn(e)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(e,t,n){var i,o,s=e.length+n;this._expand(s);var a=0;for(i=0;i<e.length;i++){o=(0|this.words[i+n])+a;var u=(0|e.words[i])*t;a=((o-=67108863&u)>>26)-(u/67108864|0),this.words[i+n]=67108863&o}for(;i<this.length-n;i++)a=(o=(0|this.words[i+n])+a)>>26,this.words[i+n]=67108863&o;if(0===a)return this._strip();for(r(-1===a),a=0,i=0;i<this.length;i++)a=(o=-(0|this.words[i])+a)>>26,this.words[i]=67108863&o;return this.negative=1,this._strip()},o.prototype._wordDiv=function(e,t){var n=(this.length,e.length),r=this.clone(),i=e,s=0|i.words[i.length-1];0!==(n=26-this._countBits(s))&&(i=i.ushln(n),r.iushln(n),s=0|i.words[i.length-1]);var a,u=r.length-i.length;if("mod"!==t){(a=new o(null)).length=u+1,a.words=new Array(a.length);for(var c=0;c<a.length;c++)a.words[c]=0}var l=r.clone()._ishlnsubmul(i,1,u);0===l.negative&&(r=l,a&&(a.words[u]=1));for(var h=u-1;h>=0;h--){var d=67108864*(0|r.words[i.length+h])+(0|r.words[i.length+h-1]);for(d=Math.min(d/s|0,67108863),r._ishlnsubmul(i,d,h);0!==r.negative;)d--,r.negative=0,r._ishlnsubmul(i,1,h),r.isZero()||(r.negative^=1);a&&(a.words[h]=d)}return a&&a._strip(),r._strip(),"div"!==t&&0!==n&&r.iushrn(n),{div:a||null,mod:r}},o.prototype.divmod=function(e,t,n){return r(!e.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===e.negative?(a=this.neg().divmod(e,t),"mod"!==t&&(i=a.div.neg()),"div"!==t&&(s=a.mod.neg(),n&&0!==s.negative&&s.iadd(e)),{div:i,mod:s}):0===this.negative&&0!==e.negative?(a=this.divmod(e.neg(),t),"mod"!==t&&(i=a.div.neg()),{div:i,mod:a.mod}):0!=(this.negative&e.negative)?(a=this.neg().divmod(e.neg(),t),"div"!==t&&(s=a.mod.neg(),n&&0!==s.negative&&s.isub(e)),{div:a.div,mod:s}):e.length>this.length||this.cmp(e)<0?{div:new o(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new o(this.modrn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new o(this.modrn(e.words[0]))}:this._wordDiv(e,t);var i,s,a},o.prototype.div=function(e){return this.divmod(e,"div",!1).div},o.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},o.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},o.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var n=0!==t.div.negative?t.mod.isub(e):t.mod,r=e.ushrn(1),i=e.andln(1),o=n.cmp(r);return o<0||1===i&&0===o?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},o.prototype.modrn=function(e){var t=e<0;t&&(e=-e),r(e<=67108863);for(var n=(1<<26)%e,i=0,o=this.length-1;o>=0;o--)i=(n*i+(0|this.words[o]))%e;return t?-i:i},o.prototype.modn=function(e){return this.modrn(e)},o.prototype.idivn=function(e){var t=e<0;t&&(e=-e),r(e<=67108863);for(var n=0,i=this.length-1;i>=0;i--){var o=(0|this.words[i])+67108864*n;this.words[i]=o/e|0,n=o%e}return this._strip(),t?this.ineg():this},o.prototype.divn=function(e){return this.clone().idivn(e)},o.prototype.egcd=function(e){r(0===e.negative),r(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i=new o(1),s=new o(0),a=new o(0),u=new o(1),c=0;t.isEven()&&n.isEven();)t.iushrn(1),n.iushrn(1),++c;for(var l=n.clone(),h=t.clone();!t.isZero();){for(var d=0,f=1;0==(t.words[0]&f)&&d<26;++d,f<<=1);if(d>0)for(t.iushrn(d);d-- >0;)(i.isOdd()||s.isOdd())&&(i.iadd(l),s.isub(h)),i.iushrn(1),s.iushrn(1);for(var p=0,m=1;0==(n.words[0]&m)&&p<26;++p,m<<=1);if(p>0)for(n.iushrn(p);p-- >0;)(a.isOdd()||u.isOdd())&&(a.iadd(l),u.isub(h)),a.iushrn(1),u.iushrn(1);t.cmp(n)>=0?(t.isub(n),i.isub(a),s.isub(u)):(n.isub(t),a.isub(i),u.isub(s))}return{a:a,b:u,gcd:n.iushln(c)}},o.prototype._invmp=function(e){r(0===e.negative),r(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i,s=new o(1),a=new o(0),u=n.clone();t.cmpn(1)>0&&n.cmpn(1)>0;){for(var c=0,l=1;0==(t.words[0]&l)&&c<26;++c,l<<=1);if(c>0)for(t.iushrn(c);c-- >0;)s.isOdd()&&s.iadd(u),s.iushrn(1);for(var h=0,d=1;0==(n.words[0]&d)&&h<26;++h,d<<=1);if(h>0)for(n.iushrn(h);h-- >0;)a.isOdd()&&a.iadd(u),a.iushrn(1);t.cmp(n)>=0?(t.isub(n),s.isub(a)):(n.isub(t),a.isub(s))}return(i=0===t.cmpn(1)?s:a).cmpn(0)<0&&i.iadd(e),i},o.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),n=e.clone();t.negative=0,n.negative=0;for(var r=0;t.isEven()&&n.isEven();r++)t.iushrn(1),n.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;n.isEven();)n.iushrn(1);var i=t.cmp(n);if(i<0){var o=t;t=n,n=o}else if(0===i||0===n.cmpn(1))break;t.isub(n)}return n.iushln(r)},o.prototype.invm=function(e){return this.egcd(e).a.umod(e)},o.prototype.isEven=function(){return 0==(1&this.words[0])},o.prototype.isOdd=function(){return 1==(1&this.words[0])},o.prototype.andln=function(e){return this.words[0]&e},o.prototype.bincn=function(e){r("number"==typeof e);var t=e%26,n=(e-t)/26,i=1<<t;if(this.length<=n)return this._expand(n+1),this.words[n]|=i,this;for(var o=i,s=n;0!==o&&s<this.length;s++){var a=0|this.words[s];o=(a+=o)>>>26,a&=67108863,this.words[s]=a}return 0!==o&&(this.words[s]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(e){var t,n=e<0;if(0!==this.negative&&!n)return-1;if(0===this.negative&&n)return 1;if(this._strip(),this.length>1)t=1;else{n&&(e=-e),r(e<=67108863,"Number is too big");var i=0|this.words[0];t=i===e?0:i<e?-1:1}return 0!==this.negative?0|-t:t},o.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},o.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,n=this.length-1;n>=0;n--){var r=0|this.words[n],i=0|e.words[n];if(r!==i){r<i?t=-1:r>i&&(t=1);break}}return t},o.prototype.gtn=function(e){return 1===this.cmpn(e)},o.prototype.gt=function(e){return 1===this.cmp(e)},o.prototype.gten=function(e){return this.cmpn(e)>=0},o.prototype.gte=function(e){return this.cmp(e)>=0},o.prototype.ltn=function(e){return-1===this.cmpn(e)},o.prototype.lt=function(e){return-1===this.cmp(e)},o.prototype.lten=function(e){return this.cmpn(e)<=0},o.prototype.lte=function(e){return this.cmp(e)<=0},o.prototype.eqn=function(e){return 0===this.cmpn(e)},o.prototype.eq=function(e){return 0===this.cmp(e)},o.red=function(e){return new A(e)},o.prototype.toRed=function(e){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},o.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(e){return this.red=e,this},o.prototype.forceRed=function(e){return r(!this.red,"Already a number in reduction context"),this._forceRed(e)},o.prototype.redAdd=function(e){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},o.prototype.redIAdd=function(e){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},o.prototype.redSub=function(e){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},o.prototype.redISub=function(e){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},o.prototype.redShl=function(e){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},o.prototype.redMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},o.prototype.redIMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},o.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(e){return r(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var _={k256:null,p224:null,p192:null,p25519:null};function w(e,t){this.name=e,this.p=new o(t,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function E(){w.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function S(){w.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function M(){w.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function O(){w.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function A(e){if("string"==typeof e){var t=o._prime(e);this.m=t.p,this.prime=t}else r(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function C(e){A.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}w.prototype._tmp=function(){var e=new o(null);return e.words=new Array(Math.ceil(this.n/13)),e},w.prototype.ireduce=function(e){var t,n=e;do{this.split(n,this.tmp),t=(n=(n=this.imulK(n)).iadd(this.tmp)).bitLength()}while(t>this.n);var r=t<this.n?-1:n.ucmp(this.p);return 0===r?(n.words[0]=0,n.length=1):r>0?n.isub(this.p):void 0!==n.strip?n.strip():n._strip(),n},w.prototype.split=function(e,t){e.iushrn(this.n,0,t)},w.prototype.imulK=function(e){return e.imul(this.k)},i(E,w),E.prototype.split=function(e,t){for(var n=Math.min(e.length,9),r=0;r<n;r++)t.words[r]=e.words[r];if(t.length=n,e.length<=9)return e.words[0]=0,void(e.length=1);var i=e.words[9];for(t.words[t.length++]=4194303&i,r=10;r<e.length;r++){var o=0|e.words[r];e.words[r-10]=(4194303&o)<<4|i>>>22,i=o}i>>>=22,e.words[r-10]=i,0===i&&e.length>10?e.length-=10:e.length-=9},E.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,n=0;n<e.length;n++){var r=0|e.words[n];t+=977*r,e.words[n]=67108863&t,t=64*r+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},i(S,w),i(M,w),i(O,w),O.prototype.imulK=function(e){for(var t=0,n=0;n<e.length;n++){var r=19*(0|e.words[n])+t,i=67108863&r;r>>>=26,e.words[n]=i,t=r}return 0!==t&&(e.words[e.length++]=t),e},o._prime=function(e){if(_[e])return _[e];var t;if("k256"===e)t=new E;else if("p224"===e)t=new S;else if("p192"===e)t=new M;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new O}return _[e]=t,t},A.prototype._verify1=function(e){r(0===e.negative,"red works only with positives"),r(e.red,"red works only with red numbers")},A.prototype._verify2=function(e,t){r(0==(e.negative|t.negative),"red works only with positives"),r(e.red&&e.red===t.red,"red works only with red numbers")},A.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):(l(e,e.umod(this.m)._forceRed(this)),e)},A.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},A.prototype.add=function(e,t){this._verify2(e,t);var n=e.add(t);return n.cmp(this.m)>=0&&n.isub(this.m),n._forceRed(this)},A.prototype.iadd=function(e,t){this._verify2(e,t);var n=e.iadd(t);return n.cmp(this.m)>=0&&n.isub(this.m),n},A.prototype.sub=function(e,t){this._verify2(e,t);var n=e.sub(t);return n.cmpn(0)<0&&n.iadd(this.m),n._forceRed(this)},A.prototype.isub=function(e,t){this._verify2(e,t);var n=e.isub(t);return n.cmpn(0)<0&&n.iadd(this.m),n},A.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},A.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},A.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},A.prototype.isqr=function(e){return this.imul(e,e.clone())},A.prototype.sqr=function(e){return this.mul(e,e)},A.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(r(t%2==1),3===t){var n=this.m.add(new o(1)).iushrn(2);return this.pow(e,n)}for(var i=this.m.subn(1),s=0;!i.isZero()&&0===i.andln(1);)s++,i.iushrn(1);r(!i.isZero());var a=new o(1).toRed(this),u=a.redNeg(),c=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new o(2*l*l).toRed(this);0!==this.pow(l,c).cmp(u);)l.redIAdd(u);for(var h=this.pow(l,i),d=this.pow(e,i.addn(1).iushrn(1)),f=this.pow(e,i),p=s;0!==f.cmp(a);){for(var m=f,g=0;0!==m.cmp(a);g++)m=m.redSqr();r(g<p);var b=this.pow(h,new o(1).iushln(p-g-1));d=d.redMul(b),h=b.redSqr(),f=f.redMul(h),p=g}return d},A.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},A.prototype.pow=function(e,t){if(t.isZero())return new o(1).toRed(this);if(0===t.cmpn(1))return e.clone();var n=new Array(16);n[0]=new o(1).toRed(this),n[1]=e;for(var r=2;r<n.length;r++)n[r]=this.mul(n[r-1],e);var i=n[0],s=0,a=0,u=t.bitLength()%26;for(0===u&&(u=26),r=t.length-1;r>=0;r--){for(var c=t.words[r],l=u-1;l>=0;l--){var h=c>>l&1;i!==n[0]&&(i=this.sqr(i)),0!==h||0!==s?(s<<=1,s|=h,(4===++a||0===r&&0===l)&&(i=this.mul(i,n[s]),a=0,s=0)):a=0}u=26}return i},A.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},A.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},o.mont=function(e){return new C(e)},i(C,A),C.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},C.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},C.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var n=e.imul(t),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=n.isub(r).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},C.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new o(0)._forceRed(this);var n=e.mul(t),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=n.isub(r).iushrn(this.shift),s=i;return i.cmp(this.m)>=0?s=i.isub(this.m):i.cmpn(0)<0&&(s=i.iadd(this.m)),s._forceRed(this)},C.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(e,this)}).call(this,n(34)(e))},function(e,t,n){"use strict";var r=t;r.version=n(251).version,r.utils=n(25),r.rand=n(82),r.curve=n(141),r.curves=n(87),r.ec=n(263),r.eddsa=n(267)},function(e,t,n){"use strict";var r,i=t,o=n(88),s=n(141),a=n(25).assert;function u(e){"short"===e.type?this.curve=new s.short(e):"edwards"===e.type?this.curve=new s.edwards(e):this.curve=new s.mont(e),this.g=this.curve.g,this.n=this.curve.n,this.hash=e.hash,a(this.g.validate(),"Invalid curve"),a(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function c(e,t){Object.defineProperty(i,e,{configurable:!0,enumerable:!0,get:function(){var n=new u(t);return Object.defineProperty(i,e,{configurable:!0,enumerable:!0,value:n}),n}})}i.PresetCurve=u,c("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:o.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),c("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:o.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),c("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:o.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),c("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:o.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),c("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:o.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),c("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:o.sha256,gRed:!1,g:["9"]}),c("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:o.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{r=n(262)}catch(e){r=void 0}c("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:o.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",r]})},function(e,t,n){var r=t;r.utils=n(27),r.common=n(53),r.sha=n(256),r.ripemd=n(260),r.hmac=n(261),r.sha1=r.sha.sha1,r.sha256=r.sha.sha256,r.sha224=r.sha.sha224,r.sha384=r.sha.sha384,r.sha512=r.sha.sha512,r.ripemd160=r.ripemd.ripemd160},function(e,t,n){"use strict";(function(t){var r,i=n(17),o=i.Buffer,s={};for(r in i)i.hasOwnProperty(r)&&"SlowBuffer"!==r&&"Buffer"!==r&&(s[r]=i[r]);var a=s.Buffer={};for(r in o)o.hasOwnProperty(r)&&"allocUnsafe"!==r&&"allocUnsafeSlow"!==r&&(a[r]=o[r]);if(s.Buffer.prototype=o.prototype,a.from&&a.from!==Uint8Array.from||(a.from=function(e,t,n){if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type '+typeof e);if(e&&void 0===e.length)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);return o(e,t,n)}),a.alloc||(a.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError('The "size" argument must be of type number. Received type '+typeof e);if(e<0||e>=2*(1<<30))throw new RangeError('The value "'+e+'" is invalid for option "size"');var r=o(e);return t&&0!==t.length?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r}),!s.kStringMaxLength)try{s.kStringMaxLength=t.binding("buffer").kStringMaxLength}catch(e){}s.constants||(s.constants={MAX_LENGTH:s.kMaxLength},s.kStringMaxLength&&(s.constants.MAX_STRING_LENGTH=s.kStringMaxLength)),e.exports=s}).call(this,n(16))},function(e,t,n){"use strict";const r=n(91).Reporter,i=n(54).EncoderBuffer,o=n(54).DecoderBuffer,s=n(24),a=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],u=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(a);function c(e,t,n){const r={};this._baseState=r,r.name=n,r.enc=e,r.parent=t||null,r.children=null,r.tag=null,r.args=null,r.reverseArgs=null,r.choice=null,r.optional=!1,r.any=!1,r.obj=!1,r.use=null,r.useDecoder=null,r.key=null,r.default=null,r.explicit=null,r.implicit=null,r.contains=null,r.parent||(r.children=[],this._wrap())}e.exports=c;const l=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];c.prototype.clone=function(){const e=this._baseState,t={};l.forEach((function(n){t[n]=e[n]}));const n=new this.constructor(t.parent);return n._baseState=t,n},c.prototype._wrap=function(){const e=this._baseState;u.forEach((function(t){this[t]=function(){const n=new this.constructor(this);return e.children.push(n),n[t].apply(n,arguments)}}),this)},c.prototype._init=function(e){const t=this._baseState;s(null===t.parent),e.call(this),t.children=t.children.filter((function(e){return e._baseState.parent===this}),this),s.equal(t.children.length,1,"Root node can have only one child")},c.prototype._useArgs=function(e){const t=this._baseState,n=e.filter((function(e){return e instanceof this.constructor}),this);e=e.filter((function(e){return!(e instanceof this.constructor)}),this),0!==n.length&&(s(null===t.children),t.children=n,n.forEach((function(e){e._baseState.parent=this}),this)),0!==e.length&&(s(null===t.args),t.args=e,t.reverseArgs=e.map((function(e){if("object"!=typeof e||e.constructor!==Object)return e;const t={};return Object.keys(e).forEach((function(n){n==(0|n)&&(n|=0);const r=e[n];t[r]=n})),t})))},["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"].forEach((function(e){c.prototype[e]=function(){const t=this._baseState;throw new Error(e+" not implemented for encoding: "+t.enc)}})),a.forEach((function(e){c.prototype[e]=function(){const t=this._baseState,n=Array.prototype.slice.call(arguments);return s(null===t.tag),t.tag=e,this._useArgs(n),this}})),c.prototype.use=function(e){s(e);const t=this._baseState;return s(null===t.use),t.use=e,this},c.prototype.optional=function(){return this._baseState.optional=!0,this},c.prototype.def=function(e){const t=this._baseState;return s(null===t.default),t.default=e,t.optional=!0,this},c.prototype.explicit=function(e){const t=this._baseState;return s(null===t.explicit&&null===t.implicit),t.explicit=e,this},c.prototype.implicit=function(e){const t=this._baseState;return s(null===t.explicit&&null===t.implicit),t.implicit=e,this},c.prototype.obj=function(){const e=this._baseState,t=Array.prototype.slice.call(arguments);return e.obj=!0,0!==t.length&&this._useArgs(t),this},c.prototype.key=function(e){const t=this._baseState;return s(null===t.key),t.key=e,this},c.prototype.any=function(){return this._baseState.any=!0,this},c.prototype.choice=function(e){const t=this._baseState;return s(null===t.choice),t.choice=e,this._useArgs(Object.keys(e).map((function(t){return e[t]}))),this},c.prototype.contains=function(e){const t=this._baseState;return s(null===t.use),t.contains=e,this},c.prototype._decode=function(e,t){const n=this._baseState;if(null===n.parent)return e.wrapResult(n.children[0]._decode(e,t));let r,i=n.default,s=!0,a=null;if(null!==n.key&&(a=e.enterKey(n.key)),n.optional){let r=null;if(null!==n.explicit?r=n.explicit:null!==n.implicit?r=n.implicit:null!==n.tag&&(r=n.tag),null!==r||n.any){if(s=this._peekTag(e,r,n.any),e.isError(s))return s}else{const r=e.save();try{null===n.choice?this._decodeGeneric(n.tag,e,t):this._decodeChoice(e,t),s=!0}catch(e){s=!1}e.restore(r)}}if(n.obj&&s&&(r=e.enterObject()),s){if(null!==n.explicit){const t=this._decodeTag(e,n.explicit);if(e.isError(t))return t;e=t}const r=e.offset;if(null===n.use&&null===n.choice){let t;n.any&&(t=e.save());const r=this._decodeTag(e,null!==n.implicit?n.implicit:n.tag,n.any);if(e.isError(r))return r;n.any?i=e.raw(t):e=r}if(t&&t.track&&null!==n.tag&&t.track(e.path(),r,e.length,"tagged"),t&&t.track&&null!==n.tag&&t.track(e.path(),e.offset,e.length,"content"),n.any||(i=null===n.choice?this._decodeGeneric(n.tag,e,t):this._decodeChoice(e,t)),e.isError(i))return i;if(n.any||null!==n.choice||null===n.children||n.children.forEach((function(n){n._decode(e,t)})),n.contains&&("octstr"===n.tag||"bitstr"===n.tag)){const r=new o(i);i=this._getUse(n.contains,e._reporterState.obj)._decode(r,t)}}return n.obj&&s&&(i=e.leaveObject(r)),null===n.key||null===i&&!0!==s?null!==a&&e.exitKey(a):e.leaveKey(a,n.key,i),i},c.prototype._decodeGeneric=function(e,t,n){const r=this._baseState;return"seq"===e||"set"===e?null:"seqof"===e||"setof"===e?this._decodeList(t,e,r.args[0],n):/str$/.test(e)?this._decodeStr(t,e,n):"objid"===e&&r.args?this._decodeObjid(t,r.args[0],r.args[1],n):"objid"===e?this._decodeObjid(t,null,null,n):"gentime"===e||"utctime"===e?this._decodeTime(t,e,n):"null_"===e?this._decodeNull(t,n):"bool"===e?this._decodeBool(t,n):"objDesc"===e?this._decodeStr(t,e,n):"int"===e||"enum"===e?this._decodeInt(t,r.args&&r.args[0],n):null!==r.use?this._getUse(r.use,t._reporterState.obj)._decode(t,n):t.error("unknown tag: "+e)},c.prototype._getUse=function(e,t){const n=this._baseState;return n.useDecoder=this._use(e,t),s(null===n.useDecoder._baseState.parent),n.useDecoder=n.useDecoder._baseState.children[0],n.implicit!==n.useDecoder._baseState.implicit&&(n.useDecoder=n.useDecoder.clone(),n.useDecoder._baseState.implicit=n.implicit),n.useDecoder},c.prototype._decodeChoice=function(e,t){const n=this._baseState;let r=null,i=!1;return Object.keys(n.choice).some((function(o){const s=e.save(),a=n.choice[o];try{const n=a._decode(e,t);if(e.isError(n))return!1;r={type:o,value:n},i=!0}catch(t){return e.restore(s),!1}return!0}),this),i?r:e.error("Choice not matched")},c.prototype._createEncoderBuffer=function(e){return new i(e,this.reporter)},c.prototype._encode=function(e,t,n){const r=this._baseState;if(null!==r.default&&r.default===e)return;const i=this._encodeValue(e,t,n);return void 0===i||this._skipDefault(i,t,n)?void 0:i},c.prototype._encodeValue=function(e,t,n){const i=this._baseState;if(null===i.parent)return i.children[0]._encode(e,t||new r);let o=null;if(this.reporter=t,i.optional&&void 0===e){if(null===i.default)return;e=i.default}let s=null,a=!1;if(i.any)o=this._createEncoderBuffer(e);else if(i.choice)o=this._encodeChoice(e,t);else if(i.contains)s=this._getUse(i.contains,n)._encode(e,t),a=!0;else if(i.children)s=i.children.map((function(n){if("null_"===n._baseState.tag)return n._encode(null,t,e);if(null===n._baseState.key)return t.error("Child should have a key");const r=t.enterKey(n._baseState.key);if("object"!=typeof e)return t.error("Child expected, but input is not object");const i=n._encode(e[n._baseState.key],t,e);return t.leaveKey(r),i}),this).filter((function(e){return e})),s=this._createEncoderBuffer(s);else if("seqof"===i.tag||"setof"===i.tag){if(!i.args||1!==i.args.length)return t.error("Too many args for : "+i.tag);if(!Array.isArray(e))return t.error("seqof/setof, but data is not Array");const n=this.clone();n._baseState.implicit=null,s=this._createEncoderBuffer(e.map((function(n){const r=this._baseState;return this._getUse(r.args[0],e)._encode(n,t)}),n))}else null!==i.use?o=this._getUse(i.use,n)._encode(e,t):(s=this._encodePrimitive(i.tag,e),a=!0);if(!i.any&&null===i.choice){const e=null!==i.implicit?i.implicit:i.tag,n=null===i.implicit?"universal":"context";null===e?null===i.use&&t.error("Tag could be omitted only for .use()"):null===i.use&&(o=this._encodeComposite(e,a,n,s))}return null!==i.explicit&&(o=this._encodeComposite(i.explicit,!1,"context",o)),o},c.prototype._encodeChoice=function(e,t){const n=this._baseState,r=n.choice[e.type];return r||s(!1,e.type+" not found in "+JSON.stringify(Object.keys(n.choice))),r._encode(e.value,t)},c.prototype._encodePrimitive=function(e,t){const n=this._baseState;if(/str$/.test(e))return this._encodeStr(t,e);if("objid"===e&&n.args)return this._encodeObjid(t,n.reverseArgs[0],n.args[1]);if("objid"===e)return this._encodeObjid(t,null,null);if("gentime"===e||"utctime"===e)return this._encodeTime(t,e);if("null_"===e)return this._encodeNull();if("int"===e||"enum"===e)return this._encodeInt(t,n.args&&n.reverseArgs[0]);if("bool"===e)return this._encodeBool(t);if("objDesc"===e)return this._encodeStr(t,e);throw new Error("Unsupported tag: "+e)},c.prototype._isNumstr=function(e){return/^[0-9 ]*$/.test(e)},c.prototype._isPrintstr=function(e){return/^[A-Za-z0-9 '()+,-./:=?]*$/.test(e)}},function(e,t,n){"use strict";const r=n(7);function i(e){this._reporterState={obj:null,path:[],options:e||{},errors:[]}}function o(e,t){this.path=e,this.rethrow(t)}t.Reporter=i,i.prototype.isError=function(e){return e instanceof o},i.prototype.save=function(){const e=this._reporterState;return{obj:e.obj,pathLen:e.path.length}},i.prototype.restore=function(e){const t=this._reporterState;t.obj=e.obj,t.path=t.path.slice(0,e.pathLen)},i.prototype.enterKey=function(e){return this._reporterState.path.push(e)},i.prototype.exitKey=function(e){const t=this._reporterState;t.path=t.path.slice(0,e-1)},i.prototype.leaveKey=function(e,t,n){const r=this._reporterState;this.exitKey(e),null!==r.obj&&(r.obj[t]=n)},i.prototype.path=function(){return this._reporterState.path.join("/")},i.prototype.enterObject=function(){const e=this._reporterState,t=e.obj;return e.obj={},t},i.prototype.leaveObject=function(e){const t=this._reporterState,n=t.obj;return t.obj=e,n},i.prototype.error=function(e){let t;const n=this._reporterState,r=e instanceof o;if(t=r?e:new o(n.path.map((function(e){return"["+JSON.stringify(e)+"]"})).join(""),e.message||e,e.stack),!n.options.partial)throw t;return r||n.errors.push(t),t},i.prototype.wrapResult=function(e){const t=this._reporterState;return t.options.partial?{result:this.isError(e)?null:e,errors:t.errors}:e},r(o,Error),o.prototype.rethrow=function(e){if(this.message=e+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,o),!this.stack)try{throw new Error(this.message)}catch(e){this.stack=e.stack}return this}},function(e,t,n){"use strict";function r(e){const t={};return Object.keys(e).forEach((function(n){(0|n)==n&&(n|=0);const r=e[n];t[r]=n})),t}t.tagClass={0:"universal",1:"application",2:"context",3:"private"},t.tagClassByName=r(t.tagClass),t.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},t.tagByName=r(t.tag)},function(e,t,n){(function(e){!function(e,t){"use strict";function r(e,t){if(!e)throw new Error(t||"Assertion failed")}function i(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}function o(e,t,n){if(o.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(n=t,t=10),this._init(e||0,t||10,n||"be"))}var s;"object"==typeof e?e.exports=o:t.BN=o,o.BN=o,o.wordSize=26;try{s="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:n(286).Buffer}catch(e){}function a(e,t){var n=e.charCodeAt(t);return n>=65&&n<=70?n-55:n>=97&&n<=102?n-87:n-48&15}function u(e,t,n){var r=a(e,n);return n-1>=t&&(r|=a(e,n-1)<<4),r}function c(e,t,n,r){for(var i=0,o=Math.min(e.length,n),s=t;s<o;s++){var a=e.charCodeAt(s)-48;i*=r,i+=a>=49?a-49+10:a>=17?a-17+10:a}return i}o.isBN=function(e){return e instanceof o||null!==e&&"object"==typeof e&&e.constructor.wordSize===o.wordSize&&Array.isArray(e.words)},o.max=function(e,t){return e.cmp(t)>0?e:t},o.min=function(e,t){return e.cmp(t)<0?e:t},o.prototype._init=function(e,t,n){if("number"==typeof e)return this._initNumber(e,t,n);if("object"==typeof e)return this._initArray(e,t,n);"hex"===t&&(t=16),r(t===(0|t)&&t>=2&&t<=36);var i=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<e.length&&(16===t?this._parseHex(e,i,n):(this._parseBase(e,t,i),"le"===n&&this._initArray(this.toArray(),t,n)))},o.prototype._initNumber=function(e,t,n){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(r(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===n&&this._initArray(this.toArray(),t,n)},o.prototype._initArray=function(e,t,n){if(r("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var o,s,a=0;if("be"===n)for(i=e.length-1,o=0;i>=0;i-=3)s=e[i]|e[i-1]<<8|e[i-2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);else if("le"===n)for(i=0,o=0;i<e.length;i+=3)s=e[i]|e[i+1]<<8|e[i+2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);return this.strip()},o.prototype._parseHex=function(e,t,n){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var i,o=0,s=0;if("be"===n)for(r=e.length-1;r>=t;r-=2)i=u(e,t,r)<<o,this.words[s]|=67108863&i,o>=18?(o-=18,s+=1,this.words[s]|=i>>>26):o+=8;else for(r=(e.length-t)%2==0?t+1:t;r<e.length;r+=2)i=u(e,t,r)<<o,this.words[s]|=67108863&i,o>=18?(o-=18,s+=1,this.words[s]|=i>>>26):o+=8;this.strip()},o.prototype._parseBase=function(e,t,n){this.words=[0],this.length=1;for(var r=0,i=1;i<=67108863;i*=t)r++;r--,i=i/t|0;for(var o=e.length-n,s=o%r,a=Math.min(o,o-s)+n,u=0,l=n;l<a;l+=r)u=c(e,l,l+r,t),this.imuln(i),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==s){var h=1;for(u=c(e,l,e.length,t),l=0;l<s;l++)h*=t;this.imuln(h),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this.strip()},o.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},o.prototype.clone=function(){var e=new o(null);return this.copy(e),e},o.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var l=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],d=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function f(e,t,n){n.negative=t.negative^e.negative;var r=e.length+t.length|0;n.length=r,r=r-1|0;var i=0|e.words[0],o=0|t.words[0],s=i*o,a=67108863&s,u=s/67108864|0;n.words[0]=a;for(var c=1;c<r;c++){for(var l=u>>>26,h=67108863&u,d=Math.min(c,t.length-1),f=Math.max(0,c-e.length+1);f<=d;f++){var p=c-f|0;l+=(s=(i=0|e.words[p])*(o=0|t.words[f])+h)/67108864|0,h=67108863&s}n.words[c]=0|h,u=0|l}return 0!==u?n.words[c]=0|u:n.length--,n.strip()}o.prototype.toString=function(e,t){var n;if(t=0|t||1,16===(e=e||10)||"hex"===e){n="";for(var i=0,o=0,s=0;s<this.length;s++){var a=this.words[s],u=(16777215&(a<<i|o)).toString(16);n=0!==(o=a>>>24-i&16777215)||s!==this.length-1?l[6-u.length]+u+n:u+n,(i+=2)>=26&&(i-=26,s--)}for(0!==o&&(n=o.toString(16)+n);n.length%t!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}if(e===(0|e)&&e>=2&&e<=36){var c=h[e],f=d[e];n="";var p=this.clone();for(p.negative=0;!p.isZero();){var m=p.modn(f).toString(e);n=(p=p.idivn(f)).isZero()?m+n:l[c-m.length]+m+n}for(this.isZero()&&(n="0"+n);n.length%t!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}r(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(e,t){return r(void 0!==s),this.toArrayLike(s,e,t)},o.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},o.prototype.toArrayLike=function(e,t,n){var i=this.byteLength(),o=n||Math.max(1,i);r(i<=o,"byte array longer than desired length"),r(o>0,"Requested array length <= 0"),this.strip();var s,a,u="le"===t,c=new e(o),l=this.clone();if(u){for(a=0;!l.isZero();a++)s=l.andln(255),l.iushrn(8),c[a]=s;for(;a<o;a++)c[a]=0}else{for(a=0;a<o-i;a++)c[a]=0;for(a=0;!l.isZero();a++)s=l.andln(255),l.iushrn(8),c[o-a-1]=s}return c},Math.clz32?o.prototype._countBits=function(e){return 32-Math.clz32(e)}:o.prototype._countBits=function(e){var t=e,n=0;return t>=4096&&(n+=13,t>>>=13),t>=64&&(n+=7,t>>>=7),t>=8&&(n+=4,t>>>=4),t>=2&&(n+=2,t>>>=2),n+t},o.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,n=0;return 0==(8191&t)&&(n+=13,t>>>=13),0==(127&t)&&(n+=7,t>>>=7),0==(15&t)&&(n+=4,t>>>=4),0==(3&t)&&(n+=2,t>>>=2),0==(1&t)&&n++,n},o.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var n=this._zeroBits(this.words[t]);if(e+=n,26!==n)break}return e},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},o.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this.strip()},o.prototype.ior=function(e){return r(0==(this.negative|e.negative)),this.iuor(e)},o.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},o.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},o.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var n=0;n<t.length;n++)this.words[n]=this.words[n]&e.words[n];return this.length=t.length,this.strip()},o.prototype.iand=function(e){return r(0==(this.negative|e.negative)),this.iuand(e)},o.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},o.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},o.prototype.iuxor=function(e){var t,n;this.length>e.length?(t=this,n=e):(t=e,n=this);for(var r=0;r<n.length;r++)this.words[r]=t.words[r]^n.words[r];if(this!==t)for(;r<t.length;r++)this.words[r]=t.words[r];return this.length=t.length,this.strip()},o.prototype.ixor=function(e){return r(0==(this.negative|e.negative)),this.iuxor(e)},o.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},o.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},o.prototype.inotn=function(e){r("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),n=e%26;this._expand(t),n>0&&t--;for(var i=0;i<t;i++)this.words[i]=67108863&~this.words[i];return n>0&&(this.words[i]=~this.words[i]&67108863>>26-n),this.strip()},o.prototype.notn=function(e){return this.clone().inotn(e)},o.prototype.setn=function(e,t){r("number"==typeof e&&e>=0);var n=e/26|0,i=e%26;return this._expand(n+1),this.words[n]=t?this.words[n]|1<<i:this.words[n]&~(1<<i),this.strip()},o.prototype.iadd=function(e){var t,n,r;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(n=this,r=e):(n=e,r=this);for(var i=0,o=0;o<r.length;o++)t=(0|n.words[o])+(0|r.words[o])+i,this.words[o]=67108863&t,i=t>>>26;for(;0!==i&&o<n.length;o++)t=(0|n.words[o])+i,this.words[o]=67108863&t,i=t>>>26;if(this.length=n.length,0!==i)this.words[this.length]=i,this.length++;else if(n!==this)for(;o<n.length;o++)this.words[o]=n.words[o];return this},o.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},o.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var n,r,i=this.cmp(e);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(n=this,r=e):(n=e,r=this);for(var o=0,s=0;s<r.length;s++)o=(t=(0|n.words[s])-(0|r.words[s])+o)>>26,this.words[s]=67108863&t;for(;0!==o&&s<n.length;s++)o=(t=(0|n.words[s])+o)>>26,this.words[s]=67108863&t;if(0===o&&s<n.length&&n!==this)for(;s<n.length;s++)this.words[s]=n.words[s];return this.length=Math.max(this.length,s),n!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(e){return this.clone().isub(e)};var p=function(e,t,n){var r,i,o,s=e.words,a=t.words,u=n.words,c=0,l=0|s[0],h=8191&l,d=l>>>13,f=0|s[1],p=8191&f,m=f>>>13,g=0|s[2],b=8191&g,v=g>>>13,y=0|s[3],_=8191&y,w=y>>>13,E=0|s[4],S=8191&E,M=E>>>13,O=0|s[5],A=8191&O,C=O>>>13,T=0|s[6],k=8191&T,x=T>>>13,j=0|s[7],I=8191&j,R=j>>>13,N=0|s[8],P=8191&N,D=N>>>13,U=0|s[9],L=8191&U,F=U>>>13,B=0|a[0],H=8191&B,q=B>>>13,V=0|a[1],G=8191&V,z=V>>>13,W=0|a[2],K=8191&W,Y=W>>>13,Q=0|a[3],J=8191&Q,Z=Q>>>13,$=0|a[4],X=8191&$,ee=$>>>13,te=0|a[5],ne=8191&te,re=te>>>13,ie=0|a[6],oe=8191&ie,se=ie>>>13,ae=0|a[7],ue=8191&ae,ce=ae>>>13,le=0|a[8],he=8191&le,de=le>>>13,fe=0|a[9],pe=8191&fe,me=fe>>>13;n.negative=e.negative^t.negative,n.length=19;var ge=(c+(r=Math.imul(h,H))|0)+((8191&(i=(i=Math.imul(h,q))+Math.imul(d,H)|0))<<13)|0;c=((o=Math.imul(d,q))+(i>>>13)|0)+(ge>>>26)|0,ge&=67108863,r=Math.imul(p,H),i=(i=Math.imul(p,q))+Math.imul(m,H)|0,o=Math.imul(m,q);var be=(c+(r=r+Math.imul(h,G)|0)|0)+((8191&(i=(i=i+Math.imul(h,z)|0)+Math.imul(d,G)|0))<<13)|0;c=((o=o+Math.imul(d,z)|0)+(i>>>13)|0)+(be>>>26)|0,be&=67108863,r=Math.imul(b,H),i=(i=Math.imul(b,q))+Math.imul(v,H)|0,o=Math.imul(v,q),r=r+Math.imul(p,G)|0,i=(i=i+Math.imul(p,z)|0)+Math.imul(m,G)|0,o=o+Math.imul(m,z)|0;var ve=(c+(r=r+Math.imul(h,K)|0)|0)+((8191&(i=(i=i+Math.imul(h,Y)|0)+Math.imul(d,K)|0))<<13)|0;c=((o=o+Math.imul(d,Y)|0)+(i>>>13)|0)+(ve>>>26)|0,ve&=67108863,r=Math.imul(_,H),i=(i=Math.imul(_,q))+Math.imul(w,H)|0,o=Math.imul(w,q),r=r+Math.imul(b,G)|0,i=(i=i+Math.imul(b,z)|0)+Math.imul(v,G)|0,o=o+Math.imul(v,z)|0,r=r+Math.imul(p,K)|0,i=(i=i+Math.imul(p,Y)|0)+Math.imul(m,K)|0,o=o+Math.imul(m,Y)|0;var ye=(c+(r=r+Math.imul(h,J)|0)|0)+((8191&(i=(i=i+Math.imul(h,Z)|0)+Math.imul(d,J)|0))<<13)|0;c=((o=o+Math.imul(d,Z)|0)+(i>>>13)|0)+(ye>>>26)|0,ye&=67108863,r=Math.imul(S,H),i=(i=Math.imul(S,q))+Math.imul(M,H)|0,o=Math.imul(M,q),r=r+Math.imul(_,G)|0,i=(i=i+Math.imul(_,z)|0)+Math.imul(w,G)|0,o=o+Math.imul(w,z)|0,r=r+Math.imul(b,K)|0,i=(i=i+Math.imul(b,Y)|0)+Math.imul(v,K)|0,o=o+Math.imul(v,Y)|0,r=r+Math.imul(p,J)|0,i=(i=i+Math.imul(p,Z)|0)+Math.imul(m,J)|0,o=o+Math.imul(m,Z)|0;var _e=(c+(r=r+Math.imul(h,X)|0)|0)+((8191&(i=(i=i+Math.imul(h,ee)|0)+Math.imul(d,X)|0))<<13)|0;c=((o=o+Math.imul(d,ee)|0)+(i>>>13)|0)+(_e>>>26)|0,_e&=67108863,r=Math.imul(A,H),i=(i=Math.imul(A,q))+Math.imul(C,H)|0,o=Math.imul(C,q),r=r+Math.imul(S,G)|0,i=(i=i+Math.imul(S,z)|0)+Math.imul(M,G)|0,o=o+Math.imul(M,z)|0,r=r+Math.imul(_,K)|0,i=(i=i+Math.imul(_,Y)|0)+Math.imul(w,K)|0,o=o+Math.imul(w,Y)|0,r=r+Math.imul(b,J)|0,i=(i=i+Math.imul(b,Z)|0)+Math.imul(v,J)|0,o=o+Math.imul(v,Z)|0,r=r+Math.imul(p,X)|0,i=(i=i+Math.imul(p,ee)|0)+Math.imul(m,X)|0,o=o+Math.imul(m,ee)|0;var we=(c+(r=r+Math.imul(h,ne)|0)|0)+((8191&(i=(i=i+Math.imul(h,re)|0)+Math.imul(d,ne)|0))<<13)|0;c=((o=o+Math.imul(d,re)|0)+(i>>>13)|0)+(we>>>26)|0,we&=67108863,r=Math.imul(k,H),i=(i=Math.imul(k,q))+Math.imul(x,H)|0,o=Math.imul(x,q),r=r+Math.imul(A,G)|0,i=(i=i+Math.imul(A,z)|0)+Math.imul(C,G)|0,o=o+Math.imul(C,z)|0,r=r+Math.imul(S,K)|0,i=(i=i+Math.imul(S,Y)|0)+Math.imul(M,K)|0,o=o+Math.imul(M,Y)|0,r=r+Math.imul(_,J)|0,i=(i=i+Math.imul(_,Z)|0)+Math.imul(w,J)|0,o=o+Math.imul(w,Z)|0,r=r+Math.imul(b,X)|0,i=(i=i+Math.imul(b,ee)|0)+Math.imul(v,X)|0,o=o+Math.imul(v,ee)|0,r=r+Math.imul(p,ne)|0,i=(i=i+Math.imul(p,re)|0)+Math.imul(m,ne)|0,o=o+Math.imul(m,re)|0;var Ee=(c+(r=r+Math.imul(h,oe)|0)|0)+((8191&(i=(i=i+Math.imul(h,se)|0)+Math.imul(d,oe)|0))<<13)|0;c=((o=o+Math.imul(d,se)|0)+(i>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,r=Math.imul(I,H),i=(i=Math.imul(I,q))+Math.imul(R,H)|0,o=Math.imul(R,q),r=r+Math.imul(k,G)|0,i=(i=i+Math.imul(k,z)|0)+Math.imul(x,G)|0,o=o+Math.imul(x,z)|0,r=r+Math.imul(A,K)|0,i=(i=i+Math.imul(A,Y)|0)+Math.imul(C,K)|0,o=o+Math.imul(C,Y)|0,r=r+Math.imul(S,J)|0,i=(i=i+Math.imul(S,Z)|0)+Math.imul(M,J)|0,o=o+Math.imul(M,Z)|0,r=r+Math.imul(_,X)|0,i=(i=i+Math.imul(_,ee)|0)+Math.imul(w,X)|0,o=o+Math.imul(w,ee)|0,r=r+Math.imul(b,ne)|0,i=(i=i+Math.imul(b,re)|0)+Math.imul(v,ne)|0,o=o+Math.imul(v,re)|0,r=r+Math.imul(p,oe)|0,i=(i=i+Math.imul(p,se)|0)+Math.imul(m,oe)|0,o=o+Math.imul(m,se)|0;var Se=(c+(r=r+Math.imul(h,ue)|0)|0)+((8191&(i=(i=i+Math.imul(h,ce)|0)+Math.imul(d,ue)|0))<<13)|0;c=((o=o+Math.imul(d,ce)|0)+(i>>>13)|0)+(Se>>>26)|0,Se&=67108863,r=Math.imul(P,H),i=(i=Math.imul(P,q))+Math.imul(D,H)|0,o=Math.imul(D,q),r=r+Math.imul(I,G)|0,i=(i=i+Math.imul(I,z)|0)+Math.imul(R,G)|0,o=o+Math.imul(R,z)|0,r=r+Math.imul(k,K)|0,i=(i=i+Math.imul(k,Y)|0)+Math.imul(x,K)|0,o=o+Math.imul(x,Y)|0,r=r+Math.imul(A,J)|0,i=(i=i+Math.imul(A,Z)|0)+Math.imul(C,J)|0,o=o+Math.imul(C,Z)|0,r=r+Math.imul(S,X)|0,i=(i=i+Math.imul(S,ee)|0)+Math.imul(M,X)|0,o=o+Math.imul(M,ee)|0,r=r+Math.imul(_,ne)|0,i=(i=i+Math.imul(_,re)|0)+Math.imul(w,ne)|0,o=o+Math.imul(w,re)|0,r=r+Math.imul(b,oe)|0,i=(i=i+Math.imul(b,se)|0)+Math.imul(v,oe)|0,o=o+Math.imul(v,se)|0,r=r+Math.imul(p,ue)|0,i=(i=i+Math.imul(p,ce)|0)+Math.imul(m,ue)|0,o=o+Math.imul(m,ce)|0;var Me=(c+(r=r+Math.imul(h,he)|0)|0)+((8191&(i=(i=i+Math.imul(h,de)|0)+Math.imul(d,he)|0))<<13)|0;c=((o=o+Math.imul(d,de)|0)+(i>>>13)|0)+(Me>>>26)|0,Me&=67108863,r=Math.imul(L,H),i=(i=Math.imul(L,q))+Math.imul(F,H)|0,o=Math.imul(F,q),r=r+Math.imul(P,G)|0,i=(i=i+Math.imul(P,z)|0)+Math.imul(D,G)|0,o=o+Math.imul(D,z)|0,r=r+Math.imul(I,K)|0,i=(i=i+Math.imul(I,Y)|0)+Math.imul(R,K)|0,o=o+Math.imul(R,Y)|0,r=r+Math.imul(k,J)|0,i=(i=i+Math.imul(k,Z)|0)+Math.imul(x,J)|0,o=o+Math.imul(x,Z)|0,r=r+Math.imul(A,X)|0,i=(i=i+Math.imul(A,ee)|0)+Math.imul(C,X)|0,o=o+Math.imul(C,ee)|0,r=r+Math.imul(S,ne)|0,i=(i=i+Math.imul(S,re)|0)+Math.imul(M,ne)|0,o=o+Math.imul(M,re)|0,r=r+Math.imul(_,oe)|0,i=(i=i+Math.imul(_,se)|0)+Math.imul(w,oe)|0,o=o+Math.imul(w,se)|0,r=r+Math.imul(b,ue)|0,i=(i=i+Math.imul(b,ce)|0)+Math.imul(v,ue)|0,o=o+Math.imul(v,ce)|0,r=r+Math.imul(p,he)|0,i=(i=i+Math.imul(p,de)|0)+Math.imul(m,he)|0,o=o+Math.imul(m,de)|0;var Oe=(c+(r=r+Math.imul(h,pe)|0)|0)+((8191&(i=(i=i+Math.imul(h,me)|0)+Math.imul(d,pe)|0))<<13)|0;c=((o=o+Math.imul(d,me)|0)+(i>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,r=Math.imul(L,G),i=(i=Math.imul(L,z))+Math.imul(F,G)|0,o=Math.imul(F,z),r=r+Math.imul(P,K)|0,i=(i=i+Math.imul(P,Y)|0)+Math.imul(D,K)|0,o=o+Math.imul(D,Y)|0,r=r+Math.imul(I,J)|0,i=(i=i+Math.imul(I,Z)|0)+Math.imul(R,J)|0,o=o+Math.imul(R,Z)|0,r=r+Math.imul(k,X)|0,i=(i=i+Math.imul(k,ee)|0)+Math.imul(x,X)|0,o=o+Math.imul(x,ee)|0,r=r+Math.imul(A,ne)|0,i=(i=i+Math.imul(A,re)|0)+Math.imul(C,ne)|0,o=o+Math.imul(C,re)|0,r=r+Math.imul(S,oe)|0,i=(i=i+Math.imul(S,se)|0)+Math.imul(M,oe)|0,o=o+Math.imul(M,se)|0,r=r+Math.imul(_,ue)|0,i=(i=i+Math.imul(_,ce)|0)+Math.imul(w,ue)|0,o=o+Math.imul(w,ce)|0,r=r+Math.imul(b,he)|0,i=(i=i+Math.imul(b,de)|0)+Math.imul(v,he)|0,o=o+Math.imul(v,de)|0;var Ae=(c+(r=r+Math.imul(p,pe)|0)|0)+((8191&(i=(i=i+Math.imul(p,me)|0)+Math.imul(m,pe)|0))<<13)|0;c=((o=o+Math.imul(m,me)|0)+(i>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,r=Math.imul(L,K),i=(i=Math.imul(L,Y))+Math.imul(F,K)|0,o=Math.imul(F,Y),r=r+Math.imul(P,J)|0,i=(i=i+Math.imul(P,Z)|0)+Math.imul(D,J)|0,o=o+Math.imul(D,Z)|0,r=r+Math.imul(I,X)|0,i=(i=i+Math.imul(I,ee)|0)+Math.imul(R,X)|0,o=o+Math.imul(R,ee)|0,r=r+Math.imul(k,ne)|0,i=(i=i+Math.imul(k,re)|0)+Math.imul(x,ne)|0,o=o+Math.imul(x,re)|0,r=r+Math.imul(A,oe)|0,i=(i=i+Math.imul(A,se)|0)+Math.imul(C,oe)|0,o=o+Math.imul(C,se)|0,r=r+Math.imul(S,ue)|0,i=(i=i+Math.imul(S,ce)|0)+Math.imul(M,ue)|0,o=o+Math.imul(M,ce)|0,r=r+Math.imul(_,he)|0,i=(i=i+Math.imul(_,de)|0)+Math.imul(w,he)|0,o=o+Math.imul(w,de)|0;var Ce=(c+(r=r+Math.imul(b,pe)|0)|0)+((8191&(i=(i=i+Math.imul(b,me)|0)+Math.imul(v,pe)|0))<<13)|0;c=((o=o+Math.imul(v,me)|0)+(i>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,r=Math.imul(L,J),i=(i=Math.imul(L,Z))+Math.imul(F,J)|0,o=Math.imul(F,Z),r=r+Math.imul(P,X)|0,i=(i=i+Math.imul(P,ee)|0)+Math.imul(D,X)|0,o=o+Math.imul(D,ee)|0,r=r+Math.imul(I,ne)|0,i=(i=i+Math.imul(I,re)|0)+Math.imul(R,ne)|0,o=o+Math.imul(R,re)|0,r=r+Math.imul(k,oe)|0,i=(i=i+Math.imul(k,se)|0)+Math.imul(x,oe)|0,o=o+Math.imul(x,se)|0,r=r+Math.imul(A,ue)|0,i=(i=i+Math.imul(A,ce)|0)+Math.imul(C,ue)|0,o=o+Math.imul(C,ce)|0,r=r+Math.imul(S,he)|0,i=(i=i+Math.imul(S,de)|0)+Math.imul(M,he)|0,o=o+Math.imul(M,de)|0;var Te=(c+(r=r+Math.imul(_,pe)|0)|0)+((8191&(i=(i=i+Math.imul(_,me)|0)+Math.imul(w,pe)|0))<<13)|0;c=((o=o+Math.imul(w,me)|0)+(i>>>13)|0)+(Te>>>26)|0,Te&=67108863,r=Math.imul(L,X),i=(i=Math.imul(L,ee))+Math.imul(F,X)|0,o=Math.imul(F,ee),r=r+Math.imul(P,ne)|0,i=(i=i+Math.imul(P,re)|0)+Math.imul(D,ne)|0,o=o+Math.imul(D,re)|0,r=r+Math.imul(I,oe)|0,i=(i=i+Math.imul(I,se)|0)+Math.imul(R,oe)|0,o=o+Math.imul(R,se)|0,r=r+Math.imul(k,ue)|0,i=(i=i+Math.imul(k,ce)|0)+Math.imul(x,ue)|0,o=o+Math.imul(x,ce)|0,r=r+Math.imul(A,he)|0,i=(i=i+Math.imul(A,de)|0)+Math.imul(C,he)|0,o=o+Math.imul(C,de)|0;var ke=(c+(r=r+Math.imul(S,pe)|0)|0)+((8191&(i=(i=i+Math.imul(S,me)|0)+Math.imul(M,pe)|0))<<13)|0;c=((o=o+Math.imul(M,me)|0)+(i>>>13)|0)+(ke>>>26)|0,ke&=67108863,r=Math.imul(L,ne),i=(i=Math.imul(L,re))+Math.imul(F,ne)|0,o=Math.imul(F,re),r=r+Math.imul(P,oe)|0,i=(i=i+Math.imul(P,se)|0)+Math.imul(D,oe)|0,o=o+Math.imul(D,se)|0,r=r+Math.imul(I,ue)|0,i=(i=i+Math.imul(I,ce)|0)+Math.imul(R,ue)|0,o=o+Math.imul(R,ce)|0,r=r+Math.imul(k,he)|0,i=(i=i+Math.imul(k,de)|0)+Math.imul(x,he)|0,o=o+Math.imul(x,de)|0;var xe=(c+(r=r+Math.imul(A,pe)|0)|0)+((8191&(i=(i=i+Math.imul(A,me)|0)+Math.imul(C,pe)|0))<<13)|0;c=((o=o+Math.imul(C,me)|0)+(i>>>13)|0)+(xe>>>26)|0,xe&=67108863,r=Math.imul(L,oe),i=(i=Math.imul(L,se))+Math.imul(F,oe)|0,o=Math.imul(F,se),r=r+Math.imul(P,ue)|0,i=(i=i+Math.imul(P,ce)|0)+Math.imul(D,ue)|0,o=o+Math.imul(D,ce)|0,r=r+Math.imul(I,he)|0,i=(i=i+Math.imul(I,de)|0)+Math.imul(R,he)|0,o=o+Math.imul(R,de)|0;var je=(c+(r=r+Math.imul(k,pe)|0)|0)+((8191&(i=(i=i+Math.imul(k,me)|0)+Math.imul(x,pe)|0))<<13)|0;c=((o=o+Math.imul(x,me)|0)+(i>>>13)|0)+(je>>>26)|0,je&=67108863,r=Math.imul(L,ue),i=(i=Math.imul(L,ce))+Math.imul(F,ue)|0,o=Math.imul(F,ce),r=r+Math.imul(P,he)|0,i=(i=i+Math.imul(P,de)|0)+Math.imul(D,he)|0,o=o+Math.imul(D,de)|0;var Ie=(c+(r=r+Math.imul(I,pe)|0)|0)+((8191&(i=(i=i+Math.imul(I,me)|0)+Math.imul(R,pe)|0))<<13)|0;c=((o=o+Math.imul(R,me)|0)+(i>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,r=Math.imul(L,he),i=(i=Math.imul(L,de))+Math.imul(F,he)|0,o=Math.imul(F,de);var Re=(c+(r=r+Math.imul(P,pe)|0)|0)+((8191&(i=(i=i+Math.imul(P,me)|0)+Math.imul(D,pe)|0))<<13)|0;c=((o=o+Math.imul(D,me)|0)+(i>>>13)|0)+(Re>>>26)|0,Re&=67108863;var Ne=(c+(r=Math.imul(L,pe))|0)+((8191&(i=(i=Math.imul(L,me))+Math.imul(F,pe)|0))<<13)|0;return c=((o=Math.imul(F,me))+(i>>>13)|0)+(Ne>>>26)|0,Ne&=67108863,u[0]=ge,u[1]=be,u[2]=ve,u[3]=ye,u[4]=_e,u[5]=we,u[6]=Ee,u[7]=Se,u[8]=Me,u[9]=Oe,u[10]=Ae,u[11]=Ce,u[12]=Te,u[13]=ke,u[14]=xe,u[15]=je,u[16]=Ie,u[17]=Re,u[18]=Ne,0!==c&&(u[19]=c,n.length++),n};function m(e,t,n){return(new g).mulp(e,t,n)}function g(e,t){this.x=e,this.y=t}Math.imul||(p=f),o.prototype.mulTo=function(e,t){var n=this.length+e.length;return 10===this.length&&10===e.length?p(this,e,t):n<63?f(this,e,t):n<1024?function(e,t,n){n.negative=t.negative^e.negative,n.length=e.length+t.length;for(var r=0,i=0,o=0;o<n.length-1;o++){var s=i;i=0;for(var a=67108863&r,u=Math.min(o,t.length-1),c=Math.max(0,o-e.length+1);c<=u;c++){var l=o-c,h=(0|e.words[l])*(0|t.words[c]),d=67108863&h;a=67108863&(d=d+a|0),i+=(s=(s=s+(h/67108864|0)|0)+(d>>>26)|0)>>>26,s&=67108863}n.words[o]=a,r=s,s=i}return 0!==r?n.words[o]=r:n.length--,n.strip()}(this,e,t):m(this,e,t)},g.prototype.makeRBT=function(e){for(var t=new Array(e),n=o.prototype._countBits(e)-1,r=0;r<e;r++)t[r]=this.revBin(r,n,e);return t},g.prototype.revBin=function(e,t,n){if(0===e||e===n-1)return e;for(var r=0,i=0;i<t;i++)r|=(1&e)<<t-i-1,e>>=1;return r},g.prototype.permute=function(e,t,n,r,i,o){for(var s=0;s<o;s++)r[s]=t[e[s]],i[s]=n[e[s]]},g.prototype.transform=function(e,t,n,r,i,o){this.permute(o,e,t,n,r,i);for(var s=1;s<i;s<<=1)for(var a=s<<1,u=Math.cos(2*Math.PI/a),c=Math.sin(2*Math.PI/a),l=0;l<i;l+=a)for(var h=u,d=c,f=0;f<s;f++){var p=n[l+f],m=r[l+f],g=n[l+f+s],b=r[l+f+s],v=h*g-d*b;b=h*b+d*g,g=v,n[l+f]=p+g,r[l+f]=m+b,n[l+f+s]=p-g,r[l+f+s]=m-b,f!==a&&(v=u*h-c*d,d=u*d+c*h,h=v)}},g.prototype.guessLen13b=function(e,t){var n=1|Math.max(t,e),r=1&n,i=0;for(n=n/2|0;n;n>>>=1)i++;return 1<<i+1+r},g.prototype.conjugate=function(e,t,n){if(!(n<=1))for(var r=0;r<n/2;r++){var i=e[r];e[r]=e[n-r-1],e[n-r-1]=i,i=t[r],t[r]=-t[n-r-1],t[n-r-1]=-i}},g.prototype.normalize13b=function(e,t){for(var n=0,r=0;r<t/2;r++){var i=8192*Math.round(e[2*r+1]/t)+Math.round(e[2*r]/t)+n;e[r]=67108863&i,n=i<67108864?0:i/67108864|0}return e},g.prototype.convert13b=function(e,t,n,i){for(var o=0,s=0;s<t;s++)o+=0|e[s],n[2*s]=8191&o,o>>>=13,n[2*s+1]=8191&o,o>>>=13;for(s=2*t;s<i;++s)n[s]=0;r(0===o),r(0==(-8192&o))},g.prototype.stub=function(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=0;return t},g.prototype.mulp=function(e,t,n){var r=2*this.guessLen13b(e.length,t.length),i=this.makeRBT(r),o=this.stub(r),s=new Array(r),a=new Array(r),u=new Array(r),c=new Array(r),l=new Array(r),h=new Array(r),d=n.words;d.length=r,this.convert13b(e.words,e.length,s,r),this.convert13b(t.words,t.length,c,r),this.transform(s,o,a,u,r,i),this.transform(c,o,l,h,r,i);for(var f=0;f<r;f++){var p=a[f]*l[f]-u[f]*h[f];u[f]=a[f]*h[f]+u[f]*l[f],a[f]=p}return this.conjugate(a,u,r),this.transform(a,u,d,o,r,i),this.conjugate(d,o,r),this.normalize13b(d,r),n.negative=e.negative^t.negative,n.length=e.length+t.length,n.strip()},o.prototype.mul=function(e){var t=new o(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},o.prototype.mulf=function(e){var t=new o(null);return t.words=new Array(this.length+e.length),m(this,e,t)},o.prototype.imul=function(e){return this.clone().mulTo(e,this)},o.prototype.imuln=function(e){r("number"==typeof e),r(e<67108864);for(var t=0,n=0;n<this.length;n++){var i=(0|this.words[n])*e,o=(67108863&i)+(67108863&t);t>>=26,t+=i/67108864|0,t+=o>>>26,this.words[n]=67108863&o}return 0!==t&&(this.words[n]=t,this.length++),this},o.prototype.muln=function(e){return this.clone().imuln(e)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),n=0;n<t.length;n++){var r=n/26|0,i=n%26;t[n]=(e.words[r]&1<<i)>>>i}return t}(e);if(0===t.length)return new o(1);for(var n=this,r=0;r<t.length&&0===t[r];r++,n=n.sqr());if(++r<t.length)for(var i=n.sqr();r<t.length;r++,i=i.sqr())0!==t[r]&&(n=n.mul(i));return n},o.prototype.iushln=function(e){r("number"==typeof e&&e>=0);var t,n=e%26,i=(e-n)/26,o=67108863>>>26-n<<26-n;if(0!==n){var s=0;for(t=0;t<this.length;t++){var a=this.words[t]&o,u=(0|this.words[t])-a<<n;this.words[t]=u|s,s=a>>>26-n}s&&(this.words[t]=s,this.length++)}if(0!==i){for(t=this.length-1;t>=0;t--)this.words[t+i]=this.words[t];for(t=0;t<i;t++)this.words[t]=0;this.length+=i}return this.strip()},o.prototype.ishln=function(e){return r(0===this.negative),this.iushln(e)},o.prototype.iushrn=function(e,t,n){var i;r("number"==typeof e&&e>=0),i=t?(t-t%26)/26:0;var o=e%26,s=Math.min((e-o)/26,this.length),a=67108863^67108863>>>o<<o,u=n;if(i-=s,i=Math.max(0,i),u){for(var c=0;c<s;c++)u.words[c]=this.words[c];u.length=s}if(0===s);else if(this.length>s)for(this.length-=s,c=0;c<this.length;c++)this.words[c]=this.words[c+s];else this.words[0]=0,this.length=1;var l=0;for(c=this.length-1;c>=0&&(0!==l||c>=i);c--){var h=0|this.words[c];this.words[c]=l<<26-o|h>>>o,l=h&a}return u&&0!==l&&(u.words[u.length++]=l),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(e,t,n){return r(0===this.negative),this.iushrn(e,t,n)},o.prototype.shln=function(e){return this.clone().ishln(e)},o.prototype.ushln=function(e){return this.clone().iushln(e)},o.prototype.shrn=function(e){return this.clone().ishrn(e)},o.prototype.ushrn=function(e){return this.clone().iushrn(e)},o.prototype.testn=function(e){r("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26,i=1<<t;return!(this.length<=n)&&!!(this.words[n]&i)},o.prototype.imaskn=function(e){r("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26;if(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=n)return this;if(0!==t&&n++,this.length=Math.min(n,this.length),0!==t){var i=67108863^67108863>>>t<<t;this.words[this.length-1]&=i}return this.strip()},o.prototype.maskn=function(e){return this.clone().imaskn(e)},o.prototype.iaddn=function(e){return r("number"==typeof e),r(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},o.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},o.prototype.isubn=function(e){if(r("number"==typeof e),r(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this.strip()},o.prototype.addn=function(e){return this.clone().iaddn(e)},o.prototype.subn=function(e){return this.clone().isubn(e)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(e,t,n){var i,o,s=e.length+n;this._expand(s);var a=0;for(i=0;i<e.length;i++){o=(0|this.words[i+n])+a;var u=(0|e.words[i])*t;a=((o-=67108863&u)>>26)-(u/67108864|0),this.words[i+n]=67108863&o}for(;i<this.length-n;i++)a=(o=(0|this.words[i+n])+a)>>26,this.words[i+n]=67108863&o;if(0===a)return this.strip();for(r(-1===a),a=0,i=0;i<this.length;i++)a=(o=-(0|this.words[i])+a)>>26,this.words[i]=67108863&o;return this.negative=1,this.strip()},o.prototype._wordDiv=function(e,t){var n=(this.length,e.length),r=this.clone(),i=e,s=0|i.words[i.length-1];0!==(n=26-this._countBits(s))&&(i=i.ushln(n),r.iushln(n),s=0|i.words[i.length-1]);var a,u=r.length-i.length;if("mod"!==t){(a=new o(null)).length=u+1,a.words=new Array(a.length);for(var c=0;c<a.length;c++)a.words[c]=0}var l=r.clone()._ishlnsubmul(i,1,u);0===l.negative&&(r=l,a&&(a.words[u]=1));for(var h=u-1;h>=0;h--){var d=67108864*(0|r.words[i.length+h])+(0|r.words[i.length+h-1]);for(d=Math.min(d/s|0,67108863),r._ishlnsubmul(i,d,h);0!==r.negative;)d--,r.negative=0,r._ishlnsubmul(i,1,h),r.isZero()||(r.negative^=1);a&&(a.words[h]=d)}return a&&a.strip(),r.strip(),"div"!==t&&0!==n&&r.iushrn(n),{div:a||null,mod:r}},o.prototype.divmod=function(e,t,n){return r(!e.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===e.negative?(a=this.neg().divmod(e,t),"mod"!==t&&(i=a.div.neg()),"div"!==t&&(s=a.mod.neg(),n&&0!==s.negative&&s.iadd(e)),{div:i,mod:s}):0===this.negative&&0!==e.negative?(a=this.divmod(e.neg(),t),"mod"!==t&&(i=a.div.neg()),{div:i,mod:a.mod}):0!=(this.negative&e.negative)?(a=this.neg().divmod(e.neg(),t),"div"!==t&&(s=a.mod.neg(),n&&0!==s.negative&&s.isub(e)),{div:a.div,mod:s}):e.length>this.length||this.cmp(e)<0?{div:new o(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new o(this.modn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new o(this.modn(e.words[0]))}:this._wordDiv(e,t);var i,s,a},o.prototype.div=function(e){return this.divmod(e,"div",!1).div},o.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},o.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},o.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var n=0!==t.div.negative?t.mod.isub(e):t.mod,r=e.ushrn(1),i=e.andln(1),o=n.cmp(r);return o<0||1===i&&0===o?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},o.prototype.modn=function(e){r(e<=67108863);for(var t=(1<<26)%e,n=0,i=this.length-1;i>=0;i--)n=(t*n+(0|this.words[i]))%e;return n},o.prototype.idivn=function(e){r(e<=67108863);for(var t=0,n=this.length-1;n>=0;n--){var i=(0|this.words[n])+67108864*t;this.words[n]=i/e|0,t=i%e}return this.strip()},o.prototype.divn=function(e){return this.clone().idivn(e)},o.prototype.egcd=function(e){r(0===e.negative),r(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i=new o(1),s=new o(0),a=new o(0),u=new o(1),c=0;t.isEven()&&n.isEven();)t.iushrn(1),n.iushrn(1),++c;for(var l=n.clone(),h=t.clone();!t.isZero();){for(var d=0,f=1;0==(t.words[0]&f)&&d<26;++d,f<<=1);if(d>0)for(t.iushrn(d);d-- >0;)(i.isOdd()||s.isOdd())&&(i.iadd(l),s.isub(h)),i.iushrn(1),s.iushrn(1);for(var p=0,m=1;0==(n.words[0]&m)&&p<26;++p,m<<=1);if(p>0)for(n.iushrn(p);p-- >0;)(a.isOdd()||u.isOdd())&&(a.iadd(l),u.isub(h)),a.iushrn(1),u.iushrn(1);t.cmp(n)>=0?(t.isub(n),i.isub(a),s.isub(u)):(n.isub(t),a.isub(i),u.isub(s))}return{a:a,b:u,gcd:n.iushln(c)}},o.prototype._invmp=function(e){r(0===e.negative),r(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i,s=new o(1),a=new o(0),u=n.clone();t.cmpn(1)>0&&n.cmpn(1)>0;){for(var c=0,l=1;0==(t.words[0]&l)&&c<26;++c,l<<=1);if(c>0)for(t.iushrn(c);c-- >0;)s.isOdd()&&s.iadd(u),s.iushrn(1);for(var h=0,d=1;0==(n.words[0]&d)&&h<26;++h,d<<=1);if(h>0)for(n.iushrn(h);h-- >0;)a.isOdd()&&a.iadd(u),a.iushrn(1);t.cmp(n)>=0?(t.isub(n),s.isub(a)):(n.isub(t),a.isub(s))}return(i=0===t.cmpn(1)?s:a).cmpn(0)<0&&i.iadd(e),i},o.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),n=e.clone();t.negative=0,n.negative=0;for(var r=0;t.isEven()&&n.isEven();r++)t.iushrn(1),n.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;n.isEven();)n.iushrn(1);var i=t.cmp(n);if(i<0){var o=t;t=n,n=o}else if(0===i||0===n.cmpn(1))break;t.isub(n)}return n.iushln(r)},o.prototype.invm=function(e){return this.egcd(e).a.umod(e)},o.prototype.isEven=function(){return 0==(1&this.words[0])},o.prototype.isOdd=function(){return 1==(1&this.words[0])},o.prototype.andln=function(e){return this.words[0]&e},o.prototype.bincn=function(e){r("number"==typeof e);var t=e%26,n=(e-t)/26,i=1<<t;if(this.length<=n)return this._expand(n+1),this.words[n]|=i,this;for(var o=i,s=n;0!==o&&s<this.length;s++){var a=0|this.words[s];o=(a+=o)>>>26,a&=67108863,this.words[s]=a}return 0!==o&&(this.words[s]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(e){var t,n=e<0;if(0!==this.negative&&!n)return-1;if(0===this.negative&&n)return 1;if(this.strip(),this.length>1)t=1;else{n&&(e=-e),r(e<=67108863,"Number is too big");var i=0|this.words[0];t=i===e?0:i<e?-1:1}return 0!==this.negative?0|-t:t},o.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},o.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,n=this.length-1;n>=0;n--){var r=0|this.words[n],i=0|e.words[n];if(r!==i){r<i?t=-1:r>i&&(t=1);break}}return t},o.prototype.gtn=function(e){return 1===this.cmpn(e)},o.prototype.gt=function(e){return 1===this.cmp(e)},o.prototype.gten=function(e){return this.cmpn(e)>=0},o.prototype.gte=function(e){return this.cmp(e)>=0},o.prototype.ltn=function(e){return-1===this.cmpn(e)},o.prototype.lt=function(e){return-1===this.cmp(e)},o.prototype.lten=function(e){return this.cmpn(e)<=0},o.prototype.lte=function(e){return this.cmp(e)<=0},o.prototype.eqn=function(e){return 0===this.cmpn(e)},o.prototype.eq=function(e){return 0===this.cmp(e)},o.red=function(e){return new S(e)},o.prototype.toRed=function(e){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},o.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(e){return this.red=e,this},o.prototype.forceRed=function(e){return r(!this.red,"Already a number in reduction context"),this._forceRed(e)},o.prototype.redAdd=function(e){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},o.prototype.redIAdd=function(e){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},o.prototype.redSub=function(e){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},o.prototype.redISub=function(e){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},o.prototype.redShl=function(e){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},o.prototype.redMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},o.prototype.redIMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},o.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(e){return r(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var b={k256:null,p224:null,p192:null,p25519:null};function v(e,t){this.name=e,this.p=new o(t,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function y(){v.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function _(){v.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function w(){v.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function E(){v.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function S(e){if("string"==typeof e){var t=o._prime(e);this.m=t.p,this.prime=t}else r(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function M(e){S.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}v.prototype._tmp=function(){var e=new o(null);return e.words=new Array(Math.ceil(this.n/13)),e},v.prototype.ireduce=function(e){var t,n=e;do{this.split(n,this.tmp),t=(n=(n=this.imulK(n)).iadd(this.tmp)).bitLength()}while(t>this.n);var r=t<this.n?-1:n.ucmp(this.p);return 0===r?(n.words[0]=0,n.length=1):r>0?n.isub(this.p):void 0!==n.strip?n.strip():n._strip(),n},v.prototype.split=function(e,t){e.iushrn(this.n,0,t)},v.prototype.imulK=function(e){return e.imul(this.k)},i(y,v),y.prototype.split=function(e,t){for(var n=Math.min(e.length,9),r=0;r<n;r++)t.words[r]=e.words[r];if(t.length=n,e.length<=9)return e.words[0]=0,void(e.length=1);var i=e.words[9];for(t.words[t.length++]=4194303&i,r=10;r<e.length;r++){var o=0|e.words[r];e.words[r-10]=(4194303&o)<<4|i>>>22,i=o}i>>>=22,e.words[r-10]=i,0===i&&e.length>10?e.length-=10:e.length-=9},y.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,n=0;n<e.length;n++){var r=0|e.words[n];t+=977*r,e.words[n]=67108863&t,t=64*r+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},i(_,v),i(w,v),i(E,v),E.prototype.imulK=function(e){for(var t=0,n=0;n<e.length;n++){var r=19*(0|e.words[n])+t,i=67108863&r;r>>>=26,e.words[n]=i,t=r}return 0!==t&&(e.words[e.length++]=t),e},o._prime=function(e){if(b[e])return b[e];var t;if("k256"===e)t=new y;else if("p224"===e)t=new _;else if("p192"===e)t=new w;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new E}return b[e]=t,t},S.prototype._verify1=function(e){r(0===e.negative,"red works only with positives"),r(e.red,"red works only with red numbers")},S.prototype._verify2=function(e,t){r(0==(e.negative|t.negative),"red works only with positives"),r(e.red&&e.red===t.red,"red works only with red numbers")},S.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):e.umod(this.m)._forceRed(this)},S.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},S.prototype.add=function(e,t){this._verify2(e,t);var n=e.add(t);return n.cmp(this.m)>=0&&n.isub(this.m),n._forceRed(this)},S.prototype.iadd=function(e,t){this._verify2(e,t);var n=e.iadd(t);return n.cmp(this.m)>=0&&n.isub(this.m),n},S.prototype.sub=function(e,t){this._verify2(e,t);var n=e.sub(t);return n.cmpn(0)<0&&n.iadd(this.m),n._forceRed(this)},S.prototype.isub=function(e,t){this._verify2(e,t);var n=e.isub(t);return n.cmpn(0)<0&&n.iadd(this.m),n},S.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},S.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},S.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},S.prototype.isqr=function(e){return this.imul(e,e.clone())},S.prototype.sqr=function(e){return this.mul(e,e)},S.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(r(t%2==1),3===t){var n=this.m.add(new o(1)).iushrn(2);return this.pow(e,n)}for(var i=this.m.subn(1),s=0;!i.isZero()&&0===i.andln(1);)s++,i.iushrn(1);r(!i.isZero());var a=new o(1).toRed(this),u=a.redNeg(),c=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new o(2*l*l).toRed(this);0!==this.pow(l,c).cmp(u);)l.redIAdd(u);for(var h=this.pow(l,i),d=this.pow(e,i.addn(1).iushrn(1)),f=this.pow(e,i),p=s;0!==f.cmp(a);){for(var m=f,g=0;0!==m.cmp(a);g++)m=m.redSqr();r(g<p);var b=this.pow(h,new o(1).iushln(p-g-1));d=d.redMul(b),h=b.redSqr(),f=f.redMul(h),p=g}return d},S.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},S.prototype.pow=function(e,t){if(t.isZero())return new o(1).toRed(this);if(0===t.cmpn(1))return e.clone();var n=new Array(16);n[0]=new o(1).toRed(this),n[1]=e;for(var r=2;r<n.length;r++)n[r]=this.mul(n[r-1],e);var i=n[0],s=0,a=0,u=t.bitLength()%26;for(0===u&&(u=26),r=t.length-1;r>=0;r--){for(var c=t.words[r],l=u-1;l>=0;l--){var h=c>>l&1;i!==n[0]&&(i=this.sqr(i)),0!==h||0!==s?(s<<=1,s|=h,(4===++a||0===r&&0===l)&&(i=this.mul(i,n[s]),a=0,s=0)):a=0}u=26}return i},S.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},S.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},o.mont=function(e){return new M(e)},i(M,S),M.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},M.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},M.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var n=e.imul(t),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=n.isub(r).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},M.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new o(0)._forceRed(this);var n=e.mul(t),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=n.isub(r).iushrn(this.shift),s=i;return i.cmp(this.m)>=0?s=i.isub(this.m):i.cmpn(0)<0&&(s=i.iadd(this.m)),s._forceRed(this)},M.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(e,this)}).call(this,n(34)(e))},function(e,t,n){"use strict";e.exports=n(179)},function(e,t,n){"use strict";var r=n(181),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};function u(e){return r.isMemo(e)?s:a[e.$$typeof]||i}a[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a[r.Memo]=s;var c=Object.defineProperty,l=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!=typeof n){if(p){var i=f(n);i&&i!==p&&e(t,i,r)}var s=l(n);h&&(s=s.concat(h(n)));for(var a=u(t),m=u(n),g=0;g<s.length;++g){var b=s[g];if(!(o[b]||r&&r[b]||m&&m[b]||a&&a[b])){var v=d(n,b);try{c(t,b,v)}catch(e){}}}}return t}},function(e,t,n){"use strict";n.d(t,"b",(function(){return u}));var r,i=n(40),o=n(31),s=n(4),a=n(3),u={algoliaAppId:"Y9QTSTT257",loginUserId:"",chatterBoxSessionToken:"",chatterBoxAppId:"",users:{},chatHistoryChannels:null,messages:[],loadingMessages:!1,unreadChannelCount:0,unreadMessageCount:0,hasMoreChatHistoryChannels:!0,hasMoreMessages:!0,chatContext:{chatHistoryWindow:{isMaximized:!0},activeChatWindows:[]},isChatContextRestored:!1,errorType:"NO_ERROR",shouldClearDraft:!1};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.a.OPEN_CHAT_WINDOW:var n=!(r=Object.assign({},e.chatContext)).activeChatWindows[0],c=n||r.activeChatWindows[0].chatUsers[0]!==t.payload;return c?(r.activeChatWindows[0]={chatUsers:[t.payload],isMaximized:!0,unreadMessageCount:0},Object(s.a)(Object(s.a)({},e),{},{chatContext:r,messages:[],shouldClearDraft:!0})):Object(s.a)({},e);case a.a.CLOSE_CHAT_WINDOW:var l=(r=Object.assign({},e.chatContext)).activeChatWindows.filter((function(e){return e.chatUsers[0]!==t.payload}));return r.activeChatWindows=l,Object(s.a)(Object(s.a)({},e),{},{chatContext:r,messages:[]});case a.a.SET_CHAT_CONTEXT:return Object(s.a)(Object(s.a)({},e),{},{chatContext:t.payload,isChatContextRestored:!0});case a.a.SET_CHAT_CONTEXT_RESTORED:return Object(s.a)(Object(s.a)({},e),{},{isChatContextRestored:t.payload});case a.a.SET_CHAT_HISTORY_WINDOW_IS_MAXIMIZED:var h=Object.assign({},e.chatContext);return h.chatHistoryWindow.isMaximized=t.payload,Object(s.a)(Object(s.a)({},e),{},{chatContext:h});case a.a.ADD_USERS:return Object(s.a)(Object(s.a)({},e),{},{users:Object(s.a)(Object(s.a)({},e.users),t.payload)});case a.a.SET_CHATTERBOX_SESSION_TOKEN:return Object(s.a)(Object(s.a)({},e),{},{chatterBoxSessionToken:t.payload.sessionToken,chatterBoxAppId:t.payload.appId});case a.a.NEW_MESSAGE:return Object(s.a)(Object(s.a)({},e),{},{messages:[].concat(Object(o.a)(e.messages),[{id:t.payload.id,userId:t.payload.userId,message:t.payload.message,timestamp:t.payload.timestamp}])});case a.a.LOAD_INITIAL_MESSAGES:return Object(s.a)(Object(s.a)({},e),{},{messages:Object(o.a)(t.payload),loadingMessages:!1});case a.a.LOAD_PREVIOUS_MESSAGES:return Object(s.a)(Object(s.a)({},e),{},{messages:[].concat(Object(o.a)(t.payload),Object(o.a)(e.messages)),loadingMessages:!1});case a.a.START_LOAD_MESSAGES:return Object(s.a)(Object(s.a)({},e),{},{loadingMessages:!0});case a.a.SET_LOGIN_USER_ID:return Object(s.a)(Object(s.a)({},e),{},{loginUserId:t.payload});case a.a.LOAD_CHAT_HISTORY_CHANNELS:var d={};return t.payload.forEach((function(e){d[e.channelUrl]={lastMessage:e.lastMessage,lastMessageSentBy:e.lastMessageSentBy,userId:e.userId,timeStamp:e.timeStamp,hasUnreadMessages:e.hasUnreadMessages}})),Object(s.a)(Object(s.a)({},e),{},{chatHistoryChannels:Object(s.a)({},d)});case a.a.LOAD_PREVIOUS_CHAT_HISTORY_CHANNELS:var f={};return t.payload.forEach((function(e){f[e.channelUrl]={lastMessage:e.lastMessage,lastMessageSentBy:e.lastMessageSentBy,userId:e.userId,timeStamp:e.timeStamp,hasUnreadMessages:e.hasUnreadMessages}})),Object(s.a)(Object(s.a)({},e),{},{chatHistoryChannels:Object(s.a)(Object(s.a)({},e.chatHistoryChannels),f)});case a.a.SET_USER_PROFILE_IMAGE:return Object(s.a)(Object(s.a)({},e),{},{users:Object(s.a)(Object(s.a)({},e.users),{},Object(i.a)({},t.payload.userId,Object(s.a)(Object(s.a)({},e.users[t.payload.userId]),{},{profileUrl:t.payload.profileUrl})))});case a.a.SET_USER_CONNECTION_STATUS:return Object(s.a)(Object(s.a)({},e),{},{users:Object(s.a)(Object(s.a)({},e.users),{},Object(i.a)({},t.payload.userId,Object(s.a)(Object(s.a)({},e.users[t.payload.userId]),{},{isOnline:t.payload.isOnline})))});case a.a.UNREAD_CHANNEL_COUNT:return Object(s.a)(Object(s.a)({},e),{},{unreadChannelCount:t.payload});case a.a.UNREAD_MESSAGE_COUNT:return Object(s.a)(Object(s.a)({},e),{},{unreadMessageCount:t.payload});case a.a.CHAT_WINDOW_VIEW:return(r=Object.assign({},e.chatContext)).activeChatWindows[0].isMaximized=t.payload,Object(s.a)(Object(s.a)({},e),{},{chatContext:r});case a.a.ACTIVE_USER_UNREAD_MESSAGE_COUNT:return(r=Object.assign({},e.chatContext)).activeChatWindows[0].unreadMessageCount=t.payload,Object(s.a)(Object(s.a)({},e),{},{chatContext:r});case a.a.CHAT_ERROR:return Object(s.a)(Object(s.a)({},e),{},{errorType:t.payload});case a.a.HAS_MORE_CHAT_HISTORY_CHANNELS:return Object(s.a)(Object(s.a)({},e),{},{hasMoreChatHistoryChannels:t.payload});case a.a.HAS_MORE_MESSAGES:return Object(s.a)(Object(s.a)({},e),{},{hasMoreMessages:t.payload});case a.a.CLEAR_DRAFT:return Object(s.a)(Object(s.a)({},e),{},{shouldClearDraft:t.payload});default:return e}}},function(e,t,n){"use strict";(function(e,r){var i,o=n(165);i="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:r;var s=Object(o.a)(i);t.a=s}).call(this,n(19),n(184)(e))},function(e,t,n){(function(e){var r=void 0!==e&&e||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function o(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new o(i.call(setTimeout,r,arguments),clearTimeout)},t.setInterval=function(){return new o(i.call(setInterval,r,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(r,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},n(178),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n(19))},function(e,t,n){var r=n(70);e.exports=function(e,t){t=t||{};var n=r.decode(e,t);if(!n)return null;var i=n.payload;if("string"==typeof i)try{var o=JSON.parse(i);null!==o&&"object"==typeof o&&(i=o)}catch(e){}return!0===t.complete?{header:n.header,payload:i,signature:n.signature}:i}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){(function(t){var r=n(8).Buffer,i=n(57);function o(e){if(this.buffer=null,this.writable=!0,this.readable=!0,!e)return this.buffer=r.alloc(0),this;if("function"==typeof e.pipe)return this.buffer=r.alloc(0),e.pipe(this),this;if(e.length||"object"==typeof e)return this.buffer=e,this.writable=!1,t.nextTick(function(){this.emit("end",e),this.readable=!1,this.emit("close")}.bind(this)),this;throw new TypeError("Unexpected data type ("+typeof e+")")}n(59).inherits(o,i),o.prototype.write=function(e){this.buffer=r.concat([this.buffer,r.from(e)]),this.emit("data",e)},o.prototype.end=function(e){e&&this.write(e),this.emit("end",e),this.emit("close"),this.writable=!1,this.readable=!1},e.exports=o}).call(this,n(16))},function(e,t,n){"use strict";(function(t,r){var i=n(58);e.exports=y;var o,s=n(100);y.ReadableState=v;n(36).EventEmitter;var a=function(e,t){return e.listeners(t).length},u=n(103),c=n(72).Buffer,l=t.Uint8Array||function(){};var h=Object.create(n(50));h.inherits=n(7);var d=n(190),f=void 0;f=d&&d.debuglog?d.debuglog("stream"):function(){};var p,m=n(191),g=n(104);h.inherits(y,u);var b=["error","close","destroy","pause","resume"];function v(e,t){e=e||{};var r=t instanceof(o=o||n(37));this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var i=e.highWaterMark,s=e.readableHighWaterMark,a=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r&&(s||0===s)?s:a,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new m,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(p||(p=n(38).StringDecoder),this.decoder=new p(e.encoding),this.encoding=e.encoding)}function y(e){if(o=o||n(37),!(this instanceof y))return new y(e);this._readableState=new v(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),u.call(this)}function _(e,t,n,r,i){var o,s=e._readableState;null===t?(s.reading=!1,function(e,t){if(t.ended)return;if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,S(e)}(e,s)):(i||(o=function(e,t){var n;r=t,c.isBuffer(r)||r instanceof l||"string"==typeof t||void 0===t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk"));var r;return n}(s,t)),o?e.emit("error",o):s.objectMode||t&&t.length>0?("string"==typeof t||s.objectMode||Object.getPrototypeOf(t)===c.prototype||(t=function(e){return c.from(e)}(t)),r?s.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):w(e,s,t,!0):s.ended?e.emit("error",new Error("stream.push() after EOF")):(s.reading=!1,s.decoder&&!n?(t=s.decoder.write(t),s.objectMode||0!==t.length?w(e,s,t,!1):O(e,s)):w(e,s,t,!1))):r||(s.reading=!1));return function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(s)}function w(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&S(e)),O(e,t)}Object.defineProperty(y.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),y.prototype.destroy=g.destroy,y.prototype._undestroy=g.undestroy,y.prototype._destroy=function(e,t){this.push(null),t(e)},y.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=c.from(e,t),t=""),n=!0),_(this,e,t,!1,n)},y.prototype.unshift=function(e){return _(this,e,null,!0,!1)},y.prototype.isPaused=function(){return!1===this._readableState.flowing},y.prototype.setEncoding=function(e){return p||(p=n(38).StringDecoder),this._readableState.decoder=new p(e),this._readableState.encoding=e,this};function E(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=8388608?e=8388608:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function S(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(f("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?i.nextTick(M,e):M(e))}function M(e){f("emit readable"),e.emit("readable"),k(e)}function O(e,t){t.readingMore||(t.readingMore=!0,i.nextTick(A,e,t))}function A(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(f("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function C(e){f("readable nexttick read 0"),e.read(0)}function T(e,t){t.reading||(f("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),k(e),t.flowing&&!t.reading&&e.read(0)}function k(e){var t=e._readableState;for(f("flow",t.flowing);t.flowing&&null!==e.read(););}function x(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):n=function(e,t,n){var r;e<t.head.data.length?(r=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):r=e===t.head.data.length?t.shift():n?function(e,t){var n=t.head,r=1,i=n.data;e-=i.length;for(;n=n.next;){var o=n.data,s=e>o.length?o.length:e;if(s===o.length?i+=o:i+=o.slice(0,e),0===(e-=s)){s===o.length?(++r,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=o.slice(s));break}++r}return t.length-=r,i}(e,t):function(e,t){var n=c.allocUnsafe(e),r=t.head,i=1;r.data.copy(n),e-=r.data.length;for(;r=r.next;){var o=r.data,s=e>o.length?o.length:e;if(o.copy(n,n.length-e,0,s),0===(e-=s)){s===o.length?(++i,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=o.slice(s));break}++i}return t.length-=i,n}(e,t);return r}(e,t.buffer,t.decoder),n);var n}function j(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,i.nextTick(I,t,e))}function I(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function R(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}y.prototype.read=function(e){f("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return f("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?j(this):S(this),null;if(0===(e=E(e,t))&&t.ended)return 0===t.length&&j(this),null;var r,i=t.needReadable;return f("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&f("length less than watermark",i=!0),t.ended||t.reading?f("reading or ended",i=!1):i&&(f("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=E(n,t))),null===(r=e>0?x(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&j(this)),null!==r&&this.emit("data",r),r},y.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},y.prototype.pipe=function(e,t){var n=this,o=this._readableState;switch(o.pipesCount){case 0:o.pipes=e;break;case 1:o.pipes=[o.pipes,e];break;default:o.pipes.push(e)}o.pipesCount+=1,f("pipe count=%d opts=%j",o.pipesCount,t);var u=(!t||!1!==t.end)&&e!==r.stdout&&e!==r.stderr?l:y;function c(t,r){f("onunpipe"),t===n&&r&&!1===r.hasUnpiped&&(r.hasUnpiped=!0,f("cleanup"),e.removeListener("close",b),e.removeListener("finish",v),e.removeListener("drain",h),e.removeListener("error",g),e.removeListener("unpipe",c),n.removeListener("end",l),n.removeListener("end",y),n.removeListener("data",m),d=!0,!o.awaitDrain||e._writableState&&!e._writableState.needDrain||h())}function l(){f("onend"),e.end()}o.endEmitted?i.nextTick(u):n.once("end",u),e.on("unpipe",c);var h=function(e){return function(){var t=e._readableState;f("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&a(e,"data")&&(t.flowing=!0,k(e))}}(n);e.on("drain",h);var d=!1;var p=!1;function m(t){f("ondata"),p=!1,!1!==e.write(t)||p||((1===o.pipesCount&&o.pipes===e||o.pipesCount>1&&-1!==R(o.pipes,e))&&!d&&(f("false write response, pause",n._readableState.awaitDrain),n._readableState.awaitDrain++,p=!0),n.pause())}function g(t){f("onerror",t),y(),e.removeListener("error",g),0===a(e,"error")&&e.emit("error",t)}function b(){e.removeListener("finish",v),y()}function v(){f("onfinish"),e.removeListener("close",b),y()}function y(){f("unpipe"),n.unpipe(e)}return n.on("data",m),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?s(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(e,"error",g),e.once("close",b),e.once("finish",v),e.emit("pipe",n),o.flowing||(f("pipe resume"),n.resume()),e},y.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n)),this;if(!e){var r=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)r[o].emit("unpipe",this,n);return this}var s=R(t.pipes,e);return-1===s||(t.pipes.splice(s,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n)),this},y.prototype.on=function(e,t){var n=u.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&S(this):i.nextTick(C,this))}return n},y.prototype.addListener=y.prototype.on,y.prototype.resume=function(){var e=this._readableState;return e.flowing||(f("resume"),e.flowing=!0,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,i.nextTick(T,e,t))}(this,e)),this},y.prototype.pause=function(){return f("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(f("pause"),this._readableState.flowing=!1,this.emit("pause")),this},y.prototype.wrap=function(e){var t=this,n=this._readableState,r=!1;for(var i in e.on("end",(function(){if(f("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(i){(f("wrapped data"),n.decoder&&(i=n.decoder.write(i)),n.objectMode&&null==i)||(n.objectMode||i&&i.length)&&(t.push(i)||(r=!0,e.pause()))})),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var o=0;o<b.length;o++)e.on(b[o],this.emit.bind(this,b[o]));return this._read=function(t){f("wrapped _read",t),r&&(r=!1,e.resume())},this},Object.defineProperty(y.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),y._fromList=x}).call(this,n(19),n(16))},function(e,t,n){e.exports=n(36).EventEmitter},function(e,t,n){"use strict";var r=n(58);function i(e,t){e.emit("error",t)}e.exports={destroy:function(e,t){var n=this,o=this._readableState&&this._readableState.destroyed,s=this._writableState&&this._writableState.destroyed;return o||s?(t?t(e):!e||this._writableState&&this._writableState.errorEmitted||r.nextTick(i,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!t&&e?(r.nextTick(i,n,e),n._writableState&&(n._writableState.errorEmitted=!0)):t&&t(e)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(e,t,n){"use strict";e.exports=s;var r=n(37),i=Object.create(n(50));function o(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(!r)return this.emit("error",new Error("write callback called multiple times"));n.writechunk=null,n.writecb=null,null!=t&&this.push(t),r(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function s(e){if(!(this instanceof s))return new s(e);r.call(this,e),this._transformState={afterTransform:o.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",a)}function a(){var e=this;"function"==typeof this._flush?this._flush((function(t,n){u(e,t,n)})):u(this,null,null)}function u(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}i.inherits=n(7),i.inherits(s,r),s.prototype.push=function(e,t){return this._transformState.needTransform=!1,r.prototype.push.call(this,e,t)},s.prototype._transform=function(e,t,n){throw new Error("_transform() is not implemented")},s.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},s.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},s.prototype._destroy=function(e,t){var n=this;r.prototype._destroy.call(this,e,(function(e){t(e),n.emit("close")}))}},function(e,t,n){var r=n(201),i=n(8).Buffer,o=n(202),s=n(289),a=n(59),u="secret must be a string or buffer",c="key must be a string or a buffer",l="function"==typeof o.createPublicKey;function h(e){if(!i.isBuffer(e)&&"string"!=typeof e){if(!l)throw m(c);if("object"!=typeof e)throw m(c);if("string"!=typeof e.type)throw m(c);if("string"!=typeof e.asymmetricKeyType)throw m(c);if("function"!=typeof e.export)throw m(c)}}function d(e){if(!i.isBuffer(e)&&"string"!=typeof e&&"object"!=typeof e)throw m("key must be a string, a buffer or an object")}function f(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function p(e){var t=4-(e=e.toString()).length%4;if(4!==t)for(var n=0;n<t;++n)e+="=";return e.replace(/\-/g,"+").replace(/_/g,"/")}function m(e){var t=[].slice.call(arguments,1),n=a.format.bind(a,e).apply(null,t);return new TypeError(n)}function g(e){var t;return t=e,i.isBuffer(t)||"string"==typeof t||(e=JSON.stringify(e)),e}function b(e){return function(t,n){!function(e){if(!i.isBuffer(e)){if("string"==typeof e)return e;if(!l)throw m(u);if("object"!=typeof e)throw m(u);if("secret"!==e.type)throw m(u);if("function"!=typeof e.export)throw m(u)}}(n),t=g(t);var r=o.createHmac("sha"+e,n);return f((r.update(t),r.digest("base64")))}}function v(e){return function(t,n,o){var s=b(e)(t,o);return r(i.from(n),i.from(s))}}function y(e){return function(t,n){d(n),t=g(t);var r=o.createSign("RSA-SHA"+e);return f((r.update(t),r.sign(n,"base64")))}}function _(e){return function(t,n,r){h(r),t=g(t),n=p(n);var i=o.createVerify("RSA-SHA"+e);return i.update(t),i.verify(r,n,"base64")}}function w(e){return function(t,n){d(n),t=g(t);var r=o.createSign("RSA-SHA"+e);return f((r.update(t),r.sign({key:n,padding:o.constants.RSA_PKCS1_PSS_PADDING,saltLength:o.constants.RSA_PSS_SALTLEN_DIGEST},"base64")))}}function E(e){return function(t,n,r){h(r),t=g(t),n=p(n);var i=o.createVerify("RSA-SHA"+e);return i.update(t),i.verify({key:r,padding:o.constants.RSA_PKCS1_PSS_PADDING,saltLength:o.constants.RSA_PSS_SALTLEN_DIGEST},n,"base64")}}function S(e){var t=y(e);return function(){var n=t.apply(null,arguments);return n=s.derToJose(n,"ES"+e)}}function M(e){var t=_(e);return function(n,r,i){return r=s.joseToDer(r,"ES"+e).toString("base64"),t(n,r,i)}}function O(){return function(){return""}}function A(){return function(e,t){return""===t}}l&&(c+=" or a KeyObject",u+="or a KeyObject"),e.exports=function(e){var t={hs:b,rs:y,ps:w,es:S,none:O},n={hs:v,rs:_,ps:E,es:M,none:A},r=e.match(/^(RS|PS|ES|HS)(256|384|512)$|^(none)$/i);if(!r)throw m('"%s" is not a valid algorithm.\n  Supported algorithms are:\n  "HS256", "HS384", "HS512", "RS256", "RS384", "RS512", "PS256", "PS384", "PS512", "ES256", "ES384", "ES512" and "none".',e);var i=(r[1]||r[3]).toLowerCase(),o=r[2];return{sign:t[i](o),verify:n[i](o)}}},function(e,t,n){"use strict";var r=n(8).Buffer,i=n(203).Transform;function o(e){i.call(this),this._block=r.allocUnsafe(e),this._blockSize=e,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}n(7)(o,i),o.prototype._transform=function(e,t,n){var r=null;try{this.update(e,t)}catch(e){r=e}n(r)},o.prototype._flush=function(e){var t=null;try{this.push(this.digest())}catch(e){t=e}e(t)},o.prototype.update=function(e,t){if(function(e,t){if(!r.isBuffer(e)&&"string"!=typeof e)throw new TypeError(t+" must be a string or a buffer")}(e,"Data"),this._finalized)throw new Error("Digest already called");r.isBuffer(e)||(e=r.from(e,t));for(var n=this._block,i=0;this._blockOffset+e.length-i>=this._blockSize;){for(var o=this._blockOffset;o<this._blockSize;)n[o++]=e[i++];this._update(),this._blockOffset=0}for(;i<e.length;)n[this._blockOffset++]=e[i++];for(var s=0,a=8*e.length;a>0;++s)this._length[s]+=a,(a=this._length[s]/4294967296|0)>0&&(this._length[s]-=4294967296*a);return this},o.prototype._update=function(){throw new Error("_update is not implemented")},o.prototype.digest=function(e){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var t=this._digest();void 0!==e&&(t=t.toString(e)),this._block.fill(0),this._blockOffset=0;for(var n=0;n<4;++n)this._length[n]=0;return t},o.prototype._digest=function(){throw new Error("_digest is not implemented")},e.exports=o},function(e,t,n){"use strict";(function(t,r){var i;e.exports=O,O.ReadableState=M;n(36).EventEmitter;var o=function(e,t){return e.listeners(t).length},s=n(109),a=n(17).Buffer,u=t.Uint8Array||function(){};var c,l=n(204);c=l&&l.debuglog?l.debuglog("stream"):function(){};var h,d,f,p=n(205),m=n(110),g=n(111).getHighWaterMark,b=n(44).codes,v=b.ERR_INVALID_ARG_TYPE,y=b.ERR_STREAM_PUSH_AFTER_EOF,_=b.ERR_METHOD_NOT_IMPLEMENTED,w=b.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;n(7)(O,s);var E=m.errorOrDestroy,S=["error","close","destroy","pause","resume"];function M(e,t,r){i=i||n(45),e=e||{},"boolean"!=typeof r&&(r=t instanceof i),this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=g(this,e,"readableHighWaterMark",r),this.buffer=new p,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(h||(h=n(38).StringDecoder),this.decoder=new h(e.encoding),this.encoding=e.encoding)}function O(e){if(i=i||n(45),!(this instanceof O))return new O(e);var t=this instanceof i;this._readableState=new M(e,this,t),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),s.call(this)}function A(e,t,n,r,i){c("readableAddChunk",t);var o,s=e._readableState;if(null===t)s.reading=!1,function(e,t){if(c("onEofChunk"),t.ended)return;if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,t.sync?k(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,x(e)))}(e,s);else if(i||(o=function(e,t){var n;r=t,a.isBuffer(r)||r instanceof u||"string"==typeof t||void 0===t||e.objectMode||(n=new v("chunk",["string","Buffer","Uint8Array"],t));var r;return n}(s,t)),o)E(e,o);else if(s.objectMode||t&&t.length>0)if("string"==typeof t||s.objectMode||Object.getPrototypeOf(t)===a.prototype||(t=function(e){return a.from(e)}(t)),r)s.endEmitted?E(e,new w):C(e,s,t,!0);else if(s.ended)E(e,new y);else{if(s.destroyed)return!1;s.reading=!1,s.decoder&&!n?(t=s.decoder.write(t),s.objectMode||0!==t.length?C(e,s,t,!1):j(e,s)):C(e,s,t,!1)}else r||(s.reading=!1,j(e,s));return!s.ended&&(s.length<s.highWaterMark||0===s.length)}function C(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",n)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&k(e)),j(e,t)}Object.defineProperty(O.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),O.prototype.destroy=m.destroy,O.prototype._undestroy=m.undestroy,O.prototype._destroy=function(e,t){t(e)},O.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=a.from(e,t),t=""),n=!0),A(this,e,t,!1,n)},O.prototype.unshift=function(e){return A(this,e,null,!0,!1)},O.prototype.isPaused=function(){return!1===this._readableState.flowing},O.prototype.setEncoding=function(e){h||(h=n(38).StringDecoder);var t=new h(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,i="";null!==r;)i+=t.write(r.data),r=r.next;return this._readableState.buffer.clear(),""!==i&&this._readableState.buffer.push(i),this._readableState.length=i.length,this};function T(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=1073741824?e=1073741824:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function k(e){var t=e._readableState;c("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(c("emitReadable",t.flowing),t.emittedReadable=!0,r.nextTick(x,e))}function x(e){var t=e._readableState;c("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,D(e)}function j(e,t){t.readingMore||(t.readingMore=!0,r.nextTick(I,e,t))}function I(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var n=t.length;if(c("maybeReadMore read 0"),e.read(0),n===t.length)break}t.readingMore=!1}function R(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function N(e){c("readable nexttick read 0"),e.read(0)}function P(e,t){c("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),D(e),t.flowing&&!t.reading&&e.read(0)}function D(e){var t=e._readableState;for(c("flow",t.flowing);t.flowing&&null!==e.read(););}function U(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):n=t.buffer.consume(e,t.decoder),n);var n}function L(e){var t=e._readableState;c("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,r.nextTick(F,t,e))}function F(e,t){if(c("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var n=t._writableState;(!n||n.autoDestroy&&n.finished)&&t.destroy()}}function B(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}O.prototype.read=function(e){c("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return c("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?L(this):k(this),null;if(0===(e=T(e,t))&&t.ended)return 0===t.length&&L(this),null;var r,i=t.needReadable;return c("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&c("length less than watermark",i=!0),t.ended||t.reading?c("reading or ended",i=!1):i&&(c("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=T(n,t))),null===(r=e>0?U(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&L(this)),null!==r&&this.emit("data",r),r},O.prototype._read=function(e){E(this,new _("_read()"))},O.prototype.pipe=function(e,t){var n=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=e;break;case 1:i.pipes=[i.pipes,e];break;default:i.pipes.push(e)}i.pipesCount+=1,c("pipe count=%d opts=%j",i.pipesCount,t);var s=(!t||!1!==t.end)&&e!==r.stdout&&e!==r.stderr?u:g;function a(t,r){c("onunpipe"),t===n&&r&&!1===r.hasUnpiped&&(r.hasUnpiped=!0,c("cleanup"),e.removeListener("close",p),e.removeListener("finish",m),e.removeListener("drain",l),e.removeListener("error",f),e.removeListener("unpipe",a),n.removeListener("end",u),n.removeListener("end",g),n.removeListener("data",d),h=!0,!i.awaitDrain||e._writableState&&!e._writableState.needDrain||l())}function u(){c("onend"),e.end()}i.endEmitted?r.nextTick(s):n.once("end",s),e.on("unpipe",a);var l=function(e){return function(){var t=e._readableState;c("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&o(e,"data")&&(t.flowing=!0,D(e))}}(n);e.on("drain",l);var h=!1;function d(t){c("ondata");var r=e.write(t);c("dest.write",r),!1===r&&((1===i.pipesCount&&i.pipes===e||i.pipesCount>1&&-1!==B(i.pipes,e))&&!h&&(c("false write response, pause",i.awaitDrain),i.awaitDrain++),n.pause())}function f(t){c("onerror",t),g(),e.removeListener("error",f),0===o(e,"error")&&E(e,t)}function p(){e.removeListener("finish",m),g()}function m(){c("onfinish"),e.removeListener("close",p),g()}function g(){c("unpipe"),n.unpipe(e)}return n.on("data",d),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(e,"error",f),e.once("close",p),e.once("finish",m),e.emit("pipe",n),i.flowing||(c("pipe resume"),n.resume()),e},O.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n)),this;if(!e){var r=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)r[o].emit("unpipe",this,{hasUnpiped:!1});return this}var s=B(t.pipes,e);return-1===s||(t.pipes.splice(s,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n)),this},O.prototype.on=function(e,t){var n=s.prototype.on.call(this,e,t),i=this._readableState;return"data"===e?(i.readableListening=this.listenerCount("readable")>0,!1!==i.flowing&&this.resume()):"readable"===e&&(i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,c("on readable",i.length,i.reading),i.length?k(this):i.reading||r.nextTick(N,this))),n},O.prototype.addListener=O.prototype.on,O.prototype.removeListener=function(e,t){var n=s.prototype.removeListener.call(this,e,t);return"readable"===e&&r.nextTick(R,this),n},O.prototype.removeAllListeners=function(e){var t=s.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||r.nextTick(R,this),t},O.prototype.resume=function(){var e=this._readableState;return e.flowing||(c("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,r.nextTick(P,e,t))}(this,e)),e.paused=!1,this},O.prototype.pause=function(){return c("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(c("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},O.prototype.wrap=function(e){var t=this,n=this._readableState,r=!1;for(var i in e.on("end",(function(){if(c("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(i){(c("wrapped data"),n.decoder&&(i=n.decoder.write(i)),n.objectMode&&null==i)||(n.objectMode||i&&i.length)&&(t.push(i)||(r=!0,e.pause()))})),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var o=0;o<S.length;o++)e.on(S[o],this.emit.bind(this,S[o]));return this._read=function(t){c("wrapped _read",t),r&&(r=!1,e.resume())},this},"function"==typeof Symbol&&(O.prototype[Symbol.asyncIterator]=function(){return void 0===d&&(d=n(207)),d(this)}),Object.defineProperty(O.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(O.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(O.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),O._fromList=U,Object.defineProperty(O.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(O.from=function(e,t){return void 0===f&&(f=n(208)),f(O,e,t)})}).call(this,n(19),n(16))},function(e,t,n){e.exports=n(36).EventEmitter},function(e,t,n){"use strict";(function(t){function n(e,t){i(e,t),r(e)}function r(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function i(e,t){e.emit("error",t)}e.exports={destroy:function(e,o){var s=this,a=this._readableState&&this._readableState.destroyed,u=this._writableState&&this._writableState.destroyed;return a||u?(o?o(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,t.nextTick(i,this,e)):t.nextTick(i,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!o&&e?s._writableState?s._writableState.errorEmitted?t.nextTick(r,s):(s._writableState.errorEmitted=!0,t.nextTick(n,s,e)):t.nextTick(n,s,e):o?(t.nextTick(r,s),o(e)):t.nextTick(r,s)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var n=e._readableState,r=e._writableState;n&&n.autoDestroy||r&&r.autoDestroy?e.destroy(t):e.emit("error",t)}}}).call(this,n(16))},function(e,t,n){"use strict";var r=n(44).codes.ERR_INVALID_OPT_VALUE;e.exports={getHighWaterMark:function(e,t,n,i){var o=function(e,t,n){return null!=e.highWaterMark?e.highWaterMark:t?e[n]:null}(t,i,n);if(null!=o){if(!isFinite(o)||Math.floor(o)!==o||o<0)throw new r(i?n:"highWaterMark",o);return Math.floor(o)}return e.objectMode?16:16384}}},function(e,t,n){"use strict";(function(t,r){function i(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var r=e.entry;e.entry=null;for(;r;){var i=r.callback;t.pendingcb--,i(n),r=r.next}t.corkedRequestsFree.next=e}(t,e)}}var o;e.exports=O,O.WritableState=M;var s={deprecate:n(74)},a=n(109),u=n(17).Buffer,c=t.Uint8Array||function(){};var l,h=n(110),d=n(111).getHighWaterMark,f=n(44).codes,p=f.ERR_INVALID_ARG_TYPE,m=f.ERR_METHOD_NOT_IMPLEMENTED,g=f.ERR_MULTIPLE_CALLBACK,b=f.ERR_STREAM_CANNOT_PIPE,v=f.ERR_STREAM_DESTROYED,y=f.ERR_STREAM_NULL_VALUES,_=f.ERR_STREAM_WRITE_AFTER_END,w=f.ERR_UNKNOWN_ENCODING,E=h.errorOrDestroy;function S(){}function M(e,t,s){o=o||n(45),e=e||{},"boolean"!=typeof s&&(s=t instanceof o),this.objectMode=!!e.objectMode,s&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=d(this,e,"writableHighWaterMark",s),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var a=!1===e.decodeStrings;this.decodeStrings=!a,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,i=n.sync,o=n.writecb;if("function"!=typeof o)throw new g;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),t)!function(e,t,n,i,o){--t.pendingcb,n?(r.nextTick(o,i),r.nextTick(j,e,t),e._writableState.errorEmitted=!0,E(e,i)):(o(i),e._writableState.errorEmitted=!0,E(e,i),j(e,t))}(e,n,i,t,o);else{var s=k(n)||e.destroyed;s||n.corked||n.bufferProcessing||!n.bufferedRequest||T(e,n),i?r.nextTick(C,e,n,s,o):C(e,n,s,o)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new i(this)}function O(e){var t=this instanceof(o=o||n(45));if(!t&&!l.call(O,this))return new O(e);this._writableState=new M(e,this,t),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),a.call(this)}function A(e,t,n,r,i,o,s){t.writelen=r,t.writecb=s,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new v("write")):n?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function C(e,t,n,r){n||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,r(),j(e,t)}function T(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,o=new Array(r),s=t.corkedRequestsFree;s.entry=n;for(var a=0,u=!0;n;)o[a]=n,n.isBuf||(u=!1),n=n.next,a+=1;o.allBuffers=u,A(e,t,!0,t.length,o,"",s.finish),t.pendingcb++,t.lastBufferedRequest=null,s.next?(t.corkedRequestsFree=s.next,s.next=null):t.corkedRequestsFree=new i(t),t.bufferedRequestCount=0}else{for(;n;){var c=n.chunk,l=n.encoding,h=n.callback;if(A(e,t,!1,t.objectMode?1:c.length,c,l,h),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function k(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function x(e,t){e._final((function(n){t.pendingcb--,n&&E(e,n),t.prefinished=!0,e.emit("prefinish"),j(e,t)}))}function j(e,t){var n=k(t);if(n&&(function(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,r.nextTick(x,e,t)))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var i=e._readableState;(!i||i.autoDestroy&&i.endEmitted)&&e.destroy()}return n}n(7)(O,a),M.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(M.prototype,"buffer",{get:s.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(l=Function.prototype[Symbol.hasInstance],Object.defineProperty(O,Symbol.hasInstance,{value:function(e){return!!l.call(this,e)||this===O&&(e&&e._writableState instanceof M)}})):l=function(e){return e instanceof this},O.prototype.pipe=function(){E(this,new b)},O.prototype.write=function(e,t,n){var i,o=this._writableState,s=!1,a=!o.objectMode&&(i=e,u.isBuffer(i)||i instanceof c);return a&&!u.isBuffer(e)&&(e=function(e){return u.from(e)}(e)),"function"==typeof t&&(n=t,t=null),a?t="buffer":t||(t=o.defaultEncoding),"function"!=typeof n&&(n=S),o.ending?function(e,t){var n=new _;E(e,n),r.nextTick(t,n)}(this,n):(a||function(e,t,n,i){var o;return null===n?o=new y:"string"==typeof n||t.objectMode||(o=new p("chunk",["string","Buffer"],n)),!o||(E(e,o),r.nextTick(i,o),!1)}(this,o,e,n))&&(o.pendingcb++,s=function(e,t,n,r,i,o){if(!n){var s=function(e,t,n){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=u.from(t,n));return t}(t,r,i);r!==s&&(n=!0,i="buffer",r=s)}var a=t.objectMode?1:r.length;t.length+=a;var c=t.length<t.highWaterMark;c||(t.needDrain=!0);if(t.writing||t.corked){var l=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:o,next:null},l?l.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else A(e,t,!1,a,r,i,o);return c}(this,o,a,e,t,n)),s},O.prototype.cork=function(){this._writableState.corked++},O.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||T(this,e))},O.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new w(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(O.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(O.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),O.prototype._write=function(e,t,n){n(new m("_write()"))},O.prototype._writev=null,O.prototype.end=function(e,t,n){var i=this._writableState;return"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||function(e,t,n){t.ending=!0,j(e,t),n&&(t.finished?r.nextTick(n):e.once("finish",n));t.ended=!0,e.writable=!1}(this,i,n),this},Object.defineProperty(O.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(O.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),O.prototype.destroy=h.destroy,O.prototype._undestroy=h.undestroy,O.prototype._destroy=function(e,t){t(e)}}).call(this,n(19),n(16))},function(e,t,n){"use strict";e.exports=l;var r=n(44).codes,i=r.ERR_METHOD_NOT_IMPLEMENTED,o=r.ERR_MULTIPLE_CALLBACK,s=r.ERR_TRANSFORM_ALREADY_TRANSFORMING,a=r.ERR_TRANSFORM_WITH_LENGTH_0,u=n(45);function c(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(null===r)return this.emit("error",new o);n.writechunk=null,n.writecb=null,null!=t&&this.push(t),r(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function l(e){if(!(this instanceof l))return new l(e);u.call(this,e),this._transformState={afterTransform:c.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",h)}function h(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?d(this,null,null):this._flush((function(t,n){d(e,t,n)}))}function d(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new a;if(e._transformState.transforming)throw new s;return e.push(null)}n(7)(l,u),l.prototype.push=function(e,t){return this._transformState.needTransform=!1,u.prototype.push.call(this,e,t)},l.prototype._transform=function(e,t,n){n(new i("_transform()"))},l.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},l.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},l.prototype._destroy=function(e,t){u.prototype._destroy.call(this,e,(function(e){t(e)}))}},function(e,t,n){var r=n(7),i=n(46),o=n(8).Buffer,s=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],a=new Array(64);function u(){this.init(),this._w=a,i.call(this,64,56)}function c(e,t,n){return n^e&(t^n)}function l(e,t,n){return e&t|n&(e|t)}function h(e){return(e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10)}function d(e){return(e>>>6|e<<26)^(e>>>11|e<<21)^(e>>>25|e<<7)}function f(e){return(e>>>7|e<<25)^(e>>>18|e<<14)^e>>>3}r(u,i),u.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},u.prototype._update=function(e){for(var t,n=this._w,r=0|this._a,i=0|this._b,o=0|this._c,a=0|this._d,u=0|this._e,p=0|this._f,m=0|this._g,g=0|this._h,b=0;b<16;++b)n[b]=e.readInt32BE(4*b);for(;b<64;++b)n[b]=0|(((t=n[b-2])>>>17|t<<15)^(t>>>19|t<<13)^t>>>10)+n[b-7]+f(n[b-15])+n[b-16];for(var v=0;v<64;++v){var y=g+d(u)+c(u,p,m)+s[v]+n[v]|0,_=h(r)+l(r,i,o)|0;g=m,m=p,p=u,u=a+y|0,a=o,o=i,i=r,r=y+_|0}this._a=r+this._a|0,this._b=i+this._b|0,this._c=o+this._c|0,this._d=a+this._d|0,this._e=u+this._e|0,this._f=p+this._f|0,this._g=m+this._g|0,this._h=g+this._h|0},u.prototype._hash=function(){var e=o.allocUnsafe(32);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e.writeInt32BE(this._h,28),e},e.exports=u},function(e,t,n){var r=n(7),i=n(46),o=n(8).Buffer,s=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],a=new Array(160);function u(){this.init(),this._w=a,i.call(this,128,112)}function c(e,t,n){return n^e&(t^n)}function l(e,t,n){return e&t|n&(e|t)}function h(e,t){return(e>>>28|t<<4)^(t>>>2|e<<30)^(t>>>7|e<<25)}function d(e,t){return(e>>>14|t<<18)^(e>>>18|t<<14)^(t>>>9|e<<23)}function f(e,t){return(e>>>1|t<<31)^(e>>>8|t<<24)^e>>>7}function p(e,t){return(e>>>1|t<<31)^(e>>>8|t<<24)^(e>>>7|t<<25)}function m(e,t){return(e>>>19|t<<13)^(t>>>29|e<<3)^e>>>6}function g(e,t){return(e>>>19|t<<13)^(t>>>29|e<<3)^(e>>>6|t<<26)}function b(e,t){return e>>>0<t>>>0?1:0}r(u,i),u.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this},u.prototype._update=function(e){for(var t=this._w,n=0|this._ah,r=0|this._bh,i=0|this._ch,o=0|this._dh,a=0|this._eh,u=0|this._fh,v=0|this._gh,y=0|this._hh,_=0|this._al,w=0|this._bl,E=0|this._cl,S=0|this._dl,M=0|this._el,O=0|this._fl,A=0|this._gl,C=0|this._hl,T=0;T<32;T+=2)t[T]=e.readInt32BE(4*T),t[T+1]=e.readInt32BE(4*T+4);for(;T<160;T+=2){var k=t[T-30],x=t[T-30+1],j=f(k,x),I=p(x,k),R=m(k=t[T-4],x=t[T-4+1]),N=g(x,k),P=t[T-14],D=t[T-14+1],U=t[T-32],L=t[T-32+1],F=I+D|0,B=j+P+b(F,I)|0;B=(B=B+R+b(F=F+N|0,N)|0)+U+b(F=F+L|0,L)|0,t[T]=B,t[T+1]=F}for(var H=0;H<160;H+=2){B=t[H],F=t[H+1];var q=l(n,r,i),V=l(_,w,E),G=h(n,_),z=h(_,n),W=d(a,M),K=d(M,a),Y=s[H],Q=s[H+1],J=c(a,u,v),Z=c(M,O,A),$=C+K|0,X=y+W+b($,C)|0;X=(X=(X=X+J+b($=$+Z|0,Z)|0)+Y+b($=$+Q|0,Q)|0)+B+b($=$+F|0,F)|0;var ee=z+V|0,te=G+q+b(ee,z)|0;y=v,C=A,v=u,A=O,u=a,O=M,a=o+X+b(M=S+$|0,S)|0,o=i,S=E,i=r,E=w,r=n,w=_,n=X+te+b(_=$+ee|0,$)|0}this._al=this._al+_|0,this._bl=this._bl+w|0,this._cl=this._cl+E|0,this._dl=this._dl+S|0,this._el=this._el+M|0,this._fl=this._fl+O|0,this._gl=this._gl+A|0,this._hl=this._hl+C|0,this._ah=this._ah+n+b(this._al,_)|0,this._bh=this._bh+r+b(this._bl,w)|0,this._ch=this._ch+i+b(this._cl,E)|0,this._dh=this._dh+o+b(this._dl,S)|0,this._eh=this._eh+a+b(this._el,M)|0,this._fh=this._fh+u+b(this._fl,O)|0,this._gh=this._gh+v+b(this._gl,A)|0,this._hh=this._hh+y+b(this._hl,C)|0},u.prototype._hash=function(){var e=o.allocUnsafe(64);function t(t,n,r){e.writeInt32BE(t,r),e.writeInt32BE(n,r+4)}return t(this._ah,this._al,0),t(this._bh,this._bl,8),t(this._ch,this._cl,16),t(this._dh,this._dl,24),t(this._eh,this._el,32),t(this._fh,this._fl,40),t(this._gh,this._gl,48),t(this._hh,this._hl,56),e},e.exports=u},function(e,t,n){"use strict";var r=n(7),i=n(215),o=n(33),s=n(8).Buffer,a=n(117),u=n(77),c=n(78),l=s.alloc(128);function h(e,t){o.call(this,"digest"),"string"==typeof t&&(t=s.from(t));var n="sha512"===e||"sha384"===e?128:64;(this._alg=e,this._key=t,t.length>n)?t=("rmd160"===e?new u:c(e)).update(t).digest():t.length<n&&(t=s.concat([t,l],n));for(var r=this._ipad=s.allocUnsafe(n),i=this._opad=s.allocUnsafe(n),a=0;a<n;a++)r[a]=54^t[a],i[a]=92^t[a];this._hash="rmd160"===e?new u:c(e),this._hash.update(r)}r(h,o),h.prototype._update=function(e){this._hash.update(e)},h.prototype._final=function(){var e=this._hash.digest();return("rmd160"===this._alg?new u:c(this._alg)).update(this._opad).update(e).digest()},e.exports=function(e,t){return"rmd160"===(e=e.toLowerCase())||"ripemd160"===e?new h("rmd160",t):"md5"===e?new i(a,t):new h(e,t)}},function(e,t,n){var r=n(75);e.exports=function(e){return(new r).update(e).digest()}},function(e){e.exports=JSON.parse('{"sha224WithRSAEncryption":{"sign":"rsa","hash":"sha224","id":"302d300d06096086480165030402040500041c"},"RSA-SHA224":{"sign":"ecdsa/rsa","hash":"sha224","id":"302d300d06096086480165030402040500041c"},"sha256WithRSAEncryption":{"sign":"rsa","hash":"sha256","id":"3031300d060960864801650304020105000420"},"RSA-SHA256":{"sign":"ecdsa/rsa","hash":"sha256","id":"3031300d060960864801650304020105000420"},"sha384WithRSAEncryption":{"sign":"rsa","hash":"sha384","id":"3041300d060960864801650304020205000430"},"RSA-SHA384":{"sign":"ecdsa/rsa","hash":"sha384","id":"3041300d060960864801650304020205000430"},"sha512WithRSAEncryption":{"sign":"rsa","hash":"sha512","id":"3051300d060960864801650304020305000440"},"RSA-SHA512":{"sign":"ecdsa/rsa","hash":"sha512","id":"3051300d060960864801650304020305000440"},"RSA-SHA1":{"sign":"rsa","hash":"sha1","id":"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{"sign":"ecdsa","hash":"sha1","id":""},"sha256":{"sign":"ecdsa","hash":"sha256","id":""},"sha224":{"sign":"ecdsa","hash":"sha224","id":""},"sha384":{"sign":"ecdsa","hash":"sha384","id":""},"sha512":{"sign":"ecdsa","hash":"sha512","id":""},"DSA-SHA":{"sign":"dsa","hash":"sha1","id":""},"DSA-SHA1":{"sign":"dsa","hash":"sha1","id":""},"DSA":{"sign":"dsa","hash":"sha1","id":""},"DSA-WITH-SHA224":{"sign":"dsa","hash":"sha224","id":""},"DSA-SHA224":{"sign":"dsa","hash":"sha224","id":""},"DSA-WITH-SHA256":{"sign":"dsa","hash":"sha256","id":""},"DSA-SHA256":{"sign":"dsa","hash":"sha256","id":""},"DSA-WITH-SHA384":{"sign":"dsa","hash":"sha384","id":""},"DSA-SHA384":{"sign":"dsa","hash":"sha384","id":""},"DSA-WITH-SHA512":{"sign":"dsa","hash":"sha512","id":""},"DSA-SHA512":{"sign":"dsa","hash":"sha512","id":""},"DSA-RIPEMD160":{"sign":"dsa","hash":"rmd160","id":""},"ripemd160WithRSA":{"sign":"rsa","hash":"rmd160","id":"3021300906052b2403020105000414"},"RSA-RIPEMD160":{"sign":"rsa","hash":"rmd160","id":"3021300906052b2403020105000414"},"md5WithRSAEncryption":{"sign":"rsa","hash":"md5","id":"3020300c06082a864886f70d020505000410"},"RSA-MD5":{"sign":"rsa","hash":"md5","id":"3020300c06082a864886f70d020505000410"}}')},function(e,t,n){t.pbkdf2=n(217),t.pbkdf2Sync=n(122)},function(e,t){var n=Math.pow(2,30)-1;e.exports=function(e,t){if("number"!=typeof e)throw new TypeError("Iterations not a number");if(e<0)throw new TypeError("Bad iterations");if("number"!=typeof t)throw new TypeError("Key length not a number");if(t<0||t>n||t!=t)throw new TypeError("Bad key length")}},function(e,t,n){(function(t,n){var r;if(t.process&&t.process.browser)r="utf-8";else if(t.process&&t.process.version){r=parseInt(n.version.split(".")[0].slice(1),10)>=6?"utf-8":"binary"}else r="utf-8";e.exports=r}).call(this,n(19),n(16))},function(e,t,n){var r=n(117),i=n(77),o=n(78),s=n(8).Buffer,a=n(120),u=n(121),c=n(123),l=s.alloc(128),h={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};function d(e,t,n){var a=function(e){function t(t){return o(e).update(t).digest()}return"rmd160"===e||"ripemd160"===e?function(e){return(new i).update(e).digest()}:"md5"===e?r:t}(e),u="sha512"===e||"sha384"===e?128:64;t.length>u?t=a(t):t.length<u&&(t=s.concat([t,l],u));for(var c=s.allocUnsafe(u+h[e]),d=s.allocUnsafe(u+h[e]),f=0;f<u;f++)c[f]=54^t[f],d[f]=92^t[f];var p=s.allocUnsafe(u+n+4);c.copy(p,0,0,u),this.ipad1=p,this.ipad2=c,this.opad=d,this.alg=e,this.blocksize=u,this.hash=a,this.size=h[e]}d.prototype.run=function(e,t){return e.copy(t,this.blocksize),this.hash(t).copy(this.opad,this.blocksize),this.hash(this.opad)},e.exports=function(e,t,n,r,i){a(n,r);var o=new d(i=i||"sha1",e=c(e,u,"Password"),(t=c(t,u,"Salt")).length),l=s.allocUnsafe(r),f=s.allocUnsafe(t.length+4);t.copy(f,0,0,t.length);for(var p=0,m=h[i],g=Math.ceil(r/m),b=1;b<=g;b++){f.writeUInt32BE(b,t.length);for(var v=o.run(f,o.ipad1),y=v,_=1;_<n;_++){y=o.run(y,o.ipad2);for(var w=0;w<m;w++)v[w]^=y[w]}v.copy(l,p),p+=m}return l}},function(e,t,n){var r=n(8).Buffer;e.exports=function(e,t,n){if(r.isBuffer(e))return e;if("string"==typeof e)return r.from(e,t);if(ArrayBuffer.isView(e))return r.from(e.buffer);throw new TypeError(n+" must be a string, a Buffer, a typed array or a DataView")}},function(e,t,n){"use strict";t.readUInt32BE=function(e,t){return(e[0+t]<<24|e[1+t]<<16|e[2+t]<<8|e[3+t])>>>0},t.writeUInt32BE=function(e,t,n){e[0+n]=t>>>24,e[1+n]=t>>>16&255,e[2+n]=t>>>8&255,e[3+n]=255&t},t.ip=function(e,t,n,r){for(var i=0,o=0,s=6;s>=0;s-=2){for(var a=0;a<=24;a+=8)i<<=1,i|=t>>>a+s&1;for(a=0;a<=24;a+=8)i<<=1,i|=e>>>a+s&1}for(s=6;s>=0;s-=2){for(a=1;a<=25;a+=8)o<<=1,o|=t>>>a+s&1;for(a=1;a<=25;a+=8)o<<=1,o|=e>>>a+s&1}n[r+0]=i>>>0,n[r+1]=o>>>0},t.rip=function(e,t,n,r){for(var i=0,o=0,s=0;s<4;s++)for(var a=24;a>=0;a-=8)i<<=1,i|=t>>>a+s&1,i<<=1,i|=e>>>a+s&1;for(s=4;s<8;s++)for(a=24;a>=0;a-=8)o<<=1,o|=t>>>a+s&1,o<<=1,o|=e>>>a+s&1;n[r+0]=i>>>0,n[r+1]=o>>>0},t.pc1=function(e,t,n,r){for(var i=0,o=0,s=7;s>=5;s--){for(var a=0;a<=24;a+=8)i<<=1,i|=t>>a+s&1;for(a=0;a<=24;a+=8)i<<=1,i|=e>>a+s&1}for(a=0;a<=24;a+=8)i<<=1,i|=t>>a+s&1;for(s=1;s<=3;s++){for(a=0;a<=24;a+=8)o<<=1,o|=t>>a+s&1;for(a=0;a<=24;a+=8)o<<=1,o|=e>>a+s&1}for(a=0;a<=24;a+=8)o<<=1,o|=e>>a+s&1;n[r+0]=i>>>0,n[r+1]=o>>>0},t.r28shl=function(e,t){return e<<t&268435455|e>>>28-t};var r=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];t.pc2=function(e,t,n,i){for(var o=0,s=0,a=r.length>>>1,u=0;u<a;u++)o<<=1,o|=e>>>r[u]&1;for(u=a;u<r.length;u++)s<<=1,s|=t>>>r[u]&1;n[i+0]=o>>>0,n[i+1]=s>>>0},t.expand=function(e,t,n){var r=0,i=0;r=(1&e)<<5|e>>>27;for(var o=23;o>=15;o-=4)r<<=6,r|=e>>>o&63;for(o=11;o>=3;o-=4)i|=e>>>o&63,i<<=6;i|=(31&e)<<1|e>>>31,t[n+0]=r>>>0,t[n+1]=i>>>0};var i=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];t.substitute=function(e,t){for(var n=0,r=0;r<4;r++){n<<=4,n|=i[64*r+(e>>>18-6*r&63)]}for(r=0;r<4;r++){n<<=4,n|=i[256+64*r+(t>>>18-6*r&63)]}return n>>>0};var o=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];t.permute=function(e){for(var t=0,n=0;n<o.length;n++)t<<=1,t|=e>>>o[n]&1;return t>>>0},t.padSplit=function(e,t,n){for(var r=e.toString(2);r.length<t;)r="0"+r;for(var i=[],o=0;o<t;o+=n)i.push(r.slice(o,o+n));return i.join(" ")}},function(e,t,n){"use strict";var r=n(24),i=n(7),o=n(124),s=n(79);function a(){this.tmp=new Array(2),this.keys=null}function u(e){s.call(this,e);var t=new a;this._desState=t,this.deriveKeys(t,e.key)}i(u,s),e.exports=u,u.create=function(e){return new u(e)};var c=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];u.prototype.deriveKeys=function(e,t){e.keys=new Array(32),r.equal(t.length,this.blockSize,"Invalid key length");var n=o.readUInt32BE(t,0),i=o.readUInt32BE(t,4);o.pc1(n,i,e.tmp,0),n=e.tmp[0],i=e.tmp[1];for(var s=0;s<e.keys.length;s+=2){var a=c[s>>>1];n=o.r28shl(n,a),i=o.r28shl(i,a),o.pc2(n,i,e.keys,s)}},u.prototype._update=function(e,t,n,r){var i=this._desState,s=o.readUInt32BE(e,t),a=o.readUInt32BE(e,t+4);o.ip(s,a,i.tmp,0),s=i.tmp[0],a=i.tmp[1],"encrypt"===this.type?this._encrypt(i,s,a,i.tmp,0):this._decrypt(i,s,a,i.tmp,0),s=i.tmp[0],a=i.tmp[1],o.writeUInt32BE(n,s,r),o.writeUInt32BE(n,a,r+4)},u.prototype._pad=function(e,t){for(var n=e.length-t,r=t;r<e.length;r++)e[r]=n;return!0},u.prototype._unpad=function(e){for(var t=e[e.length-1],n=e.length-t;n<e.length;n++)r.equal(e[n],t);return e.slice(0,e.length-t)},u.prototype._encrypt=function(e,t,n,r,i){for(var s=t,a=n,u=0;u<e.keys.length;u+=2){var c=e.keys[u],l=e.keys[u+1];o.expand(a,e.tmp,0),c^=e.tmp[0],l^=e.tmp[1];var h=o.substitute(c,l),d=a;a=(s^o.permute(h))>>>0,s=d}o.rip(a,s,r,i)},u.prototype._decrypt=function(e,t,n,r,i){for(var s=n,a=t,u=e.keys.length-2;u>=0;u-=2){var c=e.keys[u],l=e.keys[u+1];o.expand(s,e.tmp,0),c^=e.tmp[0],l^=e.tmp[1];var h=o.substitute(c,l),d=s;s=(a^o.permute(h))>>>0,a=d}o.rip(s,a,r,i)}},function(e,t,n){var r=n(52),i=n(8).Buffer,o=n(127);function s(e){var t=e._cipher.encryptBlockRaw(e._prev);return o(e._prev),t}t.encrypt=function(e,t){var n=Math.ceil(t.length/16),o=e._cache.length;e._cache=i.concat([e._cache,i.allocUnsafe(16*n)]);for(var a=0;a<n;a++){var u=s(e),c=o+16*a;e._cache.writeUInt32BE(u[0],c+0),e._cache.writeUInt32BE(u[1],c+4),e._cache.writeUInt32BE(u[2],c+8),e._cache.writeUInt32BE(u[3],c+12)}var l=e._cache.slice(0,t.length);return e._cache=e._cache.slice(t.length),r(t,l)}},function(e,t){e.exports=function(e){for(var t,n=e.length;n--;){if(255!==(t=e.readUInt8(n))){t++,e.writeUInt8(t,n);break}e.writeUInt8(0,n)}}},function(e){e.exports=JSON.parse('{"aes-128-ecb":{"cipher":"AES","key":128,"iv":0,"mode":"ECB","type":"block"},"aes-192-ecb":{"cipher":"AES","key":192,"iv":0,"mode":"ECB","type":"block"},"aes-256-ecb":{"cipher":"AES","key":256,"iv":0,"mode":"ECB","type":"block"},"aes-128-cbc":{"cipher":"AES","key":128,"iv":16,"mode":"CBC","type":"block"},"aes-192-cbc":{"cipher":"AES","key":192,"iv":16,"mode":"CBC","type":"block"},"aes-256-cbc":{"cipher":"AES","key":256,"iv":16,"mode":"CBC","type":"block"},"aes128":{"cipher":"AES","key":128,"iv":16,"mode":"CBC","type":"block"},"aes192":{"cipher":"AES","key":192,"iv":16,"mode":"CBC","type":"block"},"aes256":{"cipher":"AES","key":256,"iv":16,"mode":"CBC","type":"block"},"aes-128-cfb":{"cipher":"AES","key":128,"iv":16,"mode":"CFB","type":"stream"},"aes-192-cfb":{"cipher":"AES","key":192,"iv":16,"mode":"CFB","type":"stream"},"aes-256-cfb":{"cipher":"AES","key":256,"iv":16,"mode":"CFB","type":"stream"},"aes-128-cfb8":{"cipher":"AES","key":128,"iv":16,"mode":"CFB8","type":"stream"},"aes-192-cfb8":{"cipher":"AES","key":192,"iv":16,"mode":"CFB8","type":"stream"},"aes-256-cfb8":{"cipher":"AES","key":256,"iv":16,"mode":"CFB8","type":"stream"},"aes-128-cfb1":{"cipher":"AES","key":128,"iv":16,"mode":"CFB1","type":"stream"},"aes-192-cfb1":{"cipher":"AES","key":192,"iv":16,"mode":"CFB1","type":"stream"},"aes-256-cfb1":{"cipher":"AES","key":256,"iv":16,"mode":"CFB1","type":"stream"},"aes-128-ofb":{"cipher":"AES","key":128,"iv":16,"mode":"OFB","type":"stream"},"aes-192-ofb":{"cipher":"AES","key":192,"iv":16,"mode":"OFB","type":"stream"},"aes-256-ofb":{"cipher":"AES","key":256,"iv":16,"mode":"OFB","type":"stream"},"aes-128-ctr":{"cipher":"AES","key":128,"iv":16,"mode":"CTR","type":"stream"},"aes-192-ctr":{"cipher":"AES","key":192,"iv":16,"mode":"CTR","type":"stream"},"aes-256-ctr":{"cipher":"AES","key":256,"iv":16,"mode":"CTR","type":"stream"},"aes-128-gcm":{"cipher":"AES","key":128,"iv":12,"mode":"GCM","type":"auth"},"aes-192-gcm":{"cipher":"AES","key":192,"iv":12,"mode":"GCM","type":"auth"},"aes-256-gcm":{"cipher":"AES","key":256,"iv":12,"mode":"GCM","type":"auth"}}')},function(e,t,n){var r=n(60),i=n(8).Buffer,o=n(33),s=n(7),a=n(230),u=n(52),c=n(127);function l(e,t,n,s){o.call(this);var u=i.alloc(4,0);this._cipher=new r.AES(t);var l=this._cipher.encryptBlock(u);this._ghash=new a(l),n=function(e,t,n){if(12===t.length)return e._finID=i.concat([t,i.from([0,0,0,1])]),i.concat([t,i.from([0,0,0,2])]);var r=new a(n),o=t.length,s=o%16;r.update(t),s&&(s=16-s,r.update(i.alloc(s,0))),r.update(i.alloc(8,0));var u=8*o,l=i.alloc(8);l.writeUIntBE(u,0,8),r.update(l),e._finID=r.state;var h=i.from(e._finID);return c(h),h}(this,n,l),this._prev=i.from(n),this._cache=i.allocUnsafe(0),this._secCache=i.allocUnsafe(0),this._decrypt=s,this._alen=0,this._len=0,this._mode=e,this._authTag=null,this._called=!1}s(l,o),l.prototype._update=function(e){if(!this._called&&this._alen){var t=16-this._alen%16;t<16&&(t=i.alloc(t,0),this._ghash.update(t))}this._called=!0;var n=this._mode.encrypt(this,e);return this._decrypt?this._ghash.update(e):this._ghash.update(n),this._len+=e.length,n},l.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var e=u(this._ghash.final(8*this._alen,8*this._len),this._cipher.encryptBlock(this._finID));if(this._decrypt&&function(e,t){var n=0;e.length!==t.length&&n++;for(var r=Math.min(e.length,t.length),i=0;i<r;++i)n+=e[i]^t[i];return n}(e,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=e,this._cipher.scrub()},l.prototype.getAuthTag=function(){if(this._decrypt||!i.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag},l.prototype.setAuthTag=function(e){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=e},l.prototype.setAAD=function(e){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(e),this._alen+=e.length},e.exports=l},function(e,t,n){var r=n(60),i=n(8).Buffer,o=n(33);function s(e,t,n,s){o.call(this),this._cipher=new r.AES(t),this._prev=i.from(n),this._cache=i.allocUnsafe(0),this._secCache=i.allocUnsafe(0),this._decrypt=s,this._mode=e}n(7)(s,o),s.prototype._update=function(e){return this._mode.encrypt(this,e,this._decrypt)},s.prototype._final=function(){this._cipher.scrub()},e.exports=s},function(e,t,n){var r=n(43);e.exports=v,v.simpleSieve=g,v.fermatTest=b;var i=n(132),o=new i(24),s=new(n(133)),a=new i(1),u=new i(2),c=new i(5),l=(new i(16),new i(8),new i(10)),h=new i(3),d=(new i(7),new i(11)),f=new i(4),p=(new i(12),null);function m(){if(null!==p)return p;var e=[];e[0]=2;for(var t=1,n=3;n<1048576;n+=2){for(var r=Math.ceil(Math.sqrt(n)),i=0;i<t&&e[i]<=r&&n%e[i]!=0;i++);t!==i&&e[i]<=r||(e[t++]=n)}return p=e,e}function g(e){for(var t=m(),n=0;n<t.length;n++)if(0===e.modn(t[n]))return 0===e.cmpn(t[n]);return!0}function b(e){var t=i.mont(e);return 0===u.toRed(t).redPow(e.subn(1)).fromRed().cmpn(1)}function v(e,t){if(e<16)return new i(2===t||5===t?[140,123]:[140,39]);var n,p;for(t=new i(t);;){for(n=new i(r(Math.ceil(e/8)));n.bitLength()>e;)n.ishrn(1);if(n.isEven()&&n.iadd(a),n.testn(1)||n.iadd(u),t.cmp(u)){if(!t.cmp(c))for(;n.mod(l).cmp(h);)n.iadd(f)}else for(;n.mod(o).cmp(d);)n.iadd(f);if(g(p=n.shrn(1))&&g(n)&&b(p)&&b(n)&&s.test(p)&&s.test(n))return n}}},function(e,t,n){(function(e){!function(e,t){"use strict";function r(e,t){if(!e)throw new Error(t||"Assertion failed")}function i(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}function o(e,t,n){if(o.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(n=t,t=10),this._init(e||0,t||10,n||"be"))}var s;"object"==typeof e?e.exports=o:t.BN=o,o.BN=o,o.wordSize=26;try{s="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:n(234).Buffer}catch(e){}function a(e,t){var n=e.charCodeAt(t);return n>=65&&n<=70?n-55:n>=97&&n<=102?n-87:n-48&15}function u(e,t,n){var r=a(e,n);return n-1>=t&&(r|=a(e,n-1)<<4),r}function c(e,t,n,r){for(var i=0,o=Math.min(e.length,n),s=t;s<o;s++){var a=e.charCodeAt(s)-48;i*=r,i+=a>=49?a-49+10:a>=17?a-17+10:a}return i}o.isBN=function(e){return e instanceof o||null!==e&&"object"==typeof e&&e.constructor.wordSize===o.wordSize&&Array.isArray(e.words)},o.max=function(e,t){return e.cmp(t)>0?e:t},o.min=function(e,t){return e.cmp(t)<0?e:t},o.prototype._init=function(e,t,n){if("number"==typeof e)return this._initNumber(e,t,n);if("object"==typeof e)return this._initArray(e,t,n);"hex"===t&&(t=16),r(t===(0|t)&&t>=2&&t<=36);var i=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<e.length&&(16===t?this._parseHex(e,i,n):(this._parseBase(e,t,i),"le"===n&&this._initArray(this.toArray(),t,n)))},o.prototype._initNumber=function(e,t,n){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(r(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===n&&this._initArray(this.toArray(),t,n)},o.prototype._initArray=function(e,t,n){if(r("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var o,s,a=0;if("be"===n)for(i=e.length-1,o=0;i>=0;i-=3)s=e[i]|e[i-1]<<8|e[i-2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);else if("le"===n)for(i=0,o=0;i<e.length;i+=3)s=e[i]|e[i+1]<<8|e[i+2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);return this.strip()},o.prototype._parseHex=function(e,t,n){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var i,o=0,s=0;if("be"===n)for(r=e.length-1;r>=t;r-=2)i=u(e,t,r)<<o,this.words[s]|=67108863&i,o>=18?(o-=18,s+=1,this.words[s]|=i>>>26):o+=8;else for(r=(e.length-t)%2==0?t+1:t;r<e.length;r+=2)i=u(e,t,r)<<o,this.words[s]|=67108863&i,o>=18?(o-=18,s+=1,this.words[s]|=i>>>26):o+=8;this.strip()},o.prototype._parseBase=function(e,t,n){this.words=[0],this.length=1;for(var r=0,i=1;i<=67108863;i*=t)r++;r--,i=i/t|0;for(var o=e.length-n,s=o%r,a=Math.min(o,o-s)+n,u=0,l=n;l<a;l+=r)u=c(e,l,l+r,t),this.imuln(i),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==s){var h=1;for(u=c(e,l,e.length,t),l=0;l<s;l++)h*=t;this.imuln(h),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this.strip()},o.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},o.prototype.clone=function(){var e=new o(null);return this.copy(e),e},o.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var l=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],d=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function f(e,t,n){n.negative=t.negative^e.negative;var r=e.length+t.length|0;n.length=r,r=r-1|0;var i=0|e.words[0],o=0|t.words[0],s=i*o,a=67108863&s,u=s/67108864|0;n.words[0]=a;for(var c=1;c<r;c++){for(var l=u>>>26,h=67108863&u,d=Math.min(c,t.length-1),f=Math.max(0,c-e.length+1);f<=d;f++){var p=c-f|0;l+=(s=(i=0|e.words[p])*(o=0|t.words[f])+h)/67108864|0,h=67108863&s}n.words[c]=0|h,u=0|l}return 0!==u?n.words[c]=0|u:n.length--,n.strip()}o.prototype.toString=function(e,t){var n;if(t=0|t||1,16===(e=e||10)||"hex"===e){n="";for(var i=0,o=0,s=0;s<this.length;s++){var a=this.words[s],u=(16777215&(a<<i|o)).toString(16);n=0!==(o=a>>>24-i&16777215)||s!==this.length-1?l[6-u.length]+u+n:u+n,(i+=2)>=26&&(i-=26,s--)}for(0!==o&&(n=o.toString(16)+n);n.length%t!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}if(e===(0|e)&&e>=2&&e<=36){var c=h[e],f=d[e];n="";var p=this.clone();for(p.negative=0;!p.isZero();){var m=p.modn(f).toString(e);n=(p=p.idivn(f)).isZero()?m+n:l[c-m.length]+m+n}for(this.isZero()&&(n="0"+n);n.length%t!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}r(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(e,t){return r(void 0!==s),this.toArrayLike(s,e,t)},o.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},o.prototype.toArrayLike=function(e,t,n){var i=this.byteLength(),o=n||Math.max(1,i);r(i<=o,"byte array longer than desired length"),r(o>0,"Requested array length <= 0"),this.strip();var s,a,u="le"===t,c=new e(o),l=this.clone();if(u){for(a=0;!l.isZero();a++)s=l.andln(255),l.iushrn(8),c[a]=s;for(;a<o;a++)c[a]=0}else{for(a=0;a<o-i;a++)c[a]=0;for(a=0;!l.isZero();a++)s=l.andln(255),l.iushrn(8),c[o-a-1]=s}return c},Math.clz32?o.prototype._countBits=function(e){return 32-Math.clz32(e)}:o.prototype._countBits=function(e){var t=e,n=0;return t>=4096&&(n+=13,t>>>=13),t>=64&&(n+=7,t>>>=7),t>=8&&(n+=4,t>>>=4),t>=2&&(n+=2,t>>>=2),n+t},o.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,n=0;return 0==(8191&t)&&(n+=13,t>>>=13),0==(127&t)&&(n+=7,t>>>=7),0==(15&t)&&(n+=4,t>>>=4),0==(3&t)&&(n+=2,t>>>=2),0==(1&t)&&n++,n},o.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var n=this._zeroBits(this.words[t]);if(e+=n,26!==n)break}return e},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},o.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this.strip()},o.prototype.ior=function(e){return r(0==(this.negative|e.negative)),this.iuor(e)},o.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},o.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},o.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var n=0;n<t.length;n++)this.words[n]=this.words[n]&e.words[n];return this.length=t.length,this.strip()},o.prototype.iand=function(e){return r(0==(this.negative|e.negative)),this.iuand(e)},o.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},o.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},o.prototype.iuxor=function(e){var t,n;this.length>e.length?(t=this,n=e):(t=e,n=this);for(var r=0;r<n.length;r++)this.words[r]=t.words[r]^n.words[r];if(this!==t)for(;r<t.length;r++)this.words[r]=t.words[r];return this.length=t.length,this.strip()},o.prototype.ixor=function(e){return r(0==(this.negative|e.negative)),this.iuxor(e)},o.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},o.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},o.prototype.inotn=function(e){r("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),n=e%26;this._expand(t),n>0&&t--;for(var i=0;i<t;i++)this.words[i]=67108863&~this.words[i];return n>0&&(this.words[i]=~this.words[i]&67108863>>26-n),this.strip()},o.prototype.notn=function(e){return this.clone().inotn(e)},o.prototype.setn=function(e,t){r("number"==typeof e&&e>=0);var n=e/26|0,i=e%26;return this._expand(n+1),this.words[n]=t?this.words[n]|1<<i:this.words[n]&~(1<<i),this.strip()},o.prototype.iadd=function(e){var t,n,r;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(n=this,r=e):(n=e,r=this);for(var i=0,o=0;o<r.length;o++)t=(0|n.words[o])+(0|r.words[o])+i,this.words[o]=67108863&t,i=t>>>26;for(;0!==i&&o<n.length;o++)t=(0|n.words[o])+i,this.words[o]=67108863&t,i=t>>>26;if(this.length=n.length,0!==i)this.words[this.length]=i,this.length++;else if(n!==this)for(;o<n.length;o++)this.words[o]=n.words[o];return this},o.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},o.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var n,r,i=this.cmp(e);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(n=this,r=e):(n=e,r=this);for(var o=0,s=0;s<r.length;s++)o=(t=(0|n.words[s])-(0|r.words[s])+o)>>26,this.words[s]=67108863&t;for(;0!==o&&s<n.length;s++)o=(t=(0|n.words[s])+o)>>26,this.words[s]=67108863&t;if(0===o&&s<n.length&&n!==this)for(;s<n.length;s++)this.words[s]=n.words[s];return this.length=Math.max(this.length,s),n!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(e){return this.clone().isub(e)};var p=function(e,t,n){var r,i,o,s=e.words,a=t.words,u=n.words,c=0,l=0|s[0],h=8191&l,d=l>>>13,f=0|s[1],p=8191&f,m=f>>>13,g=0|s[2],b=8191&g,v=g>>>13,y=0|s[3],_=8191&y,w=y>>>13,E=0|s[4],S=8191&E,M=E>>>13,O=0|s[5],A=8191&O,C=O>>>13,T=0|s[6],k=8191&T,x=T>>>13,j=0|s[7],I=8191&j,R=j>>>13,N=0|s[8],P=8191&N,D=N>>>13,U=0|s[9],L=8191&U,F=U>>>13,B=0|a[0],H=8191&B,q=B>>>13,V=0|a[1],G=8191&V,z=V>>>13,W=0|a[2],K=8191&W,Y=W>>>13,Q=0|a[3],J=8191&Q,Z=Q>>>13,$=0|a[4],X=8191&$,ee=$>>>13,te=0|a[5],ne=8191&te,re=te>>>13,ie=0|a[6],oe=8191&ie,se=ie>>>13,ae=0|a[7],ue=8191&ae,ce=ae>>>13,le=0|a[8],he=8191&le,de=le>>>13,fe=0|a[9],pe=8191&fe,me=fe>>>13;n.negative=e.negative^t.negative,n.length=19;var ge=(c+(r=Math.imul(h,H))|0)+((8191&(i=(i=Math.imul(h,q))+Math.imul(d,H)|0))<<13)|0;c=((o=Math.imul(d,q))+(i>>>13)|0)+(ge>>>26)|0,ge&=67108863,r=Math.imul(p,H),i=(i=Math.imul(p,q))+Math.imul(m,H)|0,o=Math.imul(m,q);var be=(c+(r=r+Math.imul(h,G)|0)|0)+((8191&(i=(i=i+Math.imul(h,z)|0)+Math.imul(d,G)|0))<<13)|0;c=((o=o+Math.imul(d,z)|0)+(i>>>13)|0)+(be>>>26)|0,be&=67108863,r=Math.imul(b,H),i=(i=Math.imul(b,q))+Math.imul(v,H)|0,o=Math.imul(v,q),r=r+Math.imul(p,G)|0,i=(i=i+Math.imul(p,z)|0)+Math.imul(m,G)|0,o=o+Math.imul(m,z)|0;var ve=(c+(r=r+Math.imul(h,K)|0)|0)+((8191&(i=(i=i+Math.imul(h,Y)|0)+Math.imul(d,K)|0))<<13)|0;c=((o=o+Math.imul(d,Y)|0)+(i>>>13)|0)+(ve>>>26)|0,ve&=67108863,r=Math.imul(_,H),i=(i=Math.imul(_,q))+Math.imul(w,H)|0,o=Math.imul(w,q),r=r+Math.imul(b,G)|0,i=(i=i+Math.imul(b,z)|0)+Math.imul(v,G)|0,o=o+Math.imul(v,z)|0,r=r+Math.imul(p,K)|0,i=(i=i+Math.imul(p,Y)|0)+Math.imul(m,K)|0,o=o+Math.imul(m,Y)|0;var ye=(c+(r=r+Math.imul(h,J)|0)|0)+((8191&(i=(i=i+Math.imul(h,Z)|0)+Math.imul(d,J)|0))<<13)|0;c=((o=o+Math.imul(d,Z)|0)+(i>>>13)|0)+(ye>>>26)|0,ye&=67108863,r=Math.imul(S,H),i=(i=Math.imul(S,q))+Math.imul(M,H)|0,o=Math.imul(M,q),r=r+Math.imul(_,G)|0,i=(i=i+Math.imul(_,z)|0)+Math.imul(w,G)|0,o=o+Math.imul(w,z)|0,r=r+Math.imul(b,K)|0,i=(i=i+Math.imul(b,Y)|0)+Math.imul(v,K)|0,o=o+Math.imul(v,Y)|0,r=r+Math.imul(p,J)|0,i=(i=i+Math.imul(p,Z)|0)+Math.imul(m,J)|0,o=o+Math.imul(m,Z)|0;var _e=(c+(r=r+Math.imul(h,X)|0)|0)+((8191&(i=(i=i+Math.imul(h,ee)|0)+Math.imul(d,X)|0))<<13)|0;c=((o=o+Math.imul(d,ee)|0)+(i>>>13)|0)+(_e>>>26)|0,_e&=67108863,r=Math.imul(A,H),i=(i=Math.imul(A,q))+Math.imul(C,H)|0,o=Math.imul(C,q),r=r+Math.imul(S,G)|0,i=(i=i+Math.imul(S,z)|0)+Math.imul(M,G)|0,o=o+Math.imul(M,z)|0,r=r+Math.imul(_,K)|0,i=(i=i+Math.imul(_,Y)|0)+Math.imul(w,K)|0,o=o+Math.imul(w,Y)|0,r=r+Math.imul(b,J)|0,i=(i=i+Math.imul(b,Z)|0)+Math.imul(v,J)|0,o=o+Math.imul(v,Z)|0,r=r+Math.imul(p,X)|0,i=(i=i+Math.imul(p,ee)|0)+Math.imul(m,X)|0,o=o+Math.imul(m,ee)|0;var we=(c+(r=r+Math.imul(h,ne)|0)|0)+((8191&(i=(i=i+Math.imul(h,re)|0)+Math.imul(d,ne)|0))<<13)|0;c=((o=o+Math.imul(d,re)|0)+(i>>>13)|0)+(we>>>26)|0,we&=67108863,r=Math.imul(k,H),i=(i=Math.imul(k,q))+Math.imul(x,H)|0,o=Math.imul(x,q),r=r+Math.imul(A,G)|0,i=(i=i+Math.imul(A,z)|0)+Math.imul(C,G)|0,o=o+Math.imul(C,z)|0,r=r+Math.imul(S,K)|0,i=(i=i+Math.imul(S,Y)|0)+Math.imul(M,K)|0,o=o+Math.imul(M,Y)|0,r=r+Math.imul(_,J)|0,i=(i=i+Math.imul(_,Z)|0)+Math.imul(w,J)|0,o=o+Math.imul(w,Z)|0,r=r+Math.imul(b,X)|0,i=(i=i+Math.imul(b,ee)|0)+Math.imul(v,X)|0,o=o+Math.imul(v,ee)|0,r=r+Math.imul(p,ne)|0,i=(i=i+Math.imul(p,re)|0)+Math.imul(m,ne)|0,o=o+Math.imul(m,re)|0;var Ee=(c+(r=r+Math.imul(h,oe)|0)|0)+((8191&(i=(i=i+Math.imul(h,se)|0)+Math.imul(d,oe)|0))<<13)|0;c=((o=o+Math.imul(d,se)|0)+(i>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,r=Math.imul(I,H),i=(i=Math.imul(I,q))+Math.imul(R,H)|0,o=Math.imul(R,q),r=r+Math.imul(k,G)|0,i=(i=i+Math.imul(k,z)|0)+Math.imul(x,G)|0,o=o+Math.imul(x,z)|0,r=r+Math.imul(A,K)|0,i=(i=i+Math.imul(A,Y)|0)+Math.imul(C,K)|0,o=o+Math.imul(C,Y)|0,r=r+Math.imul(S,J)|0,i=(i=i+Math.imul(S,Z)|0)+Math.imul(M,J)|0,o=o+Math.imul(M,Z)|0,r=r+Math.imul(_,X)|0,i=(i=i+Math.imul(_,ee)|0)+Math.imul(w,X)|0,o=o+Math.imul(w,ee)|0,r=r+Math.imul(b,ne)|0,i=(i=i+Math.imul(b,re)|0)+Math.imul(v,ne)|0,o=o+Math.imul(v,re)|0,r=r+Math.imul(p,oe)|0,i=(i=i+Math.imul(p,se)|0)+Math.imul(m,oe)|0,o=o+Math.imul(m,se)|0;var Se=(c+(r=r+Math.imul(h,ue)|0)|0)+((8191&(i=(i=i+Math.imul(h,ce)|0)+Math.imul(d,ue)|0))<<13)|0;c=((o=o+Math.imul(d,ce)|0)+(i>>>13)|0)+(Se>>>26)|0,Se&=67108863,r=Math.imul(P,H),i=(i=Math.imul(P,q))+Math.imul(D,H)|0,o=Math.imul(D,q),r=r+Math.imul(I,G)|0,i=(i=i+Math.imul(I,z)|0)+Math.imul(R,G)|0,o=o+Math.imul(R,z)|0,r=r+Math.imul(k,K)|0,i=(i=i+Math.imul(k,Y)|0)+Math.imul(x,K)|0,o=o+Math.imul(x,Y)|0,r=r+Math.imul(A,J)|0,i=(i=i+Math.imul(A,Z)|0)+Math.imul(C,J)|0,o=o+Math.imul(C,Z)|0,r=r+Math.imul(S,X)|0,i=(i=i+Math.imul(S,ee)|0)+Math.imul(M,X)|0,o=o+Math.imul(M,ee)|0,r=r+Math.imul(_,ne)|0,i=(i=i+Math.imul(_,re)|0)+Math.imul(w,ne)|0,o=o+Math.imul(w,re)|0,r=r+Math.imul(b,oe)|0,i=(i=i+Math.imul(b,se)|0)+Math.imul(v,oe)|0,o=o+Math.imul(v,se)|0,r=r+Math.imul(p,ue)|0,i=(i=i+Math.imul(p,ce)|0)+Math.imul(m,ue)|0,o=o+Math.imul(m,ce)|0;var Me=(c+(r=r+Math.imul(h,he)|0)|0)+((8191&(i=(i=i+Math.imul(h,de)|0)+Math.imul(d,he)|0))<<13)|0;c=((o=o+Math.imul(d,de)|0)+(i>>>13)|0)+(Me>>>26)|0,Me&=67108863,r=Math.imul(L,H),i=(i=Math.imul(L,q))+Math.imul(F,H)|0,o=Math.imul(F,q),r=r+Math.imul(P,G)|0,i=(i=i+Math.imul(P,z)|0)+Math.imul(D,G)|0,o=o+Math.imul(D,z)|0,r=r+Math.imul(I,K)|0,i=(i=i+Math.imul(I,Y)|0)+Math.imul(R,K)|0,o=o+Math.imul(R,Y)|0,r=r+Math.imul(k,J)|0,i=(i=i+Math.imul(k,Z)|0)+Math.imul(x,J)|0,o=o+Math.imul(x,Z)|0,r=r+Math.imul(A,X)|0,i=(i=i+Math.imul(A,ee)|0)+Math.imul(C,X)|0,o=o+Math.imul(C,ee)|0,r=r+Math.imul(S,ne)|0,i=(i=i+Math.imul(S,re)|0)+Math.imul(M,ne)|0,o=o+Math.imul(M,re)|0,r=r+Math.imul(_,oe)|0,i=(i=i+Math.imul(_,se)|0)+Math.imul(w,oe)|0,o=o+Math.imul(w,se)|0,r=r+Math.imul(b,ue)|0,i=(i=i+Math.imul(b,ce)|0)+Math.imul(v,ue)|0,o=o+Math.imul(v,ce)|0,r=r+Math.imul(p,he)|0,i=(i=i+Math.imul(p,de)|0)+Math.imul(m,he)|0,o=o+Math.imul(m,de)|0;var Oe=(c+(r=r+Math.imul(h,pe)|0)|0)+((8191&(i=(i=i+Math.imul(h,me)|0)+Math.imul(d,pe)|0))<<13)|0;c=((o=o+Math.imul(d,me)|0)+(i>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,r=Math.imul(L,G),i=(i=Math.imul(L,z))+Math.imul(F,G)|0,o=Math.imul(F,z),r=r+Math.imul(P,K)|0,i=(i=i+Math.imul(P,Y)|0)+Math.imul(D,K)|0,o=o+Math.imul(D,Y)|0,r=r+Math.imul(I,J)|0,i=(i=i+Math.imul(I,Z)|0)+Math.imul(R,J)|0,o=o+Math.imul(R,Z)|0,r=r+Math.imul(k,X)|0,i=(i=i+Math.imul(k,ee)|0)+Math.imul(x,X)|0,o=o+Math.imul(x,ee)|0,r=r+Math.imul(A,ne)|0,i=(i=i+Math.imul(A,re)|0)+Math.imul(C,ne)|0,o=o+Math.imul(C,re)|0,r=r+Math.imul(S,oe)|0,i=(i=i+Math.imul(S,se)|0)+Math.imul(M,oe)|0,o=o+Math.imul(M,se)|0,r=r+Math.imul(_,ue)|0,i=(i=i+Math.imul(_,ce)|0)+Math.imul(w,ue)|0,o=o+Math.imul(w,ce)|0,r=r+Math.imul(b,he)|0,i=(i=i+Math.imul(b,de)|0)+Math.imul(v,he)|0,o=o+Math.imul(v,de)|0;var Ae=(c+(r=r+Math.imul(p,pe)|0)|0)+((8191&(i=(i=i+Math.imul(p,me)|0)+Math.imul(m,pe)|0))<<13)|0;c=((o=o+Math.imul(m,me)|0)+(i>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,r=Math.imul(L,K),i=(i=Math.imul(L,Y))+Math.imul(F,K)|0,o=Math.imul(F,Y),r=r+Math.imul(P,J)|0,i=(i=i+Math.imul(P,Z)|0)+Math.imul(D,J)|0,o=o+Math.imul(D,Z)|0,r=r+Math.imul(I,X)|0,i=(i=i+Math.imul(I,ee)|0)+Math.imul(R,X)|0,o=o+Math.imul(R,ee)|0,r=r+Math.imul(k,ne)|0,i=(i=i+Math.imul(k,re)|0)+Math.imul(x,ne)|0,o=o+Math.imul(x,re)|0,r=r+Math.imul(A,oe)|0,i=(i=i+Math.imul(A,se)|0)+Math.imul(C,oe)|0,o=o+Math.imul(C,se)|0,r=r+Math.imul(S,ue)|0,i=(i=i+Math.imul(S,ce)|0)+Math.imul(M,ue)|0,o=o+Math.imul(M,ce)|0,r=r+Math.imul(_,he)|0,i=(i=i+Math.imul(_,de)|0)+Math.imul(w,he)|0,o=o+Math.imul(w,de)|0;var Ce=(c+(r=r+Math.imul(b,pe)|0)|0)+((8191&(i=(i=i+Math.imul(b,me)|0)+Math.imul(v,pe)|0))<<13)|0;c=((o=o+Math.imul(v,me)|0)+(i>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,r=Math.imul(L,J),i=(i=Math.imul(L,Z))+Math.imul(F,J)|0,o=Math.imul(F,Z),r=r+Math.imul(P,X)|0,i=(i=i+Math.imul(P,ee)|0)+Math.imul(D,X)|0,o=o+Math.imul(D,ee)|0,r=r+Math.imul(I,ne)|0,i=(i=i+Math.imul(I,re)|0)+Math.imul(R,ne)|0,o=o+Math.imul(R,re)|0,r=r+Math.imul(k,oe)|0,i=(i=i+Math.imul(k,se)|0)+Math.imul(x,oe)|0,o=o+Math.imul(x,se)|0,r=r+Math.imul(A,ue)|0,i=(i=i+Math.imul(A,ce)|0)+Math.imul(C,ue)|0,o=o+Math.imul(C,ce)|0,r=r+Math.imul(S,he)|0,i=(i=i+Math.imul(S,de)|0)+Math.imul(M,he)|0,o=o+Math.imul(M,de)|0;var Te=(c+(r=r+Math.imul(_,pe)|0)|0)+((8191&(i=(i=i+Math.imul(_,me)|0)+Math.imul(w,pe)|0))<<13)|0;c=((o=o+Math.imul(w,me)|0)+(i>>>13)|0)+(Te>>>26)|0,Te&=67108863,r=Math.imul(L,X),i=(i=Math.imul(L,ee))+Math.imul(F,X)|0,o=Math.imul(F,ee),r=r+Math.imul(P,ne)|0,i=(i=i+Math.imul(P,re)|0)+Math.imul(D,ne)|0,o=o+Math.imul(D,re)|0,r=r+Math.imul(I,oe)|0,i=(i=i+Math.imul(I,se)|0)+Math.imul(R,oe)|0,o=o+Math.imul(R,se)|0,r=r+Math.imul(k,ue)|0,i=(i=i+Math.imul(k,ce)|0)+Math.imul(x,ue)|0,o=o+Math.imul(x,ce)|0,r=r+Math.imul(A,he)|0,i=(i=i+Math.imul(A,de)|0)+Math.imul(C,he)|0,o=o+Math.imul(C,de)|0;var ke=(c+(r=r+Math.imul(S,pe)|0)|0)+((8191&(i=(i=i+Math.imul(S,me)|0)+Math.imul(M,pe)|0))<<13)|0;c=((o=o+Math.imul(M,me)|0)+(i>>>13)|0)+(ke>>>26)|0,ke&=67108863,r=Math.imul(L,ne),i=(i=Math.imul(L,re))+Math.imul(F,ne)|0,o=Math.imul(F,re),r=r+Math.imul(P,oe)|0,i=(i=i+Math.imul(P,se)|0)+Math.imul(D,oe)|0,o=o+Math.imul(D,se)|0,r=r+Math.imul(I,ue)|0,i=(i=i+Math.imul(I,ce)|0)+Math.imul(R,ue)|0,o=o+Math.imul(R,ce)|0,r=r+Math.imul(k,he)|0,i=(i=i+Math.imul(k,de)|0)+Math.imul(x,he)|0,o=o+Math.imul(x,de)|0;var xe=(c+(r=r+Math.imul(A,pe)|0)|0)+((8191&(i=(i=i+Math.imul(A,me)|0)+Math.imul(C,pe)|0))<<13)|0;c=((o=o+Math.imul(C,me)|0)+(i>>>13)|0)+(xe>>>26)|0,xe&=67108863,r=Math.imul(L,oe),i=(i=Math.imul(L,se))+Math.imul(F,oe)|0,o=Math.imul(F,se),r=r+Math.imul(P,ue)|0,i=(i=i+Math.imul(P,ce)|0)+Math.imul(D,ue)|0,o=o+Math.imul(D,ce)|0,r=r+Math.imul(I,he)|0,i=(i=i+Math.imul(I,de)|0)+Math.imul(R,he)|0,o=o+Math.imul(R,de)|0;var je=(c+(r=r+Math.imul(k,pe)|0)|0)+((8191&(i=(i=i+Math.imul(k,me)|0)+Math.imul(x,pe)|0))<<13)|0;c=((o=o+Math.imul(x,me)|0)+(i>>>13)|0)+(je>>>26)|0,je&=67108863,r=Math.imul(L,ue),i=(i=Math.imul(L,ce))+Math.imul(F,ue)|0,o=Math.imul(F,ce),r=r+Math.imul(P,he)|0,i=(i=i+Math.imul(P,de)|0)+Math.imul(D,he)|0,o=o+Math.imul(D,de)|0;var Ie=(c+(r=r+Math.imul(I,pe)|0)|0)+((8191&(i=(i=i+Math.imul(I,me)|0)+Math.imul(R,pe)|0))<<13)|0;c=((o=o+Math.imul(R,me)|0)+(i>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,r=Math.imul(L,he),i=(i=Math.imul(L,de))+Math.imul(F,he)|0,o=Math.imul(F,de);var Re=(c+(r=r+Math.imul(P,pe)|0)|0)+((8191&(i=(i=i+Math.imul(P,me)|0)+Math.imul(D,pe)|0))<<13)|0;c=((o=o+Math.imul(D,me)|0)+(i>>>13)|0)+(Re>>>26)|0,Re&=67108863;var Ne=(c+(r=Math.imul(L,pe))|0)+((8191&(i=(i=Math.imul(L,me))+Math.imul(F,pe)|0))<<13)|0;return c=((o=Math.imul(F,me))+(i>>>13)|0)+(Ne>>>26)|0,Ne&=67108863,u[0]=ge,u[1]=be,u[2]=ve,u[3]=ye,u[4]=_e,u[5]=we,u[6]=Ee,u[7]=Se,u[8]=Me,u[9]=Oe,u[10]=Ae,u[11]=Ce,u[12]=Te,u[13]=ke,u[14]=xe,u[15]=je,u[16]=Ie,u[17]=Re,u[18]=Ne,0!==c&&(u[19]=c,n.length++),n};function m(e,t,n){return(new g).mulp(e,t,n)}function g(e,t){this.x=e,this.y=t}Math.imul||(p=f),o.prototype.mulTo=function(e,t){var n=this.length+e.length;return 10===this.length&&10===e.length?p(this,e,t):n<63?f(this,e,t):n<1024?function(e,t,n){n.negative=t.negative^e.negative,n.length=e.length+t.length;for(var r=0,i=0,o=0;o<n.length-1;o++){var s=i;i=0;for(var a=67108863&r,u=Math.min(o,t.length-1),c=Math.max(0,o-e.length+1);c<=u;c++){var l=o-c,h=(0|e.words[l])*(0|t.words[c]),d=67108863&h;a=67108863&(d=d+a|0),i+=(s=(s=s+(h/67108864|0)|0)+(d>>>26)|0)>>>26,s&=67108863}n.words[o]=a,r=s,s=i}return 0!==r?n.words[o]=r:n.length--,n.strip()}(this,e,t):m(this,e,t)},g.prototype.makeRBT=function(e){for(var t=new Array(e),n=o.prototype._countBits(e)-1,r=0;r<e;r++)t[r]=this.revBin(r,n,e);return t},g.prototype.revBin=function(e,t,n){if(0===e||e===n-1)return e;for(var r=0,i=0;i<t;i++)r|=(1&e)<<t-i-1,e>>=1;return r},g.prototype.permute=function(e,t,n,r,i,o){for(var s=0;s<o;s++)r[s]=t[e[s]],i[s]=n[e[s]]},g.prototype.transform=function(e,t,n,r,i,o){this.permute(o,e,t,n,r,i);for(var s=1;s<i;s<<=1)for(var a=s<<1,u=Math.cos(2*Math.PI/a),c=Math.sin(2*Math.PI/a),l=0;l<i;l+=a)for(var h=u,d=c,f=0;f<s;f++){var p=n[l+f],m=r[l+f],g=n[l+f+s],b=r[l+f+s],v=h*g-d*b;b=h*b+d*g,g=v,n[l+f]=p+g,r[l+f]=m+b,n[l+f+s]=p-g,r[l+f+s]=m-b,f!==a&&(v=u*h-c*d,d=u*d+c*h,h=v)}},g.prototype.guessLen13b=function(e,t){var n=1|Math.max(t,e),r=1&n,i=0;for(n=n/2|0;n;n>>>=1)i++;return 1<<i+1+r},g.prototype.conjugate=function(e,t,n){if(!(n<=1))for(var r=0;r<n/2;r++){var i=e[r];e[r]=e[n-r-1],e[n-r-1]=i,i=t[r],t[r]=-t[n-r-1],t[n-r-1]=-i}},g.prototype.normalize13b=function(e,t){for(var n=0,r=0;r<t/2;r++){var i=8192*Math.round(e[2*r+1]/t)+Math.round(e[2*r]/t)+n;e[r]=67108863&i,n=i<67108864?0:i/67108864|0}return e},g.prototype.convert13b=function(e,t,n,i){for(var o=0,s=0;s<t;s++)o+=0|e[s],n[2*s]=8191&o,o>>>=13,n[2*s+1]=8191&o,o>>>=13;for(s=2*t;s<i;++s)n[s]=0;r(0===o),r(0==(-8192&o))},g.prototype.stub=function(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=0;return t},g.prototype.mulp=function(e,t,n){var r=2*this.guessLen13b(e.length,t.length),i=this.makeRBT(r),o=this.stub(r),s=new Array(r),a=new Array(r),u=new Array(r),c=new Array(r),l=new Array(r),h=new Array(r),d=n.words;d.length=r,this.convert13b(e.words,e.length,s,r),this.convert13b(t.words,t.length,c,r),this.transform(s,o,a,u,r,i),this.transform(c,o,l,h,r,i);for(var f=0;f<r;f++){var p=a[f]*l[f]-u[f]*h[f];u[f]=a[f]*h[f]+u[f]*l[f],a[f]=p}return this.conjugate(a,u,r),this.transform(a,u,d,o,r,i),this.conjugate(d,o,r),this.normalize13b(d,r),n.negative=e.negative^t.negative,n.length=e.length+t.length,n.strip()},o.prototype.mul=function(e){var t=new o(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},o.prototype.mulf=function(e){var t=new o(null);return t.words=new Array(this.length+e.length),m(this,e,t)},o.prototype.imul=function(e){return this.clone().mulTo(e,this)},o.prototype.imuln=function(e){r("number"==typeof e),r(e<67108864);for(var t=0,n=0;n<this.length;n++){var i=(0|this.words[n])*e,o=(67108863&i)+(67108863&t);t>>=26,t+=i/67108864|0,t+=o>>>26,this.words[n]=67108863&o}return 0!==t&&(this.words[n]=t,this.length++),this},o.prototype.muln=function(e){return this.clone().imuln(e)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),n=0;n<t.length;n++){var r=n/26|0,i=n%26;t[n]=(e.words[r]&1<<i)>>>i}return t}(e);if(0===t.length)return new o(1);for(var n=this,r=0;r<t.length&&0===t[r];r++,n=n.sqr());if(++r<t.length)for(var i=n.sqr();r<t.length;r++,i=i.sqr())0!==t[r]&&(n=n.mul(i));return n},o.prototype.iushln=function(e){r("number"==typeof e&&e>=0);var t,n=e%26,i=(e-n)/26,o=67108863>>>26-n<<26-n;if(0!==n){var s=0;for(t=0;t<this.length;t++){var a=this.words[t]&o,u=(0|this.words[t])-a<<n;this.words[t]=u|s,s=a>>>26-n}s&&(this.words[t]=s,this.length++)}if(0!==i){for(t=this.length-1;t>=0;t--)this.words[t+i]=this.words[t];for(t=0;t<i;t++)this.words[t]=0;this.length+=i}return this.strip()},o.prototype.ishln=function(e){return r(0===this.negative),this.iushln(e)},o.prototype.iushrn=function(e,t,n){var i;r("number"==typeof e&&e>=0),i=t?(t-t%26)/26:0;var o=e%26,s=Math.min((e-o)/26,this.length),a=67108863^67108863>>>o<<o,u=n;if(i-=s,i=Math.max(0,i),u){for(var c=0;c<s;c++)u.words[c]=this.words[c];u.length=s}if(0===s);else if(this.length>s)for(this.length-=s,c=0;c<this.length;c++)this.words[c]=this.words[c+s];else this.words[0]=0,this.length=1;var l=0;for(c=this.length-1;c>=0&&(0!==l||c>=i);c--){var h=0|this.words[c];this.words[c]=l<<26-o|h>>>o,l=h&a}return u&&0!==l&&(u.words[u.length++]=l),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(e,t,n){return r(0===this.negative),this.iushrn(e,t,n)},o.prototype.shln=function(e){return this.clone().ishln(e)},o.prototype.ushln=function(e){return this.clone().iushln(e)},o.prototype.shrn=function(e){return this.clone().ishrn(e)},o.prototype.ushrn=function(e){return this.clone().iushrn(e)},o.prototype.testn=function(e){r("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26,i=1<<t;return!(this.length<=n)&&!!(this.words[n]&i)},o.prototype.imaskn=function(e){r("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26;if(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=n)return this;if(0!==t&&n++,this.length=Math.min(n,this.length),0!==t){var i=67108863^67108863>>>t<<t;this.words[this.length-1]&=i}return this.strip()},o.prototype.maskn=function(e){return this.clone().imaskn(e)},o.prototype.iaddn=function(e){return r("number"==typeof e),r(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},o.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},o.prototype.isubn=function(e){if(r("number"==typeof e),r(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this.strip()},o.prototype.addn=function(e){return this.clone().iaddn(e)},o.prototype.subn=function(e){return this.clone().isubn(e)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(e,t,n){var i,o,s=e.length+n;this._expand(s);var a=0;for(i=0;i<e.length;i++){o=(0|this.words[i+n])+a;var u=(0|e.words[i])*t;a=((o-=67108863&u)>>26)-(u/67108864|0),this.words[i+n]=67108863&o}for(;i<this.length-n;i++)a=(o=(0|this.words[i+n])+a)>>26,this.words[i+n]=67108863&o;if(0===a)return this.strip();for(r(-1===a),a=0,i=0;i<this.length;i++)a=(o=-(0|this.words[i])+a)>>26,this.words[i]=67108863&o;return this.negative=1,this.strip()},o.prototype._wordDiv=function(e,t){var n=(this.length,e.length),r=this.clone(),i=e,s=0|i.words[i.length-1];0!==(n=26-this._countBits(s))&&(i=i.ushln(n),r.iushln(n),s=0|i.words[i.length-1]);var a,u=r.length-i.length;if("mod"!==t){(a=new o(null)).length=u+1,a.words=new Array(a.length);for(var c=0;c<a.length;c++)a.words[c]=0}var l=r.clone()._ishlnsubmul(i,1,u);0===l.negative&&(r=l,a&&(a.words[u]=1));for(var h=u-1;h>=0;h--){var d=67108864*(0|r.words[i.length+h])+(0|r.words[i.length+h-1]);for(d=Math.min(d/s|0,67108863),r._ishlnsubmul(i,d,h);0!==r.negative;)d--,r.negative=0,r._ishlnsubmul(i,1,h),r.isZero()||(r.negative^=1);a&&(a.words[h]=d)}return a&&a.strip(),r.strip(),"div"!==t&&0!==n&&r.iushrn(n),{div:a||null,mod:r}},o.prototype.divmod=function(e,t,n){return r(!e.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===e.negative?(a=this.neg().divmod(e,t),"mod"!==t&&(i=a.div.neg()),"div"!==t&&(s=a.mod.neg(),n&&0!==s.negative&&s.iadd(e)),{div:i,mod:s}):0===this.negative&&0!==e.negative?(a=this.divmod(e.neg(),t),"mod"!==t&&(i=a.div.neg()),{div:i,mod:a.mod}):0!=(this.negative&e.negative)?(a=this.neg().divmod(e.neg(),t),"div"!==t&&(s=a.mod.neg(),n&&0!==s.negative&&s.isub(e)),{div:a.div,mod:s}):e.length>this.length||this.cmp(e)<0?{div:new o(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new o(this.modn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new o(this.modn(e.words[0]))}:this._wordDiv(e,t);var i,s,a},o.prototype.div=function(e){return this.divmod(e,"div",!1).div},o.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},o.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},o.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var n=0!==t.div.negative?t.mod.isub(e):t.mod,r=e.ushrn(1),i=e.andln(1),o=n.cmp(r);return o<0||1===i&&0===o?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},o.prototype.modn=function(e){r(e<=67108863);for(var t=(1<<26)%e,n=0,i=this.length-1;i>=0;i--)n=(t*n+(0|this.words[i]))%e;return n},o.prototype.idivn=function(e){r(e<=67108863);for(var t=0,n=this.length-1;n>=0;n--){var i=(0|this.words[n])+67108864*t;this.words[n]=i/e|0,t=i%e}return this.strip()},o.prototype.divn=function(e){return this.clone().idivn(e)},o.prototype.egcd=function(e){r(0===e.negative),r(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i=new o(1),s=new o(0),a=new o(0),u=new o(1),c=0;t.isEven()&&n.isEven();)t.iushrn(1),n.iushrn(1),++c;for(var l=n.clone(),h=t.clone();!t.isZero();){for(var d=0,f=1;0==(t.words[0]&f)&&d<26;++d,f<<=1);if(d>0)for(t.iushrn(d);d-- >0;)(i.isOdd()||s.isOdd())&&(i.iadd(l),s.isub(h)),i.iushrn(1),s.iushrn(1);for(var p=0,m=1;0==(n.words[0]&m)&&p<26;++p,m<<=1);if(p>0)for(n.iushrn(p);p-- >0;)(a.isOdd()||u.isOdd())&&(a.iadd(l),u.isub(h)),a.iushrn(1),u.iushrn(1);t.cmp(n)>=0?(t.isub(n),i.isub(a),s.isub(u)):(n.isub(t),a.isub(i),u.isub(s))}return{a:a,b:u,gcd:n.iushln(c)}},o.prototype._invmp=function(e){r(0===e.negative),r(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i,s=new o(1),a=new o(0),u=n.clone();t.cmpn(1)>0&&n.cmpn(1)>0;){for(var c=0,l=1;0==(t.words[0]&l)&&c<26;++c,l<<=1);if(c>0)for(t.iushrn(c);c-- >0;)s.isOdd()&&s.iadd(u),s.iushrn(1);for(var h=0,d=1;0==(n.words[0]&d)&&h<26;++h,d<<=1);if(h>0)for(n.iushrn(h);h-- >0;)a.isOdd()&&a.iadd(u),a.iushrn(1);t.cmp(n)>=0?(t.isub(n),s.isub(a)):(n.isub(t),a.isub(s))}return(i=0===t.cmpn(1)?s:a).cmpn(0)<0&&i.iadd(e),i},o.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),n=e.clone();t.negative=0,n.negative=0;for(var r=0;t.isEven()&&n.isEven();r++)t.iushrn(1),n.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;n.isEven();)n.iushrn(1);var i=t.cmp(n);if(i<0){var o=t;t=n,n=o}else if(0===i||0===n.cmpn(1))break;t.isub(n)}return n.iushln(r)},o.prototype.invm=function(e){return this.egcd(e).a.umod(e)},o.prototype.isEven=function(){return 0==(1&this.words[0])},o.prototype.isOdd=function(){return 1==(1&this.words[0])},o.prototype.andln=function(e){return this.words[0]&e},o.prototype.bincn=function(e){r("number"==typeof e);var t=e%26,n=(e-t)/26,i=1<<t;if(this.length<=n)return this._expand(n+1),this.words[n]|=i,this;for(var o=i,s=n;0!==o&&s<this.length;s++){var a=0|this.words[s];o=(a+=o)>>>26,a&=67108863,this.words[s]=a}return 0!==o&&(this.words[s]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(e){var t,n=e<0;if(0!==this.negative&&!n)return-1;if(0===this.negative&&n)return 1;if(this.strip(),this.length>1)t=1;else{n&&(e=-e),r(e<=67108863,"Number is too big");var i=0|this.words[0];t=i===e?0:i<e?-1:1}return 0!==this.negative?0|-t:t},o.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},o.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,n=this.length-1;n>=0;n--){var r=0|this.words[n],i=0|e.words[n];if(r!==i){r<i?t=-1:r>i&&(t=1);break}}return t},o.prototype.gtn=function(e){return 1===this.cmpn(e)},o.prototype.gt=function(e){return 1===this.cmp(e)},o.prototype.gten=function(e){return this.cmpn(e)>=0},o.prototype.gte=function(e){return this.cmp(e)>=0},o.prototype.ltn=function(e){return-1===this.cmpn(e)},o.prototype.lt=function(e){return-1===this.cmp(e)},o.prototype.lten=function(e){return this.cmpn(e)<=0},o.prototype.lte=function(e){return this.cmp(e)<=0},o.prototype.eqn=function(e){return 0===this.cmpn(e)},o.prototype.eq=function(e){return 0===this.cmp(e)},o.red=function(e){return new S(e)},o.prototype.toRed=function(e){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},o.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(e){return this.red=e,this},o.prototype.forceRed=function(e){return r(!this.red,"Already a number in reduction context"),this._forceRed(e)},o.prototype.redAdd=function(e){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},o.prototype.redIAdd=function(e){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},o.prototype.redSub=function(e){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},o.prototype.redISub=function(e){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},o.prototype.redShl=function(e){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},o.prototype.redMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},o.prototype.redIMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},o.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(e){return r(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var b={k256:null,p224:null,p192:null,p25519:null};function v(e,t){this.name=e,this.p=new o(t,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function y(){v.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function _(){v.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function w(){v.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function E(){v.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function S(e){if("string"==typeof e){var t=o._prime(e);this.m=t.p,this.prime=t}else r(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function M(e){S.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}v.prototype._tmp=function(){var e=new o(null);return e.words=new Array(Math.ceil(this.n/13)),e},v.prototype.ireduce=function(e){var t,n=e;do{this.split(n,this.tmp),t=(n=(n=this.imulK(n)).iadd(this.tmp)).bitLength()}while(t>this.n);var r=t<this.n?-1:n.ucmp(this.p);return 0===r?(n.words[0]=0,n.length=1):r>0?n.isub(this.p):void 0!==n.strip?n.strip():n._strip(),n},v.prototype.split=function(e,t){e.iushrn(this.n,0,t)},v.prototype.imulK=function(e){return e.imul(this.k)},i(y,v),y.prototype.split=function(e,t){for(var n=Math.min(e.length,9),r=0;r<n;r++)t.words[r]=e.words[r];if(t.length=n,e.length<=9)return e.words[0]=0,void(e.length=1);var i=e.words[9];for(t.words[t.length++]=4194303&i,r=10;r<e.length;r++){var o=0|e.words[r];e.words[r-10]=(4194303&o)<<4|i>>>22,i=o}i>>>=22,e.words[r-10]=i,0===i&&e.length>10?e.length-=10:e.length-=9},y.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,n=0;n<e.length;n++){var r=0|e.words[n];t+=977*r,e.words[n]=67108863&t,t=64*r+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},i(_,v),i(w,v),i(E,v),E.prototype.imulK=function(e){for(var t=0,n=0;n<e.length;n++){var r=19*(0|e.words[n])+t,i=67108863&r;r>>>=26,e.words[n]=i,t=r}return 0!==t&&(e.words[e.length++]=t),e},o._prime=function(e){if(b[e])return b[e];var t;if("k256"===e)t=new y;else if("p224"===e)t=new _;else if("p192"===e)t=new w;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new E}return b[e]=t,t},S.prototype._verify1=function(e){r(0===e.negative,"red works only with positives"),r(e.red,"red works only with red numbers")},S.prototype._verify2=function(e,t){r(0==(e.negative|t.negative),"red works only with positives"),r(e.red&&e.red===t.red,"red works only with red numbers")},S.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):e.umod(this.m)._forceRed(this)},S.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},S.prototype.add=function(e,t){this._verify2(e,t);var n=e.add(t);return n.cmp(this.m)>=0&&n.isub(this.m),n._forceRed(this)},S.prototype.iadd=function(e,t){this._verify2(e,t);var n=e.iadd(t);return n.cmp(this.m)>=0&&n.isub(this.m),n},S.prototype.sub=function(e,t){this._verify2(e,t);var n=e.sub(t);return n.cmpn(0)<0&&n.iadd(this.m),n._forceRed(this)},S.prototype.isub=function(e,t){this._verify2(e,t);var n=e.isub(t);return n.cmpn(0)<0&&n.iadd(this.m),n},S.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},S.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},S.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},S.prototype.isqr=function(e){return this.imul(e,e.clone())},S.prototype.sqr=function(e){return this.mul(e,e)},S.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(r(t%2==1),3===t){var n=this.m.add(new o(1)).iushrn(2);return this.pow(e,n)}for(var i=this.m.subn(1),s=0;!i.isZero()&&0===i.andln(1);)s++,i.iushrn(1);r(!i.isZero());var a=new o(1).toRed(this),u=a.redNeg(),c=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new o(2*l*l).toRed(this);0!==this.pow(l,c).cmp(u);)l.redIAdd(u);for(var h=this.pow(l,i),d=this.pow(e,i.addn(1).iushrn(1)),f=this.pow(e,i),p=s;0!==f.cmp(a);){for(var m=f,g=0;0!==m.cmp(a);g++)m=m.redSqr();r(g<p);var b=this.pow(h,new o(1).iushln(p-g-1));d=d.redMul(b),h=b.redSqr(),f=f.redMul(h),p=g}return d},S.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},S.prototype.pow=function(e,t){if(t.isZero())return new o(1).toRed(this);if(0===t.cmpn(1))return e.clone();var n=new Array(16);n[0]=new o(1).toRed(this),n[1]=e;for(var r=2;r<n.length;r++)n[r]=this.mul(n[r-1],e);var i=n[0],s=0,a=0,u=t.bitLength()%26;for(0===u&&(u=26),r=t.length-1;r>=0;r--){for(var c=t.words[r],l=u-1;l>=0;l--){var h=c>>l&1;i!==n[0]&&(i=this.sqr(i)),0!==h||0!==s?(s<<=1,s|=h,(4===++a||0===r&&0===l)&&(i=this.mul(i,n[s]),a=0,s=0)):a=0}u=26}return i},S.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},S.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},o.mont=function(e){return new M(e)},i(M,S),M.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},M.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},M.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var n=e.imul(t),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=n.isub(r).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},M.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new o(0)._forceRed(this);var n=e.mul(t),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=n.isub(r).iushrn(this.shift),s=i;return i.cmp(this.m)>=0?s=i.isub(this.m):i.cmpn(0)<0&&(s=i.iadd(this.m)),s._forceRed(this)},M.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(e,this)}).call(this,n(34)(e))},function(e,t,n){var r=n(235),i=n(82);function o(e){this.rand=e||new i.Rand}e.exports=o,o.create=function(e){return new o(e)},o.prototype._randbelow=function(e){var t=e.bitLength(),n=Math.ceil(t/8);do{var i=new r(this.rand.generate(n))}while(i.cmp(e)>=0);return i},o.prototype._randrange=function(e,t){var n=t.sub(e);return e.add(this._randbelow(n))},o.prototype.test=function(e,t,n){var i=e.bitLength(),o=r.mont(e),s=new r(1).toRed(o);t||(t=Math.max(1,i/48|0));for(var a=e.subn(1),u=0;!a.testn(u);u++);for(var c=e.shrn(u),l=a.toRed(o);t>0;t--){var h=this._randrange(new r(2),a);n&&n(h);var d=h.toRed(o).redPow(c);if(0!==d.cmp(s)&&0!==d.cmp(l)){for(var f=1;f<u;f++){if(0===(d=d.redSqr()).cmp(s))return!1;if(0===d.cmp(l))break}if(f===u)return!1}}return!0},o.prototype.getDivisor=function(e,t){var n=e.bitLength(),i=r.mont(e),o=new r(1).toRed(i);t||(t=Math.max(1,n/48|0));for(var s=e.subn(1),a=0;!s.testn(a);a++);for(var u=e.shrn(a),c=s.toRed(i);t>0;t--){var l=this._randrange(new r(2),s),h=e.gcd(l);if(0!==h.cmpn(1))return h;var d=l.toRed(i).redPow(u);if(0!==d.cmp(o)&&0!==d.cmp(c)){for(var f=1;f<a;f++){if(0===(d=d.redSqr()).cmp(o))return d.fromRed().subn(1).gcd(e);if(0===d.cmp(c))break}if(f===a)return(d=d.redSqr()).fromRed().subn(1).gcd(e)}}return!1}},function(e,t,n){"use strict";(function(t,r){var i;e.exports=O,O.ReadableState=M;n(36).EventEmitter;var o=function(e,t){return e.listeners(t).length},s=n(135),a=n(17).Buffer,u=t.Uint8Array||function(){};var c,l=n(242);c=l&&l.debuglog?l.debuglog("stream"):function(){};var h,d,f,p=n(243),m=n(136),g=n(137).getHighWaterMark,b=n(47).codes,v=b.ERR_INVALID_ARG_TYPE,y=b.ERR_STREAM_PUSH_AFTER_EOF,_=b.ERR_METHOD_NOT_IMPLEMENTED,w=b.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;n(7)(O,s);var E=m.errorOrDestroy,S=["error","close","destroy","pause","resume"];function M(e,t,r){i=i||n(48),e=e||{},"boolean"!=typeof r&&(r=t instanceof i),this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=g(this,e,"readableHighWaterMark",r),this.buffer=new p,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(h||(h=n(38).StringDecoder),this.decoder=new h(e.encoding),this.encoding=e.encoding)}function O(e){if(i=i||n(48),!(this instanceof O))return new O(e);var t=this instanceof i;this._readableState=new M(e,this,t),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),s.call(this)}function A(e,t,n,r,i){c("readableAddChunk",t);var o,s=e._readableState;if(null===t)s.reading=!1,function(e,t){if(c("onEofChunk"),t.ended)return;if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,t.sync?k(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,x(e)))}(e,s);else if(i||(o=function(e,t){var n;r=t,a.isBuffer(r)||r instanceof u||"string"==typeof t||void 0===t||e.objectMode||(n=new v("chunk",["string","Buffer","Uint8Array"],t));var r;return n}(s,t)),o)E(e,o);else if(s.objectMode||t&&t.length>0)if("string"==typeof t||s.objectMode||Object.getPrototypeOf(t)===a.prototype||(t=function(e){return a.from(e)}(t)),r)s.endEmitted?E(e,new w):C(e,s,t,!0);else if(s.ended)E(e,new y);else{if(s.destroyed)return!1;s.reading=!1,s.decoder&&!n?(t=s.decoder.write(t),s.objectMode||0!==t.length?C(e,s,t,!1):j(e,s)):C(e,s,t,!1)}else r||(s.reading=!1,j(e,s));return!s.ended&&(s.length<s.highWaterMark||0===s.length)}function C(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",n)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&k(e)),j(e,t)}Object.defineProperty(O.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),O.prototype.destroy=m.destroy,O.prototype._undestroy=m.undestroy,O.prototype._destroy=function(e,t){t(e)},O.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=a.from(e,t),t=""),n=!0),A(this,e,t,!1,n)},O.prototype.unshift=function(e){return A(this,e,null,!0,!1)},O.prototype.isPaused=function(){return!1===this._readableState.flowing},O.prototype.setEncoding=function(e){h||(h=n(38).StringDecoder);var t=new h(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,i="";null!==r;)i+=t.write(r.data),r=r.next;return this._readableState.buffer.clear(),""!==i&&this._readableState.buffer.push(i),this._readableState.length=i.length,this};function T(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=1073741824?e=1073741824:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function k(e){var t=e._readableState;c("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(c("emitReadable",t.flowing),t.emittedReadable=!0,r.nextTick(x,e))}function x(e){var t=e._readableState;c("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,D(e)}function j(e,t){t.readingMore||(t.readingMore=!0,r.nextTick(I,e,t))}function I(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var n=t.length;if(c("maybeReadMore read 0"),e.read(0),n===t.length)break}t.readingMore=!1}function R(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function N(e){c("readable nexttick read 0"),e.read(0)}function P(e,t){c("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),D(e),t.flowing&&!t.reading&&e.read(0)}function D(e){var t=e._readableState;for(c("flow",t.flowing);t.flowing&&null!==e.read(););}function U(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):n=t.buffer.consume(e,t.decoder),n);var n}function L(e){var t=e._readableState;c("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,r.nextTick(F,t,e))}function F(e,t){if(c("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var n=t._writableState;(!n||n.autoDestroy&&n.finished)&&t.destroy()}}function B(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}O.prototype.read=function(e){c("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return c("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?L(this):k(this),null;if(0===(e=T(e,t))&&t.ended)return 0===t.length&&L(this),null;var r,i=t.needReadable;return c("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&c("length less than watermark",i=!0),t.ended||t.reading?c("reading or ended",i=!1):i&&(c("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=T(n,t))),null===(r=e>0?U(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&L(this)),null!==r&&this.emit("data",r),r},O.prototype._read=function(e){E(this,new _("_read()"))},O.prototype.pipe=function(e,t){var n=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=e;break;case 1:i.pipes=[i.pipes,e];break;default:i.pipes.push(e)}i.pipesCount+=1,c("pipe count=%d opts=%j",i.pipesCount,t);var s=(!t||!1!==t.end)&&e!==r.stdout&&e!==r.stderr?u:g;function a(t,r){c("onunpipe"),t===n&&r&&!1===r.hasUnpiped&&(r.hasUnpiped=!0,c("cleanup"),e.removeListener("close",p),e.removeListener("finish",m),e.removeListener("drain",l),e.removeListener("error",f),e.removeListener("unpipe",a),n.removeListener("end",u),n.removeListener("end",g),n.removeListener("data",d),h=!0,!i.awaitDrain||e._writableState&&!e._writableState.needDrain||l())}function u(){c("onend"),e.end()}i.endEmitted?r.nextTick(s):n.once("end",s),e.on("unpipe",a);var l=function(e){return function(){var t=e._readableState;c("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&o(e,"data")&&(t.flowing=!0,D(e))}}(n);e.on("drain",l);var h=!1;function d(t){c("ondata");var r=e.write(t);c("dest.write",r),!1===r&&((1===i.pipesCount&&i.pipes===e||i.pipesCount>1&&-1!==B(i.pipes,e))&&!h&&(c("false write response, pause",i.awaitDrain),i.awaitDrain++),n.pause())}function f(t){c("onerror",t),g(),e.removeListener("error",f),0===o(e,"error")&&E(e,t)}function p(){e.removeListener("finish",m),g()}function m(){c("onfinish"),e.removeListener("close",p),g()}function g(){c("unpipe"),n.unpipe(e)}return n.on("data",d),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(e,"error",f),e.once("close",p),e.once("finish",m),e.emit("pipe",n),i.flowing||(c("pipe resume"),n.resume()),e},O.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n)),this;if(!e){var r=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)r[o].emit("unpipe",this,{hasUnpiped:!1});return this}var s=B(t.pipes,e);return-1===s||(t.pipes.splice(s,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n)),this},O.prototype.on=function(e,t){var n=s.prototype.on.call(this,e,t),i=this._readableState;return"data"===e?(i.readableListening=this.listenerCount("readable")>0,!1!==i.flowing&&this.resume()):"readable"===e&&(i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,c("on readable",i.length,i.reading),i.length?k(this):i.reading||r.nextTick(N,this))),n},O.prototype.addListener=O.prototype.on,O.prototype.removeListener=function(e,t){var n=s.prototype.removeListener.call(this,e,t);return"readable"===e&&r.nextTick(R,this),n},O.prototype.removeAllListeners=function(e){var t=s.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||r.nextTick(R,this),t},O.prototype.resume=function(){var e=this._readableState;return e.flowing||(c("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,r.nextTick(P,e,t))}(this,e)),e.paused=!1,this},O.prototype.pause=function(){return c("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(c("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},O.prototype.wrap=function(e){var t=this,n=this._readableState,r=!1;for(var i in e.on("end",(function(){if(c("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(i){(c("wrapped data"),n.decoder&&(i=n.decoder.write(i)),n.objectMode&&null==i)||(n.objectMode||i&&i.length)&&(t.push(i)||(r=!0,e.pause()))})),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var o=0;o<S.length;o++)e.on(S[o],this.emit.bind(this,S[o]));return this._read=function(t){c("wrapped _read",t),r&&(r=!1,e.resume())},this},"function"==typeof Symbol&&(O.prototype[Symbol.asyncIterator]=function(){return void 0===d&&(d=n(245)),d(this)}),Object.defineProperty(O.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(O.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(O.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),O._fromList=U,Object.defineProperty(O.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(O.from=function(e,t){return void 0===f&&(f=n(246)),f(O,e,t)})}).call(this,n(19),n(16))},function(e,t,n){e.exports=n(36).EventEmitter},function(e,t,n){"use strict";(function(t){function n(e,t){i(e,t),r(e)}function r(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function i(e,t){e.emit("error",t)}e.exports={destroy:function(e,o){var s=this,a=this._readableState&&this._readableState.destroyed,u=this._writableState&&this._writableState.destroyed;return a||u?(o?o(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,t.nextTick(i,this,e)):t.nextTick(i,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!o&&e?s._writableState?s._writableState.errorEmitted?t.nextTick(r,s):(s._writableState.errorEmitted=!0,t.nextTick(n,s,e)):t.nextTick(n,s,e):o?(t.nextTick(r,s),o(e)):t.nextTick(r,s)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var n=e._readableState,r=e._writableState;n&&n.autoDestroy||r&&r.autoDestroy?e.destroy(t):e.emit("error",t)}}}).call(this,n(16))},function(e,t,n){"use strict";var r=n(47).codes.ERR_INVALID_OPT_VALUE;e.exports={getHighWaterMark:function(e,t,n,i){var o=function(e,t,n){return null!=e.highWaterMark?e.highWaterMark:t?e[n]:null}(t,i,n);if(null!=o){if(!isFinite(o)||Math.floor(o)!==o||o<0)throw new r(i?n:"highWaterMark",o);return Math.floor(o)}return e.objectMode?16:16384}}},function(e,t,n){"use strict";(function(t,r){function i(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var r=e.entry;e.entry=null;for(;r;){var i=r.callback;t.pendingcb--,i(n),r=r.next}t.corkedRequestsFree.next=e}(t,e)}}var o;e.exports=O,O.WritableState=M;var s={deprecate:n(74)},a=n(135),u=n(17).Buffer,c=t.Uint8Array||function(){};var l,h=n(136),d=n(137).getHighWaterMark,f=n(47).codes,p=f.ERR_INVALID_ARG_TYPE,m=f.ERR_METHOD_NOT_IMPLEMENTED,g=f.ERR_MULTIPLE_CALLBACK,b=f.ERR_STREAM_CANNOT_PIPE,v=f.ERR_STREAM_DESTROYED,y=f.ERR_STREAM_NULL_VALUES,_=f.ERR_STREAM_WRITE_AFTER_END,w=f.ERR_UNKNOWN_ENCODING,E=h.errorOrDestroy;function S(){}function M(e,t,s){o=o||n(48),e=e||{},"boolean"!=typeof s&&(s=t instanceof o),this.objectMode=!!e.objectMode,s&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=d(this,e,"writableHighWaterMark",s),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var a=!1===e.decodeStrings;this.decodeStrings=!a,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,i=n.sync,o=n.writecb;if("function"!=typeof o)throw new g;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),t)!function(e,t,n,i,o){--t.pendingcb,n?(r.nextTick(o,i),r.nextTick(j,e,t),e._writableState.errorEmitted=!0,E(e,i)):(o(i),e._writableState.errorEmitted=!0,E(e,i),j(e,t))}(e,n,i,t,o);else{var s=k(n)||e.destroyed;s||n.corked||n.bufferProcessing||!n.bufferedRequest||T(e,n),i?r.nextTick(C,e,n,s,o):C(e,n,s,o)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new i(this)}function O(e){var t=this instanceof(o=o||n(48));if(!t&&!l.call(O,this))return new O(e);this._writableState=new M(e,this,t),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),a.call(this)}function A(e,t,n,r,i,o,s){t.writelen=r,t.writecb=s,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new v("write")):n?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function C(e,t,n,r){n||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,r(),j(e,t)}function T(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,o=new Array(r),s=t.corkedRequestsFree;s.entry=n;for(var a=0,u=!0;n;)o[a]=n,n.isBuf||(u=!1),n=n.next,a+=1;o.allBuffers=u,A(e,t,!0,t.length,o,"",s.finish),t.pendingcb++,t.lastBufferedRequest=null,s.next?(t.corkedRequestsFree=s.next,s.next=null):t.corkedRequestsFree=new i(t),t.bufferedRequestCount=0}else{for(;n;){var c=n.chunk,l=n.encoding,h=n.callback;if(A(e,t,!1,t.objectMode?1:c.length,c,l,h),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function k(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function x(e,t){e._final((function(n){t.pendingcb--,n&&E(e,n),t.prefinished=!0,e.emit("prefinish"),j(e,t)}))}function j(e,t){var n=k(t);if(n&&(function(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,r.nextTick(x,e,t)))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var i=e._readableState;(!i||i.autoDestroy&&i.endEmitted)&&e.destroy()}return n}n(7)(O,a),M.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(M.prototype,"buffer",{get:s.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(l=Function.prototype[Symbol.hasInstance],Object.defineProperty(O,Symbol.hasInstance,{value:function(e){return!!l.call(this,e)||this===O&&(e&&e._writableState instanceof M)}})):l=function(e){return e instanceof this},O.prototype.pipe=function(){E(this,new b)},O.prototype.write=function(e,t,n){var i,o=this._writableState,s=!1,a=!o.objectMode&&(i=e,u.isBuffer(i)||i instanceof c);return a&&!u.isBuffer(e)&&(e=function(e){return u.from(e)}(e)),"function"==typeof t&&(n=t,t=null),a?t="buffer":t||(t=o.defaultEncoding),"function"!=typeof n&&(n=S),o.ending?function(e,t){var n=new _;E(e,n),r.nextTick(t,n)}(this,n):(a||function(e,t,n,i){var o;return null===n?o=new y:"string"==typeof n||t.objectMode||(o=new p("chunk",["string","Buffer"],n)),!o||(E(e,o),r.nextTick(i,o),!1)}(this,o,e,n))&&(o.pendingcb++,s=function(e,t,n,r,i,o){if(!n){var s=function(e,t,n){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=u.from(t,n));return t}(t,r,i);r!==s&&(n=!0,i="buffer",r=s)}var a=t.objectMode?1:r.length;t.length+=a;var c=t.length<t.highWaterMark;c||(t.needDrain=!0);if(t.writing||t.corked){var l=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:o,next:null},l?l.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else A(e,t,!1,a,r,i,o);return c}(this,o,a,e,t,n)),s},O.prototype.cork=function(){this._writableState.corked++},O.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||T(this,e))},O.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new w(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(O.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(O.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),O.prototype._write=function(e,t,n){n(new m("_write()"))},O.prototype._writev=null,O.prototype.end=function(e,t,n){var i=this._writableState;return"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||function(e,t,n){t.ending=!0,j(e,t),n&&(t.finished?r.nextTick(n):e.once("finish",n));t.ended=!0,e.writable=!1}(this,i,n),this},Object.defineProperty(O.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(O.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),O.prototype.destroy=h.destroy,O.prototype._undestroy=h.undestroy,O.prototype._destroy=function(e,t){t(e)}}).call(this,n(19),n(16))},function(e,t,n){"use strict";e.exports=l;var r=n(47).codes,i=r.ERR_METHOD_NOT_IMPLEMENTED,o=r.ERR_MULTIPLE_CALLBACK,s=r.ERR_TRANSFORM_ALREADY_TRANSFORMING,a=r.ERR_TRANSFORM_WITH_LENGTH_0,u=n(48);function c(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(null===r)return this.emit("error",new o);n.writechunk=null,n.writecb=null,null!=t&&this.push(t),r(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function l(e){if(!(this instanceof l))return new l(e);u.call(this,e),this._transformState={afterTransform:c.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",h)}function h(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?d(this,null,null):this._flush((function(t,n){d(e,t,n)}))}function d(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new a;if(e._transformState.transforming)throw new s;return e.push(null)}n(7)(l,u),l.prototype.push=function(e,t){return this._transformState.needTransform=!1,u.prototype.push.call(this,e,t)},l.prototype._transform=function(e,t,n){n(new i("_transform()"))},l.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},l.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},l.prototype._destroy=function(e,t){u.prototype._destroy.call(this,e,(function(e){t(e)}))}},function(e,t,n){"use strict";var r=t;function i(e){return 1===e.length?"0"+e:e}function o(e){for(var t="",n=0;n<e.length;n++)t+=i(e[n].toString(16));return t}r.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var n=[];if("string"!=typeof e){for(var r=0;r<e.length;r++)n[r]=0|e[r];return n}if("hex"===t){(e=e.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(e="0"+e);for(r=0;r<e.length;r+=2)n.push(parseInt(e[r]+e[r+1],16))}else for(r=0;r<e.length;r++){var i=e.charCodeAt(r),o=i>>8,s=255&i;o?n.push(o,s):n.push(s)}return n},r.zero2=i,r.toHex=o,r.encode=function(e,t){return"hex"===t?o(e):e}},function(e,t,n){"use strict";var r=t;r.base=n(62),r.short=n(253),r.mont=n(254),r.edwards=n(255)},function(e,t,n){"use strict";var r=n(27).rotr32;function i(e,t,n){return e&t^~e&n}function o(e,t,n){return e&t^e&n^t&n}function s(e,t,n){return e^t^n}t.ft_1=function(e,t,n,r){return 0===e?i(t,n,r):1===e||3===e?s(t,n,r):2===e?o(t,n,r):void 0},t.ch32=i,t.maj32=o,t.p32=s,t.s0_256=function(e){return r(e,2)^r(e,13)^r(e,22)},t.s1_256=function(e){return r(e,6)^r(e,11)^r(e,25)},t.g0_256=function(e){return r(e,7)^r(e,18)^e>>>3},t.g1_256=function(e){return r(e,17)^r(e,19)^e>>>10}},function(e,t,n){"use strict";var r=n(27),i=n(53),o=n(142),s=n(24),a=r.sum32,u=r.sum32_4,c=r.sum32_5,l=o.ch32,h=o.maj32,d=o.s0_256,f=o.s1_256,p=o.g0_256,m=o.g1_256,g=i.BlockHash,b=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function v(){if(!(this instanceof v))return new v;g.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=b,this.W=new Array(64)}r.inherits(v,g),e.exports=v,v.blockSize=512,v.outSize=256,v.hmacStrength=192,v.padLength=64,v.prototype._update=function(e,t){for(var n=this.W,r=0;r<16;r++)n[r]=e[t+r];for(;r<n.length;r++)n[r]=u(m(n[r-2]),n[r-7],p(n[r-15]),n[r-16]);var i=this.h[0],o=this.h[1],g=this.h[2],b=this.h[3],v=this.h[4],y=this.h[5],_=this.h[6],w=this.h[7];for(s(this.k.length===n.length),r=0;r<n.length;r++){var E=c(w,f(v),l(v,y,_),this.k[r],n[r]),S=a(d(i),h(i,o,g));w=_,_=y,y=v,v=a(b,E),b=g,g=o,o=i,i=a(E,S)}this.h[0]=a(this.h[0],i),this.h[1]=a(this.h[1],o),this.h[2]=a(this.h[2],g),this.h[3]=a(this.h[3],b),this.h[4]=a(this.h[4],v),this.h[5]=a(this.h[5],y),this.h[6]=a(this.h[6],_),this.h[7]=a(this.h[7],w)},v.prototype._digest=function(e){return"hex"===e?r.toHex32(this.h,"big"):r.split32(this.h,"big")}},function(e,t,n){"use strict";var r=n(27),i=n(53),o=n(24),s=r.rotr64_hi,a=r.rotr64_lo,u=r.shr64_hi,c=r.shr64_lo,l=r.sum64,h=r.sum64_hi,d=r.sum64_lo,f=r.sum64_4_hi,p=r.sum64_4_lo,m=r.sum64_5_hi,g=r.sum64_5_lo,b=i.BlockHash,v=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function y(){if(!(this instanceof y))return new y;b.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=v,this.W=new Array(160)}function _(e,t,n,r,i){var o=e&n^~e&i;return o<0&&(o+=4294967296),o}function w(e,t,n,r,i,o){var s=t&r^~t&o;return s<0&&(s+=4294967296),s}function E(e,t,n,r,i){var o=e&n^e&i^n&i;return o<0&&(o+=4294967296),o}function S(e,t,n,r,i,o){var s=t&r^t&o^r&o;return s<0&&(s+=4294967296),s}function M(e,t){var n=s(e,t,28)^s(t,e,2)^s(t,e,7);return n<0&&(n+=4294967296),n}function O(e,t){var n=a(e,t,28)^a(t,e,2)^a(t,e,7);return n<0&&(n+=4294967296),n}function A(e,t){var n=s(e,t,14)^s(e,t,18)^s(t,e,9);return n<0&&(n+=4294967296),n}function C(e,t){var n=a(e,t,14)^a(e,t,18)^a(t,e,9);return n<0&&(n+=4294967296),n}function T(e,t){var n=s(e,t,1)^s(e,t,8)^u(e,t,7);return n<0&&(n+=4294967296),n}function k(e,t){var n=a(e,t,1)^a(e,t,8)^c(e,t,7);return n<0&&(n+=4294967296),n}function x(e,t){var n=s(e,t,19)^s(t,e,29)^u(e,t,6);return n<0&&(n+=4294967296),n}function j(e,t){var n=a(e,t,19)^a(t,e,29)^c(e,t,6);return n<0&&(n+=4294967296),n}r.inherits(y,b),e.exports=y,y.blockSize=1024,y.outSize=512,y.hmacStrength=192,y.padLength=128,y.prototype._prepareBlock=function(e,t){for(var n=this.W,r=0;r<32;r++)n[r]=e[t+r];for(;r<n.length;r+=2){var i=x(n[r-4],n[r-3]),o=j(n[r-4],n[r-3]),s=n[r-14],a=n[r-13],u=T(n[r-30],n[r-29]),c=k(n[r-30],n[r-29]),l=n[r-32],h=n[r-31];n[r]=f(i,o,s,a,u,c,l,h),n[r+1]=p(i,o,s,a,u,c,l,h)}},y.prototype._update=function(e,t){this._prepareBlock(e,t);var n=this.W,r=this.h[0],i=this.h[1],s=this.h[2],a=this.h[3],u=this.h[4],c=this.h[5],f=this.h[6],p=this.h[7],b=this.h[8],v=this.h[9],y=this.h[10],T=this.h[11],k=this.h[12],x=this.h[13],j=this.h[14],I=this.h[15];o(this.k.length===n.length);for(var R=0;R<n.length;R+=2){var N=j,P=I,D=A(b,v),U=C(b,v),L=_(b,v,y,T,k),F=w(b,v,y,T,k,x),B=this.k[R],H=this.k[R+1],q=n[R],V=n[R+1],G=m(N,P,D,U,L,F,B,H,q,V),z=g(N,P,D,U,L,F,B,H,q,V);N=M(r,i),P=O(r,i),D=E(r,i,s,a,u),U=S(r,i,s,a,u,c);var W=h(N,P,D,U),K=d(N,P,D,U);j=k,I=x,k=y,x=T,y=b,T=v,b=h(f,p,G,z),v=d(p,p,G,z),f=u,p=c,u=s,c=a,s=r,a=i,r=h(G,z,W,K),i=d(G,z,W,K)}l(this.h,0,r,i),l(this.h,2,s,a),l(this.h,4,u,c),l(this.h,6,f,p),l(this.h,8,b,v),l(this.h,10,y,T),l(this.h,12,k,x),l(this.h,14,j,I)},y.prototype._digest=function(e){return"hex"===e?r.toHex32(this.h,"big"):r.split32(this.h,"big")}},function(e,t,n){"use strict";const r=t;r.bignum=n(146),r.define=n(272).define,r.base=n(275),r.constants=n(276),r.decoders=n(149),r.encoders=n(147)},function(e,t,n){(function(e){!function(e,t){"use strict";function r(e,t){if(!e)throw new Error(t||"Assertion failed")}function i(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}function o(e,t,n){if(o.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(n=t,t=10),this._init(e||0,t||10,n||"be"))}var s;"object"==typeof e?e.exports=o:t.BN=o,o.BN=o,o.wordSize=26;try{s="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:n(271).Buffer}catch(e){}function a(e,t){var n=e.charCodeAt(t);return n>=65&&n<=70?n-55:n>=97&&n<=102?n-87:n-48&15}function u(e,t,n){var r=a(e,n);return n-1>=t&&(r|=a(e,n-1)<<4),r}function c(e,t,n,r){for(var i=0,o=Math.min(e.length,n),s=t;s<o;s++){var a=e.charCodeAt(s)-48;i*=r,i+=a>=49?a-49+10:a>=17?a-17+10:a}return i}o.isBN=function(e){return e instanceof o||null!==e&&"object"==typeof e&&e.constructor.wordSize===o.wordSize&&Array.isArray(e.words)},o.max=function(e,t){return e.cmp(t)>0?e:t},o.min=function(e,t){return e.cmp(t)<0?e:t},o.prototype._init=function(e,t,n){if("number"==typeof e)return this._initNumber(e,t,n);if("object"==typeof e)return this._initArray(e,t,n);"hex"===t&&(t=16),r(t===(0|t)&&t>=2&&t<=36);var i=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<e.length&&(16===t?this._parseHex(e,i,n):(this._parseBase(e,t,i),"le"===n&&this._initArray(this.toArray(),t,n)))},o.prototype._initNumber=function(e,t,n){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(r(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===n&&this._initArray(this.toArray(),t,n)},o.prototype._initArray=function(e,t,n){if(r("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var o,s,a=0;if("be"===n)for(i=e.length-1,o=0;i>=0;i-=3)s=e[i]|e[i-1]<<8|e[i-2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);else if("le"===n)for(i=0,o=0;i<e.length;i+=3)s=e[i]|e[i+1]<<8|e[i+2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);return this.strip()},o.prototype._parseHex=function(e,t,n){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var i,o=0,s=0;if("be"===n)for(r=e.length-1;r>=t;r-=2)i=u(e,t,r)<<o,this.words[s]|=67108863&i,o>=18?(o-=18,s+=1,this.words[s]|=i>>>26):o+=8;else for(r=(e.length-t)%2==0?t+1:t;r<e.length;r+=2)i=u(e,t,r)<<o,this.words[s]|=67108863&i,o>=18?(o-=18,s+=1,this.words[s]|=i>>>26):o+=8;this.strip()},o.prototype._parseBase=function(e,t,n){this.words=[0],this.length=1;for(var r=0,i=1;i<=67108863;i*=t)r++;r--,i=i/t|0;for(var o=e.length-n,s=o%r,a=Math.min(o,o-s)+n,u=0,l=n;l<a;l+=r)u=c(e,l,l+r,t),this.imuln(i),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==s){var h=1;for(u=c(e,l,e.length,t),l=0;l<s;l++)h*=t;this.imuln(h),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this.strip()},o.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},o.prototype.clone=function(){var e=new o(null);return this.copy(e),e},o.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var l=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],d=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function f(e,t,n){n.negative=t.negative^e.negative;var r=e.length+t.length|0;n.length=r,r=r-1|0;var i=0|e.words[0],o=0|t.words[0],s=i*o,a=67108863&s,u=s/67108864|0;n.words[0]=a;for(var c=1;c<r;c++){for(var l=u>>>26,h=67108863&u,d=Math.min(c,t.length-1),f=Math.max(0,c-e.length+1);f<=d;f++){var p=c-f|0;l+=(s=(i=0|e.words[p])*(o=0|t.words[f])+h)/67108864|0,h=67108863&s}n.words[c]=0|h,u=0|l}return 0!==u?n.words[c]=0|u:n.length--,n.strip()}o.prototype.toString=function(e,t){var n;if(t=0|t||1,16===(e=e||10)||"hex"===e){n="";for(var i=0,o=0,s=0;s<this.length;s++){var a=this.words[s],u=(16777215&(a<<i|o)).toString(16);n=0!==(o=a>>>24-i&16777215)||s!==this.length-1?l[6-u.length]+u+n:u+n,(i+=2)>=26&&(i-=26,s--)}for(0!==o&&(n=o.toString(16)+n);n.length%t!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}if(e===(0|e)&&e>=2&&e<=36){var c=h[e],f=d[e];n="";var p=this.clone();for(p.negative=0;!p.isZero();){var m=p.modn(f).toString(e);n=(p=p.idivn(f)).isZero()?m+n:l[c-m.length]+m+n}for(this.isZero()&&(n="0"+n);n.length%t!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}r(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(e,t){return r(void 0!==s),this.toArrayLike(s,e,t)},o.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},o.prototype.toArrayLike=function(e,t,n){var i=this.byteLength(),o=n||Math.max(1,i);r(i<=o,"byte array longer than desired length"),r(o>0,"Requested array length <= 0"),this.strip();var s,a,u="le"===t,c=new e(o),l=this.clone();if(u){for(a=0;!l.isZero();a++)s=l.andln(255),l.iushrn(8),c[a]=s;for(;a<o;a++)c[a]=0}else{for(a=0;a<o-i;a++)c[a]=0;for(a=0;!l.isZero();a++)s=l.andln(255),l.iushrn(8),c[o-a-1]=s}return c},Math.clz32?o.prototype._countBits=function(e){return 32-Math.clz32(e)}:o.prototype._countBits=function(e){var t=e,n=0;return t>=4096&&(n+=13,t>>>=13),t>=64&&(n+=7,t>>>=7),t>=8&&(n+=4,t>>>=4),t>=2&&(n+=2,t>>>=2),n+t},o.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,n=0;return 0==(8191&t)&&(n+=13,t>>>=13),0==(127&t)&&(n+=7,t>>>=7),0==(15&t)&&(n+=4,t>>>=4),0==(3&t)&&(n+=2,t>>>=2),0==(1&t)&&n++,n},o.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var n=this._zeroBits(this.words[t]);if(e+=n,26!==n)break}return e},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},o.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this.strip()},o.prototype.ior=function(e){return r(0==(this.negative|e.negative)),this.iuor(e)},o.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},o.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},o.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var n=0;n<t.length;n++)this.words[n]=this.words[n]&e.words[n];return this.length=t.length,this.strip()},o.prototype.iand=function(e){return r(0==(this.negative|e.negative)),this.iuand(e)},o.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},o.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},o.prototype.iuxor=function(e){var t,n;this.length>e.length?(t=this,n=e):(t=e,n=this);for(var r=0;r<n.length;r++)this.words[r]=t.words[r]^n.words[r];if(this!==t)for(;r<t.length;r++)this.words[r]=t.words[r];return this.length=t.length,this.strip()},o.prototype.ixor=function(e){return r(0==(this.negative|e.negative)),this.iuxor(e)},o.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},o.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},o.prototype.inotn=function(e){r("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),n=e%26;this._expand(t),n>0&&t--;for(var i=0;i<t;i++)this.words[i]=67108863&~this.words[i];return n>0&&(this.words[i]=~this.words[i]&67108863>>26-n),this.strip()},o.prototype.notn=function(e){return this.clone().inotn(e)},o.prototype.setn=function(e,t){r("number"==typeof e&&e>=0);var n=e/26|0,i=e%26;return this._expand(n+1),this.words[n]=t?this.words[n]|1<<i:this.words[n]&~(1<<i),this.strip()},o.prototype.iadd=function(e){var t,n,r;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(n=this,r=e):(n=e,r=this);for(var i=0,o=0;o<r.length;o++)t=(0|n.words[o])+(0|r.words[o])+i,this.words[o]=67108863&t,i=t>>>26;for(;0!==i&&o<n.length;o++)t=(0|n.words[o])+i,this.words[o]=67108863&t,i=t>>>26;if(this.length=n.length,0!==i)this.words[this.length]=i,this.length++;else if(n!==this)for(;o<n.length;o++)this.words[o]=n.words[o];return this},o.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},o.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var n,r,i=this.cmp(e);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(n=this,r=e):(n=e,r=this);for(var o=0,s=0;s<r.length;s++)o=(t=(0|n.words[s])-(0|r.words[s])+o)>>26,this.words[s]=67108863&t;for(;0!==o&&s<n.length;s++)o=(t=(0|n.words[s])+o)>>26,this.words[s]=67108863&t;if(0===o&&s<n.length&&n!==this)for(;s<n.length;s++)this.words[s]=n.words[s];return this.length=Math.max(this.length,s),n!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(e){return this.clone().isub(e)};var p=function(e,t,n){var r,i,o,s=e.words,a=t.words,u=n.words,c=0,l=0|s[0],h=8191&l,d=l>>>13,f=0|s[1],p=8191&f,m=f>>>13,g=0|s[2],b=8191&g,v=g>>>13,y=0|s[3],_=8191&y,w=y>>>13,E=0|s[4],S=8191&E,M=E>>>13,O=0|s[5],A=8191&O,C=O>>>13,T=0|s[6],k=8191&T,x=T>>>13,j=0|s[7],I=8191&j,R=j>>>13,N=0|s[8],P=8191&N,D=N>>>13,U=0|s[9],L=8191&U,F=U>>>13,B=0|a[0],H=8191&B,q=B>>>13,V=0|a[1],G=8191&V,z=V>>>13,W=0|a[2],K=8191&W,Y=W>>>13,Q=0|a[3],J=8191&Q,Z=Q>>>13,$=0|a[4],X=8191&$,ee=$>>>13,te=0|a[5],ne=8191&te,re=te>>>13,ie=0|a[6],oe=8191&ie,se=ie>>>13,ae=0|a[7],ue=8191&ae,ce=ae>>>13,le=0|a[8],he=8191&le,de=le>>>13,fe=0|a[9],pe=8191&fe,me=fe>>>13;n.negative=e.negative^t.negative,n.length=19;var ge=(c+(r=Math.imul(h,H))|0)+((8191&(i=(i=Math.imul(h,q))+Math.imul(d,H)|0))<<13)|0;c=((o=Math.imul(d,q))+(i>>>13)|0)+(ge>>>26)|0,ge&=67108863,r=Math.imul(p,H),i=(i=Math.imul(p,q))+Math.imul(m,H)|0,o=Math.imul(m,q);var be=(c+(r=r+Math.imul(h,G)|0)|0)+((8191&(i=(i=i+Math.imul(h,z)|0)+Math.imul(d,G)|0))<<13)|0;c=((o=o+Math.imul(d,z)|0)+(i>>>13)|0)+(be>>>26)|0,be&=67108863,r=Math.imul(b,H),i=(i=Math.imul(b,q))+Math.imul(v,H)|0,o=Math.imul(v,q),r=r+Math.imul(p,G)|0,i=(i=i+Math.imul(p,z)|0)+Math.imul(m,G)|0,o=o+Math.imul(m,z)|0;var ve=(c+(r=r+Math.imul(h,K)|0)|0)+((8191&(i=(i=i+Math.imul(h,Y)|0)+Math.imul(d,K)|0))<<13)|0;c=((o=o+Math.imul(d,Y)|0)+(i>>>13)|0)+(ve>>>26)|0,ve&=67108863,r=Math.imul(_,H),i=(i=Math.imul(_,q))+Math.imul(w,H)|0,o=Math.imul(w,q),r=r+Math.imul(b,G)|0,i=(i=i+Math.imul(b,z)|0)+Math.imul(v,G)|0,o=o+Math.imul(v,z)|0,r=r+Math.imul(p,K)|0,i=(i=i+Math.imul(p,Y)|0)+Math.imul(m,K)|0,o=o+Math.imul(m,Y)|0;var ye=(c+(r=r+Math.imul(h,J)|0)|0)+((8191&(i=(i=i+Math.imul(h,Z)|0)+Math.imul(d,J)|0))<<13)|0;c=((o=o+Math.imul(d,Z)|0)+(i>>>13)|0)+(ye>>>26)|0,ye&=67108863,r=Math.imul(S,H),i=(i=Math.imul(S,q))+Math.imul(M,H)|0,o=Math.imul(M,q),r=r+Math.imul(_,G)|0,i=(i=i+Math.imul(_,z)|0)+Math.imul(w,G)|0,o=o+Math.imul(w,z)|0,r=r+Math.imul(b,K)|0,i=(i=i+Math.imul(b,Y)|0)+Math.imul(v,K)|0,o=o+Math.imul(v,Y)|0,r=r+Math.imul(p,J)|0,i=(i=i+Math.imul(p,Z)|0)+Math.imul(m,J)|0,o=o+Math.imul(m,Z)|0;var _e=(c+(r=r+Math.imul(h,X)|0)|0)+((8191&(i=(i=i+Math.imul(h,ee)|0)+Math.imul(d,X)|0))<<13)|0;c=((o=o+Math.imul(d,ee)|0)+(i>>>13)|0)+(_e>>>26)|0,_e&=67108863,r=Math.imul(A,H),i=(i=Math.imul(A,q))+Math.imul(C,H)|0,o=Math.imul(C,q),r=r+Math.imul(S,G)|0,i=(i=i+Math.imul(S,z)|0)+Math.imul(M,G)|0,o=o+Math.imul(M,z)|0,r=r+Math.imul(_,K)|0,i=(i=i+Math.imul(_,Y)|0)+Math.imul(w,K)|0,o=o+Math.imul(w,Y)|0,r=r+Math.imul(b,J)|0,i=(i=i+Math.imul(b,Z)|0)+Math.imul(v,J)|0,o=o+Math.imul(v,Z)|0,r=r+Math.imul(p,X)|0,i=(i=i+Math.imul(p,ee)|0)+Math.imul(m,X)|0,o=o+Math.imul(m,ee)|0;var we=(c+(r=r+Math.imul(h,ne)|0)|0)+((8191&(i=(i=i+Math.imul(h,re)|0)+Math.imul(d,ne)|0))<<13)|0;c=((o=o+Math.imul(d,re)|0)+(i>>>13)|0)+(we>>>26)|0,we&=67108863,r=Math.imul(k,H),i=(i=Math.imul(k,q))+Math.imul(x,H)|0,o=Math.imul(x,q),r=r+Math.imul(A,G)|0,i=(i=i+Math.imul(A,z)|0)+Math.imul(C,G)|0,o=o+Math.imul(C,z)|0,r=r+Math.imul(S,K)|0,i=(i=i+Math.imul(S,Y)|0)+Math.imul(M,K)|0,o=o+Math.imul(M,Y)|0,r=r+Math.imul(_,J)|0,i=(i=i+Math.imul(_,Z)|0)+Math.imul(w,J)|0,o=o+Math.imul(w,Z)|0,r=r+Math.imul(b,X)|0,i=(i=i+Math.imul(b,ee)|0)+Math.imul(v,X)|0,o=o+Math.imul(v,ee)|0,r=r+Math.imul(p,ne)|0,i=(i=i+Math.imul(p,re)|0)+Math.imul(m,ne)|0,o=o+Math.imul(m,re)|0;var Ee=(c+(r=r+Math.imul(h,oe)|0)|0)+((8191&(i=(i=i+Math.imul(h,se)|0)+Math.imul(d,oe)|0))<<13)|0;c=((o=o+Math.imul(d,se)|0)+(i>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,r=Math.imul(I,H),i=(i=Math.imul(I,q))+Math.imul(R,H)|0,o=Math.imul(R,q),r=r+Math.imul(k,G)|0,i=(i=i+Math.imul(k,z)|0)+Math.imul(x,G)|0,o=o+Math.imul(x,z)|0,r=r+Math.imul(A,K)|0,i=(i=i+Math.imul(A,Y)|0)+Math.imul(C,K)|0,o=o+Math.imul(C,Y)|0,r=r+Math.imul(S,J)|0,i=(i=i+Math.imul(S,Z)|0)+Math.imul(M,J)|0,o=o+Math.imul(M,Z)|0,r=r+Math.imul(_,X)|0,i=(i=i+Math.imul(_,ee)|0)+Math.imul(w,X)|0,o=o+Math.imul(w,ee)|0,r=r+Math.imul(b,ne)|0,i=(i=i+Math.imul(b,re)|0)+Math.imul(v,ne)|0,o=o+Math.imul(v,re)|0,r=r+Math.imul(p,oe)|0,i=(i=i+Math.imul(p,se)|0)+Math.imul(m,oe)|0,o=o+Math.imul(m,se)|0;var Se=(c+(r=r+Math.imul(h,ue)|0)|0)+((8191&(i=(i=i+Math.imul(h,ce)|0)+Math.imul(d,ue)|0))<<13)|0;c=((o=o+Math.imul(d,ce)|0)+(i>>>13)|0)+(Se>>>26)|0,Se&=67108863,r=Math.imul(P,H),i=(i=Math.imul(P,q))+Math.imul(D,H)|0,o=Math.imul(D,q),r=r+Math.imul(I,G)|0,i=(i=i+Math.imul(I,z)|0)+Math.imul(R,G)|0,o=o+Math.imul(R,z)|0,r=r+Math.imul(k,K)|0,i=(i=i+Math.imul(k,Y)|0)+Math.imul(x,K)|0,o=o+Math.imul(x,Y)|0,r=r+Math.imul(A,J)|0,i=(i=i+Math.imul(A,Z)|0)+Math.imul(C,J)|0,o=o+Math.imul(C,Z)|0,r=r+Math.imul(S,X)|0,i=(i=i+Math.imul(S,ee)|0)+Math.imul(M,X)|0,o=o+Math.imul(M,ee)|0,r=r+Math.imul(_,ne)|0,i=(i=i+Math.imul(_,re)|0)+Math.imul(w,ne)|0,o=o+Math.imul(w,re)|0,r=r+Math.imul(b,oe)|0,i=(i=i+Math.imul(b,se)|0)+Math.imul(v,oe)|0,o=o+Math.imul(v,se)|0,r=r+Math.imul(p,ue)|0,i=(i=i+Math.imul(p,ce)|0)+Math.imul(m,ue)|0,o=o+Math.imul(m,ce)|0;var Me=(c+(r=r+Math.imul(h,he)|0)|0)+((8191&(i=(i=i+Math.imul(h,de)|0)+Math.imul(d,he)|0))<<13)|0;c=((o=o+Math.imul(d,de)|0)+(i>>>13)|0)+(Me>>>26)|0,Me&=67108863,r=Math.imul(L,H),i=(i=Math.imul(L,q))+Math.imul(F,H)|0,o=Math.imul(F,q),r=r+Math.imul(P,G)|0,i=(i=i+Math.imul(P,z)|0)+Math.imul(D,G)|0,o=o+Math.imul(D,z)|0,r=r+Math.imul(I,K)|0,i=(i=i+Math.imul(I,Y)|0)+Math.imul(R,K)|0,o=o+Math.imul(R,Y)|0,r=r+Math.imul(k,J)|0,i=(i=i+Math.imul(k,Z)|0)+Math.imul(x,J)|0,o=o+Math.imul(x,Z)|0,r=r+Math.imul(A,X)|0,i=(i=i+Math.imul(A,ee)|0)+Math.imul(C,X)|0,o=o+Math.imul(C,ee)|0,r=r+Math.imul(S,ne)|0,i=(i=i+Math.imul(S,re)|0)+Math.imul(M,ne)|0,o=o+Math.imul(M,re)|0,r=r+Math.imul(_,oe)|0,i=(i=i+Math.imul(_,se)|0)+Math.imul(w,oe)|0,o=o+Math.imul(w,se)|0,r=r+Math.imul(b,ue)|0,i=(i=i+Math.imul(b,ce)|0)+Math.imul(v,ue)|0,o=o+Math.imul(v,ce)|0,r=r+Math.imul(p,he)|0,i=(i=i+Math.imul(p,de)|0)+Math.imul(m,he)|0,o=o+Math.imul(m,de)|0;var Oe=(c+(r=r+Math.imul(h,pe)|0)|0)+((8191&(i=(i=i+Math.imul(h,me)|0)+Math.imul(d,pe)|0))<<13)|0;c=((o=o+Math.imul(d,me)|0)+(i>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,r=Math.imul(L,G),i=(i=Math.imul(L,z))+Math.imul(F,G)|0,o=Math.imul(F,z),r=r+Math.imul(P,K)|0,i=(i=i+Math.imul(P,Y)|0)+Math.imul(D,K)|0,o=o+Math.imul(D,Y)|0,r=r+Math.imul(I,J)|0,i=(i=i+Math.imul(I,Z)|0)+Math.imul(R,J)|0,o=o+Math.imul(R,Z)|0,r=r+Math.imul(k,X)|0,i=(i=i+Math.imul(k,ee)|0)+Math.imul(x,X)|0,o=o+Math.imul(x,ee)|0,r=r+Math.imul(A,ne)|0,i=(i=i+Math.imul(A,re)|0)+Math.imul(C,ne)|0,o=o+Math.imul(C,re)|0,r=r+Math.imul(S,oe)|0,i=(i=i+Math.imul(S,se)|0)+Math.imul(M,oe)|0,o=o+Math.imul(M,se)|0,r=r+Math.imul(_,ue)|0,i=(i=i+Math.imul(_,ce)|0)+Math.imul(w,ue)|0,o=o+Math.imul(w,ce)|0,r=r+Math.imul(b,he)|0,i=(i=i+Math.imul(b,de)|0)+Math.imul(v,he)|0,o=o+Math.imul(v,de)|0;var Ae=(c+(r=r+Math.imul(p,pe)|0)|0)+((8191&(i=(i=i+Math.imul(p,me)|0)+Math.imul(m,pe)|0))<<13)|0;c=((o=o+Math.imul(m,me)|0)+(i>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,r=Math.imul(L,K),i=(i=Math.imul(L,Y))+Math.imul(F,K)|0,o=Math.imul(F,Y),r=r+Math.imul(P,J)|0,i=(i=i+Math.imul(P,Z)|0)+Math.imul(D,J)|0,o=o+Math.imul(D,Z)|0,r=r+Math.imul(I,X)|0,i=(i=i+Math.imul(I,ee)|0)+Math.imul(R,X)|0,o=o+Math.imul(R,ee)|0,r=r+Math.imul(k,ne)|0,i=(i=i+Math.imul(k,re)|0)+Math.imul(x,ne)|0,o=o+Math.imul(x,re)|0,r=r+Math.imul(A,oe)|0,i=(i=i+Math.imul(A,se)|0)+Math.imul(C,oe)|0,o=o+Math.imul(C,se)|0,r=r+Math.imul(S,ue)|0,i=(i=i+Math.imul(S,ce)|0)+Math.imul(M,ue)|0,o=o+Math.imul(M,ce)|0,r=r+Math.imul(_,he)|0,i=(i=i+Math.imul(_,de)|0)+Math.imul(w,he)|0,o=o+Math.imul(w,de)|0;var Ce=(c+(r=r+Math.imul(b,pe)|0)|0)+((8191&(i=(i=i+Math.imul(b,me)|0)+Math.imul(v,pe)|0))<<13)|0;c=((o=o+Math.imul(v,me)|0)+(i>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,r=Math.imul(L,J),i=(i=Math.imul(L,Z))+Math.imul(F,J)|0,o=Math.imul(F,Z),r=r+Math.imul(P,X)|0,i=(i=i+Math.imul(P,ee)|0)+Math.imul(D,X)|0,o=o+Math.imul(D,ee)|0,r=r+Math.imul(I,ne)|0,i=(i=i+Math.imul(I,re)|0)+Math.imul(R,ne)|0,o=o+Math.imul(R,re)|0,r=r+Math.imul(k,oe)|0,i=(i=i+Math.imul(k,se)|0)+Math.imul(x,oe)|0,o=o+Math.imul(x,se)|0,r=r+Math.imul(A,ue)|0,i=(i=i+Math.imul(A,ce)|0)+Math.imul(C,ue)|0,o=o+Math.imul(C,ce)|0,r=r+Math.imul(S,he)|0,i=(i=i+Math.imul(S,de)|0)+Math.imul(M,he)|0,o=o+Math.imul(M,de)|0;var Te=(c+(r=r+Math.imul(_,pe)|0)|0)+((8191&(i=(i=i+Math.imul(_,me)|0)+Math.imul(w,pe)|0))<<13)|0;c=((o=o+Math.imul(w,me)|0)+(i>>>13)|0)+(Te>>>26)|0,Te&=67108863,r=Math.imul(L,X),i=(i=Math.imul(L,ee))+Math.imul(F,X)|0,o=Math.imul(F,ee),r=r+Math.imul(P,ne)|0,i=(i=i+Math.imul(P,re)|0)+Math.imul(D,ne)|0,o=o+Math.imul(D,re)|0,r=r+Math.imul(I,oe)|0,i=(i=i+Math.imul(I,se)|0)+Math.imul(R,oe)|0,o=o+Math.imul(R,se)|0,r=r+Math.imul(k,ue)|0,i=(i=i+Math.imul(k,ce)|0)+Math.imul(x,ue)|0,o=o+Math.imul(x,ce)|0,r=r+Math.imul(A,he)|0,i=(i=i+Math.imul(A,de)|0)+Math.imul(C,he)|0,o=o+Math.imul(C,de)|0;var ke=(c+(r=r+Math.imul(S,pe)|0)|0)+((8191&(i=(i=i+Math.imul(S,me)|0)+Math.imul(M,pe)|0))<<13)|0;c=((o=o+Math.imul(M,me)|0)+(i>>>13)|0)+(ke>>>26)|0,ke&=67108863,r=Math.imul(L,ne),i=(i=Math.imul(L,re))+Math.imul(F,ne)|0,o=Math.imul(F,re),r=r+Math.imul(P,oe)|0,i=(i=i+Math.imul(P,se)|0)+Math.imul(D,oe)|0,o=o+Math.imul(D,se)|0,r=r+Math.imul(I,ue)|0,i=(i=i+Math.imul(I,ce)|0)+Math.imul(R,ue)|0,o=o+Math.imul(R,ce)|0,r=r+Math.imul(k,he)|0,i=(i=i+Math.imul(k,de)|0)+Math.imul(x,he)|0,o=o+Math.imul(x,de)|0;var xe=(c+(r=r+Math.imul(A,pe)|0)|0)+((8191&(i=(i=i+Math.imul(A,me)|0)+Math.imul(C,pe)|0))<<13)|0;c=((o=o+Math.imul(C,me)|0)+(i>>>13)|0)+(xe>>>26)|0,xe&=67108863,r=Math.imul(L,oe),i=(i=Math.imul(L,se))+Math.imul(F,oe)|0,o=Math.imul(F,se),r=r+Math.imul(P,ue)|0,i=(i=i+Math.imul(P,ce)|0)+Math.imul(D,ue)|0,o=o+Math.imul(D,ce)|0,r=r+Math.imul(I,he)|0,i=(i=i+Math.imul(I,de)|0)+Math.imul(R,he)|0,o=o+Math.imul(R,de)|0;var je=(c+(r=r+Math.imul(k,pe)|0)|0)+((8191&(i=(i=i+Math.imul(k,me)|0)+Math.imul(x,pe)|0))<<13)|0;c=((o=o+Math.imul(x,me)|0)+(i>>>13)|0)+(je>>>26)|0,je&=67108863,r=Math.imul(L,ue),i=(i=Math.imul(L,ce))+Math.imul(F,ue)|0,o=Math.imul(F,ce),r=r+Math.imul(P,he)|0,i=(i=i+Math.imul(P,de)|0)+Math.imul(D,he)|0,o=o+Math.imul(D,de)|0;var Ie=(c+(r=r+Math.imul(I,pe)|0)|0)+((8191&(i=(i=i+Math.imul(I,me)|0)+Math.imul(R,pe)|0))<<13)|0;c=((o=o+Math.imul(R,me)|0)+(i>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,r=Math.imul(L,he),i=(i=Math.imul(L,de))+Math.imul(F,he)|0,o=Math.imul(F,de);var Re=(c+(r=r+Math.imul(P,pe)|0)|0)+((8191&(i=(i=i+Math.imul(P,me)|0)+Math.imul(D,pe)|0))<<13)|0;c=((o=o+Math.imul(D,me)|0)+(i>>>13)|0)+(Re>>>26)|0,Re&=67108863;var Ne=(c+(r=Math.imul(L,pe))|0)+((8191&(i=(i=Math.imul(L,me))+Math.imul(F,pe)|0))<<13)|0;return c=((o=Math.imul(F,me))+(i>>>13)|0)+(Ne>>>26)|0,Ne&=67108863,u[0]=ge,u[1]=be,u[2]=ve,u[3]=ye,u[4]=_e,u[5]=we,u[6]=Ee,u[7]=Se,u[8]=Me,u[9]=Oe,u[10]=Ae,u[11]=Ce,u[12]=Te,u[13]=ke,u[14]=xe,u[15]=je,u[16]=Ie,u[17]=Re,u[18]=Ne,0!==c&&(u[19]=c,n.length++),n};function m(e,t,n){return(new g).mulp(e,t,n)}function g(e,t){this.x=e,this.y=t}Math.imul||(p=f),o.prototype.mulTo=function(e,t){var n=this.length+e.length;return 10===this.length&&10===e.length?p(this,e,t):n<63?f(this,e,t):n<1024?function(e,t,n){n.negative=t.negative^e.negative,n.length=e.length+t.length;for(var r=0,i=0,o=0;o<n.length-1;o++){var s=i;i=0;for(var a=67108863&r,u=Math.min(o,t.length-1),c=Math.max(0,o-e.length+1);c<=u;c++){var l=o-c,h=(0|e.words[l])*(0|t.words[c]),d=67108863&h;a=67108863&(d=d+a|0),i+=(s=(s=s+(h/67108864|0)|0)+(d>>>26)|0)>>>26,s&=67108863}n.words[o]=a,r=s,s=i}return 0!==r?n.words[o]=r:n.length--,n.strip()}(this,e,t):m(this,e,t)},g.prototype.makeRBT=function(e){for(var t=new Array(e),n=o.prototype._countBits(e)-1,r=0;r<e;r++)t[r]=this.revBin(r,n,e);return t},g.prototype.revBin=function(e,t,n){if(0===e||e===n-1)return e;for(var r=0,i=0;i<t;i++)r|=(1&e)<<t-i-1,e>>=1;return r},g.prototype.permute=function(e,t,n,r,i,o){for(var s=0;s<o;s++)r[s]=t[e[s]],i[s]=n[e[s]]},g.prototype.transform=function(e,t,n,r,i,o){this.permute(o,e,t,n,r,i);for(var s=1;s<i;s<<=1)for(var a=s<<1,u=Math.cos(2*Math.PI/a),c=Math.sin(2*Math.PI/a),l=0;l<i;l+=a)for(var h=u,d=c,f=0;f<s;f++){var p=n[l+f],m=r[l+f],g=n[l+f+s],b=r[l+f+s],v=h*g-d*b;b=h*b+d*g,g=v,n[l+f]=p+g,r[l+f]=m+b,n[l+f+s]=p-g,r[l+f+s]=m-b,f!==a&&(v=u*h-c*d,d=u*d+c*h,h=v)}},g.prototype.guessLen13b=function(e,t){var n=1|Math.max(t,e),r=1&n,i=0;for(n=n/2|0;n;n>>>=1)i++;return 1<<i+1+r},g.prototype.conjugate=function(e,t,n){if(!(n<=1))for(var r=0;r<n/2;r++){var i=e[r];e[r]=e[n-r-1],e[n-r-1]=i,i=t[r],t[r]=-t[n-r-1],t[n-r-1]=-i}},g.prototype.normalize13b=function(e,t){for(var n=0,r=0;r<t/2;r++){var i=8192*Math.round(e[2*r+1]/t)+Math.round(e[2*r]/t)+n;e[r]=67108863&i,n=i<67108864?0:i/67108864|0}return e},g.prototype.convert13b=function(e,t,n,i){for(var o=0,s=0;s<t;s++)o+=0|e[s],n[2*s]=8191&o,o>>>=13,n[2*s+1]=8191&o,o>>>=13;for(s=2*t;s<i;++s)n[s]=0;r(0===o),r(0==(-8192&o))},g.prototype.stub=function(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=0;return t},g.prototype.mulp=function(e,t,n){var r=2*this.guessLen13b(e.length,t.length),i=this.makeRBT(r),o=this.stub(r),s=new Array(r),a=new Array(r),u=new Array(r),c=new Array(r),l=new Array(r),h=new Array(r),d=n.words;d.length=r,this.convert13b(e.words,e.length,s,r),this.convert13b(t.words,t.length,c,r),this.transform(s,o,a,u,r,i),this.transform(c,o,l,h,r,i);for(var f=0;f<r;f++){var p=a[f]*l[f]-u[f]*h[f];u[f]=a[f]*h[f]+u[f]*l[f],a[f]=p}return this.conjugate(a,u,r),this.transform(a,u,d,o,r,i),this.conjugate(d,o,r),this.normalize13b(d,r),n.negative=e.negative^t.negative,n.length=e.length+t.length,n.strip()},o.prototype.mul=function(e){var t=new o(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},o.prototype.mulf=function(e){var t=new o(null);return t.words=new Array(this.length+e.length),m(this,e,t)},o.prototype.imul=function(e){return this.clone().mulTo(e,this)},o.prototype.imuln=function(e){r("number"==typeof e),r(e<67108864);for(var t=0,n=0;n<this.length;n++){var i=(0|this.words[n])*e,o=(67108863&i)+(67108863&t);t>>=26,t+=i/67108864|0,t+=o>>>26,this.words[n]=67108863&o}return 0!==t&&(this.words[n]=t,this.length++),this},o.prototype.muln=function(e){return this.clone().imuln(e)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),n=0;n<t.length;n++){var r=n/26|0,i=n%26;t[n]=(e.words[r]&1<<i)>>>i}return t}(e);if(0===t.length)return new o(1);for(var n=this,r=0;r<t.length&&0===t[r];r++,n=n.sqr());if(++r<t.length)for(var i=n.sqr();r<t.length;r++,i=i.sqr())0!==t[r]&&(n=n.mul(i));return n},o.prototype.iushln=function(e){r("number"==typeof e&&e>=0);var t,n=e%26,i=(e-n)/26,o=67108863>>>26-n<<26-n;if(0!==n){var s=0;for(t=0;t<this.length;t++){var a=this.words[t]&o,u=(0|this.words[t])-a<<n;this.words[t]=u|s,s=a>>>26-n}s&&(this.words[t]=s,this.length++)}if(0!==i){for(t=this.length-1;t>=0;t--)this.words[t+i]=this.words[t];for(t=0;t<i;t++)this.words[t]=0;this.length+=i}return this.strip()},o.prototype.ishln=function(e){return r(0===this.negative),this.iushln(e)},o.prototype.iushrn=function(e,t,n){var i;r("number"==typeof e&&e>=0),i=t?(t-t%26)/26:0;var o=e%26,s=Math.min((e-o)/26,this.length),a=67108863^67108863>>>o<<o,u=n;if(i-=s,i=Math.max(0,i),u){for(var c=0;c<s;c++)u.words[c]=this.words[c];u.length=s}if(0===s);else if(this.length>s)for(this.length-=s,c=0;c<this.length;c++)this.words[c]=this.words[c+s];else this.words[0]=0,this.length=1;var l=0;for(c=this.length-1;c>=0&&(0!==l||c>=i);c--){var h=0|this.words[c];this.words[c]=l<<26-o|h>>>o,l=h&a}return u&&0!==l&&(u.words[u.length++]=l),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(e,t,n){return r(0===this.negative),this.iushrn(e,t,n)},o.prototype.shln=function(e){return this.clone().ishln(e)},o.prototype.ushln=function(e){return this.clone().iushln(e)},o.prototype.shrn=function(e){return this.clone().ishrn(e)},o.prototype.ushrn=function(e){return this.clone().iushrn(e)},o.prototype.testn=function(e){r("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26,i=1<<t;return!(this.length<=n)&&!!(this.words[n]&i)},o.prototype.imaskn=function(e){r("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26;if(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=n)return this;if(0!==t&&n++,this.length=Math.min(n,this.length),0!==t){var i=67108863^67108863>>>t<<t;this.words[this.length-1]&=i}return this.strip()},o.prototype.maskn=function(e){return this.clone().imaskn(e)},o.prototype.iaddn=function(e){return r("number"==typeof e),r(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},o.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},o.prototype.isubn=function(e){if(r("number"==typeof e),r(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this.strip()},o.prototype.addn=function(e){return this.clone().iaddn(e)},o.prototype.subn=function(e){return this.clone().isubn(e)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(e,t,n){var i,o,s=e.length+n;this._expand(s);var a=0;for(i=0;i<e.length;i++){o=(0|this.words[i+n])+a;var u=(0|e.words[i])*t;a=((o-=67108863&u)>>26)-(u/67108864|0),this.words[i+n]=67108863&o}for(;i<this.length-n;i++)a=(o=(0|this.words[i+n])+a)>>26,this.words[i+n]=67108863&o;if(0===a)return this.strip();for(r(-1===a),a=0,i=0;i<this.length;i++)a=(o=-(0|this.words[i])+a)>>26,this.words[i]=67108863&o;return this.negative=1,this.strip()},o.prototype._wordDiv=function(e,t){var n=(this.length,e.length),r=this.clone(),i=e,s=0|i.words[i.length-1];0!==(n=26-this._countBits(s))&&(i=i.ushln(n),r.iushln(n),s=0|i.words[i.length-1]);var a,u=r.length-i.length;if("mod"!==t){(a=new o(null)).length=u+1,a.words=new Array(a.length);for(var c=0;c<a.length;c++)a.words[c]=0}var l=r.clone()._ishlnsubmul(i,1,u);0===l.negative&&(r=l,a&&(a.words[u]=1));for(var h=u-1;h>=0;h--){var d=67108864*(0|r.words[i.length+h])+(0|r.words[i.length+h-1]);for(d=Math.min(d/s|0,67108863),r._ishlnsubmul(i,d,h);0!==r.negative;)d--,r.negative=0,r._ishlnsubmul(i,1,h),r.isZero()||(r.negative^=1);a&&(a.words[h]=d)}return a&&a.strip(),r.strip(),"div"!==t&&0!==n&&r.iushrn(n),{div:a||null,mod:r}},o.prototype.divmod=function(e,t,n){return r(!e.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===e.negative?(a=this.neg().divmod(e,t),"mod"!==t&&(i=a.div.neg()),"div"!==t&&(s=a.mod.neg(),n&&0!==s.negative&&s.iadd(e)),{div:i,mod:s}):0===this.negative&&0!==e.negative?(a=this.divmod(e.neg(),t),"mod"!==t&&(i=a.div.neg()),{div:i,mod:a.mod}):0!=(this.negative&e.negative)?(a=this.neg().divmod(e.neg(),t),"div"!==t&&(s=a.mod.neg(),n&&0!==s.negative&&s.isub(e)),{div:a.div,mod:s}):e.length>this.length||this.cmp(e)<0?{div:new o(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new o(this.modn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new o(this.modn(e.words[0]))}:this._wordDiv(e,t);var i,s,a},o.prototype.div=function(e){return this.divmod(e,"div",!1).div},o.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},o.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},o.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var n=0!==t.div.negative?t.mod.isub(e):t.mod,r=e.ushrn(1),i=e.andln(1),o=n.cmp(r);return o<0||1===i&&0===o?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},o.prototype.modn=function(e){r(e<=67108863);for(var t=(1<<26)%e,n=0,i=this.length-1;i>=0;i--)n=(t*n+(0|this.words[i]))%e;return n},o.prototype.idivn=function(e){r(e<=67108863);for(var t=0,n=this.length-1;n>=0;n--){var i=(0|this.words[n])+67108864*t;this.words[n]=i/e|0,t=i%e}return this.strip()},o.prototype.divn=function(e){return this.clone().idivn(e)},o.prototype.egcd=function(e){r(0===e.negative),r(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i=new o(1),s=new o(0),a=new o(0),u=new o(1),c=0;t.isEven()&&n.isEven();)t.iushrn(1),n.iushrn(1),++c;for(var l=n.clone(),h=t.clone();!t.isZero();){for(var d=0,f=1;0==(t.words[0]&f)&&d<26;++d,f<<=1);if(d>0)for(t.iushrn(d);d-- >0;)(i.isOdd()||s.isOdd())&&(i.iadd(l),s.isub(h)),i.iushrn(1),s.iushrn(1);for(var p=0,m=1;0==(n.words[0]&m)&&p<26;++p,m<<=1);if(p>0)for(n.iushrn(p);p-- >0;)(a.isOdd()||u.isOdd())&&(a.iadd(l),u.isub(h)),a.iushrn(1),u.iushrn(1);t.cmp(n)>=0?(t.isub(n),i.isub(a),s.isub(u)):(n.isub(t),a.isub(i),u.isub(s))}return{a:a,b:u,gcd:n.iushln(c)}},o.prototype._invmp=function(e){r(0===e.negative),r(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i,s=new o(1),a=new o(0),u=n.clone();t.cmpn(1)>0&&n.cmpn(1)>0;){for(var c=0,l=1;0==(t.words[0]&l)&&c<26;++c,l<<=1);if(c>0)for(t.iushrn(c);c-- >0;)s.isOdd()&&s.iadd(u),s.iushrn(1);for(var h=0,d=1;0==(n.words[0]&d)&&h<26;++h,d<<=1);if(h>0)for(n.iushrn(h);h-- >0;)a.isOdd()&&a.iadd(u),a.iushrn(1);t.cmp(n)>=0?(t.isub(n),s.isub(a)):(n.isub(t),a.isub(s))}return(i=0===t.cmpn(1)?s:a).cmpn(0)<0&&i.iadd(e),i},o.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),n=e.clone();t.negative=0,n.negative=0;for(var r=0;t.isEven()&&n.isEven();r++)t.iushrn(1),n.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;n.isEven();)n.iushrn(1);var i=t.cmp(n);if(i<0){var o=t;t=n,n=o}else if(0===i||0===n.cmpn(1))break;t.isub(n)}return n.iushln(r)},o.prototype.invm=function(e){return this.egcd(e).a.umod(e)},o.prototype.isEven=function(){return 0==(1&this.words[0])},o.prototype.isOdd=function(){return 1==(1&this.words[0])},o.prototype.andln=function(e){return this.words[0]&e},o.prototype.bincn=function(e){r("number"==typeof e);var t=e%26,n=(e-t)/26,i=1<<t;if(this.length<=n)return this._expand(n+1),this.words[n]|=i,this;for(var o=i,s=n;0!==o&&s<this.length;s++){var a=0|this.words[s];o=(a+=o)>>>26,a&=67108863,this.words[s]=a}return 0!==o&&(this.words[s]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(e){var t,n=e<0;if(0!==this.negative&&!n)return-1;if(0===this.negative&&n)return 1;if(this.strip(),this.length>1)t=1;else{n&&(e=-e),r(e<=67108863,"Number is too big");var i=0|this.words[0];t=i===e?0:i<e?-1:1}return 0!==this.negative?0|-t:t},o.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},o.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,n=this.length-1;n>=0;n--){var r=0|this.words[n],i=0|e.words[n];if(r!==i){r<i?t=-1:r>i&&(t=1);break}}return t},o.prototype.gtn=function(e){return 1===this.cmpn(e)},o.prototype.gt=function(e){return 1===this.cmp(e)},o.prototype.gten=function(e){return this.cmpn(e)>=0},o.prototype.gte=function(e){return this.cmp(e)>=0},o.prototype.ltn=function(e){return-1===this.cmpn(e)},o.prototype.lt=function(e){return-1===this.cmp(e)},o.prototype.lten=function(e){return this.cmpn(e)<=0},o.prototype.lte=function(e){return this.cmp(e)<=0},o.prototype.eqn=function(e){return 0===this.cmpn(e)},o.prototype.eq=function(e){return 0===this.cmp(e)},o.red=function(e){return new S(e)},o.prototype.toRed=function(e){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},o.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(e){return this.red=e,this},o.prototype.forceRed=function(e){return r(!this.red,"Already a number in reduction context"),this._forceRed(e)},o.prototype.redAdd=function(e){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},o.prototype.redIAdd=function(e){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},o.prototype.redSub=function(e){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},o.prototype.redISub=function(e){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},o.prototype.redShl=function(e){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},o.prototype.redMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},o.prototype.redIMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},o.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(e){return r(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var b={k256:null,p224:null,p192:null,p25519:null};function v(e,t){this.name=e,this.p=new o(t,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function y(){v.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function _(){v.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function w(){v.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function E(){v.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function S(e){if("string"==typeof e){var t=o._prime(e);this.m=t.p,this.prime=t}else r(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function M(e){S.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}v.prototype._tmp=function(){var e=new o(null);return e.words=new Array(Math.ceil(this.n/13)),e},v.prototype.ireduce=function(e){var t,n=e;do{this.split(n,this.tmp),t=(n=(n=this.imulK(n)).iadd(this.tmp)).bitLength()}while(t>this.n);var r=t<this.n?-1:n.ucmp(this.p);return 0===r?(n.words[0]=0,n.length=1):r>0?n.isub(this.p):void 0!==n.strip?n.strip():n._strip(),n},v.prototype.split=function(e,t){e.iushrn(this.n,0,t)},v.prototype.imulK=function(e){return e.imul(this.k)},i(y,v),y.prototype.split=function(e,t){for(var n=Math.min(e.length,9),r=0;r<n;r++)t.words[r]=e.words[r];if(t.length=n,e.length<=9)return e.words[0]=0,void(e.length=1);var i=e.words[9];for(t.words[t.length++]=4194303&i,r=10;r<e.length;r++){var o=0|e.words[r];e.words[r-10]=(4194303&o)<<4|i>>>22,i=o}i>>>=22,e.words[r-10]=i,0===i&&e.length>10?e.length-=10:e.length-=9},y.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,n=0;n<e.length;n++){var r=0|e.words[n];t+=977*r,e.words[n]=67108863&t,t=64*r+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},i(_,v),i(w,v),i(E,v),E.prototype.imulK=function(e){for(var t=0,n=0;n<e.length;n++){var r=19*(0|e.words[n])+t,i=67108863&r;r>>>=26,e.words[n]=i,t=r}return 0!==t&&(e.words[e.length++]=t),e},o._prime=function(e){if(b[e])return b[e];var t;if("k256"===e)t=new y;else if("p224"===e)t=new _;else if("p192"===e)t=new w;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new E}return b[e]=t,t},S.prototype._verify1=function(e){r(0===e.negative,"red works only with positives"),r(e.red,"red works only with red numbers")},S.prototype._verify2=function(e,t){r(0==(e.negative|t.negative),"red works only with positives"),r(e.red&&e.red===t.red,"red works only with red numbers")},S.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):e.umod(this.m)._forceRed(this)},S.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},S.prototype.add=function(e,t){this._verify2(e,t);var n=e.add(t);return n.cmp(this.m)>=0&&n.isub(this.m),n._forceRed(this)},S.prototype.iadd=function(e,t){this._verify2(e,t);var n=e.iadd(t);return n.cmp(this.m)>=0&&n.isub(this.m),n},S.prototype.sub=function(e,t){this._verify2(e,t);var n=e.sub(t);return n.cmpn(0)<0&&n.iadd(this.m),n._forceRed(this)},S.prototype.isub=function(e,t){this._verify2(e,t);var n=e.isub(t);return n.cmpn(0)<0&&n.iadd(this.m),n},S.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},S.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},S.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},S.prototype.isqr=function(e){return this.imul(e,e.clone())},S.prototype.sqr=function(e){return this.mul(e,e)},S.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(r(t%2==1),3===t){var n=this.m.add(new o(1)).iushrn(2);return this.pow(e,n)}for(var i=this.m.subn(1),s=0;!i.isZero()&&0===i.andln(1);)s++,i.iushrn(1);r(!i.isZero());var a=new o(1).toRed(this),u=a.redNeg(),c=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new o(2*l*l).toRed(this);0!==this.pow(l,c).cmp(u);)l.redIAdd(u);for(var h=this.pow(l,i),d=this.pow(e,i.addn(1).iushrn(1)),f=this.pow(e,i),p=s;0!==f.cmp(a);){for(var m=f,g=0;0!==m.cmp(a);g++)m=m.redSqr();r(g<p);var b=this.pow(h,new o(1).iushln(p-g-1));d=d.redMul(b),h=b.redSqr(),f=f.redMul(h),p=g}return d},S.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},S.prototype.pow=function(e,t){if(t.isZero())return new o(1).toRed(this);if(0===t.cmpn(1))return e.clone();var n=new Array(16);n[0]=new o(1).toRed(this),n[1]=e;for(var r=2;r<n.length;r++)n[r]=this.mul(n[r-1],e);var i=n[0],s=0,a=0,u=t.bitLength()%26;for(0===u&&(u=26),r=t.length-1;r>=0;r--){for(var c=t.words[r],l=u-1;l>=0;l--){var h=c>>l&1;i!==n[0]&&(i=this.sqr(i)),0!==h||0!==s?(s<<=1,s|=h,(4===++a||0===r&&0===l)&&(i=this.mul(i,n[s]),a=0,s=0)):a=0}u=26}return i},S.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},S.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},o.mont=function(e){return new M(e)},i(M,S),M.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},M.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},M.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var n=e.imul(t),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=n.isub(r).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},M.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new o(0)._forceRed(this);var n=e.mul(t),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=n.isub(r).iushrn(this.shift),s=i;return i.cmp(this.m)>=0?s=i.isub(this.m):i.cmpn(0)<0&&(s=i.iadd(this.m)),s._forceRed(this)},M.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(e,this)}).call(this,n(34)(e))},function(e,t,n){"use strict";const r=t;r.der=n(148),r.pem=n(273)},function(e,t,n){"use strict";const r=n(7),i=n(89).Buffer,o=n(90),s=n(92);function a(e){this.enc="der",this.name=e.name,this.entity=e,this.tree=new u,this.tree._init(e.body)}function u(e){o.call(this,"der",e)}function c(e){return e<10?"0"+e:e}e.exports=a,a.prototype.encode=function(e,t){return this.tree._encode(e,t).join()},r(u,o),u.prototype._encodeComposite=function(e,t,n,r){const o=function(e,t,n,r){let i;"seqof"===e?e="seq":"setof"===e&&(e="set");if(s.tagByName.hasOwnProperty(e))i=s.tagByName[e];else{if("number"!=typeof e||(0|e)!==e)return r.error("Unknown tag: "+e);i=e}if(i>=31)return r.error("Multi-octet tag encoding unsupported");t||(i|=32);return i|=s.tagClassByName[n||"universal"]<<6,i}(e,t,n,this.reporter);if(r.length<128){const e=i.alloc(2);return e[0]=o,e[1]=r.length,this._createEncoderBuffer([e,r])}let a=1;for(let e=r.length;e>=256;e>>=8)a++;const u=i.alloc(2+a);u[0]=o,u[1]=128|a;for(let e=1+a,t=r.length;t>0;e--,t>>=8)u[e]=255&t;return this._createEncoderBuffer([u,r])},u.prototype._encodeStr=function(e,t){if("bitstr"===t)return this._createEncoderBuffer([0|e.unused,e.data]);if("bmpstr"===t){const t=i.alloc(2*e.length);for(let n=0;n<e.length;n++)t.writeUInt16BE(e.charCodeAt(n),2*n);return this._createEncoderBuffer(t)}return"numstr"===t?this._isNumstr(e)?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: numstr supports only digits and space"):"printstr"===t?this._isPrintstr(e)?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(t)||"objDesc"===t?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: "+t+" unsupported")},u.prototype._encodeObjid=function(e,t,n){if("string"==typeof e){if(!t)return this.reporter.error("string objid given, but no values map found");if(!t.hasOwnProperty(e))return this.reporter.error("objid not found in values map");e=t[e].split(/[\s.]+/g);for(let t=0;t<e.length;t++)e[t]|=0}else if(Array.isArray(e)){e=e.slice();for(let t=0;t<e.length;t++)e[t]|=0}if(!Array.isArray(e))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(e));if(!n){if(e[1]>=40)return this.reporter.error("Second objid identifier OOB");e.splice(0,2,40*e[0]+e[1])}let r=0;for(let t=0;t<e.length;t++){let n=e[t];for(r++;n>=128;n>>=7)r++}const o=i.alloc(r);let s=o.length-1;for(let t=e.length-1;t>=0;t--){let n=e[t];for(o[s--]=127&n;(n>>=7)>0;)o[s--]=128|127&n}return this._createEncoderBuffer(o)},u.prototype._encodeTime=function(e,t){let n;const r=new Date(e);return"gentime"===t?n=[c(r.getUTCFullYear()),c(r.getUTCMonth()+1),c(r.getUTCDate()),c(r.getUTCHours()),c(r.getUTCMinutes()),c(r.getUTCSeconds()),"Z"].join(""):"utctime"===t?n=[c(r.getUTCFullYear()%100),c(r.getUTCMonth()+1),c(r.getUTCDate()),c(r.getUTCHours()),c(r.getUTCMinutes()),c(r.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+t+" time is not supported yet"),this._encodeStr(n,"octstr")},u.prototype._encodeNull=function(){return this._createEncoderBuffer("")},u.prototype._encodeInt=function(e,t){if("string"==typeof e){if(!t)return this.reporter.error("String int or enum given, but no values map");if(!t.hasOwnProperty(e))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(e));e=t[e]}if("number"!=typeof e&&!i.isBuffer(e)){const t=e.toArray();!e.sign&&128&t[0]&&t.unshift(0),e=i.from(t)}if(i.isBuffer(e)){let t=e.length;0===e.length&&t++;const n=i.alloc(t);return e.copy(n),0===e.length&&(n[0]=0),this._createEncoderBuffer(n)}if(e<128)return this._createEncoderBuffer(e);if(e<256)return this._createEncoderBuffer([0,e]);let n=1;for(let t=e;t>=256;t>>=8)n++;const r=new Array(n);for(let t=r.length-1;t>=0;t--)r[t]=255&e,e>>=8;return 128&r[0]&&r.unshift(0),this._createEncoderBuffer(i.from(r))},u.prototype._encodeBool=function(e){return this._createEncoderBuffer(e?255:0)},u.prototype._use=function(e,t){return"function"==typeof e&&(e=e(t)),e._getEncoder("der").tree},u.prototype._skipDefault=function(e,t,n){const r=this._baseState;let i;if(null===r.default)return!1;const o=e.join();if(void 0===r.defaultBuffer&&(r.defaultBuffer=this._encodeValue(r.default,t,n).join()),o.length!==r.defaultBuffer.length)return!1;for(i=0;i<o.length;i++)if(o[i]!==r.defaultBuffer[i])return!1;return!0}},function(e,t,n){"use strict";const r=t;r.der=n(150),r.pem=n(274)},function(e,t,n){"use strict";const r=n(7),i=n(146),o=n(54).DecoderBuffer,s=n(90),a=n(92);function u(e){this.enc="der",this.name=e.name,this.entity=e,this.tree=new c,this.tree._init(e.body)}function c(e){s.call(this,"der",e)}function l(e,t){let n=e.readUInt8(t);if(e.isError(n))return n;const r=a.tagClass[n>>6],i=0==(32&n);if(31==(31&n)){let r=n;for(n=0;128==(128&r);){if(r=e.readUInt8(t),e.isError(r))return r;n<<=7,n|=127&r}}else n&=31;return{cls:r,primitive:i,tag:n,tagStr:a.tag[n]}}function h(e,t,n){let r=e.readUInt8(n);if(e.isError(r))return r;if(!t&&128===r)return null;if(0==(128&r))return r;const i=127&r;if(i>4)return e.error("length octect is too long");r=0;for(let t=0;t<i;t++){r<<=8;const t=e.readUInt8(n);if(e.isError(t))return t;r|=t}return r}e.exports=u,u.prototype.decode=function(e,t){return o.isDecoderBuffer(e)||(e=new o(e,t)),this.tree._decode(e,t)},r(c,s),c.prototype._peekTag=function(e,t,n){if(e.isEmpty())return!1;const r=e.save(),i=l(e,'Failed to peek tag: "'+t+'"');return e.isError(i)?i:(e.restore(r),i.tag===t||i.tagStr===t||i.tagStr+"of"===t||n)},c.prototype._decodeTag=function(e,t,n){const r=l(e,'Failed to decode tag of "'+t+'"');if(e.isError(r))return r;let i=h(e,r.primitive,'Failed to get length of "'+t+'"');if(e.isError(i))return i;if(!n&&r.tag!==t&&r.tagStr!==t&&r.tagStr+"of"!==t)return e.error('Failed to match tag: "'+t+'"');if(r.primitive||null!==i)return e.skip(i,'Failed to match body of: "'+t+'"');const o=e.save(),s=this._skipUntilEnd(e,'Failed to skip indefinite length body: "'+this.tag+'"');return e.isError(s)?s:(i=e.offset-o.offset,e.restore(o),e.skip(i,'Failed to match body of: "'+t+'"'))},c.prototype._skipUntilEnd=function(e,t){for(;;){const n=l(e,t);if(e.isError(n))return n;const r=h(e,n.primitive,t);if(e.isError(r))return r;let i;if(i=n.primitive||null!==r?e.skip(r):this._skipUntilEnd(e,t),e.isError(i))return i;if("end"===n.tagStr)break}},c.prototype._decodeList=function(e,t,n,r){const i=[];for(;!e.isEmpty();){const t=this._peekTag(e,"end");if(e.isError(t))return t;const o=n.decode(e,"der",r);if(e.isError(o)&&t)break;i.push(o)}return i},c.prototype._decodeStr=function(e,t){if("bitstr"===t){const t=e.readUInt8();return e.isError(t)?t:{unused:t,data:e.raw()}}if("bmpstr"===t){const t=e.raw();if(t.length%2==1)return e.error("Decoding of string type: bmpstr length mismatch");let n="";for(let e=0;e<t.length/2;e++)n+=String.fromCharCode(t.readUInt16BE(2*e));return n}if("numstr"===t){const t=e.raw().toString("ascii");return this._isNumstr(t)?t:e.error("Decoding of string type: numstr unsupported characters")}if("octstr"===t)return e.raw();if("objDesc"===t)return e.raw();if("printstr"===t){const t=e.raw().toString("ascii");return this._isPrintstr(t)?t:e.error("Decoding of string type: printstr unsupported characters")}return/str$/.test(t)?e.raw().toString():e.error("Decoding of string type: "+t+" unsupported")},c.prototype._decodeObjid=function(e,t,n){let r;const i=[];let o=0,s=0;for(;!e.isEmpty();)s=e.readUInt8(),o<<=7,o|=127&s,0==(128&s)&&(i.push(o),o=0);128&s&&i.push(o);const a=i[0]/40|0,u=i[0]%40;if(r=n?i:[a,u].concat(i.slice(1)),t){let e=t[r.join(" ")];void 0===e&&(e=t[r.join(".")]),void 0!==e&&(r=e)}return r},c.prototype._decodeTime=function(e,t){const n=e.raw().toString();let r,i,o,s,a,u;if("gentime"===t)r=0|n.slice(0,4),i=0|n.slice(4,6),o=0|n.slice(6,8),s=0|n.slice(8,10),a=0|n.slice(10,12),u=0|n.slice(12,14);else{if("utctime"!==t)return e.error("Decoding "+t+" time is not supported yet");r=0|n.slice(0,2),i=0|n.slice(2,4),o=0|n.slice(4,6),s=0|n.slice(6,8),a=0|n.slice(8,10),u=0|n.slice(10,12),r=r<70?2e3+r:1900+r}return Date.UTC(r,i-1,o,s,a,u,0)},c.prototype._decodeNull=function(){return null},c.prototype._decodeBool=function(e){const t=e.readUInt8();return e.isError(t)?t:0!==t},c.prototype._decodeInt=function(e,t){const n=e.raw();let r=new i(n);return t&&(r=t[r.toString(10)]||r),r},c.prototype._use=function(e,t){return"function"==typeof e&&(e=e(t)),e._getDecoder("der").tree}},function(e){e.exports=JSON.parse('{"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"}')},function(e,t,n){var r=n(51),i=n(8).Buffer;function o(e){var t=i.allocUnsafe(4);return t.writeUInt32BE(e,0),t}e.exports=function(e,t){for(var n,s=i.alloc(0),a=0;s.length<t;)n=o(a++),s=i.concat([s,r("sha1").update(e).update(n).digest()]);return s.slice(0,t)}},function(e,t){e.exports=function(e,t){for(var n=e.length,r=-1;++r<n;)e[r]^=t[r];return e}},function(e,t,n){var r=n(93),i=n(8).Buffer;e.exports=function(e,t){return i.from(e.toRed(r.mont(t.modulus)).redPow(new r(t.publicExponent)).fromRed().toArray())}},function(e,t,n){var r=n(17).Buffer;e.exports=function(e){return"string"==typeof e?e:"number"==typeof e||r.isBuffer(e)?e.toString():JSON.stringify(e)}},function(e,t,n){var r=n(64),i=function(e,t){r.call(this,e),this.name="NotBeforeError",this.date=t};(i.prototype=Object.create(r.prototype)).constructor=i,e.exports=i},function(e,t,n){var r=n(64),i=function(e,t){r.call(this,e),this.name="TokenExpiredError",this.expiredAt=t};(i.prototype=Object.create(r.prototype)).constructor=i,e.exports=i},function(e,t,n){var r=n(293);e.exports=function(e,t){var n=t||Math.floor(Date.now()/1e3);if("string"==typeof e){var i=r(e);if(void 0===i)return;return Math.floor(n+i/1e3)}return"number"==typeof e?n+e:void 0}},function(e,t,n){(function(t){var r=n(294);e.exports=r.satisfies(t.version,"^6.12.0 || >=8.0.0")}).call(this,n(16))},function(e,t,n){window,e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=5)}([function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";(function(e){var r=n(2),i=n.n(r),o=n(3);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t,n,r,i,o,s){try{var a=e[o](s),u=a.value}catch(e){return void n(e)}a.done?t(u):Promise.resolve(u).then(r,i)}var l="Error";function h(e){var t=new Error('Required parameter, "'.concat(e,'" is missing.'));throw"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(t,h),t}var d={configure:function(t){var n=t.url,r=void 0===n?h("url"):n,s=t.service,u=void 0===s?h("service"):s,d=t.version,f=void 0===d?h("version"):d,p=t.apigeeClientId,m=void 0===p?h("apigeeClientId"):p,g=function(t){return function(){var n,s=(n=regeneratorRuntime.mark((function n(s,c,h){var d;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return d=a(a({},s),{},{service:u,version:f,loggername:"UiLogger",serviceType:"reactjs",level:t,eventType:t===l?"Exception":"Trace",correlationId:void 0===h?i()():h,timestamp:new Date,exception:void 0!==c?c:null,request:e.window.location.href,userAgent:e.window.navigator.userAgent}),n.prev=1,n.next=4,Object(o.a)(r,d,m,d.correlationId);case 4:n.next=9;break;case 6:n.prev=6,n.t0=n.catch(1),console.warn("UI Logger failed:",{url:r,payload:d,error:n.t0});case 9:case"end":return n.stop()}}),n,null,[[1,6]])})),function(){var e=this,t=arguments;return new Promise((function(r,i){var o=n.apply(e,t);function s(e){c(o,r,i,s,a,"next",e)}function a(e){c(o,r,i,s,a,"throw",e)}s(void 0)}))});return function(e,t,n){return s.apply(this,arguments)}}()};return{debug:g("Debug"),info:g("Info"),warn:g("Warn"),error:g(l)}}};t.a=d}).call(this,n(0))},function(e,t,n){var r=n(9),i=n(10);e.exports=function(e,t,n){var o=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var s=(e=e||{}).random||(e.rng||r)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t)for(var a=0;a<16;++a)t[o+a]=s[a];return t||i(s)}},function(e,t,n){"use strict";var r=n(4),i=n.n(r);function o(e,t,n,r,i,o,s){try{var a=e[o](s),u=a.value}catch(e){return void n(e)}a.done?t(u):Promise.resolve(u).then(r,i)}var s=function(){var e,t=(e=regeneratorRuntime.mark((function e(t,n,r,o){var s,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={method:"POST",body:JSON.stringify(n),headers:{Accept:"application/json","Content-Type":"application/json","X-ClientId":r,"X-correlationid":o}},e.next=3,i()(t,s);case 3:if(!((a=e.sent).status>=400)){e.next=6;break}throw new Error("There was a failure in the service with a status code of ".concat(a.status));case 6:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,i){var s=e.apply(t,n);function a(e){o(s,r,i,a,u,"next",e)}function u(e){o(s,r,i,a,u,"throw",e)}a(void 0)}))});return function(e,n,r,i){return t.apply(this,arguments)}}();t.a=s},function(e,t){var n="undefined"!=typeof self?self:this,r=function(){function e(){this.fetch=!1,this.DOMException=n.DOMException}return e.prototype=n,new e}();!function(e){!function(t){var n="URLSearchParams"in e,r="Symbol"in e&&"iterator"in Symbol,i="FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),o="FormData"in e,s="ArrayBuffer"in e;if(s)var a=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],u=ArrayBuffer.isView||function(e){return e&&a.indexOf(Object.prototype.toString.call(e))>-1};function c(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function l(e){return"string"!=typeof e&&(e=String(e)),e}function h(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return r&&(t[Symbol.iterator]=function(){return t}),t}function d(e){this.map={},e instanceof d?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function f(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function p(e){return new Promise((function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function m(e){var t=new FileReader,n=p(t);return t.readAsArrayBuffer(e),n}function g(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function b(){return this.bodyUsed=!1,this._initBody=function(e){var t;this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:i&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:o&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:n&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():s&&i&&(t=e)&&DataView.prototype.isPrototypeOf(t)?(this._bodyArrayBuffer=g(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):s&&(ArrayBuffer.prototype.isPrototypeOf(e)||u(e))?this._bodyArrayBuffer=g(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):n&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},i&&(this.blob=function(){var e=f(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?f(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(m)}),this.text=function(){var e,t,n,r=f(this);if(r)return r;if(this._bodyBlob)return e=this._bodyBlob,n=p(t=new FileReader),t.readAsText(e),n;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},o&&(this.formData=function(){return this.text().then(_)}),this.json=function(){return this.text().then(JSON.parse)},this}d.prototype.append=function(e,t){e=c(e),t=l(t);var n=this.map[e];this.map[e]=n?n+", "+t:t},d.prototype.delete=function(e){delete this.map[c(e)]},d.prototype.get=function(e){return e=c(e),this.has(e)?this.map[e]:null},d.prototype.has=function(e){return this.map.hasOwnProperty(c(e))},d.prototype.set=function(e,t){this.map[c(e)]=l(t)},d.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},d.prototype.keys=function(){var e=[];return this.forEach((function(t,n){e.push(n)})),h(e)},d.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),h(e)},d.prototype.entries=function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),h(e)},r&&(d.prototype[Symbol.iterator]=d.prototype.entries);var v=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function y(e,t){var n,r,i=(t=t||{}).body;if(e instanceof y){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new d(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,i||null==e._bodyInit||(i=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new d(t.headers)),this.method=(r=(n=t.method||this.method||"GET").toUpperCase(),v.indexOf(r)>-1?r:n),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i)}function _(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(i))}})),t}function w(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new d(t.headers),this.url=t.url||"",this._initBody(e)}y.prototype.clone=function(){return new y(this,{body:this._bodyInit})},b.call(y.prototype),b.call(w.prototype),w.prototype.clone=function(){return new w(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new d(this.headers),url:this.url})},w.error=function(){var e=new w(null,{status:0,statusText:""});return e.type="error",e};var E=[301,302,303,307,308];w.redirect=function(e,t){if(-1===E.indexOf(t))throw new RangeError("Invalid status code");return new w(null,{status:t,headers:{location:e}})},t.DOMException=e.DOMException;try{new t.DOMException}catch(e){t.DOMException=function(e,t){this.message=e,this.name=t;var n=Error(e);this.stack=n.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}function S(e,n){return new Promise((function(r,o){var s=new y(e,n);if(s.signal&&s.signal.aborted)return o(new t.DOMException("Aborted","AbortError"));var a=new XMLHttpRequest;function u(){a.abort()}a.onload=function(){var e,t,n={status:a.status,statusText:a.statusText,headers:(e=a.getAllResponseHeaders()||"",t=new d,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(e){var n=e.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();t.append(r,i)}})),t)};n.url="responseURL"in a?a.responseURL:n.headers.get("X-Request-URL");var i="response"in a?a.response:a.responseText;r(new w(i,n))},a.onerror=function(){o(new TypeError("Network request failed"))},a.ontimeout=function(){o(new TypeError("Network request failed"))},a.onabort=function(){o(new t.DOMException("Aborted","AbortError"))},a.open(s.method,s.url,!0),"include"===s.credentials?a.withCredentials=!0:"omit"===s.credentials&&(a.withCredentials=!1),"responseType"in a&&i&&(a.responseType="blob"),s.headers.forEach((function(e,t){a.setRequestHeader(t,e)})),s.signal&&(s.signal.addEventListener("abort",u),a.onreadystatechange=function(){4===a.readyState&&s.signal.removeEventListener("abort",u)}),a.send(void 0===s._bodyInit?null:s._bodyInit)}))}S.polyfill=!0,e.fetch||(e.fetch=S,e.Headers=d,e.Request=y,e.Response=w),t.Headers=d,t.Request=y,t.Response=w,t.fetch=S,Object.defineProperty(t,"__esModule",{value:!0})}({})}(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var i=r;(t=i.fetch).default=i.fetch,t.fetch=i.fetch,t.Headers=i.Headers,t.Request=i.Request,t.Response=i.Response,e.exports=t},function(e,t,n){n(6),e.exports=n(8)},function(e,t,n){(function(t,n){!function(t){"use strict";var r=Object.prototype.hasOwnProperty,i="function"==typeof Symbol&&Symbol.iterator||"@@iterator",o="object"==typeof e,s=t.regeneratorRuntime;if(s)o&&(e.exports=s);else{(s=t.regeneratorRuntime=o?e.exports:{}).wrap=c;var a={},u=f.prototype=h.prototype;d.prototype=u.constructor=f,f.constructor=d,d.displayName="GeneratorFunction",s.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},s.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):e.__proto__=f,e.prototype=Object.create(u),e},s.awrap=function(e){return new m(e)},p(g.prototype),s.async=function(e,t,n,r){var i=new g(c(e,t,n,r));return s.isGeneratorFunction(t)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},p(u),u[i]=function(){return this},u.toString=function(){return"[object Generator]"},s.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},s.values=_,y.prototype={constructor:y,reset:function(e){if(this.prev=0,this.next=0,this.sent=void 0,this.done=!1,this.delegate=null,this.tryEntries.forEach(v),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,r){return s.type="throw",s.arg=e,t.next=n,!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],s=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var a=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(a&&u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=e,s.arg=t,o?this.next=o.finallyLoc:this.complete(s),a},complete:function(e,t){if("throw"===e.type)throw e.arg;"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=e.arg,this.next="end"):"normal"===e.type&&t&&(this.next=t)},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),v(n),a}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;v(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:_(e),resultName:t,nextLoc:n},a}}}function c(e,t,n,r){var i=Object.create((t||h).prototype),o=new y(r||[]);return i._invoke=function(e,t,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return{value:void 0,done:!0}}for(;;){var s=n.delegate;if(s){if("return"===i||"throw"===i&&void 0===s.iterator[i]){n.delegate=null;var u=s.iterator.return;if(u&&"throw"===(c=l(u,s.iterator,o)).type){i="throw",o=c.arg;continue}if("return"===i)continue}var c;if("throw"===(c=l(s.iterator[i],s.iterator,o)).type){n.delegate=null,i="throw",o=c.arg;continue}if(i="next",o=void 0,!(h=c.arg).done)return r="suspendedYield",h;n[s.resultName]=h.value,n.next=s.nextLoc,n.delegate=null}if("next"===i)n._sent=o,n.sent="suspendedYield"===r?o:void 0;else if("throw"===i){if("suspendedStart"===r)throw r="completed",o;n.dispatchException(o)&&(i="next",o=void 0)}else"return"===i&&n.abrupt("return",o);if(r="executing","normal"===(c=l(e,t,n)).type){r=n.done?"completed":"suspendedYield";var h={value:c.arg,done:n.done};if(c.arg!==a)return h;n.delegate&&"next"===i&&(o=void 0)}else"throw"===c.type&&(r="completed",i="throw",o=c.arg)}}}(e,n,o),i}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function h(){}function d(){}function f(){}function p(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function m(e){this.arg=e}function g(e){function t(t,n){var r=e[t](n),s=r.value;return s instanceof m?Promise.resolve(s.arg).then(i,o):Promise.resolve(s).then((function(e){return r.value=e,r}))}"object"==typeof n&&n.domain&&(t=n.domain.bind(t));var r,i=t.bind(e,"next"),o=t.bind(e,"throw");t.bind(e,"return"),this._invoke=function(e,n){function i(){return t(e,n)}return r=r?r.then(i,i):new Promise((function(e){e(i())}))}}function b(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function v(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function y(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(b,this),this.reset(!0)}function _(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:w}}function w(){return{value:void 0,done:!0}}}("object"==typeof t?t:"object"==typeof window?window:"object"==typeof self?self:this)}).call(this,n(0),n(7))},function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(e){r=s}}();var u,c=[],l=!1,h=-1;function d(){l&&u&&(l=!1,u.length?c=u.concat(c):h=-1,c.length&&f())}function f(){if(!l){var e=a(d);l=!0;for(var t=c.length;t;){for(u=c,c=[];++h<t;)u&&u[h].run();h=-1,t=c.length}u=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function m(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new p(e,t)),1!==c.length||l||a(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){"use strict";n.r(t);var r=n(1);t.default=r.a},function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);e.exports=function(){return n(r),r}}else{var i=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),i[t]=e>>>((3&t)<<3)&255;return i}}},function(e,t){for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);e.exports=function(e,t){var r=t||0,i=n;return i[e[r++]]+i[e[r++]]+i[e[r++]]+i[e[r++]]+"-"+i[e[r++]]+i[e[r++]]+"-"+i[e[r++]]+i[e[r++]]+"-"+i[e[r++]]+i[e[r++]]+"-"+i[e[r++]]+i[e[r++]]+i[e[r++]]+i[e[r++]]+i[e[r++]]+i[e[r++]]}}])},function(e,t,n){"use strict";e.exports=n(180)},function(e,t,n){"use strict";e.exports=n(183)},function(e,t,n){"use strict";function r(e){return function(t){var n=t.dispatch,r=t.getState;return function(t){return function(i){return"function"==typeof i?i(n,r,e):t(i)}}}}var i=r();i.withExtraArgument=r,t.a=i},function(e,t,n){"use strict";var r=n(56).compose;t.__esModule=!0,t.composeWithDevTools="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"==typeof arguments[0]?r:r.apply(null,arguments)},t.devToolsEnhancer="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__?window.__REDUX_DEVTOOLS_EXTENSION__:function(){return function(e){return e}}},function(e,t,n){"use strict";function r(e){var t,n=e.Symbol;return"function"==typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}n.d(t,"a",(function(){return r}))},function(e,t,n){
/*! algoliasearch.umd.js | 4.8.5 | © Algolia, inc. | https://github.com/algolia/algoliasearch-client-javascript */
e.exports=function(){"use strict";function e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function n(n){for(var r=1;r<arguments.length;r++){var i=null!=arguments[r]?arguments[r]:{};r%2?t(Object(i),!0).forEach((function(t){e(n,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):t(Object(i)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))}))}return n}function r(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return n}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function o(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function s(e){var t,n="algoliasearch-client-js-".concat(e.key),r=function(){return void 0===t&&(t=e.localStorage||window.localStorage),t},o=function(){return JSON.parse(r().getItem(n)||"{}")};return{get:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{miss:function(){return Promise.resolve()}};return Promise.resolve().then((function(){var n=JSON.stringify(e),r=o()[n];return Promise.all([r||t(),void 0!==r])})).then((function(e){var t=i(e,2),r=t[0],o=t[1];return Promise.all([r,o||n.miss(r)])})).then((function(e){return i(e,1)[0]}))},set:function(e,t){return Promise.resolve().then((function(){var i=o();return i[JSON.stringify(e)]=t,r().setItem(n,JSON.stringify(i)),t}))},delete:function(e){return Promise.resolve().then((function(){var t=o();delete t[JSON.stringify(e)],r().setItem(n,JSON.stringify(t))}))},clear:function(){return Promise.resolve().then((function(){r().removeItem(n)}))}}}function a(e){var t=o(e.caches),n=t.shift();return void 0===n?{get:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{miss:function(){return Promise.resolve()}},r=t();return r.then((function(e){return Promise.all([e,n.miss(e)])})).then((function(e){return i(e,1)[0]}))},set:function(e,t){return Promise.resolve(t)},delete:function(e){return Promise.resolve()},clear:function(){return Promise.resolve()}}:{get:function(e,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{miss:function(){return Promise.resolve()}};return n.get(e,r,i).catch((function(){return a({caches:t}).get(e,r,i)}))},set:function(e,r){return n.set(e,r).catch((function(){return a({caches:t}).set(e,r)}))},delete:function(e){return n.delete(e).catch((function(){return a({caches:t}).delete(e)}))},clear:function(){return n.clear().catch((function(){return a({caches:t}).clear()}))}}}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{serializable:!0},t={};return{get:function(n,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{miss:function(){return Promise.resolve()}},o=JSON.stringify(n);if(o in t)return Promise.resolve(e.serializable?JSON.parse(t[o]):t[o]);var s=r(),a=i&&i.miss||function(){return Promise.resolve()};return s.then((function(e){return a(e)})).then((function(){return s}))},set:function(n,r){return t[JSON.stringify(n)]=e.serializable?JSON.stringify(r):r,Promise.resolve(r)},delete:function(e){return delete t[JSON.stringify(e)],Promise.resolve()},clear:function(){return t={},Promise.resolve()}}}function c(e,t,n){var r={"x-algolia-api-key":n,"x-algolia-application-id":t};return{headers:function(){return e===m.WithinHeaders?r:{}},queryParameters:function(){return e===m.WithinQueryParameters?r:{}}}}function l(e){var t=0;return e((function n(){return t++,new Promise((function(r){setTimeout((function(){r(e(n))}),Math.min(100*t,1e3))}))}))}function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e,t){return Promise.resolve()};return Object.assign(e,{wait:function(n){return h(e.then((function(e){return Promise.all([t(e,n),e])})).then((function(e){return e[1]})))}})}function d(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),r=e[t];e[t]=e[n],e[n]=r}return e}function f(e,t){return t?(Object.keys(t).forEach((function(n){e[n]=t[n](e)})),e):e}function p(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=0;return e.replace(/%s/g,(function(){return encodeURIComponent(n[i++])}))}var m={WithinQueryParameters:0,WithinHeaders:1};function g(e,t){var n=e||{},r=n.data||{};return Object.keys(n).forEach((function(e){-1===["timeout","headers","queryParameters","data","cacheable"].indexOf(e)&&(r[e]=n[e])})),{data:Object.entries(r).length>0?r:void 0,timeout:n.timeout||t,headers:n.headers||{},queryParameters:n.queryParameters||{},cacheable:n.cacheable}}var b={Read:1,Write:2,Any:3};function v(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return n(n({},e),{},{status:t,lastUpdate:Date.now()})}function y(e){return"string"==typeof e?{protocol:"https",url:e,accept:b.Any}:{protocol:e.protocol||"https",url:e.url,accept:e.accept||b.Any}}var _="DELETE",w="GET",E="POST";function S(e,t,r,i){var s=[],a=function(e,t){if(e.method!==w&&(void 0!==e.data||void 0!==t.data)){var r=Array.isArray(e.data)?e.data:n(n({},e.data),t.data);return JSON.stringify(r)}}(r,i),u=function(e,t){var r=n(n({},e.headers),t.headers),i={};return Object.keys(r).forEach((function(e){var t=r[e];i[e.toLowerCase()]=t})),i}(e,i),c=r.method,l=r.method!==w?{}:n(n({},r.data),i.data),h=n(n(n({"x-algolia-agent":e.userAgent.value},e.queryParameters),l),i.queryParameters),d=0,f=function t(n,o){var l=n.pop();if(void 0===l)throw{name:"RetryError",message:"Unreachable hosts - your application id may be incorrect. If the error persists, contact support@algolia.com.",transporterStackTrace:T(s)};var f={data:a,headers:u,method:c,url:A(l,r.path,h),connectTimeout:o(d,e.timeouts.connect),responseTimeout:o(d,i.timeout)},p=function(e){var t={request:f,response:e,host:l,triesLeft:n.length};return s.push(t),t},m={onSucess:function(e){return function(e){try{return JSON.parse(e.content)}catch(t){throw function(e,t){return{name:"DeserializationError",message:e,response:t}}(t.message,e)}}(e)},onRetry:function(r){var i=p(r);return r.isTimedOut&&d++,Promise.all([e.logger.info("Retryable failure",k(i)),e.hostsCache.set(l,v(l,r.isTimedOut?3:2))]).then((function(){return t(n,o)}))},onFail:function(e){throw p(e),function(e,t){var n=e.content,r=e.status,i=n;try{i=JSON.parse(n).message}catch(e){}return function(e,t,n){return{name:"ApiError",message:e,status:t,transporterStackTrace:n}}(i,r,t)}(e,T(s))}};return e.requester.send(f).then((function(e){return function(e,t){return function(e){var t=e.status;return e.isTimedOut||function(e){var t=e.isTimedOut,n=e.status;return!t&&0==~~n}(e)||2!=~~(t/100)&&4!=~~(t/100)}(e)?t.onRetry(e):2==~~(e.status/100)?t.onSucess(e):t.onFail(e)}(e,m)}))};return function(e,t){return Promise.all(t.map((function(t){return e.get(t,(function(){return Promise.resolve(v(t))}))}))).then((function(e){var n=e.filter((function(e){return function(e){return 1===e.status||Date.now()-e.lastUpdate>12e4}(e)})),r=e.filter((function(e){return function(e){return 3===e.status&&Date.now()-e.lastUpdate<=12e4}(e)})),i=[].concat(o(n),o(r));return{getTimeout:function(e,t){return(0===r.length&&0===e?1:r.length+3+e)*t},statelessHosts:i.length>0?i.map((function(e){return y(e)})):t}}))}(e.hostsCache,t).then((function(e){return f(o(e.statelessHosts).reverse(),e.getTimeout)}))}function M(e){var t=e.hostsCache,n=e.logger,r=e.requester,o=e.requestsCache,s=e.responsesCache,a=e.timeouts,u=e.userAgent,c=e.hosts,l=e.queryParameters,h={hostsCache:t,logger:n,requester:r,requestsCache:o,responsesCache:s,timeouts:a,userAgent:u,headers:e.headers,queryParameters:l,hosts:c.map((function(e){return y(e)})),read:function(e,t){var n=g(t,h.timeouts.read),r=function(){return S(h,h.hosts.filter((function(e){return 0!=(e.accept&b.Read)})),e,n)};if(!0!==(void 0!==n.cacheable?n.cacheable:e.cacheable))return r();var o={request:e,mappedRequestOptions:n,transporter:{queryParameters:h.queryParameters,headers:h.headers}};return h.responsesCache.get(o,(function(){return h.requestsCache.get(o,(function(){return h.requestsCache.set(o,r()).then((function(e){return Promise.all([h.requestsCache.delete(o),e])}),(function(e){return Promise.all([h.requestsCache.delete(o),Promise.reject(e)])})).then((function(e){var t=i(e,2);return t[0],t[1]}))}))}),{miss:function(e){return h.responsesCache.set(o,e)}})},write:function(e,t){return S(h,h.hosts.filter((function(e){return 0!=(e.accept&b.Write)})),e,g(t,h.timeouts.write))}};return h}function O(e){var t={value:"Algolia for JavaScript (".concat(e,")"),add:function(e){var n="; ".concat(e.segment).concat(void 0!==e.version?" (".concat(e.version,")"):"");return-1===t.value.indexOf(n)&&(t.value="".concat(t.value).concat(n)),t}};return t}function A(e,t,n){var r=C(n),i="".concat(e.protocol,"://").concat(e.url,"/").concat("/"===t.charAt(0)?t.substr(1):t);return r.length&&(i+="?".concat(r)),i}function C(e){return Object.keys(e).map((function(t){return p("%s=%s",t,(n=e[t],"[object Object]"===Object.prototype.toString.call(n)||"[object Array]"===Object.prototype.toString.call(n)?JSON.stringify(e[t]):e[t]));var n})).join("&")}function T(e){return e.map((function(e){return k(e)}))}function k(e){var t=e.request.headers["x-algolia-api-key"]?{"x-algolia-api-key":"*****"}:{};return n(n({},e),{},{request:n(n({},e.request),{},{headers:n(n({},e.request.headers),t)})})}var x=function(e){return function(t,n){return e.transporter.write({method:E,path:"2/abtests",data:t},n)}},j=function(e){return function(t,n){return e.transporter.write({method:_,path:p("2/abtests/%s",t)},n)}},I=function(e){return function(t,n){return e.transporter.read({method:w,path:p("2/abtests/%s",t)},n)}},R=function(e){return function(t){return e.transporter.read({method:w,path:"2/abtests"},t)}},N=function(e){return function(t,n){return e.transporter.write({method:E,path:p("2/abtests/%s/stop",t)},n)}},P=function(e){return function(t){return e.transporter.read({method:w,path:"1/strategies/personalization"},t)}},D=function(e){return function(t,n){return e.transporter.write({method:E,path:"1/strategies/personalization",data:t},n)}};function U(e){return function t(n){return e.request(n).then((function(r){if(void 0!==e.batch&&e.batch(r.hits),!e.shouldStop(r))return r.cursor?t({cursor:r.cursor}):t({page:(n.page||0)+1})}))}({})}var L=function(e){return function(t,i){var o=i||{},s=o.queryParameters,a=r(o,["queryParameters"]),u=n({acl:t},void 0!==s?{queryParameters:s}:{});return h(e.transporter.write({method:E,path:"1/keys",data:u},a),(function(t,n){return l((function(r){return W(e)(t.key,n).catch((function(e){if(404!==e.status)throw e;return r()}))}))}))}},F=function(e){return function(t,n,r){var i=g(r);return i.queryParameters["X-Algolia-User-ID"]=t,e.transporter.write({method:E,path:"1/clusters/mapping",data:{cluster:n}},i)}},B=function(e){return function(t,n,r){return e.transporter.write({method:E,path:"1/clusters/mapping/batch",data:{users:t,cluster:n}},r)}},H=function(e){return function(t,n,r){return h(e.transporter.write({method:E,path:p("1/indexes/%s/operation",t),data:{operation:"copy",destination:n}},r),(function(n,r){return Z(e)(t,{methods:{waitTask:Je}}).waitTask(n.taskID,r)}))}},q=function(e){return function(t,r,i){return H(e)(t,r,n(n({},i),{},{scope:[$e.Rules]}))}},V=function(e){return function(t,r,i){return H(e)(t,r,n(n({},i),{},{scope:[$e.Settings]}))}},G=function(e){return function(t,r,i){return H(e)(t,r,n(n({},i),{},{scope:[$e.Synonyms]}))}},z=function(e){return function(t,n){return h(e.transporter.write({method:_,path:p("1/keys/%s",t)},n),(function(n,r){return l((function(n){return W(e)(t,r).then(n).catch((function(e){if(404!==e.status)throw e}))}))}))}},W=function(e){return function(t,n){return e.transporter.read({method:w,path:p("1/keys/%s",t)},n)}},K=function(e){return function(t){return e.transporter.read({method:w,path:"1/logs"},t)}},Y=function(e){return function(t){return e.transporter.read({method:w,path:"1/clusters/mapping/top"},t)}},Q=function(e){return function(t,n){return e.transporter.read({method:w,path:p("1/clusters/mapping/%s",t)},n)}},J=function(e){return function(t){var n=t||{},i=n.retrieveMappings,o=r(n,["retrieveMappings"]);return!0===i&&(o.getClusters=!0),e.transporter.read({method:w,path:"1/clusters/mapping/pending"},o)}},Z=function(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={transporter:e.transporter,appId:e.appId,indexName:t};return f(r,n.methods)}},$=function(e){return function(t){return e.transporter.read({method:w,path:"1/keys"},t)}},X=function(e){return function(t){return e.transporter.read({method:w,path:"1/clusters"},t)}},ee=function(e){return function(t){return e.transporter.read({method:w,path:"1/indexes"},t)}},te=function(e){return function(t){return e.transporter.read({method:w,path:"1/clusters/mapping"},t)}},ne=function(e){return function(t,n,r){return h(e.transporter.write({method:E,path:p("1/indexes/%s/operation",t),data:{operation:"move",destination:n}},r),(function(n,r){return Z(e)(t,{methods:{waitTask:Je}}).waitTask(n.taskID,r)}))}},re=function(e){return function(t,n){return h(e.transporter.write({method:E,path:"1/indexes/*/batch",data:{requests:t}},n),(function(t,n){return Promise.all(Object.keys(t.taskID).map((function(r){return Z(e)(r,{methods:{waitTask:Je}}).waitTask(t.taskID[r],n)})))}))}},ie=function(e){return function(t,n){return e.transporter.read({method:E,path:"1/indexes/*/objects",data:{requests:t}},n)}},oe=function(e){return function(t,r){var i=t.map((function(e){return n(n({},e),{},{params:C(e.params||{})})}));return e.transporter.read({method:E,path:"1/indexes/*/queries",data:{requests:i},cacheable:!0},r)}},se=function(e){return function(t,i){return Promise.all(t.map((function(t){var o=t.params,s=o.facetName,a=o.facetQuery,u=r(o,["facetName","facetQuery"]);return Z(e)(t.indexName,{methods:{searchForFacetValues:We}}).searchForFacetValues(s,a,n(n({},i),u))})))}},ae=function(e){return function(t,n){var r=g(n);return r.queryParameters["X-Algolia-User-ID"]=t,e.transporter.write({method:_,path:"1/clusters/mapping"},r)}},ue=function(e){return function(t,n){return h(e.transporter.write({method:E,path:p("1/keys/%s/restore",t)},n),(function(n,r){return l((function(n){return W(e)(t,r).catch((function(e){if(404!==e.status)throw e;return n()}))}))}))}},ce=function(e){return function(t,n){return e.transporter.read({method:E,path:"1/clusters/mapping/search",data:{query:t}},n)}},le=function(e){return function(t,n){var i=Object.assign({},n),o=n||{},s=o.queryParameters,a=r(o,["queryParameters"]),u=s?{queryParameters:s}:{},c=["acl","indexes","referers","restrictSources","queryParameters","description","maxQueriesPerIPPerHour","maxHitsPerQuery"];return h(e.transporter.write({method:"PUT",path:p("1/keys/%s",t),data:u},a),(function(n,r){return l((function(n){return W(e)(t,r).then((function(e){return function(e){return Object.keys(i).filter((function(e){return-1!==c.indexOf(e)})).every((function(t){return e[t]===i[t]}))}(e)?Promise.resolve():n()}))}))}))}},he=function(e){return function(t,n){return h(e.transporter.write({method:E,path:p("1/indexes/%s/batch",e.indexName),data:{requests:t}},n),(function(t,n){return Je(e)(t.taskID,n)}))}},de=function(e){return function(t){return U(n(n({shouldStop:function(e){return void 0===e.cursor}},t),{},{request:function(n){return e.transporter.read({method:E,path:p("1/indexes/%s/browse",e.indexName),data:n},t)}}))}},fe=function(e){return function(t){var r=n({hitsPerPage:1e3},t);return U(n(n({shouldStop:function(e){return e.hits.length<r.hitsPerPage}},r),{},{request:function(t){return Ke(e)("",n(n({},r),t)).then((function(e){return n(n({},e),{},{hits:e.hits.map((function(e){return delete e._highlightResult,e}))})}))}}))}},pe=function(e){return function(t){var r=n({hitsPerPage:1e3},t);return U(n(n({shouldStop:function(e){return e.hits.length<r.hitsPerPage}},r),{},{request:function(t){return Ye(e)("",n(n({},r),t)).then((function(e){return n(n({},e),{},{hits:e.hits.map((function(e){return delete e._highlightResult,e}))})}))}}))}},me=function(e){return function(t,n,i){var o=i||{},s=o.batchSize,a=r(o,["batchSize"]),u={taskIDs:[],objectIDs:[]};return h(function r(){var i,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,c=[];for(i=o;i<t.length&&(c.push(t[i]),c.length!==(s||1e3));i++);return 0===c.length?Promise.resolve(u):he(e)(c.map((function(e){return{action:n,body:e}})),a).then((function(e){return u.objectIDs=u.objectIDs.concat(e.objectIDs),u.taskIDs.push(e.taskID),i++,r(i)}))}(),(function(t,n){return Promise.all(t.taskIDs.map((function(t){return Je(e)(t,n)})))}))}},ge=function(e){return function(t){return h(e.transporter.write({method:E,path:p("1/indexes/%s/clear",e.indexName)},t),(function(t,n){return Je(e)(t.taskID,n)}))}},be=function(e){return function(t){var n=t||{},i=n.forwardToReplicas,o=g(r(n,["forwardToReplicas"]));return i&&(o.queryParameters.forwardToReplicas=1),h(e.transporter.write({method:E,path:p("1/indexes/%s/rules/clear",e.indexName)},o),(function(t,n){return Je(e)(t.taskID,n)}))}},ve=function(e){return function(t){var n=t||{},i=n.forwardToReplicas,o=g(r(n,["forwardToReplicas"]));return i&&(o.queryParameters.forwardToReplicas=1),h(e.transporter.write({method:E,path:p("1/indexes/%s/synonyms/clear",e.indexName)},o),(function(t,n){return Je(e)(t.taskID,n)}))}},ye=function(e){return function(t,n){return h(e.transporter.write({method:E,path:p("1/indexes/%s/deleteByQuery",e.indexName),data:t},n),(function(t,n){return Je(e)(t.taskID,n)}))}},_e=function(e){return function(t){return h(e.transporter.write({method:_,path:p("1/indexes/%s",e.indexName)},t),(function(t,n){return Je(e)(t.taskID,n)}))}},we=function(e){return function(t,n){return h(Ee(e)([t],n).then((function(e){return{taskID:e.taskIDs[0]}})),(function(t,n){return Je(e)(t.taskID,n)}))}},Ee=function(e){return function(t,n){var r=t.map((function(e){return{objectID:e}}));return me(e)(r,Ze.DeleteObject,n)}},Se=function(e){return function(t,n){var i=n||{},o=i.forwardToReplicas,s=g(r(i,["forwardToReplicas"]));return o&&(s.queryParameters.forwardToReplicas=1),h(e.transporter.write({method:_,path:p("1/indexes/%s/rules/%s",e.indexName,t)},s),(function(t,n){return Je(e)(t.taskID,n)}))}},Me=function(e){return function(t,n){var i=n||{},o=i.forwardToReplicas,s=g(r(i,["forwardToReplicas"]));return o&&(s.queryParameters.forwardToReplicas=1),h(e.transporter.write({method:_,path:p("1/indexes/%s/synonyms/%s",e.indexName,t)},s),(function(t,n){return Je(e)(t.taskID,n)}))}},Oe=function(e){return function(t){return Ie(e)(t).then((function(){return!0})).catch((function(e){if(404!==e.status)throw e;return!1}))}},Ae=function(e){return function(t,n,r){return e.transporter.read({method:E,path:p("1/answers/%s/prediction",e.indexName),data:{query:t,queryLanguages:n},cacheable:!0},r)}},Ce=function(e){return function(t,o){var s=o||{},a=s.query,u=s.paginate,c=r(s,["query","paginate"]),l=0;return function r(){return ze(e)(a||"",n(n({},c),{},{page:l})).then((function(e){for(var n=0,o=Object.entries(e.hits);n<o.length;n++){var s=i(o[n],2),a=s[0],c=s[1];if(t(c))return{object:c,position:parseInt(a,10),page:l}}if(l++,!1===u||l>=e.nbPages)throw{name:"ObjectNotFoundError",message:"Object not found."};return r()}))}()}},Te=function(e){return function(t,n){return e.transporter.read({method:w,path:p("1/indexes/%s/%s",e.indexName,t)},n)}},ke=function(){return function(e,t){for(var n=0,r=Object.entries(e.hits);n<r.length;n++){var o=i(r[n],2),s=o[0];if(o[1].objectID===t)return parseInt(s,10)}return-1}},xe=function(e){return function(t,i){var o=i||{},s=o.attributesToRetrieve,a=r(o,["attributesToRetrieve"]),u=t.map((function(t){return n({indexName:e.indexName,objectID:t},s?{attributesToRetrieve:s}:{})}));return e.transporter.read({method:E,path:"1/indexes/*/objects",data:{requests:u}},a)}},je=function(e){return function(t,n){return e.transporter.read({method:w,path:p("1/indexes/%s/rules/%s",e.indexName,t)},n)}},Ie=function(e){return function(t){return e.transporter.read({method:w,path:p("1/indexes/%s/settings",e.indexName),data:{getVersion:2}},t)}},Re=function(e){return function(t,n){return e.transporter.read({method:w,path:p("1/indexes/%s/synonyms/%s",e.indexName,t)},n)}},Ne=function(e){return function(t,n){return h(Pe(e)([t],n).then((function(e){return{objectID:e.objectIDs[0],taskID:e.taskIDs[0]}})),(function(t,n){return Je(e)(t.taskID,n)}))}},Pe=function(e){return function(t,n){var i=n||{},o=i.createIfNotExists,s=r(i,["createIfNotExists"]),a=o?Ze.PartialUpdateObject:Ze.PartialUpdateObjectNoCreate;return me(e)(t,a,s)}},De=function(e){return function(t,s){var a=s||{},u=a.safe,c=a.autoGenerateObjectIDIfNotExist,l=a.batchSize,d=r(a,["safe","autoGenerateObjectIDIfNotExist","batchSize"]),f=function(t,n,r,i){return h(e.transporter.write({method:E,path:p("1/indexes/%s/operation",t),data:{operation:r,destination:n}},i),(function(t,n){return Je(e)(t.taskID,n)}))},m=Math.random().toString(36).substring(7),g="".concat(e.indexName,"_tmp_").concat(m),b=Be({appId:e.appId,transporter:e.transporter,indexName:g}),v=[],y=f(e.indexName,g,"copy",n(n({},d),{},{scope:["settings","synonyms","rules"]}));return v.push(y),h((u?y.wait(d):y).then((function(){var e=b(t,n(n({},d),{},{autoGenerateObjectIDIfNotExist:c,batchSize:l}));return v.push(e),u?e.wait(d):e})).then((function(){var t=f(g,e.indexName,"move",d);return v.push(t),u?t.wait(d):t})).then((function(){return Promise.all(v)})).then((function(e){var t=i(e,3),n=t[0],r=t[1],s=t[2];return{objectIDs:r.objectIDs,taskIDs:[n.taskID].concat(o(r.taskIDs),[s.taskID])}})),(function(e,t){return Promise.all(v.map((function(e){return e.wait(t)})))}))}},Ue=function(e){return function(t,r){return qe(e)(t,n(n({},r),{},{clearExistingRules:!0}))}},Le=function(e){return function(t,r){return Ge(e)(t,n(n({},r),{},{clearExistingSynonyms:!0}))}},Fe=function(e){return function(t,n){return h(Be(e)([t],n).then((function(e){return{objectID:e.objectIDs[0],taskID:e.taskIDs[0]}})),(function(t,n){return Je(e)(t.taskID,n)}))}},Be=function(e){return function(t,n){var i=n||{},o=i.autoGenerateObjectIDIfNotExist,s=r(i,["autoGenerateObjectIDIfNotExist"]),a=o?Ze.AddObject:Ze.UpdateObject;if(a===Ze.UpdateObject){var u=!0,c=!1,l=void 0;try{for(var d,f=t[Symbol.iterator]();!(u=(d=f.next()).done);u=!0)if(void 0===d.value.objectID)return h(Promise.reject({name:"MissingObjectIDError",message:"All objects must have an unique objectID (like a primary key) to be valid. Algolia is also able to generate objectIDs automatically but *it's not recommended*. To do it, use the `{'autoGenerateObjectIDIfNotExist': true}` option."}))}catch(e){c=!0,l=e}finally{try{u||null==f.return||f.return()}finally{if(c)throw l}}}return me(e)(t,a,s)}},He=function(e){return function(t,n){return qe(e)([t],n)}},qe=function(e){return function(t,n){var i=n||{},o=i.forwardToReplicas,s=i.clearExistingRules,a=g(r(i,["forwardToReplicas","clearExistingRules"]));return o&&(a.queryParameters.forwardToReplicas=1),s&&(a.queryParameters.clearExistingRules=1),h(e.transporter.write({method:E,path:p("1/indexes/%s/rules/batch",e.indexName),data:t},a),(function(t,n){return Je(e)(t.taskID,n)}))}},Ve=function(e){return function(t,n){return Ge(e)([t],n)}},Ge=function(e){return function(t,n){var i=n||{},o=i.forwardToReplicas,s=i.clearExistingSynonyms,a=i.replaceExistingSynonyms,u=g(r(i,["forwardToReplicas","clearExistingSynonyms","replaceExistingSynonyms"]));return o&&(u.queryParameters.forwardToReplicas=1),(a||s)&&(u.queryParameters.replaceExistingSynonyms=1),h(e.transporter.write({method:E,path:p("1/indexes/%s/synonyms/batch",e.indexName),data:t},u),(function(t,n){return Je(e)(t.taskID,n)}))}},ze=function(e){return function(t,n){return e.transporter.read({method:E,path:p("1/indexes/%s/query",e.indexName),data:{query:t},cacheable:!0},n)}},We=function(e){return function(t,n,r){return e.transporter.read({method:E,path:p("1/indexes/%s/facets/%s/query",e.indexName,t),data:{facetQuery:n},cacheable:!0},r)}},Ke=function(e){return function(t,n){return e.transporter.read({method:E,path:p("1/indexes/%s/rules/search",e.indexName),data:{query:t}},n)}},Ye=function(e){return function(t,n){return e.transporter.read({method:E,path:p("1/indexes/%s/synonyms/search",e.indexName),data:{query:t}},n)}},Qe=function(e){return function(t,n){var i=n||{},o=i.forwardToReplicas,s=g(r(i,["forwardToReplicas"]));return o&&(s.queryParameters.forwardToReplicas=1),h(e.transporter.write({method:"PUT",path:p("1/indexes/%s/settings",e.indexName),data:t},s),(function(t,n){return Je(e)(t.taskID,n)}))}},Je=function(e){return function(t,n){return l((function(r){return function(e){return function(t,n){return e.transporter.read({method:w,path:p("1/indexes/%s/task/%s",e.indexName,t.toString())},n)}}(e)(t,n).then((function(e){return"published"!==e.status?r():void 0}))}))}},Ze={AddObject:"addObject",UpdateObject:"updateObject",PartialUpdateObject:"partialUpdateObject",PartialUpdateObjectNoCreate:"partialUpdateObjectNoCreate",DeleteObject:"deleteObject",DeleteIndex:"delete",ClearIndex:"clear"},$e={Settings:"settings",Synonyms:"synonyms",Rules:"rules"};function Xe(e,t,r){var i={appId:e,apiKey:t,timeouts:{connect:1,read:2,write:30},requester:{send:function(e){return new Promise((function(t){var n=new XMLHttpRequest;n.open(e.method,e.url,!0),Object.keys(e.headers).forEach((function(t){return n.setRequestHeader(t,e.headers[t])}));var r,i=function(e,r){return setTimeout((function(){n.abort(),t({status:0,content:r,isTimedOut:!0})}),1e3*e)},o=i(e.connectTimeout,"Connection timeout");n.onreadystatechange=function(){n.readyState>n.OPENED&&void 0===r&&(clearTimeout(o),r=i(e.responseTimeout,"Socket timeout"))},n.onerror=function(){0===n.status&&(clearTimeout(o),clearTimeout(r),t({content:n.responseText||"Network request failed",status:n.status,isTimedOut:!1}))},n.onload=function(){clearTimeout(o),clearTimeout(r),t({content:n.responseText,status:n.status,isTimedOut:!1})},n.send(e.data)}))}},logger:{debug:function(e,t){return Promise.resolve()},info:function(e,t){return Promise.resolve()},error:function(e,t){return console.error(e,t),Promise.resolve()}},responsesCache:u(),requestsCache:u({serializable:!1}),hostsCache:a({caches:[s({key:"".concat("4.8.5","-").concat(e)}),u()]}),userAgent:O("4.8.5").add({segment:"Browser"})};return function(e){var t=e.appId,r=c(void 0!==e.authMode?e.authMode:m.WithinHeaders,t,e.apiKey),i=M(n(n({hosts:[{url:"".concat(t,"-dsn.algolia.net"),accept:b.Read},{url:"".concat(t,".algolia.net"),accept:b.Write}].concat(d([{url:"".concat(t,"-1.algolianet.com")},{url:"".concat(t,"-2.algolianet.com")},{url:"".concat(t,"-3.algolianet.com")}]))},e),{},{headers:n(n(n({},r.headers()),{"content-type":"application/x-www-form-urlencoded"}),e.headers),queryParameters:n(n({},r.queryParameters()),e.queryParameters)}));return f({transporter:i,appId:t,addAlgoliaAgent:function(e,t){i.userAgent.add({segment:e,version:t})},clearCache:function(){return Promise.all([i.requestsCache.clear(),i.responsesCache.clear()]).then((function(){}))}},e.methods)}(n(n(n({},i),r),{},{methods:{search:oe,searchForFacetValues:se,multipleBatch:re,multipleGetObjects:ie,multipleQueries:oe,copyIndex:H,copySettings:V,copySynonyms:G,copyRules:q,moveIndex:ne,listIndices:ee,getLogs:K,listClusters:X,multipleSearchForFacetValues:se,getApiKey:W,addApiKey:L,listApiKeys:$,updateApiKey:le,deleteApiKey:z,restoreApiKey:ue,assignUserID:F,assignUserIDs:B,getUserID:Q,searchUserIDs:ce,listUserIDs:te,getTopUserIDs:Y,removeUserID:ae,hasPendingMappings:J,initIndex:function(e){return function(t){return Z(e)(t,{methods:{batch:he,delete:_e,findAnswers:Ae,getObject:Te,getObjects:xe,saveObject:Fe,saveObjects:Be,search:ze,searchForFacetValues:We,waitTask:Je,setSettings:Qe,getSettings:Ie,partialUpdateObject:Ne,partialUpdateObjects:Pe,deleteObject:we,deleteObjects:Ee,deleteBy:ye,clearObjects:ge,browseObjects:de,getObjectPosition:ke,findObject:Ce,exists:Oe,saveSynonym:Ve,saveSynonyms:Ge,getSynonym:Re,searchSynonyms:Ye,browseSynonyms:pe,deleteSynonym:Me,clearSynonyms:ve,replaceAllObjects:De,replaceAllSynonyms:Le,searchRules:Ke,getRule:je,deleteRule:Se,saveRule:He,saveRules:qe,replaceAllRules:Ue,browseRules:fe,clearRules:be}})}},initAnalytics:function(){return function(e){return function(e){var t=e.region||"us",r=c(m.WithinHeaders,e.appId,e.apiKey),i=M(n(n({hosts:[{url:"analytics.".concat(t,".algolia.com")}]},e),{},{headers:n(n(n({},r.headers()),{"content-type":"application/json"}),e.headers),queryParameters:n(n({},r.queryParameters()),e.queryParameters)}));return f({appId:e.appId,transporter:i},e.methods)}(n(n(n({},i),e),{},{methods:{addABTest:x,getABTest:I,getABTests:R,stopABTest:N,deleteABTest:j}}))}},initRecommendation:function(){return function(e){return function(e){var t=e.region||"us",r=c(m.WithinHeaders,e.appId,e.apiKey),i=M(n(n({hosts:[{url:"recommendation.".concat(t,".algolia.com")}]},e),{},{headers:n(n(n({},r.headers()),{"content-type":"application/json"}),e.headers),queryParameters:n(n({},r.queryParameters()),e.queryParameters)}));return f({appId:e.appId,transporter:i},e.methods)}(n(n(n({},i),e),{},{methods:{getPersonalizationStrategy:P,setPersonalizationStrategy:D}}))}}}}))}return Xe.version="4.8.5",Xe}()},function(e,t,n){"use strict";(function(e){var r={fetch:e.window&&e.window.document?(window.fetch=n(185),window.fetch):function(){return Promise.resolve()}};t.a=r}).call(this,n(19))},function(e){e.exports=JSON.parse('{"locale":"en-GB","errorMessages":{"algolia_generic_error":"Sorry, something went wrong. Please try again.","chat_generic_error":"Sorry, something went wrong","chat_generic_error_retry_message":"Please try again. If the issue persists, please contact customer service. (1002)","login_error":"Login to continue","login_error_message":"Sorry! Your session has expired. Please login again to continue.","inactive_session_expired_error":"Sorry, your session has expired due to inactivity.","inactive_session_expired_error_message":"Please login again to continue sending and receiving messages.","user_not_activated_error":"This participant is not currently available to chat."},"infoMessages":{"noChatHistory_msg1":"This panel will display the connections with whom you network using chat.\\n\\nYou can start networking with participants by sending a message from the participants profile. Get started now with the participants directory.","startConversation":"This is the start of your conversation","typeMessage":"Type your message here"},"ui":{"at":"at","chat":"Messages","connections":"connections","loading":"Loading..."}}')},function(e){e.exports=JSON.parse('{"locale":"pt-BR","errorMessages":{"algolia_generic_error":"Sorry, something went wrong. Please try again.","chat_generic_error":"Desculpe, algo deu errado.","chat_generic_error_retry_message":"Tente novamente. Se o problema persistir, por favor contate o serviço de atendimento. (1002)","login_error":"Login to continue","login_error_message":"Sorry! Your session has expired. Please login again to continue.","user_not_activated_error":"This participant is not currently available to chat."},"infoMessages":{"noChatHistory_msg1":"This panel will display the connections with whom you network using chat.\\n\\nYou can start networking with participants by sending a message from the participants profile. Get started now with the participants directory.","startConversation":"Este é o início da sua conversa","typeMessage":"Digite a sua mensagem aqui"},"ui":{"at":"at","chat":"Mensagens","connections":"connections","loading":"Carregando..."}}')},function(e){e.exports=JSON.parse('{"locale":"es-MX","errorMessages":{"algolia_generic_error":"Sorry, something went wrong. Please try again.","chat_generic_error":"Lo sentimos, algo salió mal","chat_generic_error_retry_message":"Inténtalo de nuevo, si el problema persiste, comunícate con el servicio de atención a clientes. (1002)","login_error":"Login to continue","login_error_message":"Sorry! Your session has expired. Please login again to continue.","inactive_session_expired_error":"Sorry, your session has expired due to inactivity.","inactive_session_expired_error_message":"Please login again to continue sending and receiving messages.","user_not_activated_error":"This participant is not currently available to chat."},"infoMessages":{"noChatHistory_msg1":"Este panel mostrará las conexiones que hagas a través del chat.\\n\\nPara establecer contacto con los participantes solo envía un mensaje en el perfil de cada uno. ¡Comienza ahora con el directorio de participantes!","startConversation":"Este es el inicio de tu conversación","typeMessage":"Escribe tu mensaje aquí"},"ui":{"at":"at","chat":"Mensajes","connections":"connections","loading":"Cargando..."}}')},function(e,t,n){"use strict";var r,i=n(11),o=n(15),s=n(3),a={fromSendBird:function(e){return{id:e.messageId,userId:e.sender.userId,message:e.message,timestamp:e.createdAt}}},u=n(12),c=n(13),l={},h=!1,d={initialize:function(e){l=e.createPreviousMessageListQuery(),h=!1},load:(r=Object(o.a)(Object(i.a)().mark((function e(){var t,n,r;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=!1,r=[],h){e.next=8;break}return l.limit=30,l.reverse=!1,e.next=7,l.load().then((function(e){if(h=e&&0===e.length,e&&e.length)return r=e.map((function(e){return a.fromSendBird(e)})),void(n=!0);n=!1})).catch((function(e){if(e)return c.a.logError("fail to load the messages :",e),void(t=u.a.GENERIC_ERROR)}));case 7:return e.abrupt("return",{errorCode:t,hasMore:n,chatMessages:r});case 8:case"end":return e.stop()}}),e)}))),function(){return r.apply(this,arguments)})},f=n(26),p=n(69),m={registerChannelHandler:function(e,t,n){var r=f.a.getInstance(),i=new p.a({onMessageReceived:n});r.groupChannel.addGroupChannelHandler(e,i)},unRegisterChannelHandler:function(e){f.a.getInstance().groupChannel.removeGroupChannelHandler(e)}},g=n(42),b=n(4),v=n(9),y=n(166),_=n.n(y),w=function(e,t){return _()(e,t)},E={fromAlgolia:function(e){return{userId:e[0].userId,name:"".concat(e[0].firstName," ").concat(e[0].middleName?e[0].middleName+" ":"").concat(e[0].lastName),designation:e[0].jobTitle,participationId:e[0].id,organisation:e[0].exhibitingOrganisation.displayName,photoKey:e[0].photoKey,participantId:e[0].participantId}},setDefaultPhotoUrl:function(e,t){return e.profileUrl=t,e}},S=n(41),M=n(18),O=n(10),A=n(28),C=function(e,t,n){return S.a.graphqlRequest(e,t).then(M.a.fromSuccess).then((function(e){return e.body.signedAssets.items})).catch((function(e){return M.a.fromGraphQlError(n,e.errors)}))},T=function(e,t,n){var r="";t.forEach((function(e){e&&""!==e&&(r+='"'.concat(e.replace("/photo/","/photo/".concat(O.d.desktop,"/")),'",\n      "').concat(e.replace("/photo/","/photo/".concat(O.d.mobile,"/")),'",'))}));var i="{\n    signedAssets(keys: [".concat(r,"])\n    {\n      items { url, key }\n    }\n  }");return C(e,i,n)},k={getSignedAsset:function(e,t,n){var r=t.replace("/photo/","/photo/".concat(O.d.desktop,"/")),i=t.replace("/photo/","/photo/".concat(O.d.mobile,"/")),o='{\n    signedAssets(keys: ["'.concat(r,'", "').concat(i,'"])\n    {\n      items { url, key }\n    }\n  }');return C(e,o,n)},getParticipantsWithPhotoUrls:function(){var e=Object(o.a)(Object(i.a)().mark((function e(t,n,r,o){var s;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=[],t.forEach((function(e){e.desktopUrl="",e.mobileUrl="",e.photoKey&&s.push(e.photoKey)})),!Array.isArray(s)||!s.length){e.next=4;break}return e.abrupt("return",T(n,s,r).then((function(e){return e.forEach((function(e){t.forEach((function(t){0!==e.url.length&&(e.key.includes("".concat(t.participantId,"/photo/").concat(O.d.desktop))&&(t.desktopUrl=A.a.addDomainPrefix(e.url,o)),e.key.includes("".concat(t.participantId,"/photo/").concat(O.d.mobile))&&(t.mobileUrl=A.a.addDomainPrefix(e.url,o)))}))})),t})).catch((function(e){console.log("Error while fetching signed assets",e)})));case 4:return e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},x=n(68),j=n(20),I=function(){var e=Object(o.a)(Object(i.a)().mark((function e(t){var n,r,o,s,a,l,h;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=v.a.get(),r="".concat(n.eventEditionId,"_").concat(n.interfaceLocale.toLowerCase(),"_searchableByUserId"),o=j.a.getCookie(O.c.ALGOLIA_TOKEN),s=o,void 0!==o){e.next=6;break}return e.abrupt("return",{error:u.a.ALGOLIA_TOKEN_COOKIE_NOT_FOUND});case 6:return a=w(n.protectedAppId,s),l=[],t.forEach((function(e){var t={indexName:r,query:e,params:{page:0,restrictSearchableAttributes:["userId"],facetFilters:[]}};l.push(t)})),e.prev=9,e.next=12,a.multipleQueries(l);case 12:return h=e.sent,e.abrupt("return",R(h.results,n));case 16:if(e.prev=16,e.t0=e.catch(9),c.a.logError("failed to fetch participant details","".concat(e.t0.status," ").concat(e.t0.message)),!(403===e.t0.status||401===e.t0.status||400===e.t0.status&&e.t0.message&&e.t0.message.includes("validUntil"))){e.next=23;break}return e.abrupt("return",{error:u.a.SESSION_ERROR});case 23:return e.abrupt("return",{error:u.a.GENERIC_ERROR});case 24:case"end":return e.stop()}}),e,null,[[9,16]])})));return function(t){return e.apply(this,arguments)}}(),R=function(e,t){var n={};e.forEach((function(e){var r=e.hits;if(r.length){var i=E.fromAlgolia(r);i=E.setDefaultPhotoUrl(i,t.assets.defaultParticipantPhotoMobileUrl),n[i.userId]=Object(b.a)({},i)}}));var r=Object.keys(n);return r.length&&x.a.getConnectionStatus(r),n},N={searchMultipleParticipants:I,loadProfileImage:function(){var e=Object(o.a)(Object(i.a)().mark((function e(t){var n,r,o,s,a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=v.a.get(),r=n.interfaceLocale,o=n.baseApiUrl,s=n.baseUrlPrivateAssets,e.next=7,k.getParticipantsWithPhotoUrls(Object.values(t),o,r,s);case 7:return a=e.sent,e.abrupt("return",a);case 11:e.prev=11,e.t0=e.catch(0),c.a.logError("failed to loadProfileImage",e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()};t.a=[function(e){return function(t){return function(){var n=Object(o.a)(Object(i.a)().mark((function n(r){var o,u,c,l,h,f,p,b,v,y,_;return Object(i.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t(r),o=e.dispatch,n.t0=r.type,n.next=n.t0===s.a.MW_LOAD_INITIAL_MESSAGES?5:n.t0===s.a.MW_UNREGISTER_CHANNEL_HANDLER?26:n.t0===s.a.MW_LOAD_MORE_MESSAGES?29:n.t0===s.a.MW_FETCH_USER_DATA?38:n.t0===s.a.MW_MARK_AS_READ?55:57;break;case 5:return n.next=7,g.a.openChannel(r.payload.loginUserId,r.payload.chatUserId);case 7:if(!(u=n.sent).errorCode){n.next=11;break}return o(s.b.setChatError(u.errorCode)),n.abrupt("return");case 11:if(!(c=u.channel)){n.next=25;break}return d.initialize(c),n.next=16,d.load();case 16:if(l=n.sent,o(s.b.hasMoreMessages(l.hasMore)),!l.errorCode){n.next=21;break}return o(s.b.setChatError(l.errorCode)),n.abrupt("return");case 21:l.chatMessages&&o(s.b.loadInitialMessages(l.chatMessages)),c.unreadMessageCount>0&&o(s.b.setActiveWindowUnreadMesageCount(c.unreadMessageCount)),h=function(e,t){var n=a.fromSendBird(t);n.userId===r.payload.chatUserId&&(o(s.b.setNewMessage(n)),c.unreadMessageCount>0&&o(s.b.setActiveWindowUnreadMesageCount(e.unreadMessageCount))),r.payload.scrollToBottomCallback()},m.registerChannelHandler(r.payload.chatUserId,r.payload.chatUserId,h);case 25:return n.abrupt("break",58);case 26:return m.unRegisterChannelHandler(r.payload),g.a.clearChannel(),n.abrupt("break",58);case 29:return n.next=31,d.load();case 31:if(f=n.sent,o(s.b.hasMoreMessages(f.hasMore)),!f.errorCode){n.next=36;break}return o(s.b.setChatError(f.errorCode)),n.abrupt("return");case 36:return f.chatMessages&&o(s.b.loadPreviousMessages(f.chatMessages)),n.abrupt("break",58);case 38:if(p=r.payload.chatUserIds,b=Object.keys(r.payload.users),0!==(v=p.filter((function(e){return!b.includes(e)}))).length){n.next=43;break}return n.abrupt("return");case 43:return n.next=45,N.searchMultipleParticipants(v);case 45:if(null==(y=n.sent)||!y.error){n.next=49;break}return o(s.b.setChatError(y.error)),n.abrupt("return");case 49:return o(s.b.addUsers(y)),n.next=52,N.loadProfileImage(y);case 52:return null==(_=n.sent)||_.forEach((function(e){e.mobileUrl&&o(s.b.setUserProfileImage({userId:e.userId,profileUrl:e.mobileUrl}))})),n.abrupt("break",58);case 55:return g.a.getChannel()&&g.a.getChannel().markAsRead(),n.abrupt("break",58);case 57:return n.abrupt("break",58);case 58:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}}]},,,function(e,t,n){"use strict";
/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=Symbol.for("react.element"),i=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),c=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.iterator;var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,b={};function v(e,t,n){this.props=e,this.context=t,this.refs=b,this.updater=n||m}function y(){}function _(e,t,n){this.props=e,this.context=t,this.refs=b,this.updater=n||m}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var w=_.prototype=new y;w.constructor=_,g(w,v.prototype),w.isPureReactComponent=!0;var E=Array.isArray,S=Object.prototype.hasOwnProperty,M={current:null},O={key:!0,ref:!0,__self:!0,__source:!0};function A(e,t,n){var i,o={},s=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(s=""+t.key),t)S.call(t,i)&&!O.hasOwnProperty(i)&&(o[i]=t[i]);var u=arguments.length-2;if(1===u)o.children=n;else if(1<u){for(var c=Array(u),l=0;l<u;l++)c[l]=arguments[l+2];o.children=c}if(e&&e.defaultProps)for(i in u=e.defaultProps)void 0===o[i]&&(o[i]=u[i]);return{$$typeof:r,type:e,key:s,ref:a,props:o,_owner:M.current}}function C(e){return"object"==typeof e&&null!==e&&e.$$typeof===r}var T=/\/+/g;function k(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function x(e,t,n,o,s){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var u=!1;if(null===e)u=!0;else switch(a){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case r:case i:u=!0}}if(u)return s=s(u=e),e=""===o?"."+k(u,0):o,E(s)?(n="",null!=e&&(n=e.replace(T,"$&/")+"/"),x(s,t,n,"",(function(e){return e}))):null!=s&&(C(s)&&(s=function(e,t){return{$$typeof:r,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(s,n+(!s.key||u&&u.key===s.key?"":(""+s.key).replace(T,"$&/")+"/")+e)),t.push(s)),1;if(u=0,o=""===o?".":o+":",E(e))for(var c=0;c<e.length;c++){var l=o+k(a=e[c],c);u+=x(a,t,n,l,s)}else if("function"==typeof(l=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e)))for(e=l.call(e),c=0;!(a=e.next()).done;)u+=x(a=a.value,t,n,l=o+k(a,c++),s);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return u}function j(e,t,n){if(null==e)return e;var r=[],i=0;return x(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function I(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},N={transition:null},P={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:N,ReactCurrentOwner:M};t.Children={map:j,forEach:function(e,t,n){j(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return j(e,(function(){t++})),t},toArray:function(e){return j(e,(function(e){return e}))||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=o,t.Profiler=a,t.PureComponent=_,t.StrictMode=s,t.Suspense=h,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P,t.cloneElement=function(e,t,n){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=g({},e.props),o=e.key,s=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,a=M.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(c in t)S.call(t,c)&&!O.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==u?u[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=n;else if(1<c){u=Array(c);for(var l=0;l<c;l++)u[l]=arguments[l+2];i.children=u}return{$$typeof:r,type:e.type,key:o,ref:s,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:c,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},t.createElement=A,t.createFactory=function(e){var t=A.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:f,_payload:{_status:-1,_result:e},_init:I}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=N.transition;N.transition={};try{e()}finally{N.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.2.0"},function(e,t,n){"use strict";
/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=n(2),i=n(176);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function u(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(a[e]=t,e=0;e<t.length;e++)s.add(t[e])}var l=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,i,o,s){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=s}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var b=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function y(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(f,e)&&(d.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(b,v);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(b,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(b,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var _=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),E=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),A=Symbol.for("react.provider"),C=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),x=Symbol.for("react.suspense_list"),j=Symbol.for("react.memo"),I=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var R=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var N=Symbol.iterator;function P(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=N&&e[N]||e["@@iterator"])?e:null}var D,U=Object.assign;function L(e){if(void 0===D)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);D=t&&t[1]||""}return"\n"+D+e}var F=!1;function B(e,t){if(!e||F)return"";F=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(e){var r=e}Reflect.construct(e,[],t)}else{try{t.call()}catch(e){r=e}e.call(t.prototype)}else{try{throw Error()}catch(e){r=e}e()}}catch(t){if(t&&r&&"string"==typeof t.stack){for(var i=t.stack.split("\n"),o=r.stack.split("\n"),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(1!==s||1!==a)do{if(s--,0>--a||i[s]!==o[a]){var u="\n"+i[s].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=s&&0<=a);break}}}finally{F=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?L(e):""}function H(e){switch(e.tag){case 5:return L(e.type);case 16:return L("Lazy");case 13:return L("Suspense");case 19:return L("SuspenseList");case 0:case 2:case 15:return e=B(e.type,!1);case 11:return e=B(e.type.render,!1);case 1:return e=B(e.type,!0);default:return""}}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return function e(t){if(null==t)return null;if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t;switch(t){case S:return"Fragment";case E:return"Portal";case O:return"Profiler";case M:return"StrictMode";case k:return"Suspense";case x:return"SuspenseList"}if("object"==typeof t)switch(t.$$typeof){case C:return(t.displayName||"Context")+".Consumer";case A:return(t._context.displayName||"Context")+".Provider";case T:var n=t.render;return(t=t.displayName)||(t=""!==(t=n.displayName||n.name||"")?"ForwardRef("+t+")":"ForwardRef"),t;case j:return null!==(n=t.displayName||null)?n:e(t.type)||"Memo";case I:n=t._payload,t=t._init;try{return e(t(n))}catch(e){}}return null}(t);case 8:return t===M?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t}return null}function V(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function z(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function W(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=G(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function K(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return U({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Q(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=V(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&y(e,"checked",t,!1)}function Z(e,t){J(e,t);var n=V(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?X(e,t.type,n):t.hasOwnProperty("defaultValue")&&X(e,t.type,V(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function $(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function X(e,t,n){"number"===t&&K(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var ee=Array.isArray;function te(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+V(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function ne(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return U({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function re(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(ee(n)){if(1<n.length)throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:V(n)}}function ie(e,t){var n=V(t.value),r=V(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ae(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ue,ce=function(e){return"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction((function(){return e(t,n)}))}:e}((function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ue=ue||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ue.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}}));function le(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var he={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},de=["Webkit","ms","Moz","O"];function fe(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||he.hasOwnProperty(e)&&he[e]?(""+t).trim():t+"px"}function pe(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=fe(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(he).forEach((function(e){de.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),he[t]=he[e]}))}));var me=U({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(me[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(o(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ve=null;function ye(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var _e=null,we=null,Ee=null;function Se(e){if(e=di(e)){if("function"!=typeof _e)throw Error(o(280));var t=e.stateNode;t&&(t=pi(t),_e(e.stateNode,e.type,t))}}function Me(e){we?Ee?Ee.push(e):Ee=[e]:we=e}function Oe(){if(we){var e=we,t=Ee;if(Ee=we=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function Ae(e,t){return e(t)}function Ce(){}var Te=!1;function ke(e,t,n){if(Te)return e(t,n);Te=!0;try{return Ae(e,t,n)}finally{Te=!1,(null!==we||null!==Ee)&&(Ce(),Oe())}}function xe(e,t){var n=e.stateNode;if(null===n)return null;var r=pi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(o(231,t,typeof n));return n}var je=!1;if(l)try{var Ie={};Object.defineProperty(Ie,"passive",{get:function(){je=!0}}),window.addEventListener("test",Ie,Ie),window.removeEventListener("test",Ie,Ie)}catch(e){je=!1}function Re(e,t,n,r,i,o,s,a,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(e){this.onError(e)}}var Ne=!1,Pe=null,De=!1,Ue=null,Le={onError:function(e){Ne=!0,Pe=e}};function Fe(e,t,n,r,i,o,s,a,u){Ne=!1,Pe=null,Re.apply(Le,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!=(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function He(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function qe(e){if(Be(e)!==e)throw Error(o(188))}function Ve(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(r=i.return)){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return qe(i),e;if(s===r)return qe(i),t;s=s.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,u=i.child;u;){if(u===n){a=!0,n=i,r=s;break}if(u===r){a=!0,r=i,n=s;break}u=u.sibling}if(!a){for(u=s.child;u;){if(u===n){a=!0,n=s,r=i;break}if(u===r){a=!0,r=s,n=i;break}u=u.sibling}if(!a)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e))?function e(t){if(5===t.tag||6===t.tag)return t;for(t=t.child;null!==t;){var n=e(t);if(null!==n)return n;t=t.sibling}return null}(e):null}var Ge=i.unstable_scheduleCallback,ze=i.unstable_cancelCallback,We=i.unstable_shouldYield,Ke=i.unstable_requestPaint,Ye=i.unstable_now,Qe=i.unstable_getCurrentPriorityLevel,Je=i.unstable_ImmediatePriority,Ze=i.unstable_UserBlockingPriority,$e=i.unstable_NormalPriority,Xe=i.unstable_LowPriority,et=i.unstable_IdlePriority,tt=null,nt=null;var rt=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(it(e)/ot|0)|0},it=Math.log,ot=Math.LN2;var st=64,at=4194304;function ut(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ct(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,s=268435455&n;if(0!==s){var a=s&~i;0!==a?r=ut(a):0!==(o&=s)&&(r=ut(o))}else 0!==(s=n&~i)?r=ut(s):0!==o&&(r=ut(o));if(0===r)return 0;if(0!==t&&t!==r&&0==(t&i)&&((i=r&-r)>=(o=t&-t)||16===i&&0!=(4194240&o)))return t;if(0!=(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-rt(t)),r|=e[n],t&=~i;return r}function lt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:default:return-1}}function ht(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function dt(){var e=st;return 0==(4194240&(st<<=1))&&(st=64),e}function ft(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function pt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-rt(t)]=n}function mt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-rt(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var gt=0;function bt(e){return 1<(e&=-e)?4<e?0!=(268435455&e)?16:536870912:4:1}var vt,yt,_t,wt,Et,St=!1,Mt=[],Ot=null,At=null,Ct=null,Tt=new Map,kt=new Map,xt=[],jt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function It(e,t){switch(e){case"focusin":case"focusout":Ot=null;break;case"dragenter":case"dragleave":At=null;break;case"mouseover":case"mouseout":Ct=null;break;case"pointerover":case"pointerout":Tt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":kt.delete(t.pointerId)}}function Rt(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},null!==t&&(null!==(t=di(t))&&yt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Nt(e){var t=hi(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=He(n)))return e.blockedOn=t,void Et(e.priority,(function(){_t(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Pt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Wt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=di(n))&&yt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);ve=r,n.target.dispatchEvent(r),ve=null,t.shift()}return!0}function Dt(e,t,n){Pt(e)&&n.delete(t)}function Ut(){St=!1,null!==Ot&&Pt(Ot)&&(Ot=null),null!==At&&Pt(At)&&(At=null),null!==Ct&&Pt(Ct)&&(Ct=null),Tt.forEach(Dt),kt.forEach(Dt)}function Lt(e,t){e.blockedOn===t&&(e.blockedOn=null,St||(St=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Ut)))}function Ft(e){function t(t){return Lt(t,e)}if(0<Mt.length){Lt(Mt[0],e);for(var n=1;n<Mt.length;n++){var r=Mt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ot&&Lt(Ot,e),null!==At&&Lt(At,e),null!==Ct&&Lt(Ct,e),Tt.forEach(t),kt.forEach(t),n=0;n<xt.length;n++)(r=xt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<xt.length&&null===(n=xt[0]).blockedOn;)Nt(n),null===n.blockedOn&&xt.shift()}var Bt=_.ReactCurrentBatchConfig,Ht=!0;function qt(e,t,n,r){var i=gt,o=Bt.transition;Bt.transition=null;try{gt=1,Gt(e,t,n,r)}finally{gt=i,Bt.transition=o}}function Vt(e,t,n,r){var i=gt,o=Bt.transition;Bt.transition=null;try{gt=4,Gt(e,t,n,r)}finally{gt=i,Bt.transition=o}}function Gt(e,t,n,r){if(Ht){var i=Wt(e,t,n,r);if(null===i)Ur(e,t,r,zt,n),It(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ot=Rt(Ot,e,t,n,r,i),!0;case"dragenter":return At=Rt(At,e,t,n,r,i),!0;case"mouseover":return Ct=Rt(Ct,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return Tt.set(o,Rt(Tt.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,kt.set(o,Rt(kt.get(o)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(It(e,r),4&t&&-1<jt.indexOf(e)){for(;null!==i;){var o=di(i);if(null!==o&&vt(o),null===(o=Wt(e,t,n,r))&&Ur(e,t,r,zt,n),o===i)break;i=o}null!==i&&r.stopPropagation()}else Ur(e,t,r,null,n)}}var zt=null;function Wt(e,t,n,r){if(zt=null,null!==(e=hi(e=ye(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=He(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return zt=e,null}function Kt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qe()){case Je:return 1;case Ze:return 4;case $e:case Xe:return 16;case et:return 536870912;default:return 16}default:return 16}}var Yt=null,Qt=null,Jt=null;function Zt(){if(Jt)return Jt;var e,t,n=Qt,r=n.length,i="value"in Yt?Yt.value:Yt.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var s=r-e;for(t=1;t<=s&&n[r-t]===i[o-t];t++);return Jt=i.slice(e,1<t?1-t:void 0)}function $t(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Xt(){return!0}function en(){return!1}function tn(e){function t(t,n,r,i,o){for(var s in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(i):i[s]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?Xt:en,this.isPropagationStopped=en,this}return U(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Xt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Xt)},persist:function(){},isPersistent:Xt}),t}var nn,rn,on,sn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},an=tn(sn),un=U({},sn,{view:0,detail:0}),cn=tn(un),ln=U({},un,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==on&&(on&&"mousemove"===e.type?(nn=e.screenX-on.screenX,rn=e.screenY-on.screenY):rn=nn=0,on=e),nn)},movementY:function(e){return"movementY"in e?e.movementY:rn}}),hn=tn(ln),dn=tn(U({},ln,{dataTransfer:0})),fn=tn(U({},un,{relatedTarget:0})),pn=tn(U({},sn,{animationName:0,elapsedTime:0,pseudoElement:0})),mn=tn(U({},sn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),gn=tn(U({},sn,{data:0})),bn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},yn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _n(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=yn[e])&&!!t[e]}function wn(){return _n}var En=tn(U({},un,{key:function(e){if(e.key){var t=bn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=$t(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?vn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wn,charCode:function(e){return"keypress"===e.type?$t(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?$t(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),Sn=tn(U({},ln,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Mn=tn(U({},un,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wn})),On=tn(U({},sn,{propertyName:0,elapsedTime:0,pseudoElement:0})),An=tn(U({},ln,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),Cn=[9,13,27,32],Tn=l&&"CompositionEvent"in window,kn=null;l&&"documentMode"in document&&(kn=document.documentMode);var xn=l&&"TextEvent"in window&&!kn,jn=l&&(!Tn||kn&&8<kn&&11>=kn),In=String.fromCharCode(32),Rn=!1;function Nn(e,t){switch(e){case"keyup":return-1!==Cn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Pn(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Dn=!1;var Un={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ln(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Un[e.type]:"textarea"===t}function Fn(e,t,n,r){Me(r),0<(t=Fr(t,"onChange")).length&&(n=new an("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Bn=null,Hn=null;function qn(e){jr(e,0)}function Vn(e){if(W(fi(e)))return e}function Gn(e,t){if("change"===e)return t}var zn=!1;if(l){var Wn;if(l){var Kn="oninput"in document;if(!Kn){var Yn=document.createElement("div");Yn.setAttribute("oninput","return;"),Kn="function"==typeof Yn.oninput}Wn=Kn}else Wn=!1;zn=Wn&&(!document.documentMode||9<document.documentMode)}function Qn(){Bn&&(Bn.detachEvent("onpropertychange",Jn),Hn=Bn=null)}function Jn(e){if("value"===e.propertyName&&Vn(Hn)){var t=[];Fn(t,Hn,e,ye(e)),ke(qn,t)}}function Zn(e,t,n){"focusin"===e?(Qn(),Hn=n,(Bn=t).attachEvent("onpropertychange",Jn)):"focusout"===e&&Qn()}function $n(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Vn(Hn)}function Xn(e,t){if("click"===e)return Vn(t)}function er(e,t){if("input"===e||"change"===e)return Vn(t)}var tr="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function nr(e,t){if(tr(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!tr(e[i],t[i]))return!1}return!0}function rr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ir(e,t){var n,r=rr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=rr(r)}}function or(){for(var e=window,t=K();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(!n)break;t=K((e=t.contentWindow).document)}return t}function sr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function ar(e){var t=or(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&function e(t,n){return!(!t||!n)&&(t===n||(!t||3!==t.nodeType)&&(n&&3===n.nodeType?e(t,n.parentNode):"contains"in t?t.contains(n):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(n))))}(n.ownerDocument.documentElement,n)){if(null!==r&&sr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=void 0===r.end?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=ir(n,o);var s=ir(n,r);i&&s&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"==typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var ur=l&&"documentMode"in document&&11>=document.documentMode,cr=null,lr=null,hr=null,dr=!1;function fr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;dr||null==cr||cr!==K(r)||("selectionStart"in(r=cr)&&sr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},hr&&nr(hr,r)||(hr=r,0<(r=Fr(lr,"onSelect")).length&&(t=new an("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=cr)))}function pr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var mr={animationend:pr("Animation","AnimationEnd"),animationiteration:pr("Animation","AnimationIteration"),animationstart:pr("Animation","AnimationStart"),transitionend:pr("Transition","TransitionEnd")},gr={},br={};function vr(e){if(gr[e])return gr[e];if(!mr[e])return e;var t,n=mr[e];for(t in n)if(n.hasOwnProperty(t)&&t in br)return gr[e]=n[t];return e}l&&(br=document.createElement("div").style,"AnimationEvent"in window||(delete mr.animationend.animation,delete mr.animationiteration.animation,delete mr.animationstart.animation),"TransitionEvent"in window||delete mr.transitionend.transition);var yr=vr("animationend"),_r=vr("animationiteration"),wr=vr("animationstart"),Er=vr("transitionend"),Sr=new Map,Mr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Or(e,t){Sr.set(e,t),u(t,[e])}for(var Ar=0;Ar<Mr.length;Ar++){var Cr=Mr[Ar];Or(Cr.toLowerCase(),"on"+(Cr[0].toUpperCase()+Cr.slice(1)))}Or(yr,"onAnimationEnd"),Or(_r,"onAnimationIteration"),Or(wr,"onAnimationStart"),Or("dblclick","onDoubleClick"),Or("focusin","onFocus"),Or("focusout","onBlur"),Or(Er,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Tr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),kr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Tr));function xr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,s,a,u,c){if(Fe.apply(this,arguments),Ne){if(!Ne)throw Error(o(198));var l=Pe;Ne=!1,Pe=null,De||(De=!0,Ue=l)}}(r,t,void 0,e),e.currentTarget=null}function jr(e,t){t=0!=(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var s=r.length-1;0<=s;s--){var a=r[s],u=a.instance,c=a.currentTarget;if(a=a.listener,u!==o&&i.isPropagationStopped())break e;xr(i,a,c),o=u}else for(s=0;s<r.length;s++){if(u=(a=r[s]).instance,c=a.currentTarget,a=a.listener,u!==o&&i.isPropagationStopped())break e;xr(i,a,c),o=u}}}if(De)throw e=Ue,De=!1,Ue=null,e}function Ir(e,t){var n=t[ui];void 0===n&&(n=t[ui]=new Set);var r=e+"__bubble";n.has(r)||(Dr(t,e,2,!1),n.add(r))}function Rr(e,t,n){var r=0;t&&(r|=4),Dr(n,e,r,t)}var Nr="_reactListening"+Math.random().toString(36).slice(2);function Pr(e){if(!e[Nr]){e[Nr]=!0,s.forEach((function(t){"selectionchange"!==t&&(kr.has(t)||Rr(t,!1,e),Rr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Nr]||(t[Nr]=!0,Rr("selectionchange",!1,t))}}function Dr(e,t,n,r){switch(Kt(t)){case 1:var i=qt;break;case 4:i=Vt;break;default:i=Gt}n=i.bind(null,t,n,e),i=void 0,!je||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Ur(e,t,n,r,i){var o=r;if(0==(1&t)&&0==(2&t)&&null!==r)e:for(;;){if(null===r)return;var s=r.tag;if(3===s||4===s){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===s)for(s=r.return;null!==s;){var u=s.tag;if((3===u||4===u)&&((u=s.stateNode.containerInfo)===i||8===u.nodeType&&u.parentNode===i))return;s=s.return}for(;null!==a;){if(null===(s=hi(a)))return;if(5===(u=s.tag)||6===u){r=o=s;continue e}a=a.parentNode}}r=r.return}ke((function(){var r=o,i=ye(n),s=[];e:{var a=Sr.get(e);if(void 0!==a){var u=an,c=e;switch(e){case"keypress":if(0===$t(n))break e;case"keydown":case"keyup":u=En;break;case"focusin":c="focus",u=fn;break;case"focusout":c="blur",u=fn;break;case"beforeblur":case"afterblur":u=fn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=hn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=dn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=Mn;break;case yr:case _r:case wr:u=pn;break;case Er:u=On;break;case"scroll":u=cn;break;case"wheel":u=An;break;case"copy":case"cut":case"paste":u=mn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=Sn}var l=0!=(4&t),h=!l&&"scroll"===e,d=l?null!==a?a+"Capture":null:a;l=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==d&&(null!=(m=xe(p,d))&&l.push(Lr(p,m,f)))),h)break;p=p.return}0<l.length&&(a=new u(a,c,null,n,i),s.push({event:a,listeners:l}))}}if(0==(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===ve||!(c=n.relatedTarget||n.fromElement)||!hi(c)&&!c[ai])&&(u||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,u?(u=r,null!==(c=(c=n.relatedTarget||n.toElement)?hi(c):null)&&(c!==(h=Be(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(u=null,c=r),u!==c)){if(l=hn,m="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Sn,m="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==u?a:fi(u),f=null==c?a:fi(c),(a=new l(m,p+"leave",u,n,i)).target=h,a.relatedTarget=f,m=null,hi(i)===r&&((l=new l(d,p+"enter",c,n,i)).target=f,l.relatedTarget=h,m=l),h=m,u&&c)e:{for(d=c,p=0,f=l=u;f;f=Br(f))p++;for(f=0,m=d;m;m=Br(m))f++;for(;0<p-f;)l=Br(l),p--;for(;0<f-p;)d=Br(d),f--;for(;p--;){if(l===d||null!==d&&l===d.alternate)break e;l=Br(l),d=Br(d)}l=null}else l=null;null!==u&&Hr(s,a,u,l,!1),null!==c&&null!==h&&Hr(s,h,c,l,!0)}if("select"===(u=(a=r?fi(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===u&&"file"===a.type)var g=Gn;else if(Ln(a))if(zn)g=er;else{g=$n;var b=Zn}else(u=a.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=Xn);switch(g&&(g=g(e,r))?Fn(s,g,n,i):(b&&b(e,a,r),"focusout"===e&&(b=a._wrapperState)&&b.controlled&&"number"===a.type&&X(a,"number",a.value)),b=r?fi(r):window,e){case"focusin":(Ln(b)||"true"===b.contentEditable)&&(cr=b,lr=r,hr=null);break;case"focusout":hr=lr=cr=null;break;case"mousedown":dr=!0;break;case"contextmenu":case"mouseup":case"dragend":dr=!1,fr(s,n,i);break;case"selectionchange":if(ur)break;case"keydown":case"keyup":fr(s,n,i)}var v;if(Tn)e:{switch(e){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Dn?Nn(e,n)&&(y="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(y="onCompositionStart");y&&(jn&&"ko"!==n.locale&&(Dn||"onCompositionStart"!==y?"onCompositionEnd"===y&&Dn&&(v=Zt()):(Qt="value"in(Yt=i)?Yt.value:Yt.textContent,Dn=!0)),0<(b=Fr(r,y)).length&&(y=new gn(y,e,null,n,i),s.push({event:y,listeners:b}),v?y.data=v:null!==(v=Pn(n))&&(y.data=v))),(v=xn?function(e,t){switch(e){case"compositionend":return Pn(t);case"keypress":return 32!==t.which?null:(Rn=!0,In);case"textInput":return(e=t.data)===In&&Rn?null:e;default:return null}}(e,n):function(e,t){if(Dn)return"compositionend"===e||!Tn&&Nn(e,t)?(e=Zt(),Jt=Qt=Yt=null,Dn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return jn&&"ko"!==t.locale?null:t.data;default:return null}}(e,n))&&(0<(r=Fr(r,"onBeforeInput")).length&&(i=new gn("onBeforeInput","beforeinput",null,n,i),s.push({event:i,listeners:r}),i.data=v))}jr(s,t)}))}function Lr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Fr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=xe(e,n))&&r.unshift(Lr(e,o,i)),null!=(o=xe(e,t))&&r.push(Lr(e,o,i))),e=e.return}return r}function Br(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Hr(e,t,n,r,i){for(var o=t._reactName,s=[];null!==n&&n!==r;){var a=n,u=a.alternate,c=a.stateNode;if(null!==u&&u===r)break;5===a.tag&&null!==c&&(a=c,i?null!=(u=xe(n,o))&&s.unshift(Lr(n,u,a)):i||null!=(u=xe(n,o))&&s.push(Lr(n,u,a))),n=n.return}0!==s.length&&e.push({event:t,listeners:s})}var qr=/\r\n?/g,Vr=/\u0000|\uFFFD/g;function Gr(e){return("string"==typeof e?e:""+e).replace(qr,"\n").replace(Vr,"")}function zr(e,t,n){if(t=Gr(t),Gr(e)!==t&&n)throw Error(o(425))}function Wr(){}var Kr=null,Yr=null;function Qr(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Jr="function"==typeof setTimeout?setTimeout:void 0,Zr="function"==typeof clearTimeout?clearTimeout:void 0,$r="function"==typeof Promise?Promise:void 0,Xr="function"==typeof queueMicrotask?queueMicrotask:void 0!==$r?function(e){return $r.resolve(null).then(e).catch(ei)}:Jr;function ei(e){setTimeout((function(){throw e}))}function ti(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Ft(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Ft(t)}function ni(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ri(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var ii=Math.random().toString(36).slice(2),oi="__reactFiber$"+ii,si="__reactProps$"+ii,ai="__reactContainer$"+ii,ui="__reactEvents$"+ii,ci="__reactListeners$"+ii,li="__reactHandles$"+ii;function hi(e){var t=e[oi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ai]||n[oi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ri(e);null!==e;){if(n=e[oi])return n;e=ri(e)}return t}n=(e=n).parentNode}return null}function di(e){return!(e=e[oi]||e[ai])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function fi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function pi(e){return e[si]||null}var mi=[],gi=-1;function bi(e){return{current:e}}function vi(e){0>gi||(e.current=mi[gi],mi[gi]=null,gi--)}function yi(e,t){gi++,mi[gi]=e.current,e.current=t}var _i={},wi=bi(_i),Ei=bi(!1),Si=_i;function Mi(e,t){var n=e.type.contextTypes;if(!n)return _i;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Oi(e){return null!=(e=e.childContextTypes)}function Ai(){vi(Ei),vi(wi)}function Ci(e,t,n){if(wi.current!==_i)throw Error(o(168));yi(wi,t),yi(Ei,n)}function Ti(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(o(108,q(e)||"Unknown",i));return U({},n,r)}function ki(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||_i,Si=wi.current,yi(wi,e),yi(Ei,Ei.current),!0}function xi(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=Ti(e,t,Si),r.__reactInternalMemoizedMergedChildContext=e,vi(Ei),vi(wi),yi(wi,e)):vi(Ei),yi(Ei,n)}var ji=null,Ii=!1,Ri=!1;function Ni(e){null===ji?ji=[e]:ji.push(e)}function Pi(){if(!Ri&&null!==ji){Ri=!0;var e=0,t=gt;try{var n=ji;for(gt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}ji=null,Ii=!1}catch(t){throw null!==ji&&(ji=ji.slice(e+1)),Ge(Je,Pi),t}finally{gt=t,Ri=!1}}return null}var Di=[],Ui=0,Li=null,Fi=0,Bi=[],Hi=0,qi=null,Vi=1,Gi="";function zi(e,t){Di[Ui++]=Fi,Di[Ui++]=Li,Li=e,Fi=t}function Wi(e,t,n){Bi[Hi++]=Vi,Bi[Hi++]=Gi,Bi[Hi++]=qi,qi=e;var r=Vi;e=Gi;var i=32-rt(r)-1;r&=~(1<<i),n+=1;var o=32-rt(t)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Vi=1<<32-rt(t)+i|n<<i|r,Gi=o+e}else Vi=1<<o|n<<i|r,Gi=e}function Ki(e){null!==e.return&&(zi(e,1),Wi(e,1,0))}function Yi(e){for(;e===Li;)Li=Di[--Ui],Di[Ui]=null,Fi=Di[--Ui],Di[Ui]=null;for(;e===qi;)qi=Bi[--Hi],Bi[Hi]=null,Gi=Bi[--Hi],Bi[Hi]=null,Vi=Bi[--Hi],Bi[Hi]=null}var Qi=null,Ji=null,Zi=!1,$i=null;function Xi(e,t){var n=wc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function eo(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,Qi=e,Ji=ni(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,Qi=e,Ji=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==qi?{id:Vi,overflow:Gi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=wc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,Qi=e,Ji=null,!0);default:return!1}}function to(e){return 0!=(1&e.mode)&&0==(128&e.flags)}function no(e){if(Zi){var t=Ji;if(t){var n=t;if(!eo(e,t)){if(to(e))throw Error(o(418));t=ni(n.nextSibling);var r=Qi;t&&eo(e,t)?Xi(r,n):(e.flags=-4097&e.flags|2,Zi=!1,Qi=e)}}else{if(to(e))throw Error(o(418));e.flags=-4097&e.flags|2,Zi=!1,Qi=e}}}function ro(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Qi=e}function io(e){if(e!==Qi)return!1;if(!Zi)return ro(e),Zi=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!Qr(e.type,e.memoizedProps)),t&&(t=Ji)){if(to(e))throw oo(),Error(o(418));for(;t;)Xi(e,t),t=ni(t.nextSibling)}if(ro(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Ji=ni(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Ji=null}}else Ji=Qi?ni(e.stateNode.nextSibling):null;return!0}function oo(){for(var e=Ji;e;)e=ni(e.nextSibling)}function so(){Ji=Qi=null,Zi=!1}function ao(e){null===$i?$i=[e]:$i.push(e)}var uo=_.ReactCurrentBatchConfig;function co(e,t){if(e&&e.defaultProps){for(var n in t=U({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var lo=bi(null),ho=null,fo=null,po=null;function mo(){po=fo=ho=null}function go(e){var t=lo.current;vi(lo),e._currentValue=t}function bo(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function vo(e,t){ho=e,po=fo=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!=(e.lanes&t)&&(fa=!0),e.firstContext=null)}function yo(e){var t=e._currentValue;if(po!==e)if(e={context:e,memoizedValue:t,next:null},null===fo){if(null===ho)throw Error(o(308));fo=e,ho.dependencies={lanes:0,firstContext:e}}else fo=fo.next=e;return t}var _o=null;function wo(e){null===_o?_o=[e]:_o.push(e)}function Eo(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,wo(t)):(n.next=i.next,i.next=n),t.interleaved=n,So(e,r)}function So(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Mo=!1;function Oo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ao(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Co(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function To(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!=(2&vu)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,So(e,n)}return null===(i=r.interleaved)?(t.next=t,wo(r)):(t.next=i.next,i.next=t),r.interleaved=t,So(e,n)}function ko(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!=(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,mt(e,n)}}function xo(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=s:o=o.next=s,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function jo(e,t,n,r){var i=e.updateQueue;Mo=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var u=a,c=u.next;u.next=null,null===s?o=c:s.next=c,s=u;var l=e.alternate;null!==l&&((a=(l=l.updateQueue).lastBaseUpdate)!==s&&(null===a?l.firstBaseUpdate=c:a.next=c,l.lastBaseUpdate=u))}if(null!==o){var h=i.baseState;for(s=0,l=c=u=null,a=o;;){var d=a.lane,f=a.eventTime;if((r&d)===d){null!==l&&(l=l.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(d=t,f=n,m.tag){case 1:if("function"==typeof(p=m.payload)){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null==(d="function"==typeof(p=m.payload)?p.call(f,h,d):p))break e;h=U({},h,d);break e;case 2:Mo=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===l?(c=l=f,u=h):l=l.next=f,s|=d;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(d=a).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===l&&(u=h),i.baseState=u,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{s|=i.lane,i=i.next}while(i!==t)}else null===o&&(i.shared.lanes=0);Au|=s,e.lanes=s,e.memoizedState=h}}function Io(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!=typeof i)throw Error(o(191,i));i.call(r)}}}var Ro=(new r.Component).refs;function No(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:U({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Po={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Gu(),i=zu(e),o=Co(r,i);o.payload=t,null!=n&&(o.callback=n),null!==(t=To(e,o,i))&&(Wu(t,e,i,r),ko(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Gu(),i=zu(e),o=Co(r,i);o.tag=1,o.payload=t,null!=n&&(o.callback=n),null!==(t=To(e,o,i))&&(Wu(t,e,i,r),ko(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Gu(),r=zu(e),i=Co(n,r);i.tag=2,null!=t&&(i.callback=t),null!==(t=To(e,i,r))&&(Wu(t,e,r,n),ko(t,e,r))}};function Do(e,t,n,r,i,o,s){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,s):!t.prototype||!t.prototype.isPureReactComponent||(!nr(n,r)||!nr(i,o))}function Uo(e,t,n){var r=!1,i=_i,o=t.contextType;return"object"==typeof o&&null!==o?o=yo(o):(i=Oi(t)?Si:wi.current,o=(r=null!=(r=t.contextTypes))?Mi(e,i):_i),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Po,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function Lo(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Po.enqueueReplaceState(t,t.state,null)}function Fo(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Ro,Oo(e);var o=t.contextType;"object"==typeof o&&null!==o?i.context=yo(o):(o=Oi(t)?Si:wi.current,i.context=Mi(e,o)),i.state=e.memoizedState,"function"==typeof(o=t.getDerivedStateFromProps)&&(No(e,t,o,n),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(t=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Po.enqueueReplaceState(i,i.state,null),jo(e,n,i,r),i.state=e.memoizedState),"function"==typeof i.componentDidMount&&(e.flags|=4194308)}function Bo(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=r,s=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===s?t.ref:((t=function(e){var t=i.refs;t===Ro&&(t=i.refs={}),null===e?delete t[s]:t[s]=e})._stringRef=s,t)}if("string"!=typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function Ho(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function qo(e){return(0,e._init)(e._payload)}function Vo(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Sc(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=Cc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var o=n.type;return o===S?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===o||"object"==typeof o&&null!==o&&o.$$typeof===I&&qo(o)===t.type)?((r=i(t,n.props)).ref=Bo(e,t,n),r.return=e,r):((r=Mc(n.type,n.key,n.props,null,e.mode,r)).ref=Bo(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Tc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,o){return null===t||7!==t.tag?((t=Oc(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t)return(t=Cc(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Mc(t.type,t.key,t.props,null,e.mode,n)).ref=Bo(e,null,t),n.return=e,n;case E:return(t=Tc(t,e.mode,n)).return=e,t;case I:return d(e,(0,t._init)(t._payload),n)}if(ee(t)||P(t))return(t=Oc(t,e.mode,n,null)).return=e,t;Ho(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n)return null!==i?null:u(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case E:return n.key===i?l(e,t,n,r):null;case I:return f(e,t,(i=n._init)(n._payload),r)}if(ee(n)||P(n))return null!==i?null:h(e,t,n,r,null);Ho(e,n)}return null}function p(e,t,n,r,i){if("string"==typeof r&&""!==r||"number"==typeof r)return u(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case E:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case I:return p(e,t,n,(0,r._init)(r._payload),i)}if(ee(r)||P(r))return h(t,e=e.get(n)||null,r,i,null);Ho(t,r)}return null}function m(i,o,a,u){for(var c=null,l=null,h=o,m=o=0,g=null;null!==h&&m<a.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var b=f(i,h,a[m],u);if(null===b){null===h&&(h=g);break}e&&h&&null===b.alternate&&t(i,h),o=s(b,o,m),null===l?c=b:l.sibling=b,l=b,h=g}if(m===a.length)return n(i,h),Zi&&zi(i,m),c;if(null===h){for(;m<a.length;m++)null!==(h=d(i,a[m],u))&&(o=s(h,o,m),null===l?c=h:l.sibling=h,l=h);return Zi&&zi(i,m),c}for(h=r(i,h);m<a.length;m++)null!==(g=p(h,i,m,a[m],u))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),o=s(g,o,m),null===l?c=g:l.sibling=g,l=g);return e&&h.forEach((function(e){return t(i,e)})),Zi&&zi(i,m),c}function g(i,a,u,c){var l=P(u);if("function"!=typeof l)throw Error(o(150));if(null==(u=l.call(u)))throw Error(o(151));for(var h=l=null,m=a,g=a=0,b=null,v=u.next();null!==m&&!v.done;g++,v=u.next()){m.index>g?(b=m,m=null):b=m.sibling;var y=f(i,m,v.value,c);if(null===y){null===m&&(m=b);break}e&&m&&null===y.alternate&&t(i,m),a=s(y,a,g),null===h?l=y:h.sibling=y,h=y,m=b}if(v.done)return n(i,m),Zi&&zi(i,g),l;if(null===m){for(;!v.done;g++,v=u.next())null!==(v=d(i,v.value,c))&&(a=s(v,a,g),null===h?l=v:h.sibling=v,h=v);return Zi&&zi(i,g),l}for(m=r(i,m);!v.done;g++,v=u.next())null!==(v=p(m,i,g,v.value,c))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),a=s(v,a,g),null===h?l=v:h.sibling=v,h=v);return e&&m.forEach((function(e){return t(i,e)})),Zi&&zi(i,g),l}return function e(r,o,s,u){if("object"==typeof s&&null!==s&&s.type===S&&null===s.key&&(s=s.props.children),"object"==typeof s&&null!==s){switch(s.$$typeof){case w:e:{for(var c=s.key,l=o;null!==l;){if(l.key===c){if((c=s.type)===S){if(7===l.tag){n(r,l.sibling),(o=i(l,s.props.children)).return=r,r=o;break e}}else if(l.elementType===c||"object"==typeof c&&null!==c&&c.$$typeof===I&&qo(c)===l.type){n(r,l.sibling),(o=i(l,s.props)).ref=Bo(r,l,s),o.return=r,r=o;break e}n(r,l);break}t(r,l),l=l.sibling}s.type===S?((o=Oc(s.props.children,r.mode,u,s.key)).return=r,r=o):((u=Mc(s.type,s.key,s.props,null,r.mode,u)).ref=Bo(r,o,s),u.return=r,r=u)}return a(r);case E:e:{for(l=s.key;null!==o;){if(o.key===l){if(4===o.tag&&o.stateNode.containerInfo===s.containerInfo&&o.stateNode.implementation===s.implementation){n(r,o.sibling),(o=i(o,s.children||[])).return=r,r=o;break e}n(r,o);break}t(r,o),o=o.sibling}(o=Tc(s,r.mode,u)).return=r,r=o}return a(r);case I:return e(r,o,(l=s._init)(s._payload),u)}if(ee(s))return m(r,o,s,u);if(P(s))return g(r,o,s,u);Ho(r,s)}return"string"==typeof s&&""!==s||"number"==typeof s?(s=""+s,null!==o&&6===o.tag?(n(r,o.sibling),(o=i(o,s)).return=r,r=o):(n(r,o),(o=Cc(s,r.mode,u)).return=r,r=o),a(r)):n(r,o)}}var Go=Vo(!0),zo=Vo(!1),Wo={},Ko=bi(Wo),Yo=bi(Wo),Qo=bi(Wo);function Jo(e){if(e===Wo)throw Error(o(174));return e}function Zo(e,t){switch(yi(Qo,t),yi(Yo,e),yi(Ko,Wo),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ae(null,"");break;default:t=ae(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}vi(Ko),yi(Ko,t)}function $o(){vi(Ko),vi(Yo),vi(Qo)}function Xo(e){Jo(Qo.current);var t=Jo(Ko.current),n=ae(t,e.type);t!==n&&(yi(Yo,e),yi(Ko,n))}function es(e){Yo.current===e&&(vi(Ko),vi(Yo))}var ts=bi(0);function ns(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var rs=[];function is(){for(var e=0;e<rs.length;e++)rs[e]._workInProgressVersionPrimary=null;rs.length=0}var os=_.ReactCurrentDispatcher,ss=_.ReactCurrentBatchConfig,as=0,us=null,cs=null,ls=null,hs=!1,ds=!1,fs=0,ps=0;function ms(){throw Error(o(321))}function gs(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!tr(e[n],t[n]))return!1;return!0}function bs(e,t,n,r,i,s){if(as=s,us=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,os.current=null===e||null===e.memoizedState?ea:ta,e=n(r,i),ds){s=0;do{if(ds=!1,fs=0,25<=s)throw Error(o(301));s+=1,ls=cs=null,t.updateQueue=null,os.current=na,e=n(r,i)}while(ds)}if(os.current=Xs,t=null!==cs&&null!==cs.next,as=0,ls=cs=us=null,hs=!1,t)throw Error(o(300));return e}function vs(){var e=0!==fs;return fs=0,e}function ys(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ls?us.memoizedState=ls=e:ls=ls.next=e,ls}function _s(){if(null===cs){var e=us.alternate;e=null!==e?e.memoizedState:null}else e=cs.next;var t=null===ls?us.memoizedState:ls.next;if(null!==t)ls=t,cs=e;else{if(null===e)throw Error(o(310));e={memoizedState:(cs=e).memoizedState,baseState:cs.baseState,baseQueue:cs.baseQueue,queue:cs.queue,next:null},null===ls?us.memoizedState=ls=e:ls=ls.next=e}return ls}function ws(e,t){return"function"==typeof t?t(e):t}function Es(e){var t=_s(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=cs,i=r.baseQueue,s=n.pending;if(null!==s){if(null!==i){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(null!==i){s=i.next,r=r.baseState;var u=a=null,c=null,l=s;do{var h=l.lane;if((as&h)===h)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var d={lane:h,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(u=c=d,a=r):c=c.next=d,us.lanes|=h,Au|=h}l=l.next}while(null!==l&&l!==s);null===c?a=r:c.next=u,tr(r,t.memoizedState)||(fa=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{s=i.lane,us.lanes|=s,Au|=s,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ss(e){var t=_s(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{s=e(s,a.action),a=a.next}while(a!==i);tr(s,t.memoizedState)||(fa=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Ms(){}function Os(e,t){var n=us,r=_s(),i=t(),s=!tr(r.memoizedState,i);if(s&&(r.memoizedState=i,fa=!0),r=r.queue,Us(Ts.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||null!==ls&&1&ls.memoizedState.tag){if(n.flags|=2048,Is(9,Cs.bind(null,n,r,i,t),void 0,null),null===yu)throw Error(o(349));0!=(30&as)||As(n,t,i)}return i}function As(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=us.updateQueue)?(t={lastEffect:null,stores:null},us.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Cs(e,t,n,r){t.value=n,t.getSnapshot=r,ks(t)&&xs(e)}function Ts(e,t,n){return n((function(){ks(t)&&xs(e)}))}function ks(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!tr(e,n)}catch(e){return!0}}function xs(e){var t=So(e,1);null!==t&&Wu(t,e,1,-1)}function js(e){var t=ys();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ws,lastRenderedState:e},t.queue=e,e=e.dispatch=Qs.bind(null,us,e),[t.memoizedState,e]}function Is(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=us.updateQueue)?(t={lastEffect:null,stores:null},us.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Rs(){return _s().memoizedState}function Ns(e,t,n,r){var i=ys();us.flags|=e,i.memoizedState=Is(1|t,n,void 0,void 0===r?null:r)}function Ps(e,t,n,r){var i=_s();r=void 0===r?null:r;var o=void 0;if(null!==cs){var s=cs.memoizedState;if(o=s.destroy,null!==r&&gs(r,s.deps))return void(i.memoizedState=Is(t,n,o,r))}us.flags|=e,i.memoizedState=Is(1|t,n,o,r)}function Ds(e,t){return Ns(8390656,8,e,t)}function Us(e,t){return Ps(2048,8,e,t)}function Ls(e,t){return Ps(4,2,e,t)}function Fs(e,t){return Ps(4,4,e,t)}function Bs(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Hs(e,t,n){return n=null!=n?n.concat([e]):null,Ps(4,4,Bs.bind(null,t,e),n)}function qs(){}function Vs(e,t){var n=_s();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&gs(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Gs(e,t){var n=_s();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&gs(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function zs(e,t,n){return 0==(21&as)?(e.baseState&&(e.baseState=!1,fa=!0),e.memoizedState=n):(tr(n,t)||(n=dt(),us.lanes|=n,Au|=n,e.baseState=!0),t)}function Ws(e,t){var n=gt;gt=0!==n&&4>n?n:4,e(!0);var r=ss.transition;ss.transition={};try{e(!1),t()}finally{gt=n,ss.transition=r}}function Ks(){return _s().memoizedState}function Ys(e,t,n){var r=zu(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Js(e))Zs(t,n);else if(null!==(n=Eo(e,t,n,r))){Wu(n,e,r,Gu()),$s(n,t,r)}}function Qs(e,t,n){var r=zu(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Js(e))Zs(t,i);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var s=t.lastRenderedState,a=o(s,n);if(i.hasEagerState=!0,i.eagerState=a,tr(a,s)){var u=t.interleaved;return null===u?(i.next=i,wo(t)):(i.next=u.next,u.next=i),void(t.interleaved=i)}}catch(e){}null!==(n=Eo(e,t,i,r))&&(Wu(n,e,r,i=Gu()),$s(n,t,r))}}function Js(e){var t=e.alternate;return e===us||null!==t&&t===us}function Zs(e,t){ds=hs=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function $s(e,t,n){if(0!=(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,mt(e,n)}}var Xs={readContext:yo,useCallback:ms,useContext:ms,useEffect:ms,useImperativeHandle:ms,useInsertionEffect:ms,useLayoutEffect:ms,useMemo:ms,useReducer:ms,useRef:ms,useState:ms,useDebugValue:ms,useDeferredValue:ms,useTransition:ms,useMutableSource:ms,useSyncExternalStore:ms,useId:ms,unstable_isNewReconciler:!1},ea={readContext:yo,useCallback:function(e,t){return ys().memoizedState=[e,void 0===t?null:t],e},useContext:yo,useEffect:Ds,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,Ns(4194308,4,Bs.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ns(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ns(4,2,e,t)},useMemo:function(e,t){var n=ys();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ys();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Ys.bind(null,us,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ys().memoizedState=e},useState:js,useDebugValue:qs,useDeferredValue:function(e){return ys().memoizedState=e},useTransition:function(){var e=js(!1),t=e[0];return e=Ws.bind(null,e[1]),ys().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=us,i=ys();if(Zi){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===yu)throw Error(o(349));0!=(30&as)||As(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,Ds(Ts.bind(null,r,s,e),[e]),r.flags|=2048,Is(9,Cs.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=ys(),t=yu.identifierPrefix;if(Zi){var n=Gi;t=":"+t+"R"+(n=(Vi&~(1<<32-rt(Vi)-1)).toString(32)+n),0<(n=fs++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=ps++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ta={readContext:yo,useCallback:Vs,useContext:yo,useEffect:Us,useImperativeHandle:Hs,useInsertionEffect:Ls,useLayoutEffect:Fs,useMemo:Gs,useReducer:Es,useRef:Rs,useState:function(){return Es(ws)},useDebugValue:qs,useDeferredValue:function(e){return zs(_s(),cs.memoizedState,e)},useTransition:function(){return[Es(ws)[0],_s().memoizedState]},useMutableSource:Ms,useSyncExternalStore:Os,useId:Ks,unstable_isNewReconciler:!1},na={readContext:yo,useCallback:Vs,useContext:yo,useEffect:Us,useImperativeHandle:Hs,useInsertionEffect:Ls,useLayoutEffect:Fs,useMemo:Gs,useReducer:Ss,useRef:Rs,useState:function(){return Ss(ws)},useDebugValue:qs,useDeferredValue:function(e){var t=_s();return null===cs?t.memoizedState=e:zs(t,cs.memoizedState,e)},useTransition:function(){return[Ss(ws)[0],_s().memoizedState]},useMutableSource:Ms,useSyncExternalStore:Os,useId:Ks,unstable_isNewReconciler:!1};function ra(e,t){try{var n="",r=t;do{n+=H(r),r=r.return}while(r);var i=n}catch(e){i="\nError generating stack: "+e.message+"\n"+e.stack}return{value:e,source:t,stack:i,digest:null}}function ia(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function oa(e,t){try{console.error(t.value)}catch(e){setTimeout((function(){throw e}))}}var sa="function"==typeof WeakMap?WeakMap:Map;function aa(e,t,n){(n=Co(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Nu||(Nu=!0,Pu=r),oa(0,t)},n}function ua(e,t,n){(n=Co(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){oa(0,t)}}var o=e.stateNode;return null!==o&&"function"==typeof o.componentDidCatch&&(n.callback=function(){oa(0,t),"function"!=typeof r&&(null===Du?Du=new Set([this]):Du.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ca(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new sa;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=mc.bind(null,e,t,n),t.then(e,e))}function la(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ha(e,t,n,r,i){return 0==(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Co(-1,1)).tag=2,To(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var da=_.ReactCurrentOwner,fa=!1;function pa(e,t,n,r){t.child=null===e?zo(t,null,n,r):Go(t,e.child,n,r)}function ma(e,t,n,r,i){n=n.render;var o=t.ref;return vo(t,i),r=bs(e,t,n,r,o,i),n=vs(),null===e||fa?(Zi&&n&&Ki(t),t.flags|=1,pa(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ua(e,t,i))}function ga(e,t,n,r,i){if(null===e){var o=n.type;return"function"!=typeof o||Ec(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Mc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,ba(e,t,o,r,i))}if(o=e.child,0==(e.lanes&i)){var s=o.memoizedProps;if((n=null!==(n=n.compare)?n:nr)(s,r)&&e.ref===t.ref)return Ua(e,t,i)}return t.flags|=1,(e=Sc(o,r)).ref=t.ref,e.return=t,t.child=e}function ba(e,t,n,r,i){if(null!==e){var o=e.memoizedProps;if(nr(o,r)&&e.ref===t.ref){if(fa=!1,t.pendingProps=r=o,0==(e.lanes&i))return t.lanes=e.lanes,Ua(e,t,i);0!=(131072&e.flags)&&(fa=!0)}}return _a(e,t,n,r,i)}function va(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0==(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},yi(Su,Eu),Eu|=n;else{if(0==(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,yi(Su,Eu),Eu|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==o?o.baseLanes:n,yi(Su,Eu),Eu|=r}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,yi(Su,Eu),Eu|=r;return pa(e,t,i,n),t.child}function ya(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function _a(e,t,n,r,i){var o=Oi(n)?Si:wi.current;return o=Mi(t,o),vo(t,i),n=bs(e,t,n,r,o,i),r=vs(),null===e||fa?(Zi&&r&&Ki(t),t.flags|=1,pa(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ua(e,t,i))}function wa(e,t,n,r,i){if(Oi(n)){var o=!0;ki(t)}else o=!1;if(vo(t,i),null===t.stateNode)Da(e,t),Uo(t,n,r),Fo(t,n,r,i),r=!0;else if(null===e){var s=t.stateNode,a=t.memoizedProps;s.props=a;var u=s.context,c=n.contextType;"object"==typeof c&&null!==c?c=yo(c):c=Mi(t,c=Oi(n)?Si:wi.current);var l=n.getDerivedStateFromProps,h="function"==typeof l||"function"==typeof s.getSnapshotBeforeUpdate;h||"function"!=typeof s.UNSAFE_componentWillReceiveProps&&"function"!=typeof s.componentWillReceiveProps||(a!==r||u!==c)&&Lo(t,s,r,c),Mo=!1;var d=t.memoizedState;s.state=d,jo(t,r,s,i),u=t.memoizedState,a!==r||d!==u||Ei.current||Mo?("function"==typeof l&&(No(t,n,l,r),u=t.memoizedState),(a=Mo||Do(t,n,a,r,d,u,c))?(h||"function"!=typeof s.UNSAFE_componentWillMount&&"function"!=typeof s.componentWillMount||("function"==typeof s.componentWillMount&&s.componentWillMount(),"function"==typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"==typeof s.componentDidMount&&(t.flags|=4194308)):("function"==typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),s.props=r,s.state=u,s.context=c,r=a):("function"==typeof s.componentDidMount&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,Ao(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:co(t.type,a),s.props=c,h=t.pendingProps,d=s.context,"object"==typeof(u=n.contextType)&&null!==u?u=yo(u):u=Mi(t,u=Oi(n)?Si:wi.current);var f=n.getDerivedStateFromProps;(l="function"==typeof f||"function"==typeof s.getSnapshotBeforeUpdate)||"function"!=typeof s.UNSAFE_componentWillReceiveProps&&"function"!=typeof s.componentWillReceiveProps||(a!==h||d!==u)&&Lo(t,s,r,u),Mo=!1,d=t.memoizedState,s.state=d,jo(t,r,s,i);var p=t.memoizedState;a!==h||d!==p||Ei.current||Mo?("function"==typeof f&&(No(t,n,f,r),p=t.memoizedState),(c=Mo||Do(t,n,c,r,d,p,u)||!1)?(l||"function"!=typeof s.UNSAFE_componentWillUpdate&&"function"!=typeof s.componentWillUpdate||("function"==typeof s.componentWillUpdate&&s.componentWillUpdate(r,p,u),"function"==typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,p,u)),"function"==typeof s.componentDidUpdate&&(t.flags|=4),"function"==typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof s.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),s.props=r,s.state=p,s.context=u,r=c):("function"!=typeof s.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Ea(e,t,n,r,o,i)}function Ea(e,t,n,r,i,o){ya(e,t);var s=0!=(128&t.flags);if(!r&&!s)return i&&xi(t,n,!1),Ua(e,t,o);r=t.stateNode,da.current=t;var a=s&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&s?(t.child=Go(t,e.child,null,o),t.child=Go(t,null,a,o)):pa(e,t,a,o),t.memoizedState=r.state,i&&xi(t,n,!0),t.child}function Sa(e){var t=e.stateNode;t.pendingContext?Ci(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ci(0,t.context,!1),Zo(e,t.containerInfo)}function Ma(e,t,n,r,i){return so(),ao(i),t.flags|=256,pa(e,t,n,r),t.child}var Oa,Aa,Ca,Ta={dehydrated:null,treeContext:null,retryLane:0};function ka(e){return{baseLanes:e,cachePool:null,transitions:null}}function xa(e,t,n){var r,i=t.pendingProps,s=ts.current,a=!1,u=0!=(128&t.flags);if((r=u)||(r=(null===e||null!==e.memoizedState)&&0!=(2&s)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(s|=1),yi(ts,1&s),null===e)return no(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0==(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(u=i.children,e=i.fallback,a?(i=t.mode,a=t.child,u={mode:"hidden",children:u},0==(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=u):a=Ac(u,i,0,null),e=Oc(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=ka(n),t.memoizedState=Ta,e):ja(t,u));if(null!==(s=e.memoizedState)&&null!==(r=s.dehydrated))return function(e,t,n,r,i,s,a){if(n)return 256&t.flags?(t.flags&=-257,r=ia(Error(o(422))),Ia(e,t,a,r)):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=Ac({mode:"visible",children:r.children},i,0,null),(s=Oc(s,i,a,null)).flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,0!=(1&t.mode)&&Go(t,e.child,null,a),t.child.memoizedState=ka(a),t.memoizedState=Ta,s);if(0==(1&t.mode))return Ia(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var u=r.dgst;return r=u,s=Error(o(419)),r=ia(s,r,void 0),Ia(e,t,a,r)}if(u=0!=(a&e.childLanes),fa||u){if(null!==(r=yu)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!=(i&(r.suspendedLanes|a))?0:i)&&i!==s.retryLane&&(s.retryLane=i,So(e,i),Wu(r,e,i,-1))}return oc(),r=ia(Error(o(421))),Ia(e,t,a,r)}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=bc.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,Ji=ni(i.nextSibling),Qi=t,Zi=!0,$i=null,null!==e&&(Bi[Hi++]=Vi,Bi[Hi++]=Gi,Bi[Hi++]=qi,Vi=e.id,Gi=e.overflow,qi=t),(t=ja(t,r.children)).flags|=4096,t)}(e,t,u,i,r,s,n);if(a){a=i.fallback,u=t.mode,r=(s=e.child).sibling;var c={mode:"hidden",children:i.children};return 0==(1&u)&&t.child!==s?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Sc(s,c)).subtreeFlags=14680064&s.subtreeFlags,null!==r?a=Sc(r,a):(a=Oc(a,u,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,u=null===(u=e.child.memoizedState)?ka(n):{baseLanes:u.baseLanes|n,cachePool:null,transitions:u.transitions},a.memoizedState=u,a.childLanes=e.childLanes&~n,t.memoizedState=Ta,i}return e=(a=e.child).sibling,i=Sc(a,{mode:"visible",children:i.children}),0==(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function ja(e,t){return(t=Ac({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Ia(e,t,n,r){return null!==r&&ao(r),Go(t,e.child,null,n),(e=ja(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ra(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),bo(e.return,t,n)}function Na(e,t,n,r,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Pa(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(pa(e,t,r.children,n),0!=(2&(r=ts.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!=(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ra(e,n,t);else if(19===e.tag)Ra(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(yi(ts,r),0==(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===ns(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Na(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ns(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Na(t,!0,n,null,o);break;case"together":Na(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Da(e,t){0==(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ua(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Au|=t.lanes,0==(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Sc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Sc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function La(e,t){if(!Zi)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Fa(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ba(e,t,n){var r=t.pendingProps;switch(Yi(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Fa(t),null;case 1:return Oi(t.type)&&Ai(),Fa(t),null;case 3:return r=t.stateNode,$o(),vi(Ei),vi(wi),is(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(io(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0==(256&t.flags)||(t.flags|=1024,null!==$i&&(Ju($i),$i=null))),Fa(t),null;case 5:es(t);var i=Jo(Qo.current);if(n=t.type,null!==e&&null!=t.stateNode)Aa(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(o(166));return Fa(t),null}if(e=Jo(Ko.current),io(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[oi]=t,r[si]=s,e=0!=(1&t.mode),n){case"dialog":Ir("cancel",r),Ir("close",r);break;case"iframe":case"object":case"embed":Ir("load",r);break;case"video":case"audio":for(i=0;i<Tr.length;i++)Ir(Tr[i],r);break;case"source":Ir("error",r);break;case"img":case"image":case"link":Ir("error",r),Ir("load",r);break;case"details":Ir("toggle",r);break;case"input":Q(r,s),Ir("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ir("invalid",r);break;case"textarea":re(r,s),Ir("invalid",r)}for(var u in ge(n,s),i=null,s)if(s.hasOwnProperty(u)){var c=s[u];"children"===u?"string"==typeof c?r.textContent!==c&&(!0!==s.suppressHydrationWarning&&zr(r.textContent,c,e),i=["children",c]):"number"==typeof c&&r.textContent!==""+c&&(!0!==s.suppressHydrationWarning&&zr(r.textContent,c,e),i=["children",""+c]):a.hasOwnProperty(u)&&null!=c&&"onScroll"===u&&Ir("scroll",r)}switch(n){case"input":z(r),$(r,s,!0);break;case"textarea":z(r),oe(r);break;case"select":case"option":break;default:"function"==typeof s.onClick&&(r.onclick=Wr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{u=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=u.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof r.is?e=u.createElement(n,{is:r.is}):(e=u.createElement(n),"select"===n&&(u=e,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):e=u.createElementNS(e,n),e[oi]=t,e[si]=r,Oa(e,t),t.stateNode=e;e:{switch(u=be(n,r),n){case"dialog":Ir("cancel",e),Ir("close",e),i=r;break;case"iframe":case"object":case"embed":Ir("load",e),i=r;break;case"video":case"audio":for(i=0;i<Tr.length;i++)Ir(Tr[i],e);i=r;break;case"source":Ir("error",e),i=r;break;case"img":case"image":case"link":Ir("error",e),Ir("load",e),i=r;break;case"details":Ir("toggle",e),i=r;break;case"input":Q(e,r),i=Y(e,r),Ir("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=U({},r,{value:void 0}),Ir("invalid",e);break;case"textarea":re(e,r),i=ne(e,r),Ir("invalid",e);break;default:i=r}for(s in ge(n,i),c=i)if(c.hasOwnProperty(s)){var l=c[s];"style"===s?pe(e,l):"dangerouslySetInnerHTML"===s?null!=(l=l?l.__html:void 0)&&ce(e,l):"children"===s?"string"==typeof l?("textarea"!==n||""!==l)&&le(e,l):"number"==typeof l&&le(e,""+l):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(a.hasOwnProperty(s)?null!=l&&"onScroll"===s&&Ir("scroll",e):null!=l&&y(e,s,l,u))}switch(n){case"input":z(e),$(e,r,!1);break;case"textarea":z(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+V(r.value));break;case"select":e.multiple=!!r.multiple,null!=(s=r.value)?te(e,!!r.multiple,s,!1):null!=r.defaultValue&&te(e,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof i.onClick&&(e.onclick=Wr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Fa(t),null;case 6:if(e&&null!=t.stateNode)Ca(0,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(o(166));if(n=Jo(Qo.current),Jo(Ko.current),io(t)){if(r=t.stateNode,n=t.memoizedProps,r[oi]=t,(s=r.nodeValue!==n)&&null!==(e=Qi))switch(e.tag){case 3:zr(r.nodeValue,n,0!=(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&zr(r.nodeValue,n,0!=(1&e.mode))}s&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[oi]=t,t.stateNode=r}return Fa(t),null;case 13:if(vi(ts),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(Zi&&null!==Ji&&0!=(1&t.mode)&&0==(128&t.flags))oo(),so(),t.flags|=98560,s=!1;else if(s=io(t),null!==r&&null!==r.dehydrated){if(null===e){if(!s)throw Error(o(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(o(317));s[oi]=t}else so(),0==(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Fa(t),s=!1}else null!==$i&&(Ju($i),$i=null),s=!0;if(!s)return 65536&t.flags?t:null}return 0!=(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!=(1&t.mode)&&(null===e||0!=(1&ts.current)?0===Mu&&(Mu=3):oc())),null!==t.updateQueue&&(t.flags|=4),Fa(t),null);case 4:return $o(),null===e&&Pr(t.stateNode.containerInfo),Fa(t),null;case 10:return go(t.type._context),Fa(t),null;case 17:return Oi(t.type)&&Ai(),Fa(t),null;case 19:if(vi(ts),null===(s=t.memoizedState))return Fa(t),null;if(r=0!=(128&t.flags),null===(u=s.rendering))if(r)La(s,!1);else{if(0!==Mu||null!==e&&0!=(128&e.flags))for(e=t.child;null!==e;){if(null!==(u=ns(e))){for(t.flags|=128,La(s,!1),null!==(r=u.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(s=n).flags&=14680066,null===(u=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=u.childLanes,s.lanes=u.lanes,s.child=u.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=u.memoizedProps,s.memoizedState=u.memoizedState,s.updateQueue=u.updateQueue,s.type=u.type,e=u.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return yi(ts,1&ts.current|2),t.child}e=e.sibling}null!==s.tail&&Ye()>Iu&&(t.flags|=128,r=!0,La(s,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ns(u))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),La(s,!0),null===s.tail&&"hidden"===s.tailMode&&!u.alternate&&!Zi)return Fa(t),null}else 2*Ye()-s.renderingStartTime>Iu&&1073741824!==n&&(t.flags|=128,r=!0,La(s,!1),t.lanes=4194304);s.isBackwards?(u.sibling=t.child,t.child=u):(null!==(n=s.last)?n.sibling=u:t.child=u,s.last=u)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Ye(),t.sibling=null,n=ts.current,yi(ts,r?1&n|2:1&n),t):(Fa(t),null);case 22:case 23:return tc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!=(1&t.mode)?0!=(1073741824&Eu)&&(Fa(t),6&t.subtreeFlags&&(t.flags|=8192)):Fa(t),null;case 24:case 25:return null}throw Error(o(156,t.tag))}function Ha(e,t){switch(Yi(t),t.tag){case 1:return Oi(t.type)&&Ai(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return $o(),vi(Ei),vi(wi),is(),0!=(65536&(e=t.flags))&&0==(128&e)?(t.flags=-65537&e|128,t):null;case 5:return es(t),null;case 13:if(vi(ts),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));so()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return vi(ts),null;case 4:return $o(),null;case 10:return go(t.type._context),null;case 22:case 23:return tc(),null;case 24:default:return null}}Oa=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Aa=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Jo(Ko.current);var o,s=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),s=[];break;case"select":i=U({},i,{value:void 0}),r=U({},r,{value:void 0}),s=[];break;case"textarea":i=ne(e,i),r=ne(e,r),s=[];break;default:"function"!=typeof i.onClick&&"function"==typeof r.onClick&&(e.onclick=Wr)}for(l in ge(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var u=i[l];for(o in u)u.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(a.hasOwnProperty(l)?s||(s=[]):(s=s||[]).push(l,null));for(l in r){var c=r[l];if(u=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==u&&(null!=c||null!=u))if("style"===l)if(u){for(o in u)!u.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&u[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(s||(s=[]),s.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,u=u?u.__html:void 0,null!=c&&u!==c&&(s=s||[]).push(l,c)):"children"===l?"string"!=typeof c&&"number"!=typeof c||(s=s||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(a.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&Ir("scroll",e),s||u===c||(s=[])):(s=s||[]).push(l,c))}n&&(s=s||[]).push("style",n);var l=s;(t.updateQueue=l)&&(t.flags|=4)}},Ca=function(e,t,n,r){n!==r&&(t.flags|=4)};var qa=!1,Va=!1,Ga="function"==typeof WeakSet?WeakSet:Set,za=null;function Wa(e,t){var n=e.ref;if(null!==n)if("function"==typeof n)try{n(null)}catch(n){pc(e,t,n)}else n.current=null}function Ka(e,t,n){try{n()}catch(n){pc(e,t,n)}}var Ya=!1;function Qa(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,void 0!==o&&Ka(t,n,o)}i=i.next}while(i!==r)}}function Ja(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Za(e){var t=e.ref;if(null!==t){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}"function"==typeof t?t(e):t.current=e}}function $a(e){var t=e.alternate;null!==t&&(e.alternate=null,$a(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[oi],delete t[si],delete t[ui],delete t[ci],delete t[li])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Xa(e){return 5===e.tag||3===e.tag||4===e.tag}function eu(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||Xa(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}var tu=null,nu=!1;function ru(e,t,n){for(n=n.child;null!==n;)iu(e,t,n),n=n.sibling}function iu(e,t,n){if(nt&&"function"==typeof nt.onCommitFiberUnmount)try{nt.onCommitFiberUnmount(tt,n)}catch(e){}switch(n.tag){case 5:Va||Wa(n,t);case 6:var r=tu,i=nu;tu=null,ru(e,t,n),nu=i,null!==(tu=r)&&(nu?(e=tu,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):tu.removeChild(n.stateNode));break;case 18:null!==tu&&(nu?(e=tu,n=n.stateNode,8===e.nodeType?ti(e.parentNode,n):1===e.nodeType&&ti(e,n),Ft(e)):ti(tu,n.stateNode));break;case 4:r=tu,i=nu,tu=n.stateNode.containerInfo,nu=!0,ru(e,t,n),tu=r,nu=i;break;case 0:case 11:case 14:case 15:if(!Va&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,void 0!==s&&(0!=(2&o)||0!=(4&o))&&Ka(n,t,s),i=i.next}while(i!==r)}ru(e,t,n);break;case 1:if(!Va&&(Wa(n,t),"function"==typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(e){pc(n,t,e)}ru(e,t,n);break;case 21:ru(e,t,n);break;case 22:1&n.mode?(Va=(r=Va)||null!==n.memoizedState,ru(e,t,n),Va=r):ru(e,t,n);break;default:ru(e,t,n)}}function ou(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ga),t.forEach((function(t){var r=vc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function su(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,a=t,u=a;e:for(;null!==u;){switch(u.tag){case 5:tu=u.stateNode,nu=!1;break e;case 3:case 4:tu=u.stateNode.containerInfo,nu=!0;break e}u=u.return}if(null===tu)throw Error(o(160));iu(s,a,i),tu=null,nu=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(e){pc(i,t,e)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)au(t,e),t=t.sibling}function au(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(su(t,e),uu(e),4&r){try{Qa(3,e,e.return),Ja(3,e)}catch(t){pc(e,e.return,t)}try{Qa(5,e,e.return)}catch(t){pc(e,e.return,t)}}break;case 1:su(t,e),uu(e),512&r&&null!==n&&Wa(n,n.return);break;case 5:if(su(t,e),uu(e),512&r&&null!==n&&Wa(n,n.return),32&e.flags){var i=e.stateNode;try{le(i,"")}catch(t){pc(e,e.return,t)}}if(4&r&&null!=(i=e.stateNode)){var s=e.memoizedProps,a=null!==n?n.memoizedProps:s,u=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===u&&"radio"===s.type&&null!=s.name&&J(i,s),be(u,a);var l=be(u,s);for(a=0;a<c.length;a+=2){var h=c[a],d=c[a+1];"style"===h?pe(i,d):"dangerouslySetInnerHTML"===h?ce(i,d):"children"===h?le(i,d):y(i,h,d,l)}switch(u){case"input":Z(i,s);break;case"textarea":ie(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;null!=p?te(i,!!s.multiple,p,!1):f!==!!s.multiple&&(null!=s.defaultValue?te(i,!!s.multiple,s.defaultValue,!0):te(i,!!s.multiple,s.multiple?[]:"",!1))}i[si]=s}catch(t){pc(e,e.return,t)}}break;case 6:if(su(t,e),uu(e),4&r){if(null===e.stateNode)throw Error(o(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(t){pc(e,e.return,t)}}break;case 3:if(su(t,e),uu(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Ft(t.containerInfo)}catch(t){pc(e,e.return,t)}break;case 4:su(t,e),uu(e);break;case 13:su(t,e),uu(e),8192&(i=e.child).flags&&(s=null!==i.memoizedState,i.stateNode.isHidden=s,!s||null!==i.alternate&&null!==i.alternate.memoizedState||(ju=Ye())),4&r&&ou(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Va=(l=Va)||h,su(t,e),Va=l):su(t,e),uu(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!h&&0!=(1&e.mode))for(za=e,h=e.child;null!==h;){for(d=za=h;null!==za;){switch(p=(f=za).child,f.tag){case 0:case 11:case 14:case 15:Qa(4,f,f.return);break;case 1:Wa(f,f.return);var m=f.stateNode;if("function"==typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(e){pc(r,n,e)}}break;case 5:Wa(f,f.return);break;case 22:if(null!==f.memoizedState){hu(d);continue}}null!==p?(p.return=f,za=p):hu(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,l?"function"==typeof(s=i.style).setProperty?s.setProperty("display","none","important"):s.display="none":(u=d.stateNode,a=null!=(c=d.memoizedProps.style)&&c.hasOwnProperty("display")?c.display:null,u.style.display=fe("display",a))}catch(t){pc(e,e.return,t)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=l?"":d.memoizedProps}catch(t){pc(e,e.return,t)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:su(t,e),uu(e),4&r&&ou(e);break;case 21:break;default:su(t,e),uu(e)}}function uu(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(Xa(n)){var r=n;break e}n=n.return}throw Error(o(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(le(i,""),r.flags&=-33),function e(t,n,r){var i=t.tag;if(5===i||6===i)t=t.stateNode,n?r.insertBefore(t,n):r.appendChild(t);else if(4!==i&&null!==(t=t.child))for(e(t,n,r),t=t.sibling;null!==t;)e(t,n,r),t=t.sibling}(e,eu(e),i);break;case 3:case 4:var s=r.stateNode.containerInfo;!function e(t,n,r){var i=t.tag;if(5===i||6===i)t=t.stateNode,n?8===r.nodeType?r.parentNode.insertBefore(t,n):r.insertBefore(t,n):(8===r.nodeType?(n=r.parentNode).insertBefore(t,r):(n=r).appendChild(t),null!=(r=r._reactRootContainer)||null!==n.onclick||(n.onclick=Wr));else if(4!==i&&null!==(t=t.child))for(e(t,n,r),t=t.sibling;null!==t;)e(t,n,r),t=t.sibling}(e,eu(e),s);break;default:throw Error(o(161))}}catch(t){pc(e,e.return,t)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function cu(e,t,n){za=e,function e(t,n,r){for(var i=0!=(1&t.mode);null!==za;){var o=za,s=o.child;if(22===o.tag&&i){var a=null!==o.memoizedState||qa;if(!a){var u=o.alternate,c=null!==u&&null!==u.memoizedState||Va;u=qa;var l=Va;if(qa=a,(Va=c)&&!l)for(za=o;null!==za;)c=(a=za).child,22===a.tag&&null!==a.memoizedState?du(o):null!==c?(c.return=a,za=c):du(o);for(;null!==s;)za=s,e(s,n,r),s=s.sibling;za=o,qa=u,Va=l}lu(t)}else 0!=(8772&o.subtreeFlags)&&null!==s?(s.return=o,za=s):lu(t)}}(e,t,n)}function lu(e){for(;null!==za;){var t=za;if(0!=(8772&t.flags)){var n=t.alternate;try{if(0!=(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Va||Ja(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Va)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:co(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;null!==s&&Io(t,s,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Io(t,a,n)}break;case 5:var u=t.stateNode;if(null===n&&4&t.flags){n=u;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var h=l.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&Ft(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(o(163))}Va||512&t.flags&&Za(t)}catch(e){pc(t,t.return,e)}}if(t===e){za=null;break}if(null!==(n=t.sibling)){n.return=t.return,za=n;break}za=t.return}}function hu(e){for(;null!==za;){var t=za;if(t===e){za=null;break}var n=t.sibling;if(null!==n){n.return=t.return,za=n;break}za=t.return}}function du(e){for(;null!==za;){var t=za;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Ja(4,t)}catch(e){pc(t,n,e)}break;case 1:var r=t.stateNode;if("function"==typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(e){pc(t,i,e)}}var o=t.return;try{Za(t)}catch(e){pc(t,o,e)}break;case 5:var s=t.return;try{Za(t)}catch(e){pc(t,s,e)}}}catch(e){pc(t,t.return,e)}if(t===e){za=null;break}var a=t.sibling;if(null!==a){a.return=t.return,za=a;break}za=t.return}}var fu,pu=Math.ceil,mu=_.ReactCurrentDispatcher,gu=_.ReactCurrentOwner,bu=_.ReactCurrentBatchConfig,vu=0,yu=null,_u=null,wu=0,Eu=0,Su=bi(0),Mu=0,Ou=null,Au=0,Cu=0,Tu=0,ku=null,xu=null,ju=0,Iu=1/0,Ru=null,Nu=!1,Pu=null,Du=null,Uu=!1,Lu=null,Fu=0,Bu=0,Hu=null,qu=-1,Vu=0;function Gu(){return 0!=(6&vu)?Ye():-1!==qu?qu:qu=Ye()}function zu(e){return 0==(1&e.mode)?1:0!=(2&vu)&&0!==wu?wu&-wu:null!==uo.transition?(0===Vu&&(Vu=dt()),Vu):0!==(e=gt)?e:e=void 0===(e=window.event)?16:Kt(e.type)}function Wu(e,t,n,r){if(50<Bu)throw Bu=0,Hu=null,Error(o(185));pt(e,n,r),0!=(2&vu)&&e===yu||(e===yu&&(0==(2&vu)&&(Cu|=n),4===Mu&&Zu(e,wu)),Ku(e,r),1===n&&0===vu&&0==(1&t.mode)&&(Iu=Ye()+500,Ii&&Pi()))}function Ku(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var s=31-rt(o),a=1<<s,u=i[s];-1===u?0!=(a&n)&&0==(a&r)||(i[s]=lt(a,t)):u<=t&&(e.expiredLanes|=a),o&=~a}}(e,t);var r=ct(e,e===yu?wu:0);if(0===r)null!==n&&ze(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&ze(n),1===t)0===e.tag?function(e){Ii=!0,Ni(e)}($u.bind(null,e)):Ni($u.bind(null,e)),Xr((function(){0==(6&vu)&&Pi()})),n=null;else{switch(bt(r)){case 1:n=Je;break;case 4:n=Ze;break;case 16:n=$e;break;case 536870912:n=et;break;default:n=$e}n=yc(n,Yu.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Yu(e,t){if(qu=-1,Vu=0,0!=(6&vu))throw Error(o(327));var n=e.callbackNode;if(dc()&&e.callbackNode!==n)return null;var r=ct(e,e===yu?wu:0);if(0===r)return null;if(0!=(30&r)||0!=(r&e.expiredLanes)||t)t=sc(e,r);else{t=r;var i=vu;vu|=2;var s=ic();for(yu===e&&wu===t||(Ru=null,Iu=Ye()+500,nc(e,t));;)try{uc();break}catch(t){rc(e,t)}mo(),mu.current=s,vu=i,null!==_u?t=0:(yu=null,wu=0,t=Mu)}if(0!==t){if(2===t&&(0!==(i=ht(e))&&(r=i,t=Qu(e,i))),1===t)throw n=Ou,nc(e,0),Zu(e,r),Ku(e,Ye()),n;if(6===t)Zu(e,r);else{if(i=e.current.alternate,0==(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!tr(o(),i))return!1}catch(e){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=sc(e,r))&&(0!==(s=ht(e))&&(r=s,t=Qu(e,s))),1===t))throw n=Ou,nc(e,0),Zu(e,r),Ku(e,Ye()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(o(345));case 2:hc(e,xu,Ru);break;case 3:if(Zu(e,r),(130023424&r)===r&&10<(t=ju+500-Ye())){if(0!==ct(e,0))break;if(((i=e.suspendedLanes)&r)!==r){Gu(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Jr(hc.bind(null,e,xu,Ru),t);break}hc(e,xu,Ru);break;case 4:if(Zu(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-rt(r);s=1<<a,(a=t[a])>i&&(i=a),r&=~s}if(r=i,10<(r=(120>(r=Ye()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*pu(r/1960))-r)){e.timeoutHandle=Jr(hc.bind(null,e,xu,Ru),r);break}hc(e,xu,Ru);break;case 5:hc(e,xu,Ru);break;default:throw Error(o(329))}}}return Ku(e,Ye()),e.callbackNode===n?Yu.bind(null,e):null}function Qu(e,t){var n=ku;return e.current.memoizedState.isDehydrated&&(nc(e,t).flags|=256),2!==(e=sc(e,t))&&(t=xu,xu=n,null!==t&&Ju(t)),e}function Ju(e){null===xu?xu=e:xu.push.apply(xu,e)}function Zu(e,t){for(t&=~Tu,t&=~Cu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-rt(t),r=1<<n;e[n]=-1,t&=~r}}function $u(e){if(0!=(6&vu))throw Error(o(327));dc();var t=ct(e,0);if(0==(1&t))return Ku(e,Ye()),null;var n=sc(e,t);if(0!==e.tag&&2===n){var r=ht(e);0!==r&&(t=r,n=Qu(e,r))}if(1===n)throw n=Ou,nc(e,0),Zu(e,t),Ku(e,Ye()),n;if(6===n)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,hc(e,xu,Ru),Ku(e,Ye()),null}function Xu(e,t){var n=vu;vu|=1;try{return e(t)}finally{0===(vu=n)&&(Iu=Ye()+500,Ii&&Pi())}}function ec(e){null!==Lu&&0===Lu.tag&&0==(6&vu)&&dc();var t=vu;vu|=1;var n=bu.transition,r=gt;try{if(bu.transition=null,gt=1,e)return e()}finally{gt=r,bu.transition=n,0==(6&(vu=t))&&Pi()}}function tc(){Eu=Su.current,vi(Su)}function nc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Zr(n)),null!==_u)for(n=_u.return;null!==n;){var r=n;switch(Yi(r),r.tag){case 1:null!=(r=r.type.childContextTypes)&&Ai();break;case 3:$o(),vi(Ei),vi(wi),is();break;case 5:es(r);break;case 4:$o();break;case 13:case 19:vi(ts);break;case 10:go(r.type._context);break;case 22:case 23:tc()}n=n.return}if(yu=e,_u=e=Sc(e.current,null),wu=Eu=t,Mu=0,Ou=null,Tu=Cu=Au=0,xu=ku=null,null!==_o){for(t=0;t<_o.length;t++)if(null!==(r=(n=_o[t]).interleaved)){n.interleaved=null;var i=r.next,o=n.pending;if(null!==o){var s=o.next;o.next=i,r.next=s}n.pending=r}_o=null}return e}function rc(e,t){for(;;){var n=_u;try{if(mo(),os.current=Xs,hs){for(var r=us.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}hs=!1}if(as=0,ls=cs=us=null,ds=!1,fs=0,gu.current=null,null===n||null===n.return){Mu=1,Ou=t,_u=null;break}e:{var s=e,a=n.return,u=n,c=t;if(t=wu,u.flags|=32768,null!==c&&"object"==typeof c&&"function"==typeof c.then){var l=c,h=u,d=h.tag;if(0==(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=la(a);if(null!==p){p.flags&=-257,ha(p,a,u,0,t),1&p.mode&&ca(s,l,t),c=l;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0==(1&t)){ca(s,l,t),oc();break e}c=Error(o(426))}else if(Zi&&1&u.mode){var b=la(a);if(null!==b){0==(65536&b.flags)&&(b.flags|=256),ha(b,a,u,0,t),ao(ra(c,u));break e}}s=c=ra(c,u),4!==Mu&&(Mu=2),null===ku?ku=[s]:ku.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,xo(s,aa(0,c,t));break e;case 1:u=c;var v=s.type,y=s.stateNode;if(0==(128&s.flags)&&("function"==typeof v.getDerivedStateFromError||null!==y&&"function"==typeof y.componentDidCatch&&(null===Du||!Du.has(y)))){s.flags|=65536,t&=-t,s.lanes|=t,xo(s,ua(s,u,t));break e}}s=s.return}while(null!==s)}lc(n)}catch(e){t=e,_u===n&&null!==n&&(_u=n=n.return);continue}break}}function ic(){var e=mu.current;return mu.current=Xs,null===e?Xs:e}function oc(){0!==Mu&&3!==Mu&&2!==Mu||(Mu=4),null===yu||0==(268435455&Au)&&0==(268435455&Cu)||Zu(yu,wu)}function sc(e,t){var n=vu;vu|=2;var r=ic();for(yu===e&&wu===t||(Ru=null,nc(e,t));;)try{ac();break}catch(t){rc(e,t)}if(mo(),vu=n,mu.current=r,null!==_u)throw Error(o(261));return yu=null,wu=0,Mu}function ac(){for(;null!==_u;)cc(_u)}function uc(){for(;null!==_u&&!We();)cc(_u)}function cc(e){var t=fu(e.alternate,e,Eu);e.memoizedProps=e.pendingProps,null===t?lc(e):_u=t,gu.current=null}function lc(e){var t=e;do{var n=t.alternate;if(e=t.return,0==(32768&t.flags)){if(null!==(n=Ba(n,t,Eu)))return void(_u=n)}else{if(null!==(n=Ha(n,t)))return n.flags&=32767,void(_u=n);if(null===e)return Mu=6,void(_u=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(_u=t);_u=t=e}while(null!==t);0===Mu&&(Mu=5)}function hc(e,t,n){var r=gt,i=bu.transition;try{bu.transition=null,gt=1,function(e,t,n,r){do{dc()}while(null!==Lu);if(0!=(6&vu))throw Error(o(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-rt(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}(e,s),e===yu&&(_u=yu=null,wu=0),0==(2064&n.subtreeFlags)&&0==(2064&n.flags)||Uu||(Uu=!0,yc($e,(function(){return dc(),null}))),s=0!=(15990&n.flags),0!=(15990&n.subtreeFlags)||s){s=bu.transition,bu.transition=null;var a=gt;gt=1;var u=vu;vu|=4,gu.current=null,function(e,t){if(Kr=Ht,sr(e=or())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch(e){n=null;break e}var a=0,u=-1,c=-1,l=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==i&&3!==d.nodeType||(u=a+i),d!==s||0!==r&&3!==d.nodeType||(c=a+r),3===d.nodeType&&(a+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++l===i&&(u=a),f===s&&++h===r&&(c=a),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===u||-1===c?null:{start:u,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Yr={focusedElem:e,selectionRange:n},Ht=!1,za=t;null!==za;)if(e=(t=za).child,0!=(1028&t.subtreeFlags)&&null!==e)e.return=t,za=e;else for(;null!==za;){t=za;try{var m=t.alternate;if(0!=(1024&t.flags))switch(t.tag){case 0:case 11:case 15:break;case 1:if(null!==m){var g=m.memoizedProps,b=m.memoizedState,v=t.stateNode,y=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:co(t.type,g),b);v.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var _=t.stateNode.containerInfo;1===_.nodeType?_.textContent="":9===_.nodeType&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(e){pc(t,t.return,e)}if(null!==(e=t.sibling)){e.return=t.return,za=e;break}za=t.return}m=Ya,Ya=!1}(e,n),au(n,e),ar(Yr),Ht=!!Kr,Yr=Kr=null,e.current=n,cu(n,e,i),Ke(),vu=u,gt=a,bu.transition=s}else e.current=n;if(Uu&&(Uu=!1,Lu=e,Fu=i),0===(s=e.pendingLanes)&&(Du=null),function(e){if(nt&&"function"==typeof nt.onCommitFiberRoot)try{nt.onCommitFiberRoot(tt,e,void 0,128==(128&e.current.flags))}catch(e){}}(n.stateNode),Ku(e,Ye()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Nu)throw Nu=!1,e=Pu,Pu=null,e;0!=(1&Fu)&&0!==e.tag&&dc(),0!=(1&(s=e.pendingLanes))?e===Hu?Bu++:(Bu=0,Hu=e):Bu=0,Pi()}(e,t,n,r)}finally{bu.transition=i,gt=r}return null}function dc(){if(null!==Lu){var e=bt(Fu),t=bu.transition,n=gt;try{if(bu.transition=null,gt=16>e?16:e,null===Lu)var r=!1;else{if(e=Lu,Lu=null,Fu=0,0!=(6&vu))throw Error(o(331));var i=vu;for(vu|=4,za=e.current;null!==za;){var s=za,a=s.child;if(0!=(16&za.flags)){var u=s.deletions;if(null!==u){for(var c=0;c<u.length;c++){var l=u[c];for(za=l;null!==za;){var h=za;switch(h.tag){case 0:case 11:case 15:Qa(8,h,s)}var d=h.child;if(null!==d)d.return=h,za=d;else for(;null!==za;){var f=(h=za).sibling,p=h.return;if($a(h),h===l){za=null;break}if(null!==f){f.return=p,za=f;break}za=p}}}var m=s.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var b=g.sibling;g.sibling=null,g=b}while(null!==g)}}za=s}}if(0!=(2064&s.subtreeFlags)&&null!==a)a.return=s,za=a;else e:for(;null!==za;){if(0!=(2048&(s=za).flags))switch(s.tag){case 0:case 11:case 15:Qa(9,s,s.return)}var v=s.sibling;if(null!==v){v.return=s.return,za=v;break e}za=s.return}}var y=e.current;for(za=y;null!==za;){var _=(a=za).child;if(0!=(2064&a.subtreeFlags)&&null!==_)_.return=a,za=_;else e:for(a=y;null!==za;){if(0!=(2048&(u=za).flags))try{switch(u.tag){case 0:case 11:case 15:Ja(9,u)}}catch(e){pc(u,u.return,e)}if(u===a){za=null;break e}var w=u.sibling;if(null!==w){w.return=u.return,za=w;break e}za=u.return}}if(vu=i,Pi(),nt&&"function"==typeof nt.onPostCommitFiberRoot)try{nt.onPostCommitFiberRoot(tt,e)}catch(e){}r=!0}return r}finally{gt=n,bu.transition=t}}return!1}function fc(e,t,n){e=To(e,t=aa(0,t=ra(n,t),1),1),t=Gu(),null!==e&&(pt(e,1,t),Ku(e,t))}function pc(e,t,n){if(3===e.tag)fc(e,e,n);else for(;null!==t;){if(3===t.tag){fc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Du||!Du.has(r))){t=To(t,e=ua(t,e=ra(n,e),1),1),e=Gu(),null!==t&&(pt(t,1,e),Ku(t,e));break}}t=t.return}}function mc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=Gu(),e.pingedLanes|=e.suspendedLanes&n,yu===e&&(wu&n)===n&&(4===Mu||3===Mu&&(130023424&wu)===wu&&500>Ye()-ju?nc(e,0):Tu|=n),Ku(e,t)}function gc(e,t){0===t&&(0==(1&e.mode)?t=1:(t=at,0==(130023424&(at<<=1))&&(at=4194304)));var n=Gu();null!==(e=So(e,t))&&(pt(e,t,n),Ku(e,n))}function bc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),gc(e,n)}function vc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(o(314))}null!==r&&r.delete(t),gc(e,n)}function yc(e,t){return Ge(e,t)}function _c(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wc(e,t,n,r){return new _c(e,t,n,r)}function Ec(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Sc(e,t){var n=e.alternate;return null===n?((n=wc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Mc(e,t,n,r,i,s){var a=2;if(r=e,"function"==typeof e)Ec(e)&&(a=1);else if("string"==typeof e)a=5;else e:switch(e){case S:return Oc(n.children,i,s,t);case M:a=8,i|=8;break;case O:return(e=wc(12,n,t,2|i)).elementType=O,e.lanes=s,e;case k:return(e=wc(13,n,t,i)).elementType=k,e.lanes=s,e;case x:return(e=wc(19,n,t,i)).elementType=x,e.lanes=s,e;case R:return Ac(n,i,s,t);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case A:a=10;break e;case C:a=9;break e;case T:a=11;break e;case j:a=14;break e;case I:a=16,r=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=wc(a,n,t,i)).elementType=e,t.type=r,t.lanes=s,t}function Oc(e,t,n,r){return(e=wc(7,e,r,t)).lanes=n,e}function Ac(e,t,n,r){return(e=wc(22,e,r,t)).elementType=R,e.lanes=n,e.stateNode={isHidden:!1},e}function Cc(e,t,n){return(e=wc(6,e,null,t)).lanes=n,e}function Tc(e,t,n){return(t=wc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function kc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ft(0),this.expirationTimes=ft(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ft(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function xc(e,t,n,r,i,o,s,a,u){return e=new kc(e,t,n,a,u),1===t?(t=1,!0===o&&(t|=8)):t=0,o=wc(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Oo(o),e}function jc(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:E,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Ic(e){if(!e)return _i;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Oi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(o(171))}if(1===e.tag){var n=e.type;if(Oi(n))return Ti(e,n,t)}return t}function Rc(e,t,n,r,i,o,s,a,u){return(e=xc(n,r,!0,e,0,o,0,a,u)).context=Ic(null),n=e.current,(o=Co(r=Gu(),i=zu(n))).callback=null!=t?t:null,To(n,o,i),e.current.lanes=i,pt(e,i,r),Ku(e,r),e}function Nc(e,t,n,r){var i=t.current,o=Gu(),s=zu(i);return n=Ic(n),null===t.context?t.context=n:t.pendingContext=n,(t=Co(o,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=To(i,t,s))&&(Wu(e,i,s,o),ko(e,i,s)),s}function Pc(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function Dc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Uc(e,t){Dc(e,t),(e=e.alternate)&&Dc(e,t)}fu=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ei.current)fa=!0;else{if(0==(e.lanes&n)&&0==(128&t.flags))return fa=!1,function(e,t,n){switch(t.tag){case 3:Sa(t),so();break;case 5:Xo(t);break;case 1:Oi(t.type)&&ki(t);break;case 4:Zo(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;yi(lo,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(yi(ts,1&ts.current),t.flags|=128,null):0!=(n&t.child.childLanes)?xa(e,t,n):(yi(ts,1&ts.current),null!==(e=Ua(e,t,n))?e.sibling:null);yi(ts,1&ts.current);break;case 19:if(r=0!=(n&t.childLanes),0!=(128&e.flags)){if(r)return Pa(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),yi(ts,ts.current),r)break;return null;case 22:case 23:return t.lanes=0,va(e,t,n)}return Ua(e,t,n)}(e,t,n);fa=0!=(131072&e.flags)}else fa=!1,Zi&&0!=(1048576&t.flags)&&Wi(t,Fi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Da(e,t),e=t.pendingProps;var i=Mi(t,wi.current);vo(t,n),i=bs(null,t,r,e,i,n);var s=vs();return t.flags|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Oi(r)?(s=!0,ki(t)):s=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Oo(t),i.updater=Po,t.stateNode=i,i._reactInternals=t,Fo(t,r,e,n),t=Ea(null,t,r,!0,s,n)):(t.tag=0,Zi&&s&&Ki(t),pa(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Da(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"==typeof e)return Ec(e)?1:0;if(null!=e){if((e=e.$$typeof)===T)return 11;if(e===j)return 14}return 2}(r),e=co(r,e),i){case 0:t=_a(null,t,r,e,n);break e;case 1:t=wa(null,t,r,e,n);break e;case 11:t=ma(null,t,r,e,n);break e;case 14:t=ga(null,t,r,co(r.type,e),n);break e}throw Error(o(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,_a(e,t,r,i=t.elementType===r?i:co(r,i),n);case 1:return r=t.type,i=t.pendingProps,wa(e,t,r,i=t.elementType===r?i:co(r,i),n);case 3:e:{if(Sa(t),null===e)throw Error(o(387));r=t.pendingProps,i=(s=t.memoizedState).element,Ao(e,t),jo(t,r,null,n);var a=t.memoizedState;if(r=a.element,s.isDehydrated){if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=Ma(e,t,r,n,i=ra(Error(o(423)),t));break e}if(r!==i){t=Ma(e,t,r,n,i=ra(Error(o(424)),t));break e}for(Ji=ni(t.stateNode.containerInfo.firstChild),Qi=t,Zi=!0,$i=null,n=zo(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(so(),r===i){t=Ua(e,t,n);break e}pa(e,t,r,n)}t=t.child}return t;case 5:return Xo(t),null===e&&no(t),r=t.type,i=t.pendingProps,s=null!==e?e.memoizedProps:null,a=i.children,Qr(r,i)?a=null:null!==s&&Qr(r,s)&&(t.flags|=32),ya(e,t),pa(e,t,a,n),t.child;case 6:return null===e&&no(t),null;case 13:return xa(e,t,n);case 4:return Zo(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Go(t,null,r,n):pa(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,ma(e,t,r,i=t.elementType===r?i:co(r,i),n);case 7:return pa(e,t,t.pendingProps,n),t.child;case 8:case 12:return pa(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,a=i.value,yi(lo,r._currentValue),r._currentValue=a,null!==s)if(tr(s.value,a)){if(s.children===i.children&&!Ei.current){t=Ua(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var u=s.dependencies;if(null!==u){a=s.child;for(var c=u.firstContext;null!==c;){if(c.context===r){if(1===s.tag){(c=Co(-1,n&-n)).tag=2;var l=s.updateQueue;if(null!==l){var h=(l=l.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),l.pending=c}}s.lanes|=n,null!==(c=s.alternate)&&(c.lanes|=n),bo(s.return,n,t),u.lanes|=n;break}c=c.next}}else if(10===s.tag)a=s.type===t.type?null:s.child;else if(18===s.tag){if(null===(a=s.return))throw Error(o(341));a.lanes|=n,null!==(u=a.alternate)&&(u.lanes|=n),bo(a,n,t),a=s.sibling}else a=s.child;if(null!==a)a.return=s;else for(a=s;null!==a;){if(a===t){a=null;break}if(null!==(s=a.sibling)){s.return=a.return,a=s;break}a=a.return}s=a}pa(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,vo(t,n),r=r(i=yo(i)),t.flags|=1,pa(e,t,r,n),t.child;case 14:return i=co(r=t.type,t.pendingProps),ga(e,t,r,i=co(r.type,i),n);case 15:return ba(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:co(r,i),Da(e,t),t.tag=1,Oi(r)?(e=!0,ki(t)):e=!1,vo(t,n),Uo(t,r,i),Fo(t,r,i,n),Ea(null,t,r,!0,e,n);case 19:return Pa(e,t,n);case 22:return va(e,t,n)}throw Error(o(156,t.tag))};var Lc="function"==typeof reportError?reportError:function(e){console.error(e)};function Fc(e){this._internalRoot=e}function Bc(e){this._internalRoot=e}function Hc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function qc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Vc(){}function Gc(e,t,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if("function"==typeof i){var a=i;i=function(){var e=Pc(s);a.call(e)}}Nc(t,s,e,i)}else s=function(e,t,n,r,i){if(i){if("function"==typeof r){var o=r;r=function(){var e=Pc(s);o.call(e)}}var s=Rc(t,r,e,0,null,!1,0,"",Vc);return e._reactRootContainer=s,e[ai]=s.current,Pr(8===e.nodeType?e.parentNode:e),ec(),s}for(;i=e.lastChild;)e.removeChild(i);if("function"==typeof r){var a=r;r=function(){var e=Pc(u);a.call(e)}}var u=xc(e,0,!1,null,0,!1,0,"",Vc);return e._reactRootContainer=u,e[ai]=u.current,Pr(8===e.nodeType?e.parentNode:e),ec((function(){Nc(t,u,n,r)})),u}(n,t,e,i,r);return Pc(s)}Bc.prototype.render=Fc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));Nc(e,t,null,null)},Bc.prototype.unmount=Fc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;ec((function(){Nc(null,e,null,null)})),t[ai]=null}},Bc.prototype.unstable_scheduleHydration=function(e){if(e){var t=wt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<xt.length&&0!==t&&t<xt[n].priority;n++);xt.splice(n,0,e),0===n&&Nt(e)}},vt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ut(t.pendingLanes);0!==n&&(mt(t,1|n),Ku(t,Ye()),0==(6&vu)&&(Iu=Ye()+500,Pi()))}break;case 13:ec((function(){var t=So(e,1);if(null!==t){var n=Gu();Wu(t,e,1,n)}})),Uc(e,1)}},yt=function(e){if(13===e.tag){var t=So(e,134217728);if(null!==t)Wu(t,e,134217728,Gu());Uc(e,134217728)}},_t=function(e){if(13===e.tag){var t=zu(e),n=So(e,t);if(null!==n)Wu(n,e,t,Gu());Uc(e,t)}},wt=function(){return gt},Et=function(e,t){var n=gt;try{return gt=e,t()}finally{gt=n}},_e=function(e,t,n){switch(t){case"input":if(Z(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=pi(r);if(!i)throw Error(o(90));W(r),Z(r,i)}}}break;case"textarea":ie(e,n);break;case"select":null!=(t=n.value)&&te(e,!!n.multiple,t,!1)}},Ae=Xu,Ce=ec;var zc={usingClientEntryPoint:!1,Events:[di,fi,pi,Me,Oe,Xu]},Wc={findFiberByHostInstance:hi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},Kc={bundleType:Wc.bundleType,version:Wc.version,rendererPackageName:Wc.rendererPackageName,rendererConfig:Wc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ve(e))?null:e.stateNode},findFiberByHostInstance:Wc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Yc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Yc.isDisabled&&Yc.supportsFiber)try{tt=Yc.inject(Kc),nt=Yc}catch(e){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zc,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Hc(t))throw Error(o(200));return jc(e,t,null,n)},t.createRoot=function(e,t){if(!Hc(e))throw Error(o(299));var n=!1,r="",i=Lc;return null!=t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=xc(e,1,!1,null,0,n,0,r,i),e[ai]=t.current,Pr(8===e.nodeType?e.parentNode:e),new Fc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=null===(e=Ve(t))?null:e.stateNode},t.flushSync=function(e){return ec(e)},t.hydrate=function(e,t,n){if(!qc(t))throw Error(o(200));return Gc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Hc(e))throw Error(o(405));var r=null!=n&&n.hydratedSources||null,i=!1,s="",a=Lc;if(null!=n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(s=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=Rc(t,null,e,1,null!=n?n:null,i,0,s,a),e[ai]=t.current,Pr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Bc(t)},t.render=function(e,t,n){if(!qc(t))throw Error(o(200));return Gc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!qc(e))throw Error(o(40));return!!e._reactRootContainer&&(ec((function(){Gc(null,null,e,!1,(function(){e._reactRootContainer=null,e[ai]=null}))})),!0)},t.unstable_batchedUpdates=Xu,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!qc(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return Gc(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},function(e,t,n){"use strict";e.exports=n(177)},function(e,t,n){"use strict";(function(e){
/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<o(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,s=i>>>1;r<s;){var a=2*(r+1)-1,u=e[a],c=a+1,l=e[c];if(0>o(u,n))c<i&&0>o(l,u)?(e[r]=l,e[c]=n,r=c):(e[r]=u,e[a]=n,r=a);else{if(!(c<i&&0>o(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"==typeof performance&&"function"==typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,u=a.now();t.unstable_now=function(){return a.now()-u}}var c=[],l=[],h=1,d=null,f=3,p=!1,m=!1,g=!1,b="function"==typeof setTimeout?setTimeout:null,v="function"==typeof clearTimeout?clearTimeout:null,y=void 0!==e?e:null;function _(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function w(e){if(g=!1,_(e),!m)if(null!==r(c))m=!0,R(E);else{var t=r(l);null!==t&&N(w,t.startTime-e)}}function E(e,n){m=!1,g&&(g=!1,v(A),A=-1),p=!0;var o=f;try{for(_(n),d=r(c);null!==d&&(!(d.expirationTime>n)||e&&!k());){var s=d.callback;if("function"==typeof s){d.callback=null,f=d.priorityLevel;var a=s(d.expirationTime<=n);n=t.unstable_now(),"function"==typeof a?d.callback=a:d===r(c)&&i(c),_(n)}else i(c);d=r(c)}if(null!==d)var u=!0;else{var h=r(l);null!==h&&N(w,h.startTime-n),u=!1}return u}finally{d=null,f=o,p=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,M=!1,O=null,A=-1,C=5,T=-1;function k(){return!(t.unstable_now()-T<C)}function x(){if(null!==O){var e=t.unstable_now();T=e;var n=!0;try{n=O(!0,e)}finally{n?S():(M=!1,O=null)}}else M=!1}if("function"==typeof y)S=function(){y(x)};else if("undefined"!=typeof MessageChannel){var j=new MessageChannel,I=j.port2;j.port1.onmessage=x,S=function(){I.postMessage(null)}}else S=function(){b(x,0)};function R(e){O=e,M||(M=!0,S())}function N(e,n){A=b((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,R(E))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,o){var s=t.unstable_now();switch("object"==typeof o&&null!==o?o="number"==typeof(o=o.delay)&&0<o?s+o:s:o=s,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:o,expirationTime:a=o+a,sortIndex:-1},o>s?(e.sortIndex=o,n(l,e),null===r(c)&&e===r(l)&&(g?(v(A),A=-1):g=!0,N(w,o-s))):(e.sortIndex=a,n(c,e),m||p||(m=!0,R(E))),e},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}}).call(this,n(98).setImmediate)},function(e,t,n){(function(e,t){!function(e,n){"use strict";if(!e.setImmediate){var r,i,o,s,a,u=1,c={},l=!1,h=e.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(e);d=d&&d.setTimeout?d:e,"[object process]"==={}.toString.call(e.process)?r=function(e){t.nextTick((function(){p(e)}))}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?e.MessageChannel?((o=new MessageChannel).port1.onmessage=function(e){p(e.data)},r=function(e){o.port2.postMessage(e)}):h&&"onreadystatechange"in h.createElement("script")?(i=h.documentElement,r=function(e){var t=h.createElement("script");t.onreadystatechange=function(){p(e),t.onreadystatechange=null,i.removeChild(t),t=null},i.appendChild(t)}):r=function(e){setTimeout(p,0,e)}:(s="setImmediate$"+Math.random()+"$",a=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(s)&&p(+t.data.slice(s.length))},e.addEventListener?e.addEventListener("message",a,!1):e.attachEvent("onmessage",a),r=function(t){e.postMessage(s+t,"*")}),d.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var i={callback:e,args:t};return c[u]=i,r(u),u++},d.clearImmediate=f}function f(e){delete c[e]}function p(e){if(l)setTimeout(p,0,e);else{var t=c[e];if(t){l=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(void 0,n)}}(t)}finally{f(e),l=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,n(19),n(16))},function(e,t,n){"use strict";
/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=n(2);var i="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},o=r.useState,s=r.useEffect,a=r.useLayoutEffect,u=r.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!i(e,n)}catch(e){return!0}}var l="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=o({inst:{value:n,getSnapshot:t}}),i=r[0].inst,l=r[1];return a((function(){i.value=n,i.getSnapshot=t,c(i)&&l({inst:i})}),[e,n,t]),s((function(){return c(i)&&l({inst:i}),e((function(){c(i)&&l({inst:i})}))}),[e]),u(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:l},function(e,t,n){"use strict";
/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=n(2),i=n(94);var o="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},s=i.useSyncExternalStore,a=r.useRef,u=r.useEffect,c=r.useMemo,l=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var h=a(null);if(null===h.current){var d={hasValue:!1,value:null};h.current=d}else d=h.current;h=c((function(){function e(e){if(!u){if(u=!0,s=e,e=r(e),void 0!==i&&d.hasValue){var t=d.value;if(i(t,e))return a=t}return a=e}if(t=a,o(s,e))return t;var n=r(e);return void 0!==i&&i(t,n)?t:(s=e,a=n)}var s,a,u=!1,c=void 0===n?null:n;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]}),[t,n,r,i]);var f=s(e,h[0],h[1]);return u((function(){d.hasValue=!0,d.value=f}),[f]),l(f),f}},function(e,t,n){"use strict";e.exports=n(182)},function(e,t,n){"use strict";
/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r="function"==typeof Symbol&&Symbol.for,i=r?Symbol.for("react.element"):60103,o=r?Symbol.for("react.portal"):60106,s=r?Symbol.for("react.fragment"):60107,a=r?Symbol.for("react.strict_mode"):60108,u=r?Symbol.for("react.profiler"):60114,c=r?Symbol.for("react.provider"):60109,l=r?Symbol.for("react.context"):60110,h=r?Symbol.for("react.async_mode"):60111,d=r?Symbol.for("react.concurrent_mode"):60111,f=r?Symbol.for("react.forward_ref"):60112,p=r?Symbol.for("react.suspense"):60113,m=r?Symbol.for("react.suspense_list"):60120,g=r?Symbol.for("react.memo"):60115,b=r?Symbol.for("react.lazy"):60116,v=r?Symbol.for("react.block"):60121,y=r?Symbol.for("react.fundamental"):60117,_=r?Symbol.for("react.responder"):60118,w=r?Symbol.for("react.scope"):60119;function E(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case i:switch(e=e.type){case h:case d:case s:case u:case a:case p:return e;default:switch(e=e&&e.$$typeof){case l:case f:case b:case g:case c:return e;default:return t}}case o:return t}}}function S(e){return E(e)===d}t.AsyncMode=h,t.ConcurrentMode=d,t.ContextConsumer=l,t.ContextProvider=c,t.Element=i,t.ForwardRef=f,t.Fragment=s,t.Lazy=b,t.Memo=g,t.Portal=o,t.Profiler=u,t.StrictMode=a,t.Suspense=p,t.isAsyncMode=function(e){return S(e)||E(e)===h},t.isConcurrentMode=S,t.isContextConsumer=function(e){return E(e)===l},t.isContextProvider=function(e){return E(e)===c},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===i},t.isForwardRef=function(e){return E(e)===f},t.isFragment=function(e){return E(e)===s},t.isLazy=function(e){return E(e)===b},t.isMemo=function(e){return E(e)===g},t.isPortal=function(e){return E(e)===o},t.isProfiler=function(e){return E(e)===u},t.isStrictMode=function(e){return E(e)===a},t.isSuspense=function(e){return E(e)===p},t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===s||e===d||e===u||e===a||e===p||e===m||"object"==typeof e&&null!==e&&(e.$$typeof===b||e.$$typeof===g||e.$$typeof===c||e.$$typeof===l||e.$$typeof===f||e.$$typeof===y||e.$$typeof===_||e.$$typeof===w||e.$$typeof===v)},t.typeOf=E},function(e,t,n){"use strict";
/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r,i=Symbol.for("react.element"),o=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),l=Symbol.for("react.context"),h=Symbol.for("react.server_context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),p=Symbol.for("react.suspense_list"),m=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),b=Symbol.for("react.offscreen");function v(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case i:switch(e=e.type){case s:case u:case a:case f:case p:return e;default:switch(e=e&&e.$$typeof){case h:case l:case d:case g:case m:case c:return e;default:return t}}case o:return t}}}r=Symbol.for("react.module.reference"),t.ContextConsumer=l,t.ContextProvider=c,t.Element=i,t.ForwardRef=d,t.Fragment=s,t.Lazy=g,t.Memo=m,t.Portal=o,t.Profiler=u,t.StrictMode=a,t.Suspense=f,t.SuspenseList=p,t.isAsyncMode=function(){return!1},t.isConcurrentMode=function(){return!1},t.isContextConsumer=function(e){return v(e)===l},t.isContextProvider=function(e){return v(e)===c},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===i},t.isForwardRef=function(e){return v(e)===d},t.isFragment=function(e){return v(e)===s},t.isLazy=function(e){return v(e)===g},t.isMemo=function(e){return v(e)===m},t.isPortal=function(e){return v(e)===o},t.isProfiler=function(e){return v(e)===u},t.isStrictMode=function(e){return v(e)===a},t.isSuspense=function(e){return v(e)===f},t.isSuspenseList=function(e){return v(e)===p},t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===s||e===u||e===a||e===f||e===p||e===b||"object"==typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===m||e.$$typeof===c||e.$$typeof===l||e.$$typeof===d||e.$$typeof===r||void 0!==e.getModuleId)},t.typeOf=v},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t,n){n(186),e.exports=self.fetch.bind(self)},function(e,t,n){"use strict";n.r(t),n.d(t,"Headers",(function(){return p})),n.d(t,"Request",(function(){return w})),n.d(t,"Response",(function(){return S})),n.d(t,"DOMException",(function(){return O})),n.d(t,"fetch",(function(){return A}));var r="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==r&&r,i="URLSearchParams"in r,o="Symbol"in r&&"iterator"in Symbol,s="FileReader"in r&&"Blob"in r&&function(){try{return new Blob,!0}catch(e){return!1}}(),a="FormData"in r,u="ArrayBuffer"in r;if(u)var c=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],l=ArrayBuffer.isView||function(e){return e&&c.indexOf(Object.prototype.toString.call(e))>-1};function h(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw new TypeError('Invalid character in header field name: "'+e+'"');return e.toLowerCase()}function d(e){return"string"!=typeof e&&(e=String(e)),e}function f(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return o&&(t[Symbol.iterator]=function(){return t}),t}function p(e){this.map={},e instanceof p?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function m(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function g(e){return new Promise((function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function b(e){var t=new FileReader,n=g(t);return t.readAsArrayBuffer(e),n}function v(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function y(){return this.bodyUsed=!1,this._initBody=function(e){var t;this.bodyUsed=this.bodyUsed,this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:s&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:a&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:i&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():u&&s&&((t=e)&&DataView.prototype.isPrototypeOf(t))?(this._bodyArrayBuffer=v(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):u&&(ArrayBuffer.prototype.isPrototypeOf(e)||l(e))?this._bodyArrayBuffer=v(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):i&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},s&&(this.blob=function(){var e=m(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer){var e=m(this);return e||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}return this.blob().then(b)}),this.text=function(){var e,t,n,r=m(this);if(r)return r;if(this._bodyBlob)return e=this._bodyBlob,t=new FileReader,n=g(t),t.readAsText(e),n;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},a&&(this.formData=function(){return this.text().then(E)}),this.json=function(){return this.text().then(JSON.parse)},this}p.prototype.append=function(e,t){e=h(e),t=d(t);var n=this.map[e];this.map[e]=n?n+", "+t:t},p.prototype.delete=function(e){delete this.map[h(e)]},p.prototype.get=function(e){return e=h(e),this.has(e)?this.map[e]:null},p.prototype.has=function(e){return this.map.hasOwnProperty(h(e))},p.prototype.set=function(e,t){this.map[h(e)]=d(t)},p.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},p.prototype.keys=function(){var e=[];return this.forEach((function(t,n){e.push(n)})),f(e)},p.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),f(e)},p.prototype.entries=function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),f(e)},o&&(p.prototype[Symbol.iterator]=p.prototype.entries);var _=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function w(e,t){if(!(this instanceof w))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var n,r,i=(t=t||{}).body;if(e instanceof w){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new p(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,i||null==e._bodyInit||(i=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new p(t.headers)),this.method=(n=t.method||this.method||"GET",r=n.toUpperCase(),_.indexOf(r)>-1?r:n),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(i),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==t.cache&&"no-cache"!==t.cache)){var o=/([?&])_=[^&]*/;if(o.test(this.url))this.url=this.url.replace(o,"$1_="+(new Date).getTime());else{this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}}function E(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(i))}})),t}function S(e,t){if(!(this instanceof S))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText=void 0===t.statusText?"":""+t.statusText,this.headers=new p(t.headers),this.url=t.url||"",this._initBody(e)}w.prototype.clone=function(){return new w(this,{body:this._bodyInit})},y.call(w.prototype),y.call(S.prototype),S.prototype.clone=function(){return new S(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new p(this.headers),url:this.url})},S.error=function(){var e=new S(null,{status:0,statusText:""});return e.type="error",e};var M=[301,302,303,307,308];S.redirect=function(e,t){if(-1===M.indexOf(t))throw new RangeError("Invalid status code");return new S(null,{status:t,headers:{location:e}})};var O=r.DOMException;try{new O}catch(e){(O=function(e,t){this.message=e,this.name=t;var n=Error(e);this.stack=n.stack}).prototype=Object.create(Error.prototype),O.prototype.constructor=O}function A(e,t){return new Promise((function(n,i){var o=new w(e,t);if(o.signal&&o.signal.aborted)return i(new O("Aborted","AbortError"));var a=new XMLHttpRequest;function c(){a.abort()}a.onload=function(){var e,t,r={status:a.status,statusText:a.statusText,headers:(e=a.getAllResponseHeaders()||"",t=new p,e.replace(/\r?\n[\t ]+/g," ").split("\r").map((function(e){return 0===e.indexOf("\n")?e.substr(1,e.length):e})).forEach((function(e){var n=e.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();t.append(r,i)}})),t)};r.url="responseURL"in a?a.responseURL:r.headers.get("X-Request-URL");var i="response"in a?a.response:a.responseText;setTimeout((function(){n(new S(i,r))}),0)},a.onerror=function(){setTimeout((function(){i(new TypeError("Network request failed"))}),0)},a.ontimeout=function(){setTimeout((function(){i(new TypeError("Network request failed"))}),0)},a.onabort=function(){setTimeout((function(){i(new O("Aborted","AbortError"))}),0)},a.open(o.method,function(e){try{return""===e&&r.location.href?r.location.href:e}catch(t){return e}}(o.url),!0),"include"===o.credentials?a.withCredentials=!0:"omit"===o.credentials&&(a.withCredentials=!1),"responseType"in a&&(s?a.responseType="blob":u&&o.headers.get("Content-Type")&&-1!==o.headers.get("Content-Type").indexOf("application/octet-stream")&&(a.responseType="arraybuffer")),!t||"object"!=typeof t.headers||t.headers instanceof p?o.headers.forEach((function(e,t){a.setRequestHeader(t,e)})):Object.getOwnPropertyNames(t.headers).forEach((function(e){a.setRequestHeader(e,d(t.headers[e]))})),o.signal&&(o.signal.addEventListener("abort",c),a.onreadystatechange=function(){4===a.readyState&&o.signal.removeEventListener("abort",c)}),a.send(void 0===o._bodyInit?null:o._bodyInit)}))}A.polyfill=!0,r.fetch||(r.fetch=A,r.Headers=p,r.Request=w,r.Response=S)},function(e,t,n){var r=n(8).Buffer,i=n(101),o=n(106),s=n(57),a=n(155),u=n(59);function c(e,t){return r.from(e,t).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function l(e){var t=e.header,n=e.payload,r=e.secret||e.privateKey,i=e.encoding,s=o(t.alg),l=function(e,t,n){n=n||"utf8";var r=c(a(e),"binary"),i=c(a(t),n);return u.format("%s.%s",r,i)}(t,n,i),h=s.sign(l,r);return u.format("%s.%s",l,h)}function h(e){var t=e.secret||e.privateKey||e.key,n=new i(t);this.readable=!0,this.header=e.header,this.encoding=e.encoding,this.secret=this.privateKey=this.key=n,this.payload=new i(e.payload),this.secret.once("close",function(){!this.payload.writable&&this.readable&&this.sign()}.bind(this)),this.payload.once("close",function(){!this.secret.writable&&this.readable&&this.sign()}.bind(this))}u.inherits(h,s),h.prototype.sign=function(){try{var e=l({header:this.header,payload:this.payload.buffer,secret:this.secret.buffer,encoding:this.encoding});return this.emit("done",e),this.emit("data",e),this.emit("end"),this.readable=!1,e}catch(e){this.readable=!1,this.emit("error",e),this.emit("close")}},h.sign=l,e.exports=h},function(e,t,n){"use strict";t.byteLength=function(e){var t=c(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,r=c(e),s=r[0],a=r[1],u=new o(function(e,t,n){return 3*(t+n)/4-n}(0,s,a)),l=0,h=a>0?s-4:s;for(n=0;n<h;n+=4)t=i[e.charCodeAt(n)]<<18|i[e.charCodeAt(n+1)]<<12|i[e.charCodeAt(n+2)]<<6|i[e.charCodeAt(n+3)],u[l++]=t>>16&255,u[l++]=t>>8&255,u[l++]=255&t;2===a&&(t=i[e.charCodeAt(n)]<<2|i[e.charCodeAt(n+1)]>>4,u[l++]=255&t);1===a&&(t=i[e.charCodeAt(n)]<<10|i[e.charCodeAt(n+1)]<<4|i[e.charCodeAt(n+2)]>>2,u[l++]=t>>8&255,u[l++]=255&t);return u},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,o=[],s=0,a=n-i;s<a;s+=16383)o.push(l(e,s,s+16383>a?a:s+16383));1===i?(t=e[n-1],o.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],o.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"="));return o.join("")};for(var r=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,u=s.length;a<u;++a)r[a]=s[a],i[s.charCodeAt(a)]=a;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function l(e,t,n){for(var i,o,s=[],a=t;a<n;a+=3)i=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),s.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return s.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(e,t){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
t.read=function(e,t,n,r,i){var o,s,a=8*i-r-1,u=(1<<a)-1,c=u>>1,l=-7,h=n?i-1:0,d=n?-1:1,f=e[t+h];for(h+=d,o=f&(1<<-l)-1,f>>=-l,l+=a;l>0;o=256*o+e[t+h],h+=d,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=r;l>0;s=256*s+e[t+h],h+=d,l-=8);if(0===o)o=1-c;else{if(o===u)return s?NaN:1/0*(f?-1:1);s+=Math.pow(2,r),o-=c}return(f?-1:1)*s*Math.pow(2,o-r)},t.write=function(e,t,n,r,i,o){var s,a,u,c=8*o-i-1,l=(1<<c)-1,h=l>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:o-1,p=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=l):(s=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-s))<1&&(s--,u*=2),(t+=s+h>=1?d/u:d*Math.pow(2,1-h))*u>=2&&(s++,u/=2),s+h>=l?(a=0,s=l):s+h>=1?(a=(t*u-1)*Math.pow(2,i),s+=h):(a=t*Math.pow(2,h-1)*Math.pow(2,i),s=0));i>=8;e[n+f]=255&a,f+=p,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;e[n+f]=255&s,f+=p,s/=256,c-=8);e[n+f-p]|=128*m}},function(e,t){},function(e,t,n){"use strict";var r=n(72).Buffer,i=n(192);e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n},e.prototype.concat=function(e){if(0===this.length)return r.alloc(0);if(1===this.length)return this.head.data;for(var t,n,i,o=r.allocUnsafe(e>>>0),s=this.head,a=0;s;)t=s.data,n=o,i=a,t.copy(n,i),a+=s.data.length,s=s.next;return o},e}(),i&&i.inspect&&i.inspect.custom&&(e.exports.prototype[i.inspect.custom]=function(){var e=i.inspect({length:this.length});return this.constructor.name+" "+e})},function(e,t){},function(e,t,n){var r=n(17),i=r.Buffer;function o(e,t){for(var n in e)t[n]=e[n]}function s(e,t,n){return i(e,t,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=r:(o(r,t),t.Buffer=s),o(i,s),s.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,n)},s.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=i(e);return void 0!==t?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},s.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},s.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}},function(e,t,n){"use strict";e.exports=o;var r=n(105),i=Object.create(n(50));function o(e){if(!(this instanceof o))return new o(e);r.call(this,e)}i.inherits=n(7),i.inherits(o,r),o.prototype._transform=function(e,t,n){n(null,e)}},function(e,t,n){e.exports=n(73)},function(e,t,n){e.exports=n(37)},function(e,t,n){e.exports=n(71).Transform},function(e,t,n){e.exports=n(71).PassThrough},function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t,n){"use strict";var r=n(17).Buffer,i=n(17).SlowBuffer;function o(e,t){if(!r.isBuffer(e)||!r.isBuffer(t))return!1;if(e.length!==t.length)return!1;for(var n=0,i=0;i<e.length;i++)n|=e[i]^t[i];return 0===n}e.exports=o,o.install=function(){r.prototype.equal=i.prototype.equal=function(e){return o(this,e)}};var s=r.prototype.equal,a=i.prototype.equal;o.restore=function(){r.prototype.equal=s,i.prototype.equal=a}},function(e,t,n){"use strict";t.randomBytes=t.rng=t.pseudoRandomBytes=t.prng=n(43),t.createHash=t.Hash=n(51),t.createHmac=t.Hmac=n(116);var r=n(216),i=Object.keys(r),o=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(i);t.getHashes=function(){return o};var s=n(119);t.pbkdf2=s.pbkdf2,t.pbkdf2Sync=s.pbkdf2Sync;var a=n(218);t.Cipher=a.Cipher,t.createCipher=a.createCipher,t.Cipheriv=a.Cipheriv,t.createCipheriv=a.createCipheriv,t.Decipher=a.Decipher,t.createDecipher=a.createDecipher,t.Decipheriv=a.Decipheriv,t.createDecipheriv=a.createDecipheriv,t.getCiphers=a.getCiphers,t.listCiphers=a.listCiphers;var u=n(233);t.DiffieHellmanGroup=u.DiffieHellmanGroup,t.createDiffieHellmanGroup=u.createDiffieHellmanGroup,t.getDiffieHellman=u.getDiffieHellman,t.createDiffieHellman=u.createDiffieHellman,t.DiffieHellman=u.DiffieHellman;var c=n(240);t.createSign=c.createSign,t.Sign=c.Sign,t.createVerify=c.createVerify,t.Verify=c.Verify,t.createECDH=n(281);var l=n(284);t.publicEncrypt=l.publicEncrypt,t.privateEncrypt=l.privateEncrypt,t.publicDecrypt=l.publicDecrypt,t.privateDecrypt=l.privateDecrypt;var h=n(288);t.randomFill=h.randomFill,t.randomFillSync=h.randomFillSync,t.createCredentials=function(){throw new Error(["sorry, createCredentials is not implemented yet","we accept pull requests","https://github.com/crypto-browserify/crypto-browserify"].join("\n"))},t.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6}},function(e,t,n){(t=e.exports=n(108)).Stream=t,t.Readable=t,t.Writable=n(112),t.Duplex=n(45),t.Transform=n(113),t.PassThrough=n(209),t.finished=n(76),t.pipeline=n(210)},function(e,t){},function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=n(17).Buffer,a=n(206).inspect,u=a&&a.custom||"inspect";e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}var t,n,c;return t=e,(n=[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n}},{key:"concat",value:function(e){if(0===this.length)return s.alloc(0);for(var t,n,r,i=s.allocUnsafe(e>>>0),o=this.head,a=0;o;)t=o.data,n=i,r=a,s.prototype.copy.call(t,n,r),a+=o.data.length,o=o.next;return i}},{key:"consume",value:function(e,t){var n;return e<this.head.data.length?(n=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):n=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),n}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,n=1,r=t.data;for(e-=r.length;t=t.next;){var i=t.data,o=e>i.length?i.length:e;if(o===i.length?r+=i:r+=i.slice(0,e),0==(e-=o)){o===i.length?(++n,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=i.slice(o));break}++n}return this.length-=n,r}},{key:"_getBuffer",value:function(e){var t=s.allocUnsafe(e),n=this.head,r=1;for(n.data.copy(t),e-=n.data.length;n=n.next;){var i=n.data,o=e>i.length?i.length:e;if(i.copy(t,t.length-e,0,o),0==(e-=o)){o===i.length?(++r,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=i.slice(o));break}++r}return this.length-=r,t}},{key:u,value:function(e,t){return a(this,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,{depth:0,customInspect:!1}))}}])&&o(t.prototype,n),c&&o(t,c),e}()},function(e,t){},function(e,t,n){"use strict";(function(t){var r;function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=n(76),s=Symbol("lastResolve"),a=Symbol("lastReject"),u=Symbol("error"),c=Symbol("ended"),l=Symbol("lastPromise"),h=Symbol("handlePromise"),d=Symbol("stream");function f(e,t){return{value:e,done:t}}function p(e){var t=e[s];if(null!==t){var n=e[d].read();null!==n&&(e[l]=null,e[s]=null,e[a]=null,t(f(n,!1)))}}function m(e){t.nextTick(p,e)}var g=Object.getPrototypeOf((function(){})),b=Object.setPrototypeOf((i(r={get stream(){return this[d]},next:function(){var e=this,n=this[u];if(null!==n)return Promise.reject(n);if(this[c])return Promise.resolve(f(void 0,!0));if(this[d].destroyed)return new Promise((function(n,r){t.nextTick((function(){e[u]?r(e[u]):n(f(void 0,!0))}))}));var r,i=this[l];if(i)r=new Promise(function(e,t){return function(n,r){e.then((function(){t[c]?n(f(void 0,!0)):t[h](n,r)}),r)}}(i,this));else{var o=this[d].read();if(null!==o)return Promise.resolve(f(o,!1));r=new Promise(this[h])}return this[l]=r,r}},Symbol.asyncIterator,(function(){return this})),i(r,"return",(function(){var e=this;return new Promise((function(t,n){e[d].destroy(null,(function(e){e?n(e):t(f(void 0,!0))}))}))})),r),g);e.exports=function(e){var t,n=Object.create(b,(i(t={},d,{value:e,writable:!0}),i(t,s,{value:null,writable:!0}),i(t,a,{value:null,writable:!0}),i(t,u,{value:null,writable:!0}),i(t,c,{value:e._readableState.endEmitted,writable:!0}),i(t,h,{value:function(e,t){var r=n[d].read();r?(n[l]=null,n[s]=null,n[a]=null,e(f(r,!1))):(n[s]=e,n[a]=t)},writable:!0}),t));return n[l]=null,o(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=n[a];return null!==t&&(n[l]=null,n[s]=null,n[a]=null,t(e)),void(n[u]=e)}var r=n[s];null!==r&&(n[l]=null,n[s]=null,n[a]=null,r(f(void 0,!0))),n[c]=!0})),e.on("readable",m.bind(null,n)),n}}).call(this,n(16))},function(e,t){e.exports=function(){throw new Error("Readable.from is not available in the browser")}},function(e,t,n){"use strict";e.exports=i;var r=n(113);function i(e){if(!(this instanceof i))return new i(e);r.call(this,e)}n(7)(i,r),i.prototype._transform=function(e,t,n){n(null,e)}},function(e,t,n){"use strict";var r;var i=n(44).codes,o=i.ERR_MISSING_ARGS,s=i.ERR_STREAM_DESTROYED;function a(e){if(e)throw e}function u(e,t,i,o){o=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(o);var a=!1;e.on("close",(function(){a=!0})),void 0===r&&(r=n(76)),r(e,{readable:t,writable:i},(function(e){if(e)return o(e);a=!0,o()}));var u=!1;return function(t){if(!a&&!u)return u=!0,function(e){return e.setHeader&&"function"==typeof e.abort}(e)?e.abort():"function"==typeof e.destroy?e.destroy():void o(t||new s("pipe"))}}function c(e){e()}function l(e,t){return e.pipe(t)}function h(e){return e.length?"function"!=typeof e[e.length-1]?a:e.pop():a}e.exports=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,i=h(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new o("streams");var s=t.map((function(e,n){var o=n<t.length-1;return u(e,o,n>0,(function(e){r||(r=e),e&&s.forEach(c),o||(s.forEach(c),i(r))}))}));return t.reduce(l)}},function(e,t,n){var r=n(7),i=n(46),o=n(8).Buffer,s=[1518500249,1859775393,-1894007588,-899497514],a=new Array(80);function u(){this.init(),this._w=a,i.call(this,64,56)}function c(e){return e<<30|e>>>2}function l(e,t,n,r){return 0===e?t&n|~t&r:2===e?t&n|t&r|n&r:t^n^r}r(u,i),u.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},u.prototype._update=function(e){for(var t,n=this._w,r=0|this._a,i=0|this._b,o=0|this._c,a=0|this._d,u=0|this._e,h=0;h<16;++h)n[h]=e.readInt32BE(4*h);for(;h<80;++h)n[h]=n[h-3]^n[h-8]^n[h-14]^n[h-16];for(var d=0;d<80;++d){var f=~~(d/20),p=0|((t=r)<<5|t>>>27)+l(f,i,o,a)+u+n[d]+s[f];u=a,a=o,o=c(i),i=r,r=p}this._a=r+this._a|0,this._b=i+this._b|0,this._c=o+this._c|0,this._d=a+this._d|0,this._e=u+this._e|0},u.prototype._hash=function(){var e=o.allocUnsafe(20);return e.writeInt32BE(0|this._a,0),e.writeInt32BE(0|this._b,4),e.writeInt32BE(0|this._c,8),e.writeInt32BE(0|this._d,12),e.writeInt32BE(0|this._e,16),e},e.exports=u},function(e,t,n){var r=n(7),i=n(46),o=n(8).Buffer,s=[1518500249,1859775393,-1894007588,-899497514],a=new Array(80);function u(){this.init(),this._w=a,i.call(this,64,56)}function c(e){return e<<5|e>>>27}function l(e){return e<<30|e>>>2}function h(e,t,n,r){return 0===e?t&n|~t&r:2===e?t&n|t&r|n&r:t^n^r}r(u,i),u.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},u.prototype._update=function(e){for(var t,n=this._w,r=0|this._a,i=0|this._b,o=0|this._c,a=0|this._d,u=0|this._e,d=0;d<16;++d)n[d]=e.readInt32BE(4*d);for(;d<80;++d)n[d]=(t=n[d-3]^n[d-8]^n[d-14]^n[d-16])<<1|t>>>31;for(var f=0;f<80;++f){var p=~~(f/20),m=c(r)+h(p,i,o,a)+u+n[f]+s[p]|0;u=a,a=o,o=l(i),i=r,r=m}this._a=r+this._a|0,this._b=i+this._b|0,this._c=o+this._c|0,this._d=a+this._d|0,this._e=u+this._e|0},u.prototype._hash=function(){var e=o.allocUnsafe(20);return e.writeInt32BE(0|this._a,0),e.writeInt32BE(0|this._b,4),e.writeInt32BE(0|this._c,8),e.writeInt32BE(0|this._d,12),e.writeInt32BE(0|this._e,16),e},e.exports=u},function(e,t,n){var r=n(7),i=n(114),o=n(46),s=n(8).Buffer,a=new Array(64);function u(){this.init(),this._w=a,o.call(this,64,56)}r(u,i),u.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},u.prototype._hash=function(){var e=s.allocUnsafe(28);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e},e.exports=u},function(e,t,n){var r=n(7),i=n(115),o=n(46),s=n(8).Buffer,a=new Array(160);function u(){this.init(),this._w=a,o.call(this,128,112)}r(u,i),u.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},u.prototype._hash=function(){var e=s.allocUnsafe(48);function t(t,n,r){e.writeInt32BE(t,r),e.writeInt32BE(n,r+4)}return t(this._ah,this._al,0),t(this._bh,this._bl,8),t(this._ch,this._cl,16),t(this._dh,this._dl,24),t(this._eh,this._el,32),t(this._fh,this._fl,40),e},e.exports=u},function(e,t,n){"use strict";var r=n(7),i=n(8).Buffer,o=n(33),s=i.alloc(128);function a(e,t){o.call(this,"digest"),"string"==typeof t&&(t=i.from(t)),this._alg=e,this._key=t,t.length>64?t=e(t):t.length<64&&(t=i.concat([t,s],64));for(var n=this._ipad=i.allocUnsafe(64),r=this._opad=i.allocUnsafe(64),a=0;a<64;a++)n[a]=54^t[a],r[a]=92^t[a];this._hash=[n]}r(a,o),a.prototype._update=function(e){this._hash.push(e)},a.prototype._final=function(){var e=this._alg(i.concat(this._hash));return this._alg(i.concat([this._opad,e]))},e.exports=a},function(e,t,n){e.exports=n(118)},function(e,t,n){(function(t){var r,i,o=n(8).Buffer,s=n(120),a=n(121),u=n(122),c=n(123),l=t.crypto&&t.crypto.subtle,h={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},d=[];function f(){return i||(i=t.process&&t.process.nextTick?t.process.nextTick:t.queueMicrotask?t.queueMicrotask:t.setImmediate?t.setImmediate:t.setTimeout)}function p(e,t,n,r,i){return l.importKey("raw",e,{name:"PBKDF2"},!1,["deriveBits"]).then((function(e){return l.deriveBits({name:"PBKDF2",salt:t,iterations:n,hash:{name:i}},e,r<<3)})).then((function(e){return o.from(e)}))}e.exports=function(e,n,i,m,g,b){"function"==typeof g&&(b=g,g=void 0);var v=h[(g=g||"sha1").toLowerCase()];if(v&&"function"==typeof t.Promise){if(s(i,m),e=c(e,a,"Password"),n=c(n,a,"Salt"),"function"!=typeof b)throw new Error("No callback provided to pbkdf2");!function(e,t){e.then((function(e){f()((function(){t(null,e)}))}),(function(e){f()((function(){t(e)}))}))}(function(e){if(t.process&&!t.process.browser)return Promise.resolve(!1);if(!l||!l.importKey||!l.deriveBits)return Promise.resolve(!1);if(void 0!==d[e])return d[e];var n=p(r=r||o.alloc(8),r,10,128,e).then((function(){return!0})).catch((function(){return!1}));return d[e]=n,n}(v).then((function(t){return t?p(e,n,i,m,v):u(e,n,i,m,g)})),b)}else f()((function(){var t;try{t=u(e,n,i,m,g)}catch(e){return b(e)}b(null,t)}))}}).call(this,n(19))},function(e,t,n){var r=n(219),i=n(80),o=n(81),s=n(232),a=n(61);function u(e,t,n){if(e=e.toLowerCase(),o[e])return i.createCipheriv(e,t,n);if(s[e])return new r({key:t,iv:n,mode:e});throw new TypeError("invalid suite type")}function c(e,t,n){if(e=e.toLowerCase(),o[e])return i.createDecipheriv(e,t,n);if(s[e])return new r({key:t,iv:n,mode:e,decrypt:!0});throw new TypeError("invalid suite type")}t.createCipher=t.Cipher=function(e,t){var n,r;if(e=e.toLowerCase(),o[e])n=o[e].key,r=o[e].iv;else{if(!s[e])throw new TypeError("invalid suite type");n=8*s[e].key,r=s[e].iv}var i=a(t,!1,n,r);return u(e,i.key,i.iv)},t.createCipheriv=t.Cipheriv=u,t.createDecipher=t.Decipher=function(e,t){var n,r;if(e=e.toLowerCase(),o[e])n=o[e].key,r=o[e].iv;else{if(!s[e])throw new TypeError("invalid suite type");n=8*s[e].key,r=s[e].iv}var i=a(t,!1,n,r);return c(e,i.key,i.iv)},t.createDecipheriv=t.Decipheriv=c,t.listCiphers=t.getCiphers=function(){return Object.keys(s).concat(i.getCiphers())}},function(e,t,n){var r=n(33),i=n(220),o=n(7),s=n(8).Buffer,a={"des-ede3-cbc":i.CBC.instantiate(i.EDE),"des-ede3":i.EDE,"des-ede-cbc":i.CBC.instantiate(i.EDE),"des-ede":i.EDE,"des-cbc":i.CBC.instantiate(i.DES),"des-ecb":i.DES};function u(e){r.call(this);var t,n=e.mode.toLowerCase(),i=a[n];t=e.decrypt?"decrypt":"encrypt";var o=e.key;s.isBuffer(o)||(o=s.from(o)),"des-ede"!==n&&"des-ede-cbc"!==n||(o=s.concat([o,o.slice(0,8)]));var u=e.iv;s.isBuffer(u)||(u=s.from(u)),this._des=i.create({key:o,iv:u,type:t})}a.des=a["des-cbc"],a.des3=a["des-ede3-cbc"],e.exports=u,o(u,r),u.prototype._update=function(e){return s.from(this._des.update(e))},u.prototype._final=function(){return s.from(this._des.final())}},function(e,t,n){"use strict";t.utils=n(124),t.Cipher=n(79),t.DES=n(125),t.CBC=n(221),t.EDE=n(222)},function(e,t,n){"use strict";var r=n(24),i=n(7),o={};function s(e){r.equal(e.length,8,"Invalid IV length"),this.iv=new Array(8);for(var t=0;t<this.iv.length;t++)this.iv[t]=e[t]}t.instantiate=function(e){function t(t){e.call(this,t),this._cbcInit()}i(t,e);for(var n=Object.keys(o),r=0;r<n.length;r++){var s=n[r];t.prototype[s]=o[s]}return t.create=function(e){return new t(e)},t},o._cbcInit=function(){var e=new s(this.options.iv);this._cbcState=e},o._update=function(e,t,n,r){var i=this._cbcState,o=this.constructor.super_.prototype,s=i.iv;if("encrypt"===this.type){for(var a=0;a<this.blockSize;a++)s[a]^=e[t+a];o._update.call(this,s,0,n,r);for(a=0;a<this.blockSize;a++)s[a]=n[r+a]}else{o._update.call(this,e,t,n,r);for(a=0;a<this.blockSize;a++)n[r+a]^=s[a];for(a=0;a<this.blockSize;a++)s[a]=e[t+a]}}},function(e,t,n){"use strict";var r=n(24),i=n(7),o=n(79),s=n(125);function a(e,t){r.equal(t.length,24,"Invalid key length");var n=t.slice(0,8),i=t.slice(8,16),o=t.slice(16,24);this.ciphers="encrypt"===e?[s.create({type:"encrypt",key:n}),s.create({type:"decrypt",key:i}),s.create({type:"encrypt",key:o})]:[s.create({type:"decrypt",key:o}),s.create({type:"encrypt",key:i}),s.create({type:"decrypt",key:n})]}function u(e){o.call(this,e);var t=new a(this.type,this.options.key);this._edeState=t}i(u,o),e.exports=u,u.create=function(e){return new u(e)},u.prototype._update=function(e,t,n,r){var i=this._edeState;i.ciphers[0]._update(e,t,n,r),i.ciphers[1]._update(n,r,n,r),i.ciphers[2]._update(n,r,n,r)},u.prototype._pad=s.prototype._pad,u.prototype._unpad=s.prototype._unpad},function(e,t,n){var r=n(81),i=n(129),o=n(8).Buffer,s=n(130),a=n(33),u=n(60),c=n(61);function l(e,t,n){a.call(this),this._cache=new d,this._cipher=new u.AES(t),this._prev=o.from(n),this._mode=e,this._autopadding=!0}n(7)(l,a),l.prototype._update=function(e){var t,n;this._cache.add(e);for(var r=[];t=this._cache.get();)n=this._mode.encrypt(this,t),r.push(n);return o.concat(r)};var h=o.alloc(16,16);function d(){this.cache=o.allocUnsafe(0)}function f(e,t,n){var a=r[e.toLowerCase()];if(!a)throw new TypeError("invalid suite type");if("string"==typeof t&&(t=o.from(t)),t.length!==a.key/8)throw new TypeError("invalid key length "+t.length);if("string"==typeof n&&(n=o.from(n)),"GCM"!==a.mode&&n.length!==a.iv)throw new TypeError("invalid iv length "+n.length);return"stream"===a.type?new s(a.module,t,n):"auth"===a.type?new i(a.module,t,n):new l(a.module,t,n)}l.prototype._final=function(){var e=this._cache.flush();if(this._autopadding)return e=this._mode.encrypt(this,e),this._cipher.scrub(),e;if(!e.equals(h))throw this._cipher.scrub(),new Error("data not multiple of block length")},l.prototype.setAutoPadding=function(e){return this._autopadding=!!e,this},d.prototype.add=function(e){this.cache=o.concat([this.cache,e])},d.prototype.get=function(){if(this.cache.length>15){var e=this.cache.slice(0,16);return this.cache=this.cache.slice(16),e}return null},d.prototype.flush=function(){for(var e=16-this.cache.length,t=o.allocUnsafe(e),n=-1;++n<e;)t.writeUInt8(e,n);return o.concat([this.cache,t])},t.createCipheriv=f,t.createCipher=function(e,t){var n=r[e.toLowerCase()];if(!n)throw new TypeError("invalid suite type");var i=c(t,!1,n.key,n.iv);return f(e,i.key,i.iv)}},function(e,t){t.encrypt=function(e,t){return e._cipher.encryptBlock(t)},t.decrypt=function(e,t){return e._cipher.decryptBlock(t)}},function(e,t,n){var r=n(52);t.encrypt=function(e,t){var n=r(t,e._prev);return e._prev=e._cipher.encryptBlock(n),e._prev},t.decrypt=function(e,t){var n=e._prev;e._prev=t;var i=e._cipher.decryptBlock(t);return r(i,n)}},function(e,t,n){var r=n(8).Buffer,i=n(52);function o(e,t,n){var o=t.length,s=i(t,e._cache);return e._cache=e._cache.slice(o),e._prev=r.concat([e._prev,n?t:s]),s}t.encrypt=function(e,t,n){for(var i,s=r.allocUnsafe(0);t.length;){if(0===e._cache.length&&(e._cache=e._cipher.encryptBlock(e._prev),e._prev=r.allocUnsafe(0)),!(e._cache.length<=t.length)){s=r.concat([s,o(e,t,n)]);break}i=e._cache.length,s=r.concat([s,o(e,t.slice(0,i),n)]),t=t.slice(i)}return s}},function(e,t,n){var r=n(8).Buffer;function i(e,t,n){var i=e._cipher.encryptBlock(e._prev)[0]^t;return e._prev=r.concat([e._prev.slice(1),r.from([n?t:i])]),i}t.encrypt=function(e,t,n){for(var o=t.length,s=r.allocUnsafe(o),a=-1;++a<o;)s[a]=i(e,t[a],n);return s}},function(e,t,n){var r=n(8).Buffer;function i(e,t,n){for(var r,i,s=-1,a=0;++s<8;)r=t&1<<7-s?128:0,a+=(128&(i=e._cipher.encryptBlock(e._prev)[0]^r))>>s%8,e._prev=o(e._prev,n?r:i);return a}function o(e,t){var n=e.length,i=-1,o=r.allocUnsafe(e.length);for(e=r.concat([e,r.from([t])]);++i<n;)o[i]=e[i]<<1|e[i+1]>>7;return o}t.encrypt=function(e,t,n){for(var o=t.length,s=r.allocUnsafe(o),a=-1;++a<o;)s[a]=i(e,t[a],n);return s}},function(e,t,n){(function(e){var r=n(52);function i(e){return e._prev=e._cipher.encryptBlock(e._prev),e._prev}t.encrypt=function(t,n){for(;t._cache.length<n.length;)t._cache=e.concat([t._cache,i(t)]);var o=t._cache.slice(0,n.length);return t._cache=t._cache.slice(n.length),r(n,o)}}).call(this,n(17).Buffer)},function(e,t,n){var r=n(8).Buffer,i=r.alloc(16,0);function o(e){var t=r.allocUnsafe(16);return t.writeUInt32BE(e[0]>>>0,0),t.writeUInt32BE(e[1]>>>0,4),t.writeUInt32BE(e[2]>>>0,8),t.writeUInt32BE(e[3]>>>0,12),t}function s(e){this.h=e,this.state=r.alloc(16,0),this.cache=r.allocUnsafe(0)}s.prototype.ghash=function(e){for(var t=-1;++t<e.length;)this.state[t]^=e[t];this._multiply()},s.prototype._multiply=function(){for(var e,t,n,r=[(e=this.h).readUInt32BE(0),e.readUInt32BE(4),e.readUInt32BE(8),e.readUInt32BE(12)],i=[0,0,0,0],s=-1;++s<128;){for(0!=(this.state[~~(s/8)]&1<<7-s%8)&&(i[0]^=r[0],i[1]^=r[1],i[2]^=r[2],i[3]^=r[3]),n=0!=(1&r[3]),t=3;t>0;t--)r[t]=r[t]>>>1|(1&r[t-1])<<31;r[0]=r[0]>>>1,n&&(r[0]=r[0]^225<<24)}this.state=o(i)},s.prototype.update=function(e){var t;for(this.cache=r.concat([this.cache,e]);this.cache.length>=16;)t=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(t)},s.prototype.final=function(e,t){return this.cache.length&&this.ghash(r.concat([this.cache,i],16)),this.ghash(o([0,e,0,t])),this.state},e.exports=s},function(e,t,n){var r=n(129),i=n(8).Buffer,o=n(81),s=n(130),a=n(33),u=n(60),c=n(61);function l(e,t,n){a.call(this),this._cache=new h,this._last=void 0,this._cipher=new u.AES(t),this._prev=i.from(n),this._mode=e,this._autopadding=!0}function h(){this.cache=i.allocUnsafe(0)}function d(e,t,n){var a=o[e.toLowerCase()];if(!a)throw new TypeError("invalid suite type");if("string"==typeof n&&(n=i.from(n)),"GCM"!==a.mode&&n.length!==a.iv)throw new TypeError("invalid iv length "+n.length);if("string"==typeof t&&(t=i.from(t)),t.length!==a.key/8)throw new TypeError("invalid key length "+t.length);return"stream"===a.type?new s(a.module,t,n,!0):"auth"===a.type?new r(a.module,t,n,!0):new l(a.module,t,n)}n(7)(l,a),l.prototype._update=function(e){var t,n;this._cache.add(e);for(var r=[];t=this._cache.get(this._autopadding);)n=this._mode.decrypt(this,t),r.push(n);return i.concat(r)},l.prototype._final=function(){var e=this._cache.flush();if(this._autopadding)return function(e){var t=e[15];if(t<1||t>16)throw new Error("unable to decrypt data");var n=-1;for(;++n<t;)if(e[n+(16-t)]!==t)throw new Error("unable to decrypt data");if(16===t)return;return e.slice(0,16-t)}(this._mode.decrypt(this,e));if(e)throw new Error("data not multiple of block length")},l.prototype.setAutoPadding=function(e){return this._autopadding=!!e,this},h.prototype.add=function(e){this.cache=i.concat([this.cache,e])},h.prototype.get=function(e){var t;if(e){if(this.cache.length>16)return t=this.cache.slice(0,16),this.cache=this.cache.slice(16),t}else if(this.cache.length>=16)return t=this.cache.slice(0,16),this.cache=this.cache.slice(16),t;return null},h.prototype.flush=function(){if(this.cache.length)return this.cache},t.createDecipher=function(e,t){var n=o[e.toLowerCase()];if(!n)throw new TypeError("invalid suite type");var r=c(t,!1,n.key,n.iv);return d(e,r.key,r.iv)},t.createDecipheriv=d},function(e,t){t["des-ecb"]={key:8,iv:0},t["des-cbc"]=t.des={key:8,iv:8},t["des-ede3-cbc"]=t.des3={key:24,iv:8},t["des-ede3"]={key:24,iv:0},t["des-ede-cbc"]={key:16,iv:8},t["des-ede"]={key:16,iv:0}},function(e,t,n){(function(e){var r=n(131),i=n(238),o=n(239);var s={binary:!0,hex:!0,base64:!0};t.DiffieHellmanGroup=t.createDiffieHellmanGroup=t.getDiffieHellman=function(t){var n=new e(i[t].prime,"hex"),r=new e(i[t].gen,"hex");return new o(n,r)},t.createDiffieHellman=t.DiffieHellman=function t(n,i,a,u){return e.isBuffer(i)||void 0===s[i]?t(n,"binary",i,a):(i=i||"binary",u=u||"binary",a=a||new e([2]),e.isBuffer(a)||(a=new e(a,u)),"number"==typeof n?new o(r(n,a),a,!0):(e.isBuffer(n)||(n=new e(n,i)),new o(n,a,!0)))}}).call(this,n(17).Buffer)},function(e,t){},function(e,t,n){(function(e){!function(e,t){"use strict";function r(e,t){if(!e)throw new Error(t||"Assertion failed")}function i(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}function o(e,t,n){if(o.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(n=t,t=10),this._init(e||0,t||10,n||"be"))}var s;"object"==typeof e?e.exports=o:t.BN=o,o.BN=o,o.wordSize=26;try{s="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:n(236).Buffer}catch(e){}function a(e,t){var n=e.charCodeAt(t);return n>=65&&n<=70?n-55:n>=97&&n<=102?n-87:n-48&15}function u(e,t,n){var r=a(e,n);return n-1>=t&&(r|=a(e,n-1)<<4),r}function c(e,t,n,r){for(var i=0,o=Math.min(e.length,n),s=t;s<o;s++){var a=e.charCodeAt(s)-48;i*=r,i+=a>=49?a-49+10:a>=17?a-17+10:a}return i}o.isBN=function(e){return e instanceof o||null!==e&&"object"==typeof e&&e.constructor.wordSize===o.wordSize&&Array.isArray(e.words)},o.max=function(e,t){return e.cmp(t)>0?e:t},o.min=function(e,t){return e.cmp(t)<0?e:t},o.prototype._init=function(e,t,n){if("number"==typeof e)return this._initNumber(e,t,n);if("object"==typeof e)return this._initArray(e,t,n);"hex"===t&&(t=16),r(t===(0|t)&&t>=2&&t<=36);var i=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<e.length&&(16===t?this._parseHex(e,i,n):(this._parseBase(e,t,i),"le"===n&&this._initArray(this.toArray(),t,n)))},o.prototype._initNumber=function(e,t,n){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(r(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===n&&this._initArray(this.toArray(),t,n)},o.prototype._initArray=function(e,t,n){if(r("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var o,s,a=0;if("be"===n)for(i=e.length-1,o=0;i>=0;i-=3)s=e[i]|e[i-1]<<8|e[i-2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);else if("le"===n)for(i=0,o=0;i<e.length;i+=3)s=e[i]|e[i+1]<<8|e[i+2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);return this.strip()},o.prototype._parseHex=function(e,t,n){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var i,o=0,s=0;if("be"===n)for(r=e.length-1;r>=t;r-=2)i=u(e,t,r)<<o,this.words[s]|=67108863&i,o>=18?(o-=18,s+=1,this.words[s]|=i>>>26):o+=8;else for(r=(e.length-t)%2==0?t+1:t;r<e.length;r+=2)i=u(e,t,r)<<o,this.words[s]|=67108863&i,o>=18?(o-=18,s+=1,this.words[s]|=i>>>26):o+=8;this.strip()},o.prototype._parseBase=function(e,t,n){this.words=[0],this.length=1;for(var r=0,i=1;i<=67108863;i*=t)r++;r--,i=i/t|0;for(var o=e.length-n,s=o%r,a=Math.min(o,o-s)+n,u=0,l=n;l<a;l+=r)u=c(e,l,l+r,t),this.imuln(i),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==s){var h=1;for(u=c(e,l,e.length,t),l=0;l<s;l++)h*=t;this.imuln(h),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this.strip()},o.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},o.prototype.clone=function(){var e=new o(null);return this.copy(e),e},o.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var l=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],d=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function f(e,t,n){n.negative=t.negative^e.negative;var r=e.length+t.length|0;n.length=r,r=r-1|0;var i=0|e.words[0],o=0|t.words[0],s=i*o,a=67108863&s,u=s/67108864|0;n.words[0]=a;for(var c=1;c<r;c++){for(var l=u>>>26,h=67108863&u,d=Math.min(c,t.length-1),f=Math.max(0,c-e.length+1);f<=d;f++){var p=c-f|0;l+=(s=(i=0|e.words[p])*(o=0|t.words[f])+h)/67108864|0,h=67108863&s}n.words[c]=0|h,u=0|l}return 0!==u?n.words[c]=0|u:n.length--,n.strip()}o.prototype.toString=function(e,t){var n;if(t=0|t||1,16===(e=e||10)||"hex"===e){n="";for(var i=0,o=0,s=0;s<this.length;s++){var a=this.words[s],u=(16777215&(a<<i|o)).toString(16);n=0!==(o=a>>>24-i&16777215)||s!==this.length-1?l[6-u.length]+u+n:u+n,(i+=2)>=26&&(i-=26,s--)}for(0!==o&&(n=o.toString(16)+n);n.length%t!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}if(e===(0|e)&&e>=2&&e<=36){var c=h[e],f=d[e];n="";var p=this.clone();for(p.negative=0;!p.isZero();){var m=p.modn(f).toString(e);n=(p=p.idivn(f)).isZero()?m+n:l[c-m.length]+m+n}for(this.isZero()&&(n="0"+n);n.length%t!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}r(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(e,t){return r(void 0!==s),this.toArrayLike(s,e,t)},o.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},o.prototype.toArrayLike=function(e,t,n){var i=this.byteLength(),o=n||Math.max(1,i);r(i<=o,"byte array longer than desired length"),r(o>0,"Requested array length <= 0"),this.strip();var s,a,u="le"===t,c=new e(o),l=this.clone();if(u){for(a=0;!l.isZero();a++)s=l.andln(255),l.iushrn(8),c[a]=s;for(;a<o;a++)c[a]=0}else{for(a=0;a<o-i;a++)c[a]=0;for(a=0;!l.isZero();a++)s=l.andln(255),l.iushrn(8),c[o-a-1]=s}return c},Math.clz32?o.prototype._countBits=function(e){return 32-Math.clz32(e)}:o.prototype._countBits=function(e){var t=e,n=0;return t>=4096&&(n+=13,t>>>=13),t>=64&&(n+=7,t>>>=7),t>=8&&(n+=4,t>>>=4),t>=2&&(n+=2,t>>>=2),n+t},o.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,n=0;return 0==(8191&t)&&(n+=13,t>>>=13),0==(127&t)&&(n+=7,t>>>=7),0==(15&t)&&(n+=4,t>>>=4),0==(3&t)&&(n+=2,t>>>=2),0==(1&t)&&n++,n},o.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var n=this._zeroBits(this.words[t]);if(e+=n,26!==n)break}return e},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},o.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this.strip()},o.prototype.ior=function(e){return r(0==(this.negative|e.negative)),this.iuor(e)},o.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},o.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},o.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var n=0;n<t.length;n++)this.words[n]=this.words[n]&e.words[n];return this.length=t.length,this.strip()},o.prototype.iand=function(e){return r(0==(this.negative|e.negative)),this.iuand(e)},o.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},o.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},o.prototype.iuxor=function(e){var t,n;this.length>e.length?(t=this,n=e):(t=e,n=this);for(var r=0;r<n.length;r++)this.words[r]=t.words[r]^n.words[r];if(this!==t)for(;r<t.length;r++)this.words[r]=t.words[r];return this.length=t.length,this.strip()},o.prototype.ixor=function(e){return r(0==(this.negative|e.negative)),this.iuxor(e)},o.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},o.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},o.prototype.inotn=function(e){r("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),n=e%26;this._expand(t),n>0&&t--;for(var i=0;i<t;i++)this.words[i]=67108863&~this.words[i];return n>0&&(this.words[i]=~this.words[i]&67108863>>26-n),this.strip()},o.prototype.notn=function(e){return this.clone().inotn(e)},o.prototype.setn=function(e,t){r("number"==typeof e&&e>=0);var n=e/26|0,i=e%26;return this._expand(n+1),this.words[n]=t?this.words[n]|1<<i:this.words[n]&~(1<<i),this.strip()},o.prototype.iadd=function(e){var t,n,r;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(n=this,r=e):(n=e,r=this);for(var i=0,o=0;o<r.length;o++)t=(0|n.words[o])+(0|r.words[o])+i,this.words[o]=67108863&t,i=t>>>26;for(;0!==i&&o<n.length;o++)t=(0|n.words[o])+i,this.words[o]=67108863&t,i=t>>>26;if(this.length=n.length,0!==i)this.words[this.length]=i,this.length++;else if(n!==this)for(;o<n.length;o++)this.words[o]=n.words[o];return this},o.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},o.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var n,r,i=this.cmp(e);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(n=this,r=e):(n=e,r=this);for(var o=0,s=0;s<r.length;s++)o=(t=(0|n.words[s])-(0|r.words[s])+o)>>26,this.words[s]=67108863&t;for(;0!==o&&s<n.length;s++)o=(t=(0|n.words[s])+o)>>26,this.words[s]=67108863&t;if(0===o&&s<n.length&&n!==this)for(;s<n.length;s++)this.words[s]=n.words[s];return this.length=Math.max(this.length,s),n!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(e){return this.clone().isub(e)};var p=function(e,t,n){var r,i,o,s=e.words,a=t.words,u=n.words,c=0,l=0|s[0],h=8191&l,d=l>>>13,f=0|s[1],p=8191&f,m=f>>>13,g=0|s[2],b=8191&g,v=g>>>13,y=0|s[3],_=8191&y,w=y>>>13,E=0|s[4],S=8191&E,M=E>>>13,O=0|s[5],A=8191&O,C=O>>>13,T=0|s[6],k=8191&T,x=T>>>13,j=0|s[7],I=8191&j,R=j>>>13,N=0|s[8],P=8191&N,D=N>>>13,U=0|s[9],L=8191&U,F=U>>>13,B=0|a[0],H=8191&B,q=B>>>13,V=0|a[1],G=8191&V,z=V>>>13,W=0|a[2],K=8191&W,Y=W>>>13,Q=0|a[3],J=8191&Q,Z=Q>>>13,$=0|a[4],X=8191&$,ee=$>>>13,te=0|a[5],ne=8191&te,re=te>>>13,ie=0|a[6],oe=8191&ie,se=ie>>>13,ae=0|a[7],ue=8191&ae,ce=ae>>>13,le=0|a[8],he=8191&le,de=le>>>13,fe=0|a[9],pe=8191&fe,me=fe>>>13;n.negative=e.negative^t.negative,n.length=19;var ge=(c+(r=Math.imul(h,H))|0)+((8191&(i=(i=Math.imul(h,q))+Math.imul(d,H)|0))<<13)|0;c=((o=Math.imul(d,q))+(i>>>13)|0)+(ge>>>26)|0,ge&=67108863,r=Math.imul(p,H),i=(i=Math.imul(p,q))+Math.imul(m,H)|0,o=Math.imul(m,q);var be=(c+(r=r+Math.imul(h,G)|0)|0)+((8191&(i=(i=i+Math.imul(h,z)|0)+Math.imul(d,G)|0))<<13)|0;c=((o=o+Math.imul(d,z)|0)+(i>>>13)|0)+(be>>>26)|0,be&=67108863,r=Math.imul(b,H),i=(i=Math.imul(b,q))+Math.imul(v,H)|0,o=Math.imul(v,q),r=r+Math.imul(p,G)|0,i=(i=i+Math.imul(p,z)|0)+Math.imul(m,G)|0,o=o+Math.imul(m,z)|0;var ve=(c+(r=r+Math.imul(h,K)|0)|0)+((8191&(i=(i=i+Math.imul(h,Y)|0)+Math.imul(d,K)|0))<<13)|0;c=((o=o+Math.imul(d,Y)|0)+(i>>>13)|0)+(ve>>>26)|0,ve&=67108863,r=Math.imul(_,H),i=(i=Math.imul(_,q))+Math.imul(w,H)|0,o=Math.imul(w,q),r=r+Math.imul(b,G)|0,i=(i=i+Math.imul(b,z)|0)+Math.imul(v,G)|0,o=o+Math.imul(v,z)|0,r=r+Math.imul(p,K)|0,i=(i=i+Math.imul(p,Y)|0)+Math.imul(m,K)|0,o=o+Math.imul(m,Y)|0;var ye=(c+(r=r+Math.imul(h,J)|0)|0)+((8191&(i=(i=i+Math.imul(h,Z)|0)+Math.imul(d,J)|0))<<13)|0;c=((o=o+Math.imul(d,Z)|0)+(i>>>13)|0)+(ye>>>26)|0,ye&=67108863,r=Math.imul(S,H),i=(i=Math.imul(S,q))+Math.imul(M,H)|0,o=Math.imul(M,q),r=r+Math.imul(_,G)|0,i=(i=i+Math.imul(_,z)|0)+Math.imul(w,G)|0,o=o+Math.imul(w,z)|0,r=r+Math.imul(b,K)|0,i=(i=i+Math.imul(b,Y)|0)+Math.imul(v,K)|0,o=o+Math.imul(v,Y)|0,r=r+Math.imul(p,J)|0,i=(i=i+Math.imul(p,Z)|0)+Math.imul(m,J)|0,o=o+Math.imul(m,Z)|0;var _e=(c+(r=r+Math.imul(h,X)|0)|0)+((8191&(i=(i=i+Math.imul(h,ee)|0)+Math.imul(d,X)|0))<<13)|0;c=((o=o+Math.imul(d,ee)|0)+(i>>>13)|0)+(_e>>>26)|0,_e&=67108863,r=Math.imul(A,H),i=(i=Math.imul(A,q))+Math.imul(C,H)|0,o=Math.imul(C,q),r=r+Math.imul(S,G)|0,i=(i=i+Math.imul(S,z)|0)+Math.imul(M,G)|0,o=o+Math.imul(M,z)|0,r=r+Math.imul(_,K)|0,i=(i=i+Math.imul(_,Y)|0)+Math.imul(w,K)|0,o=o+Math.imul(w,Y)|0,r=r+Math.imul(b,J)|0,i=(i=i+Math.imul(b,Z)|0)+Math.imul(v,J)|0,o=o+Math.imul(v,Z)|0,r=r+Math.imul(p,X)|0,i=(i=i+Math.imul(p,ee)|0)+Math.imul(m,X)|0,o=o+Math.imul(m,ee)|0;var we=(c+(r=r+Math.imul(h,ne)|0)|0)+((8191&(i=(i=i+Math.imul(h,re)|0)+Math.imul(d,ne)|0))<<13)|0;c=((o=o+Math.imul(d,re)|0)+(i>>>13)|0)+(we>>>26)|0,we&=67108863,r=Math.imul(k,H),i=(i=Math.imul(k,q))+Math.imul(x,H)|0,o=Math.imul(x,q),r=r+Math.imul(A,G)|0,i=(i=i+Math.imul(A,z)|0)+Math.imul(C,G)|0,o=o+Math.imul(C,z)|0,r=r+Math.imul(S,K)|0,i=(i=i+Math.imul(S,Y)|0)+Math.imul(M,K)|0,o=o+Math.imul(M,Y)|0,r=r+Math.imul(_,J)|0,i=(i=i+Math.imul(_,Z)|0)+Math.imul(w,J)|0,o=o+Math.imul(w,Z)|0,r=r+Math.imul(b,X)|0,i=(i=i+Math.imul(b,ee)|0)+Math.imul(v,X)|0,o=o+Math.imul(v,ee)|0,r=r+Math.imul(p,ne)|0,i=(i=i+Math.imul(p,re)|0)+Math.imul(m,ne)|0,o=o+Math.imul(m,re)|0;var Ee=(c+(r=r+Math.imul(h,oe)|0)|0)+((8191&(i=(i=i+Math.imul(h,se)|0)+Math.imul(d,oe)|0))<<13)|0;c=((o=o+Math.imul(d,se)|0)+(i>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,r=Math.imul(I,H),i=(i=Math.imul(I,q))+Math.imul(R,H)|0,o=Math.imul(R,q),r=r+Math.imul(k,G)|0,i=(i=i+Math.imul(k,z)|0)+Math.imul(x,G)|0,o=o+Math.imul(x,z)|0,r=r+Math.imul(A,K)|0,i=(i=i+Math.imul(A,Y)|0)+Math.imul(C,K)|0,o=o+Math.imul(C,Y)|0,r=r+Math.imul(S,J)|0,i=(i=i+Math.imul(S,Z)|0)+Math.imul(M,J)|0,o=o+Math.imul(M,Z)|0,r=r+Math.imul(_,X)|0,i=(i=i+Math.imul(_,ee)|0)+Math.imul(w,X)|0,o=o+Math.imul(w,ee)|0,r=r+Math.imul(b,ne)|0,i=(i=i+Math.imul(b,re)|0)+Math.imul(v,ne)|0,o=o+Math.imul(v,re)|0,r=r+Math.imul(p,oe)|0,i=(i=i+Math.imul(p,se)|0)+Math.imul(m,oe)|0,o=o+Math.imul(m,se)|0;var Se=(c+(r=r+Math.imul(h,ue)|0)|0)+((8191&(i=(i=i+Math.imul(h,ce)|0)+Math.imul(d,ue)|0))<<13)|0;c=((o=o+Math.imul(d,ce)|0)+(i>>>13)|0)+(Se>>>26)|0,Se&=67108863,r=Math.imul(P,H),i=(i=Math.imul(P,q))+Math.imul(D,H)|0,o=Math.imul(D,q),r=r+Math.imul(I,G)|0,i=(i=i+Math.imul(I,z)|0)+Math.imul(R,G)|0,o=o+Math.imul(R,z)|0,r=r+Math.imul(k,K)|0,i=(i=i+Math.imul(k,Y)|0)+Math.imul(x,K)|0,o=o+Math.imul(x,Y)|0,r=r+Math.imul(A,J)|0,i=(i=i+Math.imul(A,Z)|0)+Math.imul(C,J)|0,o=o+Math.imul(C,Z)|0,r=r+Math.imul(S,X)|0,i=(i=i+Math.imul(S,ee)|0)+Math.imul(M,X)|0,o=o+Math.imul(M,ee)|0,r=r+Math.imul(_,ne)|0,i=(i=i+Math.imul(_,re)|0)+Math.imul(w,ne)|0,o=o+Math.imul(w,re)|0,r=r+Math.imul(b,oe)|0,i=(i=i+Math.imul(b,se)|0)+Math.imul(v,oe)|0,o=o+Math.imul(v,se)|0,r=r+Math.imul(p,ue)|0,i=(i=i+Math.imul(p,ce)|0)+Math.imul(m,ue)|0,o=o+Math.imul(m,ce)|0;var Me=(c+(r=r+Math.imul(h,he)|0)|0)+((8191&(i=(i=i+Math.imul(h,de)|0)+Math.imul(d,he)|0))<<13)|0;c=((o=o+Math.imul(d,de)|0)+(i>>>13)|0)+(Me>>>26)|0,Me&=67108863,r=Math.imul(L,H),i=(i=Math.imul(L,q))+Math.imul(F,H)|0,o=Math.imul(F,q),r=r+Math.imul(P,G)|0,i=(i=i+Math.imul(P,z)|0)+Math.imul(D,G)|0,o=o+Math.imul(D,z)|0,r=r+Math.imul(I,K)|0,i=(i=i+Math.imul(I,Y)|0)+Math.imul(R,K)|0,o=o+Math.imul(R,Y)|0,r=r+Math.imul(k,J)|0,i=(i=i+Math.imul(k,Z)|0)+Math.imul(x,J)|0,o=o+Math.imul(x,Z)|0,r=r+Math.imul(A,X)|0,i=(i=i+Math.imul(A,ee)|0)+Math.imul(C,X)|0,o=o+Math.imul(C,ee)|0,r=r+Math.imul(S,ne)|0,i=(i=i+Math.imul(S,re)|0)+Math.imul(M,ne)|0,o=o+Math.imul(M,re)|0,r=r+Math.imul(_,oe)|0,i=(i=i+Math.imul(_,se)|0)+Math.imul(w,oe)|0,o=o+Math.imul(w,se)|0,r=r+Math.imul(b,ue)|0,i=(i=i+Math.imul(b,ce)|0)+Math.imul(v,ue)|0,o=o+Math.imul(v,ce)|0,r=r+Math.imul(p,he)|0,i=(i=i+Math.imul(p,de)|0)+Math.imul(m,he)|0,o=o+Math.imul(m,de)|0;var Oe=(c+(r=r+Math.imul(h,pe)|0)|0)+((8191&(i=(i=i+Math.imul(h,me)|0)+Math.imul(d,pe)|0))<<13)|0;c=((o=o+Math.imul(d,me)|0)+(i>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,r=Math.imul(L,G),i=(i=Math.imul(L,z))+Math.imul(F,G)|0,o=Math.imul(F,z),r=r+Math.imul(P,K)|0,i=(i=i+Math.imul(P,Y)|0)+Math.imul(D,K)|0,o=o+Math.imul(D,Y)|0,r=r+Math.imul(I,J)|0,i=(i=i+Math.imul(I,Z)|0)+Math.imul(R,J)|0,o=o+Math.imul(R,Z)|0,r=r+Math.imul(k,X)|0,i=(i=i+Math.imul(k,ee)|0)+Math.imul(x,X)|0,o=o+Math.imul(x,ee)|0,r=r+Math.imul(A,ne)|0,i=(i=i+Math.imul(A,re)|0)+Math.imul(C,ne)|0,o=o+Math.imul(C,re)|0,r=r+Math.imul(S,oe)|0,i=(i=i+Math.imul(S,se)|0)+Math.imul(M,oe)|0,o=o+Math.imul(M,se)|0,r=r+Math.imul(_,ue)|0,i=(i=i+Math.imul(_,ce)|0)+Math.imul(w,ue)|0,o=o+Math.imul(w,ce)|0,r=r+Math.imul(b,he)|0,i=(i=i+Math.imul(b,de)|0)+Math.imul(v,he)|0,o=o+Math.imul(v,de)|0;var Ae=(c+(r=r+Math.imul(p,pe)|0)|0)+((8191&(i=(i=i+Math.imul(p,me)|0)+Math.imul(m,pe)|0))<<13)|0;c=((o=o+Math.imul(m,me)|0)+(i>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,r=Math.imul(L,K),i=(i=Math.imul(L,Y))+Math.imul(F,K)|0,o=Math.imul(F,Y),r=r+Math.imul(P,J)|0,i=(i=i+Math.imul(P,Z)|0)+Math.imul(D,J)|0,o=o+Math.imul(D,Z)|0,r=r+Math.imul(I,X)|0,i=(i=i+Math.imul(I,ee)|0)+Math.imul(R,X)|0,o=o+Math.imul(R,ee)|0,r=r+Math.imul(k,ne)|0,i=(i=i+Math.imul(k,re)|0)+Math.imul(x,ne)|0,o=o+Math.imul(x,re)|0,r=r+Math.imul(A,oe)|0,i=(i=i+Math.imul(A,se)|0)+Math.imul(C,oe)|0,o=o+Math.imul(C,se)|0,r=r+Math.imul(S,ue)|0,i=(i=i+Math.imul(S,ce)|0)+Math.imul(M,ue)|0,o=o+Math.imul(M,ce)|0,r=r+Math.imul(_,he)|0,i=(i=i+Math.imul(_,de)|0)+Math.imul(w,he)|0,o=o+Math.imul(w,de)|0;var Ce=(c+(r=r+Math.imul(b,pe)|0)|0)+((8191&(i=(i=i+Math.imul(b,me)|0)+Math.imul(v,pe)|0))<<13)|0;c=((o=o+Math.imul(v,me)|0)+(i>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,r=Math.imul(L,J),i=(i=Math.imul(L,Z))+Math.imul(F,J)|0,o=Math.imul(F,Z),r=r+Math.imul(P,X)|0,i=(i=i+Math.imul(P,ee)|0)+Math.imul(D,X)|0,o=o+Math.imul(D,ee)|0,r=r+Math.imul(I,ne)|0,i=(i=i+Math.imul(I,re)|0)+Math.imul(R,ne)|0,o=o+Math.imul(R,re)|0,r=r+Math.imul(k,oe)|0,i=(i=i+Math.imul(k,se)|0)+Math.imul(x,oe)|0,o=o+Math.imul(x,se)|0,r=r+Math.imul(A,ue)|0,i=(i=i+Math.imul(A,ce)|0)+Math.imul(C,ue)|0,o=o+Math.imul(C,ce)|0,r=r+Math.imul(S,he)|0,i=(i=i+Math.imul(S,de)|0)+Math.imul(M,he)|0,o=o+Math.imul(M,de)|0;var Te=(c+(r=r+Math.imul(_,pe)|0)|0)+((8191&(i=(i=i+Math.imul(_,me)|0)+Math.imul(w,pe)|0))<<13)|0;c=((o=o+Math.imul(w,me)|0)+(i>>>13)|0)+(Te>>>26)|0,Te&=67108863,r=Math.imul(L,X),i=(i=Math.imul(L,ee))+Math.imul(F,X)|0,o=Math.imul(F,ee),r=r+Math.imul(P,ne)|0,i=(i=i+Math.imul(P,re)|0)+Math.imul(D,ne)|0,o=o+Math.imul(D,re)|0,r=r+Math.imul(I,oe)|0,i=(i=i+Math.imul(I,se)|0)+Math.imul(R,oe)|0,o=o+Math.imul(R,se)|0,r=r+Math.imul(k,ue)|0,i=(i=i+Math.imul(k,ce)|0)+Math.imul(x,ue)|0,o=o+Math.imul(x,ce)|0,r=r+Math.imul(A,he)|0,i=(i=i+Math.imul(A,de)|0)+Math.imul(C,he)|0,o=o+Math.imul(C,de)|0;var ke=(c+(r=r+Math.imul(S,pe)|0)|0)+((8191&(i=(i=i+Math.imul(S,me)|0)+Math.imul(M,pe)|0))<<13)|0;c=((o=o+Math.imul(M,me)|0)+(i>>>13)|0)+(ke>>>26)|0,ke&=67108863,r=Math.imul(L,ne),i=(i=Math.imul(L,re))+Math.imul(F,ne)|0,o=Math.imul(F,re),r=r+Math.imul(P,oe)|0,i=(i=i+Math.imul(P,se)|0)+Math.imul(D,oe)|0,o=o+Math.imul(D,se)|0,r=r+Math.imul(I,ue)|0,i=(i=i+Math.imul(I,ce)|0)+Math.imul(R,ue)|0,o=o+Math.imul(R,ce)|0,r=r+Math.imul(k,he)|0,i=(i=i+Math.imul(k,de)|0)+Math.imul(x,he)|0,o=o+Math.imul(x,de)|0;var xe=(c+(r=r+Math.imul(A,pe)|0)|0)+((8191&(i=(i=i+Math.imul(A,me)|0)+Math.imul(C,pe)|0))<<13)|0;c=((o=o+Math.imul(C,me)|0)+(i>>>13)|0)+(xe>>>26)|0,xe&=67108863,r=Math.imul(L,oe),i=(i=Math.imul(L,se))+Math.imul(F,oe)|0,o=Math.imul(F,se),r=r+Math.imul(P,ue)|0,i=(i=i+Math.imul(P,ce)|0)+Math.imul(D,ue)|0,o=o+Math.imul(D,ce)|0,r=r+Math.imul(I,he)|0,i=(i=i+Math.imul(I,de)|0)+Math.imul(R,he)|0,o=o+Math.imul(R,de)|0;var je=(c+(r=r+Math.imul(k,pe)|0)|0)+((8191&(i=(i=i+Math.imul(k,me)|0)+Math.imul(x,pe)|0))<<13)|0;c=((o=o+Math.imul(x,me)|0)+(i>>>13)|0)+(je>>>26)|0,je&=67108863,r=Math.imul(L,ue),i=(i=Math.imul(L,ce))+Math.imul(F,ue)|0,o=Math.imul(F,ce),r=r+Math.imul(P,he)|0,i=(i=i+Math.imul(P,de)|0)+Math.imul(D,he)|0,o=o+Math.imul(D,de)|0;var Ie=(c+(r=r+Math.imul(I,pe)|0)|0)+((8191&(i=(i=i+Math.imul(I,me)|0)+Math.imul(R,pe)|0))<<13)|0;c=((o=o+Math.imul(R,me)|0)+(i>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,r=Math.imul(L,he),i=(i=Math.imul(L,de))+Math.imul(F,he)|0,o=Math.imul(F,de);var Re=(c+(r=r+Math.imul(P,pe)|0)|0)+((8191&(i=(i=i+Math.imul(P,me)|0)+Math.imul(D,pe)|0))<<13)|0;c=((o=o+Math.imul(D,me)|0)+(i>>>13)|0)+(Re>>>26)|0,Re&=67108863;var Ne=(c+(r=Math.imul(L,pe))|0)+((8191&(i=(i=Math.imul(L,me))+Math.imul(F,pe)|0))<<13)|0;return c=((o=Math.imul(F,me))+(i>>>13)|0)+(Ne>>>26)|0,Ne&=67108863,u[0]=ge,u[1]=be,u[2]=ve,u[3]=ye,u[4]=_e,u[5]=we,u[6]=Ee,u[7]=Se,u[8]=Me,u[9]=Oe,u[10]=Ae,u[11]=Ce,u[12]=Te,u[13]=ke,u[14]=xe,u[15]=je,u[16]=Ie,u[17]=Re,u[18]=Ne,0!==c&&(u[19]=c,n.length++),n};function m(e,t,n){return(new g).mulp(e,t,n)}function g(e,t){this.x=e,this.y=t}Math.imul||(p=f),o.prototype.mulTo=function(e,t){var n=this.length+e.length;return 10===this.length&&10===e.length?p(this,e,t):n<63?f(this,e,t):n<1024?function(e,t,n){n.negative=t.negative^e.negative,n.length=e.length+t.length;for(var r=0,i=0,o=0;o<n.length-1;o++){var s=i;i=0;for(var a=67108863&r,u=Math.min(o,t.length-1),c=Math.max(0,o-e.length+1);c<=u;c++){var l=o-c,h=(0|e.words[l])*(0|t.words[c]),d=67108863&h;a=67108863&(d=d+a|0),i+=(s=(s=s+(h/67108864|0)|0)+(d>>>26)|0)>>>26,s&=67108863}n.words[o]=a,r=s,s=i}return 0!==r?n.words[o]=r:n.length--,n.strip()}(this,e,t):m(this,e,t)},g.prototype.makeRBT=function(e){for(var t=new Array(e),n=o.prototype._countBits(e)-1,r=0;r<e;r++)t[r]=this.revBin(r,n,e);return t},g.prototype.revBin=function(e,t,n){if(0===e||e===n-1)return e;for(var r=0,i=0;i<t;i++)r|=(1&e)<<t-i-1,e>>=1;return r},g.prototype.permute=function(e,t,n,r,i,o){for(var s=0;s<o;s++)r[s]=t[e[s]],i[s]=n[e[s]]},g.prototype.transform=function(e,t,n,r,i,o){this.permute(o,e,t,n,r,i);for(var s=1;s<i;s<<=1)for(var a=s<<1,u=Math.cos(2*Math.PI/a),c=Math.sin(2*Math.PI/a),l=0;l<i;l+=a)for(var h=u,d=c,f=0;f<s;f++){var p=n[l+f],m=r[l+f],g=n[l+f+s],b=r[l+f+s],v=h*g-d*b;b=h*b+d*g,g=v,n[l+f]=p+g,r[l+f]=m+b,n[l+f+s]=p-g,r[l+f+s]=m-b,f!==a&&(v=u*h-c*d,d=u*d+c*h,h=v)}},g.prototype.guessLen13b=function(e,t){var n=1|Math.max(t,e),r=1&n,i=0;for(n=n/2|0;n;n>>>=1)i++;return 1<<i+1+r},g.prototype.conjugate=function(e,t,n){if(!(n<=1))for(var r=0;r<n/2;r++){var i=e[r];e[r]=e[n-r-1],e[n-r-1]=i,i=t[r],t[r]=-t[n-r-1],t[n-r-1]=-i}},g.prototype.normalize13b=function(e,t){for(var n=0,r=0;r<t/2;r++){var i=8192*Math.round(e[2*r+1]/t)+Math.round(e[2*r]/t)+n;e[r]=67108863&i,n=i<67108864?0:i/67108864|0}return e},g.prototype.convert13b=function(e,t,n,i){for(var o=0,s=0;s<t;s++)o+=0|e[s],n[2*s]=8191&o,o>>>=13,n[2*s+1]=8191&o,o>>>=13;for(s=2*t;s<i;++s)n[s]=0;r(0===o),r(0==(-8192&o))},g.prototype.stub=function(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=0;return t},g.prototype.mulp=function(e,t,n){var r=2*this.guessLen13b(e.length,t.length),i=this.makeRBT(r),o=this.stub(r),s=new Array(r),a=new Array(r),u=new Array(r),c=new Array(r),l=new Array(r),h=new Array(r),d=n.words;d.length=r,this.convert13b(e.words,e.length,s,r),this.convert13b(t.words,t.length,c,r),this.transform(s,o,a,u,r,i),this.transform(c,o,l,h,r,i);for(var f=0;f<r;f++){var p=a[f]*l[f]-u[f]*h[f];u[f]=a[f]*h[f]+u[f]*l[f],a[f]=p}return this.conjugate(a,u,r),this.transform(a,u,d,o,r,i),this.conjugate(d,o,r),this.normalize13b(d,r),n.negative=e.negative^t.negative,n.length=e.length+t.length,n.strip()},o.prototype.mul=function(e){var t=new o(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},o.prototype.mulf=function(e){var t=new o(null);return t.words=new Array(this.length+e.length),m(this,e,t)},o.prototype.imul=function(e){return this.clone().mulTo(e,this)},o.prototype.imuln=function(e){r("number"==typeof e),r(e<67108864);for(var t=0,n=0;n<this.length;n++){var i=(0|this.words[n])*e,o=(67108863&i)+(67108863&t);t>>=26,t+=i/67108864|0,t+=o>>>26,this.words[n]=67108863&o}return 0!==t&&(this.words[n]=t,this.length++),this},o.prototype.muln=function(e){return this.clone().imuln(e)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),n=0;n<t.length;n++){var r=n/26|0,i=n%26;t[n]=(e.words[r]&1<<i)>>>i}return t}(e);if(0===t.length)return new o(1);for(var n=this,r=0;r<t.length&&0===t[r];r++,n=n.sqr());if(++r<t.length)for(var i=n.sqr();r<t.length;r++,i=i.sqr())0!==t[r]&&(n=n.mul(i));return n},o.prototype.iushln=function(e){r("number"==typeof e&&e>=0);var t,n=e%26,i=(e-n)/26,o=67108863>>>26-n<<26-n;if(0!==n){var s=0;for(t=0;t<this.length;t++){var a=this.words[t]&o,u=(0|this.words[t])-a<<n;this.words[t]=u|s,s=a>>>26-n}s&&(this.words[t]=s,this.length++)}if(0!==i){for(t=this.length-1;t>=0;t--)this.words[t+i]=this.words[t];for(t=0;t<i;t++)this.words[t]=0;this.length+=i}return this.strip()},o.prototype.ishln=function(e){return r(0===this.negative),this.iushln(e)},o.prototype.iushrn=function(e,t,n){var i;r("number"==typeof e&&e>=0),i=t?(t-t%26)/26:0;var o=e%26,s=Math.min((e-o)/26,this.length),a=67108863^67108863>>>o<<o,u=n;if(i-=s,i=Math.max(0,i),u){for(var c=0;c<s;c++)u.words[c]=this.words[c];u.length=s}if(0===s);else if(this.length>s)for(this.length-=s,c=0;c<this.length;c++)this.words[c]=this.words[c+s];else this.words[0]=0,this.length=1;var l=0;for(c=this.length-1;c>=0&&(0!==l||c>=i);c--){var h=0|this.words[c];this.words[c]=l<<26-o|h>>>o,l=h&a}return u&&0!==l&&(u.words[u.length++]=l),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(e,t,n){return r(0===this.negative),this.iushrn(e,t,n)},o.prototype.shln=function(e){return this.clone().ishln(e)},o.prototype.ushln=function(e){return this.clone().iushln(e)},o.prototype.shrn=function(e){return this.clone().ishrn(e)},o.prototype.ushrn=function(e){return this.clone().iushrn(e)},o.prototype.testn=function(e){r("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26,i=1<<t;return!(this.length<=n)&&!!(this.words[n]&i)},o.prototype.imaskn=function(e){r("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26;if(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=n)return this;if(0!==t&&n++,this.length=Math.min(n,this.length),0!==t){var i=67108863^67108863>>>t<<t;this.words[this.length-1]&=i}return this.strip()},o.prototype.maskn=function(e){return this.clone().imaskn(e)},o.prototype.iaddn=function(e){return r("number"==typeof e),r(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},o.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},o.prototype.isubn=function(e){if(r("number"==typeof e),r(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this.strip()},o.prototype.addn=function(e){return this.clone().iaddn(e)},o.prototype.subn=function(e){return this.clone().isubn(e)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(e,t,n){var i,o,s=e.length+n;this._expand(s);var a=0;for(i=0;i<e.length;i++){o=(0|this.words[i+n])+a;var u=(0|e.words[i])*t;a=((o-=67108863&u)>>26)-(u/67108864|0),this.words[i+n]=67108863&o}for(;i<this.length-n;i++)a=(o=(0|this.words[i+n])+a)>>26,this.words[i+n]=67108863&o;if(0===a)return this.strip();for(r(-1===a),a=0,i=0;i<this.length;i++)a=(o=-(0|this.words[i])+a)>>26,this.words[i]=67108863&o;return this.negative=1,this.strip()},o.prototype._wordDiv=function(e,t){var n=(this.length,e.length),r=this.clone(),i=e,s=0|i.words[i.length-1];0!==(n=26-this._countBits(s))&&(i=i.ushln(n),r.iushln(n),s=0|i.words[i.length-1]);var a,u=r.length-i.length;if("mod"!==t){(a=new o(null)).length=u+1,a.words=new Array(a.length);for(var c=0;c<a.length;c++)a.words[c]=0}var l=r.clone()._ishlnsubmul(i,1,u);0===l.negative&&(r=l,a&&(a.words[u]=1));for(var h=u-1;h>=0;h--){var d=67108864*(0|r.words[i.length+h])+(0|r.words[i.length+h-1]);for(d=Math.min(d/s|0,67108863),r._ishlnsubmul(i,d,h);0!==r.negative;)d--,r.negative=0,r._ishlnsubmul(i,1,h),r.isZero()||(r.negative^=1);a&&(a.words[h]=d)}return a&&a.strip(),r.strip(),"div"!==t&&0!==n&&r.iushrn(n),{div:a||null,mod:r}},o.prototype.divmod=function(e,t,n){return r(!e.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===e.negative?(a=this.neg().divmod(e,t),"mod"!==t&&(i=a.div.neg()),"div"!==t&&(s=a.mod.neg(),n&&0!==s.negative&&s.iadd(e)),{div:i,mod:s}):0===this.negative&&0!==e.negative?(a=this.divmod(e.neg(),t),"mod"!==t&&(i=a.div.neg()),{div:i,mod:a.mod}):0!=(this.negative&e.negative)?(a=this.neg().divmod(e.neg(),t),"div"!==t&&(s=a.mod.neg(),n&&0!==s.negative&&s.isub(e)),{div:a.div,mod:s}):e.length>this.length||this.cmp(e)<0?{div:new o(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new o(this.modn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new o(this.modn(e.words[0]))}:this._wordDiv(e,t);var i,s,a},o.prototype.div=function(e){return this.divmod(e,"div",!1).div},o.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},o.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},o.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var n=0!==t.div.negative?t.mod.isub(e):t.mod,r=e.ushrn(1),i=e.andln(1),o=n.cmp(r);return o<0||1===i&&0===o?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},o.prototype.modn=function(e){r(e<=67108863);for(var t=(1<<26)%e,n=0,i=this.length-1;i>=0;i--)n=(t*n+(0|this.words[i]))%e;return n},o.prototype.idivn=function(e){r(e<=67108863);for(var t=0,n=this.length-1;n>=0;n--){var i=(0|this.words[n])+67108864*t;this.words[n]=i/e|0,t=i%e}return this.strip()},o.prototype.divn=function(e){return this.clone().idivn(e)},o.prototype.egcd=function(e){r(0===e.negative),r(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i=new o(1),s=new o(0),a=new o(0),u=new o(1),c=0;t.isEven()&&n.isEven();)t.iushrn(1),n.iushrn(1),++c;for(var l=n.clone(),h=t.clone();!t.isZero();){for(var d=0,f=1;0==(t.words[0]&f)&&d<26;++d,f<<=1);if(d>0)for(t.iushrn(d);d-- >0;)(i.isOdd()||s.isOdd())&&(i.iadd(l),s.isub(h)),i.iushrn(1),s.iushrn(1);for(var p=0,m=1;0==(n.words[0]&m)&&p<26;++p,m<<=1);if(p>0)for(n.iushrn(p);p-- >0;)(a.isOdd()||u.isOdd())&&(a.iadd(l),u.isub(h)),a.iushrn(1),u.iushrn(1);t.cmp(n)>=0?(t.isub(n),i.isub(a),s.isub(u)):(n.isub(t),a.isub(i),u.isub(s))}return{a:a,b:u,gcd:n.iushln(c)}},o.prototype._invmp=function(e){r(0===e.negative),r(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i,s=new o(1),a=new o(0),u=n.clone();t.cmpn(1)>0&&n.cmpn(1)>0;){for(var c=0,l=1;0==(t.words[0]&l)&&c<26;++c,l<<=1);if(c>0)for(t.iushrn(c);c-- >0;)s.isOdd()&&s.iadd(u),s.iushrn(1);for(var h=0,d=1;0==(n.words[0]&d)&&h<26;++h,d<<=1);if(h>0)for(n.iushrn(h);h-- >0;)a.isOdd()&&a.iadd(u),a.iushrn(1);t.cmp(n)>=0?(t.isub(n),s.isub(a)):(n.isub(t),a.isub(s))}return(i=0===t.cmpn(1)?s:a).cmpn(0)<0&&i.iadd(e),i},o.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),n=e.clone();t.negative=0,n.negative=0;for(var r=0;t.isEven()&&n.isEven();r++)t.iushrn(1),n.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;n.isEven();)n.iushrn(1);var i=t.cmp(n);if(i<0){var o=t;t=n,n=o}else if(0===i||0===n.cmpn(1))break;t.isub(n)}return n.iushln(r)},o.prototype.invm=function(e){return this.egcd(e).a.umod(e)},o.prototype.isEven=function(){return 0==(1&this.words[0])},o.prototype.isOdd=function(){return 1==(1&this.words[0])},o.prototype.andln=function(e){return this.words[0]&e},o.prototype.bincn=function(e){r("number"==typeof e);var t=e%26,n=(e-t)/26,i=1<<t;if(this.length<=n)return this._expand(n+1),this.words[n]|=i,this;for(var o=i,s=n;0!==o&&s<this.length;s++){var a=0|this.words[s];o=(a+=o)>>>26,a&=67108863,this.words[s]=a}return 0!==o&&(this.words[s]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(e){var t,n=e<0;if(0!==this.negative&&!n)return-1;if(0===this.negative&&n)return 1;if(this.strip(),this.length>1)t=1;else{n&&(e=-e),r(e<=67108863,"Number is too big");var i=0|this.words[0];t=i===e?0:i<e?-1:1}return 0!==this.negative?0|-t:t},o.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},o.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,n=this.length-1;n>=0;n--){var r=0|this.words[n],i=0|e.words[n];if(r!==i){r<i?t=-1:r>i&&(t=1);break}}return t},o.prototype.gtn=function(e){return 1===this.cmpn(e)},o.prototype.gt=function(e){return 1===this.cmp(e)},o.prototype.gten=function(e){return this.cmpn(e)>=0},o.prototype.gte=function(e){return this.cmp(e)>=0},o.prototype.ltn=function(e){return-1===this.cmpn(e)},o.prototype.lt=function(e){return-1===this.cmp(e)},o.prototype.lten=function(e){return this.cmpn(e)<=0},o.prototype.lte=function(e){return this.cmp(e)<=0},o.prototype.eqn=function(e){return 0===this.cmpn(e)},o.prototype.eq=function(e){return 0===this.cmp(e)},o.red=function(e){return new S(e)},o.prototype.toRed=function(e){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},o.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(e){return this.red=e,this},o.prototype.forceRed=function(e){return r(!this.red,"Already a number in reduction context"),this._forceRed(e)},o.prototype.redAdd=function(e){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},o.prototype.redIAdd=function(e){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},o.prototype.redSub=function(e){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},o.prototype.redISub=function(e){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},o.prototype.redShl=function(e){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},o.prototype.redMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},o.prototype.redIMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},o.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(e){return r(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var b={k256:null,p224:null,p192:null,p25519:null};function v(e,t){this.name=e,this.p=new o(t,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function y(){v.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function _(){v.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function w(){v.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function E(){v.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function S(e){if("string"==typeof e){var t=o._prime(e);this.m=t.p,this.prime=t}else r(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function M(e){S.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}v.prototype._tmp=function(){var e=new o(null);return e.words=new Array(Math.ceil(this.n/13)),e},v.prototype.ireduce=function(e){var t,n=e;do{this.split(n,this.tmp),t=(n=(n=this.imulK(n)).iadd(this.tmp)).bitLength()}while(t>this.n);var r=t<this.n?-1:n.ucmp(this.p);return 0===r?(n.words[0]=0,n.length=1):r>0?n.isub(this.p):void 0!==n.strip?n.strip():n._strip(),n},v.prototype.split=function(e,t){e.iushrn(this.n,0,t)},v.prototype.imulK=function(e){return e.imul(this.k)},i(y,v),y.prototype.split=function(e,t){for(var n=Math.min(e.length,9),r=0;r<n;r++)t.words[r]=e.words[r];if(t.length=n,e.length<=9)return e.words[0]=0,void(e.length=1);var i=e.words[9];for(t.words[t.length++]=4194303&i,r=10;r<e.length;r++){var o=0|e.words[r];e.words[r-10]=(4194303&o)<<4|i>>>22,i=o}i>>>=22,e.words[r-10]=i,0===i&&e.length>10?e.length-=10:e.length-=9},y.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,n=0;n<e.length;n++){var r=0|e.words[n];t+=977*r,e.words[n]=67108863&t,t=64*r+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},i(_,v),i(w,v),i(E,v),E.prototype.imulK=function(e){for(var t=0,n=0;n<e.length;n++){var r=19*(0|e.words[n])+t,i=67108863&r;r>>>=26,e.words[n]=i,t=r}return 0!==t&&(e.words[e.length++]=t),e},o._prime=function(e){if(b[e])return b[e];var t;if("k256"===e)t=new y;else if("p224"===e)t=new _;else if("p192"===e)t=new w;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new E}return b[e]=t,t},S.prototype._verify1=function(e){r(0===e.negative,"red works only with positives"),r(e.red,"red works only with red numbers")},S.prototype._verify2=function(e,t){r(0==(e.negative|t.negative),"red works only with positives"),r(e.red&&e.red===t.red,"red works only with red numbers")},S.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):e.umod(this.m)._forceRed(this)},S.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},S.prototype.add=function(e,t){this._verify2(e,t);var n=e.add(t);return n.cmp(this.m)>=0&&n.isub(this.m),n._forceRed(this)},S.prototype.iadd=function(e,t){this._verify2(e,t);var n=e.iadd(t);return n.cmp(this.m)>=0&&n.isub(this.m),n},S.prototype.sub=function(e,t){this._verify2(e,t);var n=e.sub(t);return n.cmpn(0)<0&&n.iadd(this.m),n._forceRed(this)},S.prototype.isub=function(e,t){this._verify2(e,t);var n=e.isub(t);return n.cmpn(0)<0&&n.iadd(this.m),n},S.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},S.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},S.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},S.prototype.isqr=function(e){return this.imul(e,e.clone())},S.prototype.sqr=function(e){return this.mul(e,e)},S.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(r(t%2==1),3===t){var n=this.m.add(new o(1)).iushrn(2);return this.pow(e,n)}for(var i=this.m.subn(1),s=0;!i.isZero()&&0===i.andln(1);)s++,i.iushrn(1);r(!i.isZero());var a=new o(1).toRed(this),u=a.redNeg(),c=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new o(2*l*l).toRed(this);0!==this.pow(l,c).cmp(u);)l.redIAdd(u);for(var h=this.pow(l,i),d=this.pow(e,i.addn(1).iushrn(1)),f=this.pow(e,i),p=s;0!==f.cmp(a);){for(var m=f,g=0;0!==m.cmp(a);g++)m=m.redSqr();r(g<p);var b=this.pow(h,new o(1).iushln(p-g-1));d=d.redMul(b),h=b.redSqr(),f=f.redMul(h),p=g}return d},S.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},S.prototype.pow=function(e,t){if(t.isZero())return new o(1).toRed(this);if(0===t.cmpn(1))return e.clone();var n=new Array(16);n[0]=new o(1).toRed(this),n[1]=e;for(var r=2;r<n.length;r++)n[r]=this.mul(n[r-1],e);var i=n[0],s=0,a=0,u=t.bitLength()%26;for(0===u&&(u=26),r=t.length-1;r>=0;r--){for(var c=t.words[r],l=u-1;l>=0;l--){var h=c>>l&1;i!==n[0]&&(i=this.sqr(i)),0!==h||0!==s?(s<<=1,s|=h,(4===++a||0===r&&0===l)&&(i=this.mul(i,n[s]),a=0,s=0)):a=0}u=26}return i},S.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},S.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},o.mont=function(e){return new M(e)},i(M,S),M.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},M.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},M.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var n=e.imul(t),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=n.isub(r).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},M.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new o(0)._forceRed(this);var n=e.mul(t),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=n.isub(r).iushrn(this.shift),s=i;return i.cmp(this.m)>=0?s=i.isub(this.m):i.cmpn(0)<0&&(s=i.iadd(this.m)),s._forceRed(this)},M.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(e,this)}).call(this,n(34)(e))},function(e,t){},function(e,t){},function(e){e.exports=JSON.parse('{"modp1":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},"modp2":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},"modp5":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},"modp14":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},"modp15":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},"modp16":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},"modp17":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},"modp18":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}}')},function(e,t,n){(function(t){var r=n(132),i=new(n(133)),o=new r(24),s=new r(11),a=new r(10),u=new r(3),c=new r(7),l=n(131),h=n(43);function d(e,n){return n=n||"utf8",t.isBuffer(e)||(e=new t(e,n)),this._pub=new r(e),this}function f(e,n){return n=n||"utf8",t.isBuffer(e)||(e=new t(e,n)),this._priv=new r(e),this}e.exports=m;var p={};function m(e,t,n){this.setGenerator(t),this.__prime=new r(e),this._prime=r.mont(this.__prime),this._primeLen=e.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,n?(this.setPublicKey=d,this.setPrivateKey=f):this._primeCode=8}function g(e,n){var r=new t(e.toArray());return n?r.toString(n):r}Object.defineProperty(m.prototype,"verifyError",{enumerable:!0,get:function(){return"number"!=typeof this._primeCode&&(this._primeCode=function(e,t){var n=t.toString("hex"),r=[n,e.toString(16)].join("_");if(r in p)return p[r];var h,d=0;if(e.isEven()||!l.simpleSieve||!l.fermatTest(e)||!i.test(e))return d+=1,d+="02"===n||"05"===n?8:4,p[r]=d,d;switch(i.test(e.shrn(1))||(d+=2),n){case"02":e.mod(o).cmp(s)&&(d+=8);break;case"05":(h=e.mod(a)).cmp(u)&&h.cmp(c)&&(d+=8);break;default:d+=4}return p[r]=d,d}(this.__prime,this.__gen)),this._primeCode}}),m.prototype.generateKeys=function(){return this._priv||(this._priv=new r(h(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},m.prototype.computeSecret=function(e){var n=(e=(e=new r(e)).toRed(this._prime)).redPow(this._priv).fromRed(),i=new t(n.toArray()),o=this.getPrime();if(i.length<o.length){var s=new t(o.length-i.length);s.fill(0),i=t.concat([s,i])}return i},m.prototype.getPublicKey=function(e){return g(this._pub,e)},m.prototype.getPrivateKey=function(e){return g(this._priv,e)},m.prototype.getPrime=function(e){return g(this.__prime,e)},m.prototype.getGenerator=function(e){return g(this._gen,e)},m.prototype.setGenerator=function(e,n){return n=n||"utf8",t.isBuffer(e)||(e=new t(e,n)),this.__gen=e,this._gen=new r(e),this}}).call(this,n(17).Buffer)},function(e,t,n){var r=n(8).Buffer,i=n(51),o=n(241),s=n(7),a=n(249),u=n(280),c=n(118);function l(e){o.Writable.call(this);var t=c[e];if(!t)throw new Error("Unknown message digest");this._hashType=t.hash,this._hash=i(t.hash),this._tag=t.id,this._signType=t.sign}function h(e){o.Writable.call(this);var t=c[e];if(!t)throw new Error("Unknown message digest");this._hash=i(t.hash),this._tag=t.id,this._signType=t.sign}function d(e){return new l(e)}function f(e){return new h(e)}Object.keys(c).forEach((function(e){c[e].id=r.from(c[e].id,"hex"),c[e.toLowerCase()]=c[e]})),s(l,o.Writable),l.prototype._write=function(e,t,n){this._hash.update(e),n()},l.prototype.update=function(e,t){return"string"==typeof e&&(e=r.from(e,t)),this._hash.update(e),this},l.prototype.sign=function(e,t){this.end();var n=this._hash.digest(),r=a(n,e,this._hashType,this._signType,this._tag);return t?r.toString(t):r},s(h,o.Writable),h.prototype._write=function(e,t,n){this._hash.update(e),n()},h.prototype.update=function(e,t){return"string"==typeof e&&(e=r.from(e,t)),this._hash.update(e),this},h.prototype.verify=function(e,t,n){"string"==typeof t&&(t=r.from(t,n)),this.end();var i=this._hash.digest();return u(t,i,e,this._signType,this._tag)},e.exports={Sign:d,Verify:f,createSign:d,createVerify:f}},function(e,t,n){(t=e.exports=n(134)).Stream=t,t.Readable=t,t.Writable=n(138),t.Duplex=n(48),t.Transform=n(139),t.PassThrough=n(247),t.finished=n(83),t.pipeline=n(248)},function(e,t){},function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=n(17).Buffer,a=n(244).inspect,u=a&&a.custom||"inspect";e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}var t,n,c;return t=e,(n=[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n}},{key:"concat",value:function(e){if(0===this.length)return s.alloc(0);for(var t,n,r,i=s.allocUnsafe(e>>>0),o=this.head,a=0;o;)t=o.data,n=i,r=a,s.prototype.copy.call(t,n,r),a+=o.data.length,o=o.next;return i}},{key:"consume",value:function(e,t){var n;return e<this.head.data.length?(n=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):n=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),n}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,n=1,r=t.data;for(e-=r.length;t=t.next;){var i=t.data,o=e>i.length?i.length:e;if(o===i.length?r+=i:r+=i.slice(0,e),0==(e-=o)){o===i.length?(++n,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=i.slice(o));break}++n}return this.length-=n,r}},{key:"_getBuffer",value:function(e){var t=s.allocUnsafe(e),n=this.head,r=1;for(n.data.copy(t),e-=n.data.length;n=n.next;){var i=n.data,o=e>i.length?i.length:e;if(i.copy(t,t.length-e,0,o),0==(e-=o)){o===i.length?(++r,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=i.slice(o));break}++r}return this.length-=r,t}},{key:u,value:function(e,t){return a(this,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,{depth:0,customInspect:!1}))}}])&&o(t.prototype,n),c&&o(t,c),e}()},function(e,t){},function(e,t,n){"use strict";(function(t){var r;function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=n(83),s=Symbol("lastResolve"),a=Symbol("lastReject"),u=Symbol("error"),c=Symbol("ended"),l=Symbol("lastPromise"),h=Symbol("handlePromise"),d=Symbol("stream");function f(e,t){return{value:e,done:t}}function p(e){var t=e[s];if(null!==t){var n=e[d].read();null!==n&&(e[l]=null,e[s]=null,e[a]=null,t(f(n,!1)))}}function m(e){t.nextTick(p,e)}var g=Object.getPrototypeOf((function(){})),b=Object.setPrototypeOf((i(r={get stream(){return this[d]},next:function(){var e=this,n=this[u];if(null!==n)return Promise.reject(n);if(this[c])return Promise.resolve(f(void 0,!0));if(this[d].destroyed)return new Promise((function(n,r){t.nextTick((function(){e[u]?r(e[u]):n(f(void 0,!0))}))}));var r,i=this[l];if(i)r=new Promise(function(e,t){return function(n,r){e.then((function(){t[c]?n(f(void 0,!0)):t[h](n,r)}),r)}}(i,this));else{var o=this[d].read();if(null!==o)return Promise.resolve(f(o,!1));r=new Promise(this[h])}return this[l]=r,r}},Symbol.asyncIterator,(function(){return this})),i(r,"return",(function(){var e=this;return new Promise((function(t,n){e[d].destroy(null,(function(e){e?n(e):t(f(void 0,!0))}))}))})),r),g);e.exports=function(e){var t,n=Object.create(b,(i(t={},d,{value:e,writable:!0}),i(t,s,{value:null,writable:!0}),i(t,a,{value:null,writable:!0}),i(t,u,{value:null,writable:!0}),i(t,c,{value:e._readableState.endEmitted,writable:!0}),i(t,h,{value:function(e,t){var r=n[d].read();r?(n[l]=null,n[s]=null,n[a]=null,e(f(r,!1))):(n[s]=e,n[a]=t)},writable:!0}),t));return n[l]=null,o(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=n[a];return null!==t&&(n[l]=null,n[s]=null,n[a]=null,t(e)),void(n[u]=e)}var r=n[s];null!==r&&(n[l]=null,n[s]=null,n[a]=null,r(f(void 0,!0))),n[c]=!0})),e.on("readable",m.bind(null,n)),n}}).call(this,n(16))},function(e,t){e.exports=function(){throw new Error("Readable.from is not available in the browser")}},function(e,t,n){"use strict";e.exports=i;var r=n(139);function i(e){if(!(this instanceof i))return new i(e);r.call(this,e)}n(7)(i,r),i.prototype._transform=function(e,t,n){n(null,e)}},function(e,t,n){"use strict";var r;var i=n(47).codes,o=i.ERR_MISSING_ARGS,s=i.ERR_STREAM_DESTROYED;function a(e){if(e)throw e}function u(e,t,i,o){o=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(o);var a=!1;e.on("close",(function(){a=!0})),void 0===r&&(r=n(83)),r(e,{readable:t,writable:i},(function(e){if(e)return o(e);a=!0,o()}));var u=!1;return function(t){if(!a&&!u)return u=!0,function(e){return e.setHeader&&"function"==typeof e.abort}(e)?e.abort():"function"==typeof e.destroy?e.destroy():void o(t||new s("pipe"))}}function c(e){e()}function l(e,t){return e.pipe(t)}function h(e){return e.length?"function"!=typeof e[e.length-1]?a:e.pop():a}e.exports=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,i=h(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new o("streams");var s=t.map((function(e,n){var o=n<t.length-1;return u(e,o,n>0,(function(e){r||(r=e),e&&s.forEach(c),o||(s.forEach(c),i(r))}))}));return t.reduce(l)}},function(e,t,n){var r=n(8).Buffer,i=n(116),o=n(84),s=n(86).ec,a=n(85),u=n(63),c=n(151);function l(e,t,n,o){if((e=r.from(e.toArray())).length<t.byteLength()){var s=r.alloc(t.byteLength()-e.length);e=r.concat([s,e])}var a=n.length,u=function(e,t){e=(e=h(e,t)).mod(t);var n=r.from(e.toArray());if(n.length<t.byteLength()){var i=r.alloc(t.byteLength()-n.length);n=r.concat([i,n])}return n}(n,t),c=r.alloc(a);c.fill(1);var l=r.alloc(a);return l=i(o,l).update(c).update(r.from([0])).update(e).update(u).digest(),c=i(o,l).update(c).digest(),{k:l=i(o,l).update(c).update(r.from([1])).update(e).update(u).digest(),v:c=i(o,l).update(c).digest()}}function h(e,t){var n=new a(e),r=(e.length<<3)-t.bitLength();return r>0&&n.ishrn(r),n}function d(e,t,n){var o,s;do{for(o=r.alloc(0);8*o.length<e.bitLength();)t.v=i(n,t.k).update(t.v).digest(),o=r.concat([o,t.v]);s=h(o,e),t.k=i(n,t.k).update(t.v).update(r.from([0])).digest(),t.v=i(n,t.k).update(t.v).digest()}while(-1!==s.cmp(e));return s}function f(e,t,n,r){return e.toRed(a.mont(n)).redPow(t).fromRed().mod(r)}e.exports=function(e,t,n,i,p){var m=u(t);if(m.curve){if("ecdsa"!==i&&"ecdsa/rsa"!==i)throw new Error("wrong private key type");return function(e,t){var n=c[t.curve.join(".")];if(!n)throw new Error("unknown curve "+t.curve.join("."));var i=new s(n).keyFromPrivate(t.privateKey).sign(e);return r.from(i.toDER())}(e,m)}if("dsa"===m.type){if("dsa"!==i)throw new Error("wrong private key type");return function(e,t,n){var i,o=t.params.priv_key,s=t.params.p,u=t.params.q,c=t.params.g,p=new a(0),m=h(e,u).mod(u),g=!1,b=l(o,u,e,n);for(;!1===g;)i=d(u,b,n),p=f(c,i,s,u),0===(g=i.invm(u).imul(m.add(o.mul(p))).mod(u)).cmpn(0)&&(g=!1,p=new a(0));return function(e,t){e=e.toArray(),t=t.toArray(),128&e[0]&&(e=[0].concat(e));128&t[0]&&(t=[0].concat(t));var n=[48,e.length+t.length+4,2,e.length];return n=n.concat(e,[2,t.length],t),r.from(n)}(p,g)}(e,m,n)}if("rsa"!==i&&"ecdsa/rsa"!==i)throw new Error("wrong private key type");e=r.concat([p,e]);for(var g=m.modulus.byteLength(),b=[0,1];e.length+b.length+1<g;)b.push(255);b.push(0);for(var v=-1;++v<e.length;)b.push(e[v]);return o(b,m)},e.exports.getKey=l,e.exports.makeKey=d},function(e,t){},function(e){e.exports=JSON.parse('{"name":"elliptic","version":"6.5.4","description":"EC cryptography","main":"lib/elliptic.js","files":["lib"],"scripts":{"lint":"eslint lib test","lint:fix":"npm run lint -- --fix","unit":"istanbul test _mocha --reporter=spec test/index.js","test":"npm run lint && npm run unit","version":"grunt dist && git add dist/"},"repository":{"type":"git","url":"git@github.com:indutny/elliptic"},"keywords":["EC","Elliptic","curve","Cryptography"],"author":"Fedor Indutny <fedor@indutny.com>","license":"MIT","bugs":{"url":"https://github.com/indutny/elliptic/issues"},"homepage":"https://github.com/indutny/elliptic","devDependencies":{"brfs":"^2.0.2","coveralls":"^3.1.0","eslint":"^7.6.0","grunt":"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1","istanbul":"^0.4.5","mocha":"^8.0.1"},"dependencies":{"bn.js":"^4.11.9","brorand":"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1","inherits":"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"}}')},function(e,t){},function(e,t,n){"use strict";var r=n(25),i=n(30),o=n(7),s=n(62),a=r.assert;function u(e){s.call(this,"short",e),this.a=new i(e.a,16).toRed(this.red),this.b=new i(e.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(e),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}function c(e,t,n,r){s.BasePoint.call(this,e,"affine"),null===t&&null===n?(this.x=null,this.y=null,this.inf=!0):(this.x=new i(t,16),this.y=new i(n,16),r&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function l(e,t,n,r){s.BasePoint.call(this,e,"jacobian"),null===t&&null===n&&null===r?(this.x=this.curve.one,this.y=this.curve.one,this.z=new i(0)):(this.x=new i(t,16),this.y=new i(n,16),this.z=new i(r,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}o(u,s),e.exports=u,u.prototype._getEndomorphism=function(e){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var t,n;if(e.beta)t=new i(e.beta,16).toRed(this.red);else{var r=this._getEndoRoots(this.p);t=(t=r[0].cmp(r[1])<0?r[0]:r[1]).toRed(this.red)}if(e.lambda)n=new i(e.lambda,16);else{var o=this._getEndoRoots(this.n);0===this.g.mul(o[0]).x.cmp(this.g.x.redMul(t))?n=o[0]:(n=o[1],a(0===this.g.mul(n).x.cmp(this.g.x.redMul(t))))}return{beta:t,lambda:n,basis:e.basis?e.basis.map((function(e){return{a:new i(e.a,16),b:new i(e.b,16)}})):this._getEndoBasis(n)}}},u.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:i.mont(e),n=new i(2).toRed(t).redInvm(),r=n.redNeg(),o=new i(3).toRed(t).redNeg().redSqrt().redMul(n);return[r.redAdd(o).fromRed(),r.redSub(o).fromRed()]},u.prototype._getEndoBasis=function(e){for(var t,n,r,o,s,a,u,c,l,h=this.n.ushrn(Math.floor(this.n.bitLength()/2)),d=e,f=this.n.clone(),p=new i(1),m=new i(0),g=new i(0),b=new i(1),v=0;0!==d.cmpn(0);){var y=f.div(d);c=f.sub(y.mul(d)),l=g.sub(y.mul(p));var _=b.sub(y.mul(m));if(!r&&c.cmp(h)<0)t=u.neg(),n=p,r=c.neg(),o=l;else if(r&&2==++v)break;u=c,f=d,d=c,g=p,p=l,b=m,m=_}s=c.neg(),a=l;var w=r.sqr().add(o.sqr());return s.sqr().add(a.sqr()).cmp(w)>=0&&(s=t,a=n),r.negative&&(r=r.neg(),o=o.neg()),s.negative&&(s=s.neg(),a=a.neg()),[{a:r,b:o},{a:s,b:a}]},u.prototype._endoSplit=function(e){var t=this.endo.basis,n=t[0],r=t[1],i=r.b.mul(e).divRound(this.n),o=n.b.neg().mul(e).divRound(this.n),s=i.mul(n.a),a=o.mul(r.a),u=i.mul(n.b),c=o.mul(r.b);return{k1:e.sub(s).sub(a),k2:u.add(c).neg()}},u.prototype.pointFromX=function(e,t){(e=new i(e,16)).red||(e=e.toRed(this.red));var n=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),r=n.redSqrt();if(0!==r.redSqr().redSub(n).cmp(this.zero))throw new Error("invalid point");var o=r.fromRed().isOdd();return(t&&!o||!t&&o)&&(r=r.redNeg()),this.point(e,r)},u.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,n=e.y,r=this.a.redMul(t),i=t.redSqr().redMul(t).redIAdd(r).redIAdd(this.b);return 0===n.redSqr().redISub(i).cmpn(0)},u.prototype._endoWnafMulAdd=function(e,t,n){for(var r=this._endoWnafT1,i=this._endoWnafT2,o=0;o<e.length;o++){var s=this._endoSplit(t[o]),a=e[o],u=a._getBeta();s.k1.negative&&(s.k1.ineg(),a=a.neg(!0)),s.k2.negative&&(s.k2.ineg(),u=u.neg(!0)),r[2*o]=a,r[2*o+1]=u,i[2*o]=s.k1,i[2*o+1]=s.k2}for(var c=this._wnafMulAdd(1,r,i,2*o,n),l=0;l<2*o;l++)r[l]=null,i[l]=null;return c},o(c,s.BasePoint),u.prototype.point=function(e,t,n){return new c(this,e,t,n)},u.prototype.pointFromJSON=function(e,t){return c.fromJSON(this,e,t)},c.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var n=this.curve,r=function(e){return n.point(e.x.redMul(n.endo.beta),e.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(r)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(r)}}}return t}},c.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},c.fromJSON=function(e,t,n){"string"==typeof t&&(t=JSON.parse(t));var r=e.point(t[0],t[1],n);if(!t[2])return r;function i(t){return e.point(t[0],t[1],n)}var o=t[2];return r.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[r].concat(o.doubles.points.map(i))},naf:o.naf&&{wnd:o.naf.wnd,points:[r].concat(o.naf.points.map(i))}},r},c.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},c.prototype.isInfinity=function(){return this.inf},c.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(0===this.x.cmp(e.x))return this.curve.point(null,null);var t=this.y.redSub(e.y);0!==t.cmpn(0)&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var n=t.redSqr().redISub(this.x).redISub(e.x),r=t.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,r)},c.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(0===e.cmpn(0))return this.curve.point(null,null);var t=this.curve.a,n=this.x.redSqr(),r=e.redInvm(),i=n.redAdd(n).redIAdd(n).redIAdd(t).redMul(r),o=i.redSqr().redISub(this.x.redAdd(this.x)),s=i.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,s)},c.prototype.getX=function(){return this.x.fromRed()},c.prototype.getY=function(){return this.y.fromRed()},c.prototype.mul=function(e){return e=new i(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)},c.prototype.mulAdd=function(e,t,n){var r=[this,t],i=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(r,i):this.curve._wnafMulAdd(1,r,i,2)},c.prototype.jmulAdd=function(e,t,n){var r=[this,t],i=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(r,i,!0):this.curve._wnafMulAdd(1,r,i,2,!0)},c.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||0===this.x.cmp(e.x)&&0===this.y.cmp(e.y))},c.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var n=this.precomputed,r=function(e){return e.neg()};t.precomputed={naf:n.naf&&{wnd:n.naf.wnd,points:n.naf.points.map(r)},doubles:n.doubles&&{step:n.doubles.step,points:n.doubles.points.map(r)}}}return t},c.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},o(l,s.BasePoint),u.prototype.jpoint=function(e,t,n){return new l(this,e,t,n)},l.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),n=this.x.redMul(t),r=this.y.redMul(t).redMul(e);return this.curve.point(n,r)},l.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},l.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),n=this.z.redSqr(),r=this.x.redMul(t),i=e.x.redMul(n),o=this.y.redMul(t.redMul(e.z)),s=e.y.redMul(n.redMul(this.z)),a=r.redSub(i),u=o.redSub(s);if(0===a.cmpn(0))return 0!==u.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var c=a.redSqr(),l=c.redMul(a),h=r.redMul(c),d=u.redSqr().redIAdd(l).redISub(h).redISub(h),f=u.redMul(h.redISub(d)).redISub(o.redMul(l)),p=this.z.redMul(e.z).redMul(a);return this.curve.jpoint(d,f,p)},l.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),n=this.x,r=e.x.redMul(t),i=this.y,o=e.y.redMul(t).redMul(this.z),s=n.redSub(r),a=i.redSub(o);if(0===s.cmpn(0))return 0!==a.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var u=s.redSqr(),c=u.redMul(s),l=n.redMul(u),h=a.redSqr().redIAdd(c).redISub(l).redISub(l),d=a.redMul(l.redISub(h)).redISub(i.redMul(c)),f=this.z.redMul(s);return this.curve.jpoint(h,d,f)},l.prototype.dblp=function(e){if(0===e)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var t;if(this.curve.zeroA||this.curve.threeA){var n=this;for(t=0;t<e;t++)n=n.dbl();return n}var r=this.curve.a,i=this.curve.tinv,o=this.x,s=this.y,a=this.z,u=a.redSqr().redSqr(),c=s.redAdd(s);for(t=0;t<e;t++){var l=o.redSqr(),h=c.redSqr(),d=h.redSqr(),f=l.redAdd(l).redIAdd(l).redIAdd(r.redMul(u)),p=o.redMul(h),m=f.redSqr().redISub(p.redAdd(p)),g=p.redISub(m),b=f.redMul(g);b=b.redIAdd(b).redISub(d);var v=c.redMul(a);t+1<e&&(u=u.redMul(d)),o=m,a=v,c=b}return this.curve.jpoint(o,c.redMul(i),a)},l.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},l.prototype._zeroDbl=function(){var e,t,n;if(this.zOne){var r=this.x.redSqr(),i=this.y.redSqr(),o=i.redSqr(),s=this.x.redAdd(i).redSqr().redISub(r).redISub(o);s=s.redIAdd(s);var a=r.redAdd(r).redIAdd(r),u=a.redSqr().redISub(s).redISub(s),c=o.redIAdd(o);c=(c=c.redIAdd(c)).redIAdd(c),e=u,t=a.redMul(s.redISub(u)).redISub(c),n=this.y.redAdd(this.y)}else{var l=this.x.redSqr(),h=this.y.redSqr(),d=h.redSqr(),f=this.x.redAdd(h).redSqr().redISub(l).redISub(d);f=f.redIAdd(f);var p=l.redAdd(l).redIAdd(l),m=p.redSqr(),g=d.redIAdd(d);g=(g=g.redIAdd(g)).redIAdd(g),e=m.redISub(f).redISub(f),t=p.redMul(f.redISub(e)).redISub(g),n=(n=this.y.redMul(this.z)).redIAdd(n)}return this.curve.jpoint(e,t,n)},l.prototype._threeDbl=function(){var e,t,n;if(this.zOne){var r=this.x.redSqr(),i=this.y.redSqr(),o=i.redSqr(),s=this.x.redAdd(i).redSqr().redISub(r).redISub(o);s=s.redIAdd(s);var a=r.redAdd(r).redIAdd(r).redIAdd(this.curve.a),u=a.redSqr().redISub(s).redISub(s);e=u;var c=o.redIAdd(o);c=(c=c.redIAdd(c)).redIAdd(c),t=a.redMul(s.redISub(u)).redISub(c),n=this.y.redAdd(this.y)}else{var l=this.z.redSqr(),h=this.y.redSqr(),d=this.x.redMul(h),f=this.x.redSub(l).redMul(this.x.redAdd(l));f=f.redAdd(f).redIAdd(f);var p=d.redIAdd(d),m=(p=p.redIAdd(p)).redAdd(p);e=f.redSqr().redISub(m),n=this.y.redAdd(this.z).redSqr().redISub(h).redISub(l);var g=h.redSqr();g=(g=(g=g.redIAdd(g)).redIAdd(g)).redIAdd(g),t=f.redMul(p.redISub(e)).redISub(g)}return this.curve.jpoint(e,t,n)},l.prototype._dbl=function(){var e=this.curve.a,t=this.x,n=this.y,r=this.z,i=r.redSqr().redSqr(),o=t.redSqr(),s=n.redSqr(),a=o.redAdd(o).redIAdd(o).redIAdd(e.redMul(i)),u=t.redAdd(t),c=(u=u.redIAdd(u)).redMul(s),l=a.redSqr().redISub(c.redAdd(c)),h=c.redISub(l),d=s.redSqr();d=(d=(d=d.redIAdd(d)).redIAdd(d)).redIAdd(d);var f=a.redMul(h).redISub(d),p=n.redAdd(n).redMul(r);return this.curve.jpoint(l,f,p)},l.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),n=this.z.redSqr(),r=t.redSqr(),i=e.redAdd(e).redIAdd(e),o=i.redSqr(),s=this.x.redAdd(t).redSqr().redISub(e).redISub(r),a=(s=(s=(s=s.redIAdd(s)).redAdd(s).redIAdd(s)).redISub(o)).redSqr(),u=r.redIAdd(r);u=(u=(u=u.redIAdd(u)).redIAdd(u)).redIAdd(u);var c=i.redIAdd(s).redSqr().redISub(o).redISub(a).redISub(u),l=t.redMul(c);l=(l=l.redIAdd(l)).redIAdd(l);var h=this.x.redMul(a).redISub(l);h=(h=h.redIAdd(h)).redIAdd(h);var d=this.y.redMul(c.redMul(u.redISub(c)).redISub(s.redMul(a)));d=(d=(d=d.redIAdd(d)).redIAdd(d)).redIAdd(d);var f=this.z.redAdd(s).redSqr().redISub(n).redISub(a);return this.curve.jpoint(h,d,f)},l.prototype.mul=function(e,t){return e=new i(e,t),this.curve._wnafMul(this,e)},l.prototype.eq=function(e){if("affine"===e.type)return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),n=e.z.redSqr();if(0!==this.x.redMul(n).redISub(e.x.redMul(t)).cmpn(0))return!1;var r=t.redMul(this.z),i=n.redMul(e.z);return 0===this.y.redMul(i).redISub(e.y.redMul(r)).cmpn(0)},l.prototype.eqXToP=function(e){var t=this.z.redSqr(),n=e.toRed(this.curve.red).redMul(t);if(0===this.x.cmp(n))return!0;for(var r=e.clone(),i=this.curve.redN.redMul(t);;){if(r.iadd(this.curve.n),r.cmp(this.curve.p)>=0)return!1;if(n.redIAdd(i),0===this.x.cmp(n))return!0}},l.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},l.prototype.isInfinity=function(){return 0===this.z.cmpn(0)}},function(e,t,n){"use strict";var r=n(30),i=n(7),o=n(62),s=n(25);function a(e){o.call(this,"mont",e),this.a=new r(e.a,16).toRed(this.red),this.b=new r(e.b,16).toRed(this.red),this.i4=new r(4).toRed(this.red).redInvm(),this.two=new r(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function u(e,t,n){o.BasePoint.call(this,e,"projective"),null===t&&null===n?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new r(t,16),this.z=new r(n,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}i(a,o),e.exports=a,a.prototype.validate=function(e){var t=e.normalize().x,n=t.redSqr(),r=n.redMul(t).redAdd(n.redMul(this.a)).redAdd(t);return 0===r.redSqrt().redSqr().cmp(r)},i(u,o.BasePoint),a.prototype.decodePoint=function(e,t){return this.point(s.toArray(e,t),1)},a.prototype.point=function(e,t){return new u(this,e,t)},a.prototype.pointFromJSON=function(e){return u.fromJSON(this,e)},u.prototype.precompute=function(){},u.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},u.fromJSON=function(e,t){return new u(e,t[0],t[1]||e.one)},u.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},u.prototype.isInfinity=function(){return 0===this.z.cmpn(0)},u.prototype.dbl=function(){var e=this.x.redAdd(this.z).redSqr(),t=this.x.redSub(this.z).redSqr(),n=e.redSub(t),r=e.redMul(t),i=n.redMul(t.redAdd(this.curve.a24.redMul(n)));return this.curve.point(r,i)},u.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},u.prototype.diffAdd=function(e,t){var n=this.x.redAdd(this.z),r=this.x.redSub(this.z),i=e.x.redAdd(e.z),o=e.x.redSub(e.z).redMul(n),s=i.redMul(r),a=t.z.redMul(o.redAdd(s).redSqr()),u=t.x.redMul(o.redISub(s).redSqr());return this.curve.point(a,u)},u.prototype.mul=function(e){for(var t=e.clone(),n=this,r=this.curve.point(null,null),i=[];0!==t.cmpn(0);t.iushrn(1))i.push(t.andln(1));for(var o=i.length-1;o>=0;o--)0===i[o]?(n=n.diffAdd(r,this),r=r.dbl()):(r=n.diffAdd(r,this),n=n.dbl());return r},u.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},u.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},u.prototype.eq=function(e){return 0===this.getX().cmp(e.getX())},u.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},u.prototype.getX=function(){return this.normalize(),this.x.fromRed()}},function(e,t,n){"use strict";var r=n(25),i=n(30),o=n(7),s=n(62),a=r.assert;function u(e){this.twisted=1!=(0|e.a),this.mOneA=this.twisted&&-1==(0|e.a),this.extended=this.mOneA,s.call(this,"edwards",e),this.a=new i(e.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new i(e.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new i(e.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),a(!this.twisted||0===this.c.fromRed().cmpn(1)),this.oneC=1==(0|e.c)}function c(e,t,n,r,o){s.BasePoint.call(this,e,"projective"),null===t&&null===n&&null===r?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new i(t,16),this.y=new i(n,16),this.z=r?new i(r,16):this.curve.one,this.t=o&&new i(o,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}o(u,s),e.exports=u,u.prototype._mulA=function(e){return this.mOneA?e.redNeg():this.a.redMul(e)},u.prototype._mulC=function(e){return this.oneC?e:this.c.redMul(e)},u.prototype.jpoint=function(e,t,n,r){return this.point(e,t,n,r)},u.prototype.pointFromX=function(e,t){(e=new i(e,16)).red||(e=e.toRed(this.red));var n=e.redSqr(),r=this.c2.redSub(this.a.redMul(n)),o=this.one.redSub(this.c2.redMul(this.d).redMul(n)),s=r.redMul(o.redInvm()),a=s.redSqrt();if(0!==a.redSqr().redSub(s).cmp(this.zero))throw new Error("invalid point");var u=a.fromRed().isOdd();return(t&&!u||!t&&u)&&(a=a.redNeg()),this.point(e,a)},u.prototype.pointFromY=function(e,t){(e=new i(e,16)).red||(e=e.toRed(this.red));var n=e.redSqr(),r=n.redSub(this.c2),o=n.redMul(this.d).redMul(this.c2).redSub(this.a),s=r.redMul(o.redInvm());if(0===s.cmp(this.zero)){if(t)throw new Error("invalid point");return this.point(this.zero,e)}var a=s.redSqrt();if(0!==a.redSqr().redSub(s).cmp(this.zero))throw new Error("invalid point");return a.fromRed().isOdd()!==t&&(a=a.redNeg()),this.point(a,e)},u.prototype.validate=function(e){if(e.isInfinity())return!0;e.normalize();var t=e.x.redSqr(),n=e.y.redSqr(),r=t.redMul(this.a).redAdd(n),i=this.c2.redMul(this.one.redAdd(this.d.redMul(t).redMul(n)));return 0===r.cmp(i)},o(c,s.BasePoint),u.prototype.pointFromJSON=function(e){return c.fromJSON(this,e)},u.prototype.point=function(e,t,n,r){return new c(this,e,t,n,r)},c.fromJSON=function(e,t){return new c(e,t[0],t[1],t[2])},c.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},c.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&(0===this.y.cmp(this.z)||this.zOne&&0===this.y.cmp(this.curve.c))},c.prototype._extDbl=function(){var e=this.x.redSqr(),t=this.y.redSqr(),n=this.z.redSqr();n=n.redIAdd(n);var r=this.curve._mulA(e),i=this.x.redAdd(this.y).redSqr().redISub(e).redISub(t),o=r.redAdd(t),s=o.redSub(n),a=r.redSub(t),u=i.redMul(s),c=o.redMul(a),l=i.redMul(a),h=s.redMul(o);return this.curve.point(u,c,h,l)},c.prototype._projDbl=function(){var e,t,n,r,i,o,s=this.x.redAdd(this.y).redSqr(),a=this.x.redSqr(),u=this.y.redSqr();if(this.curve.twisted){var c=(r=this.curve._mulA(a)).redAdd(u);this.zOne?(e=s.redSub(a).redSub(u).redMul(c.redSub(this.curve.two)),t=c.redMul(r.redSub(u)),n=c.redSqr().redSub(c).redSub(c)):(i=this.z.redSqr(),o=c.redSub(i).redISub(i),e=s.redSub(a).redISub(u).redMul(o),t=c.redMul(r.redSub(u)),n=c.redMul(o))}else r=a.redAdd(u),i=this.curve._mulC(this.z).redSqr(),o=r.redSub(i).redSub(i),e=this.curve._mulC(s.redISub(r)).redMul(o),t=this.curve._mulC(r).redMul(a.redISub(u)),n=r.redMul(o);return this.curve.point(e,t,n)},c.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},c.prototype._extAdd=function(e){var t=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),n=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),r=this.t.redMul(this.curve.dd).redMul(e.t),i=this.z.redMul(e.z.redAdd(e.z)),o=n.redSub(t),s=i.redSub(r),a=i.redAdd(r),u=n.redAdd(t),c=o.redMul(s),l=a.redMul(u),h=o.redMul(u),d=s.redMul(a);return this.curve.point(c,l,d,h)},c.prototype._projAdd=function(e){var t,n,r=this.z.redMul(e.z),i=r.redSqr(),o=this.x.redMul(e.x),s=this.y.redMul(e.y),a=this.curve.d.redMul(o).redMul(s),u=i.redSub(a),c=i.redAdd(a),l=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(o).redISub(s),h=r.redMul(u).redMul(l);return this.curve.twisted?(t=r.redMul(c).redMul(s.redSub(this.curve._mulA(o))),n=u.redMul(c)):(t=r.redMul(c).redMul(s.redSub(o)),n=this.curve._mulC(u).redMul(c)),this.curve.point(h,t,n)},c.prototype.add=function(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)},c.prototype.mul=function(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)},c.prototype.mulAdd=function(e,t,n){return this.curve._wnafMulAdd(1,[this,t],[e,n],2,!1)},c.prototype.jmulAdd=function(e,t,n){return this.curve._wnafMulAdd(1,[this,t],[e,n],2,!0)},c.prototype.normalize=function(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this},c.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},c.prototype.getX=function(){return this.normalize(),this.x.fromRed()},c.prototype.getY=function(){return this.normalize(),this.y.fromRed()},c.prototype.eq=function(e){return this===e||0===this.getX().cmp(e.getX())&&0===this.getY().cmp(e.getY())},c.prototype.eqXToP=function(e){var t=e.toRed(this.curve.red).redMul(this.z);if(0===this.x.cmp(t))return!0;for(var n=e.clone(),r=this.curve.redN.redMul(this.z);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(t.redIAdd(r),0===this.x.cmp(t))return!0}},c.prototype.toP=c.prototype.normalize,c.prototype.mixedAdd=c.prototype.add},function(e,t,n){"use strict";t.sha1=n(257),t.sha224=n(258),t.sha256=n(143),t.sha384=n(259),t.sha512=n(144)},function(e,t,n){"use strict";var r=n(27),i=n(53),o=n(142),s=r.rotl32,a=r.sum32,u=r.sum32_5,c=o.ft_1,l=i.BlockHash,h=[1518500249,1859775393,2400959708,3395469782];function d(){if(!(this instanceof d))return new d;l.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}r.inherits(d,l),e.exports=d,d.blockSize=512,d.outSize=160,d.hmacStrength=80,d.padLength=64,d.prototype._update=function(e,t){for(var n=this.W,r=0;r<16;r++)n[r]=e[t+r];for(;r<n.length;r++)n[r]=s(n[r-3]^n[r-8]^n[r-14]^n[r-16],1);var i=this.h[0],o=this.h[1],l=this.h[2],d=this.h[3],f=this.h[4];for(r=0;r<n.length;r++){var p=~~(r/20),m=u(s(i,5),c(p,o,l,d),f,n[r],h[p]);f=d,d=l,l=s(o,30),o=i,i=m}this.h[0]=a(this.h[0],i),this.h[1]=a(this.h[1],o),this.h[2]=a(this.h[2],l),this.h[3]=a(this.h[3],d),this.h[4]=a(this.h[4],f)},d.prototype._digest=function(e){return"hex"===e?r.toHex32(this.h,"big"):r.split32(this.h,"big")}},function(e,t,n){"use strict";var r=n(27),i=n(143);function o(){if(!(this instanceof o))return new o;i.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}r.inherits(o,i),e.exports=o,o.blockSize=512,o.outSize=224,o.hmacStrength=192,o.padLength=64,o.prototype._digest=function(e){return"hex"===e?r.toHex32(this.h.slice(0,7),"big"):r.split32(this.h.slice(0,7),"big")}},function(e,t,n){"use strict";var r=n(27),i=n(144);function o(){if(!(this instanceof o))return new o;i.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}r.inherits(o,i),e.exports=o,o.blockSize=1024,o.outSize=384,o.hmacStrength=192,o.padLength=128,o.prototype._digest=function(e){return"hex"===e?r.toHex32(this.h.slice(0,12),"big"):r.split32(this.h.slice(0,12),"big")}},function(e,t,n){"use strict";var r=n(27),i=n(53),o=r.rotl32,s=r.sum32,a=r.sum32_3,u=r.sum32_4,c=i.BlockHash;function l(){if(!(this instanceof l))return new l;c.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function h(e,t,n,r){return e<=15?t^n^r:e<=31?t&n|~t&r:e<=47?(t|~n)^r:e<=63?t&r|n&~r:t^(n|~r)}function d(e){return e<=15?0:e<=31?1518500249:e<=47?1859775393:e<=63?2400959708:2840853838}function f(e){return e<=15?1352829926:e<=31?1548603684:e<=47?1836072691:e<=63?2053994217:0}r.inherits(l,c),t.ripemd160=l,l.blockSize=512,l.outSize=160,l.hmacStrength=192,l.padLength=64,l.prototype._update=function(e,t){for(var n=this.h[0],r=this.h[1],i=this.h[2],c=this.h[3],l=this.h[4],v=n,y=r,_=i,w=c,E=l,S=0;S<80;S++){var M=s(o(u(n,h(S,r,i,c),e[p[S]+t],d(S)),g[S]),l);n=l,l=c,c=o(i,10),i=r,r=M,M=s(o(u(v,h(79-S,y,_,w),e[m[S]+t],f(S)),b[S]),E),v=E,E=w,w=o(_,10),_=y,y=M}M=a(this.h[1],i,w),this.h[1]=a(this.h[2],c,E),this.h[2]=a(this.h[3],l,v),this.h[3]=a(this.h[4],n,y),this.h[4]=a(this.h[0],r,_),this.h[0]=M},l.prototype._digest=function(e){return"hex"===e?r.toHex32(this.h,"little"):r.split32(this.h,"little")};var p=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],m=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],g=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],b=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},function(e,t,n){"use strict";var r=n(27),i=n(24);function o(e,t,n){if(!(this instanceof o))return new o(e,t,n);this.Hash=e,this.blockSize=e.blockSize/8,this.outSize=e.outSize/8,this.inner=null,this.outer=null,this._init(r.toArray(t,n))}e.exports=o,o.prototype._init=function(e){e.length>this.blockSize&&(e=(new this.Hash).update(e).digest()),i(e.length<=this.blockSize);for(var t=e.length;t<this.blockSize;t++)e.push(0);for(t=0;t<e.length;t++)e[t]^=54;for(this.inner=(new this.Hash).update(e),t=0;t<e.length;t++)e[t]^=106;this.outer=(new this.Hash).update(e)},o.prototype.update=function(e,t){return this.inner.update(e,t),this},o.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)}},function(e,t){e.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}},function(e,t,n){"use strict";var r=n(30),i=n(264),o=n(25),s=n(87),a=n(82),u=o.assert,c=n(265),l=n(266);function h(e){if(!(this instanceof h))return new h(e);"string"==typeof e&&(u(Object.prototype.hasOwnProperty.call(s,e),"Unknown curve "+e),e=s[e]),e instanceof s.PresetCurve&&(e={curve:e}),this.curve=e.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=e.curve.g,this.g.precompute(e.curve.n.bitLength()+1),this.hash=e.hash||e.curve.hash}e.exports=h,h.prototype.keyPair=function(e){return new c(this,e)},h.prototype.keyFromPrivate=function(e,t){return c.fromPrivate(this,e,t)},h.prototype.keyFromPublic=function(e,t){return c.fromPublic(this,e,t)},h.prototype.genKeyPair=function(e){e||(e={});for(var t=new i({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||a(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),n=this.n.byteLength(),o=this.n.sub(new r(2));;){var s=new r(t.generate(n));if(!(s.cmp(o)>0))return s.iaddn(1),this.keyFromPrivate(s)}},h.prototype._truncateToN=function(e,t){var n=8*e.byteLength()-this.n.bitLength();return n>0&&(e=e.ushrn(n)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e},h.prototype.sign=function(e,t,n,o){"object"==typeof n&&(o=n,n=null),o||(o={}),t=this.keyFromPrivate(t,n),e=this._truncateToN(new r(e,16));for(var s=this.n.byteLength(),a=t.getPrivate().toArray("be",s),u=e.toArray("be",s),c=new i({hash:this.hash,entropy:a,nonce:u,pers:o.pers,persEnc:o.persEnc||"utf8"}),h=this.n.sub(new r(1)),d=0;;d++){var f=o.k?o.k(d):new r(c.generate(this.n.byteLength()));if(!((f=this._truncateToN(f,!0)).cmpn(1)<=0||f.cmp(h)>=0)){var p=this.g.mul(f);if(!p.isInfinity()){var m=p.getX(),g=m.umod(this.n);if(0!==g.cmpn(0)){var b=f.invm(this.n).mul(g.mul(t.getPrivate()).iadd(e));if(0!==(b=b.umod(this.n)).cmpn(0)){var v=(p.getY().isOdd()?1:0)|(0!==m.cmp(g)?2:0);return o.canonical&&b.cmp(this.nh)>0&&(b=this.n.sub(b),v^=1),new l({r:g,s:b,recoveryParam:v})}}}}}},h.prototype.verify=function(e,t,n,i){e=this._truncateToN(new r(e,16)),n=this.keyFromPublic(n,i);var o=(t=new l(t,"hex")).r,s=t.s;if(o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;if(s.cmpn(1)<0||s.cmp(this.n)>=0)return!1;var a,u=s.invm(this.n),c=u.mul(e).umod(this.n),h=u.mul(o).umod(this.n);return this.curve._maxwellTrick?!(a=this.g.jmulAdd(c,n.getPublic(),h)).isInfinity()&&a.eqXToP(o):!(a=this.g.mulAdd(c,n.getPublic(),h)).isInfinity()&&0===a.getX().umod(this.n).cmp(o)},h.prototype.recoverPubKey=function(e,t,n,i){u((3&n)===n,"The recovery param is more than two bits"),t=new l(t,i);var o=this.n,s=new r(e),a=t.r,c=t.s,h=1&n,d=n>>1;if(a.cmp(this.curve.p.umod(this.curve.n))>=0&&d)throw new Error("Unable to find sencond key candinate");a=d?this.curve.pointFromX(a.add(this.curve.n),h):this.curve.pointFromX(a,h);var f=t.r.invm(o),p=o.sub(s).mul(f).umod(o),m=c.mul(f).umod(o);return this.g.mulAdd(p,a,m)},h.prototype.getKeyRecoveryParam=function(e,t,n,r){if(null!==(t=new l(t,r)).recoveryParam)return t.recoveryParam;for(var i=0;i<4;i++){var o;try{o=this.recoverPubKey(e,t,i)}catch(e){continue}if(o.eq(n))return i}throw new Error("Unable to find valid recovery factor")}},function(e,t,n){"use strict";var r=n(88),i=n(140),o=n(24);function s(e){if(!(this instanceof s))return new s(e);this.hash=e.hash,this.predResist=!!e.predResist,this.outLen=this.hash.outSize,this.minEntropy=e.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var t=i.toArray(e.entropy,e.entropyEnc||"hex"),n=i.toArray(e.nonce,e.nonceEnc||"hex"),r=i.toArray(e.pers,e.persEnc||"hex");o(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(t,n,r)}e.exports=s,s.prototype._init=function(e,t,n){var r=e.concat(t).concat(n);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var i=0;i<this.V.length;i++)this.K[i]=0,this.V[i]=1;this._update(r),this._reseed=1,this.reseedInterval=281474976710656},s.prototype._hmac=function(){return new r.hmac(this.hash,this.K)},s.prototype._update=function(e){var t=this._hmac().update(this.V).update([0]);e&&(t=t.update(e)),this.K=t.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())},s.prototype.reseed=function(e,t,n,r){"string"!=typeof t&&(r=n,n=t,t=null),e=i.toArray(e,t),n=i.toArray(n,r),o(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(n||[])),this._reseed=1},s.prototype.generate=function(e,t,n,r){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!=typeof t&&(r=n,n=t,t=null),n&&(n=i.toArray(n,r||"hex"),this._update(n));for(var o=[];o.length<e;)this.V=this._hmac().update(this.V).digest(),o=o.concat(this.V);var s=o.slice(0,e);return this._update(n),this._reseed++,i.encode(s,t)}},function(e,t,n){"use strict";var r=n(30),i=n(25).assert;function o(e,t){this.ec=e,this.priv=null,this.pub=null,t.priv&&this._importPrivate(t.priv,t.privEnc),t.pub&&this._importPublic(t.pub,t.pubEnc)}e.exports=o,o.fromPublic=function(e,t,n){return t instanceof o?t:new o(e,{pub:t,pubEnc:n})},o.fromPrivate=function(e,t,n){return t instanceof o?t:new o(e,{priv:t,privEnc:n})},o.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},o.prototype.getPublic=function(e,t){return"string"==typeof e&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,e):this.pub},o.prototype.getPrivate=function(e){return"hex"===e?this.priv.toString(16,2):this.priv},o.prototype._importPrivate=function(e,t){this.priv=new r(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)},o.prototype._importPublic=function(e,t){if(e.x||e.y)return"mont"===this.ec.curve.type?i(e.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||i(e.x&&e.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(e.x,e.y));this.pub=this.ec.curve.decodePoint(e,t)},o.prototype.derive=function(e){return e.validate()||i(e.validate(),"public point not validated"),e.mul(this.priv).getX()},o.prototype.sign=function(e,t,n){return this.ec.sign(e,this,t,n)},o.prototype.verify=function(e,t){return this.ec.verify(e,t,this)},o.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}},function(e,t,n){"use strict";var r=n(30),i=n(25),o=i.assert;function s(e,t){if(e instanceof s)return e;this._importDER(e,t)||(o(e.r&&e.s,"Signature without r or s"),this.r=new r(e.r,16),this.s=new r(e.s,16),void 0===e.recoveryParam?this.recoveryParam=null:this.recoveryParam=e.recoveryParam)}function a(){this.place=0}function u(e,t){var n=e[t.place++];if(!(128&n))return n;var r=15&n;if(0===r||r>4)return!1;for(var i=0,o=0,s=t.place;o<r;o++,s++)i<<=8,i|=e[s],i>>>=0;return!(i<=127)&&(t.place=s,i)}function c(e){for(var t=0,n=e.length-1;!e[t]&&!(128&e[t+1])&&t<n;)t++;return 0===t?e:e.slice(t)}function l(e,t){if(t<128)e.push(t);else{var n=1+(Math.log(t)/Math.LN2>>>3);for(e.push(128|n);--n;)e.push(t>>>(n<<3)&255);e.push(t)}}e.exports=s,s.prototype._importDER=function(e,t){e=i.toArray(e,t);var n=new a;if(48!==e[n.place++])return!1;var o=u(e,n);if(!1===o)return!1;if(o+n.place!==e.length)return!1;if(2!==e[n.place++])return!1;var s=u(e,n);if(!1===s)return!1;var c=e.slice(n.place,s+n.place);if(n.place+=s,2!==e[n.place++])return!1;var l=u(e,n);if(!1===l)return!1;if(e.length!==l+n.place)return!1;var h=e.slice(n.place,l+n.place);if(0===c[0]){if(!(128&c[1]))return!1;c=c.slice(1)}if(0===h[0]){if(!(128&h[1]))return!1;h=h.slice(1)}return this.r=new r(c),this.s=new r(h),this.recoveryParam=null,!0},s.prototype.toDER=function(e){var t=this.r.toArray(),n=this.s.toArray();for(128&t[0]&&(t=[0].concat(t)),128&n[0]&&(n=[0].concat(n)),t=c(t),n=c(n);!(n[0]||128&n[1]);)n=n.slice(1);var r=[2];l(r,t.length),(r=r.concat(t)).push(2),l(r,n.length);var o=r.concat(n),s=[48];return l(s,o.length),s=s.concat(o),i.encode(s,e)}},function(e,t,n){"use strict";var r=n(88),i=n(87),o=n(25),s=o.assert,a=o.parseBytes,u=n(268),c=n(269);function l(e){if(s("ed25519"===e,"only tested with ed25519 so far"),!(this instanceof l))return new l(e);e=i[e].curve,this.curve=e,this.g=e.g,this.g.precompute(e.n.bitLength()+1),this.pointClass=e.point().constructor,this.encodingLength=Math.ceil(e.n.bitLength()/8),this.hash=r.sha512}e.exports=l,l.prototype.sign=function(e,t){e=a(e);var n=this.keyFromSecret(t),r=this.hashInt(n.messagePrefix(),e),i=this.g.mul(r),o=this.encodePoint(i),s=this.hashInt(o,n.pubBytes(),e).mul(n.priv()),u=r.add(s).umod(this.curve.n);return this.makeSignature({R:i,S:u,Rencoded:o})},l.prototype.verify=function(e,t,n){e=a(e),t=this.makeSignature(t);var r=this.keyFromPublic(n),i=this.hashInt(t.Rencoded(),r.pubBytes(),e),o=this.g.mul(t.S());return t.R().add(r.pub().mul(i)).eq(o)},l.prototype.hashInt=function(){for(var e=this.hash(),t=0;t<arguments.length;t++)e.update(arguments[t]);return o.intFromLE(e.digest()).umod(this.curve.n)},l.prototype.keyFromPublic=function(e){return u.fromPublic(this,e)},l.prototype.keyFromSecret=function(e){return u.fromSecret(this,e)},l.prototype.makeSignature=function(e){return e instanceof c?e:new c(this,e)},l.prototype.encodePoint=function(e){var t=e.getY().toArray("le",this.encodingLength);return t[this.encodingLength-1]|=e.getX().isOdd()?128:0,t},l.prototype.decodePoint=function(e){var t=(e=o.parseBytes(e)).length-1,n=e.slice(0,t).concat(-129&e[t]),r=0!=(128&e[t]),i=o.intFromLE(n);return this.curve.pointFromY(i,r)},l.prototype.encodeInt=function(e){return e.toArray("le",this.encodingLength)},l.prototype.decodeInt=function(e){return o.intFromLE(e)},l.prototype.isPoint=function(e){return e instanceof this.pointClass}},function(e,t,n){"use strict";var r=n(25),i=r.assert,o=r.parseBytes,s=r.cachedProperty;function a(e,t){this.eddsa=e,this._secret=o(t.secret),e.isPoint(t.pub)?this._pub=t.pub:this._pubBytes=o(t.pub)}a.fromPublic=function(e,t){return t instanceof a?t:new a(e,{pub:t})},a.fromSecret=function(e,t){return t instanceof a?t:new a(e,{secret:t})},a.prototype.secret=function(){return this._secret},s(a,"pubBytes",(function(){return this.eddsa.encodePoint(this.pub())})),s(a,"pub",(function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())})),s(a,"privBytes",(function(){var e=this.eddsa,t=this.hash(),n=e.encodingLength-1,r=t.slice(0,e.encodingLength);return r[0]&=248,r[n]&=127,r[n]|=64,r})),s(a,"priv",(function(){return this.eddsa.decodeInt(this.privBytes())})),s(a,"hash",(function(){return this.eddsa.hash().update(this.secret()).digest()})),s(a,"messagePrefix",(function(){return this.hash().slice(this.eddsa.encodingLength)})),a.prototype.sign=function(e){return i(this._secret,"KeyPair can only verify"),this.eddsa.sign(e,this)},a.prototype.verify=function(e,t){return this.eddsa.verify(e,t,this)},a.prototype.getSecret=function(e){return i(this._secret,"KeyPair is public only"),r.encode(this.secret(),e)},a.prototype.getPublic=function(e){return r.encode(this.pubBytes(),e)},e.exports=a},function(e,t,n){"use strict";var r=n(30),i=n(25),o=i.assert,s=i.cachedProperty,a=i.parseBytes;function u(e,t){this.eddsa=e,"object"!=typeof t&&(t=a(t)),Array.isArray(t)&&(t={R:t.slice(0,e.encodingLength),S:t.slice(e.encodingLength)}),o(t.R&&t.S,"Signature without R or S"),e.isPoint(t.R)&&(this._R=t.R),t.S instanceof r&&(this._S=t.S),this._Rencoded=Array.isArray(t.R)?t.R:t.Rencoded,this._Sencoded=Array.isArray(t.S)?t.S:t.Sencoded}s(u,"S",(function(){return this.eddsa.decodeInt(this.Sencoded())})),s(u,"R",(function(){return this.eddsa.decodePoint(this.Rencoded())})),s(u,"Rencoded",(function(){return this.eddsa.encodePoint(this.R())})),s(u,"Sencoded",(function(){return this.eddsa.encodeInt(this.S())})),u.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},u.prototype.toHex=function(){return i.encode(this.toBytes(),"hex").toUpperCase()},e.exports=u},function(e,t,n){"use strict";var r=n(145);t.certificate=n(277);var i=r.define("RSAPrivateKey",(function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())}));t.RSAPrivateKey=i;var o=r.define("RSAPublicKey",(function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())}));t.RSAPublicKey=o;var s=r.define("SubjectPublicKeyInfo",(function(){this.seq().obj(this.key("algorithm").use(a),this.key("subjectPublicKey").bitstr())}));t.PublicKey=s;var a=r.define("AlgorithmIdentifier",(function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())})),u=r.define("PrivateKeyInfo",(function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(a),this.key("subjectPrivateKey").octstr())}));t.PrivateKey=u;var c=r.define("EncryptedPrivateKeyInfo",(function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())}));t.EncryptedPrivateKey=c;var l=r.define("DSAPrivateKey",(function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())}));t.DSAPrivateKey=l,t.DSAparam=r.define("DSAparam",(function(){this.int()}));var h=r.define("ECPrivateKey",(function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(d),this.key("publicKey").optional().explicit(1).bitstr())}));t.ECPrivateKey=h;var d=r.define("ECParameters",(function(){this.choice({namedCurve:this.objid()})}));t.signature=r.define("signature",(function(){this.seq().obj(this.key("r").int(),this.key("s").int())}))},function(e,t){},function(e,t,n){"use strict";const r=n(147),i=n(149),o=n(7);function s(e,t){this.name=e,this.body=t,this.decoders={},this.encoders={}}t.define=function(e,t){return new s(e,t)},s.prototype._createNamed=function(e){const t=this.name;function n(e){this._initNamed(e,t)}return o(n,e),n.prototype._initNamed=function(t,n){e.call(this,t,n)},new n(this)},s.prototype._getDecoder=function(e){return e=e||"der",this.decoders.hasOwnProperty(e)||(this.decoders[e]=this._createNamed(i[e])),this.decoders[e]},s.prototype.decode=function(e,t,n){return this._getDecoder(t).decode(e,n)},s.prototype._getEncoder=function(e){return e=e||"der",this.encoders.hasOwnProperty(e)||(this.encoders[e]=this._createNamed(r[e])),this.encoders[e]},s.prototype.encode=function(e,t,n){return this._getEncoder(t).encode(e,n)}},function(e,t,n){"use strict";const r=n(7),i=n(148);function o(e){i.call(this,e),this.enc="pem"}r(o,i),e.exports=o,o.prototype.encode=function(e,t){const n=i.prototype.encode.call(this,e).toString("base64"),r=["-----BEGIN "+t.label+"-----"];for(let e=0;e<n.length;e+=64)r.push(n.slice(e,e+64));return r.push("-----END "+t.label+"-----"),r.join("\n")}},function(e,t,n){"use strict";const r=n(7),i=n(89).Buffer,o=n(150);function s(e){o.call(this,e),this.enc="pem"}r(s,o),e.exports=s,s.prototype.decode=function(e,t){const n=e.toString().split(/[\r\n]+/g),r=t.label.toUpperCase(),s=/^-----(BEGIN|END) ([^-]+)-----$/;let a=-1,u=-1;for(let e=0;e<n.length;e++){const t=n[e].match(s);if(null!==t&&t[2]===r){if(-1!==a){if("END"!==t[1])break;u=e;break}if("BEGIN"!==t[1])break;a=e}}if(-1===a||-1===u)throw new Error("PEM section not found for: "+r);const c=n.slice(a+1,u).join("");c.replace(/[^a-z0-9+/=]+/gi,"");const l=i.from(c,"base64");return o.prototype.decode.call(this,l,t)}},function(e,t,n){"use strict";const r=t;r.Reporter=n(91).Reporter,r.DecoderBuffer=n(54).DecoderBuffer,r.EncoderBuffer=n(54).EncoderBuffer,r.Node=n(90)},function(e,t,n){"use strict";const r=t;r._reverse=function(e){const t={};return Object.keys(e).forEach((function(n){(0|n)==n&&(n|=0);const r=e[n];t[r]=n})),t},r.der=n(92)},function(e,t,n){"use strict";var r=n(145),i=r.define("Time",(function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})})),o=r.define("AttributeTypeValue",(function(){this.seq().obj(this.key("type").objid(),this.key("value").any())})),s=r.define("AlgorithmIdentifier",(function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())})),a=r.define("SubjectPublicKeyInfo",(function(){this.seq().obj(this.key("algorithm").use(s),this.key("subjectPublicKey").bitstr())})),u=r.define("RelativeDistinguishedName",(function(){this.setof(o)})),c=r.define("RDNSequence",(function(){this.seqof(u)})),l=r.define("Name",(function(){this.choice({rdnSequence:this.use(c)})})),h=r.define("Validity",(function(){this.seq().obj(this.key("notBefore").use(i),this.key("notAfter").use(i))})),d=r.define("Extension",(function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())})),f=r.define("TBSCertificate",(function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(s),this.key("issuer").use(l),this.key("validity").use(h),this.key("subject").use(l),this.key("subjectPublicKeyInfo").use(a),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(d).optional())})),p=r.define("X509Certificate",(function(){this.seq().obj(this.key("tbsCertificate").use(f),this.key("signatureAlgorithm").use(s),this.key("signatureValue").bitstr())}));e.exports=p},function(e){e.exports=JSON.parse('{"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"}')},function(e,t,n){var r=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r+/=]+)[\n\r]+/m,i=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,o=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r+/=]+)-----END \1-----$/m,s=n(61),a=n(80),u=n(8).Buffer;e.exports=function(e,t){var n,c=e.toString(),l=c.match(r);if(l){var h="aes"+l[1],d=u.from(l[2],"hex"),f=u.from(l[3].replace(/[\r\n]/g,""),"base64"),p=s(t,d.slice(0,8),parseInt(l[1],10)).key,m=[],g=a.createDecipheriv(h,p,d);m.push(g.update(f)),m.push(g.final()),n=u.concat(m)}else{var b=c.match(o);n=u.from(b[2].replace(/[\r\n]/g,""),"base64")}return{tag:c.match(i)[1],data:n}}},function(e,t,n){var r=n(8).Buffer,i=n(85),o=n(86).ec,s=n(63),a=n(151);function u(e,t){if(e.cmpn(0)<=0)throw new Error("invalid sig");if(e.cmp(t)>=t)throw new Error("invalid sig")}e.exports=function(e,t,n,c,l){var h=s(n);if("ec"===h.type){if("ecdsa"!==c&&"ecdsa/rsa"!==c)throw new Error("wrong public key type");return function(e,t,n){var r=a[n.data.algorithm.curve.join(".")];if(!r)throw new Error("unknown curve "+n.data.algorithm.curve.join("."));var i=new o(r),s=n.data.subjectPrivateKey.data;return i.verify(t,e,s)}(e,t,h)}if("dsa"===h.type){if("dsa"!==c)throw new Error("wrong public key type");return function(e,t,n){var r=n.data.p,o=n.data.q,a=n.data.g,c=n.data.pub_key,l=s.signature.decode(e,"der"),h=l.s,d=l.r;u(h,o),u(d,o);var f=i.mont(r),p=h.invm(o);return 0===a.toRed(f).redPow(new i(t).mul(p).mod(o)).fromRed().mul(c.toRed(f).redPow(d.mul(p).mod(o)).fromRed()).mod(r).mod(o).cmp(d)}(e,t,h)}if("rsa"!==c&&"ecdsa/rsa"!==c)throw new Error("wrong public key type");t=r.concat([l,t]);for(var d=h.modulus.byteLength(),f=[1],p=0;t.length+f.length+2<d;)f.push(255),p++;f.push(0);for(var m=-1;++m<t.length;)f.push(t[m]);f=r.from(f);var g=i.mont(h.modulus);e=(e=new i(e).toRed(g)).redPow(new i(h.publicExponent)),e=r.from(e.fromRed().toArray());var b=p<8?1:0;for(d=Math.min(e.length,f.length),e.length!==f.length&&(b=1),m=-1;++m<d;)b|=e[m]^f[m];return 0===b}},function(e,t,n){(function(t){var r=n(86),i=n(282);e.exports=function(e){return new s(e)};var o={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};function s(e){this.curveType=o[e],this.curveType||(this.curveType={name:e}),this.curve=new r.ec(this.curveType.name),this.keys=void 0}function a(e,n,r){Array.isArray(e)||(e=e.toArray());var i=new t(e);if(r&&i.length<r){var o=new t(r-i.length);o.fill(0),i=t.concat([o,i])}return n?i.toString(n):i}o.p224=o.secp224r1,o.p256=o.secp256r1=o.prime256v1,o.p192=o.secp192r1=o.prime192v1,o.p384=o.secp384r1,o.p521=o.secp521r1,s.prototype.generateKeys=function(e,t){return this.keys=this.curve.genKeyPair(),this.getPublicKey(e,t)},s.prototype.computeSecret=function(e,n,r){return n=n||"utf8",t.isBuffer(e)||(e=new t(e,n)),a(this.curve.keyFromPublic(e).getPublic().mul(this.keys.getPrivate()).getX(),r,this.curveType.byteLength)},s.prototype.getPublicKey=function(e,t){var n=this.keys.getPublic("compressed"===t,!0);return"hybrid"===t&&(n[n.length-1]%2?n[0]=7:n[0]=6),a(n,e)},s.prototype.getPrivateKey=function(e){return a(this.keys.getPrivate(),e)},s.prototype.setPublicKey=function(e,n){return n=n||"utf8",t.isBuffer(e)||(e=new t(e,n)),this.keys._importPublic(e),this},s.prototype.setPrivateKey=function(e,n){n=n||"utf8",t.isBuffer(e)||(e=new t(e,n));var r=new i(e);return r=r.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(r),this}}).call(this,n(17).Buffer)},function(e,t,n){(function(e){!function(e,t){"use strict";function r(e,t){if(!e)throw new Error(t||"Assertion failed")}function i(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}function o(e,t,n){if(o.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(n=t,t=10),this._init(e||0,t||10,n||"be"))}var s;"object"==typeof e?e.exports=o:t.BN=o,o.BN=o,o.wordSize=26;try{s="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:n(283).Buffer}catch(e){}function a(e,t){var n=e.charCodeAt(t);return n>=65&&n<=70?n-55:n>=97&&n<=102?n-87:n-48&15}function u(e,t,n){var r=a(e,n);return n-1>=t&&(r|=a(e,n-1)<<4),r}function c(e,t,n,r){for(var i=0,o=Math.min(e.length,n),s=t;s<o;s++){var a=e.charCodeAt(s)-48;i*=r,i+=a>=49?a-49+10:a>=17?a-17+10:a}return i}o.isBN=function(e){return e instanceof o||null!==e&&"object"==typeof e&&e.constructor.wordSize===o.wordSize&&Array.isArray(e.words)},o.max=function(e,t){return e.cmp(t)>0?e:t},o.min=function(e,t){return e.cmp(t)<0?e:t},o.prototype._init=function(e,t,n){if("number"==typeof e)return this._initNumber(e,t,n);if("object"==typeof e)return this._initArray(e,t,n);"hex"===t&&(t=16),r(t===(0|t)&&t>=2&&t<=36);var i=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<e.length&&(16===t?this._parseHex(e,i,n):(this._parseBase(e,t,i),"le"===n&&this._initArray(this.toArray(),t,n)))},o.prototype._initNumber=function(e,t,n){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(r(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===n&&this._initArray(this.toArray(),t,n)},o.prototype._initArray=function(e,t,n){if(r("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var o,s,a=0;if("be"===n)for(i=e.length-1,o=0;i>=0;i-=3)s=e[i]|e[i-1]<<8|e[i-2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);else if("le"===n)for(i=0,o=0;i<e.length;i+=3)s=e[i]|e[i+1]<<8|e[i+2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);return this.strip()},o.prototype._parseHex=function(e,t,n){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var i,o=0,s=0;if("be"===n)for(r=e.length-1;r>=t;r-=2)i=u(e,t,r)<<o,this.words[s]|=67108863&i,o>=18?(o-=18,s+=1,this.words[s]|=i>>>26):o+=8;else for(r=(e.length-t)%2==0?t+1:t;r<e.length;r+=2)i=u(e,t,r)<<o,this.words[s]|=67108863&i,o>=18?(o-=18,s+=1,this.words[s]|=i>>>26):o+=8;this.strip()},o.prototype._parseBase=function(e,t,n){this.words=[0],this.length=1;for(var r=0,i=1;i<=67108863;i*=t)r++;r--,i=i/t|0;for(var o=e.length-n,s=o%r,a=Math.min(o,o-s)+n,u=0,l=n;l<a;l+=r)u=c(e,l,l+r,t),this.imuln(i),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==s){var h=1;for(u=c(e,l,e.length,t),l=0;l<s;l++)h*=t;this.imuln(h),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this.strip()},o.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},o.prototype.clone=function(){var e=new o(null);return this.copy(e),e},o.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var l=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],d=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function f(e,t,n){n.negative=t.negative^e.negative;var r=e.length+t.length|0;n.length=r,r=r-1|0;var i=0|e.words[0],o=0|t.words[0],s=i*o,a=67108863&s,u=s/67108864|0;n.words[0]=a;for(var c=1;c<r;c++){for(var l=u>>>26,h=67108863&u,d=Math.min(c,t.length-1),f=Math.max(0,c-e.length+1);f<=d;f++){var p=c-f|0;l+=(s=(i=0|e.words[p])*(o=0|t.words[f])+h)/67108864|0,h=67108863&s}n.words[c]=0|h,u=0|l}return 0!==u?n.words[c]=0|u:n.length--,n.strip()}o.prototype.toString=function(e,t){var n;if(t=0|t||1,16===(e=e||10)||"hex"===e){n="";for(var i=0,o=0,s=0;s<this.length;s++){var a=this.words[s],u=(16777215&(a<<i|o)).toString(16);n=0!==(o=a>>>24-i&16777215)||s!==this.length-1?l[6-u.length]+u+n:u+n,(i+=2)>=26&&(i-=26,s--)}for(0!==o&&(n=o.toString(16)+n);n.length%t!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}if(e===(0|e)&&e>=2&&e<=36){var c=h[e],f=d[e];n="";var p=this.clone();for(p.negative=0;!p.isZero();){var m=p.modn(f).toString(e);n=(p=p.idivn(f)).isZero()?m+n:l[c-m.length]+m+n}for(this.isZero()&&(n="0"+n);n.length%t!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}r(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(e,t){return r(void 0!==s),this.toArrayLike(s,e,t)},o.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},o.prototype.toArrayLike=function(e,t,n){var i=this.byteLength(),o=n||Math.max(1,i);r(i<=o,"byte array longer than desired length"),r(o>0,"Requested array length <= 0"),this.strip();var s,a,u="le"===t,c=new e(o),l=this.clone();if(u){for(a=0;!l.isZero();a++)s=l.andln(255),l.iushrn(8),c[a]=s;for(;a<o;a++)c[a]=0}else{for(a=0;a<o-i;a++)c[a]=0;for(a=0;!l.isZero();a++)s=l.andln(255),l.iushrn(8),c[o-a-1]=s}return c},Math.clz32?o.prototype._countBits=function(e){return 32-Math.clz32(e)}:o.prototype._countBits=function(e){var t=e,n=0;return t>=4096&&(n+=13,t>>>=13),t>=64&&(n+=7,t>>>=7),t>=8&&(n+=4,t>>>=4),t>=2&&(n+=2,t>>>=2),n+t},o.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,n=0;return 0==(8191&t)&&(n+=13,t>>>=13),0==(127&t)&&(n+=7,t>>>=7),0==(15&t)&&(n+=4,t>>>=4),0==(3&t)&&(n+=2,t>>>=2),0==(1&t)&&n++,n},o.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var n=this._zeroBits(this.words[t]);if(e+=n,26!==n)break}return e},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},o.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this.strip()},o.prototype.ior=function(e){return r(0==(this.negative|e.negative)),this.iuor(e)},o.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},o.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},o.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var n=0;n<t.length;n++)this.words[n]=this.words[n]&e.words[n];return this.length=t.length,this.strip()},o.prototype.iand=function(e){return r(0==(this.negative|e.negative)),this.iuand(e)},o.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},o.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},o.prototype.iuxor=function(e){var t,n;this.length>e.length?(t=this,n=e):(t=e,n=this);for(var r=0;r<n.length;r++)this.words[r]=t.words[r]^n.words[r];if(this!==t)for(;r<t.length;r++)this.words[r]=t.words[r];return this.length=t.length,this.strip()},o.prototype.ixor=function(e){return r(0==(this.negative|e.negative)),this.iuxor(e)},o.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},o.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},o.prototype.inotn=function(e){r("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),n=e%26;this._expand(t),n>0&&t--;for(var i=0;i<t;i++)this.words[i]=67108863&~this.words[i];return n>0&&(this.words[i]=~this.words[i]&67108863>>26-n),this.strip()},o.prototype.notn=function(e){return this.clone().inotn(e)},o.prototype.setn=function(e,t){r("number"==typeof e&&e>=0);var n=e/26|0,i=e%26;return this._expand(n+1),this.words[n]=t?this.words[n]|1<<i:this.words[n]&~(1<<i),this.strip()},o.prototype.iadd=function(e){var t,n,r;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(n=this,r=e):(n=e,r=this);for(var i=0,o=0;o<r.length;o++)t=(0|n.words[o])+(0|r.words[o])+i,this.words[o]=67108863&t,i=t>>>26;for(;0!==i&&o<n.length;o++)t=(0|n.words[o])+i,this.words[o]=67108863&t,i=t>>>26;if(this.length=n.length,0!==i)this.words[this.length]=i,this.length++;else if(n!==this)for(;o<n.length;o++)this.words[o]=n.words[o];return this},o.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},o.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var n,r,i=this.cmp(e);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(n=this,r=e):(n=e,r=this);for(var o=0,s=0;s<r.length;s++)o=(t=(0|n.words[s])-(0|r.words[s])+o)>>26,this.words[s]=67108863&t;for(;0!==o&&s<n.length;s++)o=(t=(0|n.words[s])+o)>>26,this.words[s]=67108863&t;if(0===o&&s<n.length&&n!==this)for(;s<n.length;s++)this.words[s]=n.words[s];return this.length=Math.max(this.length,s),n!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(e){return this.clone().isub(e)};var p=function(e,t,n){var r,i,o,s=e.words,a=t.words,u=n.words,c=0,l=0|s[0],h=8191&l,d=l>>>13,f=0|s[1],p=8191&f,m=f>>>13,g=0|s[2],b=8191&g,v=g>>>13,y=0|s[3],_=8191&y,w=y>>>13,E=0|s[4],S=8191&E,M=E>>>13,O=0|s[5],A=8191&O,C=O>>>13,T=0|s[6],k=8191&T,x=T>>>13,j=0|s[7],I=8191&j,R=j>>>13,N=0|s[8],P=8191&N,D=N>>>13,U=0|s[9],L=8191&U,F=U>>>13,B=0|a[0],H=8191&B,q=B>>>13,V=0|a[1],G=8191&V,z=V>>>13,W=0|a[2],K=8191&W,Y=W>>>13,Q=0|a[3],J=8191&Q,Z=Q>>>13,$=0|a[4],X=8191&$,ee=$>>>13,te=0|a[5],ne=8191&te,re=te>>>13,ie=0|a[6],oe=8191&ie,se=ie>>>13,ae=0|a[7],ue=8191&ae,ce=ae>>>13,le=0|a[8],he=8191&le,de=le>>>13,fe=0|a[9],pe=8191&fe,me=fe>>>13;n.negative=e.negative^t.negative,n.length=19;var ge=(c+(r=Math.imul(h,H))|0)+((8191&(i=(i=Math.imul(h,q))+Math.imul(d,H)|0))<<13)|0;c=((o=Math.imul(d,q))+(i>>>13)|0)+(ge>>>26)|0,ge&=67108863,r=Math.imul(p,H),i=(i=Math.imul(p,q))+Math.imul(m,H)|0,o=Math.imul(m,q);var be=(c+(r=r+Math.imul(h,G)|0)|0)+((8191&(i=(i=i+Math.imul(h,z)|0)+Math.imul(d,G)|0))<<13)|0;c=((o=o+Math.imul(d,z)|0)+(i>>>13)|0)+(be>>>26)|0,be&=67108863,r=Math.imul(b,H),i=(i=Math.imul(b,q))+Math.imul(v,H)|0,o=Math.imul(v,q),r=r+Math.imul(p,G)|0,i=(i=i+Math.imul(p,z)|0)+Math.imul(m,G)|0,o=o+Math.imul(m,z)|0;var ve=(c+(r=r+Math.imul(h,K)|0)|0)+((8191&(i=(i=i+Math.imul(h,Y)|0)+Math.imul(d,K)|0))<<13)|0;c=((o=o+Math.imul(d,Y)|0)+(i>>>13)|0)+(ve>>>26)|0,ve&=67108863,r=Math.imul(_,H),i=(i=Math.imul(_,q))+Math.imul(w,H)|0,o=Math.imul(w,q),r=r+Math.imul(b,G)|0,i=(i=i+Math.imul(b,z)|0)+Math.imul(v,G)|0,o=o+Math.imul(v,z)|0,r=r+Math.imul(p,K)|0,i=(i=i+Math.imul(p,Y)|0)+Math.imul(m,K)|0,o=o+Math.imul(m,Y)|0;var ye=(c+(r=r+Math.imul(h,J)|0)|0)+((8191&(i=(i=i+Math.imul(h,Z)|0)+Math.imul(d,J)|0))<<13)|0;c=((o=o+Math.imul(d,Z)|0)+(i>>>13)|0)+(ye>>>26)|0,ye&=67108863,r=Math.imul(S,H),i=(i=Math.imul(S,q))+Math.imul(M,H)|0,o=Math.imul(M,q),r=r+Math.imul(_,G)|0,i=(i=i+Math.imul(_,z)|0)+Math.imul(w,G)|0,o=o+Math.imul(w,z)|0,r=r+Math.imul(b,K)|0,i=(i=i+Math.imul(b,Y)|0)+Math.imul(v,K)|0,o=o+Math.imul(v,Y)|0,r=r+Math.imul(p,J)|0,i=(i=i+Math.imul(p,Z)|0)+Math.imul(m,J)|0,o=o+Math.imul(m,Z)|0;var _e=(c+(r=r+Math.imul(h,X)|0)|0)+((8191&(i=(i=i+Math.imul(h,ee)|0)+Math.imul(d,X)|0))<<13)|0;c=((o=o+Math.imul(d,ee)|0)+(i>>>13)|0)+(_e>>>26)|0,_e&=67108863,r=Math.imul(A,H),i=(i=Math.imul(A,q))+Math.imul(C,H)|0,o=Math.imul(C,q),r=r+Math.imul(S,G)|0,i=(i=i+Math.imul(S,z)|0)+Math.imul(M,G)|0,o=o+Math.imul(M,z)|0,r=r+Math.imul(_,K)|0,i=(i=i+Math.imul(_,Y)|0)+Math.imul(w,K)|0,o=o+Math.imul(w,Y)|0,r=r+Math.imul(b,J)|0,i=(i=i+Math.imul(b,Z)|0)+Math.imul(v,J)|0,o=o+Math.imul(v,Z)|0,r=r+Math.imul(p,X)|0,i=(i=i+Math.imul(p,ee)|0)+Math.imul(m,X)|0,o=o+Math.imul(m,ee)|0;var we=(c+(r=r+Math.imul(h,ne)|0)|0)+((8191&(i=(i=i+Math.imul(h,re)|0)+Math.imul(d,ne)|0))<<13)|0;c=((o=o+Math.imul(d,re)|0)+(i>>>13)|0)+(we>>>26)|0,we&=67108863,r=Math.imul(k,H),i=(i=Math.imul(k,q))+Math.imul(x,H)|0,o=Math.imul(x,q),r=r+Math.imul(A,G)|0,i=(i=i+Math.imul(A,z)|0)+Math.imul(C,G)|0,o=o+Math.imul(C,z)|0,r=r+Math.imul(S,K)|0,i=(i=i+Math.imul(S,Y)|0)+Math.imul(M,K)|0,o=o+Math.imul(M,Y)|0,r=r+Math.imul(_,J)|0,i=(i=i+Math.imul(_,Z)|0)+Math.imul(w,J)|0,o=o+Math.imul(w,Z)|0,r=r+Math.imul(b,X)|0,i=(i=i+Math.imul(b,ee)|0)+Math.imul(v,X)|0,o=o+Math.imul(v,ee)|0,r=r+Math.imul(p,ne)|0,i=(i=i+Math.imul(p,re)|0)+Math.imul(m,ne)|0,o=o+Math.imul(m,re)|0;var Ee=(c+(r=r+Math.imul(h,oe)|0)|0)+((8191&(i=(i=i+Math.imul(h,se)|0)+Math.imul(d,oe)|0))<<13)|0;c=((o=o+Math.imul(d,se)|0)+(i>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,r=Math.imul(I,H),i=(i=Math.imul(I,q))+Math.imul(R,H)|0,o=Math.imul(R,q),r=r+Math.imul(k,G)|0,i=(i=i+Math.imul(k,z)|0)+Math.imul(x,G)|0,o=o+Math.imul(x,z)|0,r=r+Math.imul(A,K)|0,i=(i=i+Math.imul(A,Y)|0)+Math.imul(C,K)|0,o=o+Math.imul(C,Y)|0,r=r+Math.imul(S,J)|0,i=(i=i+Math.imul(S,Z)|0)+Math.imul(M,J)|0,o=o+Math.imul(M,Z)|0,r=r+Math.imul(_,X)|0,i=(i=i+Math.imul(_,ee)|0)+Math.imul(w,X)|0,o=o+Math.imul(w,ee)|0,r=r+Math.imul(b,ne)|0,i=(i=i+Math.imul(b,re)|0)+Math.imul(v,ne)|0,o=o+Math.imul(v,re)|0,r=r+Math.imul(p,oe)|0,i=(i=i+Math.imul(p,se)|0)+Math.imul(m,oe)|0,o=o+Math.imul(m,se)|0;var Se=(c+(r=r+Math.imul(h,ue)|0)|0)+((8191&(i=(i=i+Math.imul(h,ce)|0)+Math.imul(d,ue)|0))<<13)|0;c=((o=o+Math.imul(d,ce)|0)+(i>>>13)|0)+(Se>>>26)|0,Se&=67108863,r=Math.imul(P,H),i=(i=Math.imul(P,q))+Math.imul(D,H)|0,o=Math.imul(D,q),r=r+Math.imul(I,G)|0,i=(i=i+Math.imul(I,z)|0)+Math.imul(R,G)|0,o=o+Math.imul(R,z)|0,r=r+Math.imul(k,K)|0,i=(i=i+Math.imul(k,Y)|0)+Math.imul(x,K)|0,o=o+Math.imul(x,Y)|0,r=r+Math.imul(A,J)|0,i=(i=i+Math.imul(A,Z)|0)+Math.imul(C,J)|0,o=o+Math.imul(C,Z)|0,r=r+Math.imul(S,X)|0,i=(i=i+Math.imul(S,ee)|0)+Math.imul(M,X)|0,o=o+Math.imul(M,ee)|0,r=r+Math.imul(_,ne)|0,i=(i=i+Math.imul(_,re)|0)+Math.imul(w,ne)|0,o=o+Math.imul(w,re)|0,r=r+Math.imul(b,oe)|0,i=(i=i+Math.imul(b,se)|0)+Math.imul(v,oe)|0,o=o+Math.imul(v,se)|0,r=r+Math.imul(p,ue)|0,i=(i=i+Math.imul(p,ce)|0)+Math.imul(m,ue)|0,o=o+Math.imul(m,ce)|0;var Me=(c+(r=r+Math.imul(h,he)|0)|0)+((8191&(i=(i=i+Math.imul(h,de)|0)+Math.imul(d,he)|0))<<13)|0;c=((o=o+Math.imul(d,de)|0)+(i>>>13)|0)+(Me>>>26)|0,Me&=67108863,r=Math.imul(L,H),i=(i=Math.imul(L,q))+Math.imul(F,H)|0,o=Math.imul(F,q),r=r+Math.imul(P,G)|0,i=(i=i+Math.imul(P,z)|0)+Math.imul(D,G)|0,o=o+Math.imul(D,z)|0,r=r+Math.imul(I,K)|0,i=(i=i+Math.imul(I,Y)|0)+Math.imul(R,K)|0,o=o+Math.imul(R,Y)|0,r=r+Math.imul(k,J)|0,i=(i=i+Math.imul(k,Z)|0)+Math.imul(x,J)|0,o=o+Math.imul(x,Z)|0,r=r+Math.imul(A,X)|0,i=(i=i+Math.imul(A,ee)|0)+Math.imul(C,X)|0,o=o+Math.imul(C,ee)|0,r=r+Math.imul(S,ne)|0,i=(i=i+Math.imul(S,re)|0)+Math.imul(M,ne)|0,o=o+Math.imul(M,re)|0,r=r+Math.imul(_,oe)|0,i=(i=i+Math.imul(_,se)|0)+Math.imul(w,oe)|0,o=o+Math.imul(w,se)|0,r=r+Math.imul(b,ue)|0,i=(i=i+Math.imul(b,ce)|0)+Math.imul(v,ue)|0,o=o+Math.imul(v,ce)|0,r=r+Math.imul(p,he)|0,i=(i=i+Math.imul(p,de)|0)+Math.imul(m,he)|0,o=o+Math.imul(m,de)|0;var Oe=(c+(r=r+Math.imul(h,pe)|0)|0)+((8191&(i=(i=i+Math.imul(h,me)|0)+Math.imul(d,pe)|0))<<13)|0;c=((o=o+Math.imul(d,me)|0)+(i>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,r=Math.imul(L,G),i=(i=Math.imul(L,z))+Math.imul(F,G)|0,o=Math.imul(F,z),r=r+Math.imul(P,K)|0,i=(i=i+Math.imul(P,Y)|0)+Math.imul(D,K)|0,o=o+Math.imul(D,Y)|0,r=r+Math.imul(I,J)|0,i=(i=i+Math.imul(I,Z)|0)+Math.imul(R,J)|0,o=o+Math.imul(R,Z)|0,r=r+Math.imul(k,X)|0,i=(i=i+Math.imul(k,ee)|0)+Math.imul(x,X)|0,o=o+Math.imul(x,ee)|0,r=r+Math.imul(A,ne)|0,i=(i=i+Math.imul(A,re)|0)+Math.imul(C,ne)|0,o=o+Math.imul(C,re)|0,r=r+Math.imul(S,oe)|0,i=(i=i+Math.imul(S,se)|0)+Math.imul(M,oe)|0,o=o+Math.imul(M,se)|0,r=r+Math.imul(_,ue)|0,i=(i=i+Math.imul(_,ce)|0)+Math.imul(w,ue)|0,o=o+Math.imul(w,ce)|0,r=r+Math.imul(b,he)|0,i=(i=i+Math.imul(b,de)|0)+Math.imul(v,he)|0,o=o+Math.imul(v,de)|0;var Ae=(c+(r=r+Math.imul(p,pe)|0)|0)+((8191&(i=(i=i+Math.imul(p,me)|0)+Math.imul(m,pe)|0))<<13)|0;c=((o=o+Math.imul(m,me)|0)+(i>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,r=Math.imul(L,K),i=(i=Math.imul(L,Y))+Math.imul(F,K)|0,o=Math.imul(F,Y),r=r+Math.imul(P,J)|0,i=(i=i+Math.imul(P,Z)|0)+Math.imul(D,J)|0,o=o+Math.imul(D,Z)|0,r=r+Math.imul(I,X)|0,i=(i=i+Math.imul(I,ee)|0)+Math.imul(R,X)|0,o=o+Math.imul(R,ee)|0,r=r+Math.imul(k,ne)|0,i=(i=i+Math.imul(k,re)|0)+Math.imul(x,ne)|0,o=o+Math.imul(x,re)|0,r=r+Math.imul(A,oe)|0,i=(i=i+Math.imul(A,se)|0)+Math.imul(C,oe)|0,o=o+Math.imul(C,se)|0,r=r+Math.imul(S,ue)|0,i=(i=i+Math.imul(S,ce)|0)+Math.imul(M,ue)|0,o=o+Math.imul(M,ce)|0,r=r+Math.imul(_,he)|0,i=(i=i+Math.imul(_,de)|0)+Math.imul(w,he)|0,o=o+Math.imul(w,de)|0;var Ce=(c+(r=r+Math.imul(b,pe)|0)|0)+((8191&(i=(i=i+Math.imul(b,me)|0)+Math.imul(v,pe)|0))<<13)|0;c=((o=o+Math.imul(v,me)|0)+(i>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,r=Math.imul(L,J),i=(i=Math.imul(L,Z))+Math.imul(F,J)|0,o=Math.imul(F,Z),r=r+Math.imul(P,X)|0,i=(i=i+Math.imul(P,ee)|0)+Math.imul(D,X)|0,o=o+Math.imul(D,ee)|0,r=r+Math.imul(I,ne)|0,i=(i=i+Math.imul(I,re)|0)+Math.imul(R,ne)|0,o=o+Math.imul(R,re)|0,r=r+Math.imul(k,oe)|0,i=(i=i+Math.imul(k,se)|0)+Math.imul(x,oe)|0,o=o+Math.imul(x,se)|0,r=r+Math.imul(A,ue)|0,i=(i=i+Math.imul(A,ce)|0)+Math.imul(C,ue)|0,o=o+Math.imul(C,ce)|0,r=r+Math.imul(S,he)|0,i=(i=i+Math.imul(S,de)|0)+Math.imul(M,he)|0,o=o+Math.imul(M,de)|0;var Te=(c+(r=r+Math.imul(_,pe)|0)|0)+((8191&(i=(i=i+Math.imul(_,me)|0)+Math.imul(w,pe)|0))<<13)|0;c=((o=o+Math.imul(w,me)|0)+(i>>>13)|0)+(Te>>>26)|0,Te&=67108863,r=Math.imul(L,X),i=(i=Math.imul(L,ee))+Math.imul(F,X)|0,o=Math.imul(F,ee),r=r+Math.imul(P,ne)|0,i=(i=i+Math.imul(P,re)|0)+Math.imul(D,ne)|0,o=o+Math.imul(D,re)|0,r=r+Math.imul(I,oe)|0,i=(i=i+Math.imul(I,se)|0)+Math.imul(R,oe)|0,o=o+Math.imul(R,se)|0,r=r+Math.imul(k,ue)|0,i=(i=i+Math.imul(k,ce)|0)+Math.imul(x,ue)|0,o=o+Math.imul(x,ce)|0,r=r+Math.imul(A,he)|0,i=(i=i+Math.imul(A,de)|0)+Math.imul(C,he)|0,o=o+Math.imul(C,de)|0;var ke=(c+(r=r+Math.imul(S,pe)|0)|0)+((8191&(i=(i=i+Math.imul(S,me)|0)+Math.imul(M,pe)|0))<<13)|0;c=((o=o+Math.imul(M,me)|0)+(i>>>13)|0)+(ke>>>26)|0,ke&=67108863,r=Math.imul(L,ne),i=(i=Math.imul(L,re))+Math.imul(F,ne)|0,o=Math.imul(F,re),r=r+Math.imul(P,oe)|0,i=(i=i+Math.imul(P,se)|0)+Math.imul(D,oe)|0,o=o+Math.imul(D,se)|0,r=r+Math.imul(I,ue)|0,i=(i=i+Math.imul(I,ce)|0)+Math.imul(R,ue)|0,o=o+Math.imul(R,ce)|0,r=r+Math.imul(k,he)|0,i=(i=i+Math.imul(k,de)|0)+Math.imul(x,he)|0,o=o+Math.imul(x,de)|0;var xe=(c+(r=r+Math.imul(A,pe)|0)|0)+((8191&(i=(i=i+Math.imul(A,me)|0)+Math.imul(C,pe)|0))<<13)|0;c=((o=o+Math.imul(C,me)|0)+(i>>>13)|0)+(xe>>>26)|0,xe&=67108863,r=Math.imul(L,oe),i=(i=Math.imul(L,se))+Math.imul(F,oe)|0,o=Math.imul(F,se),r=r+Math.imul(P,ue)|0,i=(i=i+Math.imul(P,ce)|0)+Math.imul(D,ue)|0,o=o+Math.imul(D,ce)|0,r=r+Math.imul(I,he)|0,i=(i=i+Math.imul(I,de)|0)+Math.imul(R,he)|0,o=o+Math.imul(R,de)|0;var je=(c+(r=r+Math.imul(k,pe)|0)|0)+((8191&(i=(i=i+Math.imul(k,me)|0)+Math.imul(x,pe)|0))<<13)|0;c=((o=o+Math.imul(x,me)|0)+(i>>>13)|0)+(je>>>26)|0,je&=67108863,r=Math.imul(L,ue),i=(i=Math.imul(L,ce))+Math.imul(F,ue)|0,o=Math.imul(F,ce),r=r+Math.imul(P,he)|0,i=(i=i+Math.imul(P,de)|0)+Math.imul(D,he)|0,o=o+Math.imul(D,de)|0;var Ie=(c+(r=r+Math.imul(I,pe)|0)|0)+((8191&(i=(i=i+Math.imul(I,me)|0)+Math.imul(R,pe)|0))<<13)|0;c=((o=o+Math.imul(R,me)|0)+(i>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,r=Math.imul(L,he),i=(i=Math.imul(L,de))+Math.imul(F,he)|0,o=Math.imul(F,de);var Re=(c+(r=r+Math.imul(P,pe)|0)|0)+((8191&(i=(i=i+Math.imul(P,me)|0)+Math.imul(D,pe)|0))<<13)|0;c=((o=o+Math.imul(D,me)|0)+(i>>>13)|0)+(Re>>>26)|0,Re&=67108863;var Ne=(c+(r=Math.imul(L,pe))|0)+((8191&(i=(i=Math.imul(L,me))+Math.imul(F,pe)|0))<<13)|0;return c=((o=Math.imul(F,me))+(i>>>13)|0)+(Ne>>>26)|0,Ne&=67108863,u[0]=ge,u[1]=be,u[2]=ve,u[3]=ye,u[4]=_e,u[5]=we,u[6]=Ee,u[7]=Se,u[8]=Me,u[9]=Oe,u[10]=Ae,u[11]=Ce,u[12]=Te,u[13]=ke,u[14]=xe,u[15]=je,u[16]=Ie,u[17]=Re,u[18]=Ne,0!==c&&(u[19]=c,n.length++),n};function m(e,t,n){return(new g).mulp(e,t,n)}function g(e,t){this.x=e,this.y=t}Math.imul||(p=f),o.prototype.mulTo=function(e,t){var n=this.length+e.length;return 10===this.length&&10===e.length?p(this,e,t):n<63?f(this,e,t):n<1024?function(e,t,n){n.negative=t.negative^e.negative,n.length=e.length+t.length;for(var r=0,i=0,o=0;o<n.length-1;o++){var s=i;i=0;for(var a=67108863&r,u=Math.min(o,t.length-1),c=Math.max(0,o-e.length+1);c<=u;c++){var l=o-c,h=(0|e.words[l])*(0|t.words[c]),d=67108863&h;a=67108863&(d=d+a|0),i+=(s=(s=s+(h/67108864|0)|0)+(d>>>26)|0)>>>26,s&=67108863}n.words[o]=a,r=s,s=i}return 0!==r?n.words[o]=r:n.length--,n.strip()}(this,e,t):m(this,e,t)},g.prototype.makeRBT=function(e){for(var t=new Array(e),n=o.prototype._countBits(e)-1,r=0;r<e;r++)t[r]=this.revBin(r,n,e);return t},g.prototype.revBin=function(e,t,n){if(0===e||e===n-1)return e;for(var r=0,i=0;i<t;i++)r|=(1&e)<<t-i-1,e>>=1;return r},g.prototype.permute=function(e,t,n,r,i,o){for(var s=0;s<o;s++)r[s]=t[e[s]],i[s]=n[e[s]]},g.prototype.transform=function(e,t,n,r,i,o){this.permute(o,e,t,n,r,i);for(var s=1;s<i;s<<=1)for(var a=s<<1,u=Math.cos(2*Math.PI/a),c=Math.sin(2*Math.PI/a),l=0;l<i;l+=a)for(var h=u,d=c,f=0;f<s;f++){var p=n[l+f],m=r[l+f],g=n[l+f+s],b=r[l+f+s],v=h*g-d*b;b=h*b+d*g,g=v,n[l+f]=p+g,r[l+f]=m+b,n[l+f+s]=p-g,r[l+f+s]=m-b,f!==a&&(v=u*h-c*d,d=u*d+c*h,h=v)}},g.prototype.guessLen13b=function(e,t){var n=1|Math.max(t,e),r=1&n,i=0;for(n=n/2|0;n;n>>>=1)i++;return 1<<i+1+r},g.prototype.conjugate=function(e,t,n){if(!(n<=1))for(var r=0;r<n/2;r++){var i=e[r];e[r]=e[n-r-1],e[n-r-1]=i,i=t[r],t[r]=-t[n-r-1],t[n-r-1]=-i}},g.prototype.normalize13b=function(e,t){for(var n=0,r=0;r<t/2;r++){var i=8192*Math.round(e[2*r+1]/t)+Math.round(e[2*r]/t)+n;e[r]=67108863&i,n=i<67108864?0:i/67108864|0}return e},g.prototype.convert13b=function(e,t,n,i){for(var o=0,s=0;s<t;s++)o+=0|e[s],n[2*s]=8191&o,o>>>=13,n[2*s+1]=8191&o,o>>>=13;for(s=2*t;s<i;++s)n[s]=0;r(0===o),r(0==(-8192&o))},g.prototype.stub=function(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=0;return t},g.prototype.mulp=function(e,t,n){var r=2*this.guessLen13b(e.length,t.length),i=this.makeRBT(r),o=this.stub(r),s=new Array(r),a=new Array(r),u=new Array(r),c=new Array(r),l=new Array(r),h=new Array(r),d=n.words;d.length=r,this.convert13b(e.words,e.length,s,r),this.convert13b(t.words,t.length,c,r),this.transform(s,o,a,u,r,i),this.transform(c,o,l,h,r,i);for(var f=0;f<r;f++){var p=a[f]*l[f]-u[f]*h[f];u[f]=a[f]*h[f]+u[f]*l[f],a[f]=p}return this.conjugate(a,u,r),this.transform(a,u,d,o,r,i),this.conjugate(d,o,r),this.normalize13b(d,r),n.negative=e.negative^t.negative,n.length=e.length+t.length,n.strip()},o.prototype.mul=function(e){var t=new o(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},o.prototype.mulf=function(e){var t=new o(null);return t.words=new Array(this.length+e.length),m(this,e,t)},o.prototype.imul=function(e){return this.clone().mulTo(e,this)},o.prototype.imuln=function(e){r("number"==typeof e),r(e<67108864);for(var t=0,n=0;n<this.length;n++){var i=(0|this.words[n])*e,o=(67108863&i)+(67108863&t);t>>=26,t+=i/67108864|0,t+=o>>>26,this.words[n]=67108863&o}return 0!==t&&(this.words[n]=t,this.length++),this},o.prototype.muln=function(e){return this.clone().imuln(e)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),n=0;n<t.length;n++){var r=n/26|0,i=n%26;t[n]=(e.words[r]&1<<i)>>>i}return t}(e);if(0===t.length)return new o(1);for(var n=this,r=0;r<t.length&&0===t[r];r++,n=n.sqr());if(++r<t.length)for(var i=n.sqr();r<t.length;r++,i=i.sqr())0!==t[r]&&(n=n.mul(i));return n},o.prototype.iushln=function(e){r("number"==typeof e&&e>=0);var t,n=e%26,i=(e-n)/26,o=67108863>>>26-n<<26-n;if(0!==n){var s=0;for(t=0;t<this.length;t++){var a=this.words[t]&o,u=(0|this.words[t])-a<<n;this.words[t]=u|s,s=a>>>26-n}s&&(this.words[t]=s,this.length++)}if(0!==i){for(t=this.length-1;t>=0;t--)this.words[t+i]=this.words[t];for(t=0;t<i;t++)this.words[t]=0;this.length+=i}return this.strip()},o.prototype.ishln=function(e){return r(0===this.negative),this.iushln(e)},o.prototype.iushrn=function(e,t,n){var i;r("number"==typeof e&&e>=0),i=t?(t-t%26)/26:0;var o=e%26,s=Math.min((e-o)/26,this.length),a=67108863^67108863>>>o<<o,u=n;if(i-=s,i=Math.max(0,i),u){for(var c=0;c<s;c++)u.words[c]=this.words[c];u.length=s}if(0===s);else if(this.length>s)for(this.length-=s,c=0;c<this.length;c++)this.words[c]=this.words[c+s];else this.words[0]=0,this.length=1;var l=0;for(c=this.length-1;c>=0&&(0!==l||c>=i);c--){var h=0|this.words[c];this.words[c]=l<<26-o|h>>>o,l=h&a}return u&&0!==l&&(u.words[u.length++]=l),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(e,t,n){return r(0===this.negative),this.iushrn(e,t,n)},o.prototype.shln=function(e){return this.clone().ishln(e)},o.prototype.ushln=function(e){return this.clone().iushln(e)},o.prototype.shrn=function(e){return this.clone().ishrn(e)},o.prototype.ushrn=function(e){return this.clone().iushrn(e)},o.prototype.testn=function(e){r("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26,i=1<<t;return!(this.length<=n)&&!!(this.words[n]&i)},o.prototype.imaskn=function(e){r("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26;if(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=n)return this;if(0!==t&&n++,this.length=Math.min(n,this.length),0!==t){var i=67108863^67108863>>>t<<t;this.words[this.length-1]&=i}return this.strip()},o.prototype.maskn=function(e){return this.clone().imaskn(e)},o.prototype.iaddn=function(e){return r("number"==typeof e),r(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},o.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},o.prototype.isubn=function(e){if(r("number"==typeof e),r(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this.strip()},o.prototype.addn=function(e){return this.clone().iaddn(e)},o.prototype.subn=function(e){return this.clone().isubn(e)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(e,t,n){var i,o,s=e.length+n;this._expand(s);var a=0;for(i=0;i<e.length;i++){o=(0|this.words[i+n])+a;var u=(0|e.words[i])*t;a=((o-=67108863&u)>>26)-(u/67108864|0),this.words[i+n]=67108863&o}for(;i<this.length-n;i++)a=(o=(0|this.words[i+n])+a)>>26,this.words[i+n]=67108863&o;if(0===a)return this.strip();for(r(-1===a),a=0,i=0;i<this.length;i++)a=(o=-(0|this.words[i])+a)>>26,this.words[i]=67108863&o;return this.negative=1,this.strip()},o.prototype._wordDiv=function(e,t){var n=(this.length,e.length),r=this.clone(),i=e,s=0|i.words[i.length-1];0!==(n=26-this._countBits(s))&&(i=i.ushln(n),r.iushln(n),s=0|i.words[i.length-1]);var a,u=r.length-i.length;if("mod"!==t){(a=new o(null)).length=u+1,a.words=new Array(a.length);for(var c=0;c<a.length;c++)a.words[c]=0}var l=r.clone()._ishlnsubmul(i,1,u);0===l.negative&&(r=l,a&&(a.words[u]=1));for(var h=u-1;h>=0;h--){var d=67108864*(0|r.words[i.length+h])+(0|r.words[i.length+h-1]);for(d=Math.min(d/s|0,67108863),r._ishlnsubmul(i,d,h);0!==r.negative;)d--,r.negative=0,r._ishlnsubmul(i,1,h),r.isZero()||(r.negative^=1);a&&(a.words[h]=d)}return a&&a.strip(),r.strip(),"div"!==t&&0!==n&&r.iushrn(n),{div:a||null,mod:r}},o.prototype.divmod=function(e,t,n){return r(!e.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===e.negative?(a=this.neg().divmod(e,t),"mod"!==t&&(i=a.div.neg()),"div"!==t&&(s=a.mod.neg(),n&&0!==s.negative&&s.iadd(e)),{div:i,mod:s}):0===this.negative&&0!==e.negative?(a=this.divmod(e.neg(),t),"mod"!==t&&(i=a.div.neg()),{div:i,mod:a.mod}):0!=(this.negative&e.negative)?(a=this.neg().divmod(e.neg(),t),"div"!==t&&(s=a.mod.neg(),n&&0!==s.negative&&s.isub(e)),{div:a.div,mod:s}):e.length>this.length||this.cmp(e)<0?{div:new o(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new o(this.modn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new o(this.modn(e.words[0]))}:this._wordDiv(e,t);var i,s,a},o.prototype.div=function(e){return this.divmod(e,"div",!1).div},o.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},o.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},o.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var n=0!==t.div.negative?t.mod.isub(e):t.mod,r=e.ushrn(1),i=e.andln(1),o=n.cmp(r);return o<0||1===i&&0===o?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},o.prototype.modn=function(e){r(e<=67108863);for(var t=(1<<26)%e,n=0,i=this.length-1;i>=0;i--)n=(t*n+(0|this.words[i]))%e;return n},o.prototype.idivn=function(e){r(e<=67108863);for(var t=0,n=this.length-1;n>=0;n--){var i=(0|this.words[n])+67108864*t;this.words[n]=i/e|0,t=i%e}return this.strip()},o.prototype.divn=function(e){return this.clone().idivn(e)},o.prototype.egcd=function(e){r(0===e.negative),r(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i=new o(1),s=new o(0),a=new o(0),u=new o(1),c=0;t.isEven()&&n.isEven();)t.iushrn(1),n.iushrn(1),++c;for(var l=n.clone(),h=t.clone();!t.isZero();){for(var d=0,f=1;0==(t.words[0]&f)&&d<26;++d,f<<=1);if(d>0)for(t.iushrn(d);d-- >0;)(i.isOdd()||s.isOdd())&&(i.iadd(l),s.isub(h)),i.iushrn(1),s.iushrn(1);for(var p=0,m=1;0==(n.words[0]&m)&&p<26;++p,m<<=1);if(p>0)for(n.iushrn(p);p-- >0;)(a.isOdd()||u.isOdd())&&(a.iadd(l),u.isub(h)),a.iushrn(1),u.iushrn(1);t.cmp(n)>=0?(t.isub(n),i.isub(a),s.isub(u)):(n.isub(t),a.isub(i),u.isub(s))}return{a:a,b:u,gcd:n.iushln(c)}},o.prototype._invmp=function(e){r(0===e.negative),r(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i,s=new o(1),a=new o(0),u=n.clone();t.cmpn(1)>0&&n.cmpn(1)>0;){for(var c=0,l=1;0==(t.words[0]&l)&&c<26;++c,l<<=1);if(c>0)for(t.iushrn(c);c-- >0;)s.isOdd()&&s.iadd(u),s.iushrn(1);for(var h=0,d=1;0==(n.words[0]&d)&&h<26;++h,d<<=1);if(h>0)for(n.iushrn(h);h-- >0;)a.isOdd()&&a.iadd(u),a.iushrn(1);t.cmp(n)>=0?(t.isub(n),s.isub(a)):(n.isub(t),a.isub(s))}return(i=0===t.cmpn(1)?s:a).cmpn(0)<0&&i.iadd(e),i},o.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),n=e.clone();t.negative=0,n.negative=0;for(var r=0;t.isEven()&&n.isEven();r++)t.iushrn(1),n.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;n.isEven();)n.iushrn(1);var i=t.cmp(n);if(i<0){var o=t;t=n,n=o}else if(0===i||0===n.cmpn(1))break;t.isub(n)}return n.iushln(r)},o.prototype.invm=function(e){return this.egcd(e).a.umod(e)},o.prototype.isEven=function(){return 0==(1&this.words[0])},o.prototype.isOdd=function(){return 1==(1&this.words[0])},o.prototype.andln=function(e){return this.words[0]&e},o.prototype.bincn=function(e){r("number"==typeof e);var t=e%26,n=(e-t)/26,i=1<<t;if(this.length<=n)return this._expand(n+1),this.words[n]|=i,this;for(var o=i,s=n;0!==o&&s<this.length;s++){var a=0|this.words[s];o=(a+=o)>>>26,a&=67108863,this.words[s]=a}return 0!==o&&(this.words[s]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(e){var t,n=e<0;if(0!==this.negative&&!n)return-1;if(0===this.negative&&n)return 1;if(this.strip(),this.length>1)t=1;else{n&&(e=-e),r(e<=67108863,"Number is too big");var i=0|this.words[0];t=i===e?0:i<e?-1:1}return 0!==this.negative?0|-t:t},o.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},o.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,n=this.length-1;n>=0;n--){var r=0|this.words[n],i=0|e.words[n];if(r!==i){r<i?t=-1:r>i&&(t=1);break}}return t},o.prototype.gtn=function(e){return 1===this.cmpn(e)},o.prototype.gt=function(e){return 1===this.cmp(e)},o.prototype.gten=function(e){return this.cmpn(e)>=0},o.prototype.gte=function(e){return this.cmp(e)>=0},o.prototype.ltn=function(e){return-1===this.cmpn(e)},o.prototype.lt=function(e){return-1===this.cmp(e)},o.prototype.lten=function(e){return this.cmpn(e)<=0},o.prototype.lte=function(e){return this.cmp(e)<=0},o.prototype.eqn=function(e){return 0===this.cmpn(e)},o.prototype.eq=function(e){return 0===this.cmp(e)},o.red=function(e){return new S(e)},o.prototype.toRed=function(e){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},o.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(e){return this.red=e,this},o.prototype.forceRed=function(e){return r(!this.red,"Already a number in reduction context"),this._forceRed(e)},o.prototype.redAdd=function(e){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},o.prototype.redIAdd=function(e){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},o.prototype.redSub=function(e){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},o.prototype.redISub=function(e){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},o.prototype.redShl=function(e){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},o.prototype.redMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},o.prototype.redIMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},o.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(e){return r(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var b={k256:null,p224:null,p192:null,p25519:null};function v(e,t){this.name=e,this.p=new o(t,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function y(){v.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function _(){v.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function w(){v.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function E(){v.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function S(e){if("string"==typeof e){var t=o._prime(e);this.m=t.p,this.prime=t}else r(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function M(e){S.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}v.prototype._tmp=function(){var e=new o(null);return e.words=new Array(Math.ceil(this.n/13)),e},v.prototype.ireduce=function(e){var t,n=e;do{this.split(n,this.tmp),t=(n=(n=this.imulK(n)).iadd(this.tmp)).bitLength()}while(t>this.n);var r=t<this.n?-1:n.ucmp(this.p);return 0===r?(n.words[0]=0,n.length=1):r>0?n.isub(this.p):void 0!==n.strip?n.strip():n._strip(),n},v.prototype.split=function(e,t){e.iushrn(this.n,0,t)},v.prototype.imulK=function(e){return e.imul(this.k)},i(y,v),y.prototype.split=function(e,t){for(var n=Math.min(e.length,9),r=0;r<n;r++)t.words[r]=e.words[r];if(t.length=n,e.length<=9)return e.words[0]=0,void(e.length=1);var i=e.words[9];for(t.words[t.length++]=4194303&i,r=10;r<e.length;r++){var o=0|e.words[r];e.words[r-10]=(4194303&o)<<4|i>>>22,i=o}i>>>=22,e.words[r-10]=i,0===i&&e.length>10?e.length-=10:e.length-=9},y.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,n=0;n<e.length;n++){var r=0|e.words[n];t+=977*r,e.words[n]=67108863&t,t=64*r+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},i(_,v),i(w,v),i(E,v),E.prototype.imulK=function(e){for(var t=0,n=0;n<e.length;n++){var r=19*(0|e.words[n])+t,i=67108863&r;r>>>=26,e.words[n]=i,t=r}return 0!==t&&(e.words[e.length++]=t),e},o._prime=function(e){if(b[e])return b[e];var t;if("k256"===e)t=new y;else if("p224"===e)t=new _;else if("p192"===e)t=new w;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new E}return b[e]=t,t},S.prototype._verify1=function(e){r(0===e.negative,"red works only with positives"),r(e.red,"red works only with red numbers")},S.prototype._verify2=function(e,t){r(0==(e.negative|t.negative),"red works only with positives"),r(e.red&&e.red===t.red,"red works only with red numbers")},S.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):e.umod(this.m)._forceRed(this)},S.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},S.prototype.add=function(e,t){this._verify2(e,t);var n=e.add(t);return n.cmp(this.m)>=0&&n.isub(this.m),n._forceRed(this)},S.prototype.iadd=function(e,t){this._verify2(e,t);var n=e.iadd(t);return n.cmp(this.m)>=0&&n.isub(this.m),n},S.prototype.sub=function(e,t){this._verify2(e,t);var n=e.sub(t);return n.cmpn(0)<0&&n.iadd(this.m),n._forceRed(this)},S.prototype.isub=function(e,t){this._verify2(e,t);var n=e.isub(t);return n.cmpn(0)<0&&n.iadd(this.m),n},S.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},S.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},S.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},S.prototype.isqr=function(e){return this.imul(e,e.clone())},S.prototype.sqr=function(e){return this.mul(e,e)},S.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(r(t%2==1),3===t){var n=this.m.add(new o(1)).iushrn(2);return this.pow(e,n)}for(var i=this.m.subn(1),s=0;!i.isZero()&&0===i.andln(1);)s++,i.iushrn(1);r(!i.isZero());var a=new o(1).toRed(this),u=a.redNeg(),c=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new o(2*l*l).toRed(this);0!==this.pow(l,c).cmp(u);)l.redIAdd(u);for(var h=this.pow(l,i),d=this.pow(e,i.addn(1).iushrn(1)),f=this.pow(e,i),p=s;0!==f.cmp(a);){for(var m=f,g=0;0!==m.cmp(a);g++)m=m.redSqr();r(g<p);var b=this.pow(h,new o(1).iushln(p-g-1));d=d.redMul(b),h=b.redSqr(),f=f.redMul(h),p=g}return d},S.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},S.prototype.pow=function(e,t){if(t.isZero())return new o(1).toRed(this);if(0===t.cmpn(1))return e.clone();var n=new Array(16);n[0]=new o(1).toRed(this),n[1]=e;for(var r=2;r<n.length;r++)n[r]=this.mul(n[r-1],e);var i=n[0],s=0,a=0,u=t.bitLength()%26;for(0===u&&(u=26),r=t.length-1;r>=0;r--){for(var c=t.words[r],l=u-1;l>=0;l--){var h=c>>l&1;i!==n[0]&&(i=this.sqr(i)),0!==h||0!==s?(s<<=1,s|=h,(4===++a||0===r&&0===l)&&(i=this.mul(i,n[s]),a=0,s=0)):a=0}u=26}return i},S.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},S.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},o.mont=function(e){return new M(e)},i(M,S),M.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},M.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},M.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var n=e.imul(t),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=n.isub(r).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},M.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new o(0)._forceRed(this);var n=e.mul(t),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=n.isub(r).iushrn(this.shift),s=i;return i.cmp(this.m)>=0?s=i.isub(this.m):i.cmpn(0)<0&&(s=i.iadd(this.m)),s._forceRed(this)},M.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(e,this)}).call(this,n(34)(e))},function(e,t){},function(e,t,n){t.publicEncrypt=n(285),t.privateDecrypt=n(287),t.privateEncrypt=function(e,n){return t.publicEncrypt(e,n,!0)},t.publicDecrypt=function(e,n){return t.privateDecrypt(e,n,!0)}},function(e,t,n){var r=n(63),i=n(43),o=n(51),s=n(152),a=n(153),u=n(93),c=n(154),l=n(84),h=n(8).Buffer;e.exports=function(e,t,n){var d;d=e.padding?e.padding:n?1:4;var f,p=r(e);if(4===d)f=function(e,t){var n=e.modulus.byteLength(),r=t.length,c=o("sha1").update(h.alloc(0)).digest(),l=c.length,d=2*l;if(r>n-d-2)throw new Error("message too long");var f=h.alloc(n-r-d-2),p=n-l-1,m=i(l),g=a(h.concat([c,f,h.alloc(1,1),t],p),s(m,p)),b=a(m,s(g,l));return new u(h.concat([h.alloc(1),b,g],n))}(p,t);else if(1===d)f=function(e,t,n){var r,o=t.length,s=e.modulus.byteLength();if(o>s-11)throw new Error("message too long");r=n?h.alloc(s-o-3,255):function(e){var t,n=h.allocUnsafe(e),r=0,o=i(2*e),s=0;for(;r<e;)s===o.length&&(o=i(2*e),s=0),(t=o[s++])&&(n[r++]=t);return n}(s-o-3);return new u(h.concat([h.from([0,n?1:2]),r,h.alloc(1),t],s))}(p,t,n);else{if(3!==d)throw new Error("unknown padding");if((f=new u(t)).cmp(p.modulus)>=0)throw new Error("data too long for modulus")}return n?l(f,p):c(f,p)}},function(e,t){},function(e,t,n){var r=n(63),i=n(152),o=n(153),s=n(93),a=n(84),u=n(51),c=n(154),l=n(8).Buffer;e.exports=function(e,t,n){var h;h=e.padding?e.padding:n?1:4;var d,f=r(e),p=f.modulus.byteLength();if(t.length>p||new s(t).cmp(f.modulus)>=0)throw new Error("decryption error");d=n?c(new s(t),f):a(t,f);var m=l.alloc(p-d.length);if(d=l.concat([m,d],p),4===h)return function(e,t){var n=e.modulus.byteLength(),r=u("sha1").update(l.alloc(0)).digest(),s=r.length;if(0!==t[0])throw new Error("decryption error");var a=t.slice(1,s+1),c=t.slice(s+1),h=o(a,i(c,s)),d=o(c,i(h,n-s-1));if(function(e,t){e=l.from(e),t=l.from(t);var n=0,r=e.length;e.length!==t.length&&(n++,r=Math.min(e.length,t.length));var i=-1;for(;++i<r;)n+=e[i]^t[i];return n}(r,d.slice(0,s)))throw new Error("decryption error");var f=s;for(;0===d[f];)f++;if(1!==d[f++])throw new Error("decryption error");return d.slice(f)}(f,d);if(1===h)return function(e,t,n){var r=t.slice(0,2),i=2,o=0;for(;0!==t[i++];)if(i>=t.length){o++;break}var s=t.slice(2,i-1);("0002"!==r.toString("hex")&&!n||"0001"!==r.toString("hex")&&n)&&o++;s.length<8&&o++;if(o)throw new Error("decryption error");return t.slice(i)}(0,d,n);if(3===h)return d;throw new Error("unknown padding")}},function(e,t,n){"use strict";(function(e,r){function i(){throw new Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11")}var o=n(8),s=n(43),a=o.Buffer,u=o.kMaxLength,c=e.crypto||e.msCrypto,l=Math.pow(2,32)-1;function h(e,t){if("number"!=typeof e||e!=e)throw new TypeError("offset must be a number");if(e>l||e<0)throw new TypeError("offset must be a uint32");if(e>u||e>t)throw new RangeError("offset out of range")}function d(e,t,n){if("number"!=typeof e||e!=e)throw new TypeError("size must be a number");if(e>l||e<0)throw new TypeError("size must be a uint32");if(e+t>n||e>u)throw new RangeError("buffer too small")}function f(e,t,n,i){if(r.browser){var o=e.buffer,a=new Uint8Array(o,t,n);return c.getRandomValues(a),i?void r.nextTick((function(){i(null,e)})):e}if(!i)return s(n).copy(e,t),e;s(n,(function(n,r){if(n)return i(n);r.copy(e,t),i(null,e)}))}c&&c.getRandomValues||!r.browser?(t.randomFill=function(t,n,r,i){if(!(a.isBuffer(t)||t instanceof e.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if("function"==typeof n)i=n,n=0,r=t.length;else if("function"==typeof r)i=r,r=t.length-n;else if("function"!=typeof i)throw new TypeError('"cb" argument must be a function');return h(n,t.length),d(r,n,t.length),f(t,n,r,i)},t.randomFillSync=function(t,n,r){void 0===n&&(n=0);if(!(a.isBuffer(t)||t instanceof e.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');h(n,t.length),void 0===r&&(r=t.length-n);return d(r,n,t.length),f(t,n,r)}):(t.randomFill=i,t.randomFillSync=i)}).call(this,n(19),n(16))},function(e,t,n){"use strict";var r=n(8).Buffer,i=n(290);function o(e){if(r.isBuffer(e))return e;if("string"==typeof e)return r.from(e,"base64");throw new TypeError("ECDSA signature must be a Base64 string or a Buffer")}function s(e,t,n){for(var r=0;t+r<n&&0===e[t+r];)++r;return e[t+r]>=128&&--r,r}e.exports={derToJose:function(e,t){e=o(e);var n=i(t),s=n+1,a=e.length,u=0;if(48!==e[u++])throw new Error('Could not find expected "seq"');var c=e[u++];if(129===c&&(c=e[u++]),a-u<c)throw new Error('"seq" specified length of "'+c+'", only "'+(a-u)+'" remaining');if(2!==e[u++])throw new Error('Could not find expected "int" for "r"');var l=e[u++];if(a-u-2<l)throw new Error('"r" specified length of "'+l+'", only "'+(a-u-2)+'" available');if(s<l)throw new Error('"r" specified length of "'+l+'", max of "'+s+'" is acceptable');var h=u;if(u+=l,2!==e[u++])throw new Error('Could not find expected "int" for "s"');var d=e[u++];if(a-u!==d)throw new Error('"s" specified length of "'+d+'", expected "'+(a-u)+'"');if(s<d)throw new Error('"s" specified length of "'+d+'", max of "'+s+'" is acceptable');var f=u;if((u+=d)!==a)throw new Error('Expected to consume entire buffer, but "'+(a-u)+'" bytes remain');var p=n-l,m=n-d,g=r.allocUnsafe(p+l+m+d);for(u=0;u<p;++u)g[u]=0;e.copy(g,u,h+Math.max(-p,0),h+l);for(var b=u=n;u<b+m;++u)g[u]=0;return e.copy(g,u,f+Math.max(-m,0),f+d),g=(g=g.toString("base64")).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")},joseToDer:function(e,t){e=o(e);var n=i(t),a=e.length;if(a!==2*n)throw new TypeError('"'+t+'" signatures must be "'+2*n+'" bytes, saw "'+a+'"');var u=s(e,0,n),c=s(e,n,e.length),l=n-u,h=n-c,d=2+l+1+1+h,f=d<128,p=r.allocUnsafe((f?2:3)+d),m=0;return p[m++]=48,f?p[m++]=d:(p[m++]=129,p[m++]=255&d),p[m++]=2,p[m++]=l,u<0?(p[m++]=0,m+=e.copy(p,m,0,n)):m+=e.copy(p,m,u,n),p[m++]=2,p[m++]=h,c<0?(p[m++]=0,e.copy(p,m,n)):e.copy(p,m,n+c),p}}},function(e,t,n){"use strict";function r(e){return(e/8|0)+(e%8==0?0:1)}var i={ES256:r(256),ES384:r(384),ES512:r(521)};e.exports=function(e){var t=i[e];if(t)return t;throw new Error('Unknown algorithm "'+e+'"')}},function(e,t,n){var r=n(8).Buffer,i=n(101),o=n(106),s=n(57),a=n(155),u=n(59),c=/^[a-zA-Z0-9\-_]+?\.[a-zA-Z0-9\-_]+?\.([a-zA-Z0-9\-_]+)?$/;function l(e){if(function(e){return"[object Object]"===Object.prototype.toString.call(e)}(e))return e;try{return JSON.parse(e)}catch(e){return}}function h(e){var t=e.split(".",1)[0];return l(r.from(t,"base64").toString("binary"))}function d(e){return e.split(".")[2]}function f(e){return c.test(e)&&!!h(e)}function p(e,t,n){if(!t){var r=new Error("Missing algorithm parameter for jws.verify");throw r.code="MISSING_ALGORITHM",r}var i=d(e=a(e)),s=function(e){return e.split(".",2).join(".")}(e);return o(t).verify(s,i,n)}function m(e,t){if(t=t||{},!f(e=a(e)))return null;var n=h(e);if(!n)return null;var i=function(e,t){t=t||"utf8";var n=e.split(".")[1];return r.from(n,"base64").toString(t)}(e);return("JWT"===n.typ||t.json)&&(i=JSON.parse(i,t.encoding)),{header:n,payload:i,signature:d(e)}}function g(e){var t=(e=e||{}).secret||e.publicKey||e.key,n=new i(t);this.readable=!0,this.algorithm=e.algorithm,this.encoding=e.encoding,this.secret=this.publicKey=this.key=n,this.signature=new i(e.signature),this.secret.once("close",function(){!this.signature.writable&&this.readable&&this.verify()}.bind(this)),this.signature.once("close",function(){!this.secret.writable&&this.readable&&this.verify()}.bind(this))}u.inherits(g,s),g.prototype.verify=function(){try{var e=p(this.signature.buffer,this.algorithm,this.key.buffer),t=m(this.signature.buffer,this.encoding);return this.emit("done",e,t),this.emit("data",e),this.emit("end"),this.readable=!1,e}catch(e){this.readable=!1,this.emit("error",e),this.emit("close")}},g.decode=m,g.isValid=f,g.verify=p,e.exports=g},function(e,t,n){var r=n(64),i=n(156),o=n(157),s=n(99),a=n(158),u=n(159),c=n(70),l=["RS256","RS384","RS512","ES256","ES384","ES512"],h=["RS256","RS384","RS512"],d=["HS256","HS384","HS512"];u&&(l.splice(3,0,"PS256","PS384","PS512"),h.splice(3,0,"PS256","PS384","PS512")),e.exports=function(e,t,n,u){var f;if("function"!=typeof n||u||(u=n,n={}),n||(n={}),n=Object.assign({},n),f=u||function(e,t){if(e)throw e;return t},n.clockTimestamp&&"number"!=typeof n.clockTimestamp)return f(new r("clockTimestamp must be a number"));if(void 0!==n.nonce&&("string"!=typeof n.nonce||""===n.nonce.trim()))return f(new r("nonce must be a non-empty string"));var p=n.clockTimestamp||Math.floor(Date.now()/1e3);if(!e)return f(new r("jwt must be provided"));if("string"!=typeof e)return f(new r("jwt must be a string"));var m,g=e.split(".");if(3!==g.length)return f(new r("jwt malformed"));try{m=s(e,{complete:!0})}catch(e){return f(e)}if(!m)return f(new r("invalid token"));var b,v=m.header;if("function"==typeof t){if(!u)return f(new r("verify must be called asynchronous if secret or public key is provided as a callback"));b=t}else b=function(e,n){return n(null,t)};return b(v,(function(t,s){if(t)return f(new r("error in secret or public key callback: "+t.message));var u,b=""!==g[2].trim();if(!b&&s)return f(new r("jwt signature is required"));if(b&&!s)return f(new r("secret or public key must be provided"));if(b||n.algorithms||(n.algorithms=["none"]),n.algorithms||(n.algorithms=~s.toString().indexOf("BEGIN CERTIFICATE")||~s.toString().indexOf("BEGIN PUBLIC KEY")?l:~s.toString().indexOf("BEGIN RSA PUBLIC KEY")?h:d),!~n.algorithms.indexOf(m.header.alg))return f(new r("invalid algorithm"));try{u=c.verify(e,m.header.alg,s)}catch(e){return f(e)}if(!u)return f(new r("invalid signature"));var y=m.payload;if(void 0!==y.nbf&&!n.ignoreNotBefore){if("number"!=typeof y.nbf)return f(new r("invalid nbf value"));if(y.nbf>p+(n.clockTolerance||0))return f(new i("jwt not active",new Date(1e3*y.nbf)))}if(void 0!==y.exp&&!n.ignoreExpiration){if("number"!=typeof y.exp)return f(new r("invalid exp value"));if(p>=y.exp+(n.clockTolerance||0))return f(new o("jwt expired",new Date(1e3*y.exp)))}if(n.audience){var _=Array.isArray(n.audience)?n.audience:[n.audience];if(!(Array.isArray(y.aud)?y.aud:[y.aud]).some((function(e){return _.some((function(t){return t instanceof RegExp?t.test(e):t===e}))})))return f(new r("jwt audience invalid. expected: "+_.join(" or ")))}if(n.issuer&&("string"==typeof n.issuer&&y.iss!==n.issuer||Array.isArray(n.issuer)&&-1===n.issuer.indexOf(y.iss)))return f(new r("jwt issuer invalid. expected: "+n.issuer));if(n.subject&&y.sub!==n.subject)return f(new r("jwt subject invalid. expected: "+n.subject));if(n.jwtid&&y.jti!==n.jwtid)return f(new r("jwt jwtid invalid. expected: "+n.jwtid));if(n.nonce&&y.nonce!==n.nonce)return f(new r("jwt nonce invalid. expected: "+n.nonce));if(n.maxAge){if("number"!=typeof y.iat)return f(new r("iat required when maxAge is specified"));var w=a(n.maxAge,y.iat);if(void 0===w)return f(new r('"maxAge" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'));if(p>=w+(n.clockTolerance||0))return f(new o("maxAge exceeded",new Date(1e3*w)))}if(!0===n.complete){var E=m.signature;return f(null,{header:v,payload:y,signature:E})}return f(null,y)}))}},function(e,t){var n=1e3,r=6e4,i=60*r,o=24*i;function s(e,t,n,r){var i=t>=1.5*n;return Math.round(e/n)+" "+r+(i?"s":"")}e.exports=function(e,t){t=t||{};var a=typeof e;if("string"===a&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!t)return;var s=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*s;case"weeks":case"week":case"w":return 6048e5*s;case"days":case"day":case"d":return s*o;case"hours":case"hour":case"hrs":case"hr":case"h":return s*i;case"minutes":case"minute":case"mins":case"min":case"m":return s*r;case"seconds":case"second":case"secs":case"sec":case"s":return s*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}(e);if("number"===a&&isFinite(e))return t.long?function(e){var t=Math.abs(e);if(t>=o)return s(e,t,o,"day");if(t>=i)return s(e,t,i,"hour");if(t>=r)return s(e,t,r,"minute");if(t>=n)return s(e,t,n,"second");return e+" ms"}(e):function(e){var t=Math.abs(e);if(t>=o)return Math.round(e/o)+"d";if(t>=i)return Math.round(e/i)+"h";if(t>=r)return Math.round(e/r)+"m";if(t>=n)return Math.round(e/n)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,n){(function(n){var r;t=e.exports=K,r="object"==typeof n&&Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})&&Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).NODE_DEBUG&&/\bsemver\b/i.test(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).NODE_DEBUG)?function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER"),console.log.apply(console,e)}:function(){},t.SEMVER_SPEC_VERSION="2.0.0";var i=Number.MAX_SAFE_INTEGER||9007199254740991,o=t.re=[],s=t.src=[],a=0,u=a++;s[u]="0|[1-9]\\d*";var c=a++;s[c]="[0-9]+";var l=a++;s[l]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var h=a++;s[h]="("+s[u]+")\\.("+s[u]+")\\.("+s[u]+")";var d=a++;s[d]="("+s[c]+")\\.("+s[c]+")\\.("+s[c]+")";var f=a++;s[f]="(?:"+s[u]+"|"+s[l]+")";var p=a++;s[p]="(?:"+s[c]+"|"+s[l]+")";var m=a++;s[m]="(?:-("+s[f]+"(?:\\."+s[f]+")*))";var g=a++;s[g]="(?:-?("+s[p]+"(?:\\."+s[p]+")*))";var b=a++;s[b]="[0-9A-Za-z-]+";var v=a++;s[v]="(?:\\+("+s[b]+"(?:\\."+s[b]+")*))";var y=a++,_="v?"+s[h]+s[m]+"?"+s[v]+"?";s[y]="^"+_+"$";var w="[v=\\s]*"+s[d]+s[g]+"?"+s[v]+"?",E=a++;s[E]="^"+w+"$";var S=a++;s[S]="((?:<|>)?=?)";var M=a++;s[M]=s[c]+"|x|X|\\*";var O=a++;s[O]=s[u]+"|x|X|\\*";var A=a++;s[A]="[v=\\s]*("+s[O]+")(?:\\.("+s[O]+")(?:\\.("+s[O]+")(?:"+s[m]+")?"+s[v]+"?)?)?";var C=a++;s[C]="[v=\\s]*("+s[M]+")(?:\\.("+s[M]+")(?:\\.("+s[M]+")(?:"+s[g]+")?"+s[v]+"?)?)?";var T=a++;s[T]="^"+s[S]+"\\s*"+s[A]+"$";var k=a++;s[k]="^"+s[S]+"\\s*"+s[C]+"$";var x=a++;s[x]="(?:^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])";var j=a++;s[j]="(?:~>?)";var I=a++;s[I]="(\\s*)"+s[j]+"\\s+",o[I]=new RegExp(s[I],"g");var R=a++;s[R]="^"+s[j]+s[A]+"$";var N=a++;s[N]="^"+s[j]+s[C]+"$";var P=a++;s[P]="(?:\\^)";var D=a++;s[D]="(\\s*)"+s[P]+"\\s+",o[D]=new RegExp(s[D],"g");var U=a++;s[U]="^"+s[P]+s[A]+"$";var L=a++;s[L]="^"+s[P]+s[C]+"$";var F=a++;s[F]="^"+s[S]+"\\s*("+w+")$|^$";var B=a++;s[B]="^"+s[S]+"\\s*("+_+")$|^$";var H=a++;s[H]="(\\s*)"+s[S]+"\\s*("+w+"|"+s[A]+")",o[H]=new RegExp(s[H],"g");var q=a++;s[q]="^\\s*("+s[A]+")\\s+-\\s+("+s[A]+")\\s*$";var V=a++;s[V]="^\\s*("+s[C]+")\\s+-\\s+("+s[C]+")\\s*$";var G=a++;s[G]="(<|>)?=?\\s*\\*";for(var z=0;z<35;z++)r(z,s[z]),o[z]||(o[z]=new RegExp(s[z]));function W(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof K)return e;if("string"!=typeof e)return null;if(e.length>256)return null;if(!(t.loose?o[E]:o[y]).test(e))return null;try{return new K(e,t)}catch(e){return null}}function K(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof K){if(e.loose===t.loose)return e;e=e.version}else if("string"!=typeof e)throw new TypeError("Invalid Version: "+e);if(e.length>256)throw new TypeError("version is longer than 256 characters");if(!(this instanceof K))return new K(e,t);r("SemVer",e,t),this.options=t,this.loose=!!t.loose;var n=e.trim().match(t.loose?o[E]:o[y]);if(!n)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>i||this.major<0)throw new TypeError("Invalid major version");if(this.minor>i||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>i||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map((function(e){if(/^[0-9]+$/.test(e)){var t=+e;if(t>=0&&t<i)return t}return e})):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}t.parse=W,t.valid=function(e,t){var n=W(e,t);return n?n.version:null},t.clean=function(e,t){var n=W(e.trim().replace(/^[=v]+/,""),t);return n?n.version:null},t.SemVer=K,K.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},K.prototype.toString=function(){return this.version},K.prototype.compare=function(e){return r("SemVer.compare",this.version,this.options,e),e instanceof K||(e=new K(e,this.options)),this.compareMain(e)||this.comparePre(e)},K.prototype.compareMain=function(e){return e instanceof K||(e=new K(e,this.options)),Q(this.major,e.major)||Q(this.minor,e.minor)||Q(this.patch,e.patch)},K.prototype.comparePre=function(e){if(e instanceof K||(e=new K(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var n=this.prerelease[t],i=e.prerelease[t];if(r("prerelease compare",t,n,i),void 0===n&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===n)return-1;if(n!==i)return Q(n,i)}while(++t)},K.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var n=this.prerelease.length;--n>=0;)"number"==typeof this.prerelease[n]&&(this.prerelease[n]++,n=-2);-1===n&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this.raw=this.version,this},t.inc=function(e,t,n,r){"string"==typeof n&&(r=n,n=void 0);try{return new K(e,n).inc(t,r).version}catch(e){return null}},t.diff=function(e,t){if(X(e,t))return null;var n=W(e),r=W(t),i="";if(n.prerelease.length||r.prerelease.length){i="pre";var o="prerelease"}for(var s in n)if(("major"===s||"minor"===s||"patch"===s)&&n[s]!==r[s])return i+s;return o},t.compareIdentifiers=Q;var Y=/^[0-9]+$/;function Q(e,t){var n=Y.test(e),r=Y.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1}function J(e,t,n){return new K(e,n).compare(new K(t,n))}function Z(e,t,n){return J(e,t,n)>0}function $(e,t,n){return J(e,t,n)<0}function X(e,t,n){return 0===J(e,t,n)}function ee(e,t,n){return 0!==J(e,t,n)}function te(e,t,n){return J(e,t,n)>=0}function ne(e,t,n){return J(e,t,n)<=0}function re(e,t,n,r){switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e===n;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e!==n;case"":case"=":case"==":return X(e,n,r);case"!=":return ee(e,n,r);case">":return Z(e,n,r);case">=":return te(e,n,r);case"<":return $(e,n,r);case"<=":return ne(e,n,r);default:throw new TypeError("Invalid operator: "+t)}}function ie(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof ie){if(e.loose===!!t.loose)return e;e=e.value}if(!(this instanceof ie))return new ie(e,t);r("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===oe?this.value="":this.value=this.operator+this.semver.version,r("comp",this)}t.rcompareIdentifiers=function(e,t){return Q(t,e)},t.major=function(e,t){return new K(e,t).major},t.minor=function(e,t){return new K(e,t).minor},t.patch=function(e,t){return new K(e,t).patch},t.compare=J,t.compareLoose=function(e,t){return J(e,t,!0)},t.rcompare=function(e,t,n){return J(t,e,n)},t.sort=function(e,n){return e.sort((function(e,r){return t.compare(e,r,n)}))},t.rsort=function(e,n){return e.sort((function(e,r){return t.rcompare(e,r,n)}))},t.gt=Z,t.lt=$,t.eq=X,t.neq=ee,t.gte=te,t.lte=ne,t.cmp=re,t.Comparator=ie;var oe={};function se(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof se)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new se(e.raw,t);if(e instanceof ie)return new se(e.value,t);if(!(this instanceof se))return new se(e,t);if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map((function(e){return this.parseRange(e.trim())}),this).filter((function(e){return e.length})),!this.set.length)throw new TypeError("Invalid SemVer Range: "+e);this.format()}function ae(e){return!e||"x"===e.toLowerCase()||"*"===e}function ue(e,t,n,r,i,o,s,a,u,c,l,h,d){return((t=ae(n)?"":ae(r)?">="+n+".0.0":ae(i)?">="+n+"."+r+".0":">="+t)+" "+(a=ae(u)?"":ae(c)?"<"+(+u+1)+".0.0":ae(l)?"<"+u+"."+(+c+1)+".0":h?"<="+u+"."+c+"."+l+"-"+h:"<="+a)).trim()}function ce(e,t,n){for(var i=0;i<e.length;i++)if(!e[i].test(t))return!1;if(t.prerelease.length&&!n.includePrerelease){for(i=0;i<e.length;i++)if(r(e[i].semver),e[i].semver!==oe&&e[i].semver.prerelease.length>0){var o=e[i].semver;if(o.major===t.major&&o.minor===t.minor&&o.patch===t.patch)return!0}return!1}return!0}function le(e,t,n){try{t=new se(t,n)}catch(e){return!1}return t.test(e)}function he(e,t,n,r){var i,o,s,a,u;switch(e=new K(e,r),t=new se(t,r),n){case">":i=Z,o=ne,s=$,a=">",u=">=";break;case"<":i=$,o=te,s=Z,a="<",u="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(le(e,t,r))return!1;for(var c=0;c<t.set.length;++c){var l=t.set[c],h=null,d=null;if(l.forEach((function(e){e.semver===oe&&(e=new ie(">=0.0.0")),h=h||e,d=d||e,i(e.semver,h.semver,r)?h=e:s(e.semver,d.semver,r)&&(d=e)})),h.operator===a||h.operator===u)return!1;if((!d.operator||d.operator===a)&&o(e,d.semver))return!1;if(d.operator===u&&s(e,d.semver))return!1}return!0}ie.prototype.parse=function(e){var t=this.options.loose?o[F]:o[B],n=e.match(t);if(!n)throw new TypeError("Invalid comparator: "+e);this.operator=n[1],"="===this.operator&&(this.operator=""),n[2]?this.semver=new K(n[2],this.options.loose):this.semver=oe},ie.prototype.toString=function(){return this.value},ie.prototype.test=function(e){return r("Comparator.test",e,this.options.loose),this.semver===oe||("string"==typeof e&&(e=new K(e,this.options)),re(e,this.operator,this.semver,this.options))},ie.prototype.intersects=function(e,t){if(!(e instanceof ie))throw new TypeError("a Comparator is required");var n;if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),""===this.operator)return n=new se(e.value,t),le(this.value,n,t);if(""===e.operator)return n=new se(this.value,t),le(e.semver,n,t);var r=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),i=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),o=this.semver.version===e.semver.version,s=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),a=re(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),u=re(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return r||i||o&&s||a||u},t.Range=se,se.prototype.format=function(){return this.range=this.set.map((function(e){return e.join(" ").trim()})).join("||").trim(),this.range},se.prototype.toString=function(){return this.range},se.prototype.parseRange=function(e){var t=this.options.loose;e=e.trim();var n=t?o[V]:o[q];e=e.replace(n,ue),r("hyphen replace",e),e=e.replace(o[H],"$1$2$3"),r("comparator trim",e,o[H]),e=(e=(e=e.replace(o[I],"$1~")).replace(o[D],"$1^")).split(/\s+/).join(" ");var i=t?o[F]:o[B],s=e.split(" ").map((function(e){return function(e,t){return r("comp",e,t),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){r("caret",e,t);var n=t.loose?o[L]:o[U];return e.replace(n,(function(t,n,i,o,s){var a;return r("caret",e,t,n,i,o,s),ae(n)?a="":ae(i)?a=">="+n+".0.0 <"+(+n+1)+".0.0":ae(o)?a="0"===n?">="+n+"."+i+".0 <"+n+"."+(+i+1)+".0":">="+n+"."+i+".0 <"+(+n+1)+".0.0":s?(r("replaceCaret pr",s),a="0"===n?"0"===i?">="+n+"."+i+"."+o+"-"+s+" <"+n+"."+i+"."+(+o+1):">="+n+"."+i+"."+o+"-"+s+" <"+n+"."+(+i+1)+".0":">="+n+"."+i+"."+o+"-"+s+" <"+(+n+1)+".0.0"):(r("no pr"),a="0"===n?"0"===i?">="+n+"."+i+"."+o+" <"+n+"."+i+"."+(+o+1):">="+n+"."+i+"."+o+" <"+n+"."+(+i+1)+".0":">="+n+"."+i+"."+o+" <"+(+n+1)+".0.0"),r("caret return",a),a}))}(e,t)})).join(" ")}(e,t),r("caret",e),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){var n=t.loose?o[N]:o[R];return e.replace(n,(function(t,n,i,o,s){var a;return r("tilde",e,t,n,i,o,s),ae(n)?a="":ae(i)?a=">="+n+".0.0 <"+(+n+1)+".0.0":ae(o)?a=">="+n+"."+i+".0 <"+n+"."+(+i+1)+".0":s?(r("replaceTilde pr",s),a=">="+n+"."+i+"."+o+"-"+s+" <"+n+"."+(+i+1)+".0"):a=">="+n+"."+i+"."+o+" <"+n+"."+(+i+1)+".0",r("tilde return",a),a}))}(e,t)})).join(" ")}(e,t),r("tildes",e),e=function(e,t){return r("replaceXRanges",e,t),e.split(/\s+/).map((function(e){return function(e,t){e=e.trim();var n=t.loose?o[k]:o[T];return e.replace(n,(function(t,n,i,o,s,a){r("xRange",e,t,n,i,o,s,a);var u=ae(i),c=u||ae(o),l=c||ae(s);return"="===n&&l&&(n=""),u?t=">"===n||"<"===n?"<0.0.0":"*":n&&l?(c&&(o=0),s=0,">"===n?(n=">=",c?(i=+i+1,o=0,s=0):(o=+o+1,s=0)):"<="===n&&(n="<",c?i=+i+1:o=+o+1),t=n+i+"."+o+"."+s):c?t=">="+i+".0.0 <"+(+i+1)+".0.0":l&&(t=">="+i+"."+o+".0 <"+i+"."+(+o+1)+".0"),r("xRange return",t),t}))}(e,t)})).join(" ")}(e,t),r("xrange",e),e=function(e,t){return r("replaceStars",e,t),e.trim().replace(o[G],"")}(e,t),r("stars",e),e}(e,this.options)}),this).join(" ").split(/\s+/);return this.options.loose&&(s=s.filter((function(e){return!!e.match(i)}))),s=s.map((function(e){return new ie(e,this.options)}),this)},se.prototype.intersects=function(e,t){if(!(e instanceof se))throw new TypeError("a Range is required");return this.set.some((function(n){return n.every((function(n){return e.set.some((function(e){return e.every((function(e){return n.intersects(e,t)}))}))}))}))},t.toComparators=function(e,t){return new se(e,t).set.map((function(e){return e.map((function(e){return e.value})).join(" ").trim().split(" ")}))},se.prototype.test=function(e){if(!e)return!1;"string"==typeof e&&(e=new K(e,this.options));for(var t=0;t<this.set.length;t++)if(ce(this.set[t],e,this.options))return!0;return!1},t.satisfies=le,t.maxSatisfying=function(e,t,n){var r=null,i=null;try{var o=new se(t,n)}catch(e){return null}return e.forEach((function(e){o.test(e)&&(r&&-1!==i.compare(e)||(i=new K(r=e,n)))})),r},t.minSatisfying=function(e,t,n){var r=null,i=null;try{var o=new se(t,n)}catch(e){return null}return e.forEach((function(e){o.test(e)&&(r&&1!==i.compare(e)||(i=new K(r=e,n)))})),r},t.minVersion=function(e,t){e=new se(e,t);var n=new K("0.0.0");if(e.test(n))return n;if(n=new K("0.0.0-0"),e.test(n))return n;n=null;for(var r=0;r<e.set.length;++r){e.set[r].forEach((function(e){var t=new K(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":n&&!Z(n,t)||(n=t);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+e.operator)}}))}if(n&&e.test(n))return n;return null},t.validRange=function(e,t){try{return new se(e,t).range||"*"}catch(e){return null}},t.ltr=function(e,t,n){return he(e,t,"<",n)},t.gtr=function(e,t,n){return he(e,t,">",n)},t.outside=he,t.prerelease=function(e,t){var n=W(e,t);return n&&n.prerelease.length?n.prerelease:null},t.intersects=function(e,t,n){return e=new se(e,n),t=new se(t,n),e.intersects(t)},t.coerce=function(e){if(e instanceof K)return e;if("string"!=typeof e)return null;var t=e.match(o[x]);if(null==t)return null;return W(t[1]+"."+(t[2]||"0")+"."+(t[3]||"0"))}}).call(this,n(16))},function(e,t,n){(function(t){var r=n(158),i=n(159),o=n(70),s=n(296),a=n(297),u=n(298),c=n(299),l=n(300),h=n(301),d=n(302),f=["RS256","RS384","RS512","ES256","ES384","ES512","HS256","HS384","HS512","none"];i&&f.splice(3,0,"PS256","PS384","PS512");var p={expiresIn:{isValid:function(e){return u(e)||h(e)&&e},message:'"expiresIn" should be a number of seconds or string representing a timespan'},notBefore:{isValid:function(e){return u(e)||h(e)&&e},message:'"notBefore" should be a number of seconds or string representing a timespan'},audience:{isValid:function(e){return h(e)||Array.isArray(e)},message:'"audience" must be a string or array'},algorithm:{isValid:s.bind(null,f),message:'"algorithm" must be a valid string enum value'},header:{isValid:l,message:'"header" must be an object'},encoding:{isValid:h,message:'"encoding" must be a string'},issuer:{isValid:h,message:'"issuer" must be a string'},subject:{isValid:h,message:'"subject" must be a string'},jwtid:{isValid:h,message:'"jwtid" must be a string'},noTimestamp:{isValid:a,message:'"noTimestamp" must be a boolean'},keyid:{isValid:h,message:'"keyid" must be a string'},mutatePayload:{isValid:a,message:'"mutatePayload" must be a boolean'}},m={iat:{isValid:c,message:'"iat" should be a number of seconds'},exp:{isValid:c,message:'"exp" should be a number of seconds'},nbf:{isValid:c,message:'"nbf" should be a number of seconds'}};function g(e,t,n,r){if(!l(n))throw new Error('Expected "'+r+'" to be a plain object.');Object.keys(n).forEach((function(i){var o=e[i];if(o){if(!o.isValid(n[i]))throw new Error(o.message)}else if(!t)throw new Error('"'+i+'" is not allowed in "'+r+'"')}))}var b={audience:"aud",issuer:"iss",subject:"sub",jwtid:"jti"},v=["expiresIn","notBefore","noTimestamp","audience","issuer","subject","jwtid"];e.exports=function(e,n,i,s){"function"==typeof i?(s=i,i={}):i=i||{};var a="object"==typeof e&&!t.isBuffer(e),u=Object.assign({alg:i.algorithm||"HS256",typ:a?"JWT":void 0,kid:i.keyid},i.header);function c(e){if(s)return s(e);throw e}if(!n&&"none"!==i.algorithm)return c(new Error("secretOrPrivateKey must have a value"));if(void 0===e)return c(new Error("payload is required"));if(a){try{!function(e){g(m,!0,e,"payload")}(e)}catch(e){return c(e)}i.mutatePayload||(e=Object.assign({},e))}else{var l=v.filter((function(e){return void 0!==i[e]}));if(l.length>0)return c(new Error("invalid "+l.join(",")+" option for "+typeof e+" payload"))}if(void 0!==e.exp&&void 0!==i.expiresIn)return c(new Error('Bad "options.expiresIn" option the payload already has an "exp" property.'));if(void 0!==e.nbf&&void 0!==i.notBefore)return c(new Error('Bad "options.notBefore" option the payload already has an "nbf" property.'));try{!function(e){g(p,!1,e,"options")}(i)}catch(e){return c(e)}var h=e.iat||Math.floor(Date.now()/1e3);if(i.noTimestamp?delete e.iat:a&&(e.iat=h),void 0!==i.notBefore){try{e.nbf=r(i.notBefore,h)}catch(e){return c(e)}if(void 0===e.nbf)return c(new Error('"notBefore" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}if(void 0!==i.expiresIn&&"object"==typeof e){try{e.exp=r(i.expiresIn,h)}catch(e){return c(e)}if(void 0===e.exp)return c(new Error('"expiresIn" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}Object.keys(b).forEach((function(t){var n=b[t];if(void 0!==i[t]){if(void 0!==e[n])return c(new Error('Bad "options.'+t+'" option. The payload already has an "'+n+'" property.'));e[n]=i[t]}}));var f=i.encoding||"utf8";if("function"!=typeof s)return o.sign({header:u,payload:e,secret:n,encoding:f});s=s&&d(s),o.createSign({header:u,privateKey:n,payload:e,encoding:f}).once("error",s).once("done",(function(e){s(null,e)}))}}).call(this,n(17).Buffer)},function(e,t){var n=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,o=/^0o[0-7]+$/i,s=/^(?:0|[1-9]\d*)$/,a=parseInt;function u(e){return e!=e}function c(e,t){return function(e,t){for(var n=-1,r=e?e.length:0,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}(t,(function(t){return e[t]}))}var l,h,d=Object.prototype,f=d.hasOwnProperty,p=d.toString,m=d.propertyIsEnumerable,g=(l=Object.keys,h=Object,function(e){return l(h(e))}),b=Math.max;function v(e,t){var n=w(e)||function(e){return function(e){return M(e)&&E(e)}(e)&&f.call(e,"callee")&&(!m.call(e,"callee")||"[object Arguments]"==p.call(e))}(e)?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],r=n.length,i=!!r;for(var o in e)!t&&!f.call(e,o)||i&&("length"==o||_(o,r))||n.push(o);return n}function y(e){if(n=(t=e)&&t.constructor,r="function"==typeof n&&n.prototype||d,t!==r)return g(e);var t,n,r,i=[];for(var o in Object(e))f.call(e,o)&&"constructor"!=o&&i.push(o);return i}function _(e,t){return!!(t=null==t?9007199254740991:t)&&("number"==typeof e||s.test(e))&&e>-1&&e%1==0&&e<t}var w=Array.isArray;function E(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}(e.length)&&!function(e){var t=S(e)?p.call(e):"";return"[object Function]"==t||"[object GeneratorFunction]"==t}(e)}function S(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function M(e){return!!e&&"object"==typeof e}e.exports=function(e,t,s,l){var h;e=E(e)?e:(h=e)?c(h,function(e){return E(e)?v(e):y(e)}(h)):[],s=s&&!l?function(e){var t=function(e){if(!e)return 0===e?e:0;if((e=function(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||M(e)&&"[object Symbol]"==p.call(e)}(e))return NaN;if(S(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=S(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(n,"");var s=i.test(e);return s||o.test(e)?a(e.slice(2),s?2:8):r.test(e)?NaN:+e}(e))===1/0||e===-1/0){return 17976931348623157e292*(e<0?-1:1)}return e==e?e:0}(e),s=t%1;return t==t?s?t-s:t:0}(s):0;var d=e.length;return s<0&&(s=b(d+s,0)),function(e){return"string"==typeof e||!w(e)&&M(e)&&"[object String]"==p.call(e)}(e)?s<=d&&e.indexOf(t,s)>-1:!!d&&function(e,t,n){if(t!=t)return function(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}(e,u,n);for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}(e,t,s)>-1}},function(e,t){var n=Object.prototype.toString;e.exports=function(e){return!0===e||!1===e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Boolean]"==n.call(e)}},function(e,t){var n=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,o=/^0o[0-7]+$/i,s=parseInt,a=Object.prototype.toString;function u(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}e.exports=function(e){return"number"==typeof e&&e==function(e){var t=function(e){if(!e)return 0===e?e:0;if((e=function(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==a.call(e)}(e))return NaN;if(u(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=u(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(n,"");var c=i.test(e);return c||o.test(e)?s(e.slice(2),c?2:8):r.test(e)?NaN:+e}(e))===1/0||e===-1/0){return 17976931348623157e292*(e<0?-1:1)}return e==e?e:0}(e),c=t%1;return t==t?c?t-c:t:0}(e)}},function(e,t){var n=Object.prototype.toString;e.exports=function(e){return"number"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Number]"==n.call(e)}},function(e,t){var n,r,i=Function.prototype,o=Object.prototype,s=i.toString,a=o.hasOwnProperty,u=s.call(Object),c=o.toString,l=(n=Object.getPrototypeOf,r=Object,function(e){return n(r(e))});e.exports=function(e){if(!function(e){return!!e&&"object"==typeof e}(e)||"[object Object]"!=c.call(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e))return!1;var t=l(e);if(null===t)return!0;var n=a.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&s.call(n)==u}},function(e,t){var n=Object.prototype.toString,r=Array.isArray;e.exports=function(e){return"string"==typeof e||!r(e)&&function(e){return!!e&&"object"==typeof e}(e)&&"[object String]"==n.call(e)}},function(e,t){var n=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,o=/^0o[0-7]+$/i,s=parseInt,a=Object.prototype.toString;function u(e,t){var u;if("function"!=typeof t)throw new TypeError("Expected a function");return e=function(e){var t=function(e){if(!e)return 0===e?e:0;if((e=function(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==a.call(e)}(e))return NaN;if(c(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=c(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(n,"");var u=i.test(e);return u||o.test(e)?s(e.slice(2),u?2:8):r.test(e)?NaN:+e}(e))===1/0||e===-1/0){return 17976931348623157e292*(e<0?-1:1)}return e==e?e:0}(e),u=t%1;return t==t?u?t-u:t:0}(e),function(){return--e>0&&(u=t.apply(this,arguments)),e<=1&&(t=void 0),u}}function c(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}e.exports=function(e){return u(2,e)}},function(e,t,n){var r=n(23),i=n(304);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var o={insert:"head",singleton:!1};r(i,o);e.exports=i.locals||{}},function(e,t,n){"use strict";n.r(t);var r=n(14),i=n.n(r)()(!1);i.push([e.i,".conversation-list-item {\n  display: flex;\n  align-items: center;\n  padding: 5px 10px 1px 10px;\n  width: 100%;\n  border-bottom: solid 0.5px #dcdcdc;\n}\n.conversation-list-item:hover {\n  background: #eeeef1;\n  cursor: pointer;\n}\n.conversation-photo {\n  width: 54px;\n  height: 54px;\n  border-radius: 50%;\n  object-fit: cover;\n  margin-right: 10px;\n}\n.conversation-title {\n  margin-top: 5px;\n  margin-bottom: 1px;\n  margin-left: 3px;\n  width: 70%;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.timestamp {\n  font-size: 12px;\n  font-family: inherit;\n  margin-top: 7px;\n  margin-bottom: 1px;\n  color: #565656;\n}\n.conversation-message {\n  color: #000000;\n  width: 100%;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  margin: -1px 24px 7px 3px;\n}\n.conversation-snippet {\n  font-family: inherit;\n  color: #565656;\n  font-size: 12px;\n  margin: -1px 1px 1px 3px;\n  font-style: italic;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  width: 100%;\n}\n.conversation-info {\n  width: 80%;\n}\n.conversation-tittle-wrapper {\n  display: flex;\n  justify-content: space-between;\n}\n.bold {\n  font-weight: bold;\n}\n",""]),t.default=i},function(e,t,n){var r=n(23),i=n(306);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var o={insert:"head",singleton:!1};r(i,o);e.exports=i.locals||{}},function(e,t,n){"use strict";n.r(t);var r=n(14),i=n.n(r)()(!1);i.push([e.i,".profile-picture {\n  position: relative;\n  margin: 3px 8px 7px 0px;\n}\n.profile-image,\n.user-status {\n  border-radius: 50%;\n}\n.profile-image {\n  width: 48px;\n  height: 48px;\n}\n.user-status {\n  position: absolute;\n  width: 11px;\n  height: 11px;\n  right: -2px;\n  bottom: 2px;\n  border: 1px solid white;\n}\n.user-status.online {\n  background: forestgreen;\n}\n.user-status.offline {\n  background: darkgray;\n}\n",""]),t.default=i},function(e,t,n){var r=n(23),i=n(308);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var o={insert:"head",singleton:!1};r(i,o);e.exports=i.locals||{}},function(e,t,n){"use strict";n.r(t);var r=n(14),i=n.n(r)()(!1);i.push([e.i,".conversation-list-toolbar {\n  display: flex;\n  align-items: center;\n  justify-content: flex-start;\n  font-weight: 500;\n  border-bottom: 1px solid #eeeef1;\n  position: relative;\n  top: 0px;\n  border-radius: 5px 5px 0 0;\n  height: 65px;\n  box-shadow: 0 1px 4px 0 rgba(0, 0, 0, 0.3);\n  border: solid 1px #dcdcdc;\n}\n.conversation-list-toolbar .toolbar-heading {\n  margin: 0 0px 1px 0;\n  font-weight: 600;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  color: #ffffff;\n}\n.conversation-list-toolbar .conversation-list-heading-wrapper {\n  width: 85%;\n}\n.conversation-list-toolbar .toolbar-subheading {\n  margin: 0px 0 0;\n  font-style: italic;\n  color: #ffffff;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.conversation-list-toolbar .message-icon {\n  padding: 10px;\n  display: flex;\n  color: white;\n}\n@media (max-width: 767px) {\n  .conversation-list-toolbar .close-icon-div {\n    display: block;\n    cursor: pointer;\n    color: rgba(255, 255, 255, 0.8);\n    position: absolute;\n    right: 14px;\n    width: 18px;\n    height: 24px;\n  }\n  .conversation-list-toolbar .toolbar-heading,\n  .conversation-list-toolbar .toolbar-subheading {\n    color: #ffffff;\n  }\n  .conversation-list-toolbar .expand-icon,\n  .conversation-list-toolbar .collapse-icon {\n    display: none;\n  }\n}\n@media (min-width: 768px) {\n  .conversation-list-toolbar .close-icon-div {\n    display: none;\n  }\n  .conversation-list-toolbar .expand-icon,\n  .conversation-list-toolbar .collapse-icon {\n    display: block;\n    margin: 0 10px 0 0;\n    color: #ffffff;\n    cursor: pointer;\n  }\n}\n@supports (backdrop-filter: blur(20px)) {\n  .conversation-list-toolbar {\n    border: none;\n    backdrop-filter: blur(20px);\n  }\n}\n",""]),t.default=i},function(e,t,n){var r=n(23),i=n(310);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var o={insert:"head",singleton:!1};r(i,o);e.exports=i.locals||{}},function(e,t,n){"use strict";n.r(t);var r=n(14),i=n.n(r)()(!1);i.push([e.i,"@media (max-width: 767px) {\n  .message-list-icon {\n    color: #ffffff;\n  }\n}\n.message-list-icon-div {\n  height: 21px;\n  width: 28px;\n  position: relative;\n}\n@media (min-width: 768px) {\n  .message-list-icon-div::after {\n    content: attr(data-count);\n    background-color: inherit;\n    position: absolute;\n    color: #ffffff;\n    font-size: 12px;\n    padding: 0 5px;\n    border-radius: 7px;\n    display: flex;\n    align-items: center;\n    bottom: 10px;\n    right: -6px;\n  }\n  .border-class::after {\n    border: 1px solid #ffffff;\n  }\n}\n",""]),t.default=i},function(e,t,n){var r=n(23),i=n(312);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var o={insert:"head",singleton:!1};r(i,o);e.exports=i.locals||{}},function(e,t,n){"use strict";n.r(t);var r=n(14),i=n.n(r)()(!1);i.push([e.i,".conversation-list {\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  background-color: white;\n  border: 1px solid lightgray;\n  border-radius: 5px 5px 0 0;\n  box-shadow: -3px -3px 4px 0 rgba(0, 0, 0, 0.25);\n  max-height: 100vh;\n  height: 100%;\n  overflow: hidden;\n}\n.conversation-list-scrollable {\n  overflow: auto;\n  height: calc(100vh - 220px);\n}\n.conversation-list-scrollable.minimized {\n  height: 0px;\n}\n.info-message {\n  white-space: pre-line;\n  margin: 10px;\n  position: absolute;\n  font-style: italic;\n  color: #000000;\n}\n.conversation-list-header {\n  display: flex;\n  align-items: center;\n  height: 40px;\n  font-size: 18px;\n  padding: 14px;\n}\n.loader {\n  color: #000000;\n  text-align: center;\n  font-weight: 500;\n}\n.overlay-container {\n  position: relative;\n}\n.floating-mobile-icon {\n  position: fixed;\n  bottom: 11px;\n  right: 12px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 56px;\n  height: 56px;\n  border-radius: 50%;\n  box-shadow: 3px 3px 4px 0 rgba(0, 0, 0, 0.5);\n}\n@media (max-width: 767px) {\n  .conversation-list-scrollable {\n    overflow: auto;\n    height: calc(100vh - 40px);\n  }\n  .conversation-list-scrollable.minimized {\n    height: 0px;\n  }\n  .conversation-list {\n    width: 100vw;\n    height: 100vh;\n  }\n  .floating-mobile-icon::after {\n    content: attr(data-count);\n    background-color: inherit;\n    position: absolute;\n    color: #ffffff;\n    font-size: 12px;\n    padding: 0 5px;\n    border-radius: 7px;\n    display: flex;\n    align-items: center;\n    bottom: 40px;\n    right: 0px;\n  }\n  .border-class::after {\n    border: 1px solid #ffffff;\n  }\n}\n",""]),t.default=i},function(e,t,n){var r=n(23),i=n(314);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var o={insert:"head",singleton:!1};r(i,o);e.exports=i.locals||{}},function(e,t,n){"use strict";n.r(t);var r=n(14),i=n.n(r)()(!1);i.push([e.i,".error-overlay {\n  position: absolute;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  background-color: #000000;\n  opacity: 0.8;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n@media (max-width: 767px) {\n  .error-overlay {\n    height: 100vh;\n  }\n}\n.error-overlay .text {\n  font-family: OpenSans;\n  color: #ffffff;\n  width: 270px;\n}\n.error-overlay .bold {\n  font-size: 18px;\n  font-weight: bold;\n  display: block;\n}\n.error-overlay .normal {\n  margin-top: 20px;\n  font-size: 12px;\n}\n",""]),t.default=i},function(e,t,n){var r=n(23),i=n(316);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var o={insert:"head",singleton:!1};r(i,o);e.exports=i.locals||{}},function(e,t,n){"use strict";n.r(t);var r=n(14),i=n.n(r)()(!1);i.push([e.i,".chat-history {\n  width: 320px;\n  margin: 0 10px;\n  height: fit-content;\n}\n@media (max-width: 767px) {\n  .chat-history {\n    position: fixed;\n    top: 0;\n    left: 0;\n    margin: 0;\n  }\n}\n",""]),t.default=i},function(e,t,n){var r=n(23),i=n(318);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var o={insert:"head",singleton:!1};r(i,o);e.exports=i.locals||{}},function(e,t,n){"use strict";n.r(t);var r=n(14),i=n.n(r)()(!1);i.push([e.i,".message-list-container .message {\n  display: flex;\n  flex-direction: column;\n  white-space: pre-wrap;\n}\n.message-list-container .message .timestamp {\n  display: flex;\n  justify-content: center;\n  color: #999;\n  font-weight: 600;\n  font-size: 12px;\n  margin: 10px 0px;\n  text-transform: uppercase;\n}\n.message-list-container .message .bubble-container {\n  font-size: inherit;\n  display: flex;\n}\n.message-list-container .bubble-container {\n  flex-direction: column;\n  /*align-items: flex-end;*/\n}\n.message-list-container .message.mine .bubble-container {\n  justify-content: flex-end;\n  align-items: flex-end;\n}\n.message-list-container .message-timestamp {\n  font-size: 12px;\n  color: #888888;\n}\n.message-list-container .bubble {\n  color: white;\n}\n.message-list-container .message.start .bubble-container .bubble {\n  /* margin-top: 10px; */\n  border-top-left-radius: 4px;\n}\n.message-list-container .message.end .bubble-container .bubble {\n  border-bottom-left-radius: 4px;\n  /* margin-bottom: 10px; */\n}\n.message-list-container .message.mine.start .bubble-container .bubble {\n  margin-top: 10px;\n  border-top-right-radius: 4px;\n}\n.message-list-container .message.mine.end .bubble-container .bubble {\n  border-bottom-right-radius: 4px;\n  /*margin-bottom: 10px;*/\n}\n.message-list-container .message .bubble-container .bubble {\n  position: relative;\n  margin: 1px 0px;\n  padding: 10px 15px;\n  border-radius: 4px;\n  max-width: 75%;\n  border-top-left-radius: 2px;\n  border-bottom-left-radius: 2px;\n  border-top-right-radius: 4px;\n  border-bottom-right-radius: 4px;\n  word-wrap: break-word;\n  width: fit-content;\n  width: -moz-fit-content;\n}\n.message-list-container .message .bubble-container .bubble.theme__ac-color--background-color:after {\n  content: ' ';\n  position: absolute;\n  width: 0;\n  height: 0;\n  left: -5px;\n  top: 0px;\n  bottom: auto;\n  border: 5px solid;\n  border-color: inherit;\n  border-right-color: transparent;\n  border-bottom-color: transparent;\n  border-left-color: transparent;\n}\n.message-list-container .message.mine .bubble-container .bubble {\n  position: relative;\n  background: #828282;\n  border-top-left-radius: 4px;\n  border-bottom-left-radius: 4px;\n  border-top-right-radius: 2px;\n  border-bottom-right-radius: 2px;\n}\n.message-list-container .message.mine .bubble-container .bubble:after {\n  content: ' ';\n  position: absolute;\n  width: 0;\n  height: 0;\n  right: -5px;\n  top: 0px;\n  bottom: auto;\n  border: 5px solid;\n  border-color: #828282 transparent transparent transparent;\n}\n",""]),t.default=i},function(e,t,n){var r=n(23),i=n(320);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var o={insert:"head",singleton:!1};r(i,o);e.exports=i.locals||{}},function(e,t,n){"use strict";n.r(t);var r=n(14),i=n.n(r)()(!1);i.push([e.i,".message-list-box {\n  height: 100%;\n  height: 300px;\n  overflow: hidden;\n  display: flex;\n  flex-direction: column-reverse;\n  background: #fafafa;\n}\n.message-list-box.minimize {\n  display: none;\n}\n.message-list-container {\n  overflow: hidden;\n  display: flex;\n  flex-direction: column-reverse;\n  overflow-y: scroll;\n  /*IE11*/\n}\n@media screen and (-ms-high-contrast: active), screen and (-ms-high-contrast: none) {\n  .message-list-container {\n    overflow-y: auto;\n  }\n  .message-list-container .infinite-scroll-component__outerdiv {\n    overflow-y: scroll;\n  }\n}\n.infinite-scroll {\n  height: 300px;\n  display: flex;\n  flex-direction: column-reverse;\n  overflow-x: hidden !important;\n  padding: 0 15px;\n}\n.message-list-actions {\n  text-align: center;\n  color: black;\n  font-weight: bold;\n}\n.match-scroll-component-loading {\n  margin-bottom: 10px;\n}\n@media (max-width: 767px) {\n  .message-list-container {\n    height: 100%;\n  }\n  .message-list-box {\n    height: 100%;\n  }\n}\n",""]),t.default=i},function(e,t,n){var r=n(23),i=n(322);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var o={insert:"head",singleton:!1};r(i,o);e.exports=i.locals||{}},function(e,t,n){"use strict";n.r(t);var r=n(14),i=n.n(r)()(!1);i.push([e.i,".chat-window {\n  align-self: flex-end;\n}\n@media (max-width: 767px) {\n  .chat-window {\n    position: fixed;\n    top: 0;\n    left: 0;\n    height: 100%;\n    width: 0;\n  }\n}\n.message-list {\n  display: flex;\n  flex-direction: column;\n  width: 320px;\n  border: 1px solid lightgray;\n  border-radius: 5px 5px 0 0;\n  box-shadow: -3px -3px 4px 0 rgba(0, 0, 0, 0.25);\n}\n.overlay-container {\n  height: calc(100% - 125px);\n}\n@media (max-width: 767px) {\n  .message-list {\n    top: 0;\n    left: 0;\n    position: fixed;\n    height: 100%;\n    width: 100%;\n  }\n}\n.loader {\n  padding: 10px;\n  padding-bottom: 70px;\n  height: 255px;\n  overflow: hidden;\n  overflow-y: scroll;\n  background: #fafafa;\n  flex-direction: column;\n}\n@media (max-width: 767px) {\n  .loader {\n    height: 100%;\n  }\n}\n",""]),t.default=i},function(e,t,n){var r=n(23),i=n(324);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var o={insert:"head",singleton:!1};r(i,o);e.exports=i.locals||{}},function(e,t,n){"use strict";n.r(t);var r=n(14),i=n.n(r)()(!1);i.push([e.i,".toolbar {\n  display: flex;\n  align-items: center;\n  justify-content: flex-start;\n  border-bottom: 1px solid #eeeef1;\n  position: relative;\n  top: 0px;\n  height: 65px;\n  border-radius: 5px 5px 0 0;\n  box-shadow: 0 1px 4px 0 rgba(0, 0, 0, 0.3);\n  border: solid 1px #dcdcdc;\n}\n@supports (backdrop-filter: blur(20px)) {\n  .toolbar {\n    border: none;\n    backdrop-filter: blur(20px);\n  }\n}\n.toolbar-heading-wrapper {\n  width: 60%;\n}\n.toolbar-heading-wrapper .toolbar-subheading {\n  margin: 1px 0 0 -5px;\n  font-style: italic;\n  font-size: 12px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.toolbar-heading-wrapper .toolbar-heading {\n  margin: -2.5px 0 -1.5px -5px;\n  white-space: nowrap;\n  font-weight: 500;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.toolbar-heading-wrapper .toolbar-heading a {\n  color: inherit;\n  text-decoration: none;\n}\n.toolbar-heading-wrapper .toolbar-heading a:hover {\n  color: inherit;\n  text-decoration: underline;\n  cursor: pointer;\n}\n@media (min-width: 768px) {\n  .toolbar-heading-wrapper .toolbar-heading {\n    color: #ffffff;\n  }\n}\n.left-items,\n.right-items {\n  padding: 10px;\n  display: flex;\n}\n.toolbar-close-icon {\n  position: absolute;\n  color: #ffffff;\n  cursor: pointer;\n  right: 10px;\n  width: 14px;\n  height: 18px;\n}\n.minimize-icon {\n  color: #ffffff;\n  margin: auto;\n  text-align: center;\n  width: 14px;\n  position: absolute;\n  cursor: pointer;\n  bottom: 5px;\n  right: 32px;\n  top: 0px;\n  height: 1px;\n}\n.minimize-icon.minimize {\n  height: 20px;\n}\n.minimize-icon:focus {\n  outline: none;\n}\n.right-items {\n  flex-direction: row-reverse;\n}\n.right-items .toolbar-button {\n  margin-left: 20px;\n}\n.right-items .toolbar-button:last-child {\n  margin: 0;\n}\n.left-items .toolbar-button {\n  margin-right: 20px;\n}\n.left-items .toolbar-button:last-child {\n  margin: 0;\n}\n.back-icon {\n  display: none;\n}\n@media (max-width: 767px) {\n  .minimize-icon,\n  .toolbar-close-icon {\n    display: none;\n  }\n  .back-icon {\n    display: block;\n    width: 12px;\n    height: 18px;\n    margin: 15px 8px 5px 0;\n    font-size: 25px;\n    text-align: center;\n    color: #ffffff;\n  }\n  .toolbar-heading,\n  .toolbar-subheading {\n    color: #000000;\n  }\n}\n",""]),t.default=i},function(e,t,n){var r=n(23),i=n(326);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var o={insert:"head",singleton:!1};r(i,o);e.exports=i.locals||{}},function(e,t,n){"use strict";n.r(t);var r=n(14),i=n.n(r)()(!1);i.push([e.i,".compose {\n  padding: 10px;\n  align-items: center;\n  background: white;\n  border-top: 1px solid #eeeef1;\n  bottom: 0px;\n  height: 60px;\n  display: flex;\n}\n.compose.minimize {\n  display: none;\n}\n@supports (backdrop-filter: blur(20px)) {\n  .compose {\n    background-color: white;\n    backdrop-filter: blur(20px);\n  }\n}\n.compose-input {\n  flex: 1;\n  border: none;\n  color: #000000;\n  font-size: 16px;\n  height: 40px;\n  width: 225px;\n  background: none;\n}\n.compose-input:focus {\n  outline: none;\n}\n.compose-input::placeholder {\n  opacity: 0.3;\n}\n.compose .toolbar-button {\n  color: #bbbbbf;\n  margin-left: 15px;\n}\n.compose .toolbar-button:hover {\n  color: #99999c;\n}\n.compose-divider {\n  height: 45px;\n  margin: 7px 0px 7px 0px;\n  border-left: 1px solid #e9e9e9;\n}\n.sent-btn {\n  margin-left: 5px;\n}\n.empty-message {\n  color: #d9d9d9;\n}\ntextarea {\n  resize: none;\n}\ntextarea::placeholder {\n  font-family: OpenSans;\n  font-size: 15px;\n  color: #888888;\n  font-weight: bold;\n}\n",""]),t.default=i},function(e,t,n){var r=n(23),i=n(328);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var o={insert:"head",singleton:!1};r(i,o);e.exports=i.locals||{}},function(e,t,n){"use strict";n.r(t);var r=n(14),i=n.n(r)()(!1);i.push([e.i,".chatUi {\n  display: flex;\n  flex-direction: row-reverse;\n  position: fixed;\n  right: 1px;\n  bottom: 0;\n  align-items: flex-end;\n  height: 0;\n  z-index: 1;\n}\n* {\n  box-sizing: border-box;\n}\n@media (max-width: 767px) {\n  .chatUi {\n    display: flex;\n    flex-direction: row-reverse;\n    position: fixed;\n    right: 1px;\n    bottom: 0;\n    z-index: 1;\n  }\n}\n",""]),t.default=i},function(e,t,n){"use strict";n.r(t);var r=n(2),i=n.n(r),o=n(65),s=n.n(o),a=n(9),u=n(94),c=n(161);let l=function(e){e()};const h=Object(r.createContext)(null);function d(){return Object(r.useContext)(h)}const f=()=>{throw new Error("uSES not initialized!")};let p=f;const m=(e,t)=>e===t;function g(e=h){const t=e===h?d:()=>Object(r.useContext)(e);return function(e,n=m){const{store:i,subscription:o,getServerState:s}=t(),a=p(o.addNestedSub,i.getState,s||i.getState,e,n);return Object(r.useDebugValue)(a),a}}const b=g();function v(){return(v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function y(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var _=n(95),w=n.n(_),E=n(162);const S=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function M(e,t,n,r,{areStatesEqual:i,areOwnPropsEqual:o,areStatePropsEqual:s}){let a,u,c,l,h,d=!1;function f(d,f){const p=!o(f,u),m=!i(d,a,f,u);return a=d,u=f,p&&m?(c=e(a,u),t.dependsOnOwnProps&&(l=t(r,u)),h=n(c,l,u),h):p?(e.dependsOnOwnProps&&(c=e(a,u)),t.dependsOnOwnProps&&(l=t(r,u)),h=n(c,l,u),h):m?function(){const t=e(a,u),r=!s(t,c);return c=t,r&&(h=n(c,l,u)),h}():h}return function(i,o){return d?f(i,o):(a=i,u=o,c=e(a,u),l=t(r,u),h=n(c,l,u),d=!0,h)}}function O(e){return function(t){const n=e(t);function r(){return n}return r.dependsOnOwnProps=!1,r}}function A(e){return e.dependsOnOwnProps?Boolean(e.dependsOnOwnProps):1!==e.length}function C(e,t){return function(t,{displayName:n}){const r=function(e,t){return r.dependsOnOwnProps?r.mapToProps(e,t):r.mapToProps(e,void 0)};return r.dependsOnOwnProps=!0,r.mapToProps=function(t,n){r.mapToProps=e,r.dependsOnOwnProps=A(e);let i=r(t,n);return"function"==typeof i&&(r.mapToProps=i,r.dependsOnOwnProps=A(i),i=r(t,n)),i},r}}function T(e,t){return(n,r)=>{throw new Error(`Invalid value of type ${typeof e} for ${t} argument when connecting component ${r.wrappedComponentName}.`)}}function k(e,t,n){return v({},n,e,t)}function x(){const e=l;let t=null,n=null;return{clear(){t=null,n=null},notify(){e(()=>{let e=t;for(;e;)e.callback(),e=e.next})},get(){let e=[],n=t;for(;n;)e.push(n),n=n.next;return e},subscribe(e){let r=!0,i=n={callback:e,next:null,prev:n};return i.prev?i.prev.next=i:t=i,function(){r&&null!==t&&(r=!1,i.next?i.next.prev=i.prev:n=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}const j={notify(){},get:()=>[]};function I(e,t){let n,r=j;function i(){s.onStateChange&&s.onStateChange()}function o(){n||(n=t?t.addNestedSub(i):e.subscribe(i),r=x())}const s={addNestedSub:function(e){return o(),r.subscribe(e)},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:i,isSubscribed:function(){return Boolean(n)},trySubscribe:o,tryUnsubscribe:function(){n&&(n(),n=void 0,r.clear(),r=j)},getListeners:()=>r};return s}const R=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement)?r.useLayoutEffect:r.useEffect;function N(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}function P(e,t){if(N(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(let r=0;r<n.length;r++)if(!Object.prototype.hasOwnProperty.call(t,n[r])||!N(e[n[r]],t[n[r]]))return!1;return!0}const D=["reactReduxForwardedRef"];let U=f;const L=[null,null];function F(e,t,n,r,i,o){e.current=r,n.current=!1,i.current&&(i.current=null,o())}function B(e,t){return e===t}var H=function(e,t,n,{pure:o,areStatesEqual:s=B,areOwnPropsEqual:a=P,areStatePropsEqual:u=P,areMergedPropsEqual:c=P,forwardRef:l=!1,context:d=h}={}){const f=d,p=function(e){return e?"function"==typeof e?C(e):T(e,"mapStateToProps"):O(()=>({}))}(e),m=function(e){return e&&"object"==typeof e?O(t=>function(e,t){const n={};for(const r in e){const i=e[r];"function"==typeof i&&(n[r]=(...e)=>t(i(...e)))}return n}(e,t)):e?"function"==typeof e?C(e):T(e,"mapDispatchToProps"):O(e=>({dispatch:e}))}(t),g=function(e){return e?"function"==typeof e?function(e){return function(t,{displayName:n,areMergedPropsEqual:r}){let i,o=!1;return function(t,n,s){const a=e(t,n,s);return o?r(a,i)||(i=a):(o=!0,i=a),i}}}(e):T(e,"mergeProps"):()=>k}(n),b=Boolean(e);return e=>{const t=e.displayName||e.name||"Component",n=`Connect(${t})`,o={shouldHandleStateChanges:b,displayName:n,wrappedComponentName:t,WrappedComponent:e,initMapStateToProps:p,initMapDispatchToProps:m,initMergeProps:g,areStatesEqual:s,areStatePropsEqual:u,areOwnPropsEqual:a,areMergedPropsEqual:c};function h(t){const[n,s,a]=Object(r.useMemo)(()=>{const{reactReduxForwardedRef:e}=t,n=y(t,D);return[t.context,e,n]},[t]),u=Object(r.useMemo)(()=>n&&n.Consumer&&Object(E.isContextConsumer)(i.a.createElement(n.Consumer,null))?n:f,[n,f]),c=Object(r.useContext)(u),l=Boolean(t.store)&&Boolean(t.store.getState)&&Boolean(t.store.dispatch),h=Boolean(c)&&Boolean(c.store);const d=l?t.store:c.store,p=h?c.getServerState:d.getState,m=Object(r.useMemo)(()=>function(e,t){let{initMapStateToProps:n,initMapDispatchToProps:r,initMergeProps:i}=t,o=y(t,S);return M(n(e,o),r(e,o),i(e,o),e,o)}(d.dispatch,o),[d]),[g,_]=Object(r.useMemo)(()=>{if(!b)return L;const e=I(d,l?void 0:c.subscription),t=e.notifyNestedSubs.bind(e);return[e,t]},[d,l,c]),w=Object(r.useMemo)(()=>l?c:v({},c,{subscription:g}),[l,c,g]),O=Object(r.useRef)(),A=Object(r.useRef)(a),C=Object(r.useRef)(),T=Object(r.useRef)(!1),k=(Object(r.useRef)(!1),Object(r.useRef)(!1)),x=Object(r.useRef)();R(()=>(k.current=!0,()=>{k.current=!1}),[]);const j=Object(r.useMemo)(()=>()=>C.current&&a===A.current?C.current:m(d.getState(),a),[d,a]),N=Object(r.useMemo)(()=>e=>g?function(e,t,n,r,i,o,s,a,u,c,l){if(!e)return()=>{};let h=!1,d=null;const f=()=>{if(h||!a.current)return;const e=t.getState();let n,f;try{n=r(e,i.current)}catch(e){f=e,d=e}f||(d=null),n===o.current?s.current||c():(o.current=n,u.current=n,s.current=!0,l())};return n.onStateChange=f,n.trySubscribe(),f(),()=>{if(h=!0,n.tryUnsubscribe(),n.onStateChange=null,d)throw d}}(b,d,g,m,A,O,T,k,C,_,e):()=>{},[g]);var P,B,H;let q;P=F,B=[A,O,T,a,C,_],R(()=>P(...B),H);try{q=U(N,j,p?()=>m(p(),a):j)}catch(e){throw x.current&&(e.message+=`\nThe error may be correlated with this previous error:\n${x.current.stack}\n\n`),e}R(()=>{x.current=void 0,C.current=void 0,O.current=q});const V=Object(r.useMemo)(()=>i.a.createElement(e,v({},q,{ref:s})),[s,e,q]);return Object(r.useMemo)(()=>b?i.a.createElement(u.Provider,{value:w},V):V,[u,V,w])}const d=i.a.memo(h);if(d.WrappedComponent=e,d.displayName=h.displayName=n,l){const t=i.a.forwardRef((function(e,t){return i.a.createElement(d,v({},e,{reactReduxForwardedRef:t}))}));return t.displayName=n,t.WrappedComponent=e,w()(t,e)}return w()(d,e)}};var q=function({store:e,context:t,children:n,serverState:o}){const s=Object(r.useMemo)(()=>{const t=I(e);return{store:e,subscription:t,getServerState:o?()=>o:void 0}},[e,o]),a=Object(r.useMemo)(()=>e.getState(),[e]);R(()=>{const{subscription:t}=s;return t.onStateChange=t.notifyNestedSubs,t.trySubscribe(),a!==e.getState()&&t.notifyNestedSubs(),()=>{t.tryUnsubscribe(),t.onStateChange=void 0}},[s,a]);const u=t||h;return i.a.createElement(u.Provider,{value:s},n)};function V(e=h){const t=e===h?d:()=>Object(r.useContext)(e);return function(){const{store:e}=t();return e}}const G=V();function z(e=h){const t=e===h?G:V(e);return function(){return t().dispatch}}const W=z();var K,Y;K=c.useSyncExternalStoreWithSelector,p=K,(e=>{U=e})(u.useSyncExternalStore),Y=o.unstable_batchedUpdates,l=Y;var Q=n(22),J=n(11),Z=n(15),$=n(21),X=(n(303),n(3)),ee="chat_chatWindowClose",te="chat_chatWindowMinimize",ne="chat_chatWindowBack",re="chat_chatHistoryResumeChat",ie="chat_chatWindowClickParticipantName",oe="chat_chatHistoryExpand",se="chat_chatHistoryCollapse",ae="chat_chatHistoryClose",ue="chat_chatHyperLinkClick",ce=n(18),le=(n(305),function(e){var t=e.src,n=e.isOnline,r=e.conversationPhotoClass;return i.a.createElement("div",{className:"profile-picture"},i.a.createElement("img",{className:"profile-image "+r,src:t,alt:""}),i.a.createElement("div",{className:["user-status","".concat(n?"online":"offline")].join(" ")}))});function he(e){var t=a.a.get().interfaceLocale,n=e.userDetails,r=n.name,o=n.organisation,s=n.designation,u=n.userId,c=n.participationId,l=n.isOnline,h=n.profileUrl,d=e.messageDetails,f=d.lastMessage,p=d.lastMessageSentBy,m=d.timeStamp,g=d.hasUnreadMessages,b=g?"conversation-photo bold":"conversation-photo",v=g?"conversation-message bold":"conversation-message",y=g?"conversation-title text-primary bold":"conversation-title text-primary",_=ce.a.ui.constructLocalizedInfoMessage(t,["at"]),w="".concat(_[0].message);return i.a.createElement("div",{className:"conversation-list-item",onClick:function(){window&&window.chatterUiDispatcher&&(window.chatterUiDispatcher.dispatch({type:X.a.OPEN_CHAT_WINDOW,payload:u}),window.chatterUiDispatcher.dispatch({type:X.a.CHAT_WINDOW_VIEW,payload:!0}))},tabIndex:0,"data-dtm":re,"data-dtm-attributes":JSON.stringify({targetParticipationId:c})},i.a.createElement(le,{src:h,isOnline:l,className:b}),i.a.createElement("div",{className:"conversation-info"},i.a.createElement("div",{className:"conversation-tittle-wrapper"},i.a.createElement("div",{className:y},r),i.a.createElement("div",{className:"timestamp"},m)),i.a.createElement("p",{className:"conversation-snippet"},s?"".concat(s," ").concat(w," ").concat(o):o),i.a.createElement("p",{className:v},p," : ",f)))}n(307);var de=function(e){return i.a.createElement("svg",{"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"angle-up",width:"12px",height:"18px",className:"expand-icon svg-inline--fa fa-angle-up fa-w-10",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512","data-dtm":oe,onClick:e.collapseExpandToggle,tabIndex:0},i.a.createElement("path",{fill:"currentColor",d:"M177 159.7l136 136c9.4 9.4 9.4 24.6 0 33.9l-22.6 22.6c-9.4 9.4-24.6 9.4-33.9 0L160 255.9l-96.4 96.4c-9.4 9.4-24.6 9.4-33.9\n0L7 329.7c-9.4-9.4-9.4-24.6 0-33.9l136-136c9.4-9.5 24.6-9.5 34-.1z"}))},fe=function(e){return i.a.createElement("svg",{"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"angle-down",width:"12px",height:"18px",className:"collapse-icon svg-inline--fa fa-angle-down fa-w-10",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512","data-dtm":se,onClick:e.collapseExpandToggle,tabIndex:0},i.a.createElement("path",{fill:"currentColor",d:"M143 352.3L7 216.3c-9.4-9.4-9.4-24.6 0-33.9l22.6-22.6c9.4-9.4 24.6-9.4 33.9 0l96.4 96.4 96.4-96.4c9.4-9.4 24.6-9.4 33.9 0l22.6 22.6c9.4 9.4 9.4 24.6 0 33.9l-136 136c-9.2 9.4-24.4 9.4-33.8 0z"}))},pe=(n(309),function(e){return i.a.createElement("div",{className:"theme__ac-color--background-color message-list-icon-div "+(e.count?"border-class":""),"data-count":0!==e.count?e.count:""},i.a.createElement("svg",{"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"comments-alt",height:"21px",width:"28px",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512",className:"message-list-icon svg-inline--fa fa-comments-alt fa-w-18 fa-2x"},i.a.createElement("path",{fill:"currentColor",d:"M416 192c0-88.4-93.1-160-208-160S0 103.6 0 192c0 34.3 14.1 65.9 38 92-13.4 30.2-35.5 54.2-35.8 54.5-2.2 2.3-2.8 5.7-1.5 8.7S4.8 352 8 352c36.6 0 66.9-12.3 88.7-25 32.2 15.7 70.3 25 111.3 25 114.9 0 208-71.6 208-160zm122 220c23.9-26 38-57.7 38-92 0-66.9-53.5-124.2-129.3-148.1.9 6.6 1.3 13.3 1.3 20.1 0 105.9-107.7 192-240 192-10.8 0-21.3-.8-31.7-1.9C207.8 439.6 281.8 480 368 480c41 0 79.1-9.2 111.3-25 21.8 12.7 52.1 25 88.7 25 3.2 0 6.1-1.9 7.3-4.8 1.3-2.9.7-6.3-1.5-8.7-.3-.3-22.4-24.2-35.8-54.5z"})))}),me=function(e){return i.a.createElement("svg",{"aria-hidden":"true",focusable:"false","data-prefix":"fal","data-icon":"times",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512",className:e.className,tabIndex:0,"data-dtm":e.dtmTagValue,"data-dtm-attributes":JSON.stringify(e.dtmTagAttributes),onClick:e.closeChat},i.a.createElement("path",{fill:"currentColor",d:"M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z",className:""}))};function ge(e){var t=a.a.get().interfaceLocale,n=(e.connectionsCount,e.isMaximized),r=e.closeChatWindow,o=n?se:oe,s=ce.a.ui.constructLocalizedInfoMessage(t,["chat","connections"]),u="".concat(s[0].message),c=("".concat(s[1].message),b((function(e){return e.unreadChannelCount})));return i.a.createElement("div",{className:"conversation-list-toolbar theme__ac-color--background-color","data-dtm":o},i.a.createElement("div",{className:"message-icon"},i.a.createElement(pe,{count:c,className:"svg-inline--fa fa-comments-alt fa-w-18 fa-2x"})),i.a.createElement("div",{className:"conversation-list-heading-wrapper"},i.a.createElement("h4",{className:"toolbar-heading"},u)),i.a.createElement("div",null,n?i.a.createElement(fe,{collapseExpandToggle:e.maximizeToggle,className:"collapse-icon"}):i.a.createElement(de,{collapseExpandToggle:e.maximizeToggle,className:"expand-icon"})),i.a.createElement("div",{className:"close-icon-div"},i.a.createElement(me,{closeChat:r,dtmTagValue:ae})))}n(311);var be=n(10),ve=(n(313),n(12)),ye=function(e){var t,n=e.errorType,r=a.a.get().interfaceLocale,o=function(e){return ce.a.error.constructLocalizedErrorMessage(r,e)},s=function(e){var t=e.title,n=e.message;return i.a.createElement("div",{className:"text"},i.a.createElement("span",{className:"bold"},t),i.a.createElement("span",{className:"normal"},n))},u=function(e){switch(e.errorType){case ve.a.SESSION_ERROR:return t=o(["login_error","login_error_message"]),i.a.createElement(s,{title:t[0].message,message:t[1].message});case ve.a.USER_NOT_ACTIVATE_ERROR:return t=o(["user_not_activated_error"]),i.a.createElement(s,{title:t[0].message});case ve.a.INACTIVE_SESSION_EXPIRED_ERROR:return t=o(["inactive_session_expired_error","inactive_session_expired_error_message"]),i.a.createElement(s,{title:t[0].message,message:t[1].message});case ve.a.GENERIC_ERROR:default:return t=o(["chat_generic_error","chat_generic_error_retry_message"]),i.a.createElement(s,{title:t[0].message,message:t[1].message})}};return i.a.createElement("div",{className:"error-overlay"},i.a.createElement(u,{errorType:n}))},_e=function(e,t){return(_e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};var we=function(){return(we=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};var Ee="Pixel",Se="Percent",Me={unit:Se,value:.8};function Oe(e){return"number"==typeof e?{unit:Se,value:100*e}:"string"==typeof e?e.match(/^(\d*(\.\d+)?)px$/)?{unit:Ee,value:parseFloat(e)}:e.match(/^(\d*(\.\d+)?)%$/)?{unit:Se,value:parseFloat(e)}:(console.warn('scrollThreshold format is invalid. Valid formats: "120px", "50%"...'),Me):(console.warn("scrollThreshold should be string or number"),Me)}var Ae=function(e){function t(t){var n=e.call(this,t)||this;return n.lastScrollTop=0,n.actionTriggered=!1,n.startY=0,n.currentY=0,n.dragging=!1,n.maxPullDownDistance=0,n.getScrollableTarget=function(){return n.props.scrollableTarget instanceof HTMLElement?n.props.scrollableTarget:"string"==typeof n.props.scrollableTarget?document.getElementById(n.props.scrollableTarget):(null===n.props.scrollableTarget&&console.warn("You are trying to pass scrollableTarget but it is null. This might\n        happen because the element may not have been added to DOM yet.\n        See https://github.com/ankeetmaini/react-infinite-scroll-component/issues/59 for more info.\n      "),null)},n.onStart=function(e){n.lastScrollTop||(n.dragging=!0,e instanceof MouseEvent?n.startY=e.pageY:e instanceof TouchEvent&&(n.startY=e.touches[0].pageY),n.currentY=n.startY,n._infScroll&&(n._infScroll.style.willChange="transform",n._infScroll.style.transition="transform 0.2s cubic-bezier(0,0,0.31,1)"))},n.onMove=function(e){n.dragging&&(e instanceof MouseEvent?n.currentY=e.pageY:e instanceof TouchEvent&&(n.currentY=e.touches[0].pageY),n.currentY<n.startY||(n.currentY-n.startY>=Number(n.props.pullDownToRefreshThreshold)&&n.setState({pullToRefreshThresholdBreached:!0}),n.currentY-n.startY>1.5*n.maxPullDownDistance||n._infScroll&&(n._infScroll.style.overflow="visible",n._infScroll.style.transform="translate3d(0px, "+(n.currentY-n.startY)+"px, 0px)")))},n.onEnd=function(){n.startY=0,n.currentY=0,n.dragging=!1,n.state.pullToRefreshThresholdBreached&&(n.props.refreshFunction&&n.props.refreshFunction(),n.setState({pullToRefreshThresholdBreached:!1})),requestAnimationFrame((function(){n._infScroll&&(n._infScroll.style.overflow="auto",n._infScroll.style.transform="none",n._infScroll.style.willChange="unset")}))},n.onScrollListener=function(e){"function"==typeof n.props.onScroll&&setTimeout((function(){return n.props.onScroll&&n.props.onScroll(e)}),0);var t=n.props.height||n._scrollableNode?e.target:document.documentElement.scrollTop?document.documentElement:document.body;n.actionTriggered||((n.props.inverse?n.isElementAtTop(t,n.props.scrollThreshold):n.isElementAtBottom(t,n.props.scrollThreshold))&&n.props.hasMore&&(n.actionTriggered=!0,n.setState({showLoader:!0}),n.props.next&&n.props.next()),n.lastScrollTop=t.scrollTop)},n.state={showLoader:!1,pullToRefreshThresholdBreached:!1,prevDataLength:t.dataLength},n.throttledOnScrollListener=function(e,t,n,r){var i,o=!1,s=0;function a(){i&&clearTimeout(i)}function u(){var u=this,c=Date.now()-s,l=arguments;function h(){s=Date.now(),n.apply(u,l)}function d(){i=void 0}o||(r&&!i&&h(),a(),void 0===r&&c>e?h():!0!==t&&(i=setTimeout(r?d:h,void 0===r?e-c:e)))}return"boolean"!=typeof t&&(r=n,n=t,t=void 0),u.cancel=function(){a(),o=!0},u}(150,n.onScrollListener).bind(n),n.onStart=n.onStart.bind(n),n.onMove=n.onMove.bind(n),n.onEnd=n.onEnd.bind(n),n}return function(e,t){function n(){this.constructor=e}_e(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype.componentDidMount=function(){if(void 0===this.props.dataLength)throw new Error('mandatory prop "dataLength" is missing. The prop is needed when loading more content. Check README.md for usage');if(this._scrollableNode=this.getScrollableTarget(),this.el=this.props.height?this._infScroll:this._scrollableNode||window,this.el&&this.el.addEventListener("scroll",this.throttledOnScrollListener),"number"==typeof this.props.initialScrollY&&this.el&&this.el instanceof HTMLElement&&this.el.scrollHeight>this.props.initialScrollY&&this.el.scrollTo(0,this.props.initialScrollY),this.props.pullDownToRefresh&&this.el&&(this.el.addEventListener("touchstart",this.onStart),this.el.addEventListener("touchmove",this.onMove),this.el.addEventListener("touchend",this.onEnd),this.el.addEventListener("mousedown",this.onStart),this.el.addEventListener("mousemove",this.onMove),this.el.addEventListener("mouseup",this.onEnd),this.maxPullDownDistance=this._pullDown&&this._pullDown.firstChild&&this._pullDown.firstChild.getBoundingClientRect().height||0,this.forceUpdate(),"function"!=typeof this.props.refreshFunction))throw new Error('Mandatory prop "refreshFunction" missing.\n          Pull Down To Refresh functionality will not work\n          as expected. Check README.md for usage\'')},t.prototype.componentWillUnmount=function(){this.el&&(this.el.removeEventListener("scroll",this.throttledOnScrollListener),this.props.pullDownToRefresh&&(this.el.removeEventListener("touchstart",this.onStart),this.el.removeEventListener("touchmove",this.onMove),this.el.removeEventListener("touchend",this.onEnd),this.el.removeEventListener("mousedown",this.onStart),this.el.removeEventListener("mousemove",this.onMove),this.el.removeEventListener("mouseup",this.onEnd)))},t.prototype.componentDidUpdate=function(e){this.props.dataLength!==e.dataLength&&(this.actionTriggered=!1,this.setState({showLoader:!1}))},t.getDerivedStateFromProps=function(e,t){return e.dataLength!==t.prevDataLength?we(we({},t),{prevDataLength:e.dataLength}):null},t.prototype.isElementAtTop=function(e,t){void 0===t&&(t=.8);var n=e===document.body||e===document.documentElement?window.screen.availHeight:e.clientHeight,r=Oe(t);return r.unit===Ee?e.scrollTop<=r.value+n-e.scrollHeight+1:e.scrollTop<=r.value/100+n-e.scrollHeight+1},t.prototype.isElementAtBottom=function(e,t){void 0===t&&(t=.8);var n=e===document.body||e===document.documentElement?window.screen.availHeight:e.clientHeight,r=Oe(t);return r.unit===Ee?e.scrollTop+n>=e.scrollHeight-r.value:e.scrollTop+n>=r.value/100*e.scrollHeight},t.prototype.render=function(){var e=this,t=we({height:this.props.height||"auto",overflow:"auto",WebkitOverflowScrolling:"touch"},this.props.style),n=this.props.hasChildren||!!(this.props.children&&this.props.children instanceof Array&&this.props.children.length),r=this.props.pullDownToRefresh&&this.props.height?{overflow:"auto"}:{};return i.a.createElement("div",{style:r,className:"infinite-scroll-component__outerdiv"},i.a.createElement("div",{className:"infinite-scroll-component "+(this.props.className||""),ref:function(t){return e._infScroll=t},style:t},this.props.pullDownToRefresh&&i.a.createElement("div",{style:{position:"relative"},ref:function(t){return e._pullDown=t}},i.a.createElement("div",{style:{position:"absolute",left:0,right:0,top:-1*this.maxPullDownDistance}},this.state.pullToRefreshThresholdBreached?this.props.releaseToRefreshContent:this.props.pullDownToRefreshContent)),this.props.children,!this.state.showLoader&&!n&&this.props.hasMore&&this.props.loader,this.state.showLoader&&this.props.hasMore&&this.props.loader,!this.props.hasMore&&this.props.endMessage))},t}(r.Component),Ce=n(35),Te=H((function(e){return{state:e}}))((function(){var e,t=a.a.get().interfaceLocale,n=b((function(e){return e.chatHistoryChannels})),o=b((function(e){return e.errorType})),s=b((function(e){return e.chatterBoxSessionToken})),u=b((function(e){return e.loginUserId})),c=b((function(e){return e.users})),l=b((function(e){return e.chatContext.chatHistoryWindow.isMaximized})),h=b((function(e){return e.unreadChannelCount})),d=Object(r.useState)([]),f=Object($.a)(d,2),p=f[0],m=f[1],g=Object(r.useState)(!1),v=Object($.a)(g,2),y=v[0],_=v[1],w=b((function(e){return e.hasMoreChatHistoryChannels})),E=window.innerWidth,S=Object(r.useState)(E<be.e),M=Object($.a)(S,2),O=M[0],A=M[1],C=Object(r.useState)(O),T=Object($.a)(C,2),k=T[0],x=T[1],j=function(e){return Q.a.dispatch(X.b.setChatHistoryWindowIsMaximized(e))},I=function(){window.innerWidth<be.e?(x(!0),A(!0),j(!1)):(x(!1),A(!1))};Object(r.useEffect)((function(){return window.addEventListener("resize",I),function(){return window.removeEventListener("resize",I)}}),[]),Object(r.useEffect)((function(){if(s&&u&&null!==n){var e=Object.keys(n)||[];0===(null==e?void 0:e.length)&&_(!0);var t=[];null==e||e.forEach((function(e){t.push(n[e].userId)})),m(t),Q.a.dispatch(X.b.mwFetchUserData({chatUserIds:[].concat(t,[u]),users:c}))}}),[n,u,s]),Object(r.useEffect)((function(){null!==c&&null!==n&&p.every((function(e){return Object.keys(c).includes(e)}))&&_(!0)}),[c,n]);var R,N=function(){j(!l)},P=function(){x(!0)},D=function(){Ce.a.getPreviousChatHistoryChannels(u)},U=null===(e=n&&Object.keys(n))||void 0===e?void 0:e.length;return i.a.createElement(i.a.Fragment,null,O&&k?i.a.createElement("div",{className:"floating-mobile-icon theme__ac-color--background-color "+(h?"border-class":""),"data-count":0!==h?h:"",onClick:function(){x(!1)}},i.a.createElement(pe,null)):i.a.createElement("div",{className:"conversation-list",tabIndex:0},i.a.createElement(ge,{connectionsCount:U,isMaximized:l,maximizeToggle:N,closeChatWindow:P}),i.a.createElement("div",{className:"overlay-container"},i.a.createElement("div",{id:"ConversationWindow",className:l||O?"conversation-list-scrollable":"conversation-list-scrollable minimized"},i.a.createElement("div",null,y?i.a.createElement(Ae,{dataLength:null===(R=n&&Object.keys(n))||void 0===R?void 0:R.length,next:D,hasMore:w,scrollableTarget:"ConversationWindow",loader:i.a.createElement("p",{className:"loader"},"loading...")},i.a.createElement("div",null,function(){var e=[],r=n&&Object.keys(n);if(l||O)if((null==r?void 0:r.length)>0)r.forEach((function(t){var r,o,s=n[t],a=c[s.userId]||{name:"",designation:"",organisation:"",photo:""};a.userId=s.userId;var l=s.lastMessageSentBy?null===(r=c[s.lastMessageSentBy])||void 0===r||null===(o=r.name)||void 0===o?void 0:o.split(" ")[0]:"";u===s.lastMessageSentBy&&(l="you");var h={lastMessage:s.lastMessage,lastMessageSentBy:l,timeStamp:s.timeStamp,hasUnreadMessages:s.hasUnreadMessages},d=i.a.createElement(he,{key:t,userDetails:a,messageDetails:h,isCollapsed:!0});e.push(d)}));else{var o=ce.a.info.constructLocalizedInfoMessage(t,["noChatHistory_msg1"]),s="".concat(o[0].message);e.push(i.a.createElement("span",{key:"noChatHistory_msg1",className:"info-message"},s))}return e}())):i.a.createElement("p",{className:"loader"},"loading..."))),o!==ve.a.NO_ERROR&&o!==ve.a.USER_NOT_ACTIVATE_ERROR&&(l||O)?i.a.createElement(ye,{errorType:o}):null)))})),ke=(n(315),function(){return i.a.createElement("div",{className:"chat-history"},i.a.createElement(Te,null))}),xe=n(29),je=n.n(xe),Ie=(n(317),n(13)),Re=/((http|ftp|https):\/\/|www.)([\w_-]+(?:(?:\.[\w_-]+)+))([\w.,@?^=%&:\/~+#-]*[\w@?^=%&\/~+#-])/g;function Ne(e){var t=e.data,n=e.isMine,r=e.startsSequence,o=e.endsSequence,s=je()(t.timestamp).format("LLLL");return i.a.createElement("div",{className:["message","".concat(n?"mine":""),"".concat(r?"start":""),"".concat(o?"end":"")].join(" ")},i.a.createElement("div",{className:"bubble-container "},i.a.createElement("div",{className:["bubble","".concat(n?"":"theme__ac-color--background-color theme__ac-color--border-color")].join(" "),title:s},function(e){try{var t=function(){if(!e)return{v:[]};var t=e.match(Re);if(!t)return{v:[{type:"text",content:e}]};for(var n=[e],r=function(e){n=n.flatMap((function(n){return n.split(t[e])}))},i=0;i<t.length;i++)r(i);for(var o=[],s=0;s<n.length;s++)o.push({type:"text",content:n[s]}),t[s]&&o.push({type:"url",content:t[s]});return{v:o}}();if("object"==typeof t)return t.v}catch(t){return Ie.a.logWarning("replace URL method has failed"),[{type:"text",content:e}]}}(t.message).map((function(e,t){var n=e.type,r=e.content;return"url"===n?0!==r.indexOf("https://")&&0!==r.indexOf("http://")?i.a.createElement("a",{key:"item-".concat(t),href:"https://"+r,target:"_blank",rel:"noopener noreferrer","data-dtm":ue},r):i.a.createElement("a",{key:"item-".concat(t),href:r,target:"_blank",rel:"noopener noreferrer","data-dtm":ue},r):i.a.createElement("span",{key:"item-".concat(t)},r)}))),o&&i.a.createElement("span",{className:"message-timestamp"},s)))}n(319);var Pe=n(41),De={getSessionToken:function(e,t,n){var r='{\n  chatSessionToken(eventEditionId: "'.concat(t,'")\n  {\n    appId\n    expiryTimeStamp\n    sessionToken\n  }\n}');return Pe.a.graphqlRequest(e,r).then((function(e){return e.body})).then(ce.a.fromSuccess).catch((function(e){return e}))},logChatEvent:function(e,t,n,r,i,o){var s='mutation {\n  logChatEvent(\n    eventName: "'.concat(n,'"\n    eventEditionId: "').concat(t,'"\n    timestamp: "').concat(r,'"\n    referrerUrl: "').concat(i,'"\n    targetParticipationId: "').concat(o,'" \n  )\n}');return Pe.a.graphqlRequest(e,s).then((function(e){return e.body})).then(ce.a.fromSuccess).catch((function(e){return e}))}},Ue=function(e,t){var n=a.a.get().eventEditionId,r=a.a.get().baseApiUrl,i=window.location.href,o=je()().toISOString();De.logChatEvent(r,n,e,o,i,t)};var Le=H((function(e){return{state:e}}))((function(e){var t=e.scrollToBottomRef,n=e.isMaximized,o=Q.a.dispatch,s=b((function(e){return e.chatContext.activeChatWindows}))[0],u=s?s.chatUsers[0]:null,c=b((function(e){return e.messages})),l=b((function(e){return e.chatterBoxSessionToken})),h=b((function(e){return e.loadingMessages})),d=b((function(e){return e.loginUserId})),f=b((function(e){return e.users})),p=f[u]||{name:"",designation:"",organisation:""},m=b((function(e){return e.hasMoreMessages})),g=Object(r.useState)([]),v=Object($.a)(g,2),y=v[0],_=v[1],w=!!document.documentMode,E=a.a.get().interfaceLocale,S=ce.a.ui.constructLocalizedInfoMessage(E,["loading"]),M="".concat(S[0].message),O=ce.a.info.constructLocalizedInfoMessage(E,["startConversation"]),A="".concat(O[0].message);Object(r.useEffect)((function(){T()}),[c]),Object(r.useEffect)((function(){C()}),[]),Object(r.useLayoutEffect)((function(){if(w){var e,t=document.getElementsByClassName("infinite-scroll-component__outerdiv")[1];return t&&(e=requestAnimationFrame((function(){t.scrollTop=t.scrollHeight}))),function(){return cancelAnimationFrame(e)}}}),[c]),Object(r.useEffect)((function(){n&&s&&s.unreadMessageCount>0&&(o(X.b.mwMarkAsRead()),Ue(be.a.seen,p.participationId),o(X.b.setActiveWindowUnreadMesageCount(0)))}),[y,n]),Object(r.useEffect)((function(){o(X.b.mwFetchUserData({chatUserIds:[e.userId],users:f}))}),[e.userId,f,o]);var C=function(){var e;w||(null===(e=t.current)||void 0===e||e.scrollIntoView())};Object(r.useEffect)((function(){return function(){o(X.b.startLoadingMessages())}}),[]),Object(r.useEffect)((function(){return l&&d&&o(X.b.mwLoadInitialMessages({loginUserId:d,chatUserId:e.userId,scrollToBottomCallback:C})),function(){l&&d&&o(X.b.mwUnregisterChannelHandler(e.userId))}}),[l,d]);var T=function(){try{var e=0,t=c.length;for(y=[];e<t;){var n=c[e-1],r=c[e],o=c[e+1],s=r.userId===d,a=je()(r.timestamp),u=!0,l=!0,h=!0;if(n){var f=je()(n.timestamp),p=je.a.duration(a.diff(f));n.userId===r.userId&&p.as("hours")<1&&(u=!1),p.as("hours")<1&&(h=!1)}if(o){var m=je()(o.timestamp),g=je.a.duration(m.diff(a));o.userId===r.userId&&g.as("hours")<1&&(l=!1)}y.push(i.a.createElement(Ne,{key:e,isMine:s,startsSequence:u,endsSequence:l,showTimestamp:h,data:r})),e+=1}_(y.reverse())}catch(e){Ie.a.logError("Error while rendering the messages",e)}};return i.a.createElement("div",{className:"message-list-box ".concat(n?"":"minimize")},h?i.a.createElement("span",{className:"match-scroll-component-loading message-list-actions"},M):i.a.createElement("div",{id:"scrollableDiv",className:"message-list-container"},i.a.createElement("div",{id:"scrollToBottom",ref:t}),i.a.createElement(Ae,{className:"infinite-scroll",dataLength:c.length,next:function(){o(X.b.mwLoadMoreMessages())},inverse:!0,hasMore:m,loader:i.a.createElement("p",{className:"message-list-actions"},i.a.createElement("b",null,"Loading...")),scrollableTarget:"scrollableDiv",endMessage:i.a.createElement("p",{className:"message-list-actions"},i.a.createElement("b",null,A))},y.map((function(e,t){return i.a.createElement("div",{key:t},e)})))))}));n(321),n(323);var Fe=function(e){var t=e.userId,n=e.user,r=e.isMaximized,o=W(),s=a.a.get(),u=n.participationId,c=s.participantProtectedDetailsPath.replace("{0}",u),l=function(){o(X.b.closeChatWindow(t))};return i.a.createElement("div",{className:"theme__ac-color--background-color toolbar"},i.a.createElement("div",{className:"left-items"},i.a.createElement("i",{className:"far fa-angle-left back-icon",role:"button",onClick:l,"data-dtm":ne,"data-dtm-attributes":JSON.stringify({targetParticipationId:u})}),i.a.createElement(le,{src:n.profileUrl,isOnline:n.isOnline})),i.a.createElement("div",{className:"toolbar-heading-wrapper"},i.a.createElement("div",{className:"text-primary toolbar-heading"},i.a.createElement("a",{href:c,"data-dtm":ie,"data-dtm-attributes":JSON.stringify({targetParticipationId:u})},n.name)),i.a.createElement("div",{className:"toolbar-subheading"},"".concat(n.designation)),i.a.createElement("div",{className:"toolbar-subheading"},"".concat(n.organisation))),i.a.createElement("i",{className:"minimize-icon fal fa-minus theme__ac-color--color ".concat(r?"":"minimize"),onClick:e.handleMinimize,role:"button",tabIndex:0,"data-dtm":te,"data-dtm-attributes":JSON.stringify({targetParticipationId:u})}),i.a.createElement(me,{closeChat:l,dtmTagValue:ee,dtmTagAttributes:{targetParticipationId:u},className:"toolbar-close-icon theme__ac-color--color"}))};n(325);function Be(e){var t,n=e.sendChat,o=(e.user,e.rightItems),s=e.isMaximized,u=Object(r.useState)(""),c=Object($.a)(u,2),l=c[0],h=c[1],d=b((function(e){return e.shouldClearDraft})),f=Object(r.useState)("empty-message"),p=Object($.a)(f,2),m=p[0],g=p[1],v=Object(r.useRef)(null),y=a.a.get().interfaceLocale,_=ce.a.info.constructLocalizedInfoMessage(y,["typeMessage"]),w="".concat(_[0].message),E=function(e){"Enter"!==e.key||e.shiftKey||(t.click(),h(""),e.nativeEvent.preventDefault())};return Object(r.useEffect)((function(){""!==l.trim()?g("theme__ac-color--color"):g("empty-message")}),[l]),Object(r.useEffect)((function(){d&&h(""),Q.a.dispatch(X.b.setShouldClearDraft(!1))}),[d]),i.a.createElement("div",{className:"compose ".concat(s?"":"minimize")},i.a.createElement("textarea",{className:"compose-input",placeholder:w,onKeyPress:E,value:l,ref:v,onChange:function(e){return h(e.target.value)}}),i.a.createElement("div",{className:"compose-divider"}),i.a.createElement("div",{className:"sent-btn "+m,ref:function(e){return t=e},role:"button",tabIndex:0,onClick:function(){""!==l.trim()&&(n(l.trim()),h("")),v.current.focus()},onKeyPress:E},o))}var He=function(){return i.a.createElement("svg",{width:"18px",height:"18px","aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"paper-plane",className:"svg-inline--fa fa-paper-plane fa-w-16",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},i.a.createElement("g",{id:"Page-1",stroke:"red",strokeWidth:"1",fill:"red",fillRule:"evenodd"},i.a.createElement("path",{fill:"currentColor",d:"M476 3.2L12.5 270.6c-18.1 10.4-15.8 35.6 2.2 43.2L121 358.4l287.3-253.2c5.5-4.9 13.3 2.6 8.6 8.3L176 407v80.5c0 23.6 28.5 32.9 42.5 15.8L282 426l124.6 52.2c14.2 6 30.4-2.9 33-18.2l72-432C515 7.8 493.3-6.8 476 3.2z"})))},qe={textMessage:function(e,t){return new Promise((function(n,r){var i={message:t};e.sendUserMessage(i).onSucceeded((function(e){console.log("new message :",e),n(!0)})).onFailed((function(e){window.chatterUiDispatcher.dispatch(X.b.setChatError(ve.a.GENERIC_ERROR)),console.log("error sending message :",e),Ie.a.logError("error sending message :",e),r(e)}))}))}},Ve=n(42),Ge={sendTextMessage:function(){var e=Object(Z.a)(Object(J.a)().mark((function e(t,n,r){var i,o;return Object(J.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ve.a.getChannel();case 2:return i=e.sent,e.next=5,qe.textMessage(i,t).then((function(){Ue(be.a.send,r)}));case 5:o={id:4,userId:n,message:t,timestamp:(new Date).getTime()},window.chatterUiDispatcher.dispatch(X.b.setNewMessage(o));case 7:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()},ze=H((function(e){return{state:e}}))((function(e){var t=e.isReady,n=W(),o=b((function(e){return e.chatContext.activeChatWindows}))[0],s=o?o.chatUsers[0]:null,a=b((function(e){return e.loginUserId})),u=!!o&&o.isMaximized,c=b((function(e){return e.users}))[s]||{name:"",designation:"",organisation:""},l=Object(r.useRef)(null),h=b((function(e){return e.errorType})),d=function(){var e=Object(Z.a)(Object(J.a)().mark((function e(n){var r,i;return Object(J.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=6;break}return i=c.participationId,e.next=4,Ge.sendTextMessage(n,a,i);case 4:Ce.a.getChatHistoryChannels(a),null===(r=l.current)||void 0===r||r.scrollIntoView();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){window.innerWidth<be.e&&!u&&n(X.b.closeChatWindow(s))};return Object(r.useEffect)((function(){return f(),window.addEventListener("resize",f),function(){return window.removeEventListener("resize",f)}}),[u]),i.a.createElement("div",{className:"chat-window"},s?i.a.createElement("div",{className:"message-list"},i.a.createElement(Fe,{handleMinimize:function(){Q.a.dispatch({type:X.a.CHAT_WINDOW_VIEW,payload:!u})},userId:s,user:c,isMaximized:u}),i.a.createElement("div",{className:"overlay-container"},t?i.a.createElement(Le,{userId:s,key:s,isMaximized:u,scrollToBottomRef:l}):u&&i.a.createElement("div",{className:"loader"},"Loading..."),i.a.createElement(Be,{rightItems:[i.a.createElement(He,{key:"photo"})],sendChat:d,isMaximized:u,userId:s,user:c}),h!==ve.a.NO_ERROR&&u?i.a.createElement(ye,{errorType:h}):null)):null)})),We=(n(327),n(67)),Ke=n.n(We),Ye=function(e){if(null!==e){var t=Ke.a.decode(e).sub;a.a.get().userId=t,window.chatterUiDispatcher.dispatch(X.b.setLoginUserId(t))}},Qe={getApiKey:function(e,t,n){return Pe.a.get("".concat(e,"v1/event-editions/").concat(t,"/algolia/token")).then((function(e){if(e.body&&e.body.errors&&e.body.errors.length)throw e.body;return ce.a.fromSuccess(e.body)})).catch((function(e){var t=e.errors||e.body&&e.body.errors||[];return ce.a.error.constructLocalizedErrorMessage(n,t.map((function(e){return e.code||e.extensions.code})))}))}},Je=n(20),Ze=function(){var e=a.a.get(),t=e.eventEditionId,n=e.baseApiUrl,r=e.interfaceLocale;Qe.getApiKey(n,t,r).then((function(e){var t=e.result.expiryEpochTime,n=new Date(1e3*t).toUTCString();Je.a.setCookie(be.c.ALGOLIA_TOKEN,e.result.token,n)})).catch((function(e){console.log("error getting algolia token :",e)}))},$e={setAlgoliaToken:function(){void 0===Je.a.getCookie(be.c.ALGOLIA_TOKEN)&&Ze()},renewAlogoliaToken:Ze},Xe=n(28),et=function(){var e=Je.a.getCookie(be.c.CHAT_SESSION_TOKEN),t=Je.a.getCookie(be.c.CHAT_APP_ID);if(void 0===e){var n=a.a.get(),r=n.eventEditionId,i=n.baseApiUrl,o=n.interfaceLocale;return De.getSessionToken(i,r,o).then((function(e){if(e&&e.errors&&e.errors.length)throw e;var t=new Date(1e3*e.chatSessionToken.expiryTimeStamp).toUTCString();Je.a.setCookie(be.c.CHAT_SESSION_TOKEN,e.chatSessionToken.sessionToken,t),Je.a.setCookie(be.c.CHAT_APP_ID,e.chatSessionToken.appId,t),window.chatterUiDispatcher.dispatch(X.b.setChatterBoxSessionToken(e.chatSessionToken))})).catch((function(e){window.chatterUiDispatcher.dispatch(X.b.setChatError(ve.a.GENERIC_ERROR)),Xe.a.isAuthFailure(e)||Ie.a.logError("error getting chatterbox session token :",e)}))}var s={appId:t,sessionToken:e};window.chatterUiDispatcher.dispatch(X.b.setChatterBoxSessionToken(s))},tt={restorePreviousContext:function(e,t){var n=Xe.a.getFromLocalStorage("chatContext:".concat(e,":").concat(t));null!==n&&window.innerWidth>=be.e?Q.a.dispatch(X.b.setChatContext(n)):Q.a.dispatch(X.b.setIsChatContextRestored(!0))},saveContext:function(e,t,n){Xe.a.saveToLocalStorage("chatContext:".concat(e,":").concat(t),n)}},nt=n(26),rt=n(68),it=function(){var e=Object(r.useState)(!1),t=Object($.a)(e,2),n=t[0],o=t[1],s=Object(r.useState)(!1),u=Object($.a)(s,2),c=u[0],l=u[1],h=b((function(e){return e.chatterBoxSessionToken})),d=b((function(e){return e.chatContext})),f=b((function(e){return e.isChatContextRestored})),p=b((function(e){return e.loginUserId})),m=b((function(e){return e.chatterBoxAppId})),g=b((function(e){return e.users})),v=a.a.get().eventEditionId;return Object(r.useEffect)((function(){Je.a.getToken().then((function(e){e&&(o(!0),Ye(e),$e.renewAlogoliaToken(),et())}))}),[]),Object(r.useEffect)((function(){p&&tt.restorePreviousContext(p,v)}),[p]),Object(r.useEffect)((function(){p&&tt.saveContext(p,v,d)}),[d]),Object(r.useEffect)((function(){if(h&&p){var e=function(){var e=Object(Z.a)(Object(J.a)().mark((function e(){return Object(J.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nt.a.connect(p,h,l.bind(null,!0));case 2:Ce.a.getChatHistoryChannels(p);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();nt.a.initialize(m),e()}}),[h,p,m]),Object(r.useEffect)((function(){var e=setInterval((function(){var e=Object.keys(g);e.length&&rt.a.getConnectionStatus(e)}),3e4);return function(){return clearInterval(e)}}),[g]),i.a.createElement("div",null,n&&f?i.a.createElement("div",{className:"chatUi"},i.a.createElement(ke,null),i.a.createElement(ze,{isReady:c})):null)},ot=n(32);a.a.initialize("reactSettingsChat");var st=window.authSettings,at=window.reactSettingsChat.props;st&&st.usePkce&&(ot.authController.initialize(st),ot.authController.addAccessTokenRenewedHandler((function(e){console.log("session is about to expire.....",e),$e.renewAlogoliaToken()})),ot.authController.addAccessTokenExpiredHandler((function(){console.log("session token expired"),window.chatterUiDispatcher.dispatch(X.b.setChatError(ve.a.INACTIVE_SESSION_EXPIRED_ERROR))})),st.forceLogin&&ot.authController.login(window.location.href).then((function(){ot.authController.getToken().then((function(e){ot.authController.hasClaim(!1,be.b.RxAtlasEe,at.context.eventEditionId).then((function(t){t&&Xe.a.hasParticipantClaim(e)&&s.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(q,{store:Q.a},i.a.createElement(it,null))),document.getElementById("chat"))}))}))})))}]);