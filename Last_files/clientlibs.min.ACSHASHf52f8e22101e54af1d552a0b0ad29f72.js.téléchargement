"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6436],{1740:(t,e,i)=>{var s=i(6454);rx.componentLoader.register({lightbox:class{constructor(t,e){this.options=e,this.element=t,this.contentLightbox=!1,this.init()}init(){this.addEventListeners()}addEventListeners(){this.element.addEventListener("click",(t=>{t.preventDefault(),this.openLightbox()})),this.element.addEventListener("keydown",(t=>{"Enter"===t.key&&(t.preventDefault(),this.openLightbox(!0))}))}openLightbox(t){this.contentLightbox||(this.contentLightbox=new s.Gz(this.element,this.options),this.contentLightbox.init()),this.contentLightbox.preOpen(t)}}})},6454:(t,e,i)=>{i.d(e,{Gz:()=>n,NM:()=>o});class s{constructor(t,e){this.element=t,this.options={modal:!1,...e},this.loader='<div class="lightbox__loader-wrapper"><div class="lightbox__loader theme__ac-color--border-top-color theme__ac-color--border-bottom-color"></div></div>',this.a11yKeysHandler=this.a11yKeys.bind(this),this.trapFocusHandler=this.trapFocus.bind(this),this.closeHandler=this.close.bind(this),this.ignoreFocusChanges=!1,this.isOpen=!1}init(){this.setupLayout()}setupLayout(){const t=document.querySelector(".lightbox__base");t?this.assignElenemts(t):this.createMarkup()}createMarkup(){this.markup={layout:document.createElement("DIV"),wrapper:document.createElement("DIV"),container:document.createElement("DIV"),inner:document.createElement("DIV"),overlay:document.createElement("DIV"),closeButton:document.createElement("A"),closeIcon:document.createElement("SPAN"),a11yblock:document.createElement("DIV")},this.markup.layout.classList.add("lightbox__base"),this.markup.layout.classList.add("lightbox__base--hidden"),this.markup.layout.setAttribute("aria-hidden","true"),this.markup.wrapper.classList.add("lightbox__wrapper"),this.markup.overlay.classList.add("lightbox__overlay"),this.markup.container.classList.add("lightbox__container"),this.markup.container.setAttribute("role","dialog"),this.markup.container.setAttribute("aria-modal","true"),this.markup.inner.classList.add("lightbox__inner"),this.markup.closeButton.setAttribute("href",""),this.markup.closeButton.classList.add("lightbox__closeButton"),this.markup.closeButton.setAttribute("tabindex",0),this.markup.closeIcon.classList.add("fa"),this.markup.closeIcon.classList.add("fa-close"),this.markup.a11yblock.setAttribute("tabindex",0),this.markup.layout.appendChild(this.markup.wrapper),this.markup.wrapper.appendChild(this.markup.a11yblock),this.markup.wrapper.appendChild(this.markup.container),this.markup.wrapper.appendChild(this.markup.a11yblock.cloneNode()),this.markup.wrapper.appendChild(this.markup.overlay),this.markup.container.appendChild(this.markup.closeButton),this.markup.container.appendChild(this.markup.inner),this.markup.closeButton.appendChild(this.markup.closeIcon),document.body.appendChild(this.markup.layout),this.markup.inner.innerHTML=this.loader}assignElenemts(t){this.markup={},this.markup.layout=t,this.markup.wrapper=t.querySelector(".lightbox__wrapper"),this.markup.container=t.querySelector(".lightbox__container"),this.markup.inner=t.querySelector(".lightbox__inner"),this.markup.closeButton=t.querySelector(".lightbox__closeButton"),this.markup.overlay=t.querySelector(".lightbox__overlay"),this.markup.a11yblock=this.markup.wrapper.querySelector("div")}setInternalListeners(){document.addEventListener("keyup",this.a11yKeysHandler,!0),document.addEventListener("focus",this.trapFocusHandler,!0),this.markup.closeButton.addEventListener("click",this.closeHandler),this.options.modal||this.markup.overlay.addEventListener("click",this.closeHandler)}removeInternalListeners(){document.removeEventListener("keyup",this.a11yKeysHandler,!0),document.removeEventListener("focus",this.trapFocusHandler,!0),this.markup.closeButton.removeEventListener("click",this.closeHandler),this.markup.overlay.removeEventListener("click",this.closeHandler)}trapFocus(t){this.ignoreFocusChanges||(this.markup.container.contains(t.target)?this.innerLastFocus=t.target:(this.focusFirstDescendant(this.markup.container),this.innerLastFocus=document.activeElement))}attemptFocus(t){this.ignoreFocusChanges=!0;try{t.focus()}catch(t){}return this.ignoreFocusChanges=!1,document.activeElement===t}focusFirstDescendant(t){for(let e=0;e<t.childNodes.length;e++){const i=t.childNodes[e];if(this.attemptFocus(i)||this.focusFirstDescendant(i))return!0}return!1}a11yKeys(t){if("Escape"===t.key)this.close(t)}open(t){this.isOpen||(this.isOpen=!0,this.lastFocus=document.activeElement,this.setInternalListeners(),this.markup.layout.classList.remove("lightbox__base--hidden"),this.markup.layout.setAttribute("aria-hidden","false"),document.documentElement.style.overflow="hidden",t&&this.markup.a11yblock.focus())}close(t){t.preventDefault(),this.isOpen&&(this.isOpen=!1,this.removeInternalListeners(),this.markup.layout.classList.add("lightbox__base--hidden"),this.markup.layout.setAttribute("aria-hidden","true"),document.documentElement.style.overflow="",this.markup.inner.innerHTML=this.loader,this.markup.container.style.maxHeight="",this.lastFocus&&this.lastFocus.focus())}fetchContent(t,e,i){fetch(t).then((t=>{if(!t.ok)throw new Error;return t.text()})).then((t=>{e.innerHTML=t,i()})).then((t=>(rx.script.handleScriptsAsync(this.markup.layout),t))).catch((t=>{throw new Error(t)}))}}class n extends s{constructor(t,e){super(t,e),this.keyboard=!1}handleLightboxType(){this.markup.layout.classList.remove("lightbox__base--image"),this.markup.layout.classList.add("lightbox__base--content"),window.addEventListener("resize",rx.debounce(this.checkSize.bind(this),250))}preOpen(t){const{location:e}=this.options,{inner:i}=this.markup,s=`${e.substring(0,e.indexOf(".html"))}/_jcr_content/root/responsivegrid_12colTop.html`;this.keyboard=t,this.handleLightboxType(),this.isOpen||(this.open(this.keyboard),this.keyboard=!1,this.fetchContent(s,i,this.checkSize.bind(this)))}checkSize(t){if(this.markup.container.removeAttribute("style"),window.innerWidth>992){const e=this.markup.inner.offsetHeight,i=this.markup.container.offsetHeight;let s=t||0;this.markup.container.style.maxHeight=`${e+i}px`,this.checkNotLoadedImages()&&s<30&&setTimeout((()=>{s++,this.checkSize(s)}),100)}else this.markup.container.style.maxHeight=""}checkNotLoadedImages(){const t=this.markup.layout.querySelectorAll("img"),e=[];return t.forEach((t=>{t.complete||e.push(t)})),e.length>0}}class o extends s{constructor(t,e){super(t,e),this.position=0,this.keyboard=!1,this.arrowNavigationHandler=this.arrowNavigation.bind(this),this.checkSizeHandler=rx.debounce(this.checkSize.bind(this),250),this.getViewportSizeHandler=rx.debounce(this.getViewportSize.bind(this),250),this.getViewportSize()}handleLightboxType(){this.markup.layout.classList.remove("lightbox__base--content"),this.markup.layout.classList.add("lightbox__base--image"),window.addEventListener("resize",this.getViewportSizeHandler),window.addEventListener("resize",this.checkSizeHandler)}preOpen(t){const{location:e,selector:i,position:s}=this.options,{inner:n}=this.markup,o=`${e}${i}${s-1}.html`;this.position=parseInt(s,10),this.keyboard=t,this.handleLightboxType(),this.isOpen||(this.open(this.keyboard),this.keyboard=!1,this.fetchContent(o,n,this.fetchCallback.bind(this)))}fetchCallback(){this.checkSize(),this.handleNavigation()}checkSize(){const t=this.markup.inner.querySelector(".img-resp__base").style.paddingBottom,e=parseFloat(t.substring(0,t.length-1)),i=this.windowHeight-274,s=this.getMaxWidth();this.markup.container.removeAttribute("style"),this.windowWidth>768&&s*e/100>i&&(this.markup.container.style.width=100*i/e+"px")}getMaxWidth(){let t=this.windowWidth;return this.windowWidth>1200?t=1160:this.windowWidth>992?t=940:this.windowWidth>768&&(t=720),t}getViewportSize(){this.windowWidth=window.innerWidth,this.windowHeight=window.innerHeight}handleNavigation(){const t=this.markup.inner.querySelector(".image-lightbox__chevron--prev"),e=this.markup.inner.querySelector(".image-lightbox__chevron--next"),{total:i}=this.options;1===this.position?t.classList.add("image-lightbox__chevron--hidden"):this.position===parseInt(i,10)&&e.classList.add("image-lightbox__chevron--hidden"),t.addEventListener("click",(()=>{this.position-=1,this.navigate()})),e.addEventListener("click",(()=>{this.position+=1,this.navigate()})),document.addEventListener("keyup",this.arrowNavigationHandler,!0)}arrowNavigation(t){const{total:e}=this.options;switch(t.key){case"ArrowLeft":this.position>1&&(this.position-=1,this.navigate());break;case"ArrowRight":this.position<parseInt(e,10)&&(this.position+=1,this.navigate())}}navigate(){const{location:t,selector:e}=this.options,{inner:i}=this.markup,s=`${t}${e}${this.position-1}.html`;document.removeEventListener("keyup",this.arrowNavigationHandler,!0),this.fetchContent(s,i,this.fetchCallback.bind(this))}close(t){super.close(t),document.removeEventListener("keyup",this.arrowNavigationHandler,!0),window.removeEventListener("resize",this.getViewportSizeHandler),window.removeEventListener("resize",this.checkSizeHandler)}}}},t=>{var e;e=1740,t(t.s=e)}]);